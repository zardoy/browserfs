var __defProp = Object.defineProperty;
var __getOwnPropDesc = Object.getOwnPropertyDescriptor;
var __getOwnPropNames = Object.getOwnPropertyNames;
var __hasOwnProp = Object.prototype.hasOwnProperty;
var __pow = Math.pow;
var __export = (target, all) => {
  for (var name in all)
    __defProp(target, name, { get: all[name], enumerable: true });
};
var __copyProps = (to, from2, except, desc) => {
  if (from2 && typeof from2 === "object" || typeof from2 === "function") {
    for (let key of __getOwnPropNames(from2))
      if (!__hasOwnProp.call(to, key) && key !== except)
        __defProp(to, key, { get: () => from2[key], enumerable: !(desc = __getOwnPropDesc(from2, key)) || desc.enumerable });
  }
  return to;
};
var __toCommonJS = (mod) => __copyProps(__defProp({}, "__esModule", { value: true }), mod);

// src/core/browserfs.ts
var browserfs_exports = {};
__export(browserfs_exports, {
  BFSRequire: () => BFSRequire,
  EmscriptenFS: () => BFSEmscriptenFS,
  Errors: () => api_error_exports,
  FileSystem: () => backends_default,
  configure: () => configure,
  configureAsync: () => configureAsync,
  getFileSystem: () => getFileSystem,
  initialize: () => initialize,
  install: () => install,
  registerFileSystem: () => registerFileSystem,
  setImmediate: () => setImmediate_default
});
module.exports = __toCommonJS(browserfs_exports);

// node-modules-polyfills:buffer
var buffer_exports = {};
__export(buffer_exports, {
  Buffer: () => Buffer2,
  INSPECT_MAX_BYTES: () => INSPECT_MAX_BYTES,
  SlowBuffer: () => SlowBuffer,
  isBuffer: () => isBuffer,
  kMaxLength: () => _kMaxLength
});
var lookup = [];
var revLookup = [];
var Arr = typeof Uint8Array !== "undefined" ? Uint8Array : Array;
var inited = false;
function init() {
  inited = true;
  var code = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";
  for (var i = 0, len = code.length; i < len; ++i) {
    lookup[i] = code[i];
    revLookup[code.charCodeAt(i)] = i;
  }
  revLookup["-".charCodeAt(0)] = 62;
  revLookup["_".charCodeAt(0)] = 63;
}
function toByteArray(b64) {
  if (!inited) {
    init();
  }
  var i, j, l, tmp, placeHolders, arr;
  var len = b64.length;
  if (len % 4 > 0) {
    throw new Error("Invalid string. Length must be a multiple of 4");
  }
  placeHolders = b64[len - 2] === "=" ? 2 : b64[len - 1] === "=" ? 1 : 0;
  arr = new Arr(len * 3 / 4 - placeHolders);
  l = placeHolders > 0 ? len - 4 : len;
  var L = 0;
  for (i = 0, j = 0; i < l; i += 4, j += 3) {
    tmp = revLookup[b64.charCodeAt(i)] << 18 | revLookup[b64.charCodeAt(i + 1)] << 12 | revLookup[b64.charCodeAt(i + 2)] << 6 | revLookup[b64.charCodeAt(i + 3)];
    arr[L++] = tmp >> 16 & 255;
    arr[L++] = tmp >> 8 & 255;
    arr[L++] = tmp & 255;
  }
  if (placeHolders === 2) {
    tmp = revLookup[b64.charCodeAt(i)] << 2 | revLookup[b64.charCodeAt(i + 1)] >> 4;
    arr[L++] = tmp & 255;
  } else if (placeHolders === 1) {
    tmp = revLookup[b64.charCodeAt(i)] << 10 | revLookup[b64.charCodeAt(i + 1)] << 4 | revLookup[b64.charCodeAt(i + 2)] >> 2;
    arr[L++] = tmp >> 8 & 255;
    arr[L++] = tmp & 255;
  }
  return arr;
}
function tripletToBase64(num) {
  return lookup[num >> 18 & 63] + lookup[num >> 12 & 63] + lookup[num >> 6 & 63] + lookup[num & 63];
}
function encodeChunk(uint8, start, end) {
  var tmp;
  var output = [];
  for (var i = start; i < end; i += 3) {
    tmp = (uint8[i] << 16) + (uint8[i + 1] << 8) + uint8[i + 2];
    output.push(tripletToBase64(tmp));
  }
  return output.join("");
}
function fromByteArray(uint8) {
  if (!inited) {
    init();
  }
  var tmp;
  var len = uint8.length;
  var extraBytes = len % 3;
  var output = "";
  var parts = [];
  var maxChunkLength = 16383;
  for (var i = 0, len2 = len - extraBytes; i < len2; i += maxChunkLength) {
    parts.push(encodeChunk(uint8, i, i + maxChunkLength > len2 ? len2 : i + maxChunkLength));
  }
  if (extraBytes === 1) {
    tmp = uint8[len - 1];
    output += lookup[tmp >> 2];
    output += lookup[tmp << 4 & 63];
    output += "==";
  } else if (extraBytes === 2) {
    tmp = (uint8[len - 2] << 8) + uint8[len - 1];
    output += lookup[tmp >> 10];
    output += lookup[tmp >> 4 & 63];
    output += lookup[tmp << 2 & 63];
    output += "=";
  }
  parts.push(output);
  return parts.join("");
}
function read(buffer, offset, isLE, mLen, nBytes) {
  var e, m;
  var eLen = nBytes * 8 - mLen - 1;
  var eMax = (1 << eLen) - 1;
  var eBias = eMax >> 1;
  var nBits = -7;
  var i = isLE ? nBytes - 1 : 0;
  var d = isLE ? -1 : 1;
  var s = buffer[offset + i];
  i += d;
  e = s & (1 << -nBits) - 1;
  s >>= -nBits;
  nBits += eLen;
  for (; nBits > 0; e = e * 256 + buffer[offset + i], i += d, nBits -= 8) {
  }
  m = e & (1 << -nBits) - 1;
  e >>= -nBits;
  nBits += mLen;
  for (; nBits > 0; m = m * 256 + buffer[offset + i], i += d, nBits -= 8) {
  }
  if (e === 0) {
    e = 1 - eBias;
  } else if (e === eMax) {
    return m ? NaN : (s ? -1 : 1) * Infinity;
  } else {
    m = m + Math.pow(2, mLen);
    e = e - eBias;
  }
  return (s ? -1 : 1) * m * Math.pow(2, e - mLen);
}
function write(buffer, value, offset, isLE, mLen, nBytes) {
  var e, m, c;
  var eLen = nBytes * 8 - mLen - 1;
  var eMax = (1 << eLen) - 1;
  var eBias = eMax >> 1;
  var rt = mLen === 23 ? Math.pow(2, -24) - Math.pow(2, -77) : 0;
  var i = isLE ? 0 : nBytes - 1;
  var d = isLE ? 1 : -1;
  var s = value < 0 || value === 0 && 1 / value < 0 ? 1 : 0;
  value = Math.abs(value);
  if (isNaN(value) || value === Infinity) {
    m = isNaN(value) ? 1 : 0;
    e = eMax;
  } else {
    e = Math.floor(Math.log(value) / Math.LN2);
    if (value * (c = Math.pow(2, -e)) < 1) {
      e--;
      c *= 2;
    }
    if (e + eBias >= 1) {
      value += rt / c;
    } else {
      value += rt * Math.pow(2, 1 - eBias);
    }
    if (value * c >= 2) {
      e++;
      c /= 2;
    }
    if (e + eBias >= eMax) {
      m = 0;
      e = eMax;
    } else if (e + eBias >= 1) {
      m = (value * c - 1) * Math.pow(2, mLen);
      e = e + eBias;
    } else {
      m = value * Math.pow(2, eBias - 1) * Math.pow(2, mLen);
      e = 0;
    }
  }
  for (; mLen >= 8; buffer[offset + i] = m & 255, i += d, m /= 256, mLen -= 8) {
  }
  e = e << mLen | m;
  eLen += mLen;
  for (; eLen > 0; buffer[offset + i] = e & 255, i += d, e /= 256, eLen -= 8) {
  }
  buffer[offset + i - d] |= s * 128;
}
var toString = {}.toString;
var isArray = Array.isArray || function(arr) {
  return toString.call(arr) == "[object Array]";
};
var INSPECT_MAX_BYTES = 50;
Buffer2.TYPED_ARRAY_SUPPORT = globalThis.TYPED_ARRAY_SUPPORT !== void 0 ? globalThis.TYPED_ARRAY_SUPPORT : true;
var _kMaxLength = kMaxLength();
function kMaxLength() {
  return Buffer2.TYPED_ARRAY_SUPPORT ? 2147483647 : 1073741823;
}
function createBuffer(that, length) {
  if (kMaxLength() < length) {
    throw new RangeError("Invalid typed array length");
  }
  if (Buffer2.TYPED_ARRAY_SUPPORT) {
    that = new Uint8Array(length);
    that.__proto__ = Buffer2.prototype;
  } else {
    if (that === null) {
      that = new Buffer2(length);
    }
    that.length = length;
  }
  return that;
}
function Buffer2(arg, encodingOrOffset, length) {
  if (!Buffer2.TYPED_ARRAY_SUPPORT && !(this instanceof Buffer2)) {
    return new Buffer2(arg, encodingOrOffset, length);
  }
  if (typeof arg === "number") {
    if (typeof encodingOrOffset === "string") {
      throw new Error(
        "If encoding is specified then the first argument must be a string"
      );
    }
    return allocUnsafe(this, arg);
  }
  return from(this, arg, encodingOrOffset, length);
}
Buffer2.poolSize = 8192;
Buffer2._augment = function(arr) {
  arr.__proto__ = Buffer2.prototype;
  return arr;
};
function from(that, value, encodingOrOffset, length) {
  if (typeof value === "number") {
    throw new TypeError('"value" argument must not be a number');
  }
  if (typeof ArrayBuffer !== "undefined" && value instanceof ArrayBuffer) {
    return fromArrayBuffer(that, value, encodingOrOffset, length);
  }
  if (typeof value === "string") {
    return fromString(that, value, encodingOrOffset);
  }
  return fromObject(that, value);
}
Buffer2.from = function(value, encodingOrOffset, length) {
  return from(null, value, encodingOrOffset, length);
};
if (Buffer2.TYPED_ARRAY_SUPPORT) {
  Buffer2.prototype.__proto__ = Uint8Array.prototype;
  Buffer2.__proto__ = Uint8Array;
}
function assertSize(size) {
  if (typeof size !== "number") {
    throw new TypeError('"size" argument must be a number');
  } else if (size < 0) {
    throw new RangeError('"size" argument must not be negative');
  }
}
function alloc(that, size, fill2, encoding) {
  assertSize(size);
  if (size <= 0) {
    return createBuffer(that, size);
  }
  if (fill2 !== void 0) {
    return typeof encoding === "string" ? createBuffer(that, size).fill(fill2, encoding) : createBuffer(that, size).fill(fill2);
  }
  return createBuffer(that, size);
}
Buffer2.alloc = function(size, fill2, encoding) {
  return alloc(null, size, fill2, encoding);
};
function allocUnsafe(that, size) {
  assertSize(size);
  that = createBuffer(that, size < 0 ? 0 : checked(size) | 0);
  if (!Buffer2.TYPED_ARRAY_SUPPORT) {
    for (var i = 0; i < size; ++i) {
      that[i] = 0;
    }
  }
  return that;
}
Buffer2.allocUnsafe = function(size) {
  return allocUnsafe(null, size);
};
Buffer2.allocUnsafeSlow = function(size) {
  return allocUnsafe(null, size);
};
function fromString(that, string, encoding) {
  if (typeof encoding !== "string" || encoding === "") {
    encoding = "utf8";
  }
  if (!Buffer2.isEncoding(encoding)) {
    throw new TypeError('"encoding" must be a valid string encoding');
  }
  var length = byteLength(string, encoding) | 0;
  that = createBuffer(that, length);
  var actual = that.write(string, encoding);
  if (actual !== length) {
    that = that.slice(0, actual);
  }
  return that;
}
function fromArrayLike(that, array) {
  var length = array.length < 0 ? 0 : checked(array.length) | 0;
  that = createBuffer(that, length);
  for (var i = 0; i < length; i += 1) {
    that[i] = array[i] & 255;
  }
  return that;
}
function fromArrayBuffer(that, array, byteOffset, length) {
  array.byteLength;
  if (byteOffset < 0 || array.byteLength < byteOffset) {
    throw new RangeError("'offset' is out of bounds");
  }
  if (array.byteLength < byteOffset + (length || 0)) {
    throw new RangeError("'length' is out of bounds");
  }
  if (byteOffset === void 0 && length === void 0) {
    array = new Uint8Array(array);
  } else if (length === void 0) {
    array = new Uint8Array(array, byteOffset);
  } else {
    array = new Uint8Array(array, byteOffset, length);
  }
  if (Buffer2.TYPED_ARRAY_SUPPORT) {
    that = array;
    that.__proto__ = Buffer2.prototype;
  } else {
    that = fromArrayLike(that, array);
  }
  return that;
}
function fromObject(that, obj) {
  if (internalIsBuffer(obj)) {
    var len = checked(obj.length) | 0;
    that = createBuffer(that, len);
    if (that.length === 0) {
      return that;
    }
    obj.copy(that, 0, 0, len);
    return that;
  }
  if (obj) {
    if (typeof ArrayBuffer !== "undefined" && obj.buffer instanceof ArrayBuffer || "length" in obj) {
      if (typeof obj.length !== "number" || isnan(obj.length)) {
        return createBuffer(that, 0);
      }
      return fromArrayLike(that, obj);
    }
    if (obj.type === "Buffer" && isArray(obj.data)) {
      return fromArrayLike(that, obj.data);
    }
  }
  throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.");
}
function checked(length) {
  if (length >= kMaxLength()) {
    throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x" + kMaxLength().toString(16) + " bytes");
  }
  return length | 0;
}
function SlowBuffer(length) {
  if (+length != length) {
    length = 0;
  }
  return Buffer2.alloc(+length);
}
Buffer2.isBuffer = isBuffer;
function internalIsBuffer(b) {
  return !!(b != null && b._isBuffer);
}
Buffer2.compare = function compare(a, b) {
  if (!internalIsBuffer(a) || !internalIsBuffer(b)) {
    throw new TypeError("Arguments must be Buffers");
  }
  if (a === b)
    return 0;
  var x = a.length;
  var y = b.length;
  for (var i = 0, len = Math.min(x, y); i < len; ++i) {
    if (a[i] !== b[i]) {
      x = a[i];
      y = b[i];
      break;
    }
  }
  if (x < y)
    return -1;
  if (y < x)
    return 1;
  return 0;
};
Buffer2.isEncoding = function isEncoding(encoding) {
  switch (String(encoding).toLowerCase()) {
    case "hex":
    case "utf8":
    case "utf-8":
    case "ascii":
    case "latin1":
    case "binary":
    case "base64":
    case "ucs2":
    case "ucs-2":
    case "utf16le":
    case "utf-16le":
      return true;
    default:
      return false;
  }
};
Buffer2.concat = function concat(list, length) {
  if (!isArray(list)) {
    throw new TypeError('"list" argument must be an Array of Buffers');
  }
  if (list.length === 0) {
    return Buffer2.alloc(0);
  }
  var i;
  if (length === void 0) {
    length = 0;
    for (i = 0; i < list.length; ++i) {
      length += list[i].length;
    }
  }
  var buffer = Buffer2.allocUnsafe(length);
  var pos = 0;
  for (i = 0; i < list.length; ++i) {
    var buf = list[i];
    if (!internalIsBuffer(buf)) {
      throw new TypeError('"list" argument must be an Array of Buffers');
    }
    buf.copy(buffer, pos);
    pos += buf.length;
  }
  return buffer;
};
function byteLength(string, encoding) {
  if (internalIsBuffer(string)) {
    return string.length;
  }
  if (typeof ArrayBuffer !== "undefined" && typeof ArrayBuffer.isView === "function" && (ArrayBuffer.isView(string) || string instanceof ArrayBuffer)) {
    return string.byteLength;
  }
  if (typeof string !== "string") {
    string = "" + string;
  }
  var len = string.length;
  if (len === 0)
    return 0;
  var loweredCase = false;
  for (; ; ) {
    switch (encoding) {
      case "ascii":
      case "latin1":
      case "binary":
        return len;
      case "utf8":
      case "utf-8":
      case void 0:
        return utf8ToBytes(string).length;
      case "ucs2":
      case "ucs-2":
      case "utf16le":
      case "utf-16le":
        return len * 2;
      case "hex":
        return len >>> 1;
      case "base64":
        return base64ToBytes(string).length;
      default:
        if (loweredCase)
          return utf8ToBytes(string).length;
        encoding = ("" + encoding).toLowerCase();
        loweredCase = true;
    }
  }
}
Buffer2.byteLength = byteLength;
function slowToString(encoding, start, end) {
  var loweredCase = false;
  if (start === void 0 || start < 0) {
    start = 0;
  }
  if (start > this.length) {
    return "";
  }
  if (end === void 0 || end > this.length) {
    end = this.length;
  }
  if (end <= 0) {
    return "";
  }
  end >>>= 0;
  start >>>= 0;
  if (end <= start) {
    return "";
  }
  if (!encoding)
    encoding = "utf8";
  while (true) {
    switch (encoding) {
      case "hex":
        return hexSlice(this, start, end);
      case "utf8":
      case "utf-8":
        return utf8Slice(this, start, end);
      case "ascii":
        return asciiSlice(this, start, end);
      case "latin1":
      case "binary":
        return latin1Slice(this, start, end);
      case "base64":
        return base64Slice(this, start, end);
      case "ucs2":
      case "ucs-2":
      case "utf16le":
      case "utf-16le":
        return utf16leSlice(this, start, end);
      default:
        if (loweredCase)
          throw new TypeError("Unknown encoding: " + encoding);
        encoding = (encoding + "").toLowerCase();
        loweredCase = true;
    }
  }
}
Buffer2.prototype._isBuffer = true;
function swap(b, n, m) {
  var i = b[n];
  b[n] = b[m];
  b[m] = i;
}
Buffer2.prototype.swap16 = function swap16() {
  var len = this.length;
  if (len % 2 !== 0) {
    throw new RangeError("Buffer size must be a multiple of 16-bits");
  }
  for (var i = 0; i < len; i += 2) {
    swap(this, i, i + 1);
  }
  return this;
};
Buffer2.prototype.swap32 = function swap32() {
  var len = this.length;
  if (len % 4 !== 0) {
    throw new RangeError("Buffer size must be a multiple of 32-bits");
  }
  for (var i = 0; i < len; i += 4) {
    swap(this, i, i + 3);
    swap(this, i + 1, i + 2);
  }
  return this;
};
Buffer2.prototype.swap64 = function swap64() {
  var len = this.length;
  if (len % 8 !== 0) {
    throw new RangeError("Buffer size must be a multiple of 64-bits");
  }
  for (var i = 0; i < len; i += 8) {
    swap(this, i, i + 7);
    swap(this, i + 1, i + 6);
    swap(this, i + 2, i + 5);
    swap(this, i + 3, i + 4);
  }
  return this;
};
Buffer2.prototype.toString = function toString2() {
  var length = this.length | 0;
  if (length === 0)
    return "";
  if (arguments.length === 0)
    return utf8Slice(this, 0, length);
  return slowToString.apply(this, arguments);
};
Buffer2.prototype.equals = function equals(b) {
  if (!internalIsBuffer(b))
    throw new TypeError("Argument must be a Buffer");
  if (this === b)
    return true;
  return Buffer2.compare(this, b) === 0;
};
Buffer2.prototype.inspect = function inspect() {
  var str = "";
  var max = INSPECT_MAX_BYTES;
  if (this.length > 0) {
    str = this.toString("hex", 0, max).match(/.{2}/g).join(" ");
    if (this.length > max)
      str += " ... ";
  }
  return "<Buffer " + str + ">";
};
Buffer2.prototype.compare = function compare2(target, start, end, thisStart, thisEnd) {
  if (!internalIsBuffer(target)) {
    throw new TypeError("Argument must be a Buffer");
  }
  if (start === void 0) {
    start = 0;
  }
  if (end === void 0) {
    end = target ? target.length : 0;
  }
  if (thisStart === void 0) {
    thisStart = 0;
  }
  if (thisEnd === void 0) {
    thisEnd = this.length;
  }
  if (start < 0 || end > target.length || thisStart < 0 || thisEnd > this.length) {
    throw new RangeError("out of range index");
  }
  if (thisStart >= thisEnd && start >= end) {
    return 0;
  }
  if (thisStart >= thisEnd) {
    return -1;
  }
  if (start >= end) {
    return 1;
  }
  start >>>= 0;
  end >>>= 0;
  thisStart >>>= 0;
  thisEnd >>>= 0;
  if (this === target)
    return 0;
  var x = thisEnd - thisStart;
  var y = end - start;
  var len = Math.min(x, y);
  var thisCopy = this.slice(thisStart, thisEnd);
  var targetCopy = target.slice(start, end);
  for (var i = 0; i < len; ++i) {
    if (thisCopy[i] !== targetCopy[i]) {
      x = thisCopy[i];
      y = targetCopy[i];
      break;
    }
  }
  if (x < y)
    return -1;
  if (y < x)
    return 1;
  return 0;
};
function bidirectionalIndexOf(buffer, val, byteOffset, encoding, dir) {
  if (buffer.length === 0)
    return -1;
  if (typeof byteOffset === "string") {
    encoding = byteOffset;
    byteOffset = 0;
  } else if (byteOffset > 2147483647) {
    byteOffset = 2147483647;
  } else if (byteOffset < -2147483648) {
    byteOffset = -2147483648;
  }
  byteOffset = +byteOffset;
  if (isNaN(byteOffset)) {
    byteOffset = dir ? 0 : buffer.length - 1;
  }
  if (byteOffset < 0)
    byteOffset = buffer.length + byteOffset;
  if (byteOffset >= buffer.length) {
    if (dir)
      return -1;
    else
      byteOffset = buffer.length - 1;
  } else if (byteOffset < 0) {
    if (dir)
      byteOffset = 0;
    else
      return -1;
  }
  if (typeof val === "string") {
    val = Buffer2.from(val, encoding);
  }
  if (internalIsBuffer(val)) {
    if (val.length === 0) {
      return -1;
    }
    return arrayIndexOf(buffer, val, byteOffset, encoding, dir);
  } else if (typeof val === "number") {
    val = val & 255;
    if (Buffer2.TYPED_ARRAY_SUPPORT && typeof Uint8Array.prototype.indexOf === "function") {
      if (dir) {
        return Uint8Array.prototype.indexOf.call(buffer, val, byteOffset);
      } else {
        return Uint8Array.prototype.lastIndexOf.call(buffer, val, byteOffset);
      }
    }
    return arrayIndexOf(buffer, [val], byteOffset, encoding, dir);
  }
  throw new TypeError("val must be string, number or Buffer");
}
function arrayIndexOf(arr, val, byteOffset, encoding, dir) {
  var indexSize = 1;
  var arrLength = arr.length;
  var valLength = val.length;
  if (encoding !== void 0) {
    encoding = String(encoding).toLowerCase();
    if (encoding === "ucs2" || encoding === "ucs-2" || encoding === "utf16le" || encoding === "utf-16le") {
      if (arr.length < 2 || val.length < 2) {
        return -1;
      }
      indexSize = 2;
      arrLength /= 2;
      valLength /= 2;
      byteOffset /= 2;
    }
  }
  function read2(buf, i2) {
    if (indexSize === 1) {
      return buf[i2];
    } else {
      return buf.readUInt16BE(i2 * indexSize);
    }
  }
  var i;
  if (dir) {
    var foundIndex = -1;
    for (i = byteOffset; i < arrLength; i++) {
      if (read2(arr, i) === read2(val, foundIndex === -1 ? 0 : i - foundIndex)) {
        if (foundIndex === -1)
          foundIndex = i;
        if (i - foundIndex + 1 === valLength)
          return foundIndex * indexSize;
      } else {
        if (foundIndex !== -1)
          i -= i - foundIndex;
        foundIndex = -1;
      }
    }
  } else {
    if (byteOffset + valLength > arrLength)
      byteOffset = arrLength - valLength;
    for (i = byteOffset; i >= 0; i--) {
      var found = true;
      for (var j = 0; j < valLength; j++) {
        if (read2(arr, i + j) !== read2(val, j)) {
          found = false;
          break;
        }
      }
      if (found)
        return i;
    }
  }
  return -1;
}
Buffer2.prototype.includes = function includes(val, byteOffset, encoding) {
  return this.indexOf(val, byteOffset, encoding) !== -1;
};
Buffer2.prototype.indexOf = function indexOf(val, byteOffset, encoding) {
  return bidirectionalIndexOf(this, val, byteOffset, encoding, true);
};
Buffer2.prototype.lastIndexOf = function lastIndexOf(val, byteOffset, encoding) {
  return bidirectionalIndexOf(this, val, byteOffset, encoding, false);
};
function hexWrite(buf, string, offset, length) {
  offset = Number(offset) || 0;
  var remaining = buf.length - offset;
  if (!length) {
    length = remaining;
  } else {
    length = Number(length);
    if (length > remaining) {
      length = remaining;
    }
  }
  var strLen = string.length;
  if (strLen % 2 !== 0)
    throw new TypeError("Invalid hex string");
  if (length > strLen / 2) {
    length = strLen / 2;
  }
  for (var i = 0; i < length; ++i) {
    var parsed = parseInt(string.substr(i * 2, 2), 16);
    if (isNaN(parsed))
      return i;
    buf[offset + i] = parsed;
  }
  return i;
}
function utf8Write(buf, string, offset, length) {
  return blitBuffer(utf8ToBytes(string, buf.length - offset), buf, offset, length);
}
function asciiWrite(buf, string, offset, length) {
  return blitBuffer(asciiToBytes(string), buf, offset, length);
}
function latin1Write(buf, string, offset, length) {
  return asciiWrite(buf, string, offset, length);
}
function base64Write(buf, string, offset, length) {
  return blitBuffer(base64ToBytes(string), buf, offset, length);
}
function ucs2Write(buf, string, offset, length) {
  return blitBuffer(utf16leToBytes(string, buf.length - offset), buf, offset, length);
}
Buffer2.prototype.write = function write2(string, offset, length, encoding) {
  if (offset === void 0) {
    encoding = "utf8";
    length = this.length;
    offset = 0;
  } else if (length === void 0 && typeof offset === "string") {
    encoding = offset;
    length = this.length;
    offset = 0;
  } else if (isFinite(offset)) {
    offset = offset | 0;
    if (isFinite(length)) {
      length = length | 0;
      if (encoding === void 0)
        encoding = "utf8";
    } else {
      encoding = length;
      length = void 0;
    }
  } else {
    throw new Error(
      "Buffer.write(string, encoding, offset[, length]) is no longer supported"
    );
  }
  var remaining = this.length - offset;
  if (length === void 0 || length > remaining)
    length = remaining;
  if (string.length > 0 && (length < 0 || offset < 0) || offset > this.length) {
    throw new RangeError("Attempt to write outside buffer bounds");
  }
  if (!encoding)
    encoding = "utf8";
  var loweredCase = false;
  for (; ; ) {
    switch (encoding) {
      case "hex":
        return hexWrite(this, string, offset, length);
      case "utf8":
      case "utf-8":
        return utf8Write(this, string, offset, length);
      case "ascii":
        return asciiWrite(this, string, offset, length);
      case "latin1":
      case "binary":
        return latin1Write(this, string, offset, length);
      case "base64":
        return base64Write(this, string, offset, length);
      case "ucs2":
      case "ucs-2":
      case "utf16le":
      case "utf-16le":
        return ucs2Write(this, string, offset, length);
      default:
        if (loweredCase)
          throw new TypeError("Unknown encoding: " + encoding);
        encoding = ("" + encoding).toLowerCase();
        loweredCase = true;
    }
  }
};
Buffer2.prototype.toJSON = function toJSON() {
  return {
    type: "Buffer",
    data: Array.prototype.slice.call(this._arr || this, 0)
  };
};
function base64Slice(buf, start, end) {
  if (start === 0 && end === buf.length) {
    return fromByteArray(buf);
  } else {
    return fromByteArray(buf.slice(start, end));
  }
}
function utf8Slice(buf, start, end) {
  end = Math.min(buf.length, end);
  var res = [];
  var i = start;
  while (i < end) {
    var firstByte = buf[i];
    var codePoint = null;
    var bytesPerSequence = firstByte > 239 ? 4 : firstByte > 223 ? 3 : firstByte > 191 ? 2 : 1;
    if (i + bytesPerSequence <= end) {
      var secondByte, thirdByte, fourthByte, tempCodePoint;
      switch (bytesPerSequence) {
        case 1:
          if (firstByte < 128) {
            codePoint = firstByte;
          }
          break;
        case 2:
          secondByte = buf[i + 1];
          if ((secondByte & 192) === 128) {
            tempCodePoint = (firstByte & 31) << 6 | secondByte & 63;
            if (tempCodePoint > 127) {
              codePoint = tempCodePoint;
            }
          }
          break;
        case 3:
          secondByte = buf[i + 1];
          thirdByte = buf[i + 2];
          if ((secondByte & 192) === 128 && (thirdByte & 192) === 128) {
            tempCodePoint = (firstByte & 15) << 12 | (secondByte & 63) << 6 | thirdByte & 63;
            if (tempCodePoint > 2047 && (tempCodePoint < 55296 || tempCodePoint > 57343)) {
              codePoint = tempCodePoint;
            }
          }
          break;
        case 4:
          secondByte = buf[i + 1];
          thirdByte = buf[i + 2];
          fourthByte = buf[i + 3];
          if ((secondByte & 192) === 128 && (thirdByte & 192) === 128 && (fourthByte & 192) === 128) {
            tempCodePoint = (firstByte & 15) << 18 | (secondByte & 63) << 12 | (thirdByte & 63) << 6 | fourthByte & 63;
            if (tempCodePoint > 65535 && tempCodePoint < 1114112) {
              codePoint = tempCodePoint;
            }
          }
      }
    }
    if (codePoint === null) {
      codePoint = 65533;
      bytesPerSequence = 1;
    } else if (codePoint > 65535) {
      codePoint -= 65536;
      res.push(codePoint >>> 10 & 1023 | 55296);
      codePoint = 56320 | codePoint & 1023;
    }
    res.push(codePoint);
    i += bytesPerSequence;
  }
  return decodeCodePointsArray(res);
}
var MAX_ARGUMENTS_LENGTH = 4096;
function decodeCodePointsArray(codePoints) {
  var len = codePoints.length;
  if (len <= MAX_ARGUMENTS_LENGTH) {
    return String.fromCharCode.apply(String, codePoints);
  }
  var res = "";
  var i = 0;
  while (i < len) {
    res += String.fromCharCode.apply(
      String,
      codePoints.slice(i, i += MAX_ARGUMENTS_LENGTH)
    );
  }
  return res;
}
function asciiSlice(buf, start, end) {
  var ret = "";
  end = Math.min(buf.length, end);
  for (var i = start; i < end; ++i) {
    ret += String.fromCharCode(buf[i] & 127);
  }
  return ret;
}
function latin1Slice(buf, start, end) {
  var ret = "";
  end = Math.min(buf.length, end);
  for (var i = start; i < end; ++i) {
    ret += String.fromCharCode(buf[i]);
  }
  return ret;
}
function hexSlice(buf, start, end) {
  var len = buf.length;
  if (!start || start < 0)
    start = 0;
  if (!end || end < 0 || end > len)
    end = len;
  var out = "";
  for (var i = start; i < end; ++i) {
    out += toHex(buf[i]);
  }
  return out;
}
function utf16leSlice(buf, start, end) {
  var bytes = buf.slice(start, end);
  var res = "";
  for (var i = 0; i < bytes.length; i += 2) {
    res += String.fromCharCode(bytes[i] + bytes[i + 1] * 256);
  }
  return res;
}
Buffer2.prototype.slice = function slice(start, end) {
  var len = this.length;
  start = ~~start;
  end = end === void 0 ? len : ~~end;
  if (start < 0) {
    start += len;
    if (start < 0)
      start = 0;
  } else if (start > len) {
    start = len;
  }
  if (end < 0) {
    end += len;
    if (end < 0)
      end = 0;
  } else if (end > len) {
    end = len;
  }
  if (end < start)
    end = start;
  var newBuf;
  if (Buffer2.TYPED_ARRAY_SUPPORT) {
    newBuf = this.subarray(start, end);
    newBuf.__proto__ = Buffer2.prototype;
  } else {
    var sliceLen = end - start;
    newBuf = new Buffer2(sliceLen, void 0);
    for (var i = 0; i < sliceLen; ++i) {
      newBuf[i] = this[i + start];
    }
  }
  return newBuf;
};
function checkOffset(offset, ext, length) {
  if (offset % 1 !== 0 || offset < 0)
    throw new RangeError("offset is not uint");
  if (offset + ext > length)
    throw new RangeError("Trying to access beyond buffer length");
}
Buffer2.prototype.readUIntLE = function readUIntLE(offset, byteLength2, noAssert) {
  offset = offset | 0;
  byteLength2 = byteLength2 | 0;
  if (!noAssert)
    checkOffset(offset, byteLength2, this.length);
  var val = this[offset];
  var mul = 1;
  var i = 0;
  while (++i < byteLength2 && (mul *= 256)) {
    val += this[offset + i] * mul;
  }
  return val;
};
Buffer2.prototype.readUIntBE = function readUIntBE(offset, byteLength2, noAssert) {
  offset = offset | 0;
  byteLength2 = byteLength2 | 0;
  if (!noAssert) {
    checkOffset(offset, byteLength2, this.length);
  }
  var val = this[offset + --byteLength2];
  var mul = 1;
  while (byteLength2 > 0 && (mul *= 256)) {
    val += this[offset + --byteLength2] * mul;
  }
  return val;
};
Buffer2.prototype.readUInt8 = function readUInt8(offset, noAssert) {
  if (!noAssert)
    checkOffset(offset, 1, this.length);
  return this[offset];
};
Buffer2.prototype.readUInt16LE = function readUInt16LE(offset, noAssert) {
  if (!noAssert)
    checkOffset(offset, 2, this.length);
  return this[offset] | this[offset + 1] << 8;
};
Buffer2.prototype.readUInt16BE = function readUInt16BE(offset, noAssert) {
  if (!noAssert)
    checkOffset(offset, 2, this.length);
  return this[offset] << 8 | this[offset + 1];
};
Buffer2.prototype.readUInt32LE = function readUInt32LE(offset, noAssert) {
  if (!noAssert)
    checkOffset(offset, 4, this.length);
  return (this[offset] | this[offset + 1] << 8 | this[offset + 2] << 16) + this[offset + 3] * 16777216;
};
Buffer2.prototype.readUInt32BE = function readUInt32BE(offset, noAssert) {
  if (!noAssert)
    checkOffset(offset, 4, this.length);
  return this[offset] * 16777216 + (this[offset + 1] << 16 | this[offset + 2] << 8 | this[offset + 3]);
};
Buffer2.prototype.readIntLE = function readIntLE(offset, byteLength2, noAssert) {
  offset = offset | 0;
  byteLength2 = byteLength2 | 0;
  if (!noAssert)
    checkOffset(offset, byteLength2, this.length);
  var val = this[offset];
  var mul = 1;
  var i = 0;
  while (++i < byteLength2 && (mul *= 256)) {
    val += this[offset + i] * mul;
  }
  mul *= 128;
  if (val >= mul)
    val -= Math.pow(2, 8 * byteLength2);
  return val;
};
Buffer2.prototype.readIntBE = function readIntBE(offset, byteLength2, noAssert) {
  offset = offset | 0;
  byteLength2 = byteLength2 | 0;
  if (!noAssert)
    checkOffset(offset, byteLength2, this.length);
  var i = byteLength2;
  var mul = 1;
  var val = this[offset + --i];
  while (i > 0 && (mul *= 256)) {
    val += this[offset + --i] * mul;
  }
  mul *= 128;
  if (val >= mul)
    val -= Math.pow(2, 8 * byteLength2);
  return val;
};
Buffer2.prototype.readInt8 = function readInt8(offset, noAssert) {
  if (!noAssert)
    checkOffset(offset, 1, this.length);
  if (!(this[offset] & 128))
    return this[offset];
  return (255 - this[offset] + 1) * -1;
};
Buffer2.prototype.readInt16LE = function readInt16LE(offset, noAssert) {
  if (!noAssert)
    checkOffset(offset, 2, this.length);
  var val = this[offset] | this[offset + 1] << 8;
  return val & 32768 ? val | 4294901760 : val;
};
Buffer2.prototype.readInt16BE = function readInt16BE(offset, noAssert) {
  if (!noAssert)
    checkOffset(offset, 2, this.length);
  var val = this[offset + 1] | this[offset] << 8;
  return val & 32768 ? val | 4294901760 : val;
};
Buffer2.prototype.readInt32LE = function readInt32LE(offset, noAssert) {
  if (!noAssert)
    checkOffset(offset, 4, this.length);
  return this[offset] | this[offset + 1] << 8 | this[offset + 2] << 16 | this[offset + 3] << 24;
};
Buffer2.prototype.readInt32BE = function readInt32BE(offset, noAssert) {
  if (!noAssert)
    checkOffset(offset, 4, this.length);
  return this[offset] << 24 | this[offset + 1] << 16 | this[offset + 2] << 8 | this[offset + 3];
};
Buffer2.prototype.readFloatLE = function readFloatLE(offset, noAssert) {
  if (!noAssert)
    checkOffset(offset, 4, this.length);
  return read(this, offset, true, 23, 4);
};
Buffer2.prototype.readFloatBE = function readFloatBE(offset, noAssert) {
  if (!noAssert)
    checkOffset(offset, 4, this.length);
  return read(this, offset, false, 23, 4);
};
Buffer2.prototype.readDoubleLE = function readDoubleLE(offset, noAssert) {
  if (!noAssert)
    checkOffset(offset, 8, this.length);
  return read(this, offset, true, 52, 8);
};
Buffer2.prototype.readDoubleBE = function readDoubleBE(offset, noAssert) {
  if (!noAssert)
    checkOffset(offset, 8, this.length);
  return read(this, offset, false, 52, 8);
};
function checkInt(buf, value, offset, ext, max, min) {
  if (!internalIsBuffer(buf))
    throw new TypeError('"buffer" argument must be a Buffer instance');
  if (value > max || value < min)
    throw new RangeError('"value" argument is out of bounds');
  if (offset + ext > buf.length)
    throw new RangeError("Index out of range");
}
Buffer2.prototype.writeUIntLE = function writeUIntLE(value, offset, byteLength2, noAssert) {
  value = +value;
  offset = offset | 0;
  byteLength2 = byteLength2 | 0;
  if (!noAssert) {
    var maxBytes = Math.pow(2, 8 * byteLength2) - 1;
    checkInt(this, value, offset, byteLength2, maxBytes, 0);
  }
  var mul = 1;
  var i = 0;
  this[offset] = value & 255;
  while (++i < byteLength2 && (mul *= 256)) {
    this[offset + i] = value / mul & 255;
  }
  return offset + byteLength2;
};
Buffer2.prototype.writeUIntBE = function writeUIntBE(value, offset, byteLength2, noAssert) {
  value = +value;
  offset = offset | 0;
  byteLength2 = byteLength2 | 0;
  if (!noAssert) {
    var maxBytes = Math.pow(2, 8 * byteLength2) - 1;
    checkInt(this, value, offset, byteLength2, maxBytes, 0);
  }
  var i = byteLength2 - 1;
  var mul = 1;
  this[offset + i] = value & 255;
  while (--i >= 0 && (mul *= 256)) {
    this[offset + i] = value / mul & 255;
  }
  return offset + byteLength2;
};
Buffer2.prototype.writeUInt8 = function writeUInt8(value, offset, noAssert) {
  value = +value;
  offset = offset | 0;
  if (!noAssert)
    checkInt(this, value, offset, 1, 255, 0);
  if (!Buffer2.TYPED_ARRAY_SUPPORT)
    value = Math.floor(value);
  this[offset] = value & 255;
  return offset + 1;
};
function objectWriteUInt16(buf, value, offset, littleEndian) {
  if (value < 0)
    value = 65535 + value + 1;
  for (var i = 0, j = Math.min(buf.length - offset, 2); i < j; ++i) {
    buf[offset + i] = (value & 255 << 8 * (littleEndian ? i : 1 - i)) >>> (littleEndian ? i : 1 - i) * 8;
  }
}
Buffer2.prototype.writeUInt16LE = function writeUInt16LE(value, offset, noAssert) {
  value = +value;
  offset = offset | 0;
  if (!noAssert)
    checkInt(this, value, offset, 2, 65535, 0);
  if (Buffer2.TYPED_ARRAY_SUPPORT) {
    this[offset] = value & 255;
    this[offset + 1] = value >>> 8;
  } else {
    objectWriteUInt16(this, value, offset, true);
  }
  return offset + 2;
};
Buffer2.prototype.writeUInt16BE = function writeUInt16BE(value, offset, noAssert) {
  value = +value;
  offset = offset | 0;
  if (!noAssert)
    checkInt(this, value, offset, 2, 65535, 0);
  if (Buffer2.TYPED_ARRAY_SUPPORT) {
    this[offset] = value >>> 8;
    this[offset + 1] = value & 255;
  } else {
    objectWriteUInt16(this, value, offset, false);
  }
  return offset + 2;
};
function objectWriteUInt32(buf, value, offset, littleEndian) {
  if (value < 0)
    value = 4294967295 + value + 1;
  for (var i = 0, j = Math.min(buf.length - offset, 4); i < j; ++i) {
    buf[offset + i] = value >>> (littleEndian ? i : 3 - i) * 8 & 255;
  }
}
Buffer2.prototype.writeUInt32LE = function writeUInt32LE(value, offset, noAssert) {
  value = +value;
  offset = offset | 0;
  if (!noAssert)
    checkInt(this, value, offset, 4, 4294967295, 0);
  if (Buffer2.TYPED_ARRAY_SUPPORT) {
    this[offset + 3] = value >>> 24;
    this[offset + 2] = value >>> 16;
    this[offset + 1] = value >>> 8;
    this[offset] = value & 255;
  } else {
    objectWriteUInt32(this, value, offset, true);
  }
  return offset + 4;
};
Buffer2.prototype.writeUInt32BE = function writeUInt32BE(value, offset, noAssert) {
  value = +value;
  offset = offset | 0;
  if (!noAssert)
    checkInt(this, value, offset, 4, 4294967295, 0);
  if (Buffer2.TYPED_ARRAY_SUPPORT) {
    this[offset] = value >>> 24;
    this[offset + 1] = value >>> 16;
    this[offset + 2] = value >>> 8;
    this[offset + 3] = value & 255;
  } else {
    objectWriteUInt32(this, value, offset, false);
  }
  return offset + 4;
};
Buffer2.prototype.writeIntLE = function writeIntLE(value, offset, byteLength2, noAssert) {
  value = +value;
  offset = offset | 0;
  if (!noAssert) {
    var limit = Math.pow(2, 8 * byteLength2 - 1);
    checkInt(this, value, offset, byteLength2, limit - 1, -limit);
  }
  var i = 0;
  var mul = 1;
  var sub = 0;
  this[offset] = value & 255;
  while (++i < byteLength2 && (mul *= 256)) {
    if (value < 0 && sub === 0 && this[offset + i - 1] !== 0) {
      sub = 1;
    }
    this[offset + i] = (value / mul >> 0) - sub & 255;
  }
  return offset + byteLength2;
};
Buffer2.prototype.writeIntBE = function writeIntBE(value, offset, byteLength2, noAssert) {
  value = +value;
  offset = offset | 0;
  if (!noAssert) {
    var limit = Math.pow(2, 8 * byteLength2 - 1);
    checkInt(this, value, offset, byteLength2, limit - 1, -limit);
  }
  var i = byteLength2 - 1;
  var mul = 1;
  var sub = 0;
  this[offset + i] = value & 255;
  while (--i >= 0 && (mul *= 256)) {
    if (value < 0 && sub === 0 && this[offset + i + 1] !== 0) {
      sub = 1;
    }
    this[offset + i] = (value / mul >> 0) - sub & 255;
  }
  return offset + byteLength2;
};
Buffer2.prototype.writeInt8 = function writeInt8(value, offset, noAssert) {
  value = +value;
  offset = offset | 0;
  if (!noAssert)
    checkInt(this, value, offset, 1, 127, -128);
  if (!Buffer2.TYPED_ARRAY_SUPPORT)
    value = Math.floor(value);
  if (value < 0)
    value = 255 + value + 1;
  this[offset] = value & 255;
  return offset + 1;
};
Buffer2.prototype.writeInt16LE = function writeInt16LE(value, offset, noAssert) {
  value = +value;
  offset = offset | 0;
  if (!noAssert)
    checkInt(this, value, offset, 2, 32767, -32768);
  if (Buffer2.TYPED_ARRAY_SUPPORT) {
    this[offset] = value & 255;
    this[offset + 1] = value >>> 8;
  } else {
    objectWriteUInt16(this, value, offset, true);
  }
  return offset + 2;
};
Buffer2.prototype.writeInt16BE = function writeInt16BE(value, offset, noAssert) {
  value = +value;
  offset = offset | 0;
  if (!noAssert)
    checkInt(this, value, offset, 2, 32767, -32768);
  if (Buffer2.TYPED_ARRAY_SUPPORT) {
    this[offset] = value >>> 8;
    this[offset + 1] = value & 255;
  } else {
    objectWriteUInt16(this, value, offset, false);
  }
  return offset + 2;
};
Buffer2.prototype.writeInt32LE = function writeInt32LE(value, offset, noAssert) {
  value = +value;
  offset = offset | 0;
  if (!noAssert)
    checkInt(this, value, offset, 4, 2147483647, -2147483648);
  if (Buffer2.TYPED_ARRAY_SUPPORT) {
    this[offset] = value & 255;
    this[offset + 1] = value >>> 8;
    this[offset + 2] = value >>> 16;
    this[offset + 3] = value >>> 24;
  } else {
    objectWriteUInt32(this, value, offset, true);
  }
  return offset + 4;
};
Buffer2.prototype.writeInt32BE = function writeInt32BE(value, offset, noAssert) {
  value = +value;
  offset = offset | 0;
  if (!noAssert)
    checkInt(this, value, offset, 4, 2147483647, -2147483648);
  if (value < 0)
    value = 4294967295 + value + 1;
  if (Buffer2.TYPED_ARRAY_SUPPORT) {
    this[offset] = value >>> 24;
    this[offset + 1] = value >>> 16;
    this[offset + 2] = value >>> 8;
    this[offset + 3] = value & 255;
  } else {
    objectWriteUInt32(this, value, offset, false);
  }
  return offset + 4;
};
function checkIEEE754(buf, value, offset, ext, max, min) {
  if (offset + ext > buf.length)
    throw new RangeError("Index out of range");
  if (offset < 0)
    throw new RangeError("Index out of range");
}
function writeFloat(buf, value, offset, littleEndian, noAssert) {
  if (!noAssert) {
    checkIEEE754(buf, value, offset, 4);
  }
  write(buf, value, offset, littleEndian, 23, 4);
  return offset + 4;
}
Buffer2.prototype.writeFloatLE = function writeFloatLE(value, offset, noAssert) {
  return writeFloat(this, value, offset, true, noAssert);
};
Buffer2.prototype.writeFloatBE = function writeFloatBE(value, offset, noAssert) {
  return writeFloat(this, value, offset, false, noAssert);
};
function writeDouble(buf, value, offset, littleEndian, noAssert) {
  if (!noAssert) {
    checkIEEE754(buf, value, offset, 8);
  }
  write(buf, value, offset, littleEndian, 52, 8);
  return offset + 8;
}
Buffer2.prototype.writeDoubleLE = function writeDoubleLE(value, offset, noAssert) {
  return writeDouble(this, value, offset, true, noAssert);
};
Buffer2.prototype.writeDoubleBE = function writeDoubleBE(value, offset, noAssert) {
  return writeDouble(this, value, offset, false, noAssert);
};
Buffer2.prototype.copy = function copy(target, targetStart, start, end) {
  if (!start)
    start = 0;
  if (!end && end !== 0)
    end = this.length;
  if (targetStart >= target.length)
    targetStart = target.length;
  if (!targetStart)
    targetStart = 0;
  if (end > 0 && end < start)
    end = start;
  if (end === start)
    return 0;
  if (target.length === 0 || this.length === 0)
    return 0;
  if (targetStart < 0) {
    throw new RangeError("targetStart out of bounds");
  }
  if (start < 0 || start >= this.length)
    throw new RangeError("sourceStart out of bounds");
  if (end < 0)
    throw new RangeError("sourceEnd out of bounds");
  if (end > this.length)
    end = this.length;
  if (target.length - targetStart < end - start) {
    end = target.length - targetStart + start;
  }
  var len = end - start;
  var i;
  if (this === target && start < targetStart && targetStart < end) {
    for (i = len - 1; i >= 0; --i) {
      target[i + targetStart] = this[i + start];
    }
  } else if (len < 1e3 || !Buffer2.TYPED_ARRAY_SUPPORT) {
    for (i = 0; i < len; ++i) {
      target[i + targetStart] = this[i + start];
    }
  } else {
    Uint8Array.prototype.set.call(
      target,
      this.subarray(start, start + len),
      targetStart
    );
  }
  return len;
};
Buffer2.prototype.fill = function fill(val, start, end, encoding) {
  if (typeof val === "string") {
    if (typeof start === "string") {
      encoding = start;
      start = 0;
      end = this.length;
    } else if (typeof end === "string") {
      encoding = end;
      end = this.length;
    }
    if (val.length === 1) {
      var code = val.charCodeAt(0);
      if (code < 256) {
        val = code;
      }
    }
    if (encoding !== void 0 && typeof encoding !== "string") {
      throw new TypeError("encoding must be a string");
    }
    if (typeof encoding === "string" && !Buffer2.isEncoding(encoding)) {
      throw new TypeError("Unknown encoding: " + encoding);
    }
  } else if (typeof val === "number") {
    val = val & 255;
  }
  if (start < 0 || this.length < start || this.length < end) {
    throw new RangeError("Out of range index");
  }
  if (end <= start) {
    return this;
  }
  start = start >>> 0;
  end = end === void 0 ? this.length : end >>> 0;
  if (!val)
    val = 0;
  var i;
  if (typeof val === "number") {
    for (i = start; i < end; ++i) {
      this[i] = val;
    }
  } else {
    var bytes = internalIsBuffer(val) ? val : utf8ToBytes(new Buffer2(val, encoding).toString());
    var len = bytes.length;
    for (i = 0; i < end - start; ++i) {
      this[i + start] = bytes[i % len];
    }
  }
  return this;
};
var INVALID_BASE64_RE = /[^+\/0-9A-Za-z-_]/g;
function base64clean(str) {
  str = stringtrim(str).replace(INVALID_BASE64_RE, "");
  if (str.length < 2)
    return "";
  while (str.length % 4 !== 0) {
    str = str + "=";
  }
  return str;
}
function stringtrim(str) {
  if (str.trim)
    return str.trim();
  return str.replace(/^\s+|\s+$/g, "");
}
function toHex(n) {
  if (n < 16)
    return "0" + n.toString(16);
  return n.toString(16);
}
function utf8ToBytes(string, units) {
  units = units || Infinity;
  var codePoint;
  var length = string.length;
  var leadSurrogate = null;
  var bytes = [];
  for (var i = 0; i < length; ++i) {
    codePoint = string.charCodeAt(i);
    if (codePoint > 55295 && codePoint < 57344) {
      if (!leadSurrogate) {
        if (codePoint > 56319) {
          if ((units -= 3) > -1)
            bytes.push(239, 191, 189);
          continue;
        } else if (i + 1 === length) {
          if ((units -= 3) > -1)
            bytes.push(239, 191, 189);
          continue;
        }
        leadSurrogate = codePoint;
        continue;
      }
      if (codePoint < 56320) {
        if ((units -= 3) > -1)
          bytes.push(239, 191, 189);
        leadSurrogate = codePoint;
        continue;
      }
      codePoint = (leadSurrogate - 55296 << 10 | codePoint - 56320) + 65536;
    } else if (leadSurrogate) {
      if ((units -= 3) > -1)
        bytes.push(239, 191, 189);
    }
    leadSurrogate = null;
    if (codePoint < 128) {
      if ((units -= 1) < 0)
        break;
      bytes.push(codePoint);
    } else if (codePoint < 2048) {
      if ((units -= 2) < 0)
        break;
      bytes.push(
        codePoint >> 6 | 192,
        codePoint & 63 | 128
      );
    } else if (codePoint < 65536) {
      if ((units -= 3) < 0)
        break;
      bytes.push(
        codePoint >> 12 | 224,
        codePoint >> 6 & 63 | 128,
        codePoint & 63 | 128
      );
    } else if (codePoint < 1114112) {
      if ((units -= 4) < 0)
        break;
      bytes.push(
        codePoint >> 18 | 240,
        codePoint >> 12 & 63 | 128,
        codePoint >> 6 & 63 | 128,
        codePoint & 63 | 128
      );
    } else {
      throw new Error("Invalid code point");
    }
  }
  return bytes;
}
function asciiToBytes(str) {
  var byteArray = [];
  for (var i = 0; i < str.length; ++i) {
    byteArray.push(str.charCodeAt(i) & 255);
  }
  return byteArray;
}
function utf16leToBytes(str, units) {
  var c, hi, lo;
  var byteArray = [];
  for (var i = 0; i < str.length; ++i) {
    if ((units -= 2) < 0)
      break;
    c = str.charCodeAt(i);
    hi = c >> 8;
    lo = c % 256;
    byteArray.push(lo);
    byteArray.push(hi);
  }
  return byteArray;
}
function base64ToBytes(str) {
  return toByteArray(base64clean(str));
}
function blitBuffer(src, dst, offset, length) {
  for (var i = 0; i < length; ++i) {
    if (i + offset >= dst.length || i >= src.length)
      break;
    dst[i + offset] = src[i];
  }
  return i;
}
function isnan(val) {
  return val !== val;
}
function isBuffer(obj) {
  return obj != null && (!!obj._isBuffer || isFastBuffer(obj) || isSlowBuffer(obj));
}
function isFastBuffer(obj) {
  return !!obj.constructor && typeof obj.constructor.isBuffer === "function" && obj.constructor.isBuffer(obj);
}
function isSlowBuffer(obj) {
  return typeof obj.readFloatLE === "function" && typeof obj.slice === "function" && isFastBuffer(obj.slice(0, 0));
}

// src/core/api_error.ts
var api_error_exports = {};
__export(api_error_exports, {
  ApiError: () => ApiError,
  ErrorCode: () => ErrorCode,
  ErrorStrings: () => ErrorStrings
});
var ErrorCode = /* @__PURE__ */ ((ErrorCode2) => {
  ErrorCode2[ErrorCode2["EPERM"] = 1] = "EPERM";
  ErrorCode2[ErrorCode2["ENOENT"] = 2] = "ENOENT";
  ErrorCode2[ErrorCode2["EIO"] = 5] = "EIO";
  ErrorCode2[ErrorCode2["EBADF"] = 9] = "EBADF";
  ErrorCode2[ErrorCode2["EACCES"] = 13] = "EACCES";
  ErrorCode2[ErrorCode2["EBUSY"] = 16] = "EBUSY";
  ErrorCode2[ErrorCode2["EEXIST"] = 17] = "EEXIST";
  ErrorCode2[ErrorCode2["ENOTDIR"] = 20] = "ENOTDIR";
  ErrorCode2[ErrorCode2["EISDIR"] = 21] = "EISDIR";
  ErrorCode2[ErrorCode2["EINVAL"] = 22] = "EINVAL";
  ErrorCode2[ErrorCode2["EFBIG"] = 27] = "EFBIG";
  ErrorCode2[ErrorCode2["ENOSPC"] = 28] = "ENOSPC";
  ErrorCode2[ErrorCode2["EROFS"] = 30] = "EROFS";
  ErrorCode2[ErrorCode2["ENOTEMPTY"] = 39] = "ENOTEMPTY";
  ErrorCode2[ErrorCode2["ENOTSUP"] = 95] = "ENOTSUP";
  return ErrorCode2;
})(ErrorCode || {});
var ErrorStrings = {};
ErrorStrings[1 /* EPERM */] = "Operation not permitted.";
ErrorStrings[2 /* ENOENT */] = "No such file or directory.";
ErrorStrings[5 /* EIO */] = "Input/output error.";
ErrorStrings[9 /* EBADF */] = "Bad file descriptor.";
ErrorStrings[13 /* EACCES */] = "Permission denied.";
ErrorStrings[16 /* EBUSY */] = "Resource busy or locked.";
ErrorStrings[17 /* EEXIST */] = "File exists.";
ErrorStrings[20 /* ENOTDIR */] = "File is not a directory.";
ErrorStrings[21 /* EISDIR */] = "File is a directory.";
ErrorStrings[22 /* EINVAL */] = "Invalid argument.";
ErrorStrings[27 /* EFBIG */] = "File is too big.";
ErrorStrings[28 /* ENOSPC */] = "No space left on disk.";
ErrorStrings[30 /* EROFS */] = "Cannot modify a read-only file system.";
ErrorStrings[39 /* ENOTEMPTY */] = "Directory is not empty.";
ErrorStrings[95 /* ENOTSUP */] = "Operation is not supported.";
var ApiError = class extends Error {
  /**
   * Represents a BrowserFS error. Passed back to applications after a failed
   * call to the BrowserFS API.
   *
   * Error codes mirror those returned by regular Unix file operations, which is
   * what Node returns.
   * @constructor ApiError
   * @param type The type of the error.
   * @param [message] A descriptive error message.
   */
  constructor(type, message = ErrorStrings[type], path) {
    super(message);
    // Unsupported.
    this.syscall = "";
    this.errno = type;
    this.code = ErrorCode[type];
    this.path = path;
    this.message = `Error: ${this.code}: ${message}${this.path ? `, '${this.path}'` : ""}`;
  }
  static fromJSON(json) {
    const err2 = new ApiError(json.errno, json.message, json.path);
    err2.code = json.code;
    err2.stack = json.stack;
    return err2;
  }
  /**
   * Creates an ApiError object from a buffer.
   */
  static fromBuffer(buffer, i = 0) {
    return ApiError.fromJSON(JSON.parse(buffer.toString("utf8", i + 4, i + 4 + buffer.readUInt32LE(i))));
  }
  static FileError(code, p) {
    return new ApiError(code, ErrorStrings[code], p);
  }
  static EACCES(path) {
    return this.FileError(13 /* EACCES */, path);
  }
  static ENOENT(path) {
    return this.FileError(2 /* ENOENT */, path);
  }
  static EEXIST(path) {
    return this.FileError(17 /* EEXIST */, path);
  }
  static EISDIR(path) {
    return this.FileError(21 /* EISDIR */, path);
  }
  static ENOTDIR(path) {
    return this.FileError(20 /* ENOTDIR */, path);
  }
  static EPERM(path) {
    return this.FileError(1 /* EPERM */, path);
  }
  static ENOTEMPTY(path) {
    return this.FileError(39 /* ENOTEMPTY */, path);
  }
  /**
   * @return A friendly error message.
   */
  toString() {
    return this.message;
  }
  toJSON() {
    return {
      errno: this.errno,
      code: this.code,
      path: this.path,
      stack: this.stack,
      message: this.message
    };
  }
  /**
   * Writes the API error into a buffer.
   */
  writeToBuffer(buffer = Buffer2.alloc(this.bufferSize()), i = 0) {
    const bytesWritten = buffer.write(JSON.stringify(this.toJSON()), i + 4);
    buffer.writeUInt32LE(bytesWritten, i);
    return buffer;
  }
  /**
   * The size of the API error in buffer-form in bytes.
   */
  bufferSize() {
    return 4 + Buffer2.byteLength(JSON.stringify(this.toJSON()));
  }
};

// src/core/file_flag.ts
var _FileFlag = class {
  /**
   * Get an object representing the given file flag.
   * @param modeStr The string representing the flag
   * @return The FileFlag object representing the flag
   * @throw when the flag string is invalid
   */
  static getFileFlag(flagStr) {
    if (!_FileFlag.flagCache.has(flagStr)) {
      _FileFlag.flagCache.set(flagStr, new _FileFlag(flagStr));
    }
    return _FileFlag.flagCache.get(flagStr);
  }
  /**
   * This should never be called directly.
   * @param modeStr The string representing the mode
   * @throw when the mode string is invalid
   */
  constructor(flagStr) {
    this.flagStr = flagStr;
    if (_FileFlag.validFlagStrs.indexOf(flagStr) < 0) {
      throw new ApiError(22 /* EINVAL */, "Invalid flag: " + flagStr);
    }
  }
  /**
   * Get the underlying flag string for this flag.
   */
  getFlagString() {
    return this.flagStr;
  }
  /**
   * Get the equivalent mode (0b0xxx: read, write, execute)
   * Note: Execute will always be 0
   */
  getMode() {
    let mode = 0;
    mode <<= 1;
    mode += +this.isReadable();
    mode <<= 1;
    mode += +this.isWriteable();
    mode <<= 1;
    return mode;
  }
  /**
   * Returns true if the file is readable.
   */
  isReadable() {
    return this.flagStr.indexOf("r") !== -1 || this.flagStr.indexOf("+") !== -1;
  }
  /**
   * Returns true if the file is writeable.
   */
  isWriteable() {
    return this.flagStr.indexOf("w") !== -1 || this.flagStr.indexOf("a") !== -1 || this.flagStr.indexOf("+") !== -1;
  }
  /**
   * Returns true if the file mode should truncate.
   */
  isTruncating() {
    return this.flagStr.indexOf("w") !== -1;
  }
  /**
   * Returns true if the file is appendable.
   */
  isAppendable() {
    return this.flagStr.indexOf("a") !== -1;
  }
  /**
   * Returns true if the file is open in synchronous mode.
   */
  isSynchronous() {
    return this.flagStr.indexOf("s") !== -1;
  }
  /**
   * Returns true if the file is open in exclusive mode.
   */
  isExclusive() {
    return this.flagStr.indexOf("x") !== -1;
  }
  /**
   * Returns one of the static fields on this object that indicates the
   * appropriate response to the path existing.
   */
  pathExistsAction() {
    if (this.isExclusive()) {
      return 1 /* THROW_EXCEPTION */;
    } else if (this.isTruncating()) {
      return 2 /* TRUNCATE_FILE */;
    } else {
      return 0 /* NOP */;
    }
  }
  /**
   * Returns one of the static fields on this object that indicates the
   * appropriate response to the path not existing.
   */
  pathNotExistsAction() {
    if ((this.isWriteable() || this.isAppendable()) && this.flagStr !== "r+") {
      return 3 /* CREATE_FILE */;
    } else {
      return 1 /* THROW_EXCEPTION */;
    }
  }
};
var FileFlag = _FileFlag;
// Contains cached FileMode instances.
FileFlag.flagCache = /* @__PURE__ */ new Map();
// Array of valid mode strings.
FileFlag.validFlagStrs = ["r", "r+", "rs", "rs+", "w", "wx", "w+", "wx+", "a", "ax", "a+", "ax+"];

// node-modules-polyfills:path
var path_exports = {};
__export(path_exports, {
  basename: () => basename,
  default: () => path_default,
  delimiter: () => delimiter,
  dirname: () => dirname,
  extname: () => extname,
  isAbsolute: () => isAbsolute,
  join: () => join,
  normalize: () => normalize,
  relative: () => relative,
  resolve: () => resolve,
  sep: () => sep
});
function normalizeArray(parts, allowAboveRoot) {
  var up = 0;
  for (var i = parts.length - 1; i >= 0; i--) {
    var last = parts[i];
    if (last === ".") {
      parts.splice(i, 1);
    } else if (last === "..") {
      parts.splice(i, 1);
      up++;
    } else if (up) {
      parts.splice(i, 1);
      up--;
    }
  }
  if (allowAboveRoot) {
    for (; up--; up) {
      parts.unshift("..");
    }
  }
  return parts;
}
var splitPathRe = /^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/;
var splitPath = function(filename) {
  return splitPathRe.exec(filename).slice(1);
};
function resolve() {
  var resolvedPath = "", resolvedAbsolute = false;
  for (var i = arguments.length - 1; i >= -1 && !resolvedAbsolute; i--) {
    var path = i >= 0 ? arguments[i] : "/";
    if (typeof path !== "string") {
      throw new TypeError("Arguments to path.resolve must be strings");
    } else if (!path) {
      continue;
    }
    resolvedPath = path + "/" + resolvedPath;
    resolvedAbsolute = path.charAt(0) === "/";
  }
  resolvedPath = normalizeArray(filter(resolvedPath.split("/"), function(p) {
    return !!p;
  }), !resolvedAbsolute).join("/");
  return (resolvedAbsolute ? "/" : "") + resolvedPath || ".";
}
function normalize(path) {
  var isPathAbsolute = isAbsolute(path), trailingSlash = substr(path, -1) === "/";
  path = normalizeArray(filter(path.split("/"), function(p) {
    return !!p;
  }), !isPathAbsolute).join("/");
  if (!path && !isPathAbsolute) {
    path = ".";
  }
  if (path && trailingSlash) {
    path += "/";
  }
  return (isPathAbsolute ? "/" : "") + path;
}
function isAbsolute(path) {
  return path.charAt(0) === "/";
}
function join() {
  var paths = Array.prototype.slice.call(arguments, 0);
  return normalize(filter(paths, function(p, index) {
    if (typeof p !== "string") {
      throw new TypeError("Arguments to path.join must be strings");
    }
    return p;
  }).join("/"));
}
function relative(from2, to) {
  from2 = resolve(from2).substr(1);
  to = resolve(to).substr(1);
  function trim(arr) {
    var start = 0;
    for (; start < arr.length; start++) {
      if (arr[start] !== "")
        break;
    }
    var end = arr.length - 1;
    for (; end >= 0; end--) {
      if (arr[end] !== "")
        break;
    }
    if (start > end)
      return [];
    return arr.slice(start, end - start + 1);
  }
  var fromParts = trim(from2.split("/"));
  var toParts = trim(to.split("/"));
  var length = Math.min(fromParts.length, toParts.length);
  var samePartsLength = length;
  for (var i = 0; i < length; i++) {
    if (fromParts[i] !== toParts[i]) {
      samePartsLength = i;
      break;
    }
  }
  var outputParts = [];
  for (var i = samePartsLength; i < fromParts.length; i++) {
    outputParts.push("..");
  }
  outputParts = outputParts.concat(toParts.slice(samePartsLength));
  return outputParts.join("/");
}
var sep = "/";
var delimiter = ":";
function dirname(path) {
  var result = splitPath(path), root = result[0], dir = result[1];
  if (!root && !dir) {
    return ".";
  }
  if (dir) {
    dir = dir.substr(0, dir.length - 1);
  }
  return root + dir;
}
function basename(path, ext) {
  var f = splitPath(path)[2];
  if (ext && f.substr(-1 * ext.length) === ext) {
    f = f.substr(0, f.length - ext.length);
  }
  return f;
}
function extname(path) {
  return splitPath(path)[3];
}
var path_default = {
  extname,
  basename,
  dirname,
  sep,
  delimiter,
  relative,
  join,
  isAbsolute,
  normalize,
  resolve
};
function filter(xs, f) {
  if (xs.filter)
    return xs.filter(f);
  var res = [];
  for (var i = 0; i < xs.length; i++) {
    if (f(xs[i], i, xs))
      res.push(xs[i]);
  }
  return res;
}
var substr = "ab".substr(-1) === "b" ? function(str, start, len) {
  return str.substr(start, len);
} : function(str, start, len) {
  if (start < 0)
    start = str.length + start;
  return str.substr(start, len);
};

// src/core/cred.ts
var _Cred = class {
  constructor(uid, gid, suid, sgid, euid, egid) {
    this.uid = uid;
    this.gid = gid;
    this.suid = suid;
    this.sgid = sgid;
    this.euid = euid;
    this.egid = egid;
  }
};
var Cred = _Cred;
Cred.Root = new _Cred(0, 0, 0, 0, 0, 0);

// src/core/stats.ts
var Stats = class {
  /**
   * Provides information about a particular entry in the file system.
   * @param itemType Type of the item (FILE, DIRECTORY, SYMLINK, or SOCKET)
   * @param size Size of the item in bytes. For directories/symlinks,
   *   this is normally the size of the struct that represents the item.
   * @param mode Unix-style file mode (e.g. 0o644)
   * @param atimeMs time of last access, in milliseconds since epoch
   * @param mtimeMs time of last modification, in milliseconds since epoch
   * @param ctimeMs time of last time file status was changed, in milliseconds since epoch
   * @param uid the id of the user that owns the file
   * @param gid the id of the group that owns the file
   * @param birthtimeMs time of file creation, in milliseconds since epoch
   */
  constructor(itemType, size, mode, atimeMs, mtimeMs, ctimeMs, uid, gid, birthtimeMs) {
    /**
     * UNSUPPORTED ATTRIBUTES
     * I assume no one is going to need these details, although we could fake
     * appropriate values if need be.
     */
    // ID of device containing file
    this.dev = 0;
    // inode number
    this.ino = 0;
    // device ID (if special file)
    this.rdev = 0;
    // number of hard links
    this.nlink = 1;
    // blocksize for file system I/O
    this.blksize = 4096;
    // user ID of owner
    this.uid = 0;
    // group ID of owner
    this.gid = 0;
    // XXX: Some file systems stash data on stats objects.
    this.fileData = null;
    this.size = size;
    let currentTime = 0;
    if (typeof atimeMs !== "number") {
      currentTime = Date.now();
      atimeMs = currentTime;
    }
    if (typeof mtimeMs !== "number") {
      if (!currentTime) {
        currentTime = Date.now();
      }
      mtimeMs = currentTime;
    }
    if (typeof ctimeMs !== "number") {
      if (!currentTime) {
        currentTime = Date.now();
      }
      ctimeMs = currentTime;
    }
    if (typeof birthtimeMs !== "number") {
      if (!currentTime) {
        currentTime = Date.now();
      }
      birthtimeMs = currentTime;
    }
    if (typeof uid !== "number") {
      uid = 0;
    }
    if (typeof gid !== "number") {
      gid = 0;
    }
    this.atimeMs = atimeMs;
    this.ctimeMs = ctimeMs;
    this.mtimeMs = mtimeMs;
    this.birthtimeMs = birthtimeMs;
    if (!mode) {
      switch (itemType) {
        case 32768 /* FILE */:
          this.mode = 420;
          break;
        case 16384 /* DIRECTORY */:
        default:
          this.mode = 511;
      }
    } else {
      this.mode = mode;
    }
    this.blocks = Math.ceil(size / 512);
    if (this.mode < 4096) {
      this.mode |= itemType;
    }
  }
  static fromBuffer(buffer) {
    const size = buffer.readUInt32LE(0), mode = buffer.readUInt32LE(4), atime = buffer.readDoubleLE(8), mtime = buffer.readDoubleLE(16), ctime = buffer.readDoubleLE(24), uid = buffer.readUInt32LE(32), gid = buffer.readUInt32LE(36);
    return new Stats(mode & 61440, size, mode & 4095, atime, mtime, ctime, uid, gid);
  }
  /**
   * Clones the stats object.
   */
  static clone(s) {
    return new Stats(s.mode & 61440, s.size, s.mode & 4095, s.atimeMs, s.mtimeMs, s.ctimeMs, s.uid, s.gid, s.birthtimeMs);
  }
  get atime() {
    return new Date(this.atimeMs);
  }
  get mtime() {
    return new Date(this.mtimeMs);
  }
  get ctime() {
    return new Date(this.ctimeMs);
  }
  get birthtime() {
    return new Date(this.birthtimeMs);
  }
  toBuffer() {
    const buffer = Buffer2.alloc(32);
    buffer.writeUInt32LE(this.size, 0);
    buffer.writeUInt32LE(this.mode, 4);
    buffer.writeDoubleLE(this.atime.getTime(), 8);
    buffer.writeDoubleLE(this.mtime.getTime(), 16);
    buffer.writeDoubleLE(this.ctime.getTime(), 24);
    buffer.writeUInt32LE(this.uid, 32);
    buffer.writeUInt32LE(this.gid, 36);
    return buffer;
  }
  /**
   * @return [Boolean] True if this item is a file.
   */
  isFile() {
    return (this.mode & 61440) === 32768 /* FILE */;
  }
  /**
   * @return [Boolean] True if this item is a directory.
   */
  isDirectory() {
    return (this.mode & 61440) === 16384 /* DIRECTORY */;
  }
  /**
   * @return [Boolean] True if this item is a symbolic link (only valid through lstat)
   */
  isSymbolicLink() {
    return (this.mode & 61440) === 40960 /* SYMLINK */;
  }
  /**
   * Checks if a given user/group has access to this item
   * @param mode The request access as 4 bits (unused, read, write, execute)
   * @param uid The requesting UID
   * @param gid The requesting GID
   * @returns [Boolean] True if the request has access, false if the request does not
   */
  hasAccess(mode, cred) {
    if (cred.euid === 0 || cred.egid === 0) {
      return true;
    }
    const perms = this.mode & 4095;
    let uMode = 15, gMode = 15, wMode = 15;
    if (cred.euid == this.uid) {
      const uPerms = (3840 & perms) >> 8;
      uMode = (mode ^ uPerms) & mode;
    }
    if (cred.egid == this.gid) {
      const gPerms = (240 & perms) >> 4;
      gMode = (mode ^ gPerms) & mode;
    }
    const wPerms = 15 & perms;
    wMode = (mode ^ wPerms) & mode;
    const result = uMode & gMode & wMode;
    return !result;
  }
  /**
   * Convert the current stats object into a cred object
   */
  getCred(uid = this.uid, gid = this.gid) {
    return new Cred(uid, gid, this.uid, this.gid, uid, gid);
  }
  /**
   * Change the mode of the file. We use this helper function to prevent messing
   * up the type of the file, which is encoded in mode.
   */
  chmod(mode) {
    this.mode = this.mode & 61440 | mode;
  }
  /**
   * Change the owner user/group of the file.
   * This function makes sure it is a valid UID/GID (that is, a 32 unsigned int)
   */
  chown(uid, gid) {
    if (!isNaN(+uid) && 0 <= +uid && +uid < __pow(2, 32)) {
      this.uid = uid;
    }
    if (!isNaN(+gid) && 0 <= +gid && +gid < __pow(2, 32)) {
      this.gid = gid;
    }
  }
  // We don't support the following types of files.
  isSocket() {
    return false;
  }
  isBlockDevice() {
    return false;
  }
  isCharacterDevice() {
    return false;
  }
  isFIFO() {
    return false;
  }
};

// src/generic/setImmediate.ts
var bfsSetImmediate;
if (typeof setImmediate !== "undefined") {
  bfsSetImmediate = setImmediate;
} else {
  const gScope = globalThis;
  const timeouts = [];
  const messageName = "zero-timeout-message";
  const canUsePostMessage = function() {
    if (typeof gScope.importScripts !== "undefined" || !gScope.postMessage) {
      return false;
    }
    let postMessageIsAsync = true;
    const oldOnMessage = gScope.onmessage;
    gScope.onmessage = function() {
      postMessageIsAsync = false;
    };
    gScope.postMessage("", "*");
    gScope.onmessage = oldOnMessage;
    return postMessageIsAsync;
  };
  if (canUsePostMessage()) {
    bfsSetImmediate = function(fn) {
      timeouts.push(fn);
      gScope.postMessage(messageName, "*");
    };
    const handleMessage = function(event) {
      if (event.source === self && event.data === messageName) {
        if (event.stopPropagation) {
          event.stopPropagation();
        } else {
          event.cancelBubble = true;
        }
        if (timeouts.length > 0) {
          const fn = timeouts.shift();
          return fn();
        }
      }
    };
    if (gScope.addEventListener) {
      gScope.addEventListener("message", handleMessage, true);
    } else {
      gScope.attachEvent("onmessage", handleMessage);
    }
  } else if (gScope.MessageChannel) {
    const channel = new gScope.MessageChannel();
    channel.port1.onmessage = (event) => {
      if (timeouts.length > 0) {
        return timeouts.shift()();
      }
    };
    bfsSetImmediate = (fn) => {
      timeouts.push(fn);
      channel.port2.postMessage("");
    };
  } else {
    bfsSetImmediate = function(fn) {
      return setTimeout(fn, 0);
    };
  }
}
var setImmediate_default = bfsSetImmediate;

// src/core/FS.ts
var wrapCbHook = function(cb, numArgs) {
  return cb;
};
function wrapCb(cb, numArgs) {
  if (typeof cb !== "function") {
    throw new Error("Callback must be a function.");
  }
  const hookedCb = wrapCbHook(cb, numArgs);
  switch (numArgs) {
    case 1:
      return function(arg1) {
        setImmediate_default(function() {
          return hookedCb(arg1);
        });
      };
    case 2:
      return function(arg1, arg2) {
        setImmediate_default(function() {
          return hookedCb(arg1, arg2);
        });
      };
    case 3:
      return function(arg1, arg2, arg3) {
        setImmediate_default(function() {
          return hookedCb(arg1, arg2, arg3);
        });
      };
    default:
      throw new Error("Invalid invocation of wrapCb.");
  }
}
function assertRoot(fs2) {
  if (fs2) {
    return fs2;
  }
  throw new ApiError(5 /* EIO */, `Initialize BrowserFS with a file system using BrowserFS.initialize(filesystem)`);
}
function normalizeMode(mode, def) {
  switch (typeof mode) {
    case "number":
      return mode;
    case "string":
      const trueMode = parseInt(mode, 8);
      if (!isNaN(trueMode)) {
        return trueMode;
      }
      return def;
    default:
      return def;
  }
}
function normalizeTime(time) {
  if (time instanceof Date) {
    return time;
  } else if (typeof time === "number") {
    return new Date(time * 1e3);
  } else {
    throw new ApiError(22 /* EINVAL */, `Invalid time.`);
  }
}
function normalizePath(p) {
  if (p.indexOf("\0") >= 0) {
    throw new ApiError(22 /* EINVAL */, "Path must be a string without null bytes.");
  } else if (p === "") {
    throw new ApiError(22 /* EINVAL */, "Path must not be empty.");
  }
  return resolve(p);
}
function normalizeOptions(options, defEnc, defFlag, defMode) {
  switch (options === null ? "null" : typeof options) {
    case "object":
      return {
        encoding: typeof options["encoding"] !== "undefined" ? options["encoding"] : defEnc,
        flag: typeof options["flag"] !== "undefined" ? options["flag"] : defFlag,
        mode: normalizeMode(options["mode"], defMode)
      };
    case "string":
      return {
        encoding: options,
        flag: defFlag,
        mode: defMode
      };
    case "null":
    case "undefined":
    case "function":
      return {
        encoding: defEnc,
        flag: defFlag,
        mode: defMode
      };
    default:
      throw new TypeError(`"options" must be a string or an object, got ${typeof options} instead.`);
  }
}
function nopCb() {
}
var FS = class {
  constructor() {
    /* tslint:enable:variable-name */
    this.F_OK = 0;
    this.R_OK = 4;
    this.W_OK = 2;
    this.X_OK = 1;
    this.root = null;
    this.fdMap = {};
    this.nextFd = 100;
  }
  /**
   * Initializes the FS Modules with the given filesystem
   * @param rootFS the root filesystem of the FS
   * @param cred the credentials used for interacting with the FS
   * @returns
   */
  initialize(rootFS, cred) {
    if (!rootFS.constructor.isAvailable()) {
      throw new ApiError(22 /* EINVAL */, "Tried to instantiate BrowserFS with an unavailable file system.");
    }
    this.cred = cred;
    return this.root = rootFS;
  }
  /**
   * converts Date or number to a fractional UNIX timestamp
   * Grabbed from NodeJS sources (lib/fs.js)
   */
  _toUnixTimestamp(time) {
    if (typeof time === "number") {
      return time;
    } else if (time instanceof Date) {
      return time.getTime() / 1e3;
    }
    throw new Error("Cannot parse time: " + time);
  }
  /**
   * **NONSTANDARD**: Grab the FileSystem instance that backs this API.
   * @return [BrowserFS.FileSystem | null] Returns null if the file system has
   *   not been initialized.
   */
  getRootFS() {
    if (this.root) {
      return this.root;
    } else {
      return null;
    }
  }
  // FILE OR DIRECTORY METHODS
  /**
   * Asynchronous rename. No arguments other than a possible exception are given
   * to the completion callback.
   * @param oldPath
   * @param newPath
   * @param callback
   */
  rename(oldPath, newPath, cb = nopCb) {
    const newCb = wrapCb(cb, 1);
    try {
      assertRoot(this.root).rename(normalizePath(oldPath), normalizePath(newPath), this.cred, newCb);
    } catch (e) {
      newCb(e);
    }
  }
  /**
   * Synchronous rename.
   * @param oldPath
   * @param newPath
   */
  renameSync(oldPath, newPath) {
    assertRoot(this.root).renameSync(normalizePath(oldPath), normalizePath(newPath), this.cred);
  }
  /**
   * Test whether or not the given path exists by checking with the file system.
   * Then call the callback argument with either true or false.
   * @example Sample invocation
   *   fs.exists('/etc/passwd', function (exists) {
   *     util.debug(exists ? "it's there" : "no passwd!");
   *   });
   * @param path
   * @param callback
   */
  exists(path, cb = nopCb) {
    const newCb = wrapCb(cb, 1);
    try {
      return assertRoot(this.root).exists(normalizePath(path), this.cred, newCb);
    } catch (e) {
      return newCb(false);
    }
  }
  /**
   * Test whether or not the given path exists by checking with the file system.
   * @param path
   * @return [boolean]
   */
  existsSync(path) {
    try {
      return assertRoot(this.root).existsSync(normalizePath(path), this.cred);
    } catch (e) {
      return false;
    }
  }
  /**
   * Asynchronous `stat`.
   * @param path
   * @param callback
   */
  stat(path, cb = nopCb) {
    const newCb = wrapCb(cb, 2);
    try {
      return assertRoot(this.root).stat(normalizePath(path), false, this.cred, newCb);
    } catch (e) {
      return newCb(e);
    }
  }
  /**
   * Synchronous `stat`.
   * @param path
   * @return [BrowserFS.node.fs.Stats]
   */
  statSync(path) {
    return assertRoot(this.root).statSync(normalizePath(path), false, this.cred);
  }
  /**
   * Asynchronous `lstat`.
   * `lstat()` is identical to `stat()`, except that if path is a symbolic link,
   * then the link itself is stat-ed, not the file that it refers to.
   * @param path
   * @param callback
   */
  lstat(path, cb = nopCb) {
    const newCb = wrapCb(cb, 2);
    try {
      return assertRoot(this.root).stat(normalizePath(path), true, this.cred, newCb);
    } catch (e) {
      return newCb(e);
    }
  }
  /**
   * Synchronous `lstat`.
   * `lstat()` is identical to `stat()`, except that if path is a symbolic link,
   * then the link itself is stat-ed, not the file that it refers to.
   * @param path
   * @return [BrowserFS.node.fs.Stats]
   */
  lstatSync(path) {
    return assertRoot(this.root).statSync(normalizePath(path), true, this.cred);
  }
  truncate(path, arg2 = 0, cb = nopCb) {
    let len = 0;
    if (typeof arg2 === "function") {
      cb = arg2;
    } else if (typeof arg2 === "number") {
      len = arg2;
    }
    const newCb = wrapCb(cb, 1);
    try {
      if (len < 0) {
        throw new ApiError(22 /* EINVAL */);
      }
      return assertRoot(this.root).truncate(normalizePath(path), len, this.cred, newCb);
    } catch (e) {
      return newCb(e);
    }
  }
  /**
   * Synchronous `truncate`.
   * @param path
   * @param len
   */
  truncateSync(path, len = 0) {
    if (len < 0) {
      throw new ApiError(22 /* EINVAL */);
    }
    return assertRoot(this.root).truncateSync(normalizePath(path), len, this.cred);
  }
  /**
   * Asynchronous `unlink`.
   * @param path
   * @param callback
   */
  unlink(path, cb = nopCb) {
    const newCb = wrapCb(cb, 1);
    try {
      return assertRoot(this.root).unlink(normalizePath(path), this.cred, newCb);
    } catch (e) {
      return newCb(e);
    }
  }
  /**
   * Synchronous `unlink`.
   * @param path
   */
  unlinkSync(path) {
    return assertRoot(this.root).unlinkSync(normalizePath(path), this.cred);
  }
  open(path, flag, arg2, cb = nopCb) {
    const mode = normalizeMode(arg2, 420);
    cb = typeof arg2 === "function" ? arg2 : cb;
    const newCb = wrapCb(cb, 2);
    try {
      assertRoot(this.root).open(normalizePath(path), FileFlag.getFileFlag(flag), mode, this.cred, (e, file) => {
        if (file) {
          newCb(e, this.getFdForFile(file));
        } else {
          newCb(e);
        }
      });
    } catch (e) {
      newCb(e);
    }
  }
  /**
   * Synchronous file open.
   * @see http://www.manpagez.com/man/2/open/
   * @param path
   * @param flags
   * @param mode defaults to `0644`
   * @return [BrowserFS.File]
   */
  openSync(path, flag, mode = 420) {
    return this.getFdForFile(assertRoot(this.root).openSync(normalizePath(path), FileFlag.getFileFlag(flag), normalizeMode(mode, 420), this.cred));
  }
  readFile(filename, arg2 = {}, cb = nopCb) {
    const options = normalizeOptions(arg2, null, "r", null);
    cb = typeof arg2 === "function" ? arg2 : cb;
    const newCb = wrapCb(cb, 2);
    try {
      const flag = FileFlag.getFileFlag(options["flag"]);
      if (!flag.isReadable()) {
        return newCb(new ApiError(22 /* EINVAL */, "Flag passed to readFile must allow for reading."));
      }
      return assertRoot(this.root).readFile(normalizePath(filename), options.encoding, flag, this.cred, newCb);
    } catch (e) {
      return newCb(e);
    }
  }
  readFileSync(filename, arg2 = {}) {
    const options = normalizeOptions(arg2, null, "r", null);
    const flag = FileFlag.getFileFlag(options.flag);
    if (!flag.isReadable()) {
      throw new ApiError(22 /* EINVAL */, "Flag passed to readFile must allow for reading.");
    }
    return assertRoot(this.root).readFileSync(normalizePath(filename), options.encoding, flag, this.cred);
  }
  writeFile(filename, data, arg3 = {}, cb = nopCb) {
    const options = normalizeOptions(arg3, "utf8", "w", 420);
    cb = typeof arg3 === "function" ? arg3 : cb;
    const newCb = wrapCb(cb, 1);
    try {
      const flag = FileFlag.getFileFlag(options.flag);
      if (!flag.isWriteable()) {
        return newCb(new ApiError(22 /* EINVAL */, "Flag passed to writeFile must allow for writing."));
      }
      return assertRoot(this.root).writeFile(normalizePath(filename), data, options.encoding, flag, options.mode, this.cred, newCb);
    } catch (e) {
      return newCb(e);
    }
  }
  writeFileSync(filename, data, arg3) {
    const options = normalizeOptions(arg3, "utf8", "w", 420);
    const flag = FileFlag.getFileFlag(options.flag);
    if (!flag.isWriteable()) {
      throw new ApiError(22 /* EINVAL */, "Flag passed to writeFile must allow for writing.");
    }
    return assertRoot(this.root).writeFileSync(normalizePath(filename), data, options.encoding, flag, options.mode, this.cred);
  }
  appendFile(filename, data, arg3, cb = nopCb) {
    const options = normalizeOptions(arg3, "utf8", "a", 420);
    cb = typeof arg3 === "function" ? arg3 : cb;
    const newCb = wrapCb(cb, 1);
    try {
      const flag = FileFlag.getFileFlag(options.flag);
      if (!flag.isAppendable()) {
        return newCb(new ApiError(22 /* EINVAL */, "Flag passed to appendFile must allow for appending."));
      }
      assertRoot(this.root).appendFile(normalizePath(filename), data, options.encoding, flag, options.mode, this.cred, newCb);
    } catch (e) {
      newCb(e);
    }
  }
  appendFileSync(filename, data, arg3) {
    const options = normalizeOptions(arg3, "utf8", "a", 420);
    const flag = FileFlag.getFileFlag(options.flag);
    if (!flag.isAppendable()) {
      throw new ApiError(22 /* EINVAL */, "Flag passed to appendFile must allow for appending.");
    }
    return assertRoot(this.root).appendFileSync(normalizePath(filename), data, options.encoding, flag, options.mode, this.cred);
  }
  // FILE DESCRIPTOR METHODS
  /**
   * Asynchronous `fstat`.
   * `fstat()` is identical to `stat()`, except that the file to be stat-ed is
   * specified by the file descriptor `fd`.
   * @param fd
   * @param callback
   */
  fstat(fd, cb = nopCb) {
    const newCb = wrapCb(cb, 2);
    try {
      const file = this.fd2file(fd);
      file.stat(newCb);
    } catch (e) {
      newCb(e);
    }
  }
  /**
   * Synchronous `fstat`.
   * `fstat()` is identical to `stat()`, except that the file to be stat-ed is
   * specified by the file descriptor `fd`.
   * @param fd
   * @return [BrowserFS.node.fs.Stats]
   */
  fstatSync(fd) {
    return this.fd2file(fd).statSync();
  }
  /**
   * Asynchronous close.
   * @param fd
   * @param callback
   */
  close(fd, cb = nopCb) {
    const newCb = wrapCb(cb, 1);
    try {
      this.fd2file(fd).close((e) => {
        if (!e) {
          this.closeFd(fd);
        }
        newCb(e);
      });
    } catch (e) {
      newCb(e);
    }
  }
  /**
   * Synchronous close.
   * @param fd
   */
  closeSync(fd) {
    this.fd2file(fd).closeSync();
    this.closeFd(fd);
  }
  ftruncate(fd, arg2, cb = nopCb) {
    const length = typeof arg2 === "number" ? arg2 : 0;
    cb = typeof arg2 === "function" ? arg2 : cb;
    const newCb = wrapCb(cb, 1);
    try {
      const file = this.fd2file(fd);
      if (length < 0) {
        throw new ApiError(22 /* EINVAL */);
      }
      file.truncate(length, newCb);
    } catch (e) {
      newCb(e);
    }
  }
  /**
   * Synchronous ftruncate.
   * @param fd
   * @param len
   */
  ftruncateSync(fd, len = 0) {
    const file = this.fd2file(fd);
    if (len < 0) {
      throw new ApiError(22 /* EINVAL */);
    }
    file.truncateSync(len);
  }
  /**
   * Asynchronous fsync.
   * @param fd
   * @param callback
   */
  fsync(fd, cb = nopCb) {
    const newCb = wrapCb(cb, 1);
    try {
      this.fd2file(fd).sync(newCb);
    } catch (e) {
      newCb(e);
    }
  }
  /**
   * Synchronous fsync.
   * @param fd
   */
  fsyncSync(fd) {
    this.fd2file(fd).syncSync();
  }
  /**
   * Asynchronous fdatasync.
   * @param fd
   * @param callback
   */
  fdatasync(fd, cb = nopCb) {
    const newCb = wrapCb(cb, 1);
    try {
      this.fd2file(fd).datasync(newCb);
    } catch (e) {
      newCb(e);
    }
  }
  /**
   * Synchronous fdatasync.
   * @param fd
   */
  fdatasyncSync(fd) {
    this.fd2file(fd).datasyncSync();
  }
  write(fd, arg2, arg3, arg4, arg5, cb = nopCb) {
    let buffer, offset, length, position = null;
    if (typeof arg2 === "string") {
      let encoding = "utf8";
      switch (typeof arg3) {
        case "function":
          cb = arg3;
          break;
        case "number":
          position = arg3;
          encoding = typeof arg4 === "string" ? arg4 : "utf8";
          cb = typeof arg5 === "function" ? arg5 : cb;
          break;
        default:
          cb = typeof arg4 === "function" ? arg4 : typeof arg5 === "function" ? arg5 : cb;
          return cb(new ApiError(22 /* EINVAL */, "Invalid arguments."));
      }
      buffer = Buffer2.from(arg2, encoding);
      offset = 0;
      length = buffer.length;
    } else {
      buffer = arg2;
      offset = arg3;
      length = arg4;
      position = typeof arg5 === "number" ? arg5 : null;
      cb = typeof arg5 === "function" ? arg5 : cb;
    }
    const newCb = wrapCb(cb, 3);
    try {
      const file = this.fd2file(fd);
      if (position === void 0 || position === null) {
        position = file.getPos();
      }
      file.write(buffer, offset, length, position, newCb);
    } catch (e) {
      newCb(e);
    }
  }
  writeSync(fd, arg2, arg3, arg4, arg5) {
    let buffer, offset = 0, length, position;
    if (typeof arg2 === "string") {
      position = typeof arg3 === "number" ? arg3 : null;
      const encoding = typeof arg4 === "string" ? arg4 : "utf8";
      offset = 0;
      buffer = Buffer2.from(arg2, encoding);
      length = buffer.length;
    } else {
      buffer = arg2;
      offset = arg3;
      length = arg4;
      position = typeof arg5 === "number" ? arg5 : null;
    }
    const file = this.fd2file(fd);
    if (position === void 0 || position === null) {
      position = file.getPos();
    }
    return file.writeSync(buffer, offset, length, position);
  }
  read(fd, arg2, arg3, arg4, arg5, cb = nopCb) {
    let position, offset, length, buffer, newCb;
    if (typeof arg2 === "number") {
      length = arg2;
      position = arg3;
      const encoding = arg4;
      cb = typeof arg5 === "function" ? arg5 : cb;
      offset = 0;
      buffer = Buffer2.alloc(length);
      newCb = wrapCb((err2, bytesRead, buf) => {
        if (err2) {
          return cb(err2);
        }
        cb(err2, buf.toString(encoding), bytesRead);
      }, 3);
    } else {
      buffer = arg2;
      offset = arg3;
      length = arg4;
      position = arg5;
      newCb = wrapCb(cb, 3);
    }
    try {
      const file = this.fd2file(fd);
      if (position === void 0 || position === null) {
        position = file.getPos();
      }
      file.read(buffer, offset, length, position, newCb);
    } catch (e) {
      newCb(e);
    }
  }
  readSync(fd, arg2, arg3, arg4, arg5) {
    let shenanigans = false;
    let buffer, offset, length, position, encoding = "utf8";
    if (typeof arg2 === "number") {
      length = arg2;
      position = arg3;
      encoding = arg4;
      offset = 0;
      buffer = Buffer2.alloc(length);
      shenanigans = true;
    } else {
      buffer = arg2;
      offset = arg3;
      length = arg4;
      position = arg5;
    }
    const file = this.fd2file(fd);
    if (position === void 0 || position === null) {
      position = file.getPos();
    }
    const rv = file.readSync(buffer, offset, length, position);
    if (!shenanigans) {
      return rv;
    } else {
      return [buffer.toString(encoding), rv];
    }
  }
  /**
   * Asynchronous `fchown`.
   * @param fd
   * @param uid
   * @param gid
   * @param callback
   */
  fchown(fd, uid, gid, callback = nopCb) {
    const newCb = wrapCb(callback, 1);
    try {
      this.fd2file(fd).chown(uid, gid, newCb);
    } catch (e) {
      newCb(e);
    }
  }
  /**
   * Synchronous `fchown`.
   * @param fd
   * @param uid
   * @param gid
   */
  fchownSync(fd, uid, gid) {
    this.fd2file(fd).chownSync(uid, gid);
  }
  /**
   * Asynchronous `fchmod`.
   * @param fd
   * @param mode
   * @param callback
   */
  fchmod(fd, mode, cb) {
    const newCb = wrapCb(cb, 1);
    try {
      const numMode = typeof mode === "string" ? parseInt(mode, 8) : mode;
      this.fd2file(fd).chmod(numMode, newCb);
    } catch (e) {
      newCb(e);
    }
  }
  /**
   * Synchronous `fchmod`.
   * @param fd
   * @param mode
   */
  fchmodSync(fd, mode) {
    const numMode = typeof mode === "string" ? parseInt(mode, 8) : mode;
    this.fd2file(fd).chmodSync(numMode);
  }
  /**
   * Change the file timestamps of a file referenced by the supplied file
   * descriptor.
   * @param fd
   * @param atime
   * @param mtime
   * @param callback
   */
  futimes(fd, atime, mtime, cb = nopCb) {
    const newCb = wrapCb(cb, 1);
    try {
      const file = this.fd2file(fd);
      if (typeof atime === "number") {
        atime = new Date(atime * 1e3);
      }
      if (typeof mtime === "number") {
        mtime = new Date(mtime * 1e3);
      }
      file.utimes(atime, mtime, newCb);
    } catch (e) {
      newCb(e);
    }
  }
  /**
   * Change the file timestamps of a file referenced by the supplied file
   * descriptor.
   * @param fd
   * @param atime
   * @param mtime
   */
  futimesSync(fd, atime, mtime) {
    this.fd2file(fd).utimesSync(normalizeTime(atime), normalizeTime(mtime));
  }
  // DIRECTORY-ONLY METHODS
  /**
   * Asynchronous `rmdir`.
   * @param path
   * @param callback
   */
  rmdir(path, cb = nopCb) {
    const newCb = wrapCb(cb, 1);
    try {
      path = normalizePath(path);
      assertRoot(this.root).rmdir(path, this.cred, newCb);
    } catch (e) {
      newCb(e);
    }
  }
  /**
   * Synchronous `rmdir`.
   * @param path
   */
  rmdirSync(path) {
    path = normalizePath(path);
    return assertRoot(this.root).rmdirSync(path, this.cred);
  }
  /**
   * Asynchronous `mkdir`.
   * @param path
   * @param mode defaults to `0777`
   * @param callback
   */
  mkdir(path, mode, cb = nopCb) {
    if (typeof mode === "function") {
      cb = mode;
      mode = 511;
    }
    const newCb = wrapCb(cb, 1);
    try {
      path = normalizePath(path);
      assertRoot(this.root).mkdir(path, mode, this.cred, newCb);
    } catch (e) {
      newCb(e);
    }
  }
  /**
   * Synchronous `mkdir`.
   * @param path
   * @param mode defaults to `0777`
   */
  mkdirSync(path, mode) {
    assertRoot(this.root).mkdirSync(normalizePath(path), normalizeMode(mode, 511), this.cred);
  }
  /**
   * Asynchronous `readdir`. Reads the contents of a directory.
   * The callback gets two arguments `(err, files)` where `files` is an array of
   * the names of the files in the directory excluding `'.'` and `'..'`.
   * @param path
   * @param callback
   */
  readdir(path, cb = nopCb) {
    const newCb = wrapCb(cb, 2);
    try {
      path = normalizePath(path);
      assertRoot(this.root).readdir(path, this.cred, newCb);
    } catch (e) {
      newCb(e);
    }
  }
  /**
   * Synchronous `readdir`. Reads the contents of a directory.
   * @param path
   * @return [String[]]
   */
  readdirSync(path) {
    path = normalizePath(path);
    return assertRoot(this.root).readdirSync(path, this.cred);
  }
  // SYMLINK METHODS
  /**
   * Asynchronous `link`.
   * @param srcpath
   * @param dstpath
   * @param callback
   */
  link(srcpath, dstpath, cb = nopCb) {
    const newCb = wrapCb(cb, 1);
    try {
      srcpath = normalizePath(srcpath);
      dstpath = normalizePath(dstpath);
      assertRoot(this.root).link(srcpath, dstpath, this.cred, newCb);
    } catch (e) {
      newCb(e);
    }
  }
  /**
   * Synchronous `link`.
   * @param srcpath
   * @param dstpath
   */
  linkSync(srcpath, dstpath) {
    srcpath = normalizePath(srcpath);
    dstpath = normalizePath(dstpath);
    return assertRoot(this.root).linkSync(srcpath, dstpath, this.cred);
  }
  symlink(srcpath, dstpath, arg3, cb = nopCb) {
    const type = typeof arg3 === "string" ? arg3 : "file";
    cb = typeof arg3 === "function" ? arg3 : cb;
    const newCb = wrapCb(cb, 1);
    try {
      if (type !== "file" && type !== "dir") {
        return newCb(new ApiError(22 /* EINVAL */, "Invalid type: " + type));
      }
      srcpath = normalizePath(srcpath);
      dstpath = normalizePath(dstpath);
      assertRoot(this.root).symlink(srcpath, dstpath, type, this.cred, newCb);
    } catch (e) {
      newCb(e);
    }
  }
  /**
   * Synchronous `symlink`.
   * @param srcpath
   * @param dstpath
   * @param type can be either `'dir'` or `'file'` (default is `'file'`)
   */
  symlinkSync(srcpath, dstpath, type) {
    if (!type) {
      type = "file";
    } else if (type !== "file" && type !== "dir") {
      throw new ApiError(22 /* EINVAL */, "Invalid type: " + type);
    }
    srcpath = normalizePath(srcpath);
    dstpath = normalizePath(dstpath);
    return assertRoot(this.root).symlinkSync(srcpath, dstpath, type, this.cred);
  }
  /**
   * Asynchronous readlink.
   * @param path
   * @param callback
   */
  readlink(path, cb = nopCb) {
    const newCb = wrapCb(cb, 2);
    try {
      path = normalizePath(path);
      assertRoot(this.root).readlink(path, this.cred, newCb);
    } catch (e) {
      newCb(e);
    }
  }
  /**
   * Synchronous readlink.
   * @param path
   * @return [String]
   */
  readlinkSync(path) {
    path = normalizePath(path);
    return assertRoot(this.root).readlinkSync(path, this.cred);
  }
  // PROPERTY OPERATIONS
  /**
   * Asynchronous `chown`.
   * @param path
   * @param uid
   * @param gid
   * @param callback
   */
  chown(path, uid, gid, cb = nopCb) {
    const newCb = wrapCb(cb, 1);
    try {
      path = normalizePath(path);
      assertRoot(this.root).chown(path, false, uid, gid, this.cred, newCb);
    } catch (e) {
      newCb(e);
    }
  }
  /**
   * Synchronous `chown`.
   * @param path
   * @param uid
   * @param gid
   */
  chownSync(path, uid, gid) {
    path = normalizePath(path);
    assertRoot(this.root).chownSync(path, false, uid, gid, this.cred);
  }
  /**
   * Asynchronous `lchown`.
   * @param path
   * @param uid
   * @param gid
   * @param callback
   */
  lchown(path, uid, gid, cb = nopCb) {
    const newCb = wrapCb(cb, 1);
    try {
      path = normalizePath(path);
      assertRoot(this.root).chown(path, true, uid, gid, this.cred, newCb);
    } catch (e) {
      newCb(e);
    }
  }
  /**
   * Synchronous `lchown`.
   * @param path
   * @param uid
   * @param gid
   */
  lchownSync(path, uid, gid) {
    path = normalizePath(path);
    assertRoot(this.root).chownSync(path, true, uid, gid, this.cred);
  }
  /**
   * Asynchronous `chmod`.
   * @param path
   * @param mode
   * @param callback
   */
  chmod(path, mode, cb = nopCb) {
    const newCb = wrapCb(cb, 1);
    try {
      const numMode = normalizeMode(mode, -1);
      if (numMode < 0) {
        throw new ApiError(22 /* EINVAL */, `Invalid mode.`);
      }
      assertRoot(this.root).chmod(normalizePath(path), false, numMode, this.cred, newCb);
    } catch (e) {
      newCb(e);
    }
  }
  /**
   * Synchronous `chmod`.
   * @param path
   * @param mode
   */
  chmodSync(path, mode) {
    const numMode = normalizeMode(mode, -1);
    if (numMode < 0) {
      throw new ApiError(22 /* EINVAL */, `Invalid mode.`);
    }
    path = normalizePath(path);
    assertRoot(this.root).chmodSync(path, false, numMode, this.cred);
  }
  /**
   * Asynchronous `lchmod`.
   * @param path
   * @param mode
   * @param callback
   */
  lchmod(path, mode, cb = nopCb) {
    const newCb = wrapCb(cb, 1);
    try {
      const numMode = normalizeMode(mode, -1);
      if (numMode < 0) {
        throw new ApiError(22 /* EINVAL */, `Invalid mode.`);
      }
      assertRoot(this.root).chmod(normalizePath(path), true, numMode, this.cred, newCb);
    } catch (e) {
      newCb(e);
    }
  }
  /**
   * Synchronous `lchmod`.
   * @param path
   * @param mode
   */
  lchmodSync(path, mode) {
    const numMode = normalizeMode(mode, -1);
    if (numMode < 1) {
      throw new ApiError(22 /* EINVAL */, `Invalid mode.`);
    }
    assertRoot(this.root).chmodSync(normalizePath(path), true, numMode, this.cred);
  }
  /**
   * Change file timestamps of the file referenced by the supplied path.
   * @param path
   * @param atime
   * @param mtime
   * @param callback
   */
  utimes(path, atime, mtime, cb = nopCb) {
    const newCb = wrapCb(cb, 1);
    try {
      assertRoot(this.root).utimes(normalizePath(path), normalizeTime(atime), normalizeTime(mtime), this.cred, newCb);
    } catch (e) {
      newCb(e);
    }
  }
  /**
   * Change file timestamps of the file referenced by the supplied path.
   * @param path
   * @param atime
   * @param mtime
   */
  utimesSync(path, atime, mtime) {
    assertRoot(this.root).utimesSync(normalizePath(path), normalizeTime(atime), normalizeTime(mtime), this.cred);
  }
  realpath(path, arg2, cb = nopCb) {
    const cache = typeof arg2 === "object" ? arg2 : {};
    cb = typeof arg2 === "function" ? arg2 : nopCb;
    const newCb = wrapCb(cb, 2);
    try {
      path = normalizePath(path);
      assertRoot(this.root).realpath(path, cache, this.cred, newCb);
    } catch (e) {
      newCb(e);
    }
  }
  /**
   * Synchronous `realpath`.
   * @param path
   * @param cache An object literal of mapped paths that can be used to
   *   force a specific path resolution or avoid additional `fs.stat` calls for
   *   known real paths.
   * @return [String]
   */
  realpathSync(path, cache = {}) {
    path = normalizePath(path);
    return assertRoot(this.root).realpathSync(path, cache, this.cred);
  }
  watchFile(filename, arg2, listener = nopCb) {
    throw new ApiError(95 /* ENOTSUP */);
  }
  unwatchFile(filename, listener = nopCb) {
    throw new ApiError(95 /* ENOTSUP */);
  }
  watch(filename, arg2, listener = nopCb) {
    throw new ApiError(95 /* ENOTSUP */);
  }
  access(path, arg2, callback = nopCb) {
    const mode = typeof arg2 === "number" ? arg2 : 4 /* READ */;
    callback = typeof arg2 === "function" ? arg2 : nopCb;
    const newCb = wrapCb(callback, 2);
    try {
      path = normalizePath(path);
      assertRoot(this.root).access(path, mode, this.cred, newCb);
    } catch (e) {
      newCb(e);
    }
  }
  /**
   * Synchronous `access`.
   * @param path
   * @param mode
   */
  accessSync(path, mode = 384) {
    path = normalizePath(path);
    return assertRoot(this.root).accessSync(path, mode, this.cred);
  }
  createReadStream(path, options) {
    throw new ApiError(95 /* ENOTSUP */);
  }
  createWriteStream(path, options) {
    throw new ApiError(95 /* ENOTSUP */);
  }
  /**
   * For unit testing. Passes all incoming callbacks to cbWrapper for wrapping.
   */
  wrapCallbacks(cbWrapper) {
    wrapCbHook = cbWrapper;
  }
  getFdForFile(file) {
    const fd = this.nextFd++;
    this.fdMap[fd] = file;
    return fd;
  }
  fd2file(fd) {
    const rv = this.fdMap[fd];
    if (rv) {
      return rv;
    } else {
      throw new ApiError(9 /* EBADF */, "Invalid file descriptor.");
    }
  }
  closeFd(fd) {
    delete this.fdMap[fd];
  }
};
/* tslint:disable:variable-name */
// Exported fs.Stats.
FS.Stats = Stats;

// src/core/node_fs.ts
var fs = new FS();
var _fsMock = {};
for (const key of Object.getOwnPropertyNames(FS.prototype)) {
  if (typeof fs[key] === "function") {
    _fsMock[key] = function(...args) {
      return fs[key].apply(fs, args);
    };
  } else {
    _fsMock[key] = fs[key];
  }
}
_fsMock.changeFSModule = function(newFs) {
  fs = newFs;
};
_fsMock.getFSModule = function() {
  return fs;
};
_fsMock.FS = FS;
_fsMock.Stats = FS.Stats;
var node_fs_default = _fsMock;

// src/core/util.ts
var util_exports = {};
__export(util_exports, {
  arrayBuffer2Buffer: () => arrayBuffer2Buffer,
  buffer2ArrayBuffer: () => buffer2ArrayBuffer,
  buffer2Uint8array: () => buffer2Uint8array,
  bufferValidator: () => bufferValidator,
  checkOptions: () => checkOptions,
  copyingSlice: () => copyingSlice,
  deprecationMessage: () => deprecationMessage,
  emptyBuffer: () => emptyBuffer,
  fail: () => fail,
  isIE: () => isIE,
  isWebWorker: () => isWebWorker,
  mkdirpSync: () => mkdirpSync,
  uint8Array2Buffer: () => uint8Array2Buffer
});

// src/core/levenshtein.ts
function _min(d0, d1, d2, bx, ay) {
  return d0 < d1 || d2 < d1 ? d0 > d2 ? d2 + 1 : d0 + 1 : bx === ay ? d1 : d1 + 1;
}
function levenshtein(a, b) {
  if (a === b) {
    return 0;
  }
  if (a.length > b.length) {
    const tmp = a;
    a = b;
    b = tmp;
  }
  let la = a.length;
  let lb = b.length;
  while (la > 0 && a.charCodeAt(la - 1) === b.charCodeAt(lb - 1)) {
    la--;
    lb--;
  }
  let offset = 0;
  while (offset < la && a.charCodeAt(offset) === b.charCodeAt(offset)) {
    offset++;
  }
  la -= offset;
  lb -= offset;
  if (la === 0 || lb === 1) {
    return lb;
  }
  const vector = new Array(la << 1);
  for (let y = 0; y < la; ) {
    vector[la + y] = a.charCodeAt(offset + y);
    vector[y] = ++y;
  }
  let x;
  let d0;
  let d1;
  let d2;
  let d3;
  for (x = 0; x + 3 < lb; ) {
    const bx0 = b.charCodeAt(offset + (d0 = x));
    const bx1 = b.charCodeAt(offset + (d1 = x + 1));
    const bx2 = b.charCodeAt(offset + (d2 = x + 2));
    const bx3 = b.charCodeAt(offset + (d3 = x + 3));
    let dd2 = x += 4;
    for (let y = 0; y < la; ) {
      const ay = vector[la + y];
      const dy = vector[y];
      d0 = _min(dy, d0, d1, bx0, ay);
      d1 = _min(d0, d1, d2, bx1, ay);
      d2 = _min(d1, d2, d3, bx2, ay);
      dd2 = _min(d2, d3, dd2, bx3, ay);
      vector[y++] = dd2;
      d3 = d2;
      d2 = d1;
      d1 = d0;
      d0 = dy;
    }
  }
  let dd = 0;
  for (; x < lb; ) {
    const bx0 = b.charCodeAt(offset + (d0 = x));
    dd = ++x;
    for (let y = 0; y < la; y++) {
      const dy = vector[y];
      vector[y] = dd = dy < d0 || dd < d0 ? dy > dd ? dd + 1 : dy + 1 : bx0 === vector[la + y] ? d0 : d0 + 1;
      d0 = dy;
    }
  }
  return dd;
}

// src/core/util.ts
function deprecationMessage(print, fsName, opts) {
  if (print) {
    console.warn(
      `[${fsName}] Direct file system constructor usage is deprecated for this file system, and will be removed in the next major version. Please use the '${fsName}.Create(${JSON.stringify(
        opts
      )}, callback)' method instead. See https://github.com/jvilk/BrowserFS/issues/176 for more details.`
    );
  }
}
var isIE = typeof navigator !== "undefined" && !!(/(msie) ([\w.]+)/.exec(navigator.userAgent.toLowerCase()) || navigator.userAgent.indexOf("Trident") !== -1);
var isWebWorker = typeof window === "undefined";
function fail() {
  throw new Error("BFS has reached an impossible code path; please file a bug.");
}
function mkdirpSync(p, mode, cred, fs2) {
  if (!fs2.existsSync(p, cred)) {
    mkdirpSync(dirname(p), mode, cred, fs2);
    fs2.mkdirSync(p, mode, cred);
  }
}
function buffer2ArrayBuffer(buff) {
  const u8 = buffer2Uint8array(buff), u8offset = u8.byteOffset, u8Len = u8.byteLength;
  if (u8offset === 0 && u8Len === u8.buffer.byteLength) {
    return u8.buffer;
  } else {
    return u8.buffer.slice(u8offset, u8offset + u8Len);
  }
}
function buffer2Uint8array(buff) {
  if (buff instanceof Uint8Array) {
    return buff;
  } else {
    return new Uint8Array(buff);
  }
}
function uint8Array2Buffer(u8) {
  if (u8 instanceof Buffer2) {
    return u8;
  } else if (u8.byteOffset === 0 && u8.byteLength === u8.buffer.byteLength) {
    return arrayBuffer2Buffer(u8.buffer);
  } else {
    return Buffer2.from(u8.buffer, u8.byteOffset, u8.byteLength);
  }
}
function arrayBuffer2Buffer(ab) {
  return Buffer2.from(ab);
}
function copyingSlice(buff, start = 0, end = buff.length) {
  if (start < 0 || end < 0 || end > buff.length || start > end) {
    throw new TypeError(`Invalid slice bounds on buffer of length ${buff.length}: [${start}, ${end}]`);
  }
  if (buff.length === 0) {
    return emptyBuffer();
  } else {
    const u8 = buffer2Uint8array(buff), s0 = buff[0], newS0 = (s0 + 1) % 255;
    buff[0] = newS0;
    if (u8[0] === newS0) {
      u8[0] = s0;
      return uint8Array2Buffer(u8.slice(start, end));
    } else {
      buff[0] = s0;
      return uint8Array2Buffer(u8.subarray(start, end));
    }
  }
}
var emptyBuff = null;
function emptyBuffer() {
  if (emptyBuff) {
    return emptyBuff;
  }
  return emptyBuff = Buffer2.alloc(0);
}
function bufferValidator(v, cb) {
  if (Buffer2.isBuffer(v)) {
    cb();
  } else {
    cb(new ApiError(22 /* EINVAL */, `option must be a Buffer.`));
  }
}
function checkOptions(fsType, opts, cb) {
  const optsInfo = fsType.Options;
  const fsName = fsType.Name;
  let pendingValidators = 0;
  let callbackCalled = false;
  let loopEnded = false;
  function validatorCallback(e) {
    if (!callbackCalled) {
      if (e) {
        callbackCalled = true;
        cb(e);
      }
      pendingValidators--;
      if (pendingValidators === 0 && loopEnded) {
        cb();
      }
    }
  }
  for (const optName in optsInfo) {
    if (Object.prototype.hasOwnProperty.call(optsInfo, optName)) {
      const opt = optsInfo[optName];
      const providedValue = opts && opts[optName];
      if (providedValue === void 0 || providedValue === null) {
        if (!opt.optional) {
          const incorrectOptions = Object.keys(opts).filter((o) => !(o in optsInfo)).map((a) => {
            return { str: a, distance: levenshtein(optName, a) };
          }).filter((o) => o.distance < 5).sort((a, b) => a.distance - b.distance);
          if (callbackCalled) {
            return;
          }
          callbackCalled = true;
          return cb(
            new ApiError(
              22 /* EINVAL */,
              `[${fsName}] Required option '${optName}' not provided.${incorrectOptions.length > 0 ? ` You provided unrecognized option '${incorrectOptions[0].str}'; perhaps you meant to type '${optName}'.` : ""}
Option description: ${opt.description}`
            )
          );
        }
      } else {
        let typeMatches = false;
        if (Array.isArray(opt.type)) {
          typeMatches = opt.type.indexOf(typeof providedValue) !== -1;
        } else {
          typeMatches = typeof providedValue === opt.type;
        }
        if (!typeMatches) {
          if (callbackCalled) {
            return;
          }
          callbackCalled = true;
          return cb(
            new ApiError(
              22 /* EINVAL */,
              `[${fsName}] Value provided for option ${optName} is not the proper type. Expected ${Array.isArray(opt.type) ? `one of {${opt.type.join(", ")}}` : opt.type}, but received ${typeof providedValue}
Option description: ${opt.description}`
            )
          );
        } else if (opt.validator) {
          pendingValidators++;
          opt.validator(providedValue, validatorCallback);
        }
      }
    }
  }
  loopEnded = true;
  if (pendingValidators === 0 && !callbackCalled) {
    cb();
  }
}

// src/generic/emscripten_fs.ts
var BFSEmscriptenStreamOps = class {
  constructor(fs2) {
    this.fs = fs2;
    this.nodefs = fs2.getNodeFS();
    this.FS = fs2.getFS();
    this.PATH = fs2.getPATH();
    this.ERRNO_CODES = fs2.getERRNO_CODES();
  }
  open(stream) {
    const path = this.fs.realPath(stream.node);
    const FS2 = this.FS;
    try {
      if (FS2.isFile(stream.node.mode)) {
        stream.nfd = this.nodefs.openSync(path, this.fs.flagsToPermissionString(stream.flags));
      }
    } catch (e) {
      if (!e.code) {
        throw e;
      }
      throw new FS2.ErrnoError(this.ERRNO_CODES[e.code]);
    }
  }
  close(stream) {
    const FS2 = this.FS;
    try {
      if (FS2.isFile(stream.node.mode) && stream.nfd) {
        this.nodefs.closeSync(stream.nfd);
      }
    } catch (e) {
      if (!e.code) {
        throw e;
      }
      throw new FS2.ErrnoError(this.ERRNO_CODES[e.code]);
    }
  }
  read(stream, buffer, offset, length, position) {
    try {
      return this.nodefs.readSync(stream.nfd, uint8Array2Buffer(buffer), offset, length, position);
    } catch (e) {
      throw new this.FS.ErrnoError(this.ERRNO_CODES[e.code]);
    }
  }
  write(stream, buffer, offset, length, position) {
    try {
      return this.nodefs.writeSync(stream.nfd, uint8Array2Buffer(buffer), offset, length, position);
    } catch (e) {
      throw new this.FS.ErrnoError(this.ERRNO_CODES[e.code]);
    }
  }
  llseek(stream, offset, whence) {
    let position = offset;
    if (whence === 1) {
      position += stream.position;
    } else if (whence === 2) {
      if (this.FS.isFile(stream.node.mode)) {
        try {
          const stat = this.nodefs.fstatSync(stream.nfd);
          position += stat.size;
        } catch (e) {
          throw new this.FS.ErrnoError(this.ERRNO_CODES[e.code]);
        }
      }
    }
    if (position < 0) {
      throw new this.FS.ErrnoError(this.ERRNO_CODES.EINVAL);
    }
    stream.position = position;
    return position;
  }
};
var BFSEmscriptenNodeOps = class {
  constructor(fs2) {
    this.fs = fs2;
    this.nodefs = fs2.getNodeFS();
    this.FS = fs2.getFS();
    this.PATH = fs2.getPATH();
    this.ERRNO_CODES = fs2.getERRNO_CODES();
  }
  getattr(node) {
    const path = this.fs.realPath(node);
    let stat;
    try {
      stat = this.nodefs.lstatSync(path);
    } catch (e) {
      if (!e.code) {
        throw e;
      }
      throw new this.FS.ErrnoError(this.ERRNO_CODES[e.code]);
    }
    return {
      dev: stat.dev,
      ino: stat.ino,
      mode: stat.mode,
      nlink: stat.nlink,
      uid: stat.uid,
      gid: stat.gid,
      rdev: stat.rdev,
      size: stat.size,
      atime: stat.atime,
      mtime: stat.mtime,
      ctime: stat.ctime,
      blksize: stat.blksize,
      blocks: stat.blocks
    };
  }
  setattr(node, attr) {
    const path = this.fs.realPath(node);
    try {
      if (attr.mode !== void 0) {
        this.nodefs.chmodSync(path, attr.mode);
        node.mode = attr.mode;
      }
      if (attr.timestamp !== void 0) {
        const date = new Date(attr.timestamp);
        this.nodefs.utimesSync(path, date, date);
      }
    } catch (e) {
      if (!e.code) {
        throw e;
      }
      if (e.code !== "ENOTSUP") {
        throw new this.FS.ErrnoError(this.ERRNO_CODES[e.code]);
      }
    }
    if (attr.size !== void 0) {
      try {
        this.nodefs.truncateSync(path, attr.size);
      } catch (e) {
        if (!e.code) {
          throw e;
        }
        throw new this.FS.ErrnoError(this.ERRNO_CODES[e.code]);
      }
    }
  }
  lookup(parent, name) {
    const path = this.PATH.join2(this.fs.realPath(parent), name);
    const mode = this.fs.getMode(path);
    return this.fs.createNode(parent, name, mode);
  }
  mknod(parent, name, mode, dev) {
    const node = this.fs.createNode(parent, name, mode, dev);
    const path = this.fs.realPath(node);
    try {
      if (this.FS.isDir(node.mode)) {
        this.nodefs.mkdirSync(path, node.mode);
      } else {
        this.nodefs.writeFileSync(path, "", { mode: node.mode });
      }
    } catch (e) {
      if (!e.code) {
        throw e;
      }
      throw new this.FS.ErrnoError(this.ERRNO_CODES[e.code]);
    }
    return node;
  }
  rename(oldNode, newDir, newName) {
    const oldPath = this.fs.realPath(oldNode);
    const newPath = this.PATH.join2(this.fs.realPath(newDir), newName);
    try {
      this.nodefs.renameSync(oldPath, newPath);
      oldNode.name = newName;
      oldNode.parent = newDir;
    } catch (e) {
      if (!e.code) {
        throw e;
      }
      throw new this.FS.ErrnoError(this.ERRNO_CODES[e.code]);
    }
  }
  unlink(parent, name) {
    const path = this.PATH.join2(this.fs.realPath(parent), name);
    try {
      this.nodefs.unlinkSync(path);
    } catch (e) {
      if (!e.code) {
        throw e;
      }
      throw new this.FS.ErrnoError(this.ERRNO_CODES[e.code]);
    }
  }
  rmdir(parent, name) {
    const path = this.PATH.join2(this.fs.realPath(parent), name);
    try {
      this.nodefs.rmdirSync(path);
    } catch (e) {
      if (!e.code) {
        throw e;
      }
      throw new this.FS.ErrnoError(this.ERRNO_CODES[e.code]);
    }
  }
  readdir(node) {
    const path = this.fs.realPath(node);
    try {
      const contents = this.nodefs.readdirSync(path);
      contents.push(".", "..");
      return contents;
    } catch (e) {
      if (!e.code) {
        throw e;
      }
      throw new this.FS.ErrnoError(this.ERRNO_CODES[e.code]);
    }
  }
  symlink(parent, newName, oldPath) {
    const newPath = this.PATH.join2(this.fs.realPath(parent), newName);
    try {
      this.nodefs.symlinkSync(oldPath, newPath);
    } catch (e) {
      if (!e.code) {
        throw e;
      }
      throw new this.FS.ErrnoError(this.ERRNO_CODES[e.code]);
    }
  }
  readlink(node) {
    const path = this.fs.realPath(node);
    try {
      return this.nodefs.readlinkSync(path);
    } catch (e) {
      if (!e.code) {
        throw e;
      }
      throw new this.FS.ErrnoError(this.ERRNO_CODES[e.code]);
    }
  }
};
var BFSEmscriptenFS = class {
  constructor(_FS = self["FS"], _PATH = self["PATH"], _ERRNO_CODES = self["ERRNO_CODES"], nodefs = node_fs_default) {
    // This maps the integer permission modes from http://linux.die.net/man/3/open
    // to node.js-specific file open permission strings at http://nodejs.org/api/fs.html#fs_fs_open_path_flags_mode_callback
    this.flagsToPermissionStringMap = {
      0: "r",
      1: "r+",
      2: "r+",
      64: "r",
      65: "r+",
      66: "r+",
      129: "rx+",
      193: "rx+",
      514: "w+",
      577: "w",
      578: "w+",
      705: "wx",
      706: "wx+",
      1024: "a",
      1025: "a",
      1026: "a+",
      1089: "a",
      1090: "a+",
      1153: "ax",
      1154: "ax+",
      1217: "ax",
      1218: "ax+",
      4096: "rs",
      4098: "rs+"
    };
    this.nodefs = nodefs;
    this.FS = _FS;
    this.PATH = _PATH;
    this.ERRNO_CODES = _ERRNO_CODES;
    this.node_ops = new BFSEmscriptenNodeOps(this);
    this.stream_ops = new BFSEmscriptenStreamOps(this);
  }
  mount(m) {
    return this.createNode(null, "/", this.getMode(m.opts.root), 0);
  }
  createNode(parent, name, mode, dev) {
    const FS2 = this.FS;
    if (!FS2.isDir(mode) && !FS2.isFile(mode) && !FS2.isLink(mode)) {
      throw new FS2.ErrnoError(this.ERRNO_CODES.EINVAL);
    }
    const node = FS2.createNode(parent, name, mode);
    node.node_ops = this.node_ops;
    node.stream_ops = this.stream_ops;
    return node;
  }
  getMode(path) {
    let stat;
    try {
      stat = this.nodefs.lstatSync(path);
    } catch (e) {
      if (!e.code) {
        throw e;
      }
      throw new this.FS.ErrnoError(this.ERRNO_CODES[e.code]);
    }
    return stat.mode;
  }
  realPath(node) {
    const parts = [];
    while (node.parent !== node) {
      parts.push(node.name);
      node = node.parent;
    }
    parts.push(node.mount.opts.root);
    parts.reverse();
    return this.PATH.join.apply(null, parts);
  }
  flagsToPermissionString(flags) {
    let parsedFlags = typeof flags === "string" ? parseInt(flags, 10) : flags;
    parsedFlags &= 8191;
    if (parsedFlags in this.flagsToPermissionStringMap) {
      return this.flagsToPermissionStringMap[parsedFlags];
    } else {
      return flags;
    }
  }
  getNodeFS() {
    return this.nodefs;
  }
  getFS() {
    return this.FS;
  }
  getPATH() {
    return this.PATH;
  }
  getERRNO_CODES() {
    return this.ERRNO_CODES;
  }
};

// src/core/file_system.ts
var BaseFileSystem = class {
  supportsLinks() {
    return false;
  }
  diskSpace(p, cb) {
    cb(0, 0);
  }
  /**
   * Opens the file at path p with the given flag. The file must exist.
   * @param p The path to open.
   * @param flag The flag to use when opening the file.
   */
  openFile(p, flag, cred, cb) {
    throw new ApiError(95 /* ENOTSUP */);
  }
  /**
   * Create the file at path p with the given mode. Then, open it with the given
   * flag.
   */
  createFile(p, flag, mode, cred, cb) {
    throw new ApiError(95 /* ENOTSUP */);
  }
  open(p, flag, mode, cred, cb) {
    const mustBeFile = (e, stats) => {
      if (e) {
        switch (flag.pathNotExistsAction()) {
          case 3 /* CREATE_FILE */:
            return this.stat(dirname(p), false, cred, (e2, parentStats) => {
              if (e2) {
                cb(e2);
              } else if (parentStats && !parentStats.isDirectory()) {
                cb(ApiError.ENOTDIR(dirname(p)));
              } else {
                this.createFile(p, flag, mode, cred, cb);
              }
            });
          case 1 /* THROW_EXCEPTION */:
            return cb(ApiError.ENOENT(p));
          default:
            return cb(new ApiError(22 /* EINVAL */, "Invalid FileFlag object."));
        }
      } else {
        switch (flag.pathExistsAction()) {
          case 1 /* THROW_EXCEPTION */:
            return cb(ApiError.EEXIST(p));
          case 2 /* TRUNCATE_FILE */:
            return this.openFile(p, flag, cred, (e2, fd) => {
              if (e2) {
                cb(e2);
              } else if (fd) {
                fd.truncate(0, () => {
                  fd.sync(() => {
                    cb(null, fd);
                  });
                });
              } else {
                fail();
              }
            });
          case 0 /* NOP */:
            return this.openFile(p, flag, cred, cb);
          default:
            return cb(new ApiError(22 /* EINVAL */, "Invalid FileFlag object."));
        }
      }
    };
    this.stat(p, false, cred, mustBeFile);
  }
  access(p, mode, cred, cb) {
    cb(new ApiError(95 /* ENOTSUP */));
  }
  accessSync(p, mode, cred) {
    throw new ApiError(95 /* ENOTSUP */);
  }
  rename(oldPath, newPath, cred, cb) {
    cb(new ApiError(95 /* ENOTSUP */));
  }
  renameSync(oldPath, newPath, cred) {
    throw new ApiError(95 /* ENOTSUP */);
  }
  stat(p, isLstat, cred, cb) {
    cb(new ApiError(95 /* ENOTSUP */));
  }
  statSync(p, isLstat, cred) {
    throw new ApiError(95 /* ENOTSUP */);
  }
  /**
   * Opens the file at path p with the given flag. The file must exist.
   * @param p The path to open.
   * @param flag The flag to use when opening the file.
   * @return A File object corresponding to the opened file.
   */
  openFileSync(p, flag, cred) {
    throw new ApiError(95 /* ENOTSUP */);
  }
  /**
   * Create the file at path p with the given mode. Then, open it with the given
   * flag.
   */
  createFileSync(p, flag, mode, cred) {
    throw new ApiError(95 /* ENOTSUP */);
  }
  openSync(p, flag, mode, cred) {
    let stats;
    try {
      stats = this.statSync(p, false, cred);
    } catch (e) {
      switch (flag.pathNotExistsAction()) {
        case 3 /* CREATE_FILE */:
          const parentStats = this.statSync(dirname(p), false, cred);
          if (!parentStats.isDirectory()) {
            throw ApiError.ENOTDIR(dirname(p));
          }
          return this.createFileSync(p, flag, mode, cred);
        case 1 /* THROW_EXCEPTION */:
          throw ApiError.ENOENT(p);
        default:
          throw new ApiError(22 /* EINVAL */, "Invalid FileFlag object.");
      }
    }
    if (!stats.hasAccess(mode, cred)) {
      throw ApiError.EACCES(p);
    }
    switch (flag.pathExistsAction()) {
      case 1 /* THROW_EXCEPTION */:
        throw ApiError.EEXIST(p);
      case 2 /* TRUNCATE_FILE */:
        this.unlinkSync(p, cred);
        return this.createFileSync(p, flag, stats.mode, cred);
      case 0 /* NOP */:
        return this.openFileSync(p, flag, cred);
      default:
        throw new ApiError(22 /* EINVAL */, "Invalid FileFlag object.");
    }
  }
  unlink(p, cred, cb) {
    cb(new ApiError(95 /* ENOTSUP */));
  }
  unlinkSync(p, cred) {
    throw new ApiError(95 /* ENOTSUP */);
  }
  rmdir(p, cred, cb) {
    cb(new ApiError(95 /* ENOTSUP */));
  }
  rmdirSync(p, cred) {
    throw new ApiError(95 /* ENOTSUP */);
  }
  mkdir(p, mode, cred, cb) {
    cb(new ApiError(95 /* ENOTSUP */));
  }
  mkdirSync(p, mode, cred) {
    throw new ApiError(95 /* ENOTSUP */);
  }
  readdir(p, cred, cb) {
    cb(new ApiError(95 /* ENOTSUP */));
  }
  readdirSync(p, cred) {
    throw new ApiError(95 /* ENOTSUP */);
  }
  exists(p, cred, cb) {
    this.stat(p, null, cred, function(err2) {
      cb(!err2);
    });
  }
  existsSync(p, cred) {
    try {
      this.statSync(p, true, cred);
      return true;
    } catch (e) {
      return false;
    }
  }
  realpath(p, cache, cred, cb) {
    if (this.supportsLinks()) {
      const splitPath2 = p.split(sep);
      for (let i = 0; i < splitPath2.length; i++) {
        const addPaths = splitPath2.slice(0, i + 1);
        splitPath2[i] = join.apply(null, addPaths);
      }
    } else {
      this.exists(p, cred, function(doesExist) {
        if (doesExist) {
          cb(null, p);
        } else {
          cb(ApiError.ENOENT(p));
        }
      });
    }
  }
  realpathSync(p, cache, cred) {
    if (this.supportsLinks()) {
      const splitPath2 = p.split(sep);
      for (let i = 0; i < splitPath2.length; i++) {
        const addPaths = splitPath2.slice(0, i + 1);
        splitPath2[i] = join.apply(path_exports, addPaths);
      }
      return splitPath2.join(sep);
    } else {
      if (this.existsSync(p, cred)) {
        return p;
      } else {
        throw ApiError.ENOENT(p);
      }
    }
  }
  truncate(p, len, cred, cb) {
    this.open(p, FileFlag.getFileFlag("r+"), 420, cred, function(er, fd) {
      if (er) {
        return cb(er);
      }
      fd.truncate(len, function(er2) {
        fd.close(function(er22) {
          cb(er2 || er22);
        });
      });
    });
  }
  truncateSync(p, len, cred) {
    const fd = this.openSync(p, FileFlag.getFileFlag("r+"), 420, cred);
    try {
      fd.truncateSync(len);
    } finally {
      fd.closeSync();
    }
  }
  readFile(fname, encoding, flag, cred, cb) {
    const oldCb = cb;
    this.open(fname, flag, 420, cred, (err2, fd) => {
      if (err2) {
        return cb(err2);
      }
      cb = function(err3, arg) {
        fd.close(function(err22) {
          if (!err3) {
            err3 = err22;
          }
          return oldCb(err3, arg);
        });
      };
      fd.stat((err3, stat) => {
        if (err3) {
          return cb(err3);
        }
        const buf = Buffer2.alloc(stat.size);
        fd.read(buf, 0, stat.size, 0, (err4) => {
          if (err4) {
            return cb(err4);
          } else if (encoding === null) {
            return cb(err4, buf);
          }
          try {
            cb(null, buf.toString(encoding));
          } catch (e) {
            cb(e);
          }
        });
      });
    });
  }
  readFileSync(fname, encoding, flag, cred) {
    const fd = this.openSync(fname, flag, 420, cred);
    try {
      const stat = fd.statSync();
      const buf = Buffer2.alloc(stat.size);
      fd.readSync(buf, 0, stat.size, 0);
      fd.closeSync();
      if (encoding === null) {
        return buf;
      }
      return buf.toString(encoding);
    } finally {
      fd.closeSync();
    }
  }
  writeFile(fname, data, encoding, flag, mode, cred, cb) {
    const oldCb = cb;
    this.open(fname, flag, 420, cred, function(err2, fd) {
      if (err2) {
        return cb(err2);
      }
      cb = function(err3) {
        fd.close(function(err22) {
          oldCb(err3 ? err3 : err22);
        });
      };
      try {
        if (typeof data === "string") {
          data = Buffer2.from(data, encoding);
        }
      } catch (e) {
        return cb(e);
      }
      fd.write(data, 0, data.length, 0, cb);
    });
  }
  writeFileSync(fname, data, encoding, flag, mode, cred) {
    const fd = this.openSync(fname, flag, mode, cred);
    try {
      if (typeof data === "string") {
        data = Buffer2.from(data, encoding);
      }
      fd.writeSync(data, 0, data.length, 0);
    } finally {
      fd.closeSync();
    }
  }
  appendFile(fname, data, encoding, flag, mode, cred, cb) {
    const oldCb = cb;
    this.open(fname, flag, mode, cred, function(err2, fd) {
      if (err2) {
        return cb(err2);
      }
      cb = function(err3) {
        fd.close(function(err22) {
          oldCb(err3 ? err3 : err22);
        });
      };
      if (typeof data === "string") {
        data = Buffer2.from(data, encoding);
      }
      fd.write(data, 0, data.length, null, cb);
    });
  }
  appendFileSync(fname, data, encoding, flag, mode, cred) {
    const fd = this.openSync(fname, flag, mode, cred);
    try {
      if (typeof data === "string") {
        data = Buffer2.from(data, encoding);
      }
      fd.writeSync(data, 0, data.length, null);
    } finally {
      fd.closeSync();
    }
  }
  chmod(p, isLchmod, mode, cred, cb) {
    cb(new ApiError(95 /* ENOTSUP */));
  }
  chmodSync(p, isLchmod, mode, cred) {
    throw new ApiError(95 /* ENOTSUP */);
  }
  chown(p, isLchown, new_uid, new_gid, cred, cb) {
    cb(new ApiError(95 /* ENOTSUP */));
  }
  chownSync(p, isLchown, new_uid, new_gid, cred) {
    throw new ApiError(95 /* ENOTSUP */);
  }
  utimes(p, atime, mtime, cred, cb) {
    cb(new ApiError(95 /* ENOTSUP */));
  }
  utimesSync(p, atime, mtime, cred) {
    throw new ApiError(95 /* ENOTSUP */);
  }
  link(srcpath, dstpath, cred, cb) {
    cb(new ApiError(95 /* ENOTSUP */));
  }
  linkSync(srcpath, dstpath, cred) {
    throw new ApiError(95 /* ENOTSUP */);
  }
  symlink(srcpath, dstpath, type, cred, cb) {
    cb(new ApiError(95 /* ENOTSUP */));
  }
  symlinkSync(srcpath, dstpath, type, cred) {
    throw new ApiError(95 /* ENOTSUP */);
  }
  readlink(p, cred, cb) {
    cb(new ApiError(95 /* ENOTSUP */));
  }
  readlinkSync(p, cred) {
    throw new ApiError(95 /* ENOTSUP */);
  }
};
var SynchronousFileSystem = class extends BaseFileSystem {
  supportsSynch() {
    return true;
  }
  access(p, mode, cred, cb) {
    try {
      this.accessSync(p, mode, cred);
      cb();
    } catch (e) {
      cb(e);
    }
  }
  rename(oldPath, newPath, cred, cb) {
    try {
      this.renameSync(oldPath, newPath, cred);
      cb();
    } catch (e) {
      cb(e);
    }
  }
  stat(p, isLstat, cred, cb) {
    try {
      cb(null, this.statSync(p, isLstat, cred));
    } catch (e) {
      cb(e);
    }
  }
  open(p, flags, mode, cred, cb) {
    try {
      cb(null, this.openSync(p, flags, mode, cred));
    } catch (e) {
      cb(e);
    }
  }
  unlink(p, cred, cb) {
    try {
      this.unlinkSync(p, cred);
      cb();
    } catch (e) {
      cb(e);
    }
  }
  rmdir(p, cred, cb) {
    try {
      this.rmdirSync(p, cred);
      cb();
    } catch (e) {
      cb(e);
    }
  }
  mkdir(p, mode, cred, cb) {
    try {
      this.mkdirSync(p, mode, cred);
      cb();
    } catch (e) {
      cb(e);
    }
  }
  readdir(p, cred, cb) {
    try {
      cb(null, this.readdirSync(p, cred));
    } catch (e) {
      cb(e);
    }
  }
  chmod(p, isLchmod, mode, cred, cb) {
    try {
      this.chmodSync(p, isLchmod, mode, cred);
      cb();
    } catch (e) {
      cb(e);
    }
  }
  chown(p, isLchown, new_uid, new_gid, cred, cb) {
    try {
      this.chownSync(p, isLchown, new_uid, new_gid, cred);
      cb();
    } catch (e) {
      cb(e);
    }
  }
  utimes(p, atime, mtime, cred, cb) {
    try {
      this.utimesSync(p, atime, mtime, cred);
      cb();
    } catch (e) {
      cb(e);
    }
  }
  link(srcpath, dstpath, cred, cb) {
    try {
      this.linkSync(srcpath, dstpath, cred);
      cb();
    } catch (e) {
      cb(e);
    }
  }
  symlink(srcpath, dstpath, type, cred, cb) {
    try {
      this.symlinkSync(srcpath, dstpath, type, cred);
      cb();
    } catch (e) {
      cb(e);
    }
  }
  readlink(p, cred, cb) {
    try {
      cb(null, this.readlinkSync(p, cred));
    } catch (e) {
      cb(e);
    }
  }
};

// src/core/file.ts
var BaseFile = class {
  sync(cb) {
    cb(new ApiError(95 /* ENOTSUP */));
  }
  syncSync() {
    throw new ApiError(95 /* ENOTSUP */);
  }
  datasync(cb) {
    this.sync(cb);
  }
  datasyncSync() {
    return this.syncSync();
  }
  chown(uid, gid, cb) {
    cb(new ApiError(95 /* ENOTSUP */));
  }
  chownSync(uid, gid) {
    throw new ApiError(95 /* ENOTSUP */);
  }
  chmod(mode, cb) {
    cb(new ApiError(95 /* ENOTSUP */));
  }
  chmodSync(mode) {
    throw new ApiError(95 /* ENOTSUP */);
  }
  utimes(atime, mtime, cb) {
    cb(new ApiError(95 /* ENOTSUP */));
  }
  utimesSync(atime, mtime) {
    throw new ApiError(95 /* ENOTSUP */);
  }
};

// src/generic/preload_file.ts
var PreloadFile = class extends BaseFile {
  /**
   * Creates a file with the given path and, optionally, the given contents. Note
   * that, if contents is specified, it will be mutated by the file!
   * @param _fs The file system that created the file.
   * @param _path
   * @param _mode The mode that the file was opened using.
   *   Dictates permissions and where the file pointer starts.
   * @param _stat The stats object for the given file.
   *   PreloadFile will mutate this object. Note that this object must contain
   *   the appropriate mode that the file was opened as.
   * @param contents A buffer containing the entire
   *   contents of the file. PreloadFile will mutate this buffer. If not
   *   specified, we assume it is a new file.
   */
  constructor(_fs, _path, _flag, _stat, contents) {
    super();
    this._pos = 0;
    this._dirty = false;
    this._fs = _fs;
    this._path = _path;
    this._flag = _flag;
    this._stat = _stat;
    this._buffer = contents ? contents : emptyBuffer();
    if (this._stat.size !== this._buffer.length && this._flag.isReadable()) {
      throw new Error(`Invalid buffer: Buffer is ${this._buffer.length} long, yet Stats object specifies that file is ${this._stat.size} long.`);
    }
  }
  /**
   * NONSTANDARD: Get the underlying buffer for this file. !!DO NOT MUTATE!! Will mess up dirty tracking.
   */
  getBuffer() {
    return this._buffer;
  }
  /**
   * NONSTANDARD: Get underlying stats for this file. !!DO NOT MUTATE!!
   */
  getStats() {
    return this._stat;
  }
  getFlag() {
    return this._flag;
  }
  /**
   * Get the path to this file.
   * @return [String] The path to the file.
   */
  getPath() {
    return this._path;
  }
  /**
   * Get the current file position.
   *
   * We emulate the following bug mentioned in the Node documentation:
   * > On Linux, positional writes don't work when the file is opened in append
   *   mode. The kernel ignores the position argument and always appends the data
   *   to the end of the file.
   * @return [Number] The current file position.
   */
  getPos() {
    if (this._flag.isAppendable()) {
      return this._stat.size;
    }
    return this._pos;
  }
  /**
   * Advance the current file position by the indicated number of positions.
   * @param [Number] delta
   */
  advancePos(delta) {
    return this._pos += delta;
  }
  /**
   * Set the file position.
   * @param [Number] newPos
   */
  setPos(newPos) {
    return this._pos = newPos;
  }
  /**
   * **Core**: Asynchronous sync. Must be implemented by subclasses of this
   * class.
   * @param [Function(BrowserFS.ApiError)] cb
   */
  sync(cb) {
    try {
      this.syncSync();
      cb();
    } catch (e) {
      cb(e);
    }
  }
  /**
   * **Core**: Synchronous sync.
   */
  syncSync() {
    throw new ApiError(95 /* ENOTSUP */);
  }
  /**
   * **Core**: Asynchronous close. Must be implemented by subclasses of this
   * class.
   * @param [Function(BrowserFS.ApiError)] cb
   */
  close(cb) {
    try {
      this.closeSync();
      cb();
    } catch (e) {
      cb(e);
    }
  }
  /**
   * **Core**: Synchronous close.
   */
  closeSync() {
    throw new ApiError(95 /* ENOTSUP */);
  }
  /**
   * Asynchronous `stat`.
   * @param [Function(BrowserFS.ApiError, BrowserFS.node.fs.Stats)] cb
   */
  stat(cb) {
    try {
      cb(null, Stats.clone(this._stat));
    } catch (e) {
      cb(e);
    }
  }
  /**
   * Synchronous `stat`.
   */
  statSync() {
    return Stats.clone(this._stat);
  }
  /**
   * Asynchronous truncate.
   * @param [Number] len
   * @param [Function(BrowserFS.ApiError)] cb
   */
  truncate(len, cb) {
    try {
      this.truncateSync(len);
      if (this._flag.isSynchronous() && !node_fs_default.getRootFS().supportsSynch()) {
        this.sync(cb);
      }
      cb();
    } catch (e) {
      return cb(e);
    }
  }
  /**
   * Synchronous truncate.
   * @param [Number] len
   */
  truncateSync(len) {
    this._dirty = true;
    if (!this._flag.isWriteable()) {
      throw new ApiError(1 /* EPERM */, "File not opened with a writeable mode.");
    }
    this._stat.mtimeMs = Date.now();
    if (len > this._buffer.length) {
      const buf = Buffer2.alloc(len - this._buffer.length, 0);
      this.writeSync(buf, 0, buf.length, this._buffer.length);
      if (this._flag.isSynchronous() && node_fs_default.getRootFS().supportsSynch()) {
        this.syncSync();
      }
      return;
    }
    this._stat.size = len;
    const newBuff = Buffer2.alloc(len);
    this._buffer.copy(newBuff, 0, 0, len);
    this._buffer = newBuff;
    if (this._flag.isSynchronous() && node_fs_default.getRootFS().supportsSynch()) {
      this.syncSync();
    }
  }
  /**
   * Write buffer to the file.
   * Note that it is unsafe to use fs.write multiple times on the same file
   * without waiting for the callback.
   * @param [BrowserFS.node.Buffer] buffer Buffer containing the data to write to
   *  the file.
   * @param [Number] offset Offset in the buffer to start reading data from.
   * @param [Number] length The amount of bytes to write to the file.
   * @param [Number] position Offset from the beginning of the file where this
   *   data should be written. If position is null, the data will be written at
   *   the current position.
   * @param [Function(BrowserFS.ApiError, Number, BrowserFS.node.Buffer)]
   *   cb The number specifies the number of bytes written into the file.
   */
  write(buffer, offset, length, position, cb) {
    try {
      cb(null, this.writeSync(buffer, offset, length, position), buffer);
    } catch (e) {
      cb(e);
    }
  }
  /**
   * Write buffer to the file.
   * Note that it is unsafe to use fs.writeSync multiple times on the same file
   * without waiting for the callback.
   * @param [BrowserFS.node.Buffer] buffer Buffer containing the data to write to
   *  the file.
   * @param [Number] offset Offset in the buffer to start reading data from.
   * @param [Number] length The amount of bytes to write to the file.
   * @param [Number] position Offset from the beginning of the file where this
   *   data should be written. If position is null, the data will be written at
   *   the current position.
   * @return [Number]
   */
  writeSync(buffer, offset, length, position) {
    this._dirty = true;
    if (position === void 0 || position === null) {
      position = this.getPos();
    }
    if (!this._flag.isWriteable()) {
      throw new ApiError(1 /* EPERM */, "File not opened with a writeable mode.");
    }
    const endFp = position + length;
    if (endFp > this._stat.size) {
      this._stat.size = endFp;
      if (endFp > this._buffer.length) {
        const newBuff = Buffer2.alloc(endFp);
        this._buffer.copy(newBuff);
        this._buffer = newBuff;
      }
    }
    const len = buffer.copy(this._buffer, position, offset, offset + length);
    this._stat.mtimeMs = Date.now();
    if (this._flag.isSynchronous()) {
      this.syncSync();
      return len;
    }
    this.setPos(position + len);
    return len;
  }
  /**
   * Read data from the file.
   * @param [BrowserFS.node.Buffer] buffer The buffer that the data will be
   *   written to.
   * @param [Number] offset The offset within the buffer where writing will
   *   start.
   * @param [Number] length An integer specifying the number of bytes to read.
   * @param [Number] position An integer specifying where to begin reading from
   *   in the file. If position is null, data will be read from the current file
   *   position.
   * @param [Function(BrowserFS.ApiError, Number, BrowserFS.node.Buffer)] cb The
   *   number is the number of bytes read
   */
  read(buffer, offset, length, position, cb) {
    try {
      cb(null, this.readSync(buffer, offset, length, position), buffer);
    } catch (e) {
      cb(e);
    }
  }
  /**
   * Read data from the file.
   * @param [BrowserFS.node.Buffer] buffer The buffer that the data will be
   *   written to.
   * @param [Number] offset The offset within the buffer where writing will
   *   start.
   * @param [Number] length An integer specifying the number of bytes to read.
   * @param [Number] position An integer specifying where to begin reading from
   *   in the file. If position is null, data will be read from the current file
   *   position.
   * @return [Number]
   */
  readSync(buffer, offset, length, position) {
    if (!this._flag.isReadable()) {
      throw new ApiError(1 /* EPERM */, "File not opened with a readable mode.");
    }
    if (position === void 0 || position === null) {
      position = this.getPos();
    }
    const endRead = position + length;
    if (endRead > this._stat.size) {
      length = this._stat.size - position;
    }
    const rv = this._buffer.copy(buffer, offset, position, position + length);
    this._stat.atimeMs = Date.now();
    this._pos = position + length;
    return rv;
  }
  /**
   * Asynchronous `fchmod`.
   * @param [Number|String] mode
   * @param [Function(BrowserFS.ApiError)] cb
   */
  chmod(mode, cb) {
    try {
      this.chmodSync(mode);
      cb();
    } catch (e) {
      cb(e);
    }
  }
  /**
   * Synchronous `fchmod`.
   * @param [Number] mode
   */
  chmodSync(mode) {
    if (!this._fs.supportsProps()) {
      throw new ApiError(95 /* ENOTSUP */);
    }
    this._dirty = true;
    this._stat.chmod(mode);
    this.syncSync();
  }
  /**
   * Asynchronous `fchown`.
   * @param [Number] uid
   * @param [Number] gid
   * @param [Function(BrowserFS.ApiError)] cb
   */
  chown(uid, gid, cb) {
    try {
      this.chownSync(uid, gid);
      cb();
    } catch (e) {
      cb(e);
    }
  }
  /**
   * Synchronous `fchown`.
   * @param [Number] uid
   * @param [Number] gid
   */
  chownSync(uid, gid) {
    if (!this._fs.supportsProps()) {
      throw new ApiError(95 /* ENOTSUP */);
    }
    this._dirty = true;
    this._stat.chown(uid, gid);
    this.syncSync();
  }
  isDirty() {
    return this._dirty;
  }
  /**
   * Resets the dirty bit. Should only be called after a sync has completed successfully.
   */
  resetDirty() {
    this._dirty = false;
  }
};
var NoSyncFile = class extends PreloadFile {
  constructor(_fs, _path, _flag, _stat, contents) {
    super(_fs, _path, _flag, _stat, contents);
  }
  /**
   * Asynchronous sync. Doesn't do anything, simply calls the cb.
   * @param [Function(BrowserFS.ApiError)] cb
   */
  sync(cb) {
    cb();
  }
  /**
   * Synchronous sync. Doesn't do anything.
   */
  syncSync() {
  }
  /**
   * Asynchronous close. Doesn't do anything, simply calls the cb.
   * @param [Function(BrowserFS.ApiError)] cb
   */
  close(cb) {
    cb();
  }
  /**
   * Synchronous close. Doesn't do anything.
   */
  closeSync() {
  }
};

// src/backend/AsyncMirror.ts
var MirrorFile = class extends PreloadFile {
  constructor(fs2, path, flag, stat, data) {
    super(fs2, path, flag, stat, data);
  }
  syncSync() {
    if (this.isDirty()) {
      this._fs._syncSync(this);
      this.resetDirty();
    }
  }
  closeSync() {
    this.syncSync();
  }
};
var _AsyncMirror = class extends SynchronousFileSystem {
  /**
   * **Deprecated; use AsyncMirror.Create() method instead.**
   *
   * Mirrors the synchronous file system into the asynchronous file system.
   *
   * **IMPORTANT**: You must call `initialize` on the file system before it can be used.
   * @param sync The synchronous file system to mirror the asynchronous file system to.
   * @param async The asynchronous file system to mirror.
   */
  constructor(sync, async) {
    super();
    /**
     * Queue of pending asynchronous operations.
     */
    this._queue = [];
    this._queueRunning = false;
    this._isInitialized = false;
    this._initializeCallbacks = [];
    this._sync = sync;
    this._async = async;
  }
  /**
   * Constructs and initializes an AsyncMirror file system with the given options.
   */
  static Create(opts, cb) {
    try {
      const fs2 = new _AsyncMirror(opts.sync, opts.async);
      fs2._initialize((e) => {
        if (e) {
          cb(e);
        } else {
          cb(null, fs2);
        }
      });
    } catch (e) {
      cb(e);
    }
  }
  /**
   * Asynchronously constructs and initializes an AsyncMirror file system with the given options.
   */
  static CreateAsync(opts) {
    return new Promise((resolve2, reject) => {
      this.Create(opts, (error, fs2) => {
        if (error || !fs2) {
          reject(error);
        } else {
          resolve2(fs2);
        }
      });
    });
  }
  static isAvailable() {
    return true;
  }
  getName() {
    return _AsyncMirror.Name;
  }
  _syncSync(fd) {
    const stats = fd.getStats();
    this._sync.writeFileSync(fd.getPath(), fd.getBuffer(), null, FileFlag.getFileFlag("w"), stats.mode, stats.getCred(0, 0));
    this.enqueueOp({
      apiMethod: "writeFile",
      arguments: [fd.getPath(), fd.getBuffer(), null, fd.getFlag(), stats.mode, stats.getCred(0, 0)]
    });
  }
  isReadOnly() {
    return false;
  }
  supportsSynch() {
    return true;
  }
  supportsLinks() {
    return false;
  }
  supportsProps() {
    return this._sync.supportsProps() && this._async.supportsProps();
  }
  renameSync(oldPath, newPath, cred) {
    this._sync.renameSync(oldPath, newPath, cred);
    this.enqueueOp({
      apiMethod: "rename",
      arguments: [oldPath, newPath, cred]
    });
  }
  statSync(p, isLstat, cred) {
    return this._sync.statSync(p, isLstat, cred);
  }
  openSync(p, flag, mode, cred) {
    const fd = this._sync.openSync(p, flag, mode, cred);
    fd.closeSync();
    return new MirrorFile(this, p, flag, this._sync.statSync(p, false, cred), this._sync.readFileSync(p, null, FileFlag.getFileFlag("r"), cred));
  }
  unlinkSync(p, cred) {
    this._sync.unlinkSync(p, cred);
    this.enqueueOp({
      apiMethod: "unlink",
      arguments: [p, cred]
    });
  }
  rmdirSync(p, cred) {
    this._sync.rmdirSync(p, cred);
    this.enqueueOp({
      apiMethod: "rmdir",
      arguments: [p, cred]
    });
  }
  mkdirSync(p, mode, cred) {
    this._sync.mkdirSync(p, mode, cred);
    this.enqueueOp({
      apiMethod: "mkdir",
      arguments: [p, mode, cred]
    });
  }
  readdirSync(p, cred) {
    return this._sync.readdirSync(p, cred);
  }
  existsSync(p, cred) {
    return this._sync.existsSync(p, cred);
  }
  chmodSync(p, isLchmod, mode, cred) {
    this._sync.chmodSync(p, isLchmod, mode, cred);
    this.enqueueOp({
      apiMethod: "chmod",
      arguments: [p, isLchmod, mode, cred]
    });
  }
  chownSync(p, isLchown, new_uid, new_gid, cred) {
    this._sync.chownSync(p, isLchown, new_uid, new_gid, cred);
    this.enqueueOp({
      apiMethod: "chown",
      arguments: [p, isLchown, new_uid, new_gid, cred]
    });
  }
  utimesSync(p, atime, mtime, cred) {
    this._sync.utimesSync(p, atime, mtime, cred);
    this.enqueueOp({
      apiMethod: "utimes",
      arguments: [p, atime, mtime, cred]
    });
  }
  /**
   * Called once to load up files from async storage into sync storage.
   */
  _initialize(userCb) {
    const callbacks = this._initializeCallbacks;
    const end = (e) => {
      this._isInitialized = !e;
      this._initializeCallbacks = [];
      callbacks.forEach((cb) => cb(e));
    };
    if (!this._isInitialized) {
      if (callbacks.push(userCb) === 1) {
        const copyDirectory = (p, mode, cb) => {
          if (p !== "/") {
            this._async.stat(p, true, Cred.Root, (err2, stats) => {
              if (err2) {
                cb(err2);
              }
              this._sync.mkdirSync(p, stats.mode, stats.getCred());
            });
          }
          this._async.readdir(p, Cred.Root, (err2, files) => {
            let i = 0;
            function copyNextFile(err3) {
              if (err3) {
                cb(err3);
              } else if (i < files.length) {
                copyItem(join(p, files[i]), copyNextFile);
                i++;
              } else {
                cb();
              }
            }
            if (err2) {
              cb(err2);
            } else {
              copyNextFile();
            }
          });
        }, copyFile = (p, mode, cb) => {
          this._async.readFile(p, null, FileFlag.getFileFlag("r"), Cred.Root, (err2, data) => {
            if (err2) {
              cb(err2);
            } else {
              try {
                this._sync.writeFileSync(p, data, null, FileFlag.getFileFlag("w"), mode, Cred.Root);
              } catch (e) {
                err2 = e;
              } finally {
                cb(err2);
              }
            }
          });
        }, copyItem = (p, cb) => {
          this._async.stat(p, false, Cred.Root, (err2, stats) => {
            if (err2) {
              cb(err2);
            } else if (stats.isDirectory()) {
              copyDirectory(p, stats.mode, cb);
            } else {
              copyFile(p, stats.mode, cb);
            }
          });
        };
        copyDirectory("/", 0, end);
      }
    } else {
      userCb();
    }
  }
  enqueueOp(op) {
    this._queue.push(op);
    if (!this._queueRunning) {
      this._queueRunning = true;
      const doNextOp = (err2) => {
        if (err2) {
          throw new Error(`WARNING: File system has desynchronized. Received following error: ${err2}
$`);
        }
        if (this._queue.length > 0) {
          const op2 = this._queue.shift(), args = op2.arguments;
          args.push(doNextOp);
          this._async[op2.apiMethod].apply(this._async, args);
        } else {
          this._queueRunning = false;
        }
      };
      doNextOp();
    }
  }
};
var AsyncMirror = _AsyncMirror;
AsyncMirror.Name = "AsyncMirror";
AsyncMirror.Options = {
  sync: {
    type: "object",
    description: "The synchronous file system to mirror the asynchronous file system to.",
    validator: (v, cb) => {
      if (v && typeof v["supportsSynch"] === "function" && v.supportsSynch()) {
        cb();
      } else {
        cb(new ApiError(22 /* EINVAL */, `'sync' option must be a file system that supports synchronous operations`));
      }
    }
  },
  async: {
    type: "object",
    description: "The asynchronous file system to mirror."
  }
};

// src/generic/dropbox_bridge_actual.ts
var Dropbox = globalThis.Dropbox ? globalThis.Dropbox.Dropbox : void 0;

// src/backend/Dropbox.ts
function FixPath(p) {
  if (p === "/") {
    return "";
  } else {
    return p;
  }
}
function ExtractTheFuckingError(e) {
  const obj = e.error;
  if (obj[".tag"]) {
    return obj;
  } else if (obj["error"]) {
    const obj2 = obj.error;
    if (obj2[".tag"]) {
      return obj2;
    } else if (obj2["reason"] && obj2["reason"][".tag"]) {
      return obj2.reason;
    } else {
      return obj2;
    }
  } else if (typeof obj === "string") {
    try {
      const obj2 = JSON.parse(obj);
      if (obj2["error"] && obj2["error"]["reason"] && obj2["error"]["reason"][".tag"]) {
        return obj2.error.reason;
      }
    } catch (e2) {
    }
  }
  return obj;
}
function GetErrorMessage(err2) {
  if (err2["user_message"]) {
    return err2.user_message.text;
  } else if (err2["error_summary"]) {
    return err2.error_summary;
  } else if (typeof err2.error === "string") {
    return err2.error;
  } else if (typeof err2.error === "object") {
    return GetErrorMessage(err2.error);
  } else {
    throw new Error(`Dropbox's servers gave us a garbage error message: ${JSON.stringify(err2)}`);
  }
}
function LookupErrorToError(err2, p, msg) {
  switch (err2[".tag"]) {
    case "malformed_path":
      return new ApiError(9 /* EBADF */, msg, p);
    case "not_found":
      return ApiError.ENOENT(p);
    case "not_file":
      return ApiError.EISDIR(p);
    case "not_folder":
      return ApiError.ENOTDIR(p);
    case "restricted_content":
      return ApiError.EPERM(p);
    case "other":
    default:
      return new ApiError(5 /* EIO */, msg, p);
  }
}
function WriteErrorToError(err2, p, msg) {
  switch (err2[".tag"]) {
    case "malformed_path":
    case "disallowed_name":
      return new ApiError(9 /* EBADF */, msg, p);
    case "conflict":
    case "no_write_permission":
    case "team_folder":
      return ApiError.EPERM(p);
    case "insufficient_space":
      return new ApiError(28 /* ENOSPC */, msg);
    case "other":
    default:
      return new ApiError(5 /* EIO */, msg, p);
  }
}
function FilesDeleteWrapped(client, p, cb) {
  const arg = {
    path: FixPath(p)
  };
  client.filesDeleteV2(arg).then(() => {
    cb();
  }).catch((e) => {
    const err2 = ExtractTheFuckingError(e);
    switch (err2[".tag"]) {
      case "path_lookup":
        cb(LookupErrorToError(err2.path_lookup, p, GetErrorMessage(e)));
        break;
      case "path_write":
        cb(WriteErrorToError(err2.path_write, p, GetErrorMessage(e)));
        break;
      case "too_many_write_operations":
        setTimeout(() => FilesDeleteWrapped(client, p, cb), 500 + 300 * Math.random());
        break;
      case "other":
      default:
        cb(new ApiError(5 /* EIO */, GetErrorMessage(e), p));
        break;
    }
  });
}
var DropboxFile = class extends PreloadFile {
  constructor(_fs, _path, _flag, _stat, contents) {
    super(_fs, _path, _flag, _stat, contents);
  }
  sync(cb) {
    this._fs._syncFile(this.getPath(), this.getBuffer(), cb);
  }
  close(cb) {
    this.sync(cb);
  }
};
var _DropboxFileSystem = class extends BaseFileSystem {
  constructor(client) {
    super();
    this._client = client;
  }
  /**
   * Creates a new DropboxFileSystem instance with the given options.
   * Must be given an *authenticated* Dropbox client from 2.x JS SDK.
   */
  static Create(opts, cb) {
    cb(null, new _DropboxFileSystem(opts.client));
  }
  /**
   * Asynchronously creates a new DropboxFileSystem instance with the given options.
   * Must be given an *authenticated* Dropbox client from 2.x JS SDK.
   */
  static CreateAsync(opts) {
    return new Promise((resolve2, reject) => {
      this.Create(opts, (error, fs2) => {
        if (error || !fs2) {
          reject(error);
        } else {
          resolve2(fs2);
        }
      });
    });
  }
  static isAvailable() {
    return typeof Dropbox !== "undefined";
  }
  getName() {
    return _DropboxFileSystem.Name;
  }
  isReadOnly() {
    return false;
  }
  // Dropbox doesn't support symlinks, properties, or synchronous calls
  // TODO: does it???
  supportsSymlinks() {
    return false;
  }
  supportsProps() {
    return false;
  }
  supportsSynch() {
    return false;
  }
  /**
   * Deletes *everything* in the file system. Mainly intended for unit testing!
   * @param mainCb Called when operation completes.
   */
  empty(mainCb) {
    this.readdir("/", Cred.Root, (e, paths) => {
      if (paths) {
        const next = (e2) => {
          if (paths.length === 0) {
            mainCb();
          } else {
            FilesDeleteWrapped(this._client, paths.shift(), next);
          }
        };
        next();
      } else {
        mainCb(e);
      }
    });
  }
  rename(oldPath, newPath, cred, cb) {
    this.stat(newPath, false, cred, (e, stats) => {
      const rename = () => {
        const relocationArg = {
          from_path: FixPath(oldPath),
          to_path: FixPath(newPath)
        };
        this._client.filesMoveV2(relocationArg).then(() => cb()).catch(function(e2) {
          const err2 = ExtractTheFuckingError(e2);
          switch (err2[".tag"]) {
            case "from_lookup":
              cb(LookupErrorToError(err2.from_lookup, oldPath, GetErrorMessage(e2)));
              break;
            case "from_write":
              cb(WriteErrorToError(err2.from_write, oldPath, GetErrorMessage(e2)));
              break;
            case "to":
              cb(WriteErrorToError(err2.to, newPath, GetErrorMessage(e2)));
              break;
            case "cant_copy_shared_folder":
            case "cant_nest_shared_folder":
              cb(new ApiError(1 /* EPERM */, GetErrorMessage(e2), oldPath));
              break;
            case "cant_move_folder_into_itself":
            case "duplicated_or_nested_paths":
              cb(new ApiError(9 /* EBADF */, GetErrorMessage(e2), oldPath));
              break;
            case "too_many_files":
              cb(new ApiError(28 /* ENOSPC */, GetErrorMessage(e2), oldPath));
              break;
            case "other":
            default:
              cb(new ApiError(5 /* EIO */, GetErrorMessage(e2), oldPath));
              break;
          }
        });
      };
      if (e) {
        rename();
      } else if (oldPath === newPath) {
        if (e) {
          cb(ApiError.ENOENT(newPath));
        } else {
          cb();
        }
      } else if (stats && stats.isDirectory()) {
        cb(ApiError.EISDIR(newPath));
      } else {
        this.unlink(newPath, cred, (e2) => {
          if (e2) {
            cb(e2);
          } else {
            rename();
          }
        });
      }
    });
  }
  stat(path, isLstat, cred, cb) {
    if (path === "/") {
      setImmediate_default(function() {
        cb(null, new Stats(16384 /* DIRECTORY */, 4096));
      });
      return;
    }
    const arg = {
      path: FixPath(path)
    };
    this._client.filesGetMetadata(arg).then((ref) => {
      switch (ref[".tag"]) {
        case "file":
          const fileMetadata = ref;
          cb(null, new Stats(32768 /* FILE */, fileMetadata.size));
          break;
        case "folder":
          cb(null, new Stats(16384 /* DIRECTORY */, 4096));
          break;
        case "deleted":
          cb(ApiError.ENOENT(path));
          break;
        default:
          break;
      }
    }).catch((e) => {
      const err2 = ExtractTheFuckingError(e);
      switch (err2[".tag"]) {
        case "path":
          cb(LookupErrorToError(err2.path, path, GetErrorMessage(e)));
          break;
        default:
          cb(new ApiError(5 /* EIO */, GetErrorMessage(e), path));
          break;
      }
    });
  }
  openFile(path, flags, cred, cb) {
    const downloadArg = {
      path: FixPath(path)
    };
    this._client.filesDownload(downloadArg).then((res) => {
      const b = res.fileBlob;
      const fr = new FileReader();
      fr.onload = () => {
        const ab = fr.result;
        cb(null, new DropboxFile(this, path, flags, new Stats(32768 /* FILE */, ab.byteLength), arrayBuffer2Buffer(ab)));
      };
      fr.readAsArrayBuffer(b);
    }).catch((e) => {
      const err2 = ExtractTheFuckingError(e);
      switch (err2[".tag"]) {
        case "path":
          const dpError = err2;
          cb(LookupErrorToError(dpError.path, path, GetErrorMessage(e)));
          break;
        case "other":
        default:
          cb(new ApiError(5 /* EIO */, GetErrorMessage(e), path));
          break;
      }
    });
  }
  createFile(p, flags, mode, cred, cb) {
    const fileData = Buffer2.alloc(0);
    const blob = new Blob([buffer2ArrayBuffer(fileData)], { type: "octet/stream" });
    const commitInfo = {
      contents: blob,
      path: FixPath(p)
    };
    this._client.filesUpload(commitInfo).then((metadata) => {
      cb(null, new DropboxFile(this, p, flags, new Stats(32768 /* FILE */, 0), fileData));
    }).catch((e) => {
      const err2 = ExtractTheFuckingError(e);
      switch (err2[".tag"]) {
        case "path":
          const upError = err2;
          cb(WriteErrorToError(upError.path.reason, p, GetErrorMessage(e)));
          break;
        case "too_many_write_operations":
          setTimeout(() => this.createFile(p, flags, mode, cred, cb), 500 + 300 * Math.random());
          break;
        case "other":
        default:
          cb(new ApiError(5 /* EIO */, GetErrorMessage(e), p));
          break;
      }
    });
  }
  /**
   * Delete a file
   */
  unlink(path, cred, cb) {
    this.stat(path, false, cred, (e, stat) => {
      if (stat) {
        if (stat.isDirectory()) {
          cb(ApiError.EISDIR(path));
        } else {
          FilesDeleteWrapped(this._client, path, cb);
        }
      } else {
        cb(e);
      }
    });
  }
  /**
   * Delete a directory
   */
  rmdir(path, cred, cb) {
    this.readdir(path, cred, (e, paths) => {
      if (paths) {
        if (paths.length > 0) {
          cb(ApiError.ENOTEMPTY(path));
        } else {
          FilesDeleteWrapped(this._client, path, cb);
        }
      } else {
        cb(e);
      }
    });
  }
  /**
   * Create a directory
   */
  mkdir(p, mode, cred, cb) {
    const parent = dirname(p);
    this.stat(parent, false, cred, (e, stats) => {
      if (e) {
        cb(e);
      } else if (stats && !stats.isDirectory()) {
        cb(ApiError.ENOTDIR(parent));
      } else {
        const arg = {
          path: FixPath(p)
        };
        this._client.filesCreateFolderV2(arg).then(() => cb()).catch((e2) => {
          const err2 = ExtractTheFuckingError(e2);
          if (err2[".tag"] === "too_many_write_operations") {
            setTimeout(() => this.mkdir(p, mode, cred, cb), 500 + 300 * Math.random());
          } else {
            cb(WriteErrorToError(ExtractTheFuckingError(e2).path, p, GetErrorMessage(e2)));
          }
        });
      }
    });
  }
  /**
   * Get the names of the files in a directory
   */
  readdir(path, cred, cb) {
    const arg = {
      path: FixPath(path)
    };
    this._client.filesListFolder(arg).then((res) => {
      ContinueReadingDir(this._client, path, res, [], cb);
    }).catch((e) => {
      ProcessListFolderError(e, path, cb);
    });
  }
  /**
   * (Internal) Syncs file to Dropbox.
   */
  _syncFile(p, d, cb) {
    const blob = new Blob([buffer2ArrayBuffer(d)], { type: "octet/stream" });
    const arg = {
      contents: blob,
      path: FixPath(p),
      mode: {
        ".tag": "overwrite"
      }
    };
    this._client.filesUpload(arg).then(() => {
      cb();
    }).catch((e) => {
      const err2 = ExtractTheFuckingError(e);
      switch (err2[".tag"]) {
        case "path":
          const upError = err2;
          cb(WriteErrorToError(upError.path.reason, p, GetErrorMessage(e)));
          break;
        case "too_many_write_operations":
          setTimeout(() => this._syncFile(p, d, cb), 500 + 300 * Math.random());
          break;
        case "other":
        default:
          cb(new ApiError(5 /* EIO */, GetErrorMessage(e), p));
          break;
      }
    });
  }
};
var DropboxFileSystem = _DropboxFileSystem;
DropboxFileSystem.Name = "DropboxV2";
DropboxFileSystem.Options = {
  client: {
    type: "object",
    description: "An *authenticated* Dropbox client. Must be from the 2.5.x JS SDK."
  }
};
function ProcessListFolderError(e, path, cb) {
  const err2 = ExtractTheFuckingError(e);
  switch (err2[".tag"]) {
    case "path":
      const pathError = err2;
      cb(LookupErrorToError(pathError.path, path, GetErrorMessage(e)));
      break;
    case "other":
    default:
      cb(new ApiError(5 /* EIO */, GetErrorMessage(e), path));
      break;
  }
}
function ContinueReadingDir(client, path, res, previousEntries, cb) {
  const newEntries = res.entries.map((e) => e.path_display).filter((p) => !!p);
  const entries = previousEntries.concat(newEntries);
  if (!res.has_more) {
    cb(null, entries);
  } else {
    const arg = {
      cursor: res.cursor
    };
    client.filesListFolderContinue(arg).then((res2) => {
      ContinueReadingDir(client, path, res2, entries, cb);
    }).catch((e) => {
      ProcessListFolderError(e, path, cb);
    });
  }
}

// src/backend/Emscripten.ts
function convertError(e, path = "") {
  const errno = e.errno;
  let parent = e.node;
  const paths = [];
  while (parent) {
    paths.unshift(parent.name);
    if (parent === parent.parent) {
      break;
    }
    parent = parent.parent;
  }
  return new ApiError(errno, ErrorStrings[errno], paths.length > 0 ? "/" + paths.join("/") : path);
}
var EmscriptenFile = class extends BaseFile {
  constructor(_fs, _FS, _path, _stream) {
    super();
    this._fs = _fs;
    this._FS = _FS;
    this._path = _path;
    this._stream = _stream;
  }
  getPos() {
    return void 0;
  }
  close(cb) {
    let err2 = null;
    try {
      this.closeSync();
    } catch (e) {
      err2 = e;
    } finally {
      cb(err2);
    }
  }
  closeSync() {
    try {
      this._FS.close(this._stream);
    } catch (e) {
      throw convertError(e, this._path);
    }
  }
  stat(cb) {
    try {
      cb(null, this.statSync());
    } catch (e) {
      cb(e);
    }
  }
  statSync() {
    try {
      return this._fs.statSync(this._path, false, Cred.Root);
    } catch (e) {
      throw convertError(e, this._path);
    }
  }
  truncate(len, cb) {
    let err2 = null;
    try {
      this.truncateSync(len);
    } catch (e) {
      err2 = e;
    } finally {
      cb(err2);
    }
  }
  truncateSync(len) {
    try {
      this._FS.ftruncate(this._stream.fd, len);
    } catch (e) {
      throw convertError(e, this._path);
    }
  }
  write(buffer, offset, length, position, cb) {
    try {
      cb(null, this.writeSync(buffer, offset, length, position), buffer);
    } catch (e) {
      cb(e);
    }
  }
  writeSync(buffer, offset, length, position) {
    try {
      const u8 = buffer2Uint8array(buffer);
      const emPosition = position === null ? void 0 : position;
      return this._FS.write(this._stream, u8, offset, length, emPosition);
    } catch (e) {
      throw convertError(e, this._path);
    }
  }
  read(buffer, offset, length, position, cb) {
    try {
      cb(null, this.readSync(buffer, offset, length, position), buffer);
    } catch (e) {
      cb(e);
    }
  }
  readSync(buffer, offset, length, position) {
    try {
      const u8 = buffer2Uint8array(buffer);
      const emPosition = position === null ? void 0 : position;
      return this._FS.read(this._stream, u8, offset, length, emPosition);
    } catch (e) {
      throw convertError(e, this._path);
    }
  }
  sync(cb) {
    cb();
  }
  syncSync() {
  }
  chown(uid, gid, cb) {
    let err2 = null;
    try {
      this.chownSync(uid, gid);
    } catch (e) {
      err2 = e;
    } finally {
      cb(err2);
    }
  }
  chownSync(uid, gid) {
    try {
      this._FS.fchown(this._stream.fd, uid, gid);
    } catch (e) {
      throw convertError(e, this._path);
    }
  }
  chmod(mode, cb) {
    let err2 = null;
    try {
      this.chmodSync(mode);
    } catch (e) {
      err2 = e;
    } finally {
      cb(err2);
    }
  }
  chmodSync(mode) {
    try {
      this._FS.fchmod(this._stream.fd, mode);
    } catch (e) {
      throw convertError(e, this._path);
    }
  }
  utimes(atime, mtime, cb) {
    let err2 = null;
    try {
      this.utimesSync(atime, mtime);
    } catch (e) {
      err2 = e;
    } finally {
      cb(err2);
    }
  }
  utimesSync(atime, mtime) {
    this._fs.utimesSync(this._path, atime, mtime, Cred.Root);
  }
};
var _EmscriptenFileSystem = class extends SynchronousFileSystem {
  constructor(_FS) {
    super();
    this._FS = _FS;
  }
  /**
   * Create an EmscriptenFileSystem instance with the given options.
   */
  static Create(opts, cb) {
    cb(null, new _EmscriptenFileSystem(opts.FS));
  }
  static CreateAsync(opts) {
    return new Promise((resolve2, reject) => {
      this.Create(opts, (error, fs2) => {
        if (error || !fs2) {
          reject(error);
        } else {
          resolve2(fs2);
        }
      });
    });
  }
  static isAvailable() {
    return true;
  }
  getName() {
    return this._FS.DB_NAME();
  }
  isReadOnly() {
    return false;
  }
  supportsLinks() {
    return true;
  }
  supportsProps() {
    return true;
  }
  supportsSynch() {
    return true;
  }
  renameSync(oldPath, newPath, cred) {
    try {
      this._FS.rename(oldPath, newPath);
    } catch (e) {
      if (e.errno === 2 /* ENOENT */) {
        throw convertError(e, this.existsSync(oldPath, cred) ? newPath : oldPath);
      } else {
        throw convertError(e);
      }
    }
  }
  statSync(p, isLstat, cred) {
    try {
      const stats = isLstat ? this._FS.lstat(p) : this._FS.stat(p);
      const itemType = this.modeToFileType(stats.mode);
      return new Stats(itemType, stats.size, stats.mode, stats.atime.getTime(), stats.mtime.getTime(), stats.ctime.getTime());
    } catch (e) {
      throw convertError(e, p);
    }
  }
  openSync(p, flag, mode, cred) {
    try {
      const stream = this._FS.open(p, flag.getFlagString(), mode);
      return new EmscriptenFile(this, this._FS, p, stream);
    } catch (e) {
      throw convertError(e, p);
    }
  }
  unlinkSync(p, cred) {
    try {
      this._FS.unlink(p);
    } catch (e) {
      throw convertError(e, p);
    }
  }
  rmdirSync(p, cred) {
    try {
      this._FS.rmdir(p);
    } catch (e) {
      throw convertError(e, p);
    }
  }
  mkdirSync(p, mode, cred) {
    try {
      this._FS.mkdir(p, mode);
    } catch (e) {
      throw convertError(e, p);
    }
  }
  readdirSync(p, cred) {
    try {
      return this._FS.readdir(p).filter((p2) => p2 !== "." && p2 !== "..");
    } catch (e) {
      throw convertError(e, p);
    }
  }
  truncateSync(p, len, cred) {
    try {
      this._FS.truncate(p, len);
    } catch (e) {
      throw convertError(e, p);
    }
  }
  readFileSync(p, encoding, flag, cred) {
    try {
      const data = this._FS.readFile(p, { flags: flag.getFlagString() });
      const buff = uint8Array2Buffer(data);
      if (encoding) {
        return buff.toString(encoding);
      } else {
        return buff;
      }
    } catch (e) {
      throw convertError(e, p);
    }
  }
  writeFileSync(p, data, encoding, flag, mode, cred) {
    try {
      if (encoding) {
        data = Buffer2.from(data, encoding);
      }
      const u8 = buffer2Uint8array(data);
      this._FS.writeFile(p, u8, { flags: flag.getFlagString(), encoding: "binary" });
      this._FS.chmod(p, mode);
    } catch (e) {
      throw convertError(e, p);
    }
  }
  chmodSync(p, isLchmod, mode, cred) {
    try {
      isLchmod ? this._FS.lchmod(p, mode) : this._FS.chmod(p, mode);
    } catch (e) {
      throw convertError(e, p);
    }
  }
  chownSync(p, isLchown, new_uid, new_gid, cred) {
    try {
      isLchown ? this._FS.lchown(p, new_uid, new_gid) : this._FS.chown(p, new_uid, new_gid);
    } catch (e) {
      throw convertError(e, p);
    }
  }
  symlinkSync(srcpath, dstpath, type, cred) {
    try {
      this._FS.symlink(srcpath, dstpath);
    } catch (e) {
      throw convertError(e);
    }
  }
  readlinkSync(p, cred) {
    try {
      return this._FS.readlink(p);
    } catch (e) {
      throw convertError(e, p);
    }
  }
  utimesSync(p, atime, mtime, cred) {
    try {
      this._FS.utime(p, atime.getTime(), mtime.getTime());
    } catch (e) {
      throw convertError(e, p);
    }
  }
  modeToFileType(mode) {
    if (this._FS.isDir(mode)) {
      return 16384 /* DIRECTORY */;
    } else if (this._FS.isFile(mode)) {
      return 32768 /* FILE */;
    } else if (this._FS.isLink(mode)) {
      return 40960 /* SYMLINK */;
    } else {
      throw ApiError.EPERM(`Invalid mode: ${mode}`);
    }
  }
};
var EmscriptenFileSystem = _EmscriptenFileSystem;
EmscriptenFileSystem.Name = "EmscriptenFileSystem";
EmscriptenFileSystem.Options = {
  FS: {
    type: "object",
    description: "The Emscripten file system to use (the `FS` variable)"
  }
};

// src/backend/FileSystemAccess.ts
var handleError = (cb, path = "") => (error) => {
  if (error.name === "NotFoundError") {
    return cb(ApiError.ENOENT(path));
  }
  cb(error);
};
var keysToArray = (directoryKeys, cb, path) => {
  const keys2 = [];
  const iterateKeys = () => {
    directoryKeys.next().then(({ done: done2, value }) => {
      if (done2) {
        return cb(null, keys2);
      }
      keys2.push(value);
      iterateKeys();
    }).catch(handleError(cb, path));
  };
  iterateKeys();
};
var FileSystemAccessFile = class extends PreloadFile {
  constructor(_fs, _path, _flag, _stat, contents) {
    super(_fs, _path, _flag, _stat, contents);
  }
  sync(cb) {
    if (this.isDirty()) {
      this._fs._sync(this.getPath(), this.getBuffer(), this.getStats(), Cred.Root, (e) => {
        if (!e) {
          this.resetDirty();
        }
        cb(e);
      });
    } else {
      cb();
    }
  }
  close(cb) {
    this.sync(cb);
  }
};
var _FileSystemAccessFileSystem = class extends BaseFileSystem {
  constructor(handle) {
    super();
    this._handles = { "/": handle };
  }
  static Create({ handle }, cb) {
    cb(null, new _FileSystemAccessFileSystem(handle));
  }
  static CreateAsync(opts) {
    return new Promise((resolve2, reject) => {
      this.Create(opts, (error, fs2) => {
        if (error || !fs2) {
          reject(error);
        } else {
          resolve2(fs2);
        }
      });
    });
  }
  static isAvailable() {
    return typeof FileSystemHandle === "function";
  }
  getName() {
    return _FileSystemAccessFileSystem.Name;
  }
  isReadOnly() {
    return false;
  }
  supportsSymlinks() {
    return false;
  }
  supportsProps() {
    return false;
  }
  supportsSynch() {
    return false;
  }
  _sync(p, data, stats, cred, cb) {
    this.stat(p, false, cred, (err2, currentStats) => {
      if (stats.mtime !== currentStats.mtime) {
        this.writeFile(p, data, null, FileFlag.getFileFlag("w"), currentStats.mode, cred, cb);
      } else {
        cb(err2);
      }
    });
  }
  rename(oldPath, newPath, cred, cb) {
    this.getHandle(oldPath, (sourceError, handle) => {
      if (sourceError) {
        return cb(sourceError);
      }
      if (handle instanceof FileSystemDirectoryHandle) {
        this.readdir(oldPath, cred, (readDirError, files = []) => {
          if (readDirError) {
            return cb(readDirError);
          }
          this.mkdir(newPath, "wx", cred, (mkdirError) => {
            if (mkdirError) {
              return cb(mkdirError);
            }
            if (files.length === 0) {
              this.unlink(oldPath, cred, cb);
            } else {
              files.forEach((file) => this.rename(join(oldPath, file), join(newPath, file), cred, () => this.unlink(oldPath, cred, cb)));
            }
          });
        });
      }
      if (handle instanceof FileSystemFileHandle) {
        handle.getFile().then(
          (oldFile) => this.getHandle(dirname(newPath), (destError, destFolder) => {
            if (destError) {
              return cb(destError);
            }
            if (destFolder instanceof FileSystemDirectoryHandle) {
              destFolder.getFileHandle(basename(newPath), { create: true }).then(
                (newFile) => newFile.createWritable().then(
                  (writable) => oldFile.arrayBuffer().then(
                    (buffer) => writable.write(buffer).then(() => {
                      writable.close();
                      this.unlink(oldPath, cred, cb);
                    }).catch(handleError(cb, newPath))
                  ).catch(handleError(cb, oldPath))
                ).catch(handleError(cb, newPath))
              ).catch(handleError(cb, newPath));
            }
          })
        ).catch(handleError(cb, oldPath));
      }
    });
  }
  writeFile(fname, data, encoding, flag, mode, cred, cb, createFile) {
    this.getHandle(dirname(fname), (error, handle) => {
      if (error) {
        return cb(error);
      }
      if (handle instanceof FileSystemDirectoryHandle) {
        handle.getFileHandle(basename(fname), { create: true }).then(
          (file) => file.createWritable().then(
            (writable) => writable.write(data).then(() => {
              writable.close().catch(handleError(cb, fname));
              cb(null, createFile ? this.newFile(fname, flag, data) : void 0);
            }).catch(handleError(cb, fname))
          ).catch(handleError(cb, fname))
        ).catch(handleError(cb, fname));
      }
    });
  }
  createFile(p, flag, mode, cred, cb) {
    this.writeFile(p, emptyBuffer(), null, flag, mode, cred, cb, true);
  }
  stat(path, isLstat, cred, cb) {
    this.getHandle(path, (error, handle) => {
      if (error) {
        return cb(error);
      }
      if (!handle) {
        return cb(ApiError.FileError(22 /* EINVAL */, path));
      }
      if (handle instanceof FileSystemDirectoryHandle) {
        return cb(null, new Stats(16384 /* DIRECTORY */, 4096));
      }
      if (handle instanceof FileSystemFileHandle) {
        handle.getFile().then(({ lastModified, size }) => cb(null, new Stats(32768 /* FILE */, size, void 0, void 0, lastModified))).catch(handleError(cb, path));
      }
    });
  }
  exists(p, cred, cb) {
    this.getHandle(p, (error) => cb(error === null));
  }
  openFile(path, flags, cred, cb) {
    this.getHandle(path, (error, handle) => {
      if (error) {
        return cb(error);
      }
      if (handle instanceof FileSystemFileHandle) {
        handle.getFile().then(
          (file) => file.arrayBuffer().then((buffer) => cb(null, this.newFile(path, flags, buffer, file.size, file.lastModified))).catch(handleError(cb, path))
        ).catch(handleError(cb, path));
      }
    });
  }
  unlink(path, cred, cb) {
    this.getHandle(dirname(path), (error, handle) => {
      if (error) {
        return cb(error);
      }
      if (handle instanceof FileSystemDirectoryHandle) {
        handle.removeEntry(basename(path), { recursive: true }).then(() => cb(null)).catch(handleError(cb, path));
      }
    });
  }
  rmdir(path, cred, cb) {
    this.unlink(path, cred, cb);
  }
  mkdir(p, mode, cred, cb) {
    const overwrite = mode && mode.flag && mode.flag.includes("w") && !mode.flag.includes("x");
    this.getHandle(p, (_existingError, existingHandle) => {
      if (existingHandle && !overwrite) {
        return cb(ApiError.EEXIST(p));
      }
      this.getHandle(dirname(p), (error, handle) => {
        if (error) {
          return cb(error);
        }
        if (handle instanceof FileSystemDirectoryHandle) {
          handle.getDirectoryHandle(basename(p), { create: true }).then(() => cb(null)).catch(handleError(cb, p));
        }
      });
    });
  }
  readdir(path, cred, cb) {
    this.getHandle(path, (readError, handle) => {
      if (readError) {
        return cb(readError);
      }
      if (handle instanceof FileSystemDirectoryHandle) {
        keysToArray(handle.keys(), cb, path);
      }
    });
  }
  newFile(path, flag, data, size, lastModified) {
    return new FileSystemAccessFile(this, path, flag, new Stats(32768 /* FILE */, size || 0, void 0, void 0, lastModified || (/* @__PURE__ */ new Date()).getTime()), Buffer2.from(data));
  }
  getHandle(path, cb) {
    if (path === "/") {
      return cb(null, this._handles["/"]);
    }
    let walkedPath = "/";
    const [, ...pathParts] = path.split("/");
    const getHandleParts = ([pathPart, ...remainingPathParts]) => {
      const walkingPath = join(walkedPath, pathPart);
      const continueWalk = (handle2) => {
        walkedPath = walkingPath;
        this._handles[walkedPath] = handle2;
        if (remainingPathParts.length === 0) {
          return cb(null, this._handles[path]);
        }
        getHandleParts(remainingPathParts);
      };
      const handle = this._handles[walkedPath];
      handle.getDirectoryHandle(pathPart).then(continueWalk).catch((error) => {
        if (error.name === "TypeMismatchError") {
          handle.getFileHandle(pathPart).then(continueWalk).catch(handleError(cb, walkingPath));
        } else if (error.message === "Name is not allowed.") {
          cb(new ApiError(2 /* ENOENT */, error.message, walkingPath));
        } else {
          handleError(cb, walkingPath)(error);
        }
      });
    };
    getHandleParts(pathParts);
  }
};
var FileSystemAccessFileSystem = _FileSystemAccessFileSystem;
FileSystemAccessFileSystem.Name = "FileSystemAccess";
FileSystemAccessFileSystem.Options = {};

// src/backend/FolderAdapter.ts
var _FolderAdapter = class extends BaseFileSystem {
  constructor(folder, wrapped) {
    super();
    this._folder = folder;
    this._wrapped = wrapped;
  }
  /**
   * Creates a FolderAdapter instance with the given options.
   */
  static Create(opts, cb) {
    const fa = new _FolderAdapter(opts.folder, opts.wrapped);
    fa._initialize(function(e) {
      if (e) {
        cb(e);
      } else {
        cb(null, fa);
      }
    });
  }
  static CreateAsync(opts) {
    return new Promise((resolve2, reject) => {
      this.Create(opts, (error, fs2) => {
        if (error || !fs2) {
          reject(error);
        } else {
          resolve2(fs2);
        }
      });
    });
  }
  static isAvailable() {
    return true;
  }
  getName() {
    return this._wrapped.getName();
  }
  isReadOnly() {
    return this._wrapped.isReadOnly();
  }
  supportsProps() {
    return this._wrapped.supportsProps();
  }
  supportsSynch() {
    return this._wrapped.supportsSynch();
  }
  supportsLinks() {
    return false;
  }
  /**
   * Initialize the file system. Ensures that the wrapped file system
   * has the given folder.
   */
  _initialize(cb) {
    this._wrapped.exists(this._folder, Cred.Root, (exists) => {
      if (exists) {
        cb();
      } else if (this._wrapped.isReadOnly()) {
        cb(ApiError.ENOENT(this._folder));
      } else {
        this._wrapped.mkdir(this._folder, 511, Cred.Root, cb);
      }
    });
  }
};
var FolderAdapter = _FolderAdapter;
FolderAdapter.Name = "FolderAdapter";
FolderAdapter.Options = {
  folder: {
    type: "string",
    description: "The folder to use as the root directory"
  },
  wrapped: {
    type: "object",
    description: "The file system to wrap"
  }
};
function translateError(folder, e) {
  if (e !== null && typeof e === "object") {
    const err2 = e;
    let p = err2.path;
    if (p) {
      p = "/" + relative(folder, p);
      err2.message = err2.message.replace(err2.path, p);
      err2.path = p;
    }
  }
  return e;
}
function wrapCallback(folder, cb) {
  if (typeof cb === "function") {
    return function(err2) {
      if (arguments.length > 0) {
        arguments[0] = translateError(folder, err2);
      }
      cb.apply(null, arguments);
    };
  } else {
    return cb;
  }
}
function wrapFunction(name, wrapFirst, wrapSecond) {
  if (name.slice(name.length - 4) !== "Sync") {
    return function() {
      if (arguments.length > 0) {
        if (wrapFirst) {
          arguments[0] = join(this._folder, arguments[0]);
        }
        if (wrapSecond) {
          arguments[1] = join(this._folder, arguments[1]);
        }
        arguments[arguments.length - 1] = wrapCallback(this._folder, arguments[arguments.length - 1]);
      }
      return this._wrapped[name].apply(this._wrapped, arguments);
    };
  } else {
    return function() {
      try {
        if (wrapFirst) {
          arguments[0] = join(this._folder, arguments[0]);
        }
        if (wrapSecond) {
          arguments[1] = join(this._folder, arguments[1]);
        }
        return this._wrapped[name].apply(this._wrapped, arguments);
      } catch (e) {
        throw translateError(this._folder, e);
      }
    };
  }
}
[
  "diskSpace",
  "stat",
  "statSync",
  "open",
  "openSync",
  "unlink",
  "unlinkSync",
  "rmdir",
  "rmdirSync",
  "mkdir",
  "mkdirSync",
  "readdir",
  "readdirSync",
  "exists",
  "existsSync",
  "realpath",
  "realpathSync",
  "truncate",
  "truncateSync",
  "readFile",
  "readFileSync",
  "writeFile",
  "writeFileSync",
  "appendFile",
  "appendFileSync",
  "chmod",
  "chmodSync",
  "chown",
  "chownSync",
  "utimes",
  "utimesSync",
  "readlink",
  "readlinkSync"
].forEach((name) => {
  FolderAdapter.prototype[name] = wrapFunction(name, true, false);
});
["rename", "renameSync", "link", "linkSync", "symlink", "symlinkSync"].forEach((name) => {
  FolderAdapter.prototype[name] = wrapFunction(name, true, true);
});

// node-modules-polyfills:process
var process_exports = {};
__export(process_exports, {
  addListener: () => addListener,
  argv: () => argv,
  binding: () => binding,
  browser: () => browser,
  chdir: () => chdir,
  config: () => config,
  cwd: () => cwd,
  default: () => process_default,
  emit: () => emit,
  env: () => env,
  hrtime: () => hrtime,
  nextTick: () => nextTick,
  off: () => off,
  on: () => on,
  once: () => once,
  platform: () => platform,
  release: () => release,
  removeAllListeners: () => removeAllListeners,
  removeListener: () => removeListener,
  title: () => title,
  umask: () => umask,
  uptime: () => uptime,
  version: () => version,
  versions: () => versions
});
function defaultSetTimout() {
  throw new Error("setTimeout has not been defined");
}
function defaultClearTimeout() {
  throw new Error("clearTimeout has not been defined");
}
var cachedSetTimeout = defaultSetTimout;
var cachedClearTimeout = defaultClearTimeout;
if (typeof globalThis.setTimeout === "function") {
  cachedSetTimeout = setTimeout;
}
if (typeof globalThis.clearTimeout === "function") {
  cachedClearTimeout = clearTimeout;
}
function runTimeout(fun) {
  if (cachedSetTimeout === setTimeout) {
    return setTimeout(fun, 0);
  }
  if ((cachedSetTimeout === defaultSetTimout || !cachedSetTimeout) && setTimeout) {
    cachedSetTimeout = setTimeout;
    return setTimeout(fun, 0);
  }
  try {
    return cachedSetTimeout(fun, 0);
  } catch (e) {
    try {
      return cachedSetTimeout.call(null, fun, 0);
    } catch (e2) {
      return cachedSetTimeout.call(this, fun, 0);
    }
  }
}
function runClearTimeout(marker) {
  if (cachedClearTimeout === clearTimeout) {
    return clearTimeout(marker);
  }
  if ((cachedClearTimeout === defaultClearTimeout || !cachedClearTimeout) && clearTimeout) {
    cachedClearTimeout = clearTimeout;
    return clearTimeout(marker);
  }
  try {
    return cachedClearTimeout(marker);
  } catch (e) {
    try {
      return cachedClearTimeout.call(null, marker);
    } catch (e2) {
      return cachedClearTimeout.call(this, marker);
    }
  }
}
var queue = [];
var draining = false;
var currentQueue;
var queueIndex = -1;
function cleanUpNextTick() {
  if (!draining || !currentQueue) {
    return;
  }
  draining = false;
  if (currentQueue.length) {
    queue = currentQueue.concat(queue);
  } else {
    queueIndex = -1;
  }
  if (queue.length) {
    drainQueue();
  }
}
function drainQueue() {
  if (draining) {
    return;
  }
  var timeout = runTimeout(cleanUpNextTick);
  draining = true;
  var len = queue.length;
  while (len) {
    currentQueue = queue;
    queue = [];
    while (++queueIndex < len) {
      if (currentQueue) {
        currentQueue[queueIndex].run();
      }
    }
    queueIndex = -1;
    len = queue.length;
  }
  currentQueue = null;
  draining = false;
  runClearTimeout(timeout);
}
function nextTick(fun) {
  var args = new Array(arguments.length - 1);
  if (arguments.length > 1) {
    for (var i = 1; i < arguments.length; i++) {
      args[i - 1] = arguments[i];
    }
  }
  queue.push(new Item(fun, args));
  if (queue.length === 1 && !draining) {
    runTimeout(drainQueue);
  }
}
function Item(fun, array) {
  this.fun = fun;
  this.array = array;
}
Item.prototype.run = function() {
  this.fun.apply(null, this.array);
};
var title = "browser";
var platform = "browser";
var browser = true;
var env = {};
var argv = [];
var version = "";
var versions = {};
var release = {};
var config = {};
function noop() {
}
var on = noop;
var addListener = noop;
var once = noop;
var off = noop;
var removeListener = noop;
var removeAllListeners = noop;
var emit = noop;
function binding(name) {
  throw new Error("process.binding is not supported");
}
function cwd() {
  return "/";
}
function chdir(dir) {
  throw new Error("process.chdir is not supported");
}
function umask() {
  return 0;
}
var performance = globalThis.performance || {};
var performanceNow = performance.now || performance.mozNow || performance.msNow || performance.oNow || performance.webkitNow || function() {
  return (/* @__PURE__ */ new Date()).getTime();
};
function hrtime(previousTimestamp) {
  var clocktime = performanceNow.call(performance) * 1e-3;
  var seconds = Math.floor(clocktime);
  var nanoseconds = Math.floor(clocktime % 1 * 1e9);
  if (previousTimestamp) {
    seconds = seconds - previousTimestamp[0];
    nanoseconds = nanoseconds - previousTimestamp[1];
    if (nanoseconds < 0) {
      seconds--;
      nanoseconds += 1e9;
    }
  }
  return [seconds, nanoseconds];
}
var startTime = /* @__PURE__ */ new Date();
function uptime() {
  var currentTime = /* @__PURE__ */ new Date();
  var dif = currentTime - startTime;
  return dif / 1e3;
}
var browser$1 = {
  nextTick,
  title,
  browser,
  env,
  argv,
  version,
  versions,
  on,
  addListener,
  once,
  off,
  removeListener,
  removeAllListeners,
  emit,
  binding,
  cwd,
  chdir,
  umask,
  hrtime,
  platform,
  release,
  config,
  uptime
};
var process_default = browser$1;

// src/generic/inode.ts
var Inode = class {
  constructor(id, size, mode, atime, mtime, ctime, uid, gid) {
    this.id = id;
    this.size = size;
    this.mode = mode;
    this.atime = atime;
    this.mtime = mtime;
    this.ctime = ctime;
    this.uid = uid;
    this.gid = gid;
  }
  /**
   * Converts the buffer into an Inode.
   */
  static fromBuffer(buffer) {
    if (buffer === void 0) {
      throw new Error("NO");
    }
    return new Inode(
      buffer.toString("ascii", 38),
      buffer.readUInt32LE(0),
      buffer.readUInt16LE(4),
      buffer.readDoubleLE(6),
      buffer.readDoubleLE(14),
      buffer.readDoubleLE(22),
      buffer.readUInt32LE(30),
      buffer.readUInt32LE(34)
    );
  }
  /**
   * Handy function that converts the Inode to a Node Stats object.
   */
  toStats() {
    return new Stats(
      (this.mode & 61440) === 16384 /* DIRECTORY */ ? 16384 /* DIRECTORY */ : 32768 /* FILE */,
      this.size,
      this.mode,
      this.atime,
      this.mtime,
      this.ctime,
      this.uid,
      this.gid
    );
  }
  /**
   * Get the size of this Inode, in bytes.
   */
  getSize() {
    return 38 + this.id.length;
  }
  /**
   * Writes the inode into the start of the buffer.
   */
  toBuffer(buff = Buffer2.alloc(this.getSize())) {
    buff.writeUInt32LE(this.size, 0);
    buff.writeUInt16LE(this.mode, 4);
    buff.writeDoubleLE(this.atime, 6);
    buff.writeDoubleLE(this.mtime, 14);
    buff.writeDoubleLE(this.ctime, 22);
    buff.writeUInt32LE(this.uid, 30);
    buff.writeUInt32LE(this.gid, 34);
    buff.write(this.id, 38, this.id.length, "ascii");
    return buff;
  }
  /**
   * Updates the Inode using information from the stats object. Used by file
   * systems at sync time, e.g.:
   * - Program opens file and gets a File object.
   * - Program mutates file. File object is responsible for maintaining
   *   metadata changes locally -- typically in a Stats object.
   * - Program closes file. File object's metadata changes are synced with the
   *   file system.
   * @return True if any changes have occurred.
   */
  update(stats) {
    let hasChanged = false;
    if (this.size !== stats.size) {
      this.size = stats.size;
      hasChanged = true;
    }
    if (this.mode !== stats.mode) {
      this.mode = stats.mode;
      hasChanged = true;
    }
    const atimeMs = stats.atime.getTime();
    if (this.atime !== atimeMs) {
      this.atime = atimeMs;
      hasChanged = true;
    }
    const mtimeMs = stats.mtime.getTime();
    if (this.mtime !== mtimeMs) {
      this.mtime = mtimeMs;
      hasChanged = true;
    }
    const ctimeMs = stats.ctime.getTime();
    if (this.ctime !== ctimeMs) {
      this.ctime = ctimeMs;
      hasChanged = true;
    }
    if (this.uid !== stats.uid) {
      this.uid = stats.uid;
      hasChanged = true;
    }
    if (this.uid !== stats.uid) {
      this.uid = stats.uid;
      hasChanged = true;
    }
    return hasChanged;
  }
  // XXX: Copied from Stats. Should reconcile these two into something more
  //      compact.
  /**
   * @return [Boolean] True if this item is a file.
   */
  isFile() {
    return (this.mode & 61440) === 32768 /* FILE */;
  }
  /**
   * @return [Boolean] True if this item is a directory.
   */
  isDirectory() {
    return (this.mode & 61440) === 16384 /* DIRECTORY */;
  }
};

// src/generic/key_value_filesystem.ts
var ROOT_NODE_ID = "/";
var emptyDirNode = null;
function getEmptyDirNode() {
  if (emptyDirNode) {
    return emptyDirNode;
  }
  return emptyDirNode = Buffer2.from("{}");
}
function GenerateRandomID() {
  return "xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g, function(c) {
    const r = Math.random() * 16 | 0;
    const v = c === "x" ? r : r & 3 | 8;
    return v.toString(16);
  });
}
function noError(e, cb) {
  if (e) {
    cb(e);
    return false;
  }
  return true;
}
function noErrorTx(e, tx, cb) {
  if (e) {
    tx.abort(() => {
      cb(e);
    });
    return false;
  }
  return true;
}
var LRUNode = class {
  constructor(key, value) {
    this.key = key;
    this.value = value;
    this.prev = null;
    this.next = null;
  }
};
var LRUCache = class {
  constructor(limit) {
    this.limit = limit;
    this.size = 0;
    this.map = {};
    this.head = null;
    this.tail = null;
  }
  /**
   * Change or add a new value in the cache
   * We overwrite the entry if it already exists
   */
  set(key, value) {
    const node = new LRUNode(key, value);
    if (this.map[key]) {
      this.map[key].value = node.value;
      this.remove(node.key);
    } else {
      if (this.size >= this.limit) {
        delete this.map[this.tail.key];
        this.size--;
        this.tail = this.tail.prev;
        this.tail.next = null;
      }
    }
    this.setHead(node);
  }
  /* Retrieve a single entry from the cache */
  get(key) {
    if (this.map[key]) {
      const value = this.map[key].value;
      const node = new LRUNode(key, value);
      this.remove(key);
      this.setHead(node);
      return value;
    } else {
      return null;
    }
  }
  /* Remove a single entry from the cache */
  remove(key) {
    const node = this.map[key];
    if (!node) {
      return;
    }
    if (node.prev !== null) {
      node.prev.next = node.next;
    } else {
      this.head = node.next;
    }
    if (node.next !== null) {
      node.next.prev = node.prev;
    } else {
      this.tail = node.prev;
    }
    delete this.map[key];
    this.size--;
  }
  /* Resets the entire cache - Argument limit is optional to be reset */
  removeAll() {
    this.size = 0;
    this.map = {};
    this.head = null;
    this.tail = null;
  }
  setHead(node) {
    node.next = this.head;
    node.prev = null;
    if (this.head !== null) {
      this.head.prev = node;
    }
    this.head = node;
    if (this.tail === null) {
      this.tail = node;
    }
    this.size++;
    this.map[node.key] = node;
  }
};
var SimpleSyncRWTransaction = class {
  constructor(store) {
    this.store = store;
    /**
     * Stores data in the keys we modify prior to modifying them.
     * Allows us to roll back commits.
     */
    this.originalData = {};
    /**
     * List of keys modified in this transaction, if any.
     */
    this.modifiedKeys = [];
  }
  get(key) {
    const val = this.store.get(key);
    this.stashOldValue(key, val);
    return val;
  }
  put(key, data, overwrite) {
    this.markModified(key);
    return this.store.put(key, data, overwrite);
  }
  del(key) {
    this.markModified(key);
    this.store.del(key);
  }
  commit() {
  }
  abort() {
    for (const key of this.modifiedKeys) {
      const value = this.originalData[key];
      if (!value) {
        this.store.del(key);
      } else {
        this.store.put(key, value, true);
      }
    }
  }
  _has(key) {
    return Object.prototype.hasOwnProperty.call(this.originalData, key);
  }
  /**
   * Stashes given key value pair into `originalData` if it doesn't already
   * exist. Allows us to stash values the program is requesting anyway to
   * prevent needless `get` requests if the program modifies the data later
   * on during the transaction.
   */
  stashOldValue(key, value) {
    if (!this._has(key)) {
      this.originalData[key] = value;
    }
  }
  /**
   * Marks the given key as modified, and stashes its value if it has not been
   * stashed already.
   */
  markModified(key) {
    if (this.modifiedKeys.indexOf(key) === -1) {
      this.modifiedKeys.push(key);
      if (!this._has(key)) {
        this.originalData[key] = this.store.get(key);
      }
    }
  }
};
var SyncKeyValueFile = class extends PreloadFile {
  constructor(_fs, _path, _flag, _stat, contents) {
    super(_fs, _path, _flag, _stat, contents);
  }
  syncSync() {
    if (this.isDirty()) {
      this._fs._syncSync(this.getPath(), this.getBuffer(), this.getStats());
      this.resetDirty();
    }
  }
  closeSync() {
    this.syncSync();
  }
};
var SyncKeyValueFileSystem = class extends SynchronousFileSystem {
  constructor(options) {
    super();
    this.store = options.store;
    this.makeRootDirectory();
  }
  static isAvailable() {
    return true;
  }
  getName() {
    return this.store.name();
  }
  isReadOnly() {
    return false;
  }
  supportsSymlinks() {
    return false;
  }
  supportsProps() {
    return true;
  }
  supportsSynch() {
    return true;
  }
  /**
   * Delete all contents stored in the file system.
   */
  empty() {
    this.store.clear();
    this.makeRootDirectory();
  }
  accessSync(p, mode, cred) {
    const tx = this.store.beginTransaction("readonly"), node = this.findINode(tx, p);
    if (!node.toStats().hasAccess(mode, cred)) {
      throw ApiError.EACCES(p);
    }
  }
  renameSync(oldPath, newPath, cred) {
    const tx = this.store.beginTransaction("readwrite"), oldParent = dirname(oldPath), oldName = basename(oldPath), newParent = dirname(newPath), newName = basename(newPath), oldDirNode = this.findINode(tx, oldParent), oldDirList = this.getDirListing(tx, oldParent, oldDirNode);
    if (!oldDirNode.toStats().hasAccess(2 /* WRITE */, cred)) {
      throw ApiError.EACCES(oldPath);
    }
    if (!oldDirList[oldName]) {
      throw ApiError.ENOENT(oldPath);
    }
    const nodeId = oldDirList[oldName];
    delete oldDirList[oldName];
    if ((newParent + "/").indexOf(oldPath + "/") === 0) {
      throw new ApiError(16 /* EBUSY */, oldParent);
    }
    let newDirNode, newDirList;
    if (newParent === oldParent) {
      newDirNode = oldDirNode;
      newDirList = oldDirList;
    } else {
      newDirNode = this.findINode(tx, newParent);
      newDirList = this.getDirListing(tx, newParent, newDirNode);
    }
    if (newDirList[newName]) {
      const newNameNode = this.getINode(tx, newPath, newDirList[newName]);
      if (newNameNode.isFile()) {
        try {
          tx.del(newNameNode.id);
          tx.del(newDirList[newName]);
        } catch (e) {
          tx.abort();
          throw e;
        }
      } else {
        throw ApiError.EPERM(newPath);
      }
    }
    newDirList[newName] = nodeId;
    try {
      tx.put(oldDirNode.id, Buffer2.from(JSON.stringify(oldDirList)), true);
      tx.put(newDirNode.id, Buffer2.from(JSON.stringify(newDirList)), true);
    } catch (e) {
      tx.abort();
      throw e;
    }
    tx.commit();
  }
  statSync(p, isLstat, cred) {
    const stats = this.findINode(this.store.beginTransaction("readonly"), p).toStats();
    if (!stats.hasAccess(4 /* READ */, cred)) {
      throw ApiError.EACCES(p);
    }
    return stats;
  }
  createFileSync(p, flag, mode, cred) {
    const tx = this.store.beginTransaction("readwrite"), data = emptyBuffer(), newFile = this.commitNewFile(tx, p, 32768 /* FILE */, mode, cred, data);
    return new SyncKeyValueFile(this, p, flag, newFile.toStats(), data);
  }
  openFileSync(p, flag, cred) {
    const tx = this.store.beginTransaction("readonly"), node = this.findINode(tx, p), data = tx.get(node.id);
    if (!node.toStats().hasAccess(flag.getMode(), cred)) {
      throw ApiError.EACCES(p);
    }
    if (data === void 0) {
      throw ApiError.ENOENT(p);
    }
    return new SyncKeyValueFile(this, p, flag, node.toStats(), data);
  }
  unlinkSync(p, cred) {
    this.removeEntry(p, false, cred);
  }
  rmdirSync(p, cred) {
    if (this.readdirSync(p, cred).length > 0) {
      throw ApiError.ENOTEMPTY(p);
    } else {
      this.removeEntry(p, true, cred);
    }
  }
  mkdirSync(p, mode, cred) {
    const tx = this.store.beginTransaction("readwrite"), data = Buffer2.from("{}");
    this.commitNewFile(tx, p, 16384 /* DIRECTORY */, mode, cred, data);
  }
  readdirSync(p, cred) {
    const tx = this.store.beginTransaction("readonly");
    const node = this.findINode(tx, p);
    if (!node.toStats().hasAccess(4 /* READ */, cred)) {
      throw ApiError.EACCES(p);
    }
    return Object.keys(this.getDirListing(tx, p, node));
  }
  chmodSync(p, isLchmod, mode, cred) {
    const path = isLchmod ? p : this.realpathSync(p, {}, cred);
    const fd = this.openFileSync(path, FileFlag.getFileFlag("r+"), cred);
    fd.chmodSync(mode);
  }
  chownSync(p, isLchown, new_uid, new_gid, cred) {
    const path = isLchown ? p : this.realpathSync(p, {}, cred);
    const fd = this.openFileSync(path, FileFlag.getFileFlag("r+"), cred);
    fd.chownSync(cred.euid, cred.egid);
  }
  _syncSync(p, data, stats) {
    const tx = this.store.beginTransaction("readwrite"), fileInodeId = this._findINode(tx, dirname(p), basename(p)), fileInode = this.getINode(tx, p, fileInodeId), inodeChanged = fileInode.update(stats);
    try {
      tx.put(fileInode.id, data, true);
      if (inodeChanged) {
        tx.put(fileInodeId, fileInode.toBuffer(), true);
      }
    } catch (e) {
      tx.abort();
      throw e;
    }
    tx.commit();
  }
  /**
   * Checks if the root directory exists. Creates it if it doesn't.
   */
  makeRootDirectory() {
    const tx = this.store.beginTransaction("readwrite");
    if (tx.get(ROOT_NODE_ID) === void 0) {
      const currTime = (/* @__PURE__ */ new Date()).getTime(), dirInode = new Inode(GenerateRandomID(), 4096, 511 | 16384 /* DIRECTORY */, currTime, currTime, currTime, 0, 0);
      tx.put(dirInode.id, getEmptyDirNode(), false);
      tx.put(ROOT_NODE_ID, dirInode.toBuffer(), false);
      tx.commit();
    }
  }
  /**
   * Helper function for findINode.
   * @param parent The parent directory of the file we are attempting to find.
   * @param filename The filename of the inode we are attempting to find, minus
   *   the parent.
   * @return string The ID of the file's inode in the file system.
   */
  _findINode(tx, parent, filename) {
    const readDirectory = (inode) => {
      const dirList = this.getDirListing(tx, parent, inode);
      if (dirList[filename]) {
        return dirList[filename];
      } else {
        throw ApiError.ENOENT(resolve(parent, filename));
      }
    };
    if (parent === ".") {
      parent = cwd();
    }
    if (parent === "/") {
      if (filename === "") {
        return ROOT_NODE_ID;
      } else {
        return readDirectory(this.getINode(tx, parent, ROOT_NODE_ID));
      }
    } else {
      return readDirectory(this.getINode(tx, parent + sep + filename, this._findINode(tx, dirname(parent), basename(parent))));
    }
  }
  /**
   * Finds the Inode of the given path.
   * @param p The path to look up.
   * @return The Inode of the path p.
   * @todo memoize/cache
   */
  findINode(tx, p) {
    return this.getINode(tx, p, this._findINode(tx, dirname(p), basename(p)));
  }
  /**
   * Given the ID of a node, retrieves the corresponding Inode.
   * @param tx The transaction to use.
   * @param p The corresponding path to the file (used for error messages).
   * @param id The ID to look up.
   */
  getINode(tx, p, id) {
    const inode = tx.get(id);
    if (inode === void 0) {
      throw ApiError.ENOENT(p);
    }
    return Inode.fromBuffer(inode);
  }
  /**
   * Given the Inode of a directory, retrieves the corresponding directory
   * listing.
   */
  getDirListing(tx, p, inode) {
    if (!inode.isDirectory()) {
      throw ApiError.ENOTDIR(p);
    }
    const data = tx.get(inode.id);
    if (data === void 0) {
      throw ApiError.ENOENT(p);
    }
    return JSON.parse(data.toString());
  }
  /**
   * Creates a new node under a random ID. Retries 5 times before giving up in
   * the exceedingly unlikely chance that we try to reuse a random GUID.
   * @return The GUID that the data was stored under.
   */
  addNewNode(tx, data) {
    const retries = 0;
    let currId;
    while (retries < 5) {
      try {
        currId = GenerateRandomID();
        tx.put(currId, data, false);
        return currId;
      } catch (e) {
      }
    }
    throw new ApiError(5 /* EIO */, "Unable to commit data to key-value store.");
  }
  /**
   * Commits a new file (well, a FILE or a DIRECTORY) to the file system with
   * the given mode.
   * Note: This will commit the transaction.
   * @param p The path to the new file.
   * @param type The type of the new file.
   * @param mode The mode to create the new file with.
   * @param data The data to store at the file's data node.
   * @return The Inode for the new file.
   */
  commitNewFile(tx, p, type, mode, cred, data) {
    const parentDir = dirname(p), fname = basename(p), parentNode = this.findINode(tx, parentDir), dirListing = this.getDirListing(tx, parentDir, parentNode), currTime = (/* @__PURE__ */ new Date()).getTime();
    if (!parentNode.toStats().hasAccess(4, cred)) {
      throw ApiError.EACCES(p);
    }
    if (p === "/") {
      throw ApiError.EEXIST(p);
    }
    if (dirListing[fname]) {
      throw ApiError.EEXIST(p);
    }
    let fileNode;
    try {
      const dataId = this.addNewNode(tx, data);
      fileNode = new Inode(dataId, data.length, mode | type, currTime, currTime, currTime, cred.uid, cred.gid);
      const fileNodeId = this.addNewNode(tx, fileNode.toBuffer());
      dirListing[fname] = fileNodeId;
      tx.put(parentNode.id, Buffer2.from(JSON.stringify(dirListing)), true);
    } catch (e) {
      tx.abort();
      throw e;
    }
    tx.commit();
    return fileNode;
  }
  /**
   * Remove all traces of the given path from the file system.
   * @param p The path to remove from the file system.
   * @param isDir Does the path belong to a directory, or a file?
   * @todo Update mtime.
   */
  removeEntry(p, isDir, cred) {
    const tx = this.store.beginTransaction("readwrite"), parent = dirname(p), parentNode = this.findINode(tx, parent), parentListing = this.getDirListing(tx, parent, parentNode), fileName = basename(p);
    if (!parentListing[fileName]) {
      throw ApiError.ENOENT(p);
    }
    const fileNodeId = parentListing[fileName];
    const fileNode = this.getINode(tx, p, fileNodeId);
    if (!fileNode.toStats().hasAccess(2 /* WRITE */, cred)) {
      throw ApiError.EACCES(p);
    }
    delete parentListing[fileName];
    if (!isDir && fileNode.isDirectory()) {
      throw ApiError.EISDIR(p);
    } else if (isDir && !fileNode.isDirectory()) {
      throw ApiError.ENOTDIR(p);
    }
    try {
      tx.del(fileNode.id);
      tx.del(fileNodeId);
      tx.put(parentNode.id, Buffer2.from(JSON.stringify(parentListing)), true);
    } catch (e) {
      tx.abort();
      throw e;
    }
    tx.commit();
  }
};
var AsyncKeyValueFile = class extends PreloadFile {
  constructor(_fs, _path, _flag, _stat, contents) {
    super(_fs, _path, _flag, _stat, contents);
  }
  sync(cb) {
    if (this.isDirty()) {
      this._fs._sync(this.getPath(), this.getBuffer(), this.getStats(), (e) => {
        if (!e) {
          this.resetDirty();
        }
        cb(e);
      });
    } else {
      cb();
    }
  }
  close(cb) {
    this.sync(cb);
  }
};
var AsyncKeyValueFileSystem = class extends BaseFileSystem {
  constructor(cacheSize) {
    super();
    this._cache = null;
    if (cacheSize > 0) {
      this._cache = new LRUCache(cacheSize);
    }
  }
  static isAvailable() {
    return true;
  }
  /**
   * Initializes the file system. Typically called by subclasses' async
   * constructors.
   */
  init(store, cb) {
    this.store = store;
    this.makeRootDirectory(cb);
  }
  getName() {
    return this.store.name();
  }
  isReadOnly() {
    return false;
  }
  supportsSymlinks() {
    return false;
  }
  supportsProps() {
    return true;
  }
  supportsSynch() {
    return false;
  }
  /**
   * Delete all contents stored in the file system.
   */
  empty(cb) {
    if (this._cache) {
      this._cache.removeAll();
    }
    this.store.clear((e) => {
      if (noError(e, cb)) {
        this.makeRootDirectory(cb);
      }
    });
  }
  access(p, mode, cred, cb) {
    const tx = this.store.beginTransaction("readonly");
    this.findINode(tx, p, (inode) => {
      if (inode instanceof Inode) {
        if (!inode.toStats().hasAccess(mode, cred)) {
          cb(ApiError.EACCES(p));
        }
      } else {
        cb(inode);
      }
    });
  }
  rename(oldPath, newPath, cred, cb) {
    if (this._cache) {
      const c = this._cache;
      this._cache = null;
      c.removeAll();
      const oldCb = cb;
      cb = (e) => {
        this._cache = c;
        oldCb(e);
      };
    }
    const tx = this.store.beginTransaction("readwrite");
    const oldParent = dirname(oldPath), oldName = basename(oldPath);
    const newParent = dirname(newPath), newName = basename(newPath);
    const inodes = {};
    const lists = {};
    let errorOccurred = false;
    if ((newParent + "/").indexOf(oldPath + "/") === 0) {
      return cb(new ApiError(16 /* EBUSY */, oldParent));
    }
    const theOleSwitcharoo = () => {
      if (errorOccurred || !Object.prototype.hasOwnProperty.call(lists, oldParent) || !Object.prototype.hasOwnProperty.call(lists, newParent)) {
        return;
      }
      const oldParentList = lists[oldParent], oldParentINode = inodes[oldParent], newParentList = lists[newParent], newParentINode = inodes[newParent];
      if (!oldParentList[oldName]) {
        cb(ApiError.ENOENT(oldPath));
      } else {
        const fileId = oldParentList[oldName];
        delete oldParentList[oldName];
        const completeRename = () => {
          newParentList[newName] = fileId;
          tx.put(oldParentINode.id, Buffer2.from(JSON.stringify(oldParentList)), true, (e) => {
            if (noErrorTx(e, tx, cb)) {
              if (oldParent === newParent) {
                tx.commit(cb);
              } else {
                tx.put(newParentINode.id, Buffer2.from(JSON.stringify(newParentList)), true, (e2) => {
                  if (noErrorTx(e2, tx, cb)) {
                    tx.commit(cb);
                  }
                });
              }
            }
          });
        };
        if (newParentList[newName]) {
          this.getINode(tx, newPath, newParentList[newName], (e, inode) => {
            if (noErrorTx(e, tx, cb)) {
              if (inode.isFile()) {
                tx.del(inode.id, (e2) => {
                  if (noErrorTx(e2, tx, cb)) {
                    tx.del(newParentList[newName], (e3) => {
                      if (noErrorTx(e3, tx, cb)) {
                        completeRename();
                      }
                    });
                  }
                });
              } else {
                tx.abort((e2) => {
                  cb(ApiError.EPERM(newPath));
                });
              }
            }
          });
        } else {
          completeRename();
        }
      }
    };
    const processInodeAndListings = (p) => {
      this.findINodeAndDirListing(tx, p, (e, node, dirList) => {
        if (!node.toStats().hasAccess(2 /* WRITE */, cred)) {
          throw ApiError.EACCES(p);
        }
        if (e) {
          if (!errorOccurred) {
            errorOccurred = true;
            tx.abort(() => {
              cb(e);
            });
          }
        } else {
          inodes[p] = node;
          lists[p] = dirList;
          theOleSwitcharoo();
        }
      });
    };
    processInodeAndListings(oldParent);
    if (oldParent !== newParent) {
      processInodeAndListings(newParent);
    }
  }
  stat(p, isLstat, cred, cb) {
    const tx = this.store.beginTransaction("readonly");
    this.findINode(tx, p, (e, inode) => {
      if (noError(e, cb)) {
        const stats = inode.toStats();
        if (!stats.hasAccess(4 /* READ */, cred)) {
          cb(ApiError.EACCES(p));
        }
        cb(null, stats);
      }
    });
  }
  createFile(p, flag, mode, cred, cb) {
    const tx = this.store.beginTransaction("readwrite"), data = emptyBuffer();
    this.commitNewFile(tx, p, 32768 /* FILE */, mode, cred, data, (e, newFile) => {
      if (noError(e, cb)) {
        cb(null, new AsyncKeyValueFile(this, p, flag, newFile.toStats(), data));
      }
    });
  }
  openFile(p, flag, cred, cb) {
    const tx = this.store.beginTransaction("readonly");
    this.findINode(tx, p, (e, inode) => {
      if (noError(e, cb)) {
        const stats = inode.toStats();
        if (!stats.hasAccess(flag.getMode(), cred)) {
          cb(ApiError.EACCES(p));
        }
        tx.get(inode.id, (e2, data) => {
          if (noError(e2, cb)) {
            if (data === void 0) {
              cb(ApiError.ENOENT(p));
            } else {
              cb(null, new AsyncKeyValueFile(this, p, flag, stats, data));
            }
          }
        });
      }
    });
  }
  unlink(p, cred, cb) {
    this.removeEntry(p, false, cred, cb);
  }
  rmdir(p, cred, cb) {
    this.readdir(p, cred, (err2, files) => {
      if (err2) {
        cb(err2);
      } else if (files.length > 0) {
        cb(ApiError.ENOTEMPTY(p));
      } else {
        this.removeEntry(p, true, cred, cb);
      }
    });
  }
  mkdir(p, mode, cred, cb) {
    const tx = this.store.beginTransaction("readwrite"), data = Buffer2.from("{}");
    this.commitNewFile(tx, p, 16384 /* DIRECTORY */, mode, cred, data, cb);
  }
  readdir(p, cred, cb) {
    const tx = this.store.beginTransaction("readonly");
    this.findINode(tx, p, (e, inode) => {
      if (noError(e, cb)) {
        if (!inode.toStats().hasAccess(4 /* READ */, cred)) {
          cb(ApiError.EACCES(p));
        }
        this.getDirListing(tx, p, inode, (e2, dirListing) => {
          if (noError(e2, cb)) {
            cb(null, Object.keys(dirListing));
          }
        });
      }
    });
  }
  _sync(p, data, stats, cb) {
    const tx = this.store.beginTransaction("readwrite");
    this._findINode(tx, dirname(p), basename(p), (e, fileInodeId) => {
      if (noErrorTx(e, tx, cb)) {
        this.getINode(tx, p, fileInodeId, (e2, fileInode) => {
          if (noErrorTx(e2, tx, cb)) {
            const inodeChanged = fileInode.update(stats);
            tx.put(fileInode.id, data, true, (e3) => {
              if (noErrorTx(e3, tx, cb)) {
                if (inodeChanged) {
                  tx.put(fileInodeId, fileInode.toBuffer(), true, (e4) => {
                    if (noErrorTx(e4, tx, cb)) {
                      tx.commit(cb);
                    }
                  });
                } else {
                  tx.commit(cb);
                }
              }
            });
          }
        });
      }
    });
  }
  /**
   * Checks if the root directory exists. Creates it if it doesn't.
   */
  makeRootDirectory(cb) {
    const tx = this.store.beginTransaction("readwrite");
    tx.get(ROOT_NODE_ID, (e, data) => {
      if (e || data === void 0) {
        const currTime = (/* @__PURE__ */ new Date()).getTime(), dirInode = new Inode(GenerateRandomID(), 4096, 511 | 16384 /* DIRECTORY */, currTime, currTime, currTime, 0, 0);
        tx.put(dirInode.id, getEmptyDirNode(), false, (e2) => {
          if (noErrorTx(e2, tx, cb)) {
            tx.put(ROOT_NODE_ID, dirInode.toBuffer(), false, (e3) => {
              if (e3) {
                tx.abort(() => {
                  cb(e3);
                });
              } else {
                tx.commit(cb);
              }
            });
          }
        });
      } else {
        tx.commit(cb);
      }
    });
  }
  /**
   * Helper function for findINode.
   * @param parent The parent directory of the file we are attempting to find.
   * @param filename The filename of the inode we are attempting to find, minus
   *   the parent.
   * @param cb Passed an error or the ID of the file's inode in the file system.
   */
  _findINode(tx, parent, filename, cb) {
    if (this._cache) {
      const id = this._cache.get(join(parent, filename));
      if (id) {
        return cb(null, id);
      }
    }
    const handleDirectoryListings = (e, inode, dirList) => {
      if (e) {
        cb(e);
      } else if (dirList[filename]) {
        const id = dirList[filename];
        if (this._cache) {
          this._cache.set(join(parent, filename), id);
        }
        cb(null, id);
      } else {
        cb(ApiError.ENOENT(resolve(parent, filename)));
      }
    };
    if (parent === "/") {
      if (filename === "") {
        if (this._cache) {
          this._cache.set(join(parent, filename), ROOT_NODE_ID);
        }
        cb(null, ROOT_NODE_ID);
      } else {
        this.getINode(tx, parent, ROOT_NODE_ID, (e, inode) => {
          if (noError(e, cb)) {
            this.getDirListing(tx, parent, inode, (e2, dirList) => {
              handleDirectoryListings(e2, inode, dirList);
            });
          }
        });
      }
    } else {
      this.findINodeAndDirListing(tx, parent, handleDirectoryListings);
    }
  }
  /**
   * Finds the Inode of the given path.
   * @param p The path to look up.
   * @param cb Passed an error or the Inode of the path p.
   * @todo memoize/cache
   */
  findINode(tx, p, cb) {
    this._findINode(tx, dirname(p), basename(p), (e, id) => {
      if (noError(e, cb)) {
        this.getINode(tx, p, id, cb);
      }
    });
  }
  /**
   * Given the ID of a node, retrieves the corresponding Inode.
   * @param tx The transaction to use.
   * @param p The corresponding path to the file (used for error messages).
   * @param id The ID to look up.
   * @param cb Passed an error or the inode under the given id.
   */
  getINode(tx, p, id, cb) {
    tx.get(id, (e, data) => {
      if (noError(e, cb)) {
        if (data === void 0) {
          cb(ApiError.ENOENT(p));
        } else {
          cb(null, Inode.fromBuffer(data));
        }
      }
    });
  }
  /**
   * Given the Inode of a directory, retrieves the corresponding directory
   * listing.
   */
  getDirListing(tx, p, inode, cb) {
    if (!inode.isDirectory()) {
      cb(ApiError.ENOTDIR(p));
    } else {
      tx.get(inode.id, (e, data) => {
        if (noError(e, cb)) {
          try {
            cb(null, JSON.parse(data.toString()));
          } catch (e2) {
            cb(ApiError.ENOENT(p));
          }
        }
      });
    }
  }
  /**
   * Given a path to a directory, retrieves the corresponding INode and
   * directory listing.
   */
  findINodeAndDirListing(tx, p, cb) {
    this.findINode(tx, p, (e, inode) => {
      if (noError(e, cb)) {
        this.getDirListing(tx, p, inode, (e2, listing) => {
          if (noError(e2, cb)) {
            cb(null, inode, listing);
          }
        });
      }
    });
  }
  /**
   * Adds a new node under a random ID. Retries 5 times before giving up in
   * the exceedingly unlikely chance that we try to reuse a random GUID.
   * @param cb Passed an error or the GUID that the data was stored under.
   */
  addNewNode(tx, data, cb) {
    let retries = 0, currId;
    const reroll = () => {
      if (++retries === 5) {
        cb(new ApiError(5 /* EIO */, "Unable to commit data to key-value store."));
      } else {
        currId = GenerateRandomID();
        tx.put(currId, data, false, (e, committed) => {
          if (e || !committed) {
            reroll();
          } else {
            cb(null, currId);
          }
        });
      }
    };
    reroll();
  }
  /**
   * Commits a new file (well, a FILE or a DIRECTORY) to the file system with
   * the given mode.
   * Note: This will commit the transaction.
   * @param p The path to the new file.
   * @param type The type of the new file.
   * @param mode The mode to create the new file with.
   * @param uid The UID to create the file with
   * @param gid The GID to create the file with
   * @param data The data to store at the file's data node.
   * @param cb Passed an error or the Inode for the new file.
   */
  commitNewFile(tx, p, type, mode, cred, data, cb) {
    const parentDir = dirname(p), fname = basename(p), currTime = (/* @__PURE__ */ new Date()).getTime();
    if (p === "/") {
      return cb(ApiError.EEXIST(p));
    }
    this.findINodeAndDirListing(tx, parentDir, (e, parentNode, dirListing) => {
      if (!parentNode.toStats().hasAccess(2 /* WRITE */, cred)) {
        cb(ApiError.EACCES(p));
      }
      if (noErrorTx(e, tx, cb)) {
        if (dirListing[fname]) {
          tx.abort(() => {
            cb(ApiError.EEXIST(p));
          });
        } else {
          this.addNewNode(tx, data, (e2, dataId) => {
            if (noErrorTx(e2, tx, cb)) {
              const fileInode = new Inode(dataId, data.length, mode | type, currTime, currTime, currTime, cred.euid, cred.egid);
              this.addNewNode(tx, fileInode.toBuffer(), (e3, fileInodeId) => {
                if (noErrorTx(e3, tx, cb)) {
                  dirListing[fname] = fileInodeId;
                  tx.put(parentNode.id, Buffer2.from(JSON.stringify(dirListing)), true, (e4) => {
                    if (noErrorTx(e4, tx, cb)) {
                      tx.commit((e5) => {
                        if (noErrorTx(e5, tx, cb)) {
                          cb(null, fileInode);
                        }
                      });
                    }
                  });
                }
              });
            }
          });
        }
      }
    });
  }
  /**
   * Remove all traces of the given path from the file system.
   * @param p The path to remove from the file system.
   * @param isDir Does the path belong to a directory, or a file?
   * @todo Update mtime.
   */
  removeEntry(p, isDir, cred, cb) {
    if (this._cache) {
      this._cache.remove(p);
    }
    const tx = this.store.beginTransaction("readwrite"), parent = dirname(p), fileName = basename(p);
    this.findINodeAndDirListing(tx, parent, (e, parentNode, parentListing) => {
      if (!parentNode.toStats().hasAccess(2 /* WRITE */, cred)) {
        cb(ApiError.EACCES(p));
      }
      if (noErrorTx(e, tx, cb)) {
        if (!parentListing[fileName]) {
          tx.abort(() => {
            cb(ApiError.ENOENT(p));
          });
        } else {
          const fileNodeId = parentListing[fileName];
          delete parentListing[fileName];
          this.getINode(tx, p, fileNodeId, (e2, fileNode) => {
            if (noErrorTx(e2, tx, cb)) {
              if (!isDir && fileNode.isDirectory()) {
                tx.abort(() => {
                  cb(ApiError.EISDIR(p));
                });
              } else if (isDir && !fileNode.isDirectory()) {
                tx.abort(() => {
                  cb(ApiError.ENOTDIR(p));
                });
              } else {
                tx.del(fileNode.id, (e3) => {
                  if (noErrorTx(e3, tx, cb)) {
                    tx.del(fileNodeId, (e4) => {
                      if (noErrorTx(e4, tx, cb)) {
                        tx.put(parentNode.id, Buffer2.from(JSON.stringify(parentListing)), true, (e5) => {
                          if (noErrorTx(e5, tx, cb)) {
                            tx.commit(cb);
                          }
                        });
                      }
                    });
                  }
                });
              }
            }
          });
        }
      }
    });
  }
};

// src/backend/InMemory.ts
var InMemoryStore = class {
  constructor() {
    this.store = /* @__PURE__ */ new Map();
  }
  name() {
    return InMemoryFileSystem.Name;
  }
  clear() {
    this.store.clear();
  }
  beginTransaction(type) {
    return new SimpleSyncRWTransaction(this);
  }
  get(key) {
    return this.store.get(key);
  }
  put(key, data, overwrite) {
    if (!overwrite && this.store.has(key)) {
      return false;
    }
    this.store.set(key, data);
    return true;
  }
  del(key) {
    this.store.delete(key);
  }
};
var _InMemoryFileSystem = class extends SyncKeyValueFileSystem {
  /**
   * Creates an InMemoryFileSystem instance.
   */
  static Create(options, cb) {
    cb(null, new _InMemoryFileSystem());
  }
  static CreateAsync(opts) {
    return new Promise((resolve2, reject) => {
      this.Create(opts, (error, fs2) => {
        if (error || !fs2) {
          reject(error);
        } else {
          resolve2(fs2);
        }
      });
    });
  }
  constructor() {
    super({ store: new InMemoryStore() });
  }
};
var InMemoryFileSystem = _InMemoryFileSystem;
InMemoryFileSystem.Name = "InMemory";
InMemoryFileSystem.Options = {};

// src/backend/IndexedDB.ts
var indexedDB = (() => {
  try {
    return globalThis.indexedDB || globalThis.mozIndexedDB || globalThis.webkitIndexedDB || globalThis.msIndexedDB;
  } catch (e) {
    return null;
  }
})();
function convertError2(e, message = e.toString()) {
  switch (e.name) {
    case "NotFoundError":
      return new ApiError(2 /* ENOENT */, message);
    case "QuotaExceededError":
      return new ApiError(28 /* ENOSPC */, message);
    default:
      return new ApiError(5 /* EIO */, message);
  }
}
function onErrorHandler(cb, code = 5 /* EIO */, message = null) {
  return function(e) {
    e.preventDefault();
    cb(new ApiError(code, message !== null ? message : void 0));
  };
}
var IndexedDBROTransaction = class {
  constructor(tx, store) {
    this.tx = tx;
    this.store = store;
  }
  get(key, cb) {
    try {
      const r = this.store.get(key);
      r.onerror = onErrorHandler(cb);
      r.onsuccess = (event) => {
        const result = event.target.result;
        if (result === void 0) {
          cb(null, result);
        } else {
          cb(null, arrayBuffer2Buffer(result));
        }
      };
    } catch (e) {
      cb(convertError2(e));
    }
  }
};
var IndexedDBRWTransaction = class extends IndexedDBROTransaction {
  constructor(tx, store) {
    super(tx, store);
  }
  put(key, data, overwrite, cb) {
    try {
      const arraybuffer = buffer2ArrayBuffer(data);
      let r;
      r = overwrite ? this.store.put(arraybuffer, key) : this.store.add(arraybuffer, key);
      r.onerror = onErrorHandler(cb);
      r.onsuccess = (event) => {
        cb(null, true);
      };
    } catch (e) {
      cb(convertError2(e));
    }
  }
  del(key, cb) {
    try {
      const r = this.store["delete"](key);
      r.onerror = onErrorHandler(cb);
      r.onsuccess = (event) => {
        cb();
      };
    } catch (e) {
      cb(convertError2(e));
    }
  }
  commit(cb) {
    setTimeout(cb, 0);
  }
  abort(cb) {
    let _e = null;
    try {
      this.tx.abort();
    } catch (e) {
      _e = convertError2(e);
    } finally {
      cb(_e);
    }
  }
};
var IndexedDBStore = class {
  constructor(db, storeName) {
    this.db = db;
    this.storeName = storeName;
  }
  static Create(storeName, cb) {
    const openReq = indexedDB.open(storeName, 1);
    openReq.onupgradeneeded = (event) => {
      const db = event.target.result;
      if (db.objectStoreNames.contains(storeName)) {
        db.deleteObjectStore(storeName);
      }
      db.createObjectStore(storeName);
    };
    openReq.onsuccess = (event) => {
      cb(null, new IndexedDBStore(event.target.result, storeName));
    };
    openReq.onerror = onErrorHandler(cb, 13 /* EACCES */);
  }
  name() {
    return IndexedDBFileSystem.Name + " - " + this.storeName;
  }
  clear(cb) {
    try {
      const tx = this.db.transaction(this.storeName, "readwrite"), objectStore = tx.objectStore(this.storeName), r = objectStore.clear();
      r.onsuccess = (event) => {
        setTimeout(cb, 0);
      };
      r.onerror = onErrorHandler(cb);
    } catch (e) {
      cb(convertError2(e));
    }
  }
  beginTransaction(type = "readonly") {
    const tx = this.db.transaction(this.storeName, type), objectStore = tx.objectStore(this.storeName);
    if (type === "readwrite") {
      return new IndexedDBRWTransaction(tx, objectStore);
    } else if (type === "readonly") {
      return new IndexedDBROTransaction(tx, objectStore);
    } else {
      throw new ApiError(22 /* EINVAL */, "Invalid transaction type.");
    }
  }
};
var _IndexedDBFileSystem = class extends AsyncKeyValueFileSystem {
  /**
   * Constructs an IndexedDB file system with the given options.
   */
  static Create(options, cb) {
    if (!options) {
      options = {
        storeName: "browserfs",
        cacheSize: 100
      };
    }
    IndexedDBStore.Create(options.storeName || "browserfs", (e, store) => {
      if (store) {
        const idbfs = new _IndexedDBFileSystem(options.cacheSize || 100);
        idbfs.init(store, (e2) => {
          if (e2) {
            cb(e2);
          } else {
            cb(null, idbfs);
          }
        });
      } else {
        cb(e);
      }
    });
  }
  static CreateAsync(opts) {
    return new Promise((resolve2, reject) => {
      this.Create(opts, (error, fs2) => {
        if (error || !fs2) {
          reject(error);
        } else {
          resolve2(fs2);
        }
      });
    });
  }
  static isAvailable() {
    try {
      return typeof indexedDB !== "undefined" && null !== indexedDB.open("__browserfs_test__");
    } catch (e) {
      return false;
    }
  }
  constructor(cacheSize) {
    super(cacheSize);
  }
};
var IndexedDBFileSystem = _IndexedDBFileSystem;
IndexedDBFileSystem.Name = "IndexedDB";
IndexedDBFileSystem.Options = {
  storeName: {
    type: "string",
    optional: true,
    description: "The name of this file system. You can have multiple IndexedDB file systems operating at once, but each must have a different name."
  },
  cacheSize: {
    type: "number",
    optional: true,
    description: "The size of the inode cache. Defaults to 100. A size of 0 or below disables caching."
  }
};

// src/backend/LocalStorage.ts
var supportsBinaryString = false;
var binaryEncoding;
try {
  globalThis.localStorage.setItem("__test__", String.fromCharCode(55296));
  supportsBinaryString = globalThis.localStorage.getItem("__test__") === String.fromCharCode(55296);
} catch (e) {
  supportsBinaryString = false;
}
binaryEncoding = supportsBinaryString ? "binary_string" : "binary_string_ie";
if (!Buffer2.isEncoding(binaryEncoding)) {
  binaryEncoding = "base64";
}
var LocalStorageStore = class {
  name() {
    return LocalStorageFileSystem.Name;
  }
  clear() {
    globalThis.localStorage.clear();
  }
  beginTransaction(type) {
    return new SimpleSyncRWTransaction(this);
  }
  get(key) {
    try {
      const data = globalThis.localStorage.getItem(key);
      if (data !== null) {
        return Buffer2.from(data, binaryEncoding);
      }
    } catch (e) {
    }
    return void 0;
  }
  put(key, data, overwrite) {
    try {
      if (!overwrite && globalThis.localStorage.getItem(key) !== null) {
        return false;
      }
      globalThis.localStorage.setItem(key, data.toString(binaryEncoding));
      return true;
    } catch (e) {
      throw new ApiError(28 /* ENOSPC */, "LocalStorage is full.");
    }
  }
  del(key) {
    try {
      globalThis.localStorage.removeItem(key);
    } catch (e) {
      throw new ApiError(5 /* EIO */, "Unable to delete key " + key + ": " + e);
    }
  }
};
var _LocalStorageFileSystem = class extends SyncKeyValueFileSystem {
  /**
   * Creates a LocalStorageFileSystem instance.
   */
  static Create(options, cb) {
    cb(null, new _LocalStorageFileSystem());
  }
  static CreateAsync(opts) {
    return new Promise((resolve2, reject) => {
      this.Create(opts, (error, fs2) => {
        if (error || !fs2) {
          reject(error);
        } else {
          resolve2(fs2);
        }
      });
    });
  }
  static isAvailable() {
    return typeof globalThis.localStorage !== "undefined";
  }
  /**
   * Creates a new LocalStorage file system using the contents of `localStorage`.
   */
  constructor() {
    super({ store: new LocalStorageStore() });
  }
};
var LocalStorageFileSystem = _LocalStorageFileSystem;
LocalStorageFileSystem.Name = "LocalStorage";
LocalStorageFileSystem.Options = {};

// src/backend/MountableFileSystem.ts
var _MountableFileSystem = class extends BaseFileSystem {
  /**
   * Creates a new, empty MountableFileSystem.
   */
  constructor(rootFs) {
    super();
    // Contains the list of mount points in mntMap, sorted by string length in decreasing order.
    // Ensures that we scan the most specific mount points for a match first, which lets us
    // nest mount points.
    this.mountList = [];
    this.mntMap = {};
    this.rootFs = rootFs;
  }
  /**
   * Creates a MountableFileSystem instance with the given options.
   */
  static Create(opts, cb) {
    InMemoryFileSystem.Create({}, (e, imfs) => {
      if (imfs) {
        const fs2 = new _MountableFileSystem(imfs);
        try {
          for (const mountPoint of Object.keys(opts)) {
            fs2.mount(mountPoint, opts[mountPoint], Cred.Root);
          }
        } catch (e2) {
          return cb(e2);
        }
        cb(null, fs2);
      } else {
        cb(e);
      }
    });
  }
  static CreateAsync(opts) {
    return new Promise((resolve2, reject) => {
      this.Create(opts, (error, fs2) => {
        if (error || !fs2) {
          reject(error);
        } else {
          resolve2(fs2);
        }
      });
    });
  }
  static isAvailable() {
    return true;
  }
  /**
   * Mounts the file system at the given mount point.
   */
  mount(mountPoint, fs2, cred) {
    if (mountPoint[0] !== "/") {
      mountPoint = `/${mountPoint}`;
    }
    mountPoint = resolve(mountPoint);
    if (this.mntMap[mountPoint]) {
      throw new ApiError(22 /* EINVAL */, "Mount point " + mountPoint + " is already in use.");
    }
    mkdirpSync(mountPoint, 511, cred, this.rootFs);
    this.mntMap[mountPoint] = fs2;
    this.mountList.push(mountPoint);
    this.mountList = this.mountList.sort((a, b) => b.length - a.length);
  }
  umount(mountPoint, cred) {
    if (mountPoint[0] !== "/") {
      mountPoint = `/${mountPoint}`;
    }
    mountPoint = resolve(mountPoint);
    if (!this.mntMap[mountPoint]) {
      throw new ApiError(22 /* EINVAL */, "Mount point " + mountPoint + " is already unmounted.");
    }
    delete this.mntMap[mountPoint];
    this.mountList.splice(this.mountList.indexOf(mountPoint), 1);
    while (mountPoint !== "/") {
      if (this.rootFs.readdirSync(mountPoint, cred).length === 0) {
        this.rootFs.rmdirSync(mountPoint, cred);
        mountPoint = dirname(mountPoint);
      } else {
        break;
      }
    }
  }
  /**
   * Returns the file system that the path points to.
   */
  _getFs(path) {
    const mountList = this.mountList, len = mountList.length;
    for (let i = 0; i < len; i++) {
      const mountPoint = mountList[i];
      if (mountPoint.length <= path.length && path.indexOf(mountPoint) === 0) {
        path = path.substr(mountPoint.length > 1 ? mountPoint.length : 0);
        if (path === "") {
          path = "/";
        }
        return { fs: this.mntMap[mountPoint], path, mountPoint };
      }
    }
    return { fs: this.rootFs, path, mountPoint: "/" };
  }
  // Global information methods
  getName() {
    return _MountableFileSystem.Name;
  }
  diskSpace(path, cb) {
    cb(0, 0);
  }
  isReadOnly() {
    return false;
  }
  supportsLinks() {
    return false;
  }
  supportsProps() {
    return false;
  }
  supportsSynch() {
    return true;
  }
  /**
   * Fixes up error messages so they mention the mounted file location relative
   * to the MFS root, not to the particular FS's root.
   * Mutates the input error, and returns it.
   */
  standardizeError(err2, path, realPath) {
    const index = err2.message.indexOf(path);
    if (index !== -1) {
      err2.message = err2.message.substr(0, index) + realPath + err2.message.substr(index + path.length);
      err2.path = realPath;
    }
    return err2;
  }
  // The following methods involve multiple file systems, and thus have custom
  // logic.
  // Note that we go through the Node API to use its robust default argument
  // processing.
  rename(oldPath, newPath, cred, cb) {
    const fs1rv = this._getFs(oldPath);
    const fs2rv = this._getFs(newPath);
    if (fs1rv.fs === fs2rv.fs) {
      return fs1rv.fs.rename(fs1rv.path, fs2rv.path, cred, (e) => {
        if (e) {
          this.standardizeError(this.standardizeError(e, fs1rv.path, oldPath), fs2rv.path, newPath);
        }
        cb(e);
      });
    }
    return node_fs_default.readFile(oldPath, function(err2, data) {
      if (err2) {
        return cb(err2);
      }
      node_fs_default.writeFile(newPath, data, function(err3) {
        if (err3) {
          return cb(err3);
        }
        node_fs_default.unlink(oldPath, cb);
      });
    });
  }
  renameSync(oldPath, newPath, cred) {
    const fs1rv = this._getFs(oldPath);
    const fs2rv = this._getFs(newPath);
    if (fs1rv.fs === fs2rv.fs) {
      try {
        return fs1rv.fs.renameSync(fs1rv.path, fs2rv.path, cred);
      } catch (e) {
        this.standardizeError(this.standardizeError(e, fs1rv.path, oldPath), fs2rv.path, newPath);
        throw e;
      }
    }
    const data = node_fs_default.readFileSync(oldPath);
    node_fs_default.writeFileSync(newPath, data);
    return node_fs_default.unlinkSync(oldPath);
  }
  readdirSync(p, cred) {
    const fsInfo = this._getFs(p);
    let rv = null;
    if (fsInfo.fs !== this.rootFs) {
      try {
        rv = this.rootFs.readdirSync(p, cred);
      } catch (e) {
      }
    }
    try {
      const rv2 = fsInfo.fs.readdirSync(fsInfo.path, cred);
      if (rv === null) {
        return rv2;
      } else {
        return rv2.concat(rv.filter((val) => rv2.indexOf(val) === -1));
      }
    } catch (e) {
      if (rv === null) {
        throw this.standardizeError(e, fsInfo.path, p);
      } else {
        return rv;
      }
    }
  }
  readdir(p, cred, cb) {
    const fsInfo = this._getFs(p);
    fsInfo.fs.readdir(fsInfo.path, cred, (err2, files) => {
      if (fsInfo.fs !== this.rootFs) {
        try {
          const rv = this.rootFs.readdirSync(p, cred);
          if (files) {
            files = files.concat(rv.filter((val) => files.indexOf(val) === -1));
          } else {
            files = rv;
          }
        } catch (e) {
          if (err2) {
            return cb(this.standardizeError(err2, fsInfo.path, p));
          }
        }
      } else if (err2) {
        return cb(this.standardizeError(err2, fsInfo.path, p));
      }
      cb(null, files);
    });
  }
  realpathSync(p, cache, cred) {
    const fsInfo = this._getFs(p);
    try {
      const mountedPath = fsInfo.fs.realpathSync(fsInfo.path, {}, cred);
      return resolve(join(fsInfo.mountPoint, mountedPath));
    } catch (e) {
      throw this.standardizeError(e, fsInfo.path, p);
    }
  }
  realpath(p, cache, cred, cb) {
    const fsInfo = this._getFs(p);
    fsInfo.fs.realpath(fsInfo.path, {}, cred, (err2, rv) => {
      if (err2) {
        cb(this.standardizeError(err2, fsInfo.path, p));
      } else {
        cb(null, resolve(join(fsInfo.mountPoint, rv)));
      }
    });
  }
  rmdirSync(p, cred) {
    const fsInfo = this._getFs(p);
    if (this._containsMountPt(p)) {
      throw ApiError.ENOTEMPTY(p);
    } else {
      try {
        fsInfo.fs.rmdirSync(fsInfo.path, cred);
      } catch (e) {
        throw this.standardizeError(e, fsInfo.path, p);
      }
    }
  }
  rmdir(p, cred, cb) {
    const fsInfo = this._getFs(p);
    if (this._containsMountPt(p)) {
      cb(ApiError.ENOTEMPTY(p));
    } else {
      fsInfo.fs.rmdir(fsInfo.path, cred, (err2) => {
        cb(err2 ? this.standardizeError(err2, fsInfo.path, p) : null);
      });
    }
  }
  /**
   * Returns true if the given path contains a mount point.
   */
  _containsMountPt(p) {
    const mountPoints = this.mountList, len = mountPoints.length;
    for (let i = 0; i < len; i++) {
      const pt = mountPoints[i];
      if (pt.length >= p.length && pt.slice(0, p.length) === p) {
        return true;
      }
    }
    return false;
  }
};
var MountableFileSystem = _MountableFileSystem;
MountableFileSystem.Name = "MountableFileSystem";
MountableFileSystem.Options = {};
function defineFcn(name, isSync, numArgs) {
  if (isSync) {
    return function(...args) {
      const path = args[0];
      const rv = this._getFs(path);
      args[0] = rv.path;
      try {
        return rv.fs[name].apply(rv.fs, args);
      } catch (e) {
        this.standardizeError(e, rv.path, path);
        throw e;
      }
    };
  } else {
    return function(...args) {
      const path = args[0];
      const rv = this._getFs(path);
      args[0] = rv.path;
      if (typeof args[args.length - 1] === "function") {
        const cb = args[args.length - 1];
        args[args.length - 1] = (...args2) => {
          if (args2.length > 0 && args2[0] instanceof ApiError) {
            this.standardizeError(args2[0], rv.path, path);
          }
          cb.apply(null, args2);
        };
      }
      return rv.fs[name].apply(rv.fs, args);
    };
  }
}
var fsCmdMap = [
  // 1 arg functions
  ["exists", "unlink", "readlink"],
  // 2 arg functions
  ["stat", "mkdir", "truncate"],
  // 3 arg functions
  ["open", "readFile", "chmod", "utimes"],
  // 4 arg functions
  ["chown"],
  // 5 arg functions
  ["writeFile", "appendFile"]
];
for (let i = 0; i < fsCmdMap.length; i++) {
  const cmds = fsCmdMap[i];
  for (const fnName of cmds) {
    MountableFileSystem.prototype[fnName] = defineFcn(fnName, false, i + 1);
    MountableFileSystem.prototype[fnName + "Sync"] = defineFcn(fnName + "Sync", true, i + 1);
  }
}

// src/generic/mutex.ts
var Mutex = class {
  constructor() {
    this._locked = false;
    this._waiters = [];
  }
  lock(cb) {
    if (this._locked) {
      this._waiters.push(cb);
      return;
    }
    this._locked = true;
    cb();
  }
  unlock() {
    if (!this._locked) {
      throw new Error("unlock of a non-locked mutex");
    }
    const next = this._waiters.shift();
    if (next) {
      setImmediate_default(next);
      return;
    }
    this._locked = false;
  }
  tryLock() {
    if (this._locked) {
      return false;
    }
    this._locked = true;
    return true;
  }
  isLocked() {
    return this._locked;
  }
};

// src/generic/locked_fs.ts
var LockedFS = class {
  constructor(fs2) {
    this._fs = fs2;
    this._mu = new Mutex();
  }
  getName() {
    return "LockedFS<" + this._fs.getName() + ">";
  }
  getFSUnlocked() {
    return this._fs;
  }
  diskSpace(p, cb) {
    this._fs.diskSpace(p, cb);
  }
  isReadOnly() {
    return this._fs.isReadOnly();
  }
  supportsLinks() {
    return this._fs.supportsLinks();
  }
  supportsProps() {
    return this._fs.supportsProps();
  }
  supportsSynch() {
    return this._fs.supportsSynch();
  }
  rename(oldPath, newPath, cred, cb) {
    this._mu.lock(() => {
      this._fs.rename(oldPath, newPath, cred, (err2) => {
        this._mu.unlock();
        cb(err2);
      });
    });
  }
  renameSync(oldPath, newPath, cred) {
    if (this._mu.isLocked()) {
      throw new Error("invalid sync call");
    }
    return this._fs.renameSync(oldPath, newPath, cred);
  }
  stat(p, isLstat, cred, cb) {
    this._mu.lock(() => {
      this._fs.stat(p, isLstat, cred, (err2, stat) => {
        this._mu.unlock();
        cb(err2, stat);
      });
    });
  }
  statSync(p, isLstat, cred) {
    if (this._mu.isLocked()) {
      throw new Error("invalid sync call");
    }
    return this._fs.statSync(p, isLstat, cred);
  }
  access(p, mode, cred, cb) {
    this._mu.lock(() => {
      this._fs.access(p, mode, cred, (err2) => {
        this._mu.unlock();
        cb(err2);
      });
    });
  }
  accessSync(p, mode, cred) {
    if (this._mu.isLocked()) {
      throw new Error("invalid sync call");
    }
    return this._fs.accessSync(p, mode, cred);
  }
  open(p, flag, mode, cred, cb) {
    this._mu.lock(() => {
      this._fs.open(p, flag, mode, cred, (err2, fd) => {
        this._mu.unlock();
        cb(err2, fd);
      });
    });
  }
  openSync(p, flag, mode, cred) {
    if (this._mu.isLocked()) {
      throw new Error("invalid sync call");
    }
    return this._fs.openSync(p, flag, mode, cred);
  }
  unlink(p, cred, cb) {
    this._mu.lock(() => {
      this._fs.unlink(p, cred, (err2) => {
        this._mu.unlock();
        cb(err2);
      });
    });
  }
  unlinkSync(p, cred) {
    if (this._mu.isLocked()) {
      throw new Error("invalid sync call");
    }
    return this._fs.unlinkSync(p, cred);
  }
  rmdir(p, cred, cb) {
    this._mu.lock(() => {
      this._fs.rmdir(p, cred, (err2) => {
        this._mu.unlock();
        cb(err2);
      });
    });
  }
  rmdirSync(p, cred) {
    if (this._mu.isLocked()) {
      throw new Error("invalid sync call");
    }
    return this._fs.rmdirSync(p, cred);
  }
  mkdir(p, mode, cred, cb) {
    this._mu.lock(() => {
      this._fs.mkdir(p, mode, cred, (err2) => {
        this._mu.unlock();
        cb(err2);
      });
    });
  }
  mkdirSync(p, mode, cred) {
    if (this._mu.isLocked()) {
      throw new Error("invalid sync call");
    }
    return this._fs.mkdirSync(p, mode, cred);
  }
  readdir(p, cred, cb) {
    this._mu.lock(() => {
      this._fs.readdir(p, cred, (err2, files) => {
        this._mu.unlock();
        cb(err2, files);
      });
    });
  }
  readdirSync(p, cred) {
    if (this._mu.isLocked()) {
      throw new Error("invalid sync call");
    }
    return this._fs.readdirSync(p, cred);
  }
  exists(p, cred, cb) {
    this._mu.lock(() => {
      this._fs.exists(p, cred, (exists) => {
        this._mu.unlock();
        cb(exists);
      });
    });
  }
  existsSync(p, cred) {
    if (this._mu.isLocked()) {
      throw new Error("invalid sync call");
    }
    return this._fs.existsSync(p, cred);
  }
  realpath(p, cache, cred, cb) {
    this._mu.lock(() => {
      this._fs.realpath(p, cache, cred, (err2, resolvedPath) => {
        this._mu.unlock();
        cb(err2, resolvedPath);
      });
    });
  }
  realpathSync(p, cache, cred) {
    if (this._mu.isLocked()) {
      throw new Error("invalid sync call");
    }
    return this._fs.realpathSync(p, cache, cred);
  }
  truncate(p, len, cred, cb) {
    this._mu.lock(() => {
      this._fs.truncate(p, len, cred, (err2) => {
        this._mu.unlock();
        cb(err2);
      });
    });
  }
  truncateSync(p, len, cred) {
    if (this._mu.isLocked()) {
      throw new Error("invalid sync call");
    }
    return this._fs.truncateSync(p, len, cred);
  }
  readFile(fname, encoding, flag, cred, cb) {
    this._mu.lock(() => {
      this._fs.readFile(fname, encoding, flag, cred, (err2, data) => {
        this._mu.unlock();
        cb(err2, data);
      });
    });
  }
  readFileSync(fname, encoding, flag, cred) {
    if (this._mu.isLocked()) {
      throw new Error("invalid sync call");
    }
    return this._fs.readFileSync(fname, encoding, flag, cred);
  }
  writeFile(fname, data, encoding, flag, mode, cred, cb) {
    this._mu.lock(() => {
      this._fs.writeFile(fname, data, encoding, flag, mode, cred, (err2) => {
        this._mu.unlock();
        cb(err2);
      });
    });
  }
  writeFileSync(fname, data, encoding, flag, mode, cred) {
    if (this._mu.isLocked()) {
      throw new Error("invalid sync call");
    }
    return this._fs.writeFileSync(fname, data, encoding, flag, mode, cred);
  }
  appendFile(fname, data, encoding, flag, mode, cred, cb) {
    this._mu.lock(() => {
      this._fs.appendFile(fname, data, encoding, flag, mode, cred, (err2) => {
        this._mu.unlock();
        cb(err2);
      });
    });
  }
  appendFileSync(fname, data, encoding, flag, mode, cred) {
    if (this._mu.isLocked()) {
      throw new Error("invalid sync call");
    }
    return this._fs.appendFileSync(fname, data, encoding, flag, mode, cred);
  }
  chmod(p, isLchmod, mode, cred, cb) {
    this._mu.lock(() => {
      this._fs.chmod(p, isLchmod, mode, cred, (err2) => {
        this._mu.unlock();
        cb(err2);
      });
    });
  }
  chmodSync(p, isLchmod, mode, cred) {
    if (this._mu.isLocked()) {
      throw new Error("invalid sync call");
    }
    return this._fs.chmodSync(p, isLchmod, mode, cred);
  }
  chown(p, isLchown, new_uid, new_gid, cred, cb) {
    this._mu.lock(() => {
      this._fs.chown(p, isLchown, new_uid, new_gid, cred, (err2) => {
        this._mu.unlock();
        cb(err2);
      });
    });
  }
  chownSync(p, isLchown, new_uid, new_gid, cred) {
    if (this._mu.isLocked()) {
      throw new Error("invalid sync call");
    }
    return this._fs.chownSync(p, isLchown, new_uid, new_gid, cred);
  }
  utimes(p, atime, mtime, cred, cb) {
    this._mu.lock(() => {
      this._fs.utimes(p, atime, mtime, cred, (err2) => {
        this._mu.unlock();
        cb(err2);
      });
    });
  }
  utimesSync(p, atime, mtime, cred) {
    if (this._mu.isLocked()) {
      throw new Error("invalid sync call");
    }
    return this._fs.utimesSync(p, atime, mtime, cred);
  }
  link(srcpath, dstpath, cred, cb) {
    this._mu.lock(() => {
      this._fs.link(srcpath, dstpath, cred, (err2) => {
        this._mu.unlock();
        cb(err2);
      });
    });
  }
  linkSync(srcpath, dstpath, cred) {
    if (this._mu.isLocked()) {
      throw new Error("invalid sync call");
    }
    return this._fs.linkSync(srcpath, dstpath, cred);
  }
  symlink(srcpath, dstpath, type, cred, cb) {
    this._mu.lock(() => {
      this._fs.symlink(srcpath, dstpath, type, cred, (err2) => {
        this._mu.unlock();
        cb(err2);
      });
    });
  }
  symlinkSync(srcpath, dstpath, type, cred) {
    if (this._mu.isLocked()) {
      throw new Error("invalid sync call");
    }
    return this._fs.symlinkSync(srcpath, dstpath, type, cred);
  }
  readlink(p, cred, cb) {
    this._mu.lock(() => {
      this._fs.readlink(p, cred, (err2, linkString) => {
        this._mu.unlock();
        cb(err2, linkString);
      });
    });
  }
  readlinkSync(p, cred) {
    if (this._mu.isLocked()) {
      throw new Error("invalid sync call");
    }
    return this._fs.readlinkSync(p, cred);
  }
};

// src/backend/OverlayFS.ts
var deletionLogPath = "/.deletedFiles.log";
function makeModeWritable(mode) {
  return 146 | mode;
}
function getFlag(f) {
  return FileFlag.getFileFlag(f);
}
var OverlayFile = class extends PreloadFile {
  constructor(fs2, path, flag, stats, data) {
    super(fs2, path, flag, stats, data);
  }
  sync(cb) {
    if (!this.isDirty()) {
      cb(null);
      return;
    }
    this._fs._syncAsync(this, (err2) => {
      this.resetDirty();
      cb(err2);
    });
  }
  syncSync() {
    if (this.isDirty()) {
      this._fs._syncSync(this);
      this.resetDirty();
    }
  }
  close(cb) {
    this.sync(cb);
  }
  closeSync() {
    this.syncSync();
  }
};
var UnlockedOverlayFS = class extends BaseFileSystem {
  constructor(writable, readable) {
    super();
    this._isInitialized = false;
    this._initializeCallbacks = [];
    this._deletedFiles = {};
    this._deleteLog = "";
    // If 'true', we have scheduled a delete log update.
    this._deleteLogUpdatePending = false;
    // If 'true', a delete log update is needed after the scheduled delete log
    // update finishes.
    this._deleteLogUpdateNeeded = false;
    // If there was an error updating the delete log...
    this._deleteLogError = null;
    this._writable = writable;
    this._readable = readable;
    if (this._writable.isReadOnly()) {
      throw new ApiError(22 /* EINVAL */, "Writable file system must be writable.");
    }
  }
  static isAvailable() {
    return true;
  }
  getOverlayedFileSystems() {
    return {
      readable: this._readable,
      writable: this._writable
    };
  }
  _syncAsync(file, cb) {
    const stats = file.getStats();
    this.createParentDirectoriesAsync(file.getPath(), stats.getCred(0, 0), (err2) => {
      if (err2) {
        return cb(err2);
      }
      this._writable.writeFile(file.getPath(), file.getBuffer(), null, getFlag("w"), stats.mode, stats.getCred(0, 0), cb);
    });
  }
  _syncSync(file) {
    const stats = file.getStats();
    this.createParentDirectories(file.getPath(), stats.getCred(0, 0));
    this._writable.writeFileSync(file.getPath(), file.getBuffer(), null, getFlag("w"), stats.mode, stats.getCred(0, 0));
  }
  getName() {
    return OverlayFS.Name;
  }
  /**
   * **INTERNAL METHOD**
   *
   * Called once to load up metadata stored on the writable file system.
   */
  _initialize(cb) {
    const callbackArray = this._initializeCallbacks;
    const end = (e) => {
      this._isInitialized = !e;
      this._initializeCallbacks = [];
      callbackArray.forEach((cb2) => cb2(e));
    };
    if (this._isInitialized) {
      return cb();
    }
    callbackArray.push(cb);
    if (callbackArray.length !== 1) {
      return;
    }
    this._writable.readFile(deletionLogPath, "utf8", getFlag("r"), Cred.Root, (err2, data) => {
      if (err2) {
        if (err2.errno !== 2 /* ENOENT */) {
          return end(err2);
        }
      } else {
        this._deleteLog = data;
      }
      this._reparseDeletionLog();
      end();
    });
  }
  isReadOnly() {
    return false;
  }
  supportsSynch() {
    return this._readable.supportsSynch() && this._writable.supportsSynch();
  }
  supportsLinks() {
    return false;
  }
  supportsProps() {
    return this._readable.supportsProps() && this._writable.supportsProps();
  }
  getDeletionLog() {
    return this._deleteLog;
  }
  restoreDeletionLog(log, cred) {
    this._deleteLog = log;
    this._reparseDeletionLog();
    this.updateLog("", cred);
  }
  rename(oldPath, newPath, cred, cb) {
    if (!this.checkInitAsync(cb) || this.checkPathAsync(oldPath, cb) || this.checkPathAsync(newPath, cb)) {
      return;
    }
    if (oldPath === deletionLogPath || newPath === deletionLogPath) {
      return cb(ApiError.EPERM("Cannot rename deletion log."));
    }
    if (oldPath === newPath) {
      return cb();
    }
    this.stat(oldPath, false, cred, (oldErr, oldStats) => {
      if (oldErr) {
        return cb(oldErr);
      }
      return this.stat(newPath, false, cred, (newErr, newStats) => {
        const self2 = this;
        function copyDirContents(files) {
          const file = files.shift();
          if (!file) {
            return cb();
          }
          const oldFile = resolve(oldPath, file);
          const newFile = resolve(newPath, file);
          self2.rename(oldFile, newFile, cred, (err2) => {
            if (err2) {
              return cb(err2);
            }
            copyDirContents(files);
          });
        }
        let mode = 511;
        if (oldStats.isDirectory()) {
          if (newErr) {
            if (newErr.errno !== 2 /* ENOENT */) {
              return cb(newErr);
            }
            return this._writable.exists(oldPath, cred, (exists) => {
              if (exists) {
                return this._writable.rename(oldPath, newPath, cred, cb);
              }
              this._writable.mkdir(newPath, mode, cred, (mkdirErr) => {
                if (mkdirErr) {
                  return cb(mkdirErr);
                }
                this._readable.readdir(oldPath, cred, (err2, files) => {
                  if (err2) {
                    return cb();
                  }
                  copyDirContents(files);
                });
              });
            });
          }
          mode = newStats.mode;
          if (!newStats.isDirectory()) {
            return cb(ApiError.ENOTDIR(newPath));
          }
          this.readdir(newPath, cred, (readdirErr, files) => {
            if (files && files.length) {
              return cb(ApiError.ENOTEMPTY(newPath));
            }
            this._readable.readdir(oldPath, cred, (err2, files2) => {
              if (err2) {
                return cb();
              }
              copyDirContents(files2);
            });
          });
        }
        if (newStats && newStats.isDirectory()) {
          return cb(ApiError.EISDIR(newPath));
        }
        this.readFile(oldPath, null, getFlag("r"), cred, (err2, data) => {
          if (err2) {
            return cb(err2);
          }
          return this.writeFile(newPath, data, null, getFlag("w"), oldStats.mode, cred, (err3) => {
            if (err3) {
              return cb(err3);
            }
            return this.unlink(oldPath, cred, cb);
          });
        });
      });
    });
  }
  renameSync(oldPath, newPath, cred) {
    this.checkInitialized();
    this.checkPath(oldPath);
    this.checkPath(newPath);
    if (oldPath === deletionLogPath || newPath === deletionLogPath) {
      throw ApiError.EPERM("Cannot rename deletion log.");
    }
    const oldStats = this.statSync(oldPath, false, cred);
    if (oldStats.isDirectory()) {
      if (oldPath === newPath) {
        return;
      }
      let mode = 511;
      if (this.existsSync(newPath, cred)) {
        const stats = this.statSync(newPath, false, cred);
        mode = stats.mode;
        if (stats.isDirectory()) {
          if (this.readdirSync(newPath, cred).length > 0) {
            throw ApiError.ENOTEMPTY(newPath);
          }
        } else {
          throw ApiError.ENOTDIR(newPath);
        }
      }
      if (this._writable.existsSync(oldPath, cred)) {
        this._writable.renameSync(oldPath, newPath, cred);
      } else if (!this._writable.existsSync(newPath, cred)) {
        this._writable.mkdirSync(newPath, mode, cred);
      }
      if (this._readable.existsSync(oldPath, cred)) {
        this._readable.readdirSync(oldPath, cred).forEach((name) => {
          this.renameSync(resolve(oldPath, name), resolve(newPath, name), cred);
        });
      }
    } else {
      if (this.existsSync(newPath, cred) && this.statSync(newPath, false, cred).isDirectory()) {
        throw ApiError.EISDIR(newPath);
      }
      this.writeFileSync(newPath, this.readFileSync(oldPath, null, getFlag("r"), cred), null, getFlag("w"), oldStats.mode, cred);
    }
    if (oldPath !== newPath && this.existsSync(oldPath, cred)) {
      this.unlinkSync(oldPath, cred);
    }
  }
  stat(p, isLstat, cred, cb) {
    if (!this.checkInitAsync(cb)) {
      return;
    }
    this._writable.stat(p, isLstat, cred, (err2, stat) => {
      if (err2 && err2.errno === 2 /* ENOENT */) {
        if (this._deletedFiles[p]) {
          cb(ApiError.ENOENT(p));
        }
        this._readable.stat(p, isLstat, cred, (err3, stat2) => {
          if (stat2) {
            stat2 = Stats.clone(stat2);
            stat2.mode = makeModeWritable(stat2.mode);
          }
          cb(err3, stat2);
        });
      } else {
        cb(err2, stat);
      }
    });
  }
  statSync(p, isLstat, cred) {
    this.checkInitialized();
    try {
      return this._writable.statSync(p, isLstat, cred);
    } catch (e) {
      if (this._deletedFiles[p]) {
        throw ApiError.ENOENT(p);
      }
      const oldStat = Stats.clone(this._readable.statSync(p, isLstat, cred));
      oldStat.mode = makeModeWritable(oldStat.mode);
      return oldStat;
    }
  }
  open(p, flag, mode, cred, cb) {
    if (!this.checkInitAsync(cb) || this.checkPathAsync(p, cb)) {
      return;
    }
    this.stat(p, false, cred, (err2, stats) => {
      if (stats) {
        switch (flag.pathExistsAction()) {
          case 2 /* TRUNCATE_FILE */:
            return this.createParentDirectoriesAsync(p, cred, (err3) => {
              if (err3) {
                return cb(err3);
              }
              this._writable.open(p, flag, mode, cred, cb);
            });
          case 0 /* NOP */:
            return this._writable.exists(p, cred, (exists) => {
              if (exists) {
                this._writable.open(p, flag, mode, cred, cb);
              } else {
                stats = Stats.clone(stats);
                stats.mode = mode;
                this._readable.readFile(p, null, getFlag("r"), cred, (readFileErr, data) => {
                  if (readFileErr) {
                    return cb(readFileErr);
                  }
                  if (stats.size === -1) {
                    stats.size = data.length;
                  }
                  const f = new OverlayFile(this, p, flag, stats, data);
                  cb(null, f);
                });
              }
            });
          default:
            return cb(ApiError.EEXIST(p));
        }
      } else {
        switch (flag.pathNotExistsAction()) {
          case 3 /* CREATE_FILE */:
            return this.createParentDirectoriesAsync(p, cred, (err3) => {
              if (err3) {
                return cb(err3);
              }
              return this._writable.open(p, flag, mode, cred, cb);
            });
          default:
            return cb(ApiError.ENOENT(p));
        }
      }
    });
  }
  openSync(p, flag, mode, cred) {
    this.checkInitialized();
    this.checkPath(p);
    if (p === deletionLogPath) {
      throw ApiError.EPERM("Cannot open deletion log.");
    }
    if (this.existsSync(p, cred)) {
      switch (flag.pathExistsAction()) {
        case 2 /* TRUNCATE_FILE */:
          this.createParentDirectories(p, cred);
          return this._writable.openSync(p, flag, mode, cred);
        case 0 /* NOP */:
          if (this._writable.existsSync(p, cred)) {
            return this._writable.openSync(p, flag, mode, cred);
          } else {
            const buf = this._readable.readFileSync(p, null, getFlag("r"), cred);
            const stats = Stats.clone(this._readable.statSync(p, false, cred));
            stats.mode = mode;
            return new OverlayFile(this, p, flag, stats, buf);
          }
        default:
          throw ApiError.EEXIST(p);
      }
    } else {
      switch (flag.pathNotExistsAction()) {
        case 3 /* CREATE_FILE */:
          this.createParentDirectories(p, cred);
          return this._writable.openSync(p, flag, mode, cred);
        default:
          throw ApiError.ENOENT(p);
      }
    }
  }
  unlink(p, cred, cb) {
    if (!this.checkInitAsync(cb) || this.checkPathAsync(p, cb)) {
      return;
    }
    this.exists(p, cred, (exists) => {
      if (!exists) {
        return cb(ApiError.ENOENT(p));
      }
      this._writable.exists(p, cred, (writableExists) => {
        if (writableExists) {
          return this._writable.unlink(p, cred, (err2) => {
            if (err2) {
              return cb(err2);
            }
            this.exists(p, cred, (readableExists) => {
              if (readableExists) {
                this.deletePath(p, cred);
              }
              cb(null);
            });
          });
        } else {
          this.deletePath(p, cred);
          cb(null);
        }
      });
    });
  }
  unlinkSync(p, cred) {
    this.checkInitialized();
    this.checkPath(p);
    if (this.existsSync(p, cred)) {
      if (this._writable.existsSync(p, cred)) {
        this._writable.unlinkSync(p, cred);
      }
      if (this.existsSync(p, cred)) {
        this.deletePath(p, cred);
      }
    } else {
      throw ApiError.ENOENT(p);
    }
  }
  rmdir(p, cred, cb) {
    if (!this.checkInitAsync(cb)) {
      return;
    }
    const rmdirLower = () => {
      this.readdir(p, cred, (err2, files) => {
        if (err2) {
          return cb(err2);
        }
        if (files.length) {
          return cb(ApiError.ENOTEMPTY(p));
        }
        this.deletePath(p, cred);
        cb(null);
      });
    };
    this.exists(p, cred, (exists) => {
      if (!exists) {
        return cb(ApiError.ENOENT(p));
      }
      this._writable.exists(p, cred, (writableExists) => {
        if (writableExists) {
          this._writable.rmdir(p, cred, (err2) => {
            if (err2) {
              return cb(err2);
            }
            this._readable.exists(p, cred, (readableExists) => {
              if (readableExists) {
                rmdirLower();
              } else {
                cb();
              }
            });
          });
        } else {
          rmdirLower();
        }
      });
    });
  }
  rmdirSync(p, cred) {
    this.checkInitialized();
    if (this.existsSync(p, cred)) {
      if (this._writable.existsSync(p, cred)) {
        this._writable.rmdirSync(p, cred);
      }
      if (this.existsSync(p, cred)) {
        if (this.readdirSync(p, cred).length > 0) {
          throw ApiError.ENOTEMPTY(p);
        } else {
          this.deletePath(p, cred);
        }
      }
    } else {
      throw ApiError.ENOENT(p);
    }
  }
  mkdir(p, mode, cred, cb) {
    if (!this.checkInitAsync(cb)) {
      return;
    }
    this.exists(p, cred, (exists) => {
      if (exists) {
        return cb(ApiError.EEXIST(p));
      }
      this.createParentDirectoriesAsync(p, cred, (err2) => {
        if (err2) {
          return cb(err2);
        }
        this._writable.mkdir(p, mode, cred, cb);
      });
    });
  }
  mkdirSync(p, mode, cred) {
    this.checkInitialized();
    if (this.existsSync(p, cred)) {
      throw ApiError.EEXIST(p);
    } else {
      this.createParentDirectories(p, cred);
      this._writable.mkdirSync(p, mode, cred);
    }
  }
  readdir(p, cred, cb) {
    if (!this.checkInitAsync(cb)) {
      return;
    }
    this.stat(p, false, cred, (err2, dirStats) => {
      if (err2) {
        return cb(err2);
      }
      if (!dirStats.isDirectory()) {
        return cb(ApiError.ENOTDIR(p));
      }
      this._writable.readdir(p, cred, (err3, wFiles) => {
        if (err3 && err3.code !== "ENOENT") {
          return cb(err3);
        } else if (err3 || !wFiles) {
          wFiles = [];
        }
        this._readable.readdir(p, cred, (err4, rFiles) => {
          if (err4 || !rFiles) {
            rFiles = [];
          }
          const seenMap = {};
          const filtered = wFiles.concat(rFiles.filter((fPath) => !this._deletedFiles[`${p}/${fPath}`])).filter((fPath) => {
            const result = !seenMap[fPath];
            seenMap[fPath] = true;
            return result;
          });
          cb(null, filtered);
        });
      });
    });
  }
  readdirSync(p, cred) {
    this.checkInitialized();
    const dirStats = this.statSync(p, false, cred);
    if (!dirStats.isDirectory()) {
      throw ApiError.ENOTDIR(p);
    }
    let contents = [];
    try {
      contents = contents.concat(this._writable.readdirSync(p, cred));
    } catch (e) {
    }
    try {
      contents = contents.concat(this._readable.readdirSync(p, cred).filter((fPath) => !this._deletedFiles[`${p}/${fPath}`]));
    } catch (e) {
    }
    const seenMap = {};
    return contents.filter((fileP) => {
      const result = !seenMap[fileP];
      seenMap[fileP] = true;
      return result;
    });
  }
  exists(p, cred, cb) {
    this.checkInitialized();
    this._writable.exists(p, cred, (existsWritable) => {
      if (existsWritable) {
        return cb(true);
      }
      this._readable.exists(p, cred, (existsReadable) => {
        cb(existsReadable && this._deletedFiles[p] !== true);
      });
    });
  }
  existsSync(p, cred) {
    this.checkInitialized();
    return this._writable.existsSync(p, cred) || this._readable.existsSync(p, cred) && this._deletedFiles[p] !== true;
  }
  chmod(p, isLchmod, mode, cred, cb) {
    if (!this.checkInitAsync(cb)) {
      return;
    }
    this.operateOnWritableAsync(p, cred, (err2) => {
      if (err2) {
        return cb(err2);
      } else {
        this._writable.chmod(p, isLchmod, mode, cred, cb);
      }
    });
  }
  chmodSync(p, isLchmod, mode, cred) {
    this.checkInitialized();
    this.operateOnWritable(p, cred, () => {
      this._writable.chmodSync(p, isLchmod, mode, cred);
    });
  }
  chown(p, isLchmod, new_uid, new_gid, cred, cb) {
    if (!this.checkInitAsync(cb)) {
      return;
    }
    this.operateOnWritableAsync(p, cred, (err2) => {
      if (err2) {
        return cb(err2);
      } else {
        this._writable.chown(p, isLchmod, new_uid, new_gid, cred, cb);
      }
    });
  }
  chownSync(p, isLchown, new_uid, new_gid, cred) {
    this.checkInitialized();
    this.operateOnWritable(p, cred, () => {
      this._writable.chownSync(p, isLchown, new_uid, new_gid, cred);
    });
  }
  utimes(p, atime, mtime, cred, cb) {
    if (!this.checkInitAsync(cb)) {
      return;
    }
    this.operateOnWritableAsync(p, cred, (err2) => {
      if (err2) {
        return cb(err2);
      } else {
        this._writable.utimes(p, atime, mtime, cred, cb);
      }
    });
  }
  utimesSync(p, atime, mtime, cred) {
    this.checkInitialized();
    this.operateOnWritable(p, cred, () => {
      this._writable.utimesSync(p, atime, mtime, cred);
    });
  }
  deletePath(p, cred) {
    this._deletedFiles[p] = true;
    this.updateLog(`d${p}
`, cred);
  }
  updateLog(addition, cred) {
    this._deleteLog += addition;
    if (this._deleteLogUpdatePending) {
      this._deleteLogUpdateNeeded = true;
    } else {
      this._deleteLogUpdatePending = true;
      this._writable.writeFile(deletionLogPath, this._deleteLog, "utf8", FileFlag.getFileFlag("w"), 420, cred, (e) => {
        this._deleteLogUpdatePending = false;
        if (e) {
          this._deleteLogError = e;
        } else if (this._deleteLogUpdateNeeded) {
          this._deleteLogUpdateNeeded = false;
          this.updateLog("", cred);
        }
      });
    }
  }
  _reparseDeletionLog() {
    this._deletedFiles = {};
    this._deleteLog.split("\n").forEach((path) => {
      this._deletedFiles[path.slice(1)] = path.slice(0, 1) === "d";
    });
  }
  checkInitialized() {
    if (!this._isInitialized) {
      throw new ApiError(1 /* EPERM */, "OverlayFS is not initialized. Please initialize OverlayFS using its initialize() method before using it.");
    } else if (this._deleteLogError !== null) {
      const e = this._deleteLogError;
      this._deleteLogError = null;
      throw e;
    }
  }
  checkInitAsync(cb) {
    if (!this._isInitialized) {
      cb(new ApiError(1 /* EPERM */, "OverlayFS is not initialized. Please initialize OverlayFS using its initialize() method before using it."));
      return false;
    } else if (this._deleteLogError !== null) {
      const e = this._deleteLogError;
      this._deleteLogError = null;
      cb(e);
      return false;
    }
    return true;
  }
  checkPath(p) {
    if (p === deletionLogPath) {
      throw ApiError.EPERM(p);
    }
  }
  checkPathAsync(p, cb) {
    if (p === deletionLogPath) {
      cb(ApiError.EPERM(p));
      return true;
    }
    return false;
  }
  createParentDirectoriesAsync(p, cred, cb) {
    let parent = dirname(p);
    const toCreate = [];
    const self2 = this;
    this._writable.stat(parent, false, cred, statDone);
    function statDone(err2, stat) {
      if (err2) {
        if (parent === "/") {
          cb(new ApiError(16 /* EBUSY */, "Invariant failed: root does not exist!"));
        } else {
          toCreate.push(parent);
          parent = dirname(parent);
          self2._writable.stat(parent, false, cred, statDone);
        }
      } else {
        createParents();
      }
    }
    function createParents() {
      if (!toCreate.length) {
        return cb();
      }
      const dir = toCreate.pop();
      self2._readable.stat(dir, false, cred, (err2, stats) => {
        if (!stats) {
          return cb();
        }
        self2._writable.mkdir(dir, stats.mode, cred, (err3) => {
          if (err3) {
            return cb(err3);
          }
          createParents();
        });
      });
    }
  }
  /**
   * With the given path, create the needed parent directories on the writable storage
   * should they not exist. Use modes from the read-only storage.
   */
  createParentDirectories(p, cred) {
    let parent = dirname(p), toCreate = [];
    while (!this._writable.existsSync(parent, cred)) {
      toCreate.push(parent);
      parent = dirname(parent);
    }
    toCreate = toCreate.reverse();
    toCreate.forEach((p2) => {
      this._writable.mkdirSync(p2, this.statSync(p2, false, cred).mode, cred);
    });
  }
  /**
   * Helper function:
   * - Ensures p is on writable before proceeding. Throws an error if it doesn't exist.
   * - Calls f to perform operation on writable.
   */
  operateOnWritable(p, cred, f) {
    if (this.existsSync(p, cred)) {
      if (!this._writable.existsSync(p, cred)) {
        this.copyToWritable(p, cred);
      }
      f();
    } else {
      throw ApiError.ENOENT(p);
    }
  }
  operateOnWritableAsync(p, cred, cb) {
    this.exists(p, cred, (exists) => {
      if (!exists) {
        return cb(ApiError.ENOENT(p));
      }
      this._writable.exists(p, cred, (existsWritable) => {
        if (existsWritable) {
          cb();
        } else {
          return this.copyToWritableAsync(p, cred, cb);
        }
      });
    });
  }
  /**
   * Copy from readable to writable storage.
   * PRECONDITION: File does not exist on writable storage.
   */
  copyToWritable(p, cred) {
    const pStats = this.statSync(p, false, cred);
    if (pStats.isDirectory()) {
      this._writable.mkdirSync(p, pStats.mode, cred);
    } else {
      this.writeFileSync(p, this._readable.readFileSync(p, null, getFlag("r"), cred), null, getFlag("w"), this.statSync(p, false, cred).mode, cred);
    }
  }
  copyToWritableAsync(p, cred, cb) {
    this.stat(p, false, cred, (err2, pStats) => {
      if (err2) {
        return cb(err2);
      }
      if (pStats.isDirectory()) {
        return this._writable.mkdir(p, pStats.mode, cred, cb);
      }
      this._readable.readFile(p, null, getFlag("r"), cred, (err3, data) => {
        if (err3) {
          return cb(err3);
        }
        this.writeFile(p, data, null, getFlag("w"), pStats.mode, cred, cb);
      });
    });
  }
};
var _OverlayFS = class extends LockedFS {
  /**
   * Constructs and initializes an OverlayFS instance with the given options.
   */
  static Create(opts, cb) {
    try {
      const fs2 = new _OverlayFS(opts.writable, opts.readable);
      fs2._initialize((e) => {
        cb(e, fs2);
      });
    } catch (e) {
      cb(e);
    }
  }
  static CreateAsync(opts) {
    return new Promise((resolve2, reject) => {
      this.Create(opts, (error, fs2) => {
        if (error || !fs2) {
          reject(error);
        } else {
          resolve2(fs2);
        }
      });
    });
  }
  static isAvailable() {
    return UnlockedOverlayFS.isAvailable();
  }
  /**
   * @param writable The file system to write modified files to.
   * @param readable The file system that initially populates this file system.
   */
  constructor(writable, readable) {
    super(new UnlockedOverlayFS(writable, readable));
  }
  getOverlayedFileSystems() {
    return super.getFSUnlocked().getOverlayedFileSystems();
  }
  unwrap() {
    return super.getFSUnlocked();
  }
  _initialize(cb) {
    super.getFSUnlocked()._initialize(cb);
  }
};
var OverlayFS = _OverlayFS;
OverlayFS.Name = "OverlayFS";
OverlayFS.Options = {
  writable: {
    type: "object",
    description: "The file system to write modified files to."
  },
  readable: {
    type: "object",
    description: "The file system that initially populates this file system."
  }
};

// src/backend/WorkerFS.ts
var CallbackArgumentConverter = class {
  constructor() {
    this._callbacks = {};
    this._nextId = 0;
  }
  toRemoteArg(cb) {
    const id = this._nextId++;
    this._callbacks[id] = cb;
    return {
      type: 0 /* CB */,
      id
    };
  }
  toLocalArg(id) {
    const cb = this._callbacks[id];
    delete this._callbacks[id];
    return cb;
  }
};
var FileDescriptorArgumentConverter = class {
  constructor() {
    this._fileDescriptors = {};
    this._nextId = 0;
  }
  toRemoteArg(fd, p, flag, cb) {
    const id = this._nextId++;
    let data;
    let stat;
    this._fileDescriptors[id] = fd;
    fd.stat((err2, stats) => {
      if (err2) {
        cb(err2);
      } else {
        stat = bufferToTransferrableObject(stats.toBuffer());
        if (flag.isReadable()) {
          fd.read(Buffer2.alloc(stats.size), 0, stats.size, 0, (err3, bytesRead, buff) => {
            if (err3) {
              cb(err3);
            } else {
              data = bufferToTransferrableObject(buff);
              cb(null, {
                type: 1 /* FD */,
                id,
                data,
                stat,
                path: p,
                flag: flag.getFlagString()
              });
            }
          });
        } else {
          cb(null, {
            type: 1 /* FD */,
            id,
            data: new ArrayBuffer(0),
            stat,
            path: p,
            flag: flag.getFlagString()
          });
        }
      }
    });
  }
  applyFdAPIRequest(request, cb) {
    const fdArg = request.args[0];
    this._applyFdChanges(fdArg, (err2, fd) => {
      if (err2) {
        cb(err2);
      } else {
        fd[request.method]((e) => {
          if (request.method === "close") {
            delete this._fileDescriptors[fdArg.id];
          }
          cb(e);
        });
      }
    });
  }
  _applyFdChanges(remoteFd, cb) {
    const fd = this._fileDescriptors[remoteFd.id], data = transferrableObjectToBuffer(remoteFd.data), remoteStats = Stats.fromBuffer(transferrableObjectToBuffer(remoteFd.stat));
    const flag = FileFlag.getFileFlag(remoteFd.flag);
    if (flag.isWriteable()) {
      fd.write(data, 0, data.length, flag.isAppendable() ? fd.getPos() : 0, (e) => {
        function applyStatChanges() {
          fd.stat((e2, stats) => {
            if (e2) {
              cb(e2);
            } else {
              if (stats.mode !== remoteStats.mode) {
                fd.chmod(remoteStats.mode, (e3) => {
                  cb(e3, fd);
                });
              } else {
                cb(e2, fd);
              }
            }
          });
        }
        if (e) {
          cb(e);
        } else {
          if (!flag.isAppendable()) {
            fd.truncate(data.length, () => {
              applyStatChanges();
            });
          } else {
            applyStatChanges();
          }
        }
      });
    } else {
      cb(null, fd);
    }
  }
};
function apiErrorLocal2Remote(e) {
  return {
    type: 2 /* API_ERROR */,
    errorData: bufferToTransferrableObject(e.writeToBuffer())
  };
}
function apiErrorRemote2Local(e) {
  return ApiError.fromBuffer(transferrableObjectToBuffer(e.errorData));
}
function errorLocal2Remote(e) {
  return {
    type: 7 /* ERROR */,
    name: e.name,
    message: e.message,
    stack: e.stack
  };
}
function errorRemote2Local(e) {
  let cnstr = globalThis[e.name];
  if (typeof cnstr !== "function") {
    cnstr = Error;
  }
  const err2 = new cnstr(e.message);
  err2.stack = e.stack;
  return err2;
}
function statsLocal2Remote(stats) {
  return {
    type: 3 /* STATS */,
    statsData: bufferToTransferrableObject(stats.toBuffer())
  };
}
function statsRemote2Local(stats) {
  return Stats.fromBuffer(transferrableObjectToBuffer(stats.statsData));
}
function fileFlagLocal2Remote(flag) {
  return {
    type: 5 /* FILEFLAG */,
    flagStr: flag.getFlagString()
  };
}
function fileFlagRemote2Local(remoteFlag) {
  return FileFlag.getFileFlag(remoteFlag.flagStr);
}
function bufferToTransferrableObject(buff) {
  return buffer2ArrayBuffer(buff);
}
function transferrableObjectToBuffer(buff) {
  return arrayBuffer2Buffer(buff);
}
function bufferLocal2Remote(buff) {
  return {
    type: 6 /* BUFFER */,
    data: bufferToTransferrableObject(buff)
  };
}
function bufferRemote2Local(buffArg) {
  return transferrableObjectToBuffer(buffArg.data);
}
function isAPIRequest(data) {
  return data && typeof data === "object" && Object.prototype.hasOwnProperty.call(data, "browserfsMessage") && data["browserfsMessage"];
}
function isAPIResponse(data) {
  return data && typeof data === "object" && Object.prototype.hasOwnProperty.call(data, "browserfsMessage") && data["browserfsMessage"];
}
var WorkerFile = class extends PreloadFile {
  constructor(_fs, _path, _flag, _stat, remoteFdId, contents) {
    super(_fs, _path, _flag, _stat, contents);
    this._remoteFdId = remoteFdId;
  }
  getRemoteFdId() {
    return this._remoteFdId;
  }
  /**
   * @hidden
   */
  toRemoteArg() {
    return {
      type: 1 /* FD */,
      id: this._remoteFdId,
      data: bufferToTransferrableObject(this.getBuffer()),
      stat: bufferToTransferrableObject(this.getStats().toBuffer()),
      path: this.getPath(),
      flag: this.getFlag().getFlagString()
    };
  }
  sync(cb) {
    this._syncClose("sync", cb);
  }
  close(cb) {
    this._syncClose("close", cb);
  }
  _syncClose(type, cb) {
    if (this.isDirty()) {
      this._fs.syncClose(type, this, (e) => {
        if (!e) {
          this.resetDirty();
        }
        cb(e);
      });
    } else {
      cb();
    }
  }
};
var _WorkerFS = class extends BaseFileSystem {
  /**
   * Constructs a new WorkerFS instance that connects with BrowserFS running on
   * the specified worker.
   */
  constructor(worker) {
    super();
    this._callbackConverter = new CallbackArgumentConverter();
    this._isInitialized = false;
    this._isReadOnly = false;
    this._supportLinks = false;
    this._supportProps = false;
    this._worker = worker;
    this._worker.addEventListener("message", (e) => {
      const resp = e.data;
      if (isAPIResponse(resp)) {
        let i;
        const args = resp.args;
        const fixedArgs = new Array(args.length);
        for (i = 0; i < fixedArgs.length; i++) {
          fixedArgs[i] = this._argRemote2Local(args[i]);
        }
        this._callbackConverter.toLocalArg(resp.cbId).apply(null, fixedArgs);
      }
    });
  }
  static Create(opts, cb) {
    const fs2 = new _WorkerFS(opts.worker);
    fs2._initialize(() => {
      cb(null, fs2);
    });
  }
  static CreateAsync(opts) {
    return new Promise((resolve2, reject) => {
      this.Create(opts, (error, fs2) => {
        if (error || !fs2) {
          reject(error);
        } else {
          resolve2(fs2);
        }
      });
    });
  }
  static isAvailable() {
    return typeof importScripts !== "undefined" || typeof Worker !== "undefined";
  }
  /**
   * Attaches a listener to the remote worker for file system requests.
   */
  static attachRemoteListener(worker) {
    const fdConverter = new FileDescriptorArgumentConverter();
    function argLocal2Remote(arg, requestArgs, cb) {
      switch (typeof arg) {
        case "object":
          if (arg instanceof Stats) {
            cb(null, statsLocal2Remote(arg));
          } else if (arg instanceof ApiError) {
            cb(null, apiErrorLocal2Remote(arg));
          } else if (arg instanceof BaseFile) {
            cb(null, fdConverter.toRemoteArg(arg, requestArgs[0], requestArgs[1], cb));
          } else if (arg instanceof FileFlag) {
            cb(null, fileFlagLocal2Remote(arg));
          } else if (arg instanceof Buffer2) {
            cb(null, bufferLocal2Remote(arg));
          } else if (arg instanceof Error) {
            cb(null, errorLocal2Remote(arg));
          } else {
            cb(null, arg);
          }
          break;
        default:
          cb(null, arg);
          break;
      }
    }
    function argRemote2Local(arg, fixedRequestArgs) {
      if (!arg) {
        return arg;
      }
      switch (typeof arg) {
        case "object":
          if (typeof arg["type"] === "number") {
            const specialArg = arg;
            switch (specialArg.type) {
              case 0 /* CB */:
                const cbId = arg.id;
                return function() {
                  let i;
                  const fixedArgs = new Array(arguments.length);
                  let message, countdown = arguments.length;
                  function abortAndSendError(err2) {
                    if (countdown > 0) {
                      countdown = -1;
                      message = {
                        browserfsMessage: true,
                        cbId,
                        args: [apiErrorLocal2Remote(err2)]
                      };
                      worker.postMessage(message);
                    }
                  }
                  for (i = 0; i < arguments.length; i++) {
                    ((i2, arg2) => {
                      argLocal2Remote(arg2, fixedRequestArgs, (err2, fixedArg) => {
                        fixedArgs[i2] = fixedArg;
                        if (err2) {
                          abortAndSendError(err2);
                        } else if (--countdown === 0) {
                          message = {
                            browserfsMessage: true,
                            cbId,
                            args: fixedArgs
                          };
                          worker.postMessage(message);
                        }
                      });
                    })(i, arguments[i]);
                  }
                  if (arguments.length === 0) {
                    message = {
                      browserfsMessage: true,
                      cbId,
                      args: fixedArgs
                    };
                    worker.postMessage(message);
                  }
                };
              case 2 /* API_ERROR */:
                return apiErrorRemote2Local(specialArg);
              case 3 /* STATS */:
                return statsRemote2Local(specialArg);
              case 5 /* FILEFLAG */:
                return fileFlagRemote2Local(specialArg);
              case 6 /* BUFFER */:
                return bufferRemote2Local(specialArg);
              case 7 /* ERROR */:
                return errorRemote2Local(specialArg);
              default:
                return arg;
            }
          } else {
            return arg;
          }
        default:
          return arg;
      }
    }
    worker.addEventListener("message", (e) => {
      const request = e.data;
      if (isAPIRequest(request)) {
        const args = request.args, fixedArgs = new Array(args.length);
        switch (request.method) {
          case "close":
          case "sync":
            (() => {
              const remoteCb = args[1];
              fdConverter.applyFdAPIRequest(request, (err2) => {
                const response = {
                  browserfsMessage: true,
                  cbId: remoteCb.id,
                  args: err2 ? [apiErrorLocal2Remote(err2)] : []
                };
                worker.postMessage(response);
              });
            })();
            break;
          case "probe":
            (() => {
              const rootFs = node_fs_default.getRootFS(), remoteCb = args[1], probeResponse = {
                type: 4 /* PROBE */,
                isReadOnly: rootFs.isReadOnly(),
                supportsLinks: rootFs.supportsLinks(),
                supportsProps: rootFs.supportsProps()
              }, response = {
                browserfsMessage: true,
                cbId: remoteCb.id,
                args: [probeResponse]
              };
              worker.postMessage(response);
            })();
            break;
          default:
            for (let i = 0; i < args.length; i++) {
              fixedArgs[i] = argRemote2Local(args[i], fixedArgs);
            }
            const rootFS = node_fs_default.getRootFS();
            rootFS[request.method].apply(rootFS, fixedArgs);
            break;
        }
      }
    });
  }
  getName() {
    return _WorkerFS.Name;
  }
  isReadOnly() {
    return this._isReadOnly;
  }
  supportsSynch() {
    return false;
  }
  supportsLinks() {
    return this._supportLinks;
  }
  supportsProps() {
    return this._supportProps;
  }
  rename(oldPath, newPath, cred, cb) {
    this._rpc("rename", arguments);
  }
  stat(p, isLstat, cred, cb) {
    this._rpc("stat", arguments);
  }
  open(p, flag, mode, cred, cb) {
    this._rpc("open", arguments);
  }
  unlink(p, cred, cb) {
    this._rpc("unlink", arguments);
  }
  rmdir(p, cred, cb) {
    this._rpc("rmdir", arguments);
  }
  mkdir(p, mode, cred, cb) {
    this._rpc("mkdir", arguments);
  }
  readdir(p, cred, cb) {
    this._rpc("readdir", arguments);
  }
  exists(p, cred, cb) {
    this._rpc("exists", arguments);
  }
  realpath(p, cache, cred, cb) {
    this._rpc("realpath", arguments);
  }
  truncate(p, len, cred, cb) {
    this._rpc("truncate", arguments);
  }
  readFile(fname, encoding, flag, cred, cb) {
    this._rpc("readFile", arguments);
  }
  writeFile(fname, data, encoding, flag, mode, cred, cb) {
    this._rpc("writeFile", arguments);
  }
  appendFile(fname, data, encoding, flag, mode, cred, cb) {
    this._rpc("appendFile", arguments);
  }
  chmod(p, isLchmod, mode, cred, cb) {
    this._rpc("chmod", arguments);
  }
  chown(p, isLchown, new_uid, new_gid, cred, cb) {
    this._rpc("chown", arguments);
  }
  utimes(p, atime, mtime, cred, cb) {
    this._rpc("utimes", arguments);
  }
  link(srcpath, dstpath, cred, cb) {
    this._rpc("link", arguments);
  }
  symlink(srcpath, dstpath, type, cred, cb) {
    this._rpc("symlink", arguments);
  }
  readlink(p, cred, cb) {
    this._rpc("readlink", arguments);
  }
  syncClose(method, fd, cb) {
    this._worker.postMessage({
      browserfsMessage: true,
      method,
      args: [fd.toRemoteArg(), this._callbackConverter.toRemoteArg(cb)]
    });
  }
  /**
   * Called once both local and remote sides are set up.
   */
  _initialize(cb) {
    if (!this._isInitialized) {
      const message = {
        browserfsMessage: true,
        method: "probe",
        args: [
          this._argLocal2Remote(emptyBuffer()),
          this._callbackConverter.toRemoteArg((probeResponse) => {
            this._isInitialized = true;
            this._isReadOnly = probeResponse.isReadOnly;
            this._supportLinks = probeResponse.supportsLinks;
            this._supportProps = probeResponse.supportsProps;
            cb();
          })
        ]
      };
      this._worker.postMessage(message);
    } else {
      cb();
    }
  }
  _argRemote2Local(arg) {
    if (!arg) {
      return arg;
    }
    switch (typeof arg) {
      case "object":
        if (typeof arg["type"] === "number") {
          const specialArg = arg;
          switch (specialArg.type) {
            case 2 /* API_ERROR */:
              return apiErrorRemote2Local(specialArg);
            case 1 /* FD */:
              const fdArg = specialArg;
              return new WorkerFile(
                this,
                fdArg.path,
                FileFlag.getFileFlag(fdArg.flag),
                Stats.fromBuffer(transferrableObjectToBuffer(fdArg.stat)),
                fdArg.id,
                transferrableObjectToBuffer(fdArg.data)
              );
            case 3 /* STATS */:
              return statsRemote2Local(specialArg);
            case 5 /* FILEFLAG */:
              return fileFlagRemote2Local(specialArg);
            case 6 /* BUFFER */:
              return bufferRemote2Local(specialArg);
            case 7 /* ERROR */:
              return errorRemote2Local(specialArg);
            default:
              return arg;
          }
        } else {
          return arg;
        }
      default:
        return arg;
    }
  }
  _rpc(methodName, args) {
    const fixedArgs = new Array(args.length);
    for (let i = 0; i < args.length; i++) {
      fixedArgs[i] = this._argLocal2Remote(args[i]);
    }
    const message = {
      browserfsMessage: true,
      method: methodName,
      args: fixedArgs
    };
    this._worker.postMessage(message);
  }
  /**
   * Converts a local argument into a remote argument. Public so WorkerFile objects can call it.
   */
  _argLocal2Remote(arg) {
    if (!arg) {
      return arg;
    }
    switch (typeof arg) {
      case "object":
        if (arg instanceof Stats) {
          return statsLocal2Remote(arg);
        } else if (arg instanceof ApiError) {
          return apiErrorLocal2Remote(arg);
        } else if (arg instanceof WorkerFile) {
          return arg.toRemoteArg();
        } else if (arg instanceof FileFlag) {
          return fileFlagLocal2Remote(arg);
        } else if (arg instanceof Buffer2) {
          return bufferLocal2Remote(arg);
        } else if (arg instanceof Error) {
          return errorLocal2Remote(arg);
        } else {
          return "Unknown argument";
        }
      case "function":
        return this._callbackConverter.toRemoteArg(arg);
      default:
        return arg;
    }
  }
};
var WorkerFS = _WorkerFS;
WorkerFS.Name = "WorkerFS";
WorkerFS.Options = {
  worker: {
    type: "object",
    description: "The target worker that you want to connect to, or the current worker if in a worker context.",
    validator: function(v, cb) {
      if (v["postMessage"]) {
        cb();
      } else {
        cb(new ApiError(22 /* EINVAL */, `option must be a Web Worker instance.`));
      }
    }
  }
};

// src/generic/xhr.ts
var xhrIsAvailable = typeof XMLHttpRequest !== "undefined" && XMLHttpRequest !== null;
function asyncDownloadFileModern(p, type, cb) {
  const req = new XMLHttpRequest();
  req.open("GET", p, true);
  let jsonSupported = true;
  switch (type) {
    case "buffer":
      req.responseType = "arraybuffer";
      break;
    case "json":
      try {
        req.responseType = "json";
        jsonSupported = req.responseType === "json";
      } catch (e) {
        jsonSupported = false;
      }
      break;
    default:
      return cb(new ApiError(22 /* EINVAL */, "Invalid download type: " + type));
  }
  req.onreadystatechange = function(e) {
    if (req.readyState === 4) {
      if (req.status === 200) {
        switch (type) {
          case "buffer":
            return cb(null, req.response ? Buffer2.from(req.response) : emptyBuffer());
          case "json":
            if (jsonSupported) {
              return cb(null, req.response);
            } else {
              return cb(null, JSON.parse(req.responseText));
            }
        }
      } else {
        return cb(new ApiError(5 /* EIO */, `XHR error: response returned code ${req.status}`));
      }
    }
  };
  req.send();
}
function syncDownloadFileModern(p, type) {
  const req = new XMLHttpRequest();
  req.open("GET", p, false);
  let data = null;
  let err2 = null;
  req.overrideMimeType("text/plain; charset=x-user-defined");
  req.onreadystatechange = function(e) {
    if (req.readyState === 4) {
      if (req.status === 200) {
        switch (type) {
          case "buffer":
            const text = req.responseText;
            data = Buffer2.alloc(text.length);
            for (let i = 0; i < text.length; i++) {
              data[i] = text.charCodeAt(i);
            }
            return;
          case "json":
            data = JSON.parse(req.responseText);
            return;
        }
      } else {
        err2 = new ApiError(5 /* EIO */, `XHR error: response returned code ${req.status}`);
        return;
      }
    }
  };
  req.send();
  if (err2) {
    throw err2;
  }
  return data;
}
function syncDownloadFileIE10(p, type) {
  const req = new XMLHttpRequest();
  req.open("GET", p, false);
  switch (type) {
    case "buffer":
      req.responseType = "arraybuffer";
      break;
    case "json":
      break;
    default:
      throw new ApiError(22 /* EINVAL */, "Invalid download type: " + type);
  }
  let data;
  let err2;
  req.onreadystatechange = function(e) {
    if (req.readyState === 4) {
      if (req.status === 200) {
        switch (type) {
          case "buffer":
            data = Buffer2.from(req.response);
            break;
          case "json":
            data = JSON.parse(req.response);
            break;
        }
      } else {
        err2 = new ApiError(5 /* EIO */, `XHR error: response returned code ${req.status}`);
      }
    }
  };
  req.send();
  if (err2) {
    throw err2;
  }
  return data;
}
function getFileSize(async, p, cb) {
  const req = new XMLHttpRequest();
  req.open("HEAD", p, async);
  req.onreadystatechange = function(e) {
    if (req.readyState === 4) {
      if (req.status === 200) {
        try {
          return cb(null, parseInt(req.getResponseHeader("Content-Length") || "-1", 10));
        } catch (e2) {
          return cb(new ApiError(5 /* EIO */, "XHR HEAD error: Could not read content-length."));
        }
      } else {
        return cb(new ApiError(5 /* EIO */, `XHR HEAD error: response returned code ${req.status}`));
      }
    }
  };
  req.send();
}
var asyncDownloadFile = asyncDownloadFileModern;
var syncDownloadFile = isIE && typeof Blob !== "undefined" ? syncDownloadFileIE10 : syncDownloadFileModern;
function getFileSizeSync(p) {
  let rv = -1;
  getFileSize(false, p, function(err2, size) {
    if (err2) {
      throw err2;
    }
    rv = size;
  });
  return rv;
}
function getFileSizeAsync(p, cb) {
  getFileSize(true, p, cb);
}

// src/generic/fetch.ts
var fetchIsAvailable = typeof fetch !== "undefined" && fetch !== null;
function fetchFileAsync(p, type, cb) {
  let request;
  try {
    request = fetch(p);
  } catch (e) {
    return cb(new ApiError(22 /* EINVAL */, e.message));
  }
  request.then((res) => {
    if (!res.ok) {
      return cb(new ApiError(5 /* EIO */, `fetch error: response returned code ${res.status}`));
    } else {
      switch (type) {
        case "buffer":
          res.arrayBuffer().then((buf) => cb(null, Buffer2.from(buf))).catch((err2) => cb(new ApiError(5 /* EIO */, err2.message)));
          break;
        case "json":
          res.json().then((json) => cb(null, json)).catch((err2) => cb(new ApiError(5 /* EIO */, err2.message)));
          break;
        default:
          cb(new ApiError(22 /* EINVAL */, "Invalid download type: " + type));
      }
    }
  }).catch((err2) => cb(new ApiError(5 /* EIO */, err2.message)));
}
function fetchFileSizeAsync(p, cb) {
  fetch(p, { method: "HEAD" }).then((res) => {
    if (!res.ok) {
      return cb(new ApiError(5 /* EIO */, `fetch HEAD error: response returned code ${res.status}`));
    } else {
      return cb(null, parseInt(res.headers.get("Content-Length") || "-1", 10));
    }
  }).catch((err2) => cb(new ApiError(5 /* EIO */, err2.message)));
}

// src/generic/file_index.ts
var FileIndex = class {
  /**
   * Static method for constructing indices from a JSON listing.
   * @param listing Directory listing generated by tools/XHRIndexer.coffee
   * @return A new FileIndex object.
   */
  static fromListing(listing) {
    const idx = new FileIndex();
    const rootInode = new DirInode();
    idx._index["/"] = rootInode;
    const queue2 = [["", listing, rootInode]];
    while (queue2.length > 0) {
      let inode;
      const next = queue2.pop();
      const pwd = next[0];
      const tree = next[1];
      const parent = next[2];
      for (const node in tree) {
        if (Object.prototype.hasOwnProperty.call(tree, node)) {
          const children = tree[node];
          const name = `${pwd}/${node}`;
          if (children) {
            idx._index[name] = inode = new DirInode();
            queue2.push([name, children, inode]);
          } else {
            inode = new FileInode(new Stats(32768 /* FILE */, -1, 365));
          }
          if (parent) {
            parent._ls[node] = inode;
          }
        }
      }
    }
    return idx;
  }
  /**
   * Constructs a new FileIndex.
   */
  constructor() {
    this._index = {};
    this.addPath("/", new DirInode());
  }
  /**
   * Runs the given function over all files in the index.
   */
  fileIterator(cb) {
    for (const path in this._index) {
      if (Object.prototype.hasOwnProperty.call(this._index, path)) {
        const dir = this._index[path];
        const files = dir.getListing();
        for (const file of files) {
          const item = dir.getItem(file);
          if (isFileInode(item)) {
            cb(item.getData());
          }
        }
      }
    }
  }
  /**
   * Adds the given absolute path to the index if it is not already in the index.
   * Creates any needed parent directories.
   * @param path The path to add to the index.
   * @param inode The inode for the
   *   path to add.
   * @return 'True' if it was added or already exists, 'false' if there
   *   was an issue adding it (e.g. item in path is a file, item exists but is
   *   different).
   * @todo If adding fails and implicitly creates directories, we do not clean up
   *   the new empty directories.
   */
  addPath(path, inode) {
    if (!inode) {
      throw new Error("Inode must be specified");
    }
    if (path[0] !== "/") {
      throw new Error("Path must be absolute, got: " + path);
    }
    if (Object.prototype.hasOwnProperty.call(this._index, path)) {
      return this._index[path] === inode;
    }
    const splitPath2 = this._split_path(path);
    const dirpath = splitPath2[0];
    const itemname = splitPath2[1];
    let parent = this._index[dirpath];
    if (parent === void 0 && path !== "/") {
      parent = new DirInode();
      if (!this.addPath(dirpath, parent)) {
        return false;
      }
    }
    if (path !== "/") {
      if (!parent.addItem(itemname, inode)) {
        return false;
      }
    }
    if (isDirInode(inode)) {
      this._index[path] = inode;
    }
    return true;
  }
  /**
   * Adds the given absolute path to the index if it is not already in the index.
   * The path is added without special treatment (no joining of adjacent separators, etc).
   * Creates any needed parent directories.
   * @param path The path to add to the index.
   * @param inode The inode for the
   *   path to add.
   * @return 'True' if it was added or already exists, 'false' if there
   *   was an issue adding it (e.g. item in path is a file, item exists but is
   *   different).
   * @todo If adding fails and implicitly creates directories, we do not clean up
   *   the new empty directories.
   */
  addPathFast(path, inode) {
    const itemNameMark = path.lastIndexOf("/");
    const parentPath = itemNameMark === 0 ? "/" : path.substring(0, itemNameMark);
    const itemName = path.substring(itemNameMark + 1);
    let parent = this._index[parentPath];
    if (parent === void 0) {
      parent = new DirInode();
      this.addPathFast(parentPath, parent);
    }
    if (!parent.addItem(itemName, inode)) {
      return false;
    }
    if (inode.isDir()) {
      this._index[path] = inode;
    }
    return true;
  }
  /**
   * Removes the given path. Can be a file or a directory.
   * @return The removed item,
   *   or null if it did not exist.
   */
  removePath(path) {
    const splitPath2 = this._split_path(path);
    const dirpath = splitPath2[0];
    const itemname = splitPath2[1];
    const parent = this._index[dirpath];
    if (parent === void 0) {
      return null;
    }
    const inode = parent.remItem(itemname);
    if (inode === null) {
      return null;
    }
    if (isDirInode(inode)) {
      const children = inode.getListing();
      for (const child of children) {
        this.removePath(path + "/" + child);
      }
      if (path !== "/") {
        delete this._index[path];
      }
    }
    return inode;
  }
  /**
   * Retrieves the directory listing of the given path.
   * @return An array of files in the given path, or 'null' if it does not exist.
   */
  ls(path) {
    const item = this._index[path];
    if (item === void 0) {
      return null;
    }
    return item.getListing();
  }
  /**
   * Returns the inode of the given item.
   * @return Returns null if the item does not exist.
   */
  getInode(path) {
    const splitPath2 = this._split_path(path);
    const dirpath = splitPath2[0];
    const itemname = splitPath2[1];
    const parent = this._index[dirpath];
    if (parent === void 0) {
      return null;
    }
    if (dirpath === path) {
      return parent;
    }
    return parent.getItem(itemname);
  }
  /**
   * Split into a (directory path, item name) pair
   */
  _split_path(p) {
    const dirpath = dirname(p);
    const itemname = p.substr(dirpath.length + (dirpath === "/" ? 0 : 1));
    return [dirpath, itemname];
  }
};
var FileInode = class {
  constructor(data) {
    this.data = data;
  }
  isFile() {
    return true;
  }
  isDir() {
    return false;
  }
  getData() {
    return this.data;
  }
  setData(data) {
    this.data = data;
  }
  toStats() {
    return new Stats(32768 /* FILE */, 4096, 438);
  }
};
var DirInode = class {
  /**
   * Constructs an inode for a directory.
   */
  constructor(data = null) {
    this.data = data;
    this._ls = {};
  }
  isFile() {
    return false;
  }
  isDir() {
    return true;
  }
  getData() {
    return this.data;
  }
  /**
   * Return a Stats object for this inode.
   * @todo Should probably remove this at some point. This isn't the
   *       responsibility of the FileIndex.
   */
  getStats() {
    return new Stats(16384 /* DIRECTORY */, 4096, 365);
  }
  /**
   * Alias of getStats()
   * @todo Remove this at some point. This isn't the
   *       responsibility of the FileIndex.
   */
  toStats() {
    return this.getStats();
  }
  /**
   * Returns the directory listing for this directory. Paths in the directory are
   * relative to the directory's path.
   * @return The directory listing for this directory.
   */
  getListing() {
    return Object.keys(this._ls);
  }
  /**
   * Returns the inode for the indicated item, or null if it does not exist.
   * @param p Name of item in this directory.
   */
  getItem(p) {
    const item = this._ls[p];
    return item ? item : null;
  }
  /**
   * Add the given item to the directory listing. Note that the given inode is
   * not copied, and will be mutated by the DirInode if it is a DirInode.
   * @param p Item name to add to the directory listing.
   * @param inode The inode for the
   *   item to add to the directory inode.
   * @return True if it was added, false if it already existed.
   */
  addItem(p, inode) {
    if (p in this._ls) {
      return false;
    }
    this._ls[p] = inode;
    return true;
  }
  /**
   * Removes the given item from the directory listing.
   * @param p Name of item to remove from the directory listing.
   * @return Returns the item
   *   removed, or null if the item did not exist.
   */
  remItem(p) {
    const item = this._ls[p];
    if (item === void 0) {
      return null;
    }
    delete this._ls[p];
    return item;
  }
};
function isFileInode(inode) {
  return !!inode && inode.isFile();
}
function isDirInode(inode) {
  return !!inode && inode.isDir();
}

// src/backend/HTTPRequest.ts
function tryToString(buff, encoding, cb) {
  try {
    cb(null, buff.toString(encoding));
  } catch (e) {
    cb(e);
  }
}
function syncNotAvailableError() {
  throw new ApiError(95 /* ENOTSUP */, `Synchronous HTTP download methods are not available in this environment.`);
}
var _HTTPRequest = class extends BaseFileSystem {
  constructor(index, prefixUrl = "", preferXHR = false) {
    super();
    if (prefixUrl.length > 0 && prefixUrl.charAt(prefixUrl.length - 1) !== "/") {
      prefixUrl = prefixUrl + "/";
    }
    this.prefixUrl = prefixUrl;
    this._index = FileIndex.fromListing(index);
    if (fetchIsAvailable && (!preferXHR || !xhrIsAvailable)) {
      this._requestFileAsyncInternal = fetchFileAsync;
      this._requestFileSizeAsyncInternal = fetchFileSizeAsync;
    } else {
      this._requestFileAsyncInternal = asyncDownloadFile;
      this._requestFileSizeAsyncInternal = getFileSizeAsync;
    }
    if (xhrIsAvailable) {
      this._requestFileSyncInternal = syncDownloadFile;
      this._requestFileSizeSyncInternal = getFileSizeSync;
    } else {
      this._requestFileSyncInternal = syncNotAvailableError;
      this._requestFileSizeSyncInternal = syncNotAvailableError;
    }
  }
  /**
   * Construct an HTTPRequest file system backend with the given options.
   */
  static Create(opts, cb) {
    if (opts.index === void 0) {
      opts.index = `index.json`;
    }
    if (typeof opts.index === "string") {
      asyncDownloadFile(opts.index, "json", (e, data) => {
        if (e) {
          cb(e);
        } else {
          cb(null, new _HTTPRequest(data, opts.baseUrl));
        }
      });
    } else {
      cb(null, new _HTTPRequest(opts.index, opts.baseUrl));
    }
  }
  static CreateAsync(opts) {
    return new Promise((resolve2, reject) => {
      this.Create(opts, (error, fs2) => {
        if (error || !fs2) {
          reject(error);
        } else {
          resolve2(fs2);
        }
      });
    });
  }
  static isAvailable() {
    return xhrIsAvailable || fetchIsAvailable;
  }
  empty() {
    this._index.fileIterator(function(file) {
      file.fileData = null;
    });
  }
  getName() {
    return _HTTPRequest.Name;
  }
  diskSpace(path, cb) {
    cb(0, 0);
  }
  isReadOnly() {
    return true;
  }
  supportsLinks() {
    return false;
  }
  supportsProps() {
    return false;
  }
  supportsSynch() {
    return xhrIsAvailable;
  }
  /**
   * Special HTTPFS function: Preload the given file into the index.
   * @param [String] path
   * @param [BrowserFS.Buffer] buffer
   */
  preloadFile(path, buffer) {
    const inode = this._index.getInode(path);
    if (isFileInode(inode)) {
      if (inode === null) {
        throw ApiError.ENOENT(path);
      }
      const stats = inode.getData();
      stats.size = buffer.length;
      stats.fileData = buffer;
    } else {
      throw ApiError.EISDIR(path);
    }
  }
  stat(path, isLstat, cred, cb) {
    const inode = this._index.getInode(path);
    if (inode === null) {
      return cb(ApiError.ENOENT(path));
    }
    let stats;
    if (!inode.toStats().hasAccess(4 /* READ */, cred)) {
      return cb(ApiError.EACCES(path));
    }
    if (isFileInode(inode)) {
      stats = inode.getData();
      if (stats.size < 0) {
        this._requestFileSizeAsync(path, function(e, size) {
          if (e) {
            return cb(e);
          }
          stats.size = size;
          cb(null, Stats.clone(stats));
        });
      } else {
        cb(null, Stats.clone(stats));
      }
    } else if (isDirInode(inode)) {
      stats = inode.getStats();
      cb(null, stats);
    } else {
      cb(ApiError.FileError(22 /* EINVAL */, path));
    }
  }
  statSync(path, isLstat, cred) {
    const inode = this._index.getInode(path);
    if (inode === null) {
      throw ApiError.ENOENT(path);
    }
    if (!inode.toStats().hasAccess(4 /* READ */, cred)) {
      throw ApiError.EACCES(path);
    }
    let stats;
    if (isFileInode(inode)) {
      stats = inode.getData();
      if (stats.size < 0) {
        stats.size = this._requestFileSizeSync(path);
      }
    } else if (isDirInode(inode)) {
      stats = inode.getStats();
    } else {
      throw ApiError.FileError(22 /* EINVAL */, path);
    }
    return stats;
  }
  open(path, flags, mode, cred, cb) {
    if (flags.isWriteable()) {
      return cb(new ApiError(1 /* EPERM */, path));
    }
    const self2 = this;
    const inode = this._index.getInode(path);
    if (inode === null) {
      return cb(ApiError.ENOENT(path));
    }
    if (!inode.toStats().hasAccess(flags.getMode(), cred)) {
      return cb(ApiError.EACCES(path));
    }
    if (isFileInode(inode) || isDirInode(inode)) {
      switch (flags.pathExistsAction()) {
        case 1 /* THROW_EXCEPTION */:
        case 2 /* TRUNCATE_FILE */:
          return cb(ApiError.EEXIST(path));
        case 0 /* NOP */:
          if (isDirInode(inode)) {
            const stats2 = inode.getStats();
            return cb(null, new NoSyncFile(self2, path, flags, stats2, stats2.fileData || void 0));
          }
          const stats = inode.getData();
          if (stats.fileData) {
            return cb(null, new NoSyncFile(self2, path, flags, Stats.clone(stats), stats.fileData));
          }
          this._requestFileAsync(path, "buffer", function(err2, buffer) {
            if (err2) {
              return cb(err2);
            }
            stats.size = buffer.length;
            stats.fileData = buffer;
            return cb(null, new NoSyncFile(self2, path, flags, Stats.clone(stats), buffer));
          });
          break;
        default:
          return cb(new ApiError(22 /* EINVAL */, "Invalid FileMode object."));
      }
    } else {
      return cb(ApiError.EPERM(path));
    }
  }
  openSync(path, flags, mode, cred) {
    if (flags.isWriteable()) {
      throw new ApiError(1 /* EPERM */, path);
    }
    const inode = this._index.getInode(path);
    if (inode === null) {
      throw ApiError.ENOENT(path);
    }
    if (!inode.toStats().hasAccess(flags.getMode(), cred)) {
      throw ApiError.EACCES(path);
    }
    if (isFileInode(inode) || isDirInode(inode)) {
      switch (flags.pathExistsAction()) {
        case 1 /* THROW_EXCEPTION */:
        case 2 /* TRUNCATE_FILE */:
          throw ApiError.EEXIST(path);
        case 0 /* NOP */:
          if (isDirInode(inode)) {
            const stats2 = inode.getStats();
            return new NoSyncFile(this, path, flags, stats2, stats2.fileData || void 0);
          }
          const stats = inode.getData();
          if (stats.fileData) {
            return new NoSyncFile(this, path, flags, Stats.clone(stats), stats.fileData);
          }
          const buffer = this._requestFileSync(path, "buffer");
          stats.size = buffer.length;
          stats.fileData = buffer;
          return new NoSyncFile(this, path, flags, Stats.clone(stats), buffer);
        default:
          throw new ApiError(22 /* EINVAL */, "Invalid FileMode object.");
      }
    } else {
      throw ApiError.EPERM(path);
    }
  }
  readdir(path, cred, cb) {
    try {
      cb(null, this.readdirSync(path, cred));
    } catch (e) {
      cb(e);
    }
  }
  readdirSync(path, cred) {
    const inode = this._index.getInode(path);
    if (inode === null) {
      throw ApiError.ENOENT(path);
    } else if (!inode.toStats().hasAccess(4 /* READ */, cred)) {
      throw ApiError.EACCES(path);
    } else if (isDirInode(inode)) {
      return inode.getListing();
    } else {
      throw ApiError.ENOTDIR(path);
    }
  }
  /**
   * We have the entire file as a buffer; optimize readFile.
   */
  readFile(fname, encoding, flag, cred, cb) {
    const oldCb = cb;
    this.open(fname, flag, 420, cred, function(err2, fd) {
      if (err2) {
        return cb(err2);
      }
      cb = function(err3, arg) {
        fd.close(function(err22) {
          if (!err3) {
            err3 = err22;
          }
          return oldCb(err3, arg);
        });
      };
      const fdCast = fd;
      const fdBuff = fdCast.getBuffer();
      if (encoding === null) {
        cb(err2, copyingSlice(fdBuff));
      } else {
        tryToString(fdBuff, encoding, cb);
      }
    });
  }
  /**
   * Specially-optimized readfile.
   */
  readFileSync(fname, encoding, flag, cred) {
    const fd = this.openSync(fname, flag, 420, cred);
    try {
      const fdCast = fd;
      const fdBuff = fdCast.getBuffer();
      if (encoding === null) {
        return copyingSlice(fdBuff);
      }
      return fdBuff.toString(encoding);
    } finally {
      fd.closeSync();
    }
  }
  _getHTTPPath(filePath) {
    if (filePath.charAt(0) === "/") {
      filePath = filePath.slice(1);
    }
    return this.prefixUrl + filePath;
  }
  _requestFileAsync(p, type, cb) {
    this._requestFileAsyncInternal(this._getHTTPPath(p), type, cb);
  }
  _requestFileSync(p, type) {
    return this._requestFileSyncInternal(this._getHTTPPath(p), type);
  }
  /**
   * Only requests the HEAD content, for the file size.
   */
  _requestFileSizeAsync(path, cb) {
    this._requestFileSizeAsyncInternal(this._getHTTPPath(path), cb);
  }
  _requestFileSizeSync(path) {
    return this._requestFileSizeSyncInternal(this._getHTTPPath(path));
  }
};
var HTTPRequest = _HTTPRequest;
HTTPRequest.Name = "HTTPRequest";
HTTPRequest.Options = {
  index: {
    type: ["string", "object"],
    optional: true,
    description: "URL to a file index as a JSON file or the file index object itself, generated with the make_http_index script. Defaults to `index.json`."
  },
  baseUrl: {
    type: "string",
    optional: true,
    description: "Used as the URL prefix for fetched files. Default: Fetch files relative to the index."
  },
  preferXHR: {
    type: "boolean",
    optional: true,
    description: "Whether to prefer XmlHttpRequest or fetch for async operations if both are available. Default: false"
  }
};

// src/generic/extended_ascii.ts
var _ExtendedASCII = class {
  static str2byte(str, buf) {
    const length = str.length > buf.length ? buf.length : str.length;
    for (let i = 0; i < length; i++) {
      let charCode = str.charCodeAt(i);
      if (charCode > 127) {
        const charIdx = _ExtendedASCII.extendedChars.indexOf(str.charAt(i));
        if (charIdx > -1) {
          charCode = charIdx + 128;
        }
      }
      buf[charCode] = i;
    }
    return length;
  }
  static byte2str(buff) {
    const chars = new Array(buff.length);
    for (let i = 0; i < buff.length; i++) {
      const charCode = buff[i];
      if (charCode > 127) {
        chars[i] = _ExtendedASCII.extendedChars[charCode - 128];
      } else {
        chars[i] = String.fromCharCode(charCode);
      }
    }
    return chars.join("");
  }
  static byteLength(str) {
    return str.length;
  }
};
var ExtendedASCII = _ExtendedASCII;
ExtendedASCII.extendedChars = [
  "\xC7",
  "\xFC",
  "\xE9",
  "\xE2",
  "\xE4",
  "\xE0",
  "\xE5",
  "\xE7",
  "\xEA",
  "\xEB",
  "\xE8",
  "\xEF",
  "\xEE",
  "\xEC",
  "\xC4",
  "\xC5",
  "\xC9",
  "\xE6",
  "\xC6",
  "\xF4",
  "\xF6",
  "\xF2",
  "\xFB",
  "\xF9",
  "\xFF",
  "\xD6",
  "\xDC",
  "\xF8",
  "\xA3",
  "\xD8",
  "\xD7",
  "\u0192",
  "\xE1",
  "\xED",
  "\xF3",
  "\xFA",
  "\xF1",
  "\xD1",
  "\xAA",
  "\xBA",
  "\xBF",
  "\xAE",
  "\xAC",
  "\xBD",
  "\xBC",
  "\xA1",
  "\xAB",
  "\xBB",
  "_",
  "_",
  "_",
  "\xA6",
  "\xA6",
  "\xC1",
  "\xC2",
  "\xC0",
  "\xA9",
  "\xA6",
  "\xA6",
  "+",
  "+",
  "\xA2",
  "\xA5",
  "+",
  "+",
  "-",
  "-",
  "+",
  "-",
  "+",
  "\xE3",
  "\xC3",
  "+",
  "+",
  "-",
  "-",
  "\xA6",
  "-",
  "+",
  "\xA4",
  "\xF0",
  "\xD0",
  "\xCA",
  "\xCB",
  "\xC8",
  "i",
  "\xCD",
  "\xCE",
  "\xCF",
  "+",
  "+",
  "_",
  "_",
  "\xA6",
  "\xCC",
  "_",
  "\xD3",
  "\xDF",
  "\xD4",
  "\xD2",
  "\xF5",
  "\xD5",
  "\xB5",
  "\xFE",
  "\xDE",
  "\xDA",
  "\xDB",
  "\xD9",
  "\xFD",
  "\xDD",
  "\xAF",
  "\xB4",
  "\xAD",
  "\xB1",
  "_",
  "\xBE",
  "\xB6",
  "\xA7",
  "\xF7",
  "\xB8",
  "\xB0",
  "\xA8",
  "\xB7",
  "\xB9",
  "\xB3",
  "\xB2",
  "_",
  " "
];

// node-modules-polyfills:events
var domain;
function EventHandlers() {
}
EventHandlers.prototype = /* @__PURE__ */ Object.create(null);
function EventEmitter() {
  EventEmitter.init.call(this);
}
var events_default = EventEmitter;
EventEmitter.EventEmitter = EventEmitter;
EventEmitter.usingDomains = false;
EventEmitter.prototype.domain = void 0;
EventEmitter.prototype._events = void 0;
EventEmitter.prototype._maxListeners = void 0;
EventEmitter.defaultMaxListeners = 10;
EventEmitter.init = function() {
  this.domain = null;
  if (EventEmitter.usingDomains) {
    if (domain.active && !(this instanceof domain.Domain)) {
      this.domain = domain.active;
    }
  }
  if (!this._events || this._events === Object.getPrototypeOf(this)._events) {
    this._events = new EventHandlers();
    this._eventsCount = 0;
  }
  this._maxListeners = this._maxListeners || void 0;
};
EventEmitter.prototype.setMaxListeners = function setMaxListeners(n) {
  if (typeof n !== "number" || n < 0 || isNaN(n))
    throw new TypeError('"n" argument must be a positive number');
  this._maxListeners = n;
  return this;
};
function $getMaxListeners(that) {
  if (that._maxListeners === void 0)
    return EventEmitter.defaultMaxListeners;
  return that._maxListeners;
}
EventEmitter.prototype.getMaxListeners = function getMaxListeners() {
  return $getMaxListeners(this);
};
function emitNone(handler, isFn, self2) {
  if (isFn)
    handler.call(self2);
  else {
    var len = handler.length;
    var listeners2 = arrayClone(handler, len);
    for (var i = 0; i < len; ++i)
      listeners2[i].call(self2);
  }
}
function emitOne(handler, isFn, self2, arg1) {
  if (isFn)
    handler.call(self2, arg1);
  else {
    var len = handler.length;
    var listeners2 = arrayClone(handler, len);
    for (var i = 0; i < len; ++i)
      listeners2[i].call(self2, arg1);
  }
}
function emitTwo(handler, isFn, self2, arg1, arg2) {
  if (isFn)
    handler.call(self2, arg1, arg2);
  else {
    var len = handler.length;
    var listeners2 = arrayClone(handler, len);
    for (var i = 0; i < len; ++i)
      listeners2[i].call(self2, arg1, arg2);
  }
}
function emitThree(handler, isFn, self2, arg1, arg2, arg3) {
  if (isFn)
    handler.call(self2, arg1, arg2, arg3);
  else {
    var len = handler.length;
    var listeners2 = arrayClone(handler, len);
    for (var i = 0; i < len; ++i)
      listeners2[i].call(self2, arg1, arg2, arg3);
  }
}
function emitMany(handler, isFn, self2, args) {
  if (isFn)
    handler.apply(self2, args);
  else {
    var len = handler.length;
    var listeners2 = arrayClone(handler, len);
    for (var i = 0; i < len; ++i)
      listeners2[i].apply(self2, args);
  }
}
EventEmitter.prototype.emit = function emit2(type) {
  var er, handler, len, args, i, events, domain2;
  var needDomainExit = false;
  var doError = type === "error";
  events = this._events;
  if (events)
    doError = doError && events.error == null;
  else if (!doError)
    return false;
  domain2 = this.domain;
  if (doError) {
    er = arguments[1];
    if (domain2) {
      if (!er)
        er = new Error('Uncaught, unspecified "error" event');
      er.domainEmitter = this;
      er.domain = domain2;
      er.domainThrown = false;
      domain2.emit("error", er);
    } else if (er instanceof Error) {
      throw er;
    } else {
      var err2 = new Error('Uncaught, unspecified "error" event. (' + er + ")");
      err2.context = er;
      throw err2;
    }
    return false;
  }
  handler = events[type];
  if (!handler)
    return false;
  var isFn = typeof handler === "function";
  len = arguments.length;
  switch (len) {
    case 1:
      emitNone(handler, isFn, this);
      break;
    case 2:
      emitOne(handler, isFn, this, arguments[1]);
      break;
    case 3:
      emitTwo(handler, isFn, this, arguments[1], arguments[2]);
      break;
    case 4:
      emitThree(handler, isFn, this, arguments[1], arguments[2], arguments[3]);
      break;
    default:
      args = new Array(len - 1);
      for (i = 1; i < len; i++)
        args[i - 1] = arguments[i];
      emitMany(handler, isFn, this, args);
  }
  if (needDomainExit)
    domain2.exit();
  return true;
};
function _addListener(target, type, listener, prepend) {
  var m;
  var events;
  var existing;
  if (typeof listener !== "function")
    throw new TypeError('"listener" argument must be a function');
  events = target._events;
  if (!events) {
    events = target._events = new EventHandlers();
    target._eventsCount = 0;
  } else {
    if (events.newListener) {
      target.emit(
        "newListener",
        type,
        listener.listener ? listener.listener : listener
      );
      events = target._events;
    }
    existing = events[type];
  }
  if (!existing) {
    existing = events[type] = listener;
    ++target._eventsCount;
  } else {
    if (typeof existing === "function") {
      existing = events[type] = prepend ? [listener, existing] : [existing, listener];
    } else {
      if (prepend) {
        existing.unshift(listener);
      } else {
        existing.push(listener);
      }
    }
    if (!existing.warned) {
      m = $getMaxListeners(target);
      if (m && m > 0 && existing.length > m) {
        existing.warned = true;
        var w = new Error("Possible EventEmitter memory leak detected. " + existing.length + " " + type + " listeners added. Use emitter.setMaxListeners() to increase limit");
        w.name = "MaxListenersExceededWarning";
        w.emitter = target;
        w.type = type;
        w.count = existing.length;
        emitWarning(w);
      }
    }
  }
  return target;
}
function emitWarning(e) {
  typeof console.warn === "function" ? console.warn(e) : console.log(e);
}
EventEmitter.prototype.addListener = function addListener2(type, listener) {
  return _addListener(this, type, listener, false);
};
EventEmitter.prototype.on = EventEmitter.prototype.addListener;
EventEmitter.prototype.prependListener = function prependListener(type, listener) {
  return _addListener(this, type, listener, true);
};
function _onceWrap(target, type, listener) {
  var fired = false;
  function g() {
    target.removeListener(type, g);
    if (!fired) {
      fired = true;
      listener.apply(target, arguments);
    }
  }
  g.listener = listener;
  return g;
}
EventEmitter.prototype.once = function once2(type, listener) {
  if (typeof listener !== "function")
    throw new TypeError('"listener" argument must be a function');
  this.on(type, _onceWrap(this, type, listener));
  return this;
};
EventEmitter.prototype.prependOnceListener = function prependOnceListener(type, listener) {
  if (typeof listener !== "function")
    throw new TypeError('"listener" argument must be a function');
  this.prependListener(type, _onceWrap(this, type, listener));
  return this;
};
EventEmitter.prototype.removeListener = function removeListener2(type, listener) {
  var list, events, position, i, originalListener;
  if (typeof listener !== "function")
    throw new TypeError('"listener" argument must be a function');
  events = this._events;
  if (!events)
    return this;
  list = events[type];
  if (!list)
    return this;
  if (list === listener || list.listener && list.listener === listener) {
    if (--this._eventsCount === 0)
      this._events = new EventHandlers();
    else {
      delete events[type];
      if (events.removeListener)
        this.emit("removeListener", type, list.listener || listener);
    }
  } else if (typeof list !== "function") {
    position = -1;
    for (i = list.length; i-- > 0; ) {
      if (list[i] === listener || list[i].listener && list[i].listener === listener) {
        originalListener = list[i].listener;
        position = i;
        break;
      }
    }
    if (position < 0)
      return this;
    if (list.length === 1) {
      list[0] = void 0;
      if (--this._eventsCount === 0) {
        this._events = new EventHandlers();
        return this;
      } else {
        delete events[type];
      }
    } else {
      spliceOne(list, position);
    }
    if (events.removeListener)
      this.emit("removeListener", type, originalListener || listener);
  }
  return this;
};
EventEmitter.prototype.removeAllListeners = function removeAllListeners2(type) {
  var listeners2, events;
  events = this._events;
  if (!events)
    return this;
  if (!events.removeListener) {
    if (arguments.length === 0) {
      this._events = new EventHandlers();
      this._eventsCount = 0;
    } else if (events[type]) {
      if (--this._eventsCount === 0)
        this._events = new EventHandlers();
      else
        delete events[type];
    }
    return this;
  }
  if (arguments.length === 0) {
    var keys2 = Object.keys(events);
    for (var i = 0, key; i < keys2.length; ++i) {
      key = keys2[i];
      if (key === "removeListener")
        continue;
      this.removeAllListeners(key);
    }
    this.removeAllListeners("removeListener");
    this._events = new EventHandlers();
    this._eventsCount = 0;
    return this;
  }
  listeners2 = events[type];
  if (typeof listeners2 === "function") {
    this.removeListener(type, listeners2);
  } else if (listeners2) {
    do {
      this.removeListener(type, listeners2[listeners2.length - 1]);
    } while (listeners2[0]);
  }
  return this;
};
EventEmitter.prototype.listeners = function listeners(type) {
  var evlistener;
  var ret;
  var events = this._events;
  if (!events)
    ret = [];
  else {
    evlistener = events[type];
    if (!evlistener)
      ret = [];
    else if (typeof evlistener === "function")
      ret = [evlistener.listener || evlistener];
    else
      ret = unwrapListeners(evlistener);
  }
  return ret;
};
EventEmitter.listenerCount = function(emitter, type) {
  if (typeof emitter.listenerCount === "function") {
    return emitter.listenerCount(type);
  } else {
    return listenerCount.call(emitter, type);
  }
};
EventEmitter.prototype.listenerCount = listenerCount;
function listenerCount(type) {
  var events = this._events;
  if (events) {
    var evlistener = events[type];
    if (typeof evlistener === "function") {
      return 1;
    } else if (evlistener) {
      return evlistener.length;
    }
  }
  return 0;
}
EventEmitter.prototype.eventNames = function eventNames() {
  return this._eventsCount > 0 ? Reflect.ownKeys(this._events) : [];
};
function spliceOne(list, index) {
  for (var i = index, k = i + 1, n = list.length; k < n; i += 1, k += 1)
    list[i] = list[k];
  list.pop();
}
function arrayClone(arr, i) {
  var copy2 = new Array(i);
  while (i--)
    copy2[i] = arr[i];
  return copy2;
}
function unwrapListeners(arr) {
  var ret = new Array(arr.length);
  for (var i = 0; i < ret.length; ++i) {
    ret[i] = arr[i].listener || arr[i];
  }
  return ret;
}

// node_modules/rollup-plugin-node-polyfills/polyfills/inherits.js
var inherits;
if (typeof Object.create === "function") {
  inherits = function inherits2(ctor, superCtor) {
    ctor.super_ = superCtor;
    ctor.prototype = Object.create(superCtor.prototype, {
      constructor: {
        value: ctor,
        enumerable: false,
        writable: true,
        configurable: true
      }
    });
  };
} else {
  inherits = function inherits2(ctor, superCtor) {
    ctor.super_ = superCtor;
    var TempCtor = function() {
    };
    TempCtor.prototype = superCtor.prototype;
    ctor.prototype = new TempCtor();
    ctor.prototype.constructor = ctor;
  };
}
var inherits_default = inherits;

// node-modules-polyfills:util
var formatRegExp = /%[sdj%]/g;
function format(f) {
  if (!isString(f)) {
    var objects = [];
    for (var i = 0; i < arguments.length; i++) {
      objects.push(inspect2(arguments[i]));
    }
    return objects.join(" ");
  }
  var i = 1;
  var args = arguments;
  var len = args.length;
  var str = String(f).replace(formatRegExp, function(x2) {
    if (x2 === "%%")
      return "%";
    if (i >= len)
      return x2;
    switch (x2) {
      case "%s":
        return String(args[i++]);
      case "%d":
        return Number(args[i++]);
      case "%j":
        try {
          return JSON.stringify(args[i++]);
        } catch (_) {
          return "[Circular]";
        }
      default:
        return x2;
    }
  });
  for (var x = args[i]; i < len; x = args[++i]) {
    if (isNull(x) || !isObject(x)) {
      str += " " + x;
    } else {
      str += " " + inspect2(x);
    }
  }
  return str;
}
function deprecate(fn, msg) {
  if (isUndefined(globalThis.process)) {
    return function() {
      return deprecate(fn, msg).apply(this, arguments);
    };
  }
  if (process_default.noDeprecation === true) {
    return fn;
  }
  var warned = false;
  function deprecated() {
    if (!warned) {
      if (process_default.throwDeprecation) {
        throw new Error(msg);
      } else if (process_default.traceDeprecation) {
        console.trace(msg);
      } else {
        console.error(msg);
      }
      warned = true;
    }
    return fn.apply(this, arguments);
  }
  return deprecated;
}
var debugs = {};
var debugEnviron;
function debuglog(set) {
  if (isUndefined(debugEnviron))
    debugEnviron = process_default.env.NODE_DEBUG || "";
  set = set.toUpperCase();
  if (!debugs[set]) {
    if (new RegExp("\\b" + set + "\\b", "i").test(debugEnviron)) {
      var pid = 0;
      debugs[set] = function() {
        var msg = format.apply(null, arguments);
        console.error("%s %d: %s", set, pid, msg);
      };
    } else {
      debugs[set] = function() {
      };
    }
  }
  return debugs[set];
}
function inspect2(obj, opts) {
  var ctx = {
    seen: [],
    stylize: stylizeNoColor
  };
  if (arguments.length >= 3)
    ctx.depth = arguments[2];
  if (arguments.length >= 4)
    ctx.colors = arguments[3];
  if (isBoolean(opts)) {
    ctx.showHidden = opts;
  } else if (opts) {
    _extend(ctx, opts);
  }
  if (isUndefined(ctx.showHidden))
    ctx.showHidden = false;
  if (isUndefined(ctx.depth))
    ctx.depth = 2;
  if (isUndefined(ctx.colors))
    ctx.colors = false;
  if (isUndefined(ctx.customInspect))
    ctx.customInspect = true;
  if (ctx.colors)
    ctx.stylize = stylizeWithColor;
  return formatValue(ctx, obj, ctx.depth);
}
inspect2.colors = {
  "bold": [1, 22],
  "italic": [3, 23],
  "underline": [4, 24],
  "inverse": [7, 27],
  "white": [37, 39],
  "grey": [90, 39],
  "black": [30, 39],
  "blue": [34, 39],
  "cyan": [36, 39],
  "green": [32, 39],
  "magenta": [35, 39],
  "red": [31, 39],
  "yellow": [33, 39]
};
inspect2.styles = {
  "special": "cyan",
  "number": "yellow",
  "boolean": "yellow",
  "undefined": "grey",
  "null": "bold",
  "string": "green",
  "date": "magenta",
  // "name": intentionally not styling
  "regexp": "red"
};
function stylizeWithColor(str, styleType) {
  var style = inspect2.styles[styleType];
  if (style) {
    return "\x1B[" + inspect2.colors[style][0] + "m" + str + "\x1B[" + inspect2.colors[style][1] + "m";
  } else {
    return str;
  }
}
function stylizeNoColor(str, styleType) {
  return str;
}
function arrayToHash(array) {
  var hash = {};
  array.forEach(function(val, idx) {
    hash[val] = true;
  });
  return hash;
}
function formatValue(ctx, value, recurseTimes) {
  if (ctx.customInspect && value && isFunction(value.inspect) && // Filter out the util module, it's inspect function is special
  value.inspect !== inspect2 && // Also filter out any prototype objects using the circular check.
  !(value.constructor && value.constructor.prototype === value)) {
    var ret = value.inspect(recurseTimes, ctx);
    if (!isString(ret)) {
      ret = formatValue(ctx, ret, recurseTimes);
    }
    return ret;
  }
  var primitive = formatPrimitive(ctx, value);
  if (primitive) {
    return primitive;
  }
  var keys2 = Object.keys(value);
  var visibleKeys = arrayToHash(keys2);
  if (ctx.showHidden) {
    keys2 = Object.getOwnPropertyNames(value);
  }
  if (isError(value) && (keys2.indexOf("message") >= 0 || keys2.indexOf("description") >= 0)) {
    return formatError(value);
  }
  if (keys2.length === 0) {
    if (isFunction(value)) {
      var name = value.name ? ": " + value.name : "";
      return ctx.stylize("[Function" + name + "]", "special");
    }
    if (isRegExp(value)) {
      return ctx.stylize(RegExp.prototype.toString.call(value), "regexp");
    }
    if (isDate(value)) {
      return ctx.stylize(Date.prototype.toString.call(value), "date");
    }
    if (isError(value)) {
      return formatError(value);
    }
  }
  var base = "", array = false, braces = ["{", "}"];
  if (isArray2(value)) {
    array = true;
    braces = ["[", "]"];
  }
  if (isFunction(value)) {
    var n = value.name ? ": " + value.name : "";
    base = " [Function" + n + "]";
  }
  if (isRegExp(value)) {
    base = " " + RegExp.prototype.toString.call(value);
  }
  if (isDate(value)) {
    base = " " + Date.prototype.toUTCString.call(value);
  }
  if (isError(value)) {
    base = " " + formatError(value);
  }
  if (keys2.length === 0 && (!array || value.length == 0)) {
    return braces[0] + base + braces[1];
  }
  if (recurseTimes < 0) {
    if (isRegExp(value)) {
      return ctx.stylize(RegExp.prototype.toString.call(value), "regexp");
    } else {
      return ctx.stylize("[Object]", "special");
    }
  }
  ctx.seen.push(value);
  var output;
  if (array) {
    output = formatArray(ctx, value, recurseTimes, visibleKeys, keys2);
  } else {
    output = keys2.map(function(key) {
      return formatProperty(ctx, value, recurseTimes, visibleKeys, key, array);
    });
  }
  ctx.seen.pop();
  return reduceToSingleString(output, base, braces);
}
function formatPrimitive(ctx, value) {
  if (isUndefined(value))
    return ctx.stylize("undefined", "undefined");
  if (isString(value)) {
    var simple = "'" + JSON.stringify(value).replace(/^"|"$/g, "").replace(/'/g, "\\'").replace(/\\"/g, '"') + "'";
    return ctx.stylize(simple, "string");
  }
  if (isNumber(value))
    return ctx.stylize("" + value, "number");
  if (isBoolean(value))
    return ctx.stylize("" + value, "boolean");
  if (isNull(value))
    return ctx.stylize("null", "null");
}
function formatError(value) {
  return "[" + Error.prototype.toString.call(value) + "]";
}
function formatArray(ctx, value, recurseTimes, visibleKeys, keys2) {
  var output = [];
  for (var i = 0, l = value.length; i < l; ++i) {
    if (hasOwnProperty(value, String(i))) {
      output.push(formatProperty(
        ctx,
        value,
        recurseTimes,
        visibleKeys,
        String(i),
        true
      ));
    } else {
      output.push("");
    }
  }
  keys2.forEach(function(key) {
    if (!key.match(/^\d+$/)) {
      output.push(formatProperty(
        ctx,
        value,
        recurseTimes,
        visibleKeys,
        key,
        true
      ));
    }
  });
  return output;
}
function formatProperty(ctx, value, recurseTimes, visibleKeys, key, array) {
  var name, str, desc;
  desc = Object.getOwnPropertyDescriptor(value, key) || { value: value[key] };
  if (desc.get) {
    if (desc.set) {
      str = ctx.stylize("[Getter/Setter]", "special");
    } else {
      str = ctx.stylize("[Getter]", "special");
    }
  } else {
    if (desc.set) {
      str = ctx.stylize("[Setter]", "special");
    }
  }
  if (!hasOwnProperty(visibleKeys, key)) {
    name = "[" + key + "]";
  }
  if (!str) {
    if (ctx.seen.indexOf(desc.value) < 0) {
      if (isNull(recurseTimes)) {
        str = formatValue(ctx, desc.value, null);
      } else {
        str = formatValue(ctx, desc.value, recurseTimes - 1);
      }
      if (str.indexOf("\n") > -1) {
        if (array) {
          str = str.split("\n").map(function(line) {
            return "  " + line;
          }).join("\n").substr(2);
        } else {
          str = "\n" + str.split("\n").map(function(line) {
            return "   " + line;
          }).join("\n");
        }
      }
    } else {
      str = ctx.stylize("[Circular]", "special");
    }
  }
  if (isUndefined(name)) {
    if (array && key.match(/^\d+$/)) {
      return str;
    }
    name = JSON.stringify("" + key);
    if (name.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)) {
      name = name.substr(1, name.length - 2);
      name = ctx.stylize(name, "name");
    } else {
      name = name.replace(/'/g, "\\'").replace(/\\"/g, '"').replace(/(^"|"$)/g, "'");
      name = ctx.stylize(name, "string");
    }
  }
  return name + ": " + str;
}
function reduceToSingleString(output, base, braces) {
  var numLinesEst = 0;
  var length = output.reduce(function(prev, cur) {
    numLinesEst++;
    if (cur.indexOf("\n") >= 0)
      numLinesEst++;
    return prev + cur.replace(/\u001b\[\d\d?m/g, "").length + 1;
  }, 0);
  if (length > 60) {
    return braces[0] + (base === "" ? "" : base + "\n ") + " " + output.join(",\n  ") + " " + braces[1];
  }
  return braces[0] + base + " " + output.join(", ") + " " + braces[1];
}
function isArray2(ar) {
  return Array.isArray(ar);
}
function isBoolean(arg) {
  return typeof arg === "boolean";
}
function isNull(arg) {
  return arg === null;
}
function isNumber(arg) {
  return typeof arg === "number";
}
function isString(arg) {
  return typeof arg === "string";
}
function isUndefined(arg) {
  return arg === void 0;
}
function isRegExp(re) {
  return isObject(re) && objectToString(re) === "[object RegExp]";
}
function isObject(arg) {
  return typeof arg === "object" && arg !== null;
}
function isDate(d) {
  return isObject(d) && objectToString(d) === "[object Date]";
}
function isError(e) {
  return isObject(e) && (objectToString(e) === "[object Error]" || e instanceof Error);
}
function isFunction(arg) {
  return typeof arg === "function";
}
function objectToString(o) {
  return Object.prototype.toString.call(o);
}
function _extend(origin, add) {
  if (!add || !isObject(add))
    return origin;
  var keys2 = Object.keys(add);
  var i = keys2.length;
  while (i--) {
    origin[keys2[i]] = add[keys2[i]];
  }
  return origin;
}
function hasOwnProperty(obj, prop) {
  return Object.prototype.hasOwnProperty.call(obj, prop);
}

// node_modules/rollup-plugin-node-polyfills/polyfills/readable-stream/buffer-list.js
var buffer_list_default = BufferList;
function BufferList() {
  this.head = null;
  this.tail = null;
  this.length = 0;
}
BufferList.prototype.push = function(v) {
  var entry = { data: v, next: null };
  if (this.length > 0)
    this.tail.next = entry;
  else
    this.head = entry;
  this.tail = entry;
  ++this.length;
};
BufferList.prototype.unshift = function(v) {
  var entry = { data: v, next: this.head };
  if (this.length === 0)
    this.tail = entry;
  this.head = entry;
  ++this.length;
};
BufferList.prototype.shift = function() {
  if (this.length === 0)
    return;
  var ret = this.head.data;
  if (this.length === 1)
    this.head = this.tail = null;
  else
    this.head = this.head.next;
  --this.length;
  return ret;
};
BufferList.prototype.clear = function() {
  this.head = this.tail = null;
  this.length = 0;
};
BufferList.prototype.join = function(s) {
  if (this.length === 0)
    return "";
  var p = this.head;
  var ret = "" + p.data;
  while (p = p.next) {
    ret += s + p.data;
  }
  return ret;
};
BufferList.prototype.concat = function(n) {
  if (this.length === 0)
    return Buffer2.alloc(0);
  if (this.length === 1)
    return this.head.data;
  var ret = Buffer2.allocUnsafe(n >>> 0);
  var p = this.head;
  var i = 0;
  while (p) {
    p.data.copy(ret, i);
    i += p.data.length;
    p = p.next;
  }
  return ret;
};

// node-modules-polyfills:string_decoder
var isBufferEncoding = Buffer2.isEncoding || function(encoding) {
  switch (encoding && encoding.toLowerCase()) {
    case "hex":
    case "utf8":
    case "utf-8":
    case "ascii":
    case "binary":
    case "base64":
    case "ucs2":
    case "ucs-2":
    case "utf16le":
    case "utf-16le":
    case "raw":
      return true;
    default:
      return false;
  }
};
function assertEncoding(encoding) {
  if (encoding && !isBufferEncoding(encoding)) {
    throw new Error("Unknown encoding: " + encoding);
  }
}
function StringDecoder(encoding) {
  this.encoding = (encoding || "utf8").toLowerCase().replace(/[-_]/, "");
  assertEncoding(encoding);
  switch (this.encoding) {
    case "utf8":
      this.surrogateSize = 3;
      break;
    case "ucs2":
    case "utf16le":
      this.surrogateSize = 2;
      this.detectIncompleteChar = utf16DetectIncompleteChar;
      break;
    case "base64":
      this.surrogateSize = 3;
      this.detectIncompleteChar = base64DetectIncompleteChar;
      break;
    default:
      this.write = passThroughWrite;
      return;
  }
  this.charBuffer = new Buffer2(6);
  this.charReceived = 0;
  this.charLength = 0;
}
StringDecoder.prototype.write = function(buffer) {
  var charStr = "";
  while (this.charLength) {
    var available = buffer.length >= this.charLength - this.charReceived ? this.charLength - this.charReceived : buffer.length;
    buffer.copy(this.charBuffer, this.charReceived, 0, available);
    this.charReceived += available;
    if (this.charReceived < this.charLength) {
      return "";
    }
    buffer = buffer.slice(available, buffer.length);
    charStr = this.charBuffer.slice(0, this.charLength).toString(this.encoding);
    var charCode = charStr.charCodeAt(charStr.length - 1);
    if (charCode >= 55296 && charCode <= 56319) {
      this.charLength += this.surrogateSize;
      charStr = "";
      continue;
    }
    this.charReceived = this.charLength = 0;
    if (buffer.length === 0) {
      return charStr;
    }
    break;
  }
  this.detectIncompleteChar(buffer);
  var end = buffer.length;
  if (this.charLength) {
    buffer.copy(this.charBuffer, 0, buffer.length - this.charReceived, end);
    end -= this.charReceived;
  }
  charStr += buffer.toString(this.encoding, 0, end);
  var end = charStr.length - 1;
  var charCode = charStr.charCodeAt(end);
  if (charCode >= 55296 && charCode <= 56319) {
    var size = this.surrogateSize;
    this.charLength += size;
    this.charReceived += size;
    this.charBuffer.copy(this.charBuffer, size, 0, size);
    buffer.copy(this.charBuffer, 0, 0, size);
    return charStr.substring(0, end);
  }
  return charStr;
};
StringDecoder.prototype.detectIncompleteChar = function(buffer) {
  var i = buffer.length >= 3 ? 3 : buffer.length;
  for (; i > 0; i--) {
    var c = buffer[buffer.length - i];
    if (i == 1 && c >> 5 == 6) {
      this.charLength = 2;
      break;
    }
    if (i <= 2 && c >> 4 == 14) {
      this.charLength = 3;
      break;
    }
    if (i <= 3 && c >> 3 == 30) {
      this.charLength = 4;
      break;
    }
  }
  this.charReceived = i;
};
StringDecoder.prototype.end = function(buffer) {
  var res = "";
  if (buffer && buffer.length)
    res = this.write(buffer);
  if (this.charReceived) {
    var cr = this.charReceived;
    var buf = this.charBuffer;
    var enc = this.encoding;
    res += buf.slice(0, cr).toString(enc);
  }
  return res;
};
function passThroughWrite(buffer) {
  return buffer.toString(this.encoding);
}
function utf16DetectIncompleteChar(buffer) {
  this.charReceived = buffer.length % 2;
  this.charLength = this.charReceived ? 2 : 0;
}
function base64DetectIncompleteChar(buffer) {
  this.charReceived = buffer.length % 3;
  this.charLength = this.charReceived ? 3 : 0;
}

// node_modules/rollup-plugin-node-polyfills/polyfills/readable-stream/readable.js
Readable.ReadableState = ReadableState;
var debug = debuglog("stream");
inherits_default(Readable, events_default);
function prependListener2(emitter, event, fn) {
  if (typeof emitter.prependListener === "function") {
    return emitter.prependListener(event, fn);
  } else {
    if (!emitter._events || !emitter._events[event])
      emitter.on(event, fn);
    else if (Array.isArray(emitter._events[event]))
      emitter._events[event].unshift(fn);
    else
      emitter._events[event] = [fn, emitter._events[event]];
  }
}
function listenerCount2(emitter, type) {
  return emitter.listeners(type).length;
}
function ReadableState(options, stream) {
  options = options || {};
  this.objectMode = !!options.objectMode;
  if (stream instanceof Duplex)
    this.objectMode = this.objectMode || !!options.readableObjectMode;
  var hwm = options.highWaterMark;
  var defaultHwm = this.objectMode ? 16 : 16 * 1024;
  this.highWaterMark = hwm || hwm === 0 ? hwm : defaultHwm;
  this.highWaterMark = ~~this.highWaterMark;
  this.buffer = new buffer_list_default();
  this.length = 0;
  this.pipes = null;
  this.pipesCount = 0;
  this.flowing = null;
  this.ended = false;
  this.endEmitted = false;
  this.reading = false;
  this.sync = true;
  this.needReadable = false;
  this.emittedReadable = false;
  this.readableListening = false;
  this.resumeScheduled = false;
  this.defaultEncoding = options.defaultEncoding || "utf8";
  this.ranOut = false;
  this.awaitDrain = 0;
  this.readingMore = false;
  this.decoder = null;
  this.encoding = null;
  if (options.encoding) {
    this.decoder = new StringDecoder(options.encoding);
    this.encoding = options.encoding;
  }
}
function Readable(options) {
  if (!(this instanceof Readable))
    return new Readable(options);
  this._readableState = new ReadableState(options, this);
  this.readable = true;
  if (options && typeof options.read === "function")
    this._read = options.read;
  events_default.call(this);
}
Readable.prototype.push = function(chunk, encoding) {
  var state = this._readableState;
  if (!state.objectMode && typeof chunk === "string") {
    encoding = encoding || state.defaultEncoding;
    if (encoding !== state.encoding) {
      chunk = Buffer.from(chunk, encoding);
      encoding = "";
    }
  }
  return readableAddChunk(this, state, chunk, encoding, false);
};
Readable.prototype.unshift = function(chunk) {
  var state = this._readableState;
  return readableAddChunk(this, state, chunk, "", true);
};
Readable.prototype.isPaused = function() {
  return this._readableState.flowing === false;
};
function readableAddChunk(stream, state, chunk, encoding, addToFront) {
  var er = chunkInvalid(state, chunk);
  if (er) {
    stream.emit("error", er);
  } else if (chunk === null) {
    state.reading = false;
    onEofChunk(stream, state);
  } else if (state.objectMode || chunk && chunk.length > 0) {
    if (state.ended && !addToFront) {
      var e = new Error("stream.push() after EOF");
      stream.emit("error", e);
    } else if (state.endEmitted && addToFront) {
      var _e = new Error("stream.unshift() after end event");
      stream.emit("error", _e);
    } else {
      var skipAdd;
      if (state.decoder && !addToFront && !encoding) {
        chunk = state.decoder.write(chunk);
        skipAdd = !state.objectMode && chunk.length === 0;
      }
      if (!addToFront)
        state.reading = false;
      if (!skipAdd) {
        if (state.flowing && state.length === 0 && !state.sync) {
          stream.emit("data", chunk);
          stream.read(0);
        } else {
          state.length += state.objectMode ? 1 : chunk.length;
          if (addToFront)
            state.buffer.unshift(chunk);
          else
            state.buffer.push(chunk);
          if (state.needReadable)
            emitReadable(stream);
        }
      }
      maybeReadMore(stream, state);
    }
  } else if (!addToFront) {
    state.reading = false;
  }
  return needMoreData(state);
}
function needMoreData(state) {
  return !state.ended && (state.needReadable || state.length < state.highWaterMark || state.length === 0);
}
Readable.prototype.setEncoding = function(enc) {
  this._readableState.decoder = new StringDecoder(enc);
  this._readableState.encoding = enc;
  return this;
};
var MAX_HWM = 8388608;
function computeNewHighWaterMark(n) {
  if (n >= MAX_HWM) {
    n = MAX_HWM;
  } else {
    n--;
    n |= n >>> 1;
    n |= n >>> 2;
    n |= n >>> 4;
    n |= n >>> 8;
    n |= n >>> 16;
    n++;
  }
  return n;
}
function howMuchToRead(n, state) {
  if (n <= 0 || state.length === 0 && state.ended)
    return 0;
  if (state.objectMode)
    return 1;
  if (n !== n) {
    if (state.flowing && state.length)
      return state.buffer.head.data.length;
    else
      return state.length;
  }
  if (n > state.highWaterMark)
    state.highWaterMark = computeNewHighWaterMark(n);
  if (n <= state.length)
    return n;
  if (!state.ended) {
    state.needReadable = true;
    return 0;
  }
  return state.length;
}
Readable.prototype.read = function(n) {
  debug("read", n);
  n = parseInt(n, 10);
  var state = this._readableState;
  var nOrig = n;
  if (n !== 0)
    state.emittedReadable = false;
  if (n === 0 && state.needReadable && (state.length >= state.highWaterMark || state.ended)) {
    debug("read: emitReadable", state.length, state.ended);
    if (state.length === 0 && state.ended)
      endReadable(this);
    else
      emitReadable(this);
    return null;
  }
  n = howMuchToRead(n, state);
  if (n === 0 && state.ended) {
    if (state.length === 0)
      endReadable(this);
    return null;
  }
  var doRead = state.needReadable;
  debug("need readable", doRead);
  if (state.length === 0 || state.length - n < state.highWaterMark) {
    doRead = true;
    debug("length less than watermark", doRead);
  }
  if (state.ended || state.reading) {
    doRead = false;
    debug("reading or ended", doRead);
  } else if (doRead) {
    debug("do read");
    state.reading = true;
    state.sync = true;
    if (state.length === 0)
      state.needReadable = true;
    this._read(state.highWaterMark);
    state.sync = false;
    if (!state.reading)
      n = howMuchToRead(nOrig, state);
  }
  var ret;
  if (n > 0)
    ret = fromList(n, state);
  else
    ret = null;
  if (ret === null) {
    state.needReadable = true;
    n = 0;
  } else {
    state.length -= n;
  }
  if (state.length === 0) {
    if (!state.ended)
      state.needReadable = true;
    if (nOrig !== n && state.ended)
      endReadable(this);
  }
  if (ret !== null)
    this.emit("data", ret);
  return ret;
};
function chunkInvalid(state, chunk) {
  var er = null;
  if (!Buffer.isBuffer(chunk) && typeof chunk !== "string" && chunk !== null && chunk !== void 0 && !state.objectMode) {
    er = new TypeError("Invalid non-string/buffer chunk");
  }
  return er;
}
function onEofChunk(stream, state) {
  if (state.ended)
    return;
  if (state.decoder) {
    var chunk = state.decoder.end();
    if (chunk && chunk.length) {
      state.buffer.push(chunk);
      state.length += state.objectMode ? 1 : chunk.length;
    }
  }
  state.ended = true;
  emitReadable(stream);
}
function emitReadable(stream) {
  var state = stream._readableState;
  state.needReadable = false;
  if (!state.emittedReadable) {
    debug("emitReadable", state.flowing);
    state.emittedReadable = true;
    if (state.sync)
      nextTick(emitReadable_, stream);
    else
      emitReadable_(stream);
  }
}
function emitReadable_(stream) {
  debug("emit readable");
  stream.emit("readable");
  flow(stream);
}
function maybeReadMore(stream, state) {
  if (!state.readingMore) {
    state.readingMore = true;
    nextTick(maybeReadMore_, stream, state);
  }
}
function maybeReadMore_(stream, state) {
  var len = state.length;
  while (!state.reading && !state.flowing && !state.ended && state.length < state.highWaterMark) {
    debug("maybeReadMore read 0");
    stream.read(0);
    if (len === state.length)
      break;
    else
      len = state.length;
  }
  state.readingMore = false;
}
Readable.prototype._read = function(n) {
  this.emit("error", new Error("not implemented"));
};
Readable.prototype.pipe = function(dest, pipeOpts) {
  var src = this;
  var state = this._readableState;
  switch (state.pipesCount) {
    case 0:
      state.pipes = dest;
      break;
    case 1:
      state.pipes = [state.pipes, dest];
      break;
    default:
      state.pipes.push(dest);
      break;
  }
  state.pipesCount += 1;
  debug("pipe count=%d opts=%j", state.pipesCount, pipeOpts);
  var doEnd = !pipeOpts || pipeOpts.end !== false;
  var endFn = doEnd ? onend2 : cleanup;
  if (state.endEmitted)
    nextTick(endFn);
  else
    src.once("end", endFn);
  dest.on("unpipe", onunpipe);
  function onunpipe(readable) {
    debug("onunpipe");
    if (readable === src) {
      cleanup();
    }
  }
  function onend2() {
    debug("onend");
    dest.end();
  }
  var ondrain = pipeOnDrain(src);
  dest.on("drain", ondrain);
  var cleanedUp = false;
  function cleanup() {
    debug("cleanup");
    dest.removeListener("close", onclose);
    dest.removeListener("finish", onfinish);
    dest.removeListener("drain", ondrain);
    dest.removeListener("error", onerror);
    dest.removeListener("unpipe", onunpipe);
    src.removeListener("end", onend2);
    src.removeListener("end", cleanup);
    src.removeListener("data", ondata);
    cleanedUp = true;
    if (state.awaitDrain && (!dest._writableState || dest._writableState.needDrain))
      ondrain();
  }
  var increasedAwaitDrain = false;
  src.on("data", ondata);
  function ondata(chunk) {
    debug("ondata");
    increasedAwaitDrain = false;
    var ret = dest.write(chunk);
    if (false === ret && !increasedAwaitDrain) {
      if ((state.pipesCount === 1 && state.pipes === dest || state.pipesCount > 1 && indexOf2(state.pipes, dest) !== -1) && !cleanedUp) {
        debug("false write response, pause", src._readableState.awaitDrain);
        src._readableState.awaitDrain++;
        increasedAwaitDrain = true;
      }
      src.pause();
    }
  }
  function onerror(er) {
    debug("onerror", er);
    unpipe();
    dest.removeListener("error", onerror);
    if (listenerCount2(dest, "error") === 0)
      dest.emit("error", er);
  }
  prependListener2(dest, "error", onerror);
  function onclose() {
    dest.removeListener("finish", onfinish);
    unpipe();
  }
  dest.once("close", onclose);
  function onfinish() {
    debug("onfinish");
    dest.removeListener("close", onclose);
    unpipe();
  }
  dest.once("finish", onfinish);
  function unpipe() {
    debug("unpipe");
    src.unpipe(dest);
  }
  dest.emit("pipe", src);
  if (!state.flowing) {
    debug("pipe resume");
    src.resume();
  }
  return dest;
};
function pipeOnDrain(src) {
  return function() {
    var state = src._readableState;
    debug("pipeOnDrain", state.awaitDrain);
    if (state.awaitDrain)
      state.awaitDrain--;
    if (state.awaitDrain === 0 && src.listeners("data").length) {
      state.flowing = true;
      flow(src);
    }
  };
}
Readable.prototype.unpipe = function(dest) {
  var state = this._readableState;
  if (state.pipesCount === 0)
    return this;
  if (state.pipesCount === 1) {
    if (dest && dest !== state.pipes)
      return this;
    if (!dest)
      dest = state.pipes;
    state.pipes = null;
    state.pipesCount = 0;
    state.flowing = false;
    if (dest)
      dest.emit("unpipe", this);
    return this;
  }
  if (!dest) {
    var dests = state.pipes;
    var len = state.pipesCount;
    state.pipes = null;
    state.pipesCount = 0;
    state.flowing = false;
    for (var _i = 0; _i < len; _i++) {
      dests[_i].emit("unpipe", this);
    }
    return this;
  }
  var i = indexOf2(state.pipes, dest);
  if (i === -1)
    return this;
  state.pipes.splice(i, 1);
  state.pipesCount -= 1;
  if (state.pipesCount === 1)
    state.pipes = state.pipes[0];
  dest.emit("unpipe", this);
  return this;
};
Readable.prototype.on = function(ev, fn) {
  var res = events_default.prototype.on.call(this, ev, fn);
  if (ev === "data") {
    if (this._readableState.flowing !== false)
      this.resume();
  } else if (ev === "readable") {
    var state = this._readableState;
    if (!state.endEmitted && !state.readableListening) {
      state.readableListening = state.needReadable = true;
      state.emittedReadable = false;
      if (!state.reading) {
        nextTick(nReadingNextTick, this);
      } else if (state.length) {
        emitReadable(this, state);
      }
    }
  }
  return res;
};
Readable.prototype.addListener = Readable.prototype.on;
function nReadingNextTick(self2) {
  debug("readable nexttick read 0");
  self2.read(0);
}
Readable.prototype.resume = function() {
  var state = this._readableState;
  if (!state.flowing) {
    debug("resume");
    state.flowing = true;
    resume(this, state);
  }
  return this;
};
function resume(stream, state) {
  if (!state.resumeScheduled) {
    state.resumeScheduled = true;
    nextTick(resume_, stream, state);
  }
}
function resume_(stream, state) {
  if (!state.reading) {
    debug("resume read 0");
    stream.read(0);
  }
  state.resumeScheduled = false;
  state.awaitDrain = 0;
  stream.emit("resume");
  flow(stream);
  if (state.flowing && !state.reading)
    stream.read(0);
}
Readable.prototype.pause = function() {
  debug("call pause flowing=%j", this._readableState.flowing);
  if (false !== this._readableState.flowing) {
    debug("pause");
    this._readableState.flowing = false;
    this.emit("pause");
  }
  return this;
};
function flow(stream) {
  var state = stream._readableState;
  debug("flow", state.flowing);
  while (state.flowing && stream.read() !== null) {
  }
}
Readable.prototype.wrap = function(stream) {
  var state = this._readableState;
  var paused = false;
  var self2 = this;
  stream.on("end", function() {
    debug("wrapped end");
    if (state.decoder && !state.ended) {
      var chunk = state.decoder.end();
      if (chunk && chunk.length)
        self2.push(chunk);
    }
    self2.push(null);
  });
  stream.on("data", function(chunk) {
    debug("wrapped data");
    if (state.decoder)
      chunk = state.decoder.write(chunk);
    if (state.objectMode && (chunk === null || chunk === void 0))
      return;
    else if (!state.objectMode && (!chunk || !chunk.length))
      return;
    var ret = self2.push(chunk);
    if (!ret) {
      paused = true;
      stream.pause();
    }
  });
  for (var i in stream) {
    if (this[i] === void 0 && typeof stream[i] === "function") {
      this[i] = function(method) {
        return function() {
          return stream[method].apply(stream, arguments);
        };
      }(i);
    }
  }
  var events = ["error", "close", "destroy", "pause", "resume"];
  forEach(events, function(ev) {
    stream.on(ev, self2.emit.bind(self2, ev));
  });
  self2._read = function(n) {
    debug("wrapped _read", n);
    if (paused) {
      paused = false;
      stream.resume();
    }
  };
  return self2;
};
Readable._fromList = fromList;
function fromList(n, state) {
  if (state.length === 0)
    return null;
  var ret;
  if (state.objectMode)
    ret = state.buffer.shift();
  else if (!n || n >= state.length) {
    if (state.decoder)
      ret = state.buffer.join("");
    else if (state.buffer.length === 1)
      ret = state.buffer.head.data;
    else
      ret = state.buffer.concat(state.length);
    state.buffer.clear();
  } else {
    ret = fromListPartial(n, state.buffer, state.decoder);
  }
  return ret;
}
function fromListPartial(n, list, hasStrings) {
  var ret;
  if (n < list.head.data.length) {
    ret = list.head.data.slice(0, n);
    list.head.data = list.head.data.slice(n);
  } else if (n === list.head.data.length) {
    ret = list.shift();
  } else {
    ret = hasStrings ? copyFromBufferString(n, list) : copyFromBuffer(n, list);
  }
  return ret;
}
function copyFromBufferString(n, list) {
  var p = list.head;
  var c = 1;
  var ret = p.data;
  n -= ret.length;
  while (p = p.next) {
    var str = p.data;
    var nb = n > str.length ? str.length : n;
    if (nb === str.length)
      ret += str;
    else
      ret += str.slice(0, n);
    n -= nb;
    if (n === 0) {
      if (nb === str.length) {
        ++c;
        if (p.next)
          list.head = p.next;
        else
          list.head = list.tail = null;
      } else {
        list.head = p;
        p.data = str.slice(nb);
      }
      break;
    }
    ++c;
  }
  list.length -= c;
  return ret;
}
function copyFromBuffer(n, list) {
  var ret = Buffer.allocUnsafe(n);
  var p = list.head;
  var c = 1;
  p.data.copy(ret);
  n -= p.data.length;
  while (p = p.next) {
    var buf = p.data;
    var nb = n > buf.length ? buf.length : n;
    buf.copy(ret, ret.length - n, 0, nb);
    n -= nb;
    if (n === 0) {
      if (nb === buf.length) {
        ++c;
        if (p.next)
          list.head = p.next;
        else
          list.head = list.tail = null;
      } else {
        list.head = p;
        p.data = buf.slice(nb);
      }
      break;
    }
    ++c;
  }
  list.length -= c;
  return ret;
}
function endReadable(stream) {
  var state = stream._readableState;
  if (state.length > 0)
    throw new Error('"endReadable()" called on non-empty stream');
  if (!state.endEmitted) {
    state.ended = true;
    nextTick(endReadableNT, state, stream);
  }
}
function endReadableNT(state, stream) {
  if (!state.endEmitted && state.length === 0) {
    state.endEmitted = true;
    stream.readable = false;
    stream.emit("end");
  }
}
function forEach(xs, f) {
  for (var i = 0, l = xs.length; i < l; i++) {
    f(xs[i], i);
  }
}
function indexOf2(xs, x) {
  for (var i = 0, l = xs.length; i < l; i++) {
    if (xs[i] === x)
      return i;
  }
  return -1;
}

// node_modules/rollup-plugin-node-polyfills/polyfills/readable-stream/writable.js
Writable.WritableState = WritableState;
inherits_default(Writable, EventEmitter);
function nop() {
}
function WriteReq(chunk, encoding, cb) {
  this.chunk = chunk;
  this.encoding = encoding;
  this.callback = cb;
  this.next = null;
}
function WritableState(options, stream) {
  Object.defineProperty(this, "buffer", {
    get: deprecate(function() {
      return this.getBuffer();
    }, "_writableState.buffer is deprecated. Use _writableState.getBuffer instead.")
  });
  options = options || {};
  this.objectMode = !!options.objectMode;
  if (stream instanceof Duplex)
    this.objectMode = this.objectMode || !!options.writableObjectMode;
  var hwm = options.highWaterMark;
  var defaultHwm = this.objectMode ? 16 : 16 * 1024;
  this.highWaterMark = hwm || hwm === 0 ? hwm : defaultHwm;
  this.highWaterMark = ~~this.highWaterMark;
  this.needDrain = false;
  this.ending = false;
  this.ended = false;
  this.finished = false;
  var noDecode = options.decodeStrings === false;
  this.decodeStrings = !noDecode;
  this.defaultEncoding = options.defaultEncoding || "utf8";
  this.length = 0;
  this.writing = false;
  this.corked = 0;
  this.sync = true;
  this.bufferProcessing = false;
  this.onwrite = function(er) {
    onwrite(stream, er);
  };
  this.writecb = null;
  this.writelen = 0;
  this.bufferedRequest = null;
  this.lastBufferedRequest = null;
  this.pendingcb = 0;
  this.prefinished = false;
  this.errorEmitted = false;
  this.bufferedRequestCount = 0;
  this.corkedRequestsFree = new CorkedRequest(this);
}
WritableState.prototype.getBuffer = function writableStateGetBuffer() {
  var current = this.bufferedRequest;
  var out = [];
  while (current) {
    out.push(current);
    current = current.next;
  }
  return out;
};
function Writable(options) {
  if (!(this instanceof Writable) && !(this instanceof Duplex))
    return new Writable(options);
  this._writableState = new WritableState(options, this);
  this.writable = true;
  if (options) {
    if (typeof options.write === "function")
      this._write = options.write;
    if (typeof options.writev === "function")
      this._writev = options.writev;
  }
  EventEmitter.call(this);
}
Writable.prototype.pipe = function() {
  this.emit("error", new Error("Cannot pipe, not readable"));
};
function writeAfterEnd(stream, cb) {
  var er = new Error("write after end");
  stream.emit("error", er);
  nextTick(cb, er);
}
function validChunk(stream, state, chunk, cb) {
  var valid = true;
  var er = false;
  if (chunk === null) {
    er = new TypeError("May not write null values to stream");
  } else if (!Buffer2.isBuffer(chunk) && typeof chunk !== "string" && chunk !== void 0 && !state.objectMode) {
    er = new TypeError("Invalid non-string/buffer chunk");
  }
  if (er) {
    stream.emit("error", er);
    nextTick(cb, er);
    valid = false;
  }
  return valid;
}
Writable.prototype.write = function(chunk, encoding, cb) {
  var state = this._writableState;
  var ret = false;
  if (typeof encoding === "function") {
    cb = encoding;
    encoding = null;
  }
  if (Buffer2.isBuffer(chunk))
    encoding = "buffer";
  else if (!encoding)
    encoding = state.defaultEncoding;
  if (typeof cb !== "function")
    cb = nop;
  if (state.ended)
    writeAfterEnd(this, cb);
  else if (validChunk(this, state, chunk, cb)) {
    state.pendingcb++;
    ret = writeOrBuffer(this, state, chunk, encoding, cb);
  }
  return ret;
};
Writable.prototype.cork = function() {
  var state = this._writableState;
  state.corked++;
};
Writable.prototype.uncork = function() {
  var state = this._writableState;
  if (state.corked) {
    state.corked--;
    if (!state.writing && !state.corked && !state.finished && !state.bufferProcessing && state.bufferedRequest)
      clearBuffer(this, state);
  }
};
Writable.prototype.setDefaultEncoding = function setDefaultEncoding(encoding) {
  if (typeof encoding === "string")
    encoding = encoding.toLowerCase();
  if (!(["hex", "utf8", "utf-8", "ascii", "binary", "base64", "ucs2", "ucs-2", "utf16le", "utf-16le", "raw"].indexOf((encoding + "").toLowerCase()) > -1))
    throw new TypeError("Unknown encoding: " + encoding);
  this._writableState.defaultEncoding = encoding;
  return this;
};
function decodeChunk(state, chunk, encoding) {
  if (!state.objectMode && state.decodeStrings !== false && typeof chunk === "string") {
    chunk = Buffer2.from(chunk, encoding);
  }
  return chunk;
}
function writeOrBuffer(stream, state, chunk, encoding, cb) {
  chunk = decodeChunk(state, chunk, encoding);
  if (Buffer2.isBuffer(chunk))
    encoding = "buffer";
  var len = state.objectMode ? 1 : chunk.length;
  state.length += len;
  var ret = state.length < state.highWaterMark;
  if (!ret)
    state.needDrain = true;
  if (state.writing || state.corked) {
    var last = state.lastBufferedRequest;
    state.lastBufferedRequest = new WriteReq(chunk, encoding, cb);
    if (last) {
      last.next = state.lastBufferedRequest;
    } else {
      state.bufferedRequest = state.lastBufferedRequest;
    }
    state.bufferedRequestCount += 1;
  } else {
    doWrite(stream, state, false, len, chunk, encoding, cb);
  }
  return ret;
}
function doWrite(stream, state, writev, len, chunk, encoding, cb) {
  state.writelen = len;
  state.writecb = cb;
  state.writing = true;
  state.sync = true;
  if (writev)
    stream._writev(chunk, state.onwrite);
  else
    stream._write(chunk, encoding, state.onwrite);
  state.sync = false;
}
function onwriteError(stream, state, sync, er, cb) {
  --state.pendingcb;
  if (sync)
    nextTick(cb, er);
  else
    cb(er);
  stream._writableState.errorEmitted = true;
  stream.emit("error", er);
}
function onwriteStateUpdate(state) {
  state.writing = false;
  state.writecb = null;
  state.length -= state.writelen;
  state.writelen = 0;
}
function onwrite(stream, er) {
  var state = stream._writableState;
  var sync = state.sync;
  var cb = state.writecb;
  onwriteStateUpdate(state);
  if (er)
    onwriteError(stream, state, sync, er, cb);
  else {
    var finished = needFinish(state);
    if (!finished && !state.corked && !state.bufferProcessing && state.bufferedRequest) {
      clearBuffer(stream, state);
    }
    if (sync) {
      nextTick(afterWrite, stream, state, finished, cb);
    } else {
      afterWrite(stream, state, finished, cb);
    }
  }
}
function afterWrite(stream, state, finished, cb) {
  if (!finished)
    onwriteDrain(stream, state);
  state.pendingcb--;
  cb();
  finishMaybe(stream, state);
}
function onwriteDrain(stream, state) {
  if (state.length === 0 && state.needDrain) {
    state.needDrain = false;
    stream.emit("drain");
  }
}
function clearBuffer(stream, state) {
  state.bufferProcessing = true;
  var entry = state.bufferedRequest;
  if (stream._writev && entry && entry.next) {
    var l = state.bufferedRequestCount;
    var buffer = new Array(l);
    var holder = state.corkedRequestsFree;
    holder.entry = entry;
    var count = 0;
    while (entry) {
      buffer[count] = entry;
      entry = entry.next;
      count += 1;
    }
    doWrite(stream, state, true, state.length, buffer, "", holder.finish);
    state.pendingcb++;
    state.lastBufferedRequest = null;
    if (holder.next) {
      state.corkedRequestsFree = holder.next;
      holder.next = null;
    } else {
      state.corkedRequestsFree = new CorkedRequest(state);
    }
  } else {
    while (entry) {
      var chunk = entry.chunk;
      var encoding = entry.encoding;
      var cb = entry.callback;
      var len = state.objectMode ? 1 : chunk.length;
      doWrite(stream, state, false, len, chunk, encoding, cb);
      entry = entry.next;
      if (state.writing) {
        break;
      }
    }
    if (entry === null)
      state.lastBufferedRequest = null;
  }
  state.bufferedRequestCount = 0;
  state.bufferedRequest = entry;
  state.bufferProcessing = false;
}
Writable.prototype._write = function(chunk, encoding, cb) {
  cb(new Error("not implemented"));
};
Writable.prototype._writev = null;
Writable.prototype.end = function(chunk, encoding, cb) {
  var state = this._writableState;
  if (typeof chunk === "function") {
    cb = chunk;
    chunk = null;
    encoding = null;
  } else if (typeof encoding === "function") {
    cb = encoding;
    encoding = null;
  }
  if (chunk !== null && chunk !== void 0)
    this.write(chunk, encoding);
  if (state.corked) {
    state.corked = 1;
    this.uncork();
  }
  if (!state.ending && !state.finished)
    endWritable(this, state, cb);
};
function needFinish(state) {
  return state.ending && state.length === 0 && state.bufferedRequest === null && !state.finished && !state.writing;
}
function prefinish(stream, state) {
  if (!state.prefinished) {
    state.prefinished = true;
    stream.emit("prefinish");
  }
}
function finishMaybe(stream, state) {
  var need = needFinish(state);
  if (need) {
    if (state.pendingcb === 0) {
      prefinish(stream, state);
      state.finished = true;
      stream.emit("finish");
    } else {
      prefinish(stream, state);
    }
  }
  return need;
}
function endWritable(stream, state, cb) {
  state.ending = true;
  finishMaybe(stream, state);
  if (cb) {
    if (state.finished)
      nextTick(cb);
    else
      stream.once("finish", cb);
  }
  state.ended = true;
  stream.writable = false;
}
function CorkedRequest(state) {
  var _this = this;
  this.next = null;
  this.entry = null;
  this.finish = function(err2) {
    var entry = _this.entry;
    _this.entry = null;
    while (entry) {
      var cb = entry.callback;
      state.pendingcb--;
      cb(err2);
      entry = entry.next;
    }
    if (state.corkedRequestsFree) {
      state.corkedRequestsFree.next = _this;
    } else {
      state.corkedRequestsFree = _this;
    }
  };
}

// node_modules/rollup-plugin-node-polyfills/polyfills/readable-stream/duplex.js
inherits_default(Duplex, Readable);
var keys = Object.keys(Writable.prototype);
for (v = 0; v < keys.length; v++) {
  method = keys[v];
  if (!Duplex.prototype[method])
    Duplex.prototype[method] = Writable.prototype[method];
}
var method;
var v;
function Duplex(options) {
  if (!(this instanceof Duplex))
    return new Duplex(options);
  Readable.call(this, options);
  Writable.call(this, options);
  if (options && options.readable === false)
    this.readable = false;
  if (options && options.writable === false)
    this.writable = false;
  this.allowHalfOpen = true;
  if (options && options.allowHalfOpen === false)
    this.allowHalfOpen = false;
  this.once("end", onend);
}
function onend() {
  if (this.allowHalfOpen || this._writableState.ended)
    return;
  nextTick(onEndNT, this);
}
function onEndNT(self2) {
  self2.end();
}

// node_modules/rollup-plugin-node-polyfills/polyfills/readable-stream/transform.js
inherits_default(Transform, Duplex);
function TransformState(stream) {
  this.afterTransform = function(er, data) {
    return afterTransform(stream, er, data);
  };
  this.needTransform = false;
  this.transforming = false;
  this.writecb = null;
  this.writechunk = null;
  this.writeencoding = null;
}
function afterTransform(stream, er, data) {
  var ts = stream._transformState;
  ts.transforming = false;
  var cb = ts.writecb;
  if (!cb)
    return stream.emit("error", new Error("no writecb in Transform class"));
  ts.writechunk = null;
  ts.writecb = null;
  if (data !== null && data !== void 0)
    stream.push(data);
  cb(er);
  var rs = stream._readableState;
  rs.reading = false;
  if (rs.needReadable || rs.length < rs.highWaterMark) {
    stream._read(rs.highWaterMark);
  }
}
function Transform(options) {
  if (!(this instanceof Transform))
    return new Transform(options);
  Duplex.call(this, options);
  this._transformState = new TransformState(this);
  var stream = this;
  this._readableState.needReadable = true;
  this._readableState.sync = false;
  if (options) {
    if (typeof options.transform === "function")
      this._transform = options.transform;
    if (typeof options.flush === "function")
      this._flush = options.flush;
  }
  this.once("prefinish", function() {
    if (typeof this._flush === "function")
      this._flush(function(er) {
        done(stream, er);
      });
    else
      done(stream);
  });
}
Transform.prototype.push = function(chunk, encoding) {
  this._transformState.needTransform = false;
  return Duplex.prototype.push.call(this, chunk, encoding);
};
Transform.prototype._transform = function(chunk, encoding, cb) {
  throw new Error("Not implemented");
};
Transform.prototype._write = function(chunk, encoding, cb) {
  var ts = this._transformState;
  ts.writecb = cb;
  ts.writechunk = chunk;
  ts.writeencoding = encoding;
  if (!ts.transforming) {
    var rs = this._readableState;
    if (ts.needTransform || rs.needReadable || rs.length < rs.highWaterMark)
      this._read(rs.highWaterMark);
  }
};
Transform.prototype._read = function(n) {
  var ts = this._transformState;
  if (ts.writechunk !== null && ts.writecb && !ts.transforming) {
    ts.transforming = true;
    this._transform(ts.writechunk, ts.writeencoding, ts.afterTransform);
  } else {
    ts.needTransform = true;
  }
};
function done(stream, er) {
  if (er)
    return stream.emit("error", er);
  var ws = stream._writableState;
  var ts = stream._transformState;
  if (ws.length)
    throw new Error("Calling transform done when ws.length != 0");
  if (ts.transforming)
    throw new Error("Calling transform done when still transforming");
  return stream.push(null);
}

// node_modules/rollup-plugin-node-polyfills/polyfills/readable-stream/passthrough.js
inherits_default(PassThrough, Transform);
function PassThrough(options) {
  if (!(this instanceof PassThrough))
    return new PassThrough(options);
  Transform.call(this, options);
}
PassThrough.prototype._transform = function(chunk, encoding, cb) {
  cb(null, chunk);
};

// node-modules-polyfills:stream
inherits_default(Stream, events_default);
Stream.Readable = Readable;
Stream.Writable = Writable;
Stream.Duplex = Duplex;
Stream.Transform = Transform;
Stream.PassThrough = PassThrough;
Stream.Stream = Stream;
function Stream() {
  events_default.call(this);
}
Stream.prototype.pipe = function(dest, options) {
  var source = this;
  function ondata(chunk) {
    if (dest.writable) {
      if (false === dest.write(chunk) && source.pause) {
        source.pause();
      }
    }
  }
  source.on("data", ondata);
  function ondrain() {
    if (source.readable && source.resume) {
      source.resume();
    }
  }
  dest.on("drain", ondrain);
  if (!dest._isStdio && (!options || options.end !== false)) {
    source.on("end", onend2);
    source.on("close", onclose);
  }
  var didOnEnd = false;
  function onend2() {
    if (didOnEnd)
      return;
    didOnEnd = true;
    dest.end();
  }
  function onclose() {
    if (didOnEnd)
      return;
    didOnEnd = true;
    if (typeof dest.destroy === "function")
      dest.destroy();
  }
  function onerror(er) {
    cleanup();
    if (events_default.listenerCount(this, "error") === 0) {
      throw er;
    }
  }
  source.on("error", onerror);
  dest.on("error", onerror);
  function cleanup() {
    source.removeListener("data", ondata);
    dest.removeListener("drain", ondrain);
    source.removeListener("end", onend2);
    source.removeListener("close", onclose);
    source.removeListener("error", onerror);
    dest.removeListener("error", onerror);
    source.removeListener("end", cleanup);
    source.removeListener("close", cleanup);
    dest.removeListener("close", cleanup);
  }
  source.on("end", cleanup);
  source.on("close", cleanup);
  dest.on("close", cleanup);
  dest.emit("pipe", source);
  return dest;
};

// node_modules/rollup-plugin-node-polyfills/polyfills/zlib-lib/binding.js
var binding_exports = {};
__export(binding_exports, {
  DEFLATE: () => DEFLATE,
  DEFLATERAW: () => DEFLATERAW,
  GUNZIP: () => GUNZIP,
  GZIP: () => GZIP,
  INFLATE: () => INFLATE,
  INFLATERAW: () => INFLATERAW,
  NONE: () => NONE,
  UNZIP: () => UNZIP,
  Z_BEST_COMPRESSION: () => Z_BEST_COMPRESSION,
  Z_BEST_SPEED: () => Z_BEST_SPEED,
  Z_BINARY: () => Z_BINARY2,
  Z_BLOCK: () => Z_BLOCK3,
  Z_BUF_ERROR: () => Z_BUF_ERROR3,
  Z_DATA_ERROR: () => Z_DATA_ERROR3,
  Z_DEFAULT_COMPRESSION: () => Z_DEFAULT_COMPRESSION2,
  Z_DEFAULT_STRATEGY: () => Z_DEFAULT_STRATEGY,
  Z_DEFLATED: () => Z_DEFLATED3,
  Z_ERRNO: () => Z_ERRNO,
  Z_FILTERED: () => Z_FILTERED2,
  Z_FINISH: () => Z_FINISH3,
  Z_FIXED: () => Z_FIXED3,
  Z_FULL_FLUSH: () => Z_FULL_FLUSH2,
  Z_HUFFMAN_ONLY: () => Z_HUFFMAN_ONLY2,
  Z_NEED_DICT: () => Z_NEED_DICT2,
  Z_NO_COMPRESSION: () => Z_NO_COMPRESSION,
  Z_NO_FLUSH: () => Z_NO_FLUSH2,
  Z_OK: () => Z_OK3,
  Z_PARTIAL_FLUSH: () => Z_PARTIAL_FLUSH2,
  Z_RLE: () => Z_RLE2,
  Z_STREAM_END: () => Z_STREAM_END3,
  Z_STREAM_ERROR: () => Z_STREAM_ERROR3,
  Z_SYNC_FLUSH: () => Z_SYNC_FLUSH,
  Z_TEXT: () => Z_TEXT2,
  Z_TREES: () => Z_TREES2,
  Z_UNKNOWN: () => Z_UNKNOWN3,
  Zlib: () => Zlib
});

// node_modules/rollup-plugin-node-polyfills/polyfills/zlib-lib/messages.js
var messages_default = {
  2: "need dictionary",
  /* Z_NEED_DICT       2  */
  1: "stream end",
  /* Z_STREAM_END      1  */
  0: "",
  /* Z_OK              0  */
  "-1": "file error",
  /* Z_ERRNO         (-1) */
  "-2": "stream error",
  /* Z_STREAM_ERROR  (-2) */
  "-3": "data error",
  /* Z_DATA_ERROR    (-3) */
  "-4": "insufficient memory",
  /* Z_MEM_ERROR     (-4) */
  "-5": "buffer error",
  /* Z_BUF_ERROR     (-5) */
  "-6": "incompatible version"
  /* Z_VERSION_ERROR (-6) */
};

// node_modules/rollup-plugin-node-polyfills/polyfills/zlib-lib/zstream.js
function ZStream() {
  this.input = null;
  this.next_in = 0;
  this.avail_in = 0;
  this.total_in = 0;
  this.output = null;
  this.next_out = 0;
  this.avail_out = 0;
  this.total_out = 0;
  this.msg = "";
  this.state = null;
  this.data_type = 2;
  this.adler = 0;
}
var zstream_default = ZStream;

// node_modules/rollup-plugin-node-polyfills/polyfills/zlib-lib/utils.js
function arraySet(dest, src, src_offs, len, dest_offs) {
  if (src.subarray && dest.subarray) {
    dest.set(src.subarray(src_offs, src_offs + len), dest_offs);
    return;
  }
  for (var i = 0; i < len; i++) {
    dest[dest_offs + i] = src[src_offs + i];
  }
}
var Buf8 = Uint8Array;
var Buf16 = Uint16Array;
var Buf32 = Int32Array;

// node_modules/rollup-plugin-node-polyfills/polyfills/zlib-lib/trees.js
var Z_FIXED = 4;
var Z_BINARY = 0;
var Z_TEXT = 1;
var Z_UNKNOWN = 2;
function zero(buf) {
  var len = buf.length;
  while (--len >= 0) {
    buf[len] = 0;
  }
}
var STORED_BLOCK = 0;
var STATIC_TREES = 1;
var DYN_TREES = 2;
var MIN_MATCH = 3;
var MAX_MATCH = 258;
var LENGTH_CODES = 29;
var LITERALS = 256;
var L_CODES = LITERALS + 1 + LENGTH_CODES;
var D_CODES = 30;
var BL_CODES = 19;
var HEAP_SIZE = 2 * L_CODES + 1;
var MAX_BITS = 15;
var Buf_size = 16;
var MAX_BL_BITS = 7;
var END_BLOCK = 256;
var REP_3_6 = 16;
var REPZ_3_10 = 17;
var REPZ_11_138 = 18;
var extra_lbits = (
  /* extra bits for each length code */
  [0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 1, 1, 2, 2, 2, 2, 3, 3, 3, 3, 4, 4, 4, 4, 5, 5, 5, 5, 0]
);
var extra_dbits = (
  /* extra bits for each distance code */
  [0, 0, 0, 0, 1, 1, 2, 2, 3, 3, 4, 4, 5, 5, 6, 6, 7, 7, 8, 8, 9, 9, 10, 10, 11, 11, 12, 12, 13, 13]
);
var extra_blbits = (
  /* extra bits for each bit length code */
  [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 2, 3, 7]
);
var bl_order = [16, 17, 18, 0, 8, 7, 9, 6, 10, 5, 11, 4, 12, 3, 13, 2, 14, 1, 15];
var DIST_CODE_LEN = 512;
var static_ltree = new Array((L_CODES + 2) * 2);
zero(static_ltree);
var static_dtree = new Array(D_CODES * 2);
zero(static_dtree);
var _dist_code = new Array(DIST_CODE_LEN);
zero(_dist_code);
var _length_code = new Array(MAX_MATCH - MIN_MATCH + 1);
zero(_length_code);
var base_length = new Array(LENGTH_CODES);
zero(base_length);
var base_dist = new Array(D_CODES);
zero(base_dist);
function StaticTreeDesc(static_tree, extra_bits, extra_base, elems, max_length) {
  this.static_tree = static_tree;
  this.extra_bits = extra_bits;
  this.extra_base = extra_base;
  this.elems = elems;
  this.max_length = max_length;
  this.has_stree = static_tree && static_tree.length;
}
var static_l_desc;
var static_d_desc;
var static_bl_desc;
function TreeDesc(dyn_tree, stat_desc) {
  this.dyn_tree = dyn_tree;
  this.max_code = 0;
  this.stat_desc = stat_desc;
}
function d_code(dist) {
  return dist < 256 ? _dist_code[dist] : _dist_code[256 + (dist >>> 7)];
}
function put_short(s, w) {
  s.pending_buf[s.pending++] = w & 255;
  s.pending_buf[s.pending++] = w >>> 8 & 255;
}
function send_bits(s, value, length) {
  if (s.bi_valid > Buf_size - length) {
    s.bi_buf |= value << s.bi_valid & 65535;
    put_short(s, s.bi_buf);
    s.bi_buf = value >> Buf_size - s.bi_valid;
    s.bi_valid += length - Buf_size;
  } else {
    s.bi_buf |= value << s.bi_valid & 65535;
    s.bi_valid += length;
  }
}
function send_code(s, c, tree) {
  send_bits(
    s,
    tree[c * 2],
    tree[c * 2 + 1]
    /*.Len*/
  );
}
function bi_reverse(code, len) {
  var res = 0;
  do {
    res |= code & 1;
    code >>>= 1;
    res <<= 1;
  } while (--len > 0);
  return res >>> 1;
}
function bi_flush(s) {
  if (s.bi_valid === 16) {
    put_short(s, s.bi_buf);
    s.bi_buf = 0;
    s.bi_valid = 0;
  } else if (s.bi_valid >= 8) {
    s.pending_buf[s.pending++] = s.bi_buf & 255;
    s.bi_buf >>= 8;
    s.bi_valid -= 8;
  }
}
function gen_bitlen(s, desc) {
  var tree = desc.dyn_tree;
  var max_code = desc.max_code;
  var stree = desc.stat_desc.static_tree;
  var has_stree = desc.stat_desc.has_stree;
  var extra = desc.stat_desc.extra_bits;
  var base = desc.stat_desc.extra_base;
  var max_length = desc.stat_desc.max_length;
  var h;
  var n, m;
  var bits;
  var xbits;
  var f;
  var overflow = 0;
  for (bits = 0; bits <= MAX_BITS; bits++) {
    s.bl_count[bits] = 0;
  }
  tree[s.heap[s.heap_max] * 2 + 1] = 0;
  for (h = s.heap_max + 1; h < HEAP_SIZE; h++) {
    n = s.heap[h];
    bits = tree[tree[n * 2 + 1] * 2 + 1] + 1;
    if (bits > max_length) {
      bits = max_length;
      overflow++;
    }
    tree[n * 2 + 1] = bits;
    if (n > max_code) {
      continue;
    }
    s.bl_count[bits]++;
    xbits = 0;
    if (n >= base) {
      xbits = extra[n - base];
    }
    f = tree[n * 2];
    s.opt_len += f * (bits + xbits);
    if (has_stree) {
      s.static_len += f * (stree[n * 2 + 1] + xbits);
    }
  }
  if (overflow === 0) {
    return;
  }
  do {
    bits = max_length - 1;
    while (s.bl_count[bits] === 0) {
      bits--;
    }
    s.bl_count[bits]--;
    s.bl_count[bits + 1] += 2;
    s.bl_count[max_length]--;
    overflow -= 2;
  } while (overflow > 0);
  for (bits = max_length; bits !== 0; bits--) {
    n = s.bl_count[bits];
    while (n !== 0) {
      m = s.heap[--h];
      if (m > max_code) {
        continue;
      }
      if (tree[m * 2 + 1] !== bits) {
        s.opt_len += (bits - tree[m * 2 + 1]) * tree[m * 2];
        tree[m * 2 + 1] = bits;
      }
      n--;
    }
  }
}
function gen_codes(tree, max_code, bl_count) {
  var next_code = new Array(MAX_BITS + 1);
  var code = 0;
  var bits;
  var n;
  for (bits = 1; bits <= MAX_BITS; bits++) {
    next_code[bits] = code = code + bl_count[bits - 1] << 1;
  }
  for (n = 0; n <= max_code; n++) {
    var len = tree[n * 2 + 1];
    if (len === 0) {
      continue;
    }
    tree[n * 2] = bi_reverse(next_code[len]++, len);
  }
}
function tr_static_init() {
  var n;
  var bits;
  var length;
  var code;
  var dist;
  var bl_count = new Array(MAX_BITS + 1);
  length = 0;
  for (code = 0; code < LENGTH_CODES - 1; code++) {
    base_length[code] = length;
    for (n = 0; n < 1 << extra_lbits[code]; n++) {
      _length_code[length++] = code;
    }
  }
  _length_code[length - 1] = code;
  dist = 0;
  for (code = 0; code < 16; code++) {
    base_dist[code] = dist;
    for (n = 0; n < 1 << extra_dbits[code]; n++) {
      _dist_code[dist++] = code;
    }
  }
  dist >>= 7;
  for (; code < D_CODES; code++) {
    base_dist[code] = dist << 7;
    for (n = 0; n < 1 << extra_dbits[code] - 7; n++) {
      _dist_code[256 + dist++] = code;
    }
  }
  for (bits = 0; bits <= MAX_BITS; bits++) {
    bl_count[bits] = 0;
  }
  n = 0;
  while (n <= 143) {
    static_ltree[n * 2 + 1] = 8;
    n++;
    bl_count[8]++;
  }
  while (n <= 255) {
    static_ltree[n * 2 + 1] = 9;
    n++;
    bl_count[9]++;
  }
  while (n <= 279) {
    static_ltree[n * 2 + 1] = 7;
    n++;
    bl_count[7]++;
  }
  while (n <= 287) {
    static_ltree[n * 2 + 1] = 8;
    n++;
    bl_count[8]++;
  }
  gen_codes(static_ltree, L_CODES + 1, bl_count);
  for (n = 0; n < D_CODES; n++) {
    static_dtree[n * 2 + 1] = 5;
    static_dtree[n * 2] = bi_reverse(n, 5);
  }
  static_l_desc = new StaticTreeDesc(static_ltree, extra_lbits, LITERALS + 1, L_CODES, MAX_BITS);
  static_d_desc = new StaticTreeDesc(static_dtree, extra_dbits, 0, D_CODES, MAX_BITS);
  static_bl_desc = new StaticTreeDesc(new Array(0), extra_blbits, 0, BL_CODES, MAX_BL_BITS);
}
function init_block(s) {
  var n;
  for (n = 0; n < L_CODES; n++) {
    s.dyn_ltree[n * 2] = 0;
  }
  for (n = 0; n < D_CODES; n++) {
    s.dyn_dtree[n * 2] = 0;
  }
  for (n = 0; n < BL_CODES; n++) {
    s.bl_tree[n * 2] = 0;
  }
  s.dyn_ltree[END_BLOCK * 2] = 1;
  s.opt_len = s.static_len = 0;
  s.last_lit = s.matches = 0;
}
function bi_windup(s) {
  if (s.bi_valid > 8) {
    put_short(s, s.bi_buf);
  } else if (s.bi_valid > 0) {
    s.pending_buf[s.pending++] = s.bi_buf;
  }
  s.bi_buf = 0;
  s.bi_valid = 0;
}
function copy_block(s, buf, len, header) {
  bi_windup(s);
  if (header) {
    put_short(s, len);
    put_short(s, ~len);
  }
  arraySet(s.pending_buf, s.window, buf, len, s.pending);
  s.pending += len;
}
function smaller(tree, n, m, depth) {
  var _n2 = n * 2;
  var _m2 = m * 2;
  return tree[_n2] < tree[_m2] || tree[_n2] === tree[_m2] && depth[n] <= depth[m];
}
function pqdownheap(s, tree, k) {
  var v = s.heap[k];
  var j = k << 1;
  while (j <= s.heap_len) {
    if (j < s.heap_len && smaller(tree, s.heap[j + 1], s.heap[j], s.depth)) {
      j++;
    }
    if (smaller(tree, v, s.heap[j], s.depth)) {
      break;
    }
    s.heap[k] = s.heap[j];
    k = j;
    j <<= 1;
  }
  s.heap[k] = v;
}
function compress_block(s, ltree, dtree) {
  var dist;
  var lc;
  var lx = 0;
  var code;
  var extra;
  if (s.last_lit !== 0) {
    do {
      dist = s.pending_buf[s.d_buf + lx * 2] << 8 | s.pending_buf[s.d_buf + lx * 2 + 1];
      lc = s.pending_buf[s.l_buf + lx];
      lx++;
      if (dist === 0) {
        send_code(s, lc, ltree);
      } else {
        code = _length_code[lc];
        send_code(s, code + LITERALS + 1, ltree);
        extra = extra_lbits[code];
        if (extra !== 0) {
          lc -= base_length[code];
          send_bits(s, lc, extra);
        }
        dist--;
        code = d_code(dist);
        send_code(s, code, dtree);
        extra = extra_dbits[code];
        if (extra !== 0) {
          dist -= base_dist[code];
          send_bits(s, dist, extra);
        }
      }
    } while (lx < s.last_lit);
  }
  send_code(s, END_BLOCK, ltree);
}
function build_tree(s, desc) {
  var tree = desc.dyn_tree;
  var stree = desc.stat_desc.static_tree;
  var has_stree = desc.stat_desc.has_stree;
  var elems = desc.stat_desc.elems;
  var n, m;
  var max_code = -1;
  var node;
  s.heap_len = 0;
  s.heap_max = HEAP_SIZE;
  for (n = 0; n < elems; n++) {
    if (tree[n * 2] !== 0) {
      s.heap[++s.heap_len] = max_code = n;
      s.depth[n] = 0;
    } else {
      tree[n * 2 + 1] = 0;
    }
  }
  while (s.heap_len < 2) {
    node = s.heap[++s.heap_len] = max_code < 2 ? ++max_code : 0;
    tree[node * 2] = 1;
    s.depth[node] = 0;
    s.opt_len--;
    if (has_stree) {
      s.static_len -= stree[node * 2 + 1];
    }
  }
  desc.max_code = max_code;
  for (n = s.heap_len >> 1; n >= 1; n--) {
    pqdownheap(s, tree, n);
  }
  node = elems;
  do {
    n = s.heap[
      1
      /*SMALLEST*/
    ];
    s.heap[
      1
      /*SMALLEST*/
    ] = s.heap[s.heap_len--];
    pqdownheap(
      s,
      tree,
      1
      /*SMALLEST*/
    );
    m = s.heap[
      1
      /*SMALLEST*/
    ];
    s.heap[--s.heap_max] = n;
    s.heap[--s.heap_max] = m;
    tree[node * 2] = tree[n * 2] + tree[m * 2];
    s.depth[node] = (s.depth[n] >= s.depth[m] ? s.depth[n] : s.depth[m]) + 1;
    tree[n * 2 + 1] = tree[m * 2 + 1] = node;
    s.heap[
      1
      /*SMALLEST*/
    ] = node++;
    pqdownheap(
      s,
      tree,
      1
      /*SMALLEST*/
    );
  } while (s.heap_len >= 2);
  s.heap[--s.heap_max] = s.heap[
    1
    /*SMALLEST*/
  ];
  gen_bitlen(s, desc);
  gen_codes(tree, max_code, s.bl_count);
}
function scan_tree(s, tree, max_code) {
  var n;
  var prevlen = -1;
  var curlen;
  var nextlen = tree[0 * 2 + 1];
  var count = 0;
  var max_count = 7;
  var min_count = 4;
  if (nextlen === 0) {
    max_count = 138;
    min_count = 3;
  }
  tree[(max_code + 1) * 2 + 1] = 65535;
  for (n = 0; n <= max_code; n++) {
    curlen = nextlen;
    nextlen = tree[(n + 1) * 2 + 1];
    if (++count < max_count && curlen === nextlen) {
      continue;
    } else if (count < min_count) {
      s.bl_tree[curlen * 2] += count;
    } else if (curlen !== 0) {
      if (curlen !== prevlen) {
        s.bl_tree[curlen * 2]++;
      }
      s.bl_tree[REP_3_6 * 2]++;
    } else if (count <= 10) {
      s.bl_tree[REPZ_3_10 * 2]++;
    } else {
      s.bl_tree[REPZ_11_138 * 2]++;
    }
    count = 0;
    prevlen = curlen;
    if (nextlen === 0) {
      max_count = 138;
      min_count = 3;
    } else if (curlen === nextlen) {
      max_count = 6;
      min_count = 3;
    } else {
      max_count = 7;
      min_count = 4;
    }
  }
}
function send_tree(s, tree, max_code) {
  var n;
  var prevlen = -1;
  var curlen;
  var nextlen = tree[0 * 2 + 1];
  var count = 0;
  var max_count = 7;
  var min_count = 4;
  if (nextlen === 0) {
    max_count = 138;
    min_count = 3;
  }
  for (n = 0; n <= max_code; n++) {
    curlen = nextlen;
    nextlen = tree[(n + 1) * 2 + 1];
    if (++count < max_count && curlen === nextlen) {
      continue;
    } else if (count < min_count) {
      do {
        send_code(s, curlen, s.bl_tree);
      } while (--count !== 0);
    } else if (curlen !== 0) {
      if (curlen !== prevlen) {
        send_code(s, curlen, s.bl_tree);
        count--;
      }
      send_code(s, REP_3_6, s.bl_tree);
      send_bits(s, count - 3, 2);
    } else if (count <= 10) {
      send_code(s, REPZ_3_10, s.bl_tree);
      send_bits(s, count - 3, 3);
    } else {
      send_code(s, REPZ_11_138, s.bl_tree);
      send_bits(s, count - 11, 7);
    }
    count = 0;
    prevlen = curlen;
    if (nextlen === 0) {
      max_count = 138;
      min_count = 3;
    } else if (curlen === nextlen) {
      max_count = 6;
      min_count = 3;
    } else {
      max_count = 7;
      min_count = 4;
    }
  }
}
function build_bl_tree(s) {
  var max_blindex;
  scan_tree(s, s.dyn_ltree, s.l_desc.max_code);
  scan_tree(s, s.dyn_dtree, s.d_desc.max_code);
  build_tree(s, s.bl_desc);
  for (max_blindex = BL_CODES - 1; max_blindex >= 3; max_blindex--) {
    if (s.bl_tree[bl_order[max_blindex] * 2 + 1] !== 0) {
      break;
    }
  }
  s.opt_len += 3 * (max_blindex + 1) + 5 + 5 + 4;
  return max_blindex;
}
function send_all_trees(s, lcodes, dcodes, blcodes) {
  var rank2;
  send_bits(s, lcodes - 257, 5);
  send_bits(s, dcodes - 1, 5);
  send_bits(s, blcodes - 4, 4);
  for (rank2 = 0; rank2 < blcodes; rank2++) {
    send_bits(s, s.bl_tree[bl_order[rank2] * 2 + 1], 3);
  }
  send_tree(s, s.dyn_ltree, lcodes - 1);
  send_tree(s, s.dyn_dtree, dcodes - 1);
}
function detect_data_type(s) {
  var black_mask = 4093624447;
  var n;
  for (n = 0; n <= 31; n++, black_mask >>>= 1) {
    if (black_mask & 1 && s.dyn_ltree[n * 2] !== 0) {
      return Z_BINARY;
    }
  }
  if (s.dyn_ltree[9 * 2] !== 0 || s.dyn_ltree[10 * 2] !== 0 || s.dyn_ltree[13 * 2] !== 0) {
    return Z_TEXT;
  }
  for (n = 32; n < LITERALS; n++) {
    if (s.dyn_ltree[n * 2] !== 0) {
      return Z_TEXT;
    }
  }
  return Z_BINARY;
}
var static_init_done = false;
function _tr_init(s) {
  if (!static_init_done) {
    tr_static_init();
    static_init_done = true;
  }
  s.l_desc = new TreeDesc(s.dyn_ltree, static_l_desc);
  s.d_desc = new TreeDesc(s.dyn_dtree, static_d_desc);
  s.bl_desc = new TreeDesc(s.bl_tree, static_bl_desc);
  s.bi_buf = 0;
  s.bi_valid = 0;
  init_block(s);
}
function _tr_stored_block(s, buf, stored_len, last) {
  send_bits(s, (STORED_BLOCK << 1) + (last ? 1 : 0), 3);
  copy_block(s, buf, stored_len, true);
}
function _tr_align(s) {
  send_bits(s, STATIC_TREES << 1, 3);
  send_code(s, END_BLOCK, static_ltree);
  bi_flush(s);
}
function _tr_flush_block(s, buf, stored_len, last) {
  var opt_lenb, static_lenb;
  var max_blindex = 0;
  if (s.level > 0) {
    if (s.strm.data_type === Z_UNKNOWN) {
      s.strm.data_type = detect_data_type(s);
    }
    build_tree(s, s.l_desc);
    build_tree(s, s.d_desc);
    max_blindex = build_bl_tree(s);
    opt_lenb = s.opt_len + 3 + 7 >>> 3;
    static_lenb = s.static_len + 3 + 7 >>> 3;
    if (static_lenb <= opt_lenb) {
      opt_lenb = static_lenb;
    }
  } else {
    opt_lenb = static_lenb = stored_len + 5;
  }
  if (stored_len + 4 <= opt_lenb && buf !== -1) {
    _tr_stored_block(s, buf, stored_len, last);
  } else if (s.strategy === Z_FIXED || static_lenb === opt_lenb) {
    send_bits(s, (STATIC_TREES << 1) + (last ? 1 : 0), 3);
    compress_block(s, static_ltree, static_dtree);
  } else {
    send_bits(s, (DYN_TREES << 1) + (last ? 1 : 0), 3);
    send_all_trees(s, s.l_desc.max_code + 1, s.d_desc.max_code + 1, max_blindex + 1);
    compress_block(s, s.dyn_ltree, s.dyn_dtree);
  }
  init_block(s);
  if (last) {
    bi_windup(s);
  }
}
function _tr_tally(s, dist, lc) {
  s.pending_buf[s.d_buf + s.last_lit * 2] = dist >>> 8 & 255;
  s.pending_buf[s.d_buf + s.last_lit * 2 + 1] = dist & 255;
  s.pending_buf[s.l_buf + s.last_lit] = lc & 255;
  s.last_lit++;
  if (dist === 0) {
    s.dyn_ltree[lc * 2]++;
  } else {
    s.matches++;
    dist--;
    s.dyn_ltree[(_length_code[lc] + LITERALS + 1) * 2]++;
    s.dyn_dtree[d_code(dist) * 2]++;
  }
  return s.last_lit === s.lit_bufsize - 1;
}

// node_modules/rollup-plugin-node-polyfills/polyfills/zlib-lib/adler32.js
function adler32(adler, buf, len, pos) {
  var s1 = adler & 65535 | 0, s2 = adler >>> 16 & 65535 | 0, n = 0;
  while (len !== 0) {
    n = len > 2e3 ? 2e3 : len;
    len -= n;
    do {
      s1 = s1 + buf[pos++] | 0;
      s2 = s2 + s1 | 0;
    } while (--n);
    s1 %= 65521;
    s2 %= 65521;
  }
  return s1 | s2 << 16 | 0;
}
var adler32_default = adler32;

// node_modules/rollup-plugin-node-polyfills/polyfills/zlib-lib/crc32.js
function makeTable() {
  var c, table = [];
  for (var n = 0; n < 256; n++) {
    c = n;
    for (var k = 0; k < 8; k++) {
      c = c & 1 ? 3988292384 ^ c >>> 1 : c >>> 1;
    }
    table[n] = c;
  }
  return table;
}
var crcTable = makeTable();
function crc32(crc, buf, len, pos) {
  var t = crcTable, end = pos + len;
  crc ^= -1;
  for (var i = pos; i < end; i++) {
    crc = crc >>> 8 ^ t[(crc ^ buf[i]) & 255];
  }
  return crc ^ -1;
}
var crc32_default = crc32;

// node_modules/rollup-plugin-node-polyfills/polyfills/zlib-lib/deflate.js
var Z_NO_FLUSH = 0;
var Z_PARTIAL_FLUSH = 1;
var Z_FULL_FLUSH = 3;
var Z_FINISH = 4;
var Z_BLOCK = 5;
var Z_OK = 0;
var Z_STREAM_END = 1;
var Z_STREAM_ERROR = -2;
var Z_DATA_ERROR = -3;
var Z_BUF_ERROR = -5;
var Z_DEFAULT_COMPRESSION = -1;
var Z_FILTERED = 1;
var Z_HUFFMAN_ONLY = 2;
var Z_RLE = 3;
var Z_FIXED2 = 4;
var Z_UNKNOWN2 = 2;
var Z_DEFLATED = 8;
var MAX_MEM_LEVEL = 9;
var LENGTH_CODES2 = 29;
var LITERALS2 = 256;
var L_CODES2 = LITERALS2 + 1 + LENGTH_CODES2;
var D_CODES2 = 30;
var BL_CODES2 = 19;
var HEAP_SIZE2 = 2 * L_CODES2 + 1;
var MAX_BITS2 = 15;
var MIN_MATCH2 = 3;
var MAX_MATCH2 = 258;
var MIN_LOOKAHEAD = MAX_MATCH2 + MIN_MATCH2 + 1;
var PRESET_DICT = 32;
var INIT_STATE = 42;
var EXTRA_STATE = 69;
var NAME_STATE = 73;
var COMMENT_STATE = 91;
var HCRC_STATE = 103;
var BUSY_STATE = 113;
var FINISH_STATE = 666;
var BS_NEED_MORE = 1;
var BS_BLOCK_DONE = 2;
var BS_FINISH_STARTED = 3;
var BS_FINISH_DONE = 4;
var OS_CODE = 3;
function err(strm, errorCode) {
  strm.msg = messages_default[errorCode];
  return errorCode;
}
function rank(f) {
  return (f << 1) - (f > 4 ? 9 : 0);
}
function zero2(buf) {
  var len = buf.length;
  while (--len >= 0) {
    buf[len] = 0;
  }
}
function flush_pending(strm) {
  var s = strm.state;
  var len = s.pending;
  if (len > strm.avail_out) {
    len = strm.avail_out;
  }
  if (len === 0) {
    return;
  }
  arraySet(strm.output, s.pending_buf, s.pending_out, len, strm.next_out);
  strm.next_out += len;
  s.pending_out += len;
  strm.total_out += len;
  strm.avail_out -= len;
  s.pending -= len;
  if (s.pending === 0) {
    s.pending_out = 0;
  }
}
function flush_block_only(s, last) {
  _tr_flush_block(s, s.block_start >= 0 ? s.block_start : -1, s.strstart - s.block_start, last);
  s.block_start = s.strstart;
  flush_pending(s.strm);
}
function put_byte(s, b) {
  s.pending_buf[s.pending++] = b;
}
function putShortMSB(s, b) {
  s.pending_buf[s.pending++] = b >>> 8 & 255;
  s.pending_buf[s.pending++] = b & 255;
}
function read_buf(strm, buf, start, size) {
  var len = strm.avail_in;
  if (len > size) {
    len = size;
  }
  if (len === 0) {
    return 0;
  }
  strm.avail_in -= len;
  arraySet(buf, strm.input, strm.next_in, len, start);
  if (strm.state.wrap === 1) {
    strm.adler = adler32_default(strm.adler, buf, len, start);
  } else if (strm.state.wrap === 2) {
    strm.adler = crc32_default(strm.adler, buf, len, start);
  }
  strm.next_in += len;
  strm.total_in += len;
  return len;
}
function longest_match(s, cur_match) {
  var chain_length = s.max_chain_length;
  var scan = s.strstart;
  var match;
  var len;
  var best_len = s.prev_length;
  var nice_match = s.nice_match;
  var limit = s.strstart > s.w_size - MIN_LOOKAHEAD ? s.strstart - (s.w_size - MIN_LOOKAHEAD) : 0;
  var _win = s.window;
  var wmask = s.w_mask;
  var prev = s.prev;
  var strend = s.strstart + MAX_MATCH2;
  var scan_end1 = _win[scan + best_len - 1];
  var scan_end = _win[scan + best_len];
  if (s.prev_length >= s.good_match) {
    chain_length >>= 2;
  }
  if (nice_match > s.lookahead) {
    nice_match = s.lookahead;
  }
  do {
    match = cur_match;
    if (_win[match + best_len] !== scan_end || _win[match + best_len - 1] !== scan_end1 || _win[match] !== _win[scan] || _win[++match] !== _win[scan + 1]) {
      continue;
    }
    scan += 2;
    match++;
    do {
    } while (_win[++scan] === _win[++match] && _win[++scan] === _win[++match] && _win[++scan] === _win[++match] && _win[++scan] === _win[++match] && _win[++scan] === _win[++match] && _win[++scan] === _win[++match] && _win[++scan] === _win[++match] && _win[++scan] === _win[++match] && scan < strend);
    len = MAX_MATCH2 - (strend - scan);
    scan = strend - MAX_MATCH2;
    if (len > best_len) {
      s.match_start = cur_match;
      best_len = len;
      if (len >= nice_match) {
        break;
      }
      scan_end1 = _win[scan + best_len - 1];
      scan_end = _win[scan + best_len];
    }
  } while ((cur_match = prev[cur_match & wmask]) > limit && --chain_length !== 0);
  if (best_len <= s.lookahead) {
    return best_len;
  }
  return s.lookahead;
}
function fill_window(s) {
  var _w_size = s.w_size;
  var p, n, m, more, str;
  do {
    more = s.window_size - s.lookahead - s.strstart;
    if (s.strstart >= _w_size + (_w_size - MIN_LOOKAHEAD)) {
      arraySet(s.window, s.window, _w_size, _w_size, 0);
      s.match_start -= _w_size;
      s.strstart -= _w_size;
      s.block_start -= _w_size;
      n = s.hash_size;
      p = n;
      do {
        m = s.head[--p];
        s.head[p] = m >= _w_size ? m - _w_size : 0;
      } while (--n);
      n = _w_size;
      p = n;
      do {
        m = s.prev[--p];
        s.prev[p] = m >= _w_size ? m - _w_size : 0;
      } while (--n);
      more += _w_size;
    }
    if (s.strm.avail_in === 0) {
      break;
    }
    n = read_buf(s.strm, s.window, s.strstart + s.lookahead, more);
    s.lookahead += n;
    if (s.lookahead + s.insert >= MIN_MATCH2) {
      str = s.strstart - s.insert;
      s.ins_h = s.window[str];
      s.ins_h = (s.ins_h << s.hash_shift ^ s.window[str + 1]) & s.hash_mask;
      while (s.insert) {
        s.ins_h = (s.ins_h << s.hash_shift ^ s.window[str + MIN_MATCH2 - 1]) & s.hash_mask;
        s.prev[str & s.w_mask] = s.head[s.ins_h];
        s.head[s.ins_h] = str;
        str++;
        s.insert--;
        if (s.lookahead + s.insert < MIN_MATCH2) {
          break;
        }
      }
    }
  } while (s.lookahead < MIN_LOOKAHEAD && s.strm.avail_in !== 0);
}
function deflate_stored(s, flush) {
  var max_block_size = 65535;
  if (max_block_size > s.pending_buf_size - 5) {
    max_block_size = s.pending_buf_size - 5;
  }
  for (; ; ) {
    if (s.lookahead <= 1) {
      fill_window(s);
      if (s.lookahead === 0 && flush === Z_NO_FLUSH) {
        return BS_NEED_MORE;
      }
      if (s.lookahead === 0) {
        break;
      }
    }
    s.strstart += s.lookahead;
    s.lookahead = 0;
    var max_start = s.block_start + max_block_size;
    if (s.strstart === 0 || s.strstart >= max_start) {
      s.lookahead = s.strstart - max_start;
      s.strstart = max_start;
      flush_block_only(s, false);
      if (s.strm.avail_out === 0) {
        return BS_NEED_MORE;
      }
    }
    if (s.strstart - s.block_start >= s.w_size - MIN_LOOKAHEAD) {
      flush_block_only(s, false);
      if (s.strm.avail_out === 0) {
        return BS_NEED_MORE;
      }
    }
  }
  s.insert = 0;
  if (flush === Z_FINISH) {
    flush_block_only(s, true);
    if (s.strm.avail_out === 0) {
      return BS_FINISH_STARTED;
    }
    return BS_FINISH_DONE;
  }
  if (s.strstart > s.block_start) {
    flush_block_only(s, false);
    if (s.strm.avail_out === 0) {
      return BS_NEED_MORE;
    }
  }
  return BS_NEED_MORE;
}
function deflate_fast(s, flush) {
  var hash_head;
  var bflush;
  for (; ; ) {
    if (s.lookahead < MIN_LOOKAHEAD) {
      fill_window(s);
      if (s.lookahead < MIN_LOOKAHEAD && flush === Z_NO_FLUSH) {
        return BS_NEED_MORE;
      }
      if (s.lookahead === 0) {
        break;
      }
    }
    hash_head = 0;
    if (s.lookahead >= MIN_MATCH2) {
      s.ins_h = (s.ins_h << s.hash_shift ^ s.window[s.strstart + MIN_MATCH2 - 1]) & s.hash_mask;
      hash_head = s.prev[s.strstart & s.w_mask] = s.head[s.ins_h];
      s.head[s.ins_h] = s.strstart;
    }
    if (hash_head !== 0 && s.strstart - hash_head <= s.w_size - MIN_LOOKAHEAD) {
      s.match_length = longest_match(s, hash_head);
    }
    if (s.match_length >= MIN_MATCH2) {
      bflush = _tr_tally(s, s.strstart - s.match_start, s.match_length - MIN_MATCH2);
      s.lookahead -= s.match_length;
      if (s.match_length <= s.max_lazy_match && s.lookahead >= MIN_MATCH2) {
        s.match_length--;
        do {
          s.strstart++;
          s.ins_h = (s.ins_h << s.hash_shift ^ s.window[s.strstart + MIN_MATCH2 - 1]) & s.hash_mask;
          hash_head = s.prev[s.strstart & s.w_mask] = s.head[s.ins_h];
          s.head[s.ins_h] = s.strstart;
        } while (--s.match_length !== 0);
        s.strstart++;
      } else {
        s.strstart += s.match_length;
        s.match_length = 0;
        s.ins_h = s.window[s.strstart];
        s.ins_h = (s.ins_h << s.hash_shift ^ s.window[s.strstart + 1]) & s.hash_mask;
      }
    } else {
      bflush = _tr_tally(s, 0, s.window[s.strstart]);
      s.lookahead--;
      s.strstart++;
    }
    if (bflush) {
      flush_block_only(s, false);
      if (s.strm.avail_out === 0) {
        return BS_NEED_MORE;
      }
    }
  }
  s.insert = s.strstart < MIN_MATCH2 - 1 ? s.strstart : MIN_MATCH2 - 1;
  if (flush === Z_FINISH) {
    flush_block_only(s, true);
    if (s.strm.avail_out === 0) {
      return BS_FINISH_STARTED;
    }
    return BS_FINISH_DONE;
  }
  if (s.last_lit) {
    flush_block_only(s, false);
    if (s.strm.avail_out === 0) {
      return BS_NEED_MORE;
    }
  }
  return BS_BLOCK_DONE;
}
function deflate_slow(s, flush) {
  var hash_head;
  var bflush;
  var max_insert;
  for (; ; ) {
    if (s.lookahead < MIN_LOOKAHEAD) {
      fill_window(s);
      if (s.lookahead < MIN_LOOKAHEAD && flush === Z_NO_FLUSH) {
        return BS_NEED_MORE;
      }
      if (s.lookahead === 0) {
        break;
      }
    }
    hash_head = 0;
    if (s.lookahead >= MIN_MATCH2) {
      s.ins_h = (s.ins_h << s.hash_shift ^ s.window[s.strstart + MIN_MATCH2 - 1]) & s.hash_mask;
      hash_head = s.prev[s.strstart & s.w_mask] = s.head[s.ins_h];
      s.head[s.ins_h] = s.strstart;
    }
    s.prev_length = s.match_length;
    s.prev_match = s.match_start;
    s.match_length = MIN_MATCH2 - 1;
    if (hash_head !== 0 && s.prev_length < s.max_lazy_match && s.strstart - hash_head <= s.w_size - MIN_LOOKAHEAD) {
      s.match_length = longest_match(s, hash_head);
      if (s.match_length <= 5 && (s.strategy === Z_FILTERED || s.match_length === MIN_MATCH2 && s.strstart - s.match_start > 4096)) {
        s.match_length = MIN_MATCH2 - 1;
      }
    }
    if (s.prev_length >= MIN_MATCH2 && s.match_length <= s.prev_length) {
      max_insert = s.strstart + s.lookahead - MIN_MATCH2;
      bflush = _tr_tally(s, s.strstart - 1 - s.prev_match, s.prev_length - MIN_MATCH2);
      s.lookahead -= s.prev_length - 1;
      s.prev_length -= 2;
      do {
        if (++s.strstart <= max_insert) {
          s.ins_h = (s.ins_h << s.hash_shift ^ s.window[s.strstart + MIN_MATCH2 - 1]) & s.hash_mask;
          hash_head = s.prev[s.strstart & s.w_mask] = s.head[s.ins_h];
          s.head[s.ins_h] = s.strstart;
        }
      } while (--s.prev_length !== 0);
      s.match_available = 0;
      s.match_length = MIN_MATCH2 - 1;
      s.strstart++;
      if (bflush) {
        flush_block_only(s, false);
        if (s.strm.avail_out === 0) {
          return BS_NEED_MORE;
        }
      }
    } else if (s.match_available) {
      bflush = _tr_tally(s, 0, s.window[s.strstart - 1]);
      if (bflush) {
        flush_block_only(s, false);
      }
      s.strstart++;
      s.lookahead--;
      if (s.strm.avail_out === 0) {
        return BS_NEED_MORE;
      }
    } else {
      s.match_available = 1;
      s.strstart++;
      s.lookahead--;
    }
  }
  if (s.match_available) {
    bflush = _tr_tally(s, 0, s.window[s.strstart - 1]);
    s.match_available = 0;
  }
  s.insert = s.strstart < MIN_MATCH2 - 1 ? s.strstart : MIN_MATCH2 - 1;
  if (flush === Z_FINISH) {
    flush_block_only(s, true);
    if (s.strm.avail_out === 0) {
      return BS_FINISH_STARTED;
    }
    return BS_FINISH_DONE;
  }
  if (s.last_lit) {
    flush_block_only(s, false);
    if (s.strm.avail_out === 0) {
      return BS_NEED_MORE;
    }
  }
  return BS_BLOCK_DONE;
}
function deflate_rle(s, flush) {
  var bflush;
  var prev;
  var scan, strend;
  var _win = s.window;
  for (; ; ) {
    if (s.lookahead <= MAX_MATCH2) {
      fill_window(s);
      if (s.lookahead <= MAX_MATCH2 && flush === Z_NO_FLUSH) {
        return BS_NEED_MORE;
      }
      if (s.lookahead === 0) {
        break;
      }
    }
    s.match_length = 0;
    if (s.lookahead >= MIN_MATCH2 && s.strstart > 0) {
      scan = s.strstart - 1;
      prev = _win[scan];
      if (prev === _win[++scan] && prev === _win[++scan] && prev === _win[++scan]) {
        strend = s.strstart + MAX_MATCH2;
        do {
        } while (prev === _win[++scan] && prev === _win[++scan] && prev === _win[++scan] && prev === _win[++scan] && prev === _win[++scan] && prev === _win[++scan] && prev === _win[++scan] && prev === _win[++scan] && scan < strend);
        s.match_length = MAX_MATCH2 - (strend - scan);
        if (s.match_length > s.lookahead) {
          s.match_length = s.lookahead;
        }
      }
    }
    if (s.match_length >= MIN_MATCH2) {
      bflush = _tr_tally(s, 1, s.match_length - MIN_MATCH2);
      s.lookahead -= s.match_length;
      s.strstart += s.match_length;
      s.match_length = 0;
    } else {
      bflush = _tr_tally(s, 0, s.window[s.strstart]);
      s.lookahead--;
      s.strstart++;
    }
    if (bflush) {
      flush_block_only(s, false);
      if (s.strm.avail_out === 0) {
        return BS_NEED_MORE;
      }
    }
  }
  s.insert = 0;
  if (flush === Z_FINISH) {
    flush_block_only(s, true);
    if (s.strm.avail_out === 0) {
      return BS_FINISH_STARTED;
    }
    return BS_FINISH_DONE;
  }
  if (s.last_lit) {
    flush_block_only(s, false);
    if (s.strm.avail_out === 0) {
      return BS_NEED_MORE;
    }
  }
  return BS_BLOCK_DONE;
}
function deflate_huff(s, flush) {
  var bflush;
  for (; ; ) {
    if (s.lookahead === 0) {
      fill_window(s);
      if (s.lookahead === 0) {
        if (flush === Z_NO_FLUSH) {
          return BS_NEED_MORE;
        }
        break;
      }
    }
    s.match_length = 0;
    bflush = _tr_tally(s, 0, s.window[s.strstart]);
    s.lookahead--;
    s.strstart++;
    if (bflush) {
      flush_block_only(s, false);
      if (s.strm.avail_out === 0) {
        return BS_NEED_MORE;
      }
    }
  }
  s.insert = 0;
  if (flush === Z_FINISH) {
    flush_block_only(s, true);
    if (s.strm.avail_out === 0) {
      return BS_FINISH_STARTED;
    }
    return BS_FINISH_DONE;
  }
  if (s.last_lit) {
    flush_block_only(s, false);
    if (s.strm.avail_out === 0) {
      return BS_NEED_MORE;
    }
  }
  return BS_BLOCK_DONE;
}
function Config(good_length, max_lazy, nice_length, max_chain, func) {
  this.good_length = good_length;
  this.max_lazy = max_lazy;
  this.nice_length = nice_length;
  this.max_chain = max_chain;
  this.func = func;
}
var configuration_table;
configuration_table = [
  /*      good lazy nice chain */
  new Config(0, 0, 0, 0, deflate_stored),
  /* 0 store only */
  new Config(4, 4, 8, 4, deflate_fast),
  /* 1 max speed, no lazy matches */
  new Config(4, 5, 16, 8, deflate_fast),
  /* 2 */
  new Config(4, 6, 32, 32, deflate_fast),
  /* 3 */
  new Config(4, 4, 16, 16, deflate_slow),
  /* 4 lazy matches */
  new Config(8, 16, 32, 32, deflate_slow),
  /* 5 */
  new Config(8, 16, 128, 128, deflate_slow),
  /* 6 */
  new Config(8, 32, 128, 256, deflate_slow),
  /* 7 */
  new Config(32, 128, 258, 1024, deflate_slow),
  /* 8 */
  new Config(32, 258, 258, 4096, deflate_slow)
  /* 9 max compression */
];
function lm_init(s) {
  s.window_size = 2 * s.w_size;
  zero2(s.head);
  s.max_lazy_match = configuration_table[s.level].max_lazy;
  s.good_match = configuration_table[s.level].good_length;
  s.nice_match = configuration_table[s.level].nice_length;
  s.max_chain_length = configuration_table[s.level].max_chain;
  s.strstart = 0;
  s.block_start = 0;
  s.lookahead = 0;
  s.insert = 0;
  s.match_length = s.prev_length = MIN_MATCH2 - 1;
  s.match_available = 0;
  s.ins_h = 0;
}
function DeflateState() {
  this.strm = null;
  this.status = 0;
  this.pending_buf = null;
  this.pending_buf_size = 0;
  this.pending_out = 0;
  this.pending = 0;
  this.wrap = 0;
  this.gzhead = null;
  this.gzindex = 0;
  this.method = Z_DEFLATED;
  this.last_flush = -1;
  this.w_size = 0;
  this.w_bits = 0;
  this.w_mask = 0;
  this.window = null;
  this.window_size = 0;
  this.prev = null;
  this.head = null;
  this.ins_h = 0;
  this.hash_size = 0;
  this.hash_bits = 0;
  this.hash_mask = 0;
  this.hash_shift = 0;
  this.block_start = 0;
  this.match_length = 0;
  this.prev_match = 0;
  this.match_available = 0;
  this.strstart = 0;
  this.match_start = 0;
  this.lookahead = 0;
  this.prev_length = 0;
  this.max_chain_length = 0;
  this.max_lazy_match = 0;
  this.level = 0;
  this.strategy = 0;
  this.good_match = 0;
  this.nice_match = 0;
  this.dyn_ltree = new Buf16(HEAP_SIZE2 * 2);
  this.dyn_dtree = new Buf16((2 * D_CODES2 + 1) * 2);
  this.bl_tree = new Buf16((2 * BL_CODES2 + 1) * 2);
  zero2(this.dyn_ltree);
  zero2(this.dyn_dtree);
  zero2(this.bl_tree);
  this.l_desc = null;
  this.d_desc = null;
  this.bl_desc = null;
  this.bl_count = new Buf16(MAX_BITS2 + 1);
  this.heap = new Buf16(2 * L_CODES2 + 1);
  zero2(this.heap);
  this.heap_len = 0;
  this.heap_max = 0;
  this.depth = new Buf16(2 * L_CODES2 + 1);
  zero2(this.depth);
  this.l_buf = 0;
  this.lit_bufsize = 0;
  this.last_lit = 0;
  this.d_buf = 0;
  this.opt_len = 0;
  this.static_len = 0;
  this.matches = 0;
  this.insert = 0;
  this.bi_buf = 0;
  this.bi_valid = 0;
}
function deflateResetKeep(strm) {
  var s;
  if (!strm || !strm.state) {
    return err(strm, Z_STREAM_ERROR);
  }
  strm.total_in = strm.total_out = 0;
  strm.data_type = Z_UNKNOWN2;
  s = strm.state;
  s.pending = 0;
  s.pending_out = 0;
  if (s.wrap < 0) {
    s.wrap = -s.wrap;
  }
  s.status = s.wrap ? INIT_STATE : BUSY_STATE;
  strm.adler = s.wrap === 2 ? 0 : 1;
  s.last_flush = Z_NO_FLUSH;
  _tr_init(s);
  return Z_OK;
}
function deflateReset(strm) {
  var ret = deflateResetKeep(strm);
  if (ret === Z_OK) {
    lm_init(strm.state);
  }
  return ret;
}
function deflateInit2(strm, level, method, windowBits, memLevel, strategy) {
  if (!strm) {
    return Z_STREAM_ERROR;
  }
  var wrap = 1;
  if (level === Z_DEFAULT_COMPRESSION) {
    level = 6;
  }
  if (windowBits < 0) {
    wrap = 0;
    windowBits = -windowBits;
  } else if (windowBits > 15) {
    wrap = 2;
    windowBits -= 16;
  }
  if (memLevel < 1 || memLevel > MAX_MEM_LEVEL || method !== Z_DEFLATED || windowBits < 8 || windowBits > 15 || level < 0 || level > 9 || strategy < 0 || strategy > Z_FIXED2) {
    return err(strm, Z_STREAM_ERROR);
  }
  if (windowBits === 8) {
    windowBits = 9;
  }
  var s = new DeflateState();
  strm.state = s;
  s.strm = strm;
  s.wrap = wrap;
  s.gzhead = null;
  s.w_bits = windowBits;
  s.w_size = 1 << s.w_bits;
  s.w_mask = s.w_size - 1;
  s.hash_bits = memLevel + 7;
  s.hash_size = 1 << s.hash_bits;
  s.hash_mask = s.hash_size - 1;
  s.hash_shift = ~~((s.hash_bits + MIN_MATCH2 - 1) / MIN_MATCH2);
  s.window = new Buf8(s.w_size * 2);
  s.head = new Buf16(s.hash_size);
  s.prev = new Buf16(s.w_size);
  s.lit_bufsize = 1 << memLevel + 6;
  s.pending_buf_size = s.lit_bufsize * 4;
  s.pending_buf = new Buf8(s.pending_buf_size);
  s.d_buf = 1 * s.lit_bufsize;
  s.l_buf = (1 + 2) * s.lit_bufsize;
  s.level = level;
  s.strategy = strategy;
  s.method = method;
  return deflateReset(strm);
}
function deflate(strm, flush) {
  var old_flush, s;
  var beg, val;
  if (!strm || !strm.state || flush > Z_BLOCK || flush < 0) {
    return strm ? err(strm, Z_STREAM_ERROR) : Z_STREAM_ERROR;
  }
  s = strm.state;
  if (!strm.output || !strm.input && strm.avail_in !== 0 || s.status === FINISH_STATE && flush !== Z_FINISH) {
    return err(strm, strm.avail_out === 0 ? Z_BUF_ERROR : Z_STREAM_ERROR);
  }
  s.strm = strm;
  old_flush = s.last_flush;
  s.last_flush = flush;
  if (s.status === INIT_STATE) {
    if (s.wrap === 2) {
      strm.adler = 0;
      put_byte(s, 31);
      put_byte(s, 139);
      put_byte(s, 8);
      if (!s.gzhead) {
        put_byte(s, 0);
        put_byte(s, 0);
        put_byte(s, 0);
        put_byte(s, 0);
        put_byte(s, 0);
        put_byte(s, s.level === 9 ? 2 : s.strategy >= Z_HUFFMAN_ONLY || s.level < 2 ? 4 : 0);
        put_byte(s, OS_CODE);
        s.status = BUSY_STATE;
      } else {
        put_byte(
          s,
          (s.gzhead.text ? 1 : 0) + (s.gzhead.hcrc ? 2 : 0) + (!s.gzhead.extra ? 0 : 4) + (!s.gzhead.name ? 0 : 8) + (!s.gzhead.comment ? 0 : 16)
        );
        put_byte(s, s.gzhead.time & 255);
        put_byte(s, s.gzhead.time >> 8 & 255);
        put_byte(s, s.gzhead.time >> 16 & 255);
        put_byte(s, s.gzhead.time >> 24 & 255);
        put_byte(s, s.level === 9 ? 2 : s.strategy >= Z_HUFFMAN_ONLY || s.level < 2 ? 4 : 0);
        put_byte(s, s.gzhead.os & 255);
        if (s.gzhead.extra && s.gzhead.extra.length) {
          put_byte(s, s.gzhead.extra.length & 255);
          put_byte(s, s.gzhead.extra.length >> 8 & 255);
        }
        if (s.gzhead.hcrc) {
          strm.adler = crc32_default(strm.adler, s.pending_buf, s.pending, 0);
        }
        s.gzindex = 0;
        s.status = EXTRA_STATE;
      }
    } else {
      var header = Z_DEFLATED + (s.w_bits - 8 << 4) << 8;
      var level_flags = -1;
      if (s.strategy >= Z_HUFFMAN_ONLY || s.level < 2) {
        level_flags = 0;
      } else if (s.level < 6) {
        level_flags = 1;
      } else if (s.level === 6) {
        level_flags = 2;
      } else {
        level_flags = 3;
      }
      header |= level_flags << 6;
      if (s.strstart !== 0) {
        header |= PRESET_DICT;
      }
      header += 31 - header % 31;
      s.status = BUSY_STATE;
      putShortMSB(s, header);
      if (s.strstart !== 0) {
        putShortMSB(s, strm.adler >>> 16);
        putShortMSB(s, strm.adler & 65535);
      }
      strm.adler = 1;
    }
  }
  if (s.status === EXTRA_STATE) {
    if (s.gzhead.extra) {
      beg = s.pending;
      while (s.gzindex < (s.gzhead.extra.length & 65535)) {
        if (s.pending === s.pending_buf_size) {
          if (s.gzhead.hcrc && s.pending > beg) {
            strm.adler = crc32_default(strm.adler, s.pending_buf, s.pending - beg, beg);
          }
          flush_pending(strm);
          beg = s.pending;
          if (s.pending === s.pending_buf_size) {
            break;
          }
        }
        put_byte(s, s.gzhead.extra[s.gzindex] & 255);
        s.gzindex++;
      }
      if (s.gzhead.hcrc && s.pending > beg) {
        strm.adler = crc32_default(strm.adler, s.pending_buf, s.pending - beg, beg);
      }
      if (s.gzindex === s.gzhead.extra.length) {
        s.gzindex = 0;
        s.status = NAME_STATE;
      }
    } else {
      s.status = NAME_STATE;
    }
  }
  if (s.status === NAME_STATE) {
    if (s.gzhead.name) {
      beg = s.pending;
      do {
        if (s.pending === s.pending_buf_size) {
          if (s.gzhead.hcrc && s.pending > beg) {
            strm.adler = crc32_default(strm.adler, s.pending_buf, s.pending - beg, beg);
          }
          flush_pending(strm);
          beg = s.pending;
          if (s.pending === s.pending_buf_size) {
            val = 1;
            break;
          }
        }
        if (s.gzindex < s.gzhead.name.length) {
          val = s.gzhead.name.charCodeAt(s.gzindex++) & 255;
        } else {
          val = 0;
        }
        put_byte(s, val);
      } while (val !== 0);
      if (s.gzhead.hcrc && s.pending > beg) {
        strm.adler = crc32_default(strm.adler, s.pending_buf, s.pending - beg, beg);
      }
      if (val === 0) {
        s.gzindex = 0;
        s.status = COMMENT_STATE;
      }
    } else {
      s.status = COMMENT_STATE;
    }
  }
  if (s.status === COMMENT_STATE) {
    if (s.gzhead.comment) {
      beg = s.pending;
      do {
        if (s.pending === s.pending_buf_size) {
          if (s.gzhead.hcrc && s.pending > beg) {
            strm.adler = crc32_default(strm.adler, s.pending_buf, s.pending - beg, beg);
          }
          flush_pending(strm);
          beg = s.pending;
          if (s.pending === s.pending_buf_size) {
            val = 1;
            break;
          }
        }
        if (s.gzindex < s.gzhead.comment.length) {
          val = s.gzhead.comment.charCodeAt(s.gzindex++) & 255;
        } else {
          val = 0;
        }
        put_byte(s, val);
      } while (val !== 0);
      if (s.gzhead.hcrc && s.pending > beg) {
        strm.adler = crc32_default(strm.adler, s.pending_buf, s.pending - beg, beg);
      }
      if (val === 0) {
        s.status = HCRC_STATE;
      }
    } else {
      s.status = HCRC_STATE;
    }
  }
  if (s.status === HCRC_STATE) {
    if (s.gzhead.hcrc) {
      if (s.pending + 2 > s.pending_buf_size) {
        flush_pending(strm);
      }
      if (s.pending + 2 <= s.pending_buf_size) {
        put_byte(s, strm.adler & 255);
        put_byte(s, strm.adler >> 8 & 255);
        strm.adler = 0;
        s.status = BUSY_STATE;
      }
    } else {
      s.status = BUSY_STATE;
    }
  }
  if (s.pending !== 0) {
    flush_pending(strm);
    if (strm.avail_out === 0) {
      s.last_flush = -1;
      return Z_OK;
    }
  } else if (strm.avail_in === 0 && rank(flush) <= rank(old_flush) && flush !== Z_FINISH) {
    return err(strm, Z_BUF_ERROR);
  }
  if (s.status === FINISH_STATE && strm.avail_in !== 0) {
    return err(strm, Z_BUF_ERROR);
  }
  if (strm.avail_in !== 0 || s.lookahead !== 0 || flush !== Z_NO_FLUSH && s.status !== FINISH_STATE) {
    var bstate = s.strategy === Z_HUFFMAN_ONLY ? deflate_huff(s, flush) : s.strategy === Z_RLE ? deflate_rle(s, flush) : configuration_table[s.level].func(s, flush);
    if (bstate === BS_FINISH_STARTED || bstate === BS_FINISH_DONE) {
      s.status = FINISH_STATE;
    }
    if (bstate === BS_NEED_MORE || bstate === BS_FINISH_STARTED) {
      if (strm.avail_out === 0) {
        s.last_flush = -1;
      }
      return Z_OK;
    }
    if (bstate === BS_BLOCK_DONE) {
      if (flush === Z_PARTIAL_FLUSH) {
        _tr_align(s);
      } else if (flush !== Z_BLOCK) {
        _tr_stored_block(s, 0, 0, false);
        if (flush === Z_FULL_FLUSH) {
          zero2(s.head);
          if (s.lookahead === 0) {
            s.strstart = 0;
            s.block_start = 0;
            s.insert = 0;
          }
        }
      }
      flush_pending(strm);
      if (strm.avail_out === 0) {
        s.last_flush = -1;
        return Z_OK;
      }
    }
  }
  if (flush !== Z_FINISH) {
    return Z_OK;
  }
  if (s.wrap <= 0) {
    return Z_STREAM_END;
  }
  if (s.wrap === 2) {
    put_byte(s, strm.adler & 255);
    put_byte(s, strm.adler >> 8 & 255);
    put_byte(s, strm.adler >> 16 & 255);
    put_byte(s, strm.adler >> 24 & 255);
    put_byte(s, strm.total_in & 255);
    put_byte(s, strm.total_in >> 8 & 255);
    put_byte(s, strm.total_in >> 16 & 255);
    put_byte(s, strm.total_in >> 24 & 255);
  } else {
    putShortMSB(s, strm.adler >>> 16);
    putShortMSB(s, strm.adler & 65535);
  }
  flush_pending(strm);
  if (s.wrap > 0) {
    s.wrap = -s.wrap;
  }
  return s.pending !== 0 ? Z_OK : Z_STREAM_END;
}
function deflateEnd(strm) {
  var status2;
  if (!strm || !strm.state) {
    return Z_STREAM_ERROR;
  }
  status2 = strm.state.status;
  if (status2 !== INIT_STATE && status2 !== EXTRA_STATE && status2 !== NAME_STATE && status2 !== COMMENT_STATE && status2 !== HCRC_STATE && status2 !== BUSY_STATE && status2 !== FINISH_STATE) {
    return err(strm, Z_STREAM_ERROR);
  }
  strm.state = null;
  return status2 === BUSY_STATE ? err(strm, Z_DATA_ERROR) : Z_OK;
}

// node_modules/rollup-plugin-node-polyfills/polyfills/zlib-lib/inffast.js
var BAD = 30;
var TYPE = 12;
function inflate_fast(strm, start) {
  var state;
  var _in;
  var last;
  var _out;
  var beg;
  var end;
  var dmax;
  var wsize;
  var whave;
  var wnext;
  var s_window;
  var hold;
  var bits;
  var lcode;
  var dcode;
  var lmask;
  var dmask;
  var here;
  var op;
  var len;
  var dist;
  var from2;
  var from_source;
  var input, output;
  state = strm.state;
  _in = strm.next_in;
  input = strm.input;
  last = _in + (strm.avail_in - 5);
  _out = strm.next_out;
  output = strm.output;
  beg = _out - (start - strm.avail_out);
  end = _out + (strm.avail_out - 257);
  dmax = state.dmax;
  wsize = state.wsize;
  whave = state.whave;
  wnext = state.wnext;
  s_window = state.window;
  hold = state.hold;
  bits = state.bits;
  lcode = state.lencode;
  dcode = state.distcode;
  lmask = (1 << state.lenbits) - 1;
  dmask = (1 << state.distbits) - 1;
  top:
    do {
      if (bits < 15) {
        hold += input[_in++] << bits;
        bits += 8;
        hold += input[_in++] << bits;
        bits += 8;
      }
      here = lcode[hold & lmask];
      dolen:
        for (; ; ) {
          op = here >>> 24;
          hold >>>= op;
          bits -= op;
          op = here >>> 16 & 255;
          if (op === 0) {
            output[_out++] = here & 65535;
          } else if (op & 16) {
            len = here & 65535;
            op &= 15;
            if (op) {
              if (bits < op) {
                hold += input[_in++] << bits;
                bits += 8;
              }
              len += hold & (1 << op) - 1;
              hold >>>= op;
              bits -= op;
            }
            if (bits < 15) {
              hold += input[_in++] << bits;
              bits += 8;
              hold += input[_in++] << bits;
              bits += 8;
            }
            here = dcode[hold & dmask];
            dodist:
              for (; ; ) {
                op = here >>> 24;
                hold >>>= op;
                bits -= op;
                op = here >>> 16 & 255;
                if (op & 16) {
                  dist = here & 65535;
                  op &= 15;
                  if (bits < op) {
                    hold += input[_in++] << bits;
                    bits += 8;
                    if (bits < op) {
                      hold += input[_in++] << bits;
                      bits += 8;
                    }
                  }
                  dist += hold & (1 << op) - 1;
                  if (dist > dmax) {
                    strm.msg = "invalid distance too far back";
                    state.mode = BAD;
                    break top;
                  }
                  hold >>>= op;
                  bits -= op;
                  op = _out - beg;
                  if (dist > op) {
                    op = dist - op;
                    if (op > whave) {
                      if (state.sane) {
                        strm.msg = "invalid distance too far back";
                        state.mode = BAD;
                        break top;
                      }
                    }
                    from2 = 0;
                    from_source = s_window;
                    if (wnext === 0) {
                      from2 += wsize - op;
                      if (op < len) {
                        len -= op;
                        do {
                          output[_out++] = s_window[from2++];
                        } while (--op);
                        from2 = _out - dist;
                        from_source = output;
                      }
                    } else if (wnext < op) {
                      from2 += wsize + wnext - op;
                      op -= wnext;
                      if (op < len) {
                        len -= op;
                        do {
                          output[_out++] = s_window[from2++];
                        } while (--op);
                        from2 = 0;
                        if (wnext < len) {
                          op = wnext;
                          len -= op;
                          do {
                            output[_out++] = s_window[from2++];
                          } while (--op);
                          from2 = _out - dist;
                          from_source = output;
                        }
                      }
                    } else {
                      from2 += wnext - op;
                      if (op < len) {
                        len -= op;
                        do {
                          output[_out++] = s_window[from2++];
                        } while (--op);
                        from2 = _out - dist;
                        from_source = output;
                      }
                    }
                    while (len > 2) {
                      output[_out++] = from_source[from2++];
                      output[_out++] = from_source[from2++];
                      output[_out++] = from_source[from2++];
                      len -= 3;
                    }
                    if (len) {
                      output[_out++] = from_source[from2++];
                      if (len > 1) {
                        output[_out++] = from_source[from2++];
                      }
                    }
                  } else {
                    from2 = _out - dist;
                    do {
                      output[_out++] = output[from2++];
                      output[_out++] = output[from2++];
                      output[_out++] = output[from2++];
                      len -= 3;
                    } while (len > 2);
                    if (len) {
                      output[_out++] = output[from2++];
                      if (len > 1) {
                        output[_out++] = output[from2++];
                      }
                    }
                  }
                } else if ((op & 64) === 0) {
                  here = dcode[(here & 65535) + (hold & (1 << op) - 1)];
                  continue dodist;
                } else {
                  strm.msg = "invalid distance code";
                  state.mode = BAD;
                  break top;
                }
                break;
              }
          } else if ((op & 64) === 0) {
            here = lcode[(here & 65535) + (hold & (1 << op) - 1)];
            continue dolen;
          } else if (op & 32) {
            state.mode = TYPE;
            break top;
          } else {
            strm.msg = "invalid literal/length code";
            state.mode = BAD;
            break top;
          }
          break;
        }
    } while (_in < last && _out < end);
  len = bits >> 3;
  _in -= len;
  bits -= len << 3;
  hold &= (1 << bits) - 1;
  strm.next_in = _in;
  strm.next_out = _out;
  strm.avail_in = _in < last ? 5 + (last - _in) : 5 - (_in - last);
  strm.avail_out = _out < end ? 257 + (end - _out) : 257 - (_out - end);
  state.hold = hold;
  state.bits = bits;
  return;
}

// node_modules/rollup-plugin-node-polyfills/polyfills/zlib-lib/inftrees.js
var MAXBITS = 15;
var ENOUGH_LENS = 852;
var ENOUGH_DISTS = 592;
var CODES = 0;
var LENS = 1;
var DISTS = 2;
var lbase = [
  /* Length codes 257..285 base */
  3,
  4,
  5,
  6,
  7,
  8,
  9,
  10,
  11,
  13,
  15,
  17,
  19,
  23,
  27,
  31,
  35,
  43,
  51,
  59,
  67,
  83,
  99,
  115,
  131,
  163,
  195,
  227,
  258,
  0,
  0
];
var lext = [
  /* Length codes 257..285 extra */
  16,
  16,
  16,
  16,
  16,
  16,
  16,
  16,
  17,
  17,
  17,
  17,
  18,
  18,
  18,
  18,
  19,
  19,
  19,
  19,
  20,
  20,
  20,
  20,
  21,
  21,
  21,
  21,
  16,
  72,
  78
];
var dbase = [
  /* Distance codes 0..29 base */
  1,
  2,
  3,
  4,
  5,
  7,
  9,
  13,
  17,
  25,
  33,
  49,
  65,
  97,
  129,
  193,
  257,
  385,
  513,
  769,
  1025,
  1537,
  2049,
  3073,
  4097,
  6145,
  8193,
  12289,
  16385,
  24577,
  0,
  0
];
var dext = [
  /* Distance codes 0..29 extra */
  16,
  16,
  16,
  16,
  17,
  17,
  18,
  18,
  19,
  19,
  20,
  20,
  21,
  21,
  22,
  22,
  23,
  23,
  24,
  24,
  25,
  25,
  26,
  26,
  27,
  27,
  28,
  28,
  29,
  29,
  64,
  64
];
function inflate_table(type, lens, lens_index, codes2, table, table_index, work, opts) {
  var bits = opts.bits;
  var len = 0;
  var sym = 0;
  var min = 0, max = 0;
  var root = 0;
  var curr = 0;
  var drop = 0;
  var left = 0;
  var used = 0;
  var huff = 0;
  var incr;
  var fill2;
  var low;
  var mask;
  var next;
  var base = null;
  var base_index = 0;
  var end;
  var count = new Buf16(MAXBITS + 1);
  var offs = new Buf16(MAXBITS + 1);
  var extra = null;
  var extra_index = 0;
  var here_bits, here_op, here_val;
  for (len = 0; len <= MAXBITS; len++) {
    count[len] = 0;
  }
  for (sym = 0; sym < codes2; sym++) {
    count[lens[lens_index + sym]]++;
  }
  root = bits;
  for (max = MAXBITS; max >= 1; max--) {
    if (count[max] !== 0) {
      break;
    }
  }
  if (root > max) {
    root = max;
  }
  if (max === 0) {
    table[table_index++] = 1 << 24 | 64 << 16 | 0;
    table[table_index++] = 1 << 24 | 64 << 16 | 0;
    opts.bits = 1;
    return 0;
  }
  for (min = 1; min < max; min++) {
    if (count[min] !== 0) {
      break;
    }
  }
  if (root < min) {
    root = min;
  }
  left = 1;
  for (len = 1; len <= MAXBITS; len++) {
    left <<= 1;
    left -= count[len];
    if (left < 0) {
      return -1;
    }
  }
  if (left > 0 && (type === CODES || max !== 1)) {
    return -1;
  }
  offs[1] = 0;
  for (len = 1; len < MAXBITS; len++) {
    offs[len + 1] = offs[len] + count[len];
  }
  for (sym = 0; sym < codes2; sym++) {
    if (lens[lens_index + sym] !== 0) {
      work[offs[lens[lens_index + sym]]++] = sym;
    }
  }
  if (type === CODES) {
    base = extra = work;
    end = 19;
  } else if (type === LENS) {
    base = lbase;
    base_index -= 257;
    extra = lext;
    extra_index -= 257;
    end = 256;
  } else {
    base = dbase;
    extra = dext;
    end = -1;
  }
  huff = 0;
  sym = 0;
  len = min;
  next = table_index;
  curr = root;
  drop = 0;
  low = -1;
  used = 1 << root;
  mask = used - 1;
  if (type === LENS && used > ENOUGH_LENS || type === DISTS && used > ENOUGH_DISTS) {
    return 1;
  }
  var i = 0;
  for (; ; ) {
    i++;
    here_bits = len - drop;
    if (work[sym] < end) {
      here_op = 0;
      here_val = work[sym];
    } else if (work[sym] > end) {
      here_op = extra[extra_index + work[sym]];
      here_val = base[base_index + work[sym]];
    } else {
      here_op = 32 + 64;
      here_val = 0;
    }
    incr = 1 << len - drop;
    fill2 = 1 << curr;
    min = fill2;
    do {
      fill2 -= incr;
      table[next + (huff >> drop) + fill2] = here_bits << 24 | here_op << 16 | here_val | 0;
    } while (fill2 !== 0);
    incr = 1 << len - 1;
    while (huff & incr) {
      incr >>= 1;
    }
    if (incr !== 0) {
      huff &= incr - 1;
      huff += incr;
    } else {
      huff = 0;
    }
    sym++;
    if (--count[len] === 0) {
      if (len === max) {
        break;
      }
      len = lens[lens_index + work[sym]];
    }
    if (len > root && (huff & mask) !== low) {
      if (drop === 0) {
        drop = root;
      }
      next += min;
      curr = len - drop;
      left = 1 << curr;
      while (curr + drop < max) {
        left -= count[curr + drop];
        if (left <= 0) {
          break;
        }
        curr++;
        left <<= 1;
      }
      used += 1 << curr;
      if (type === LENS && used > ENOUGH_LENS || type === DISTS && used > ENOUGH_DISTS) {
        return 1;
      }
      low = huff & mask;
      table[low] = root << 24 | curr << 16 | next - table_index | 0;
    }
  }
  if (huff !== 0) {
    table[next + huff] = len - drop << 24 | 64 << 16 | 0;
  }
  opts.bits = root;
  return 0;
}

// node_modules/rollup-plugin-node-polyfills/polyfills/zlib-lib/inflate.js
var CODES2 = 0;
var LENS2 = 1;
var DISTS2 = 2;
var Z_FINISH2 = 4;
var Z_BLOCK2 = 5;
var Z_TREES = 6;
var Z_OK2 = 0;
var Z_STREAM_END2 = 1;
var Z_NEED_DICT = 2;
var Z_STREAM_ERROR2 = -2;
var Z_DATA_ERROR2 = -3;
var Z_MEM_ERROR = -4;
var Z_BUF_ERROR2 = -5;
var Z_DEFLATED2 = 8;
var HEAD = 1;
var FLAGS = 2;
var TIME = 3;
var OS = 4;
var EXLEN = 5;
var EXTRA = 6;
var NAME = 7;
var COMMENT = 8;
var HCRC = 9;
var DICTID = 10;
var DICT = 11;
var TYPE2 = 12;
var TYPEDO = 13;
var STORED = 14;
var COPY_ = 15;
var COPY = 16;
var TABLE = 17;
var LENLENS = 18;
var CODELENS = 19;
var LEN_ = 20;
var LEN = 21;
var LENEXT = 22;
var DIST = 23;
var DISTEXT = 24;
var MATCH = 25;
var LIT = 26;
var CHECK = 27;
var LENGTH = 28;
var DONE = 29;
var BAD2 = 30;
var MEM = 31;
var SYNC = 32;
var ENOUGH_LENS2 = 852;
var ENOUGH_DISTS2 = 592;
function zswap32(q) {
  return (q >>> 24 & 255) + (q >>> 8 & 65280) + ((q & 65280) << 8) + ((q & 255) << 24);
}
function InflateState() {
  this.mode = 0;
  this.last = false;
  this.wrap = 0;
  this.havedict = false;
  this.flags = 0;
  this.dmax = 0;
  this.check = 0;
  this.total = 0;
  this.head = null;
  this.wbits = 0;
  this.wsize = 0;
  this.whave = 0;
  this.wnext = 0;
  this.window = null;
  this.hold = 0;
  this.bits = 0;
  this.length = 0;
  this.offset = 0;
  this.extra = 0;
  this.lencode = null;
  this.distcode = null;
  this.lenbits = 0;
  this.distbits = 0;
  this.ncode = 0;
  this.nlen = 0;
  this.ndist = 0;
  this.have = 0;
  this.next = null;
  this.lens = new Buf16(320);
  this.work = new Buf16(288);
  this.lendyn = null;
  this.distdyn = null;
  this.sane = 0;
  this.back = 0;
  this.was = 0;
}
function inflateResetKeep(strm) {
  var state;
  if (!strm || !strm.state) {
    return Z_STREAM_ERROR2;
  }
  state = strm.state;
  strm.total_in = strm.total_out = state.total = 0;
  strm.msg = "";
  if (state.wrap) {
    strm.adler = state.wrap & 1;
  }
  state.mode = HEAD;
  state.last = 0;
  state.havedict = 0;
  state.dmax = 32768;
  state.head = null;
  state.hold = 0;
  state.bits = 0;
  state.lencode = state.lendyn = new Buf32(ENOUGH_LENS2);
  state.distcode = state.distdyn = new Buf32(ENOUGH_DISTS2);
  state.sane = 1;
  state.back = -1;
  return Z_OK2;
}
function inflateReset(strm) {
  var state;
  if (!strm || !strm.state) {
    return Z_STREAM_ERROR2;
  }
  state = strm.state;
  state.wsize = 0;
  state.whave = 0;
  state.wnext = 0;
  return inflateResetKeep(strm);
}
function inflateReset2(strm, windowBits) {
  var wrap;
  var state;
  if (!strm || !strm.state) {
    return Z_STREAM_ERROR2;
  }
  state = strm.state;
  if (windowBits < 0) {
    wrap = 0;
    windowBits = -windowBits;
  } else {
    wrap = (windowBits >> 4) + 1;
    if (windowBits < 48) {
      windowBits &= 15;
    }
  }
  if (windowBits && (windowBits < 8 || windowBits > 15)) {
    return Z_STREAM_ERROR2;
  }
  if (state.window !== null && state.wbits !== windowBits) {
    state.window = null;
  }
  state.wrap = wrap;
  state.wbits = windowBits;
  return inflateReset(strm);
}
function inflateInit2(strm, windowBits) {
  var ret;
  var state;
  if (!strm) {
    return Z_STREAM_ERROR2;
  }
  state = new InflateState();
  strm.state = state;
  state.window = null;
  ret = inflateReset2(strm, windowBits);
  if (ret !== Z_OK2) {
    strm.state = null;
  }
  return ret;
}
var virgin = true;
var lenfix;
var distfix;
function fixedtables(state) {
  if (virgin) {
    var sym;
    lenfix = new Buf32(512);
    distfix = new Buf32(32);
    sym = 0;
    while (sym < 144) {
      state.lens[sym++] = 8;
    }
    while (sym < 256) {
      state.lens[sym++] = 9;
    }
    while (sym < 280) {
      state.lens[sym++] = 7;
    }
    while (sym < 288) {
      state.lens[sym++] = 8;
    }
    inflate_table(LENS2, state.lens, 0, 288, lenfix, 0, state.work, {
      bits: 9
    });
    sym = 0;
    while (sym < 32) {
      state.lens[sym++] = 5;
    }
    inflate_table(DISTS2, state.lens, 0, 32, distfix, 0, state.work, {
      bits: 5
    });
    virgin = false;
  }
  state.lencode = lenfix;
  state.lenbits = 9;
  state.distcode = distfix;
  state.distbits = 5;
}
function updatewindow(strm, src, end, copy2) {
  var dist;
  var state = strm.state;
  if (state.window === null) {
    state.wsize = 1 << state.wbits;
    state.wnext = 0;
    state.whave = 0;
    state.window = new Buf8(state.wsize);
  }
  if (copy2 >= state.wsize) {
    arraySet(state.window, src, end - state.wsize, state.wsize, 0);
    state.wnext = 0;
    state.whave = state.wsize;
  } else {
    dist = state.wsize - state.wnext;
    if (dist > copy2) {
      dist = copy2;
    }
    arraySet(state.window, src, end - copy2, dist, state.wnext);
    copy2 -= dist;
    if (copy2) {
      arraySet(state.window, src, end - copy2, copy2, 0);
      state.wnext = copy2;
      state.whave = state.wsize;
    } else {
      state.wnext += dist;
      if (state.wnext === state.wsize) {
        state.wnext = 0;
      }
      if (state.whave < state.wsize) {
        state.whave += dist;
      }
    }
  }
  return 0;
}
function inflate(strm, flush) {
  var state;
  var input, output;
  var next;
  var put;
  var have, left;
  var hold;
  var bits;
  var _in, _out;
  var copy2;
  var from2;
  var from_source;
  var here = 0;
  var here_bits, here_op, here_val;
  var last_bits, last_op, last_val;
  var len;
  var ret;
  var hbuf = new Buf8(4);
  var opts;
  var n;
  var order = (
    /* permutation of code lengths */
    [16, 17, 18, 0, 8, 7, 9, 6, 10, 5, 11, 4, 12, 3, 13, 2, 14, 1, 15]
  );
  if (!strm || !strm.state || !strm.output || !strm.input && strm.avail_in !== 0) {
    return Z_STREAM_ERROR2;
  }
  state = strm.state;
  if (state.mode === TYPE2) {
    state.mode = TYPEDO;
  }
  put = strm.next_out;
  output = strm.output;
  left = strm.avail_out;
  next = strm.next_in;
  input = strm.input;
  have = strm.avail_in;
  hold = state.hold;
  bits = state.bits;
  _in = have;
  _out = left;
  ret = Z_OK2;
  inf_leave:
    for (; ; ) {
      switch (state.mode) {
        case HEAD:
          if (state.wrap === 0) {
            state.mode = TYPEDO;
            break;
          }
          while (bits < 16) {
            if (have === 0) {
              break inf_leave;
            }
            have--;
            hold += input[next++] << bits;
            bits += 8;
          }
          if (state.wrap & 2 && hold === 35615) {
            state.check = 0;
            hbuf[0] = hold & 255;
            hbuf[1] = hold >>> 8 & 255;
            state.check = crc32_default(state.check, hbuf, 2, 0);
            hold = 0;
            bits = 0;
            state.mode = FLAGS;
            break;
          }
          state.flags = 0;
          if (state.head) {
            state.head.done = false;
          }
          if (!(state.wrap & 1) || /* check if zlib header allowed */
          (((hold & 255) << 8) + (hold >> 8)) % 31) {
            strm.msg = "incorrect header check";
            state.mode = BAD2;
            break;
          }
          if ((hold & 15) !== Z_DEFLATED2) {
            strm.msg = "unknown compression method";
            state.mode = BAD2;
            break;
          }
          hold >>>= 4;
          bits -= 4;
          len = (hold & 15) + 8;
          if (state.wbits === 0) {
            state.wbits = len;
          } else if (len > state.wbits) {
            strm.msg = "invalid window size";
            state.mode = BAD2;
            break;
          }
          state.dmax = 1 << len;
          strm.adler = state.check = 1;
          state.mode = hold & 512 ? DICTID : TYPE2;
          hold = 0;
          bits = 0;
          break;
        case FLAGS:
          while (bits < 16) {
            if (have === 0) {
              break inf_leave;
            }
            have--;
            hold += input[next++] << bits;
            bits += 8;
          }
          state.flags = hold;
          if ((state.flags & 255) !== Z_DEFLATED2) {
            strm.msg = "unknown compression method";
            state.mode = BAD2;
            break;
          }
          if (state.flags & 57344) {
            strm.msg = "unknown header flags set";
            state.mode = BAD2;
            break;
          }
          if (state.head) {
            state.head.text = hold >> 8 & 1;
          }
          if (state.flags & 512) {
            hbuf[0] = hold & 255;
            hbuf[1] = hold >>> 8 & 255;
            state.check = crc32_default(state.check, hbuf, 2, 0);
          }
          hold = 0;
          bits = 0;
          state.mode = TIME;
        case TIME:
          while (bits < 32) {
            if (have === 0) {
              break inf_leave;
            }
            have--;
            hold += input[next++] << bits;
            bits += 8;
          }
          if (state.head) {
            state.head.time = hold;
          }
          if (state.flags & 512) {
            hbuf[0] = hold & 255;
            hbuf[1] = hold >>> 8 & 255;
            hbuf[2] = hold >>> 16 & 255;
            hbuf[3] = hold >>> 24 & 255;
            state.check = crc32_default(state.check, hbuf, 4, 0);
          }
          hold = 0;
          bits = 0;
          state.mode = OS;
        case OS:
          while (bits < 16) {
            if (have === 0) {
              break inf_leave;
            }
            have--;
            hold += input[next++] << bits;
            bits += 8;
          }
          if (state.head) {
            state.head.xflags = hold & 255;
            state.head.os = hold >> 8;
          }
          if (state.flags & 512) {
            hbuf[0] = hold & 255;
            hbuf[1] = hold >>> 8 & 255;
            state.check = crc32_default(state.check, hbuf, 2, 0);
          }
          hold = 0;
          bits = 0;
          state.mode = EXLEN;
        case EXLEN:
          if (state.flags & 1024) {
            while (bits < 16) {
              if (have === 0) {
                break inf_leave;
              }
              have--;
              hold += input[next++] << bits;
              bits += 8;
            }
            state.length = hold;
            if (state.head) {
              state.head.extra_len = hold;
            }
            if (state.flags & 512) {
              hbuf[0] = hold & 255;
              hbuf[1] = hold >>> 8 & 255;
              state.check = crc32_default(state.check, hbuf, 2, 0);
            }
            hold = 0;
            bits = 0;
          } else if (state.head) {
            state.head.extra = null;
          }
          state.mode = EXTRA;
        case EXTRA:
          if (state.flags & 1024) {
            copy2 = state.length;
            if (copy2 > have) {
              copy2 = have;
            }
            if (copy2) {
              if (state.head) {
                len = state.head.extra_len - state.length;
                if (!state.head.extra) {
                  state.head.extra = new Array(state.head.extra_len);
                }
                arraySet(
                  state.head.extra,
                  input,
                  next,
                  // extra field is limited to 65536 bytes
                  // - no need for additional size check
                  copy2,
                  /*len + copy > state.head.extra_max - len ? state.head.extra_max : copy,*/
                  len
                );
              }
              if (state.flags & 512) {
                state.check = crc32_default(state.check, input, copy2, next);
              }
              have -= copy2;
              next += copy2;
              state.length -= copy2;
            }
            if (state.length) {
              break inf_leave;
            }
          }
          state.length = 0;
          state.mode = NAME;
        case NAME:
          if (state.flags & 2048) {
            if (have === 0) {
              break inf_leave;
            }
            copy2 = 0;
            do {
              len = input[next + copy2++];
              if (state.head && len && state.length < 65536) {
                state.head.name += String.fromCharCode(len);
              }
            } while (len && copy2 < have);
            if (state.flags & 512) {
              state.check = crc32_default(state.check, input, copy2, next);
            }
            have -= copy2;
            next += copy2;
            if (len) {
              break inf_leave;
            }
          } else if (state.head) {
            state.head.name = null;
          }
          state.length = 0;
          state.mode = COMMENT;
        case COMMENT:
          if (state.flags & 4096) {
            if (have === 0) {
              break inf_leave;
            }
            copy2 = 0;
            do {
              len = input[next + copy2++];
              if (state.head && len && state.length < 65536) {
                state.head.comment += String.fromCharCode(len);
              }
            } while (len && copy2 < have);
            if (state.flags & 512) {
              state.check = crc32_default(state.check, input, copy2, next);
            }
            have -= copy2;
            next += copy2;
            if (len) {
              break inf_leave;
            }
          } else if (state.head) {
            state.head.comment = null;
          }
          state.mode = HCRC;
        case HCRC:
          if (state.flags & 512) {
            while (bits < 16) {
              if (have === 0) {
                break inf_leave;
              }
              have--;
              hold += input[next++] << bits;
              bits += 8;
            }
            if (hold !== (state.check & 65535)) {
              strm.msg = "header crc mismatch";
              state.mode = BAD2;
              break;
            }
            hold = 0;
            bits = 0;
          }
          if (state.head) {
            state.head.hcrc = state.flags >> 9 & 1;
            state.head.done = true;
          }
          strm.adler = state.check = 0;
          state.mode = TYPE2;
          break;
        case DICTID:
          while (bits < 32) {
            if (have === 0) {
              break inf_leave;
            }
            have--;
            hold += input[next++] << bits;
            bits += 8;
          }
          strm.adler = state.check = zswap32(hold);
          hold = 0;
          bits = 0;
          state.mode = DICT;
        case DICT:
          if (state.havedict === 0) {
            strm.next_out = put;
            strm.avail_out = left;
            strm.next_in = next;
            strm.avail_in = have;
            state.hold = hold;
            state.bits = bits;
            return Z_NEED_DICT;
          }
          strm.adler = state.check = 1;
          state.mode = TYPE2;
        case TYPE2:
          if (flush === Z_BLOCK2 || flush === Z_TREES) {
            break inf_leave;
          }
        case TYPEDO:
          if (state.last) {
            hold >>>= bits & 7;
            bits -= bits & 7;
            state.mode = CHECK;
            break;
          }
          while (bits < 3) {
            if (have === 0) {
              break inf_leave;
            }
            have--;
            hold += input[next++] << bits;
            bits += 8;
          }
          state.last = hold & 1;
          hold >>>= 1;
          bits -= 1;
          switch (hold & 3) {
            case 0:
              state.mode = STORED;
              break;
            case 1:
              fixedtables(state);
              state.mode = LEN_;
              if (flush === Z_TREES) {
                hold >>>= 2;
                bits -= 2;
                break inf_leave;
              }
              break;
            case 2:
              state.mode = TABLE;
              break;
            case 3:
              strm.msg = "invalid block type";
              state.mode = BAD2;
          }
          hold >>>= 2;
          bits -= 2;
          break;
        case STORED:
          hold >>>= bits & 7;
          bits -= bits & 7;
          while (bits < 32) {
            if (have === 0) {
              break inf_leave;
            }
            have--;
            hold += input[next++] << bits;
            bits += 8;
          }
          if ((hold & 65535) !== (hold >>> 16 ^ 65535)) {
            strm.msg = "invalid stored block lengths";
            state.mode = BAD2;
            break;
          }
          state.length = hold & 65535;
          hold = 0;
          bits = 0;
          state.mode = COPY_;
          if (flush === Z_TREES) {
            break inf_leave;
          }
        case COPY_:
          state.mode = COPY;
        case COPY:
          copy2 = state.length;
          if (copy2) {
            if (copy2 > have) {
              copy2 = have;
            }
            if (copy2 > left) {
              copy2 = left;
            }
            if (copy2 === 0) {
              break inf_leave;
            }
            arraySet(output, input, next, copy2, put);
            have -= copy2;
            next += copy2;
            left -= copy2;
            put += copy2;
            state.length -= copy2;
            break;
          }
          state.mode = TYPE2;
          break;
        case TABLE:
          while (bits < 14) {
            if (have === 0) {
              break inf_leave;
            }
            have--;
            hold += input[next++] << bits;
            bits += 8;
          }
          state.nlen = (hold & 31) + 257;
          hold >>>= 5;
          bits -= 5;
          state.ndist = (hold & 31) + 1;
          hold >>>= 5;
          bits -= 5;
          state.ncode = (hold & 15) + 4;
          hold >>>= 4;
          bits -= 4;
          if (state.nlen > 286 || state.ndist > 30) {
            strm.msg = "too many length or distance symbols";
            state.mode = BAD2;
            break;
          }
          state.have = 0;
          state.mode = LENLENS;
        case LENLENS:
          while (state.have < state.ncode) {
            while (bits < 3) {
              if (have === 0) {
                break inf_leave;
              }
              have--;
              hold += input[next++] << bits;
              bits += 8;
            }
            state.lens[order[state.have++]] = hold & 7;
            hold >>>= 3;
            bits -= 3;
          }
          while (state.have < 19) {
            state.lens[order[state.have++]] = 0;
          }
          state.lencode = state.lendyn;
          state.lenbits = 7;
          opts = {
            bits: state.lenbits
          };
          ret = inflate_table(CODES2, state.lens, 0, 19, state.lencode, 0, state.work, opts);
          state.lenbits = opts.bits;
          if (ret) {
            strm.msg = "invalid code lengths set";
            state.mode = BAD2;
            break;
          }
          state.have = 0;
          state.mode = CODELENS;
        case CODELENS:
          while (state.have < state.nlen + state.ndist) {
            for (; ; ) {
              here = state.lencode[hold & (1 << state.lenbits) - 1];
              here_bits = here >>> 24;
              here_op = here >>> 16 & 255;
              here_val = here & 65535;
              if (here_bits <= bits) {
                break;
              }
              if (have === 0) {
                break inf_leave;
              }
              have--;
              hold += input[next++] << bits;
              bits += 8;
            }
            if (here_val < 16) {
              hold >>>= here_bits;
              bits -= here_bits;
              state.lens[state.have++] = here_val;
            } else {
              if (here_val === 16) {
                n = here_bits + 2;
                while (bits < n) {
                  if (have === 0) {
                    break inf_leave;
                  }
                  have--;
                  hold += input[next++] << bits;
                  bits += 8;
                }
                hold >>>= here_bits;
                bits -= here_bits;
                if (state.have === 0) {
                  strm.msg = "invalid bit length repeat";
                  state.mode = BAD2;
                  break;
                }
                len = state.lens[state.have - 1];
                copy2 = 3 + (hold & 3);
                hold >>>= 2;
                bits -= 2;
              } else if (here_val === 17) {
                n = here_bits + 3;
                while (bits < n) {
                  if (have === 0) {
                    break inf_leave;
                  }
                  have--;
                  hold += input[next++] << bits;
                  bits += 8;
                }
                hold >>>= here_bits;
                bits -= here_bits;
                len = 0;
                copy2 = 3 + (hold & 7);
                hold >>>= 3;
                bits -= 3;
              } else {
                n = here_bits + 7;
                while (bits < n) {
                  if (have === 0) {
                    break inf_leave;
                  }
                  have--;
                  hold += input[next++] << bits;
                  bits += 8;
                }
                hold >>>= here_bits;
                bits -= here_bits;
                len = 0;
                copy2 = 11 + (hold & 127);
                hold >>>= 7;
                bits -= 7;
              }
              if (state.have + copy2 > state.nlen + state.ndist) {
                strm.msg = "invalid bit length repeat";
                state.mode = BAD2;
                break;
              }
              while (copy2--) {
                state.lens[state.have++] = len;
              }
            }
          }
          if (state.mode === BAD2) {
            break;
          }
          if (state.lens[256] === 0) {
            strm.msg = "invalid code -- missing end-of-block";
            state.mode = BAD2;
            break;
          }
          state.lenbits = 9;
          opts = {
            bits: state.lenbits
          };
          ret = inflate_table(LENS2, state.lens, 0, state.nlen, state.lencode, 0, state.work, opts);
          state.lenbits = opts.bits;
          if (ret) {
            strm.msg = "invalid literal/lengths set";
            state.mode = BAD2;
            break;
          }
          state.distbits = 6;
          state.distcode = state.distdyn;
          opts = {
            bits: state.distbits
          };
          ret = inflate_table(DISTS2, state.lens, state.nlen, state.ndist, state.distcode, 0, state.work, opts);
          state.distbits = opts.bits;
          if (ret) {
            strm.msg = "invalid distances set";
            state.mode = BAD2;
            break;
          }
          state.mode = LEN_;
          if (flush === Z_TREES) {
            break inf_leave;
          }
        case LEN_:
          state.mode = LEN;
        case LEN:
          if (have >= 6 && left >= 258) {
            strm.next_out = put;
            strm.avail_out = left;
            strm.next_in = next;
            strm.avail_in = have;
            state.hold = hold;
            state.bits = bits;
            inflate_fast(strm, _out);
            put = strm.next_out;
            output = strm.output;
            left = strm.avail_out;
            next = strm.next_in;
            input = strm.input;
            have = strm.avail_in;
            hold = state.hold;
            bits = state.bits;
            if (state.mode === TYPE2) {
              state.back = -1;
            }
            break;
          }
          state.back = 0;
          for (; ; ) {
            here = state.lencode[hold & (1 << state.lenbits) - 1];
            here_bits = here >>> 24;
            here_op = here >>> 16 & 255;
            here_val = here & 65535;
            if (here_bits <= bits) {
              break;
            }
            if (have === 0) {
              break inf_leave;
            }
            have--;
            hold += input[next++] << bits;
            bits += 8;
          }
          if (here_op && (here_op & 240) === 0) {
            last_bits = here_bits;
            last_op = here_op;
            last_val = here_val;
            for (; ; ) {
              here = state.lencode[last_val + ((hold & (1 << last_bits + last_op) - 1) >> last_bits)];
              here_bits = here >>> 24;
              here_op = here >>> 16 & 255;
              here_val = here & 65535;
              if (last_bits + here_bits <= bits) {
                break;
              }
              if (have === 0) {
                break inf_leave;
              }
              have--;
              hold += input[next++] << bits;
              bits += 8;
            }
            hold >>>= last_bits;
            bits -= last_bits;
            state.back += last_bits;
          }
          hold >>>= here_bits;
          bits -= here_bits;
          state.back += here_bits;
          state.length = here_val;
          if (here_op === 0) {
            state.mode = LIT;
            break;
          }
          if (here_op & 32) {
            state.back = -1;
            state.mode = TYPE2;
            break;
          }
          if (here_op & 64) {
            strm.msg = "invalid literal/length code";
            state.mode = BAD2;
            break;
          }
          state.extra = here_op & 15;
          state.mode = LENEXT;
        case LENEXT:
          if (state.extra) {
            n = state.extra;
            while (bits < n) {
              if (have === 0) {
                break inf_leave;
              }
              have--;
              hold += input[next++] << bits;
              bits += 8;
            }
            state.length += hold & (1 << state.extra) - 1;
            hold >>>= state.extra;
            bits -= state.extra;
            state.back += state.extra;
          }
          state.was = state.length;
          state.mode = DIST;
        case DIST:
          for (; ; ) {
            here = state.distcode[hold & (1 << state.distbits) - 1];
            here_bits = here >>> 24;
            here_op = here >>> 16 & 255;
            here_val = here & 65535;
            if (here_bits <= bits) {
              break;
            }
            if (have === 0) {
              break inf_leave;
            }
            have--;
            hold += input[next++] << bits;
            bits += 8;
          }
          if ((here_op & 240) === 0) {
            last_bits = here_bits;
            last_op = here_op;
            last_val = here_val;
            for (; ; ) {
              here = state.distcode[last_val + ((hold & (1 << last_bits + last_op) - 1) >> last_bits)];
              here_bits = here >>> 24;
              here_op = here >>> 16 & 255;
              here_val = here & 65535;
              if (last_bits + here_bits <= bits) {
                break;
              }
              if (have === 0) {
                break inf_leave;
              }
              have--;
              hold += input[next++] << bits;
              bits += 8;
            }
            hold >>>= last_bits;
            bits -= last_bits;
            state.back += last_bits;
          }
          hold >>>= here_bits;
          bits -= here_bits;
          state.back += here_bits;
          if (here_op & 64) {
            strm.msg = "invalid distance code";
            state.mode = BAD2;
            break;
          }
          state.offset = here_val;
          state.extra = here_op & 15;
          state.mode = DISTEXT;
        case DISTEXT:
          if (state.extra) {
            n = state.extra;
            while (bits < n) {
              if (have === 0) {
                break inf_leave;
              }
              have--;
              hold += input[next++] << bits;
              bits += 8;
            }
            state.offset += hold & (1 << state.extra) - 1;
            hold >>>= state.extra;
            bits -= state.extra;
            state.back += state.extra;
          }
          if (state.offset > state.dmax) {
            strm.msg = "invalid distance too far back";
            state.mode = BAD2;
            break;
          }
          state.mode = MATCH;
        case MATCH:
          if (left === 0) {
            break inf_leave;
          }
          copy2 = _out - left;
          if (state.offset > copy2) {
            copy2 = state.offset - copy2;
            if (copy2 > state.whave) {
              if (state.sane) {
                strm.msg = "invalid distance too far back";
                state.mode = BAD2;
                break;
              }
            }
            if (copy2 > state.wnext) {
              copy2 -= state.wnext;
              from2 = state.wsize - copy2;
            } else {
              from2 = state.wnext - copy2;
            }
            if (copy2 > state.length) {
              copy2 = state.length;
            }
            from_source = state.window;
          } else {
            from_source = output;
            from2 = put - state.offset;
            copy2 = state.length;
          }
          if (copy2 > left) {
            copy2 = left;
          }
          left -= copy2;
          state.length -= copy2;
          do {
            output[put++] = from_source[from2++];
          } while (--copy2);
          if (state.length === 0) {
            state.mode = LEN;
          }
          break;
        case LIT:
          if (left === 0) {
            break inf_leave;
          }
          output[put++] = state.length;
          left--;
          state.mode = LEN;
          break;
        case CHECK:
          if (state.wrap) {
            while (bits < 32) {
              if (have === 0) {
                break inf_leave;
              }
              have--;
              hold |= input[next++] << bits;
              bits += 8;
            }
            _out -= left;
            strm.total_out += _out;
            state.total += _out;
            if (_out) {
              strm.adler = state.check = /*UPDATE(state.check, put - _out, _out);*/
              state.flags ? crc32_default(state.check, output, _out, put - _out) : adler32_default(state.check, output, _out, put - _out);
            }
            _out = left;
            if ((state.flags ? hold : zswap32(hold)) !== state.check) {
              strm.msg = "incorrect data check";
              state.mode = BAD2;
              break;
            }
            hold = 0;
            bits = 0;
          }
          state.mode = LENGTH;
        case LENGTH:
          if (state.wrap && state.flags) {
            while (bits < 32) {
              if (have === 0) {
                break inf_leave;
              }
              have--;
              hold += input[next++] << bits;
              bits += 8;
            }
            if (hold !== (state.total & 4294967295)) {
              strm.msg = "incorrect length check";
              state.mode = BAD2;
              break;
            }
            hold = 0;
            bits = 0;
          }
          state.mode = DONE;
        case DONE:
          ret = Z_STREAM_END2;
          break inf_leave;
        case BAD2:
          ret = Z_DATA_ERROR2;
          break inf_leave;
        case MEM:
          return Z_MEM_ERROR;
        case SYNC:
        default:
          return Z_STREAM_ERROR2;
      }
    }
  strm.next_out = put;
  strm.avail_out = left;
  strm.next_in = next;
  strm.avail_in = have;
  state.hold = hold;
  state.bits = bits;
  if (state.wsize || _out !== strm.avail_out && state.mode < BAD2 && (state.mode < CHECK || flush !== Z_FINISH2)) {
    if (updatewindow(strm, strm.output, strm.next_out, _out - strm.avail_out)) {
      state.mode = MEM;
      return Z_MEM_ERROR;
    }
  }
  _in -= strm.avail_in;
  _out -= strm.avail_out;
  strm.total_in += _in;
  strm.total_out += _out;
  state.total += _out;
  if (state.wrap && _out) {
    strm.adler = state.check = /*UPDATE(state.check, strm.next_out - _out, _out);*/
    state.flags ? crc32_default(state.check, output, _out, strm.next_out - _out) : adler32_default(state.check, output, _out, strm.next_out - _out);
  }
  strm.data_type = state.bits + (state.last ? 64 : 0) + (state.mode === TYPE2 ? 128 : 0) + (state.mode === LEN_ || state.mode === COPY_ ? 256 : 0);
  if ((_in === 0 && _out === 0 || flush === Z_FINISH2) && ret === Z_OK2) {
    ret = Z_BUF_ERROR2;
  }
  return ret;
}
function inflateEnd(strm) {
  if (!strm || !strm.state) {
    return Z_STREAM_ERROR2;
  }
  var state = strm.state;
  if (state.window) {
    state.window = null;
  }
  strm.state = null;
  return Z_OK2;
}

// node_modules/rollup-plugin-node-polyfills/polyfills/zlib-lib/binding.js
var NONE = 0;
var DEFLATE = 1;
var INFLATE = 2;
var GZIP = 3;
var GUNZIP = 4;
var DEFLATERAW = 5;
var INFLATERAW = 6;
var UNZIP = 7;
var Z_NO_FLUSH2 = 0;
var Z_PARTIAL_FLUSH2 = 1;
var Z_SYNC_FLUSH = 2;
var Z_FULL_FLUSH2 = 3;
var Z_FINISH3 = 4;
var Z_BLOCK3 = 5;
var Z_TREES2 = 6;
var Z_OK3 = 0;
var Z_STREAM_END3 = 1;
var Z_NEED_DICT2 = 2;
var Z_ERRNO = -1;
var Z_STREAM_ERROR3 = -2;
var Z_DATA_ERROR3 = -3;
var Z_BUF_ERROR3 = -5;
var Z_NO_COMPRESSION = 0;
var Z_BEST_SPEED = 1;
var Z_BEST_COMPRESSION = 9;
var Z_DEFAULT_COMPRESSION2 = -1;
var Z_FILTERED2 = 1;
var Z_HUFFMAN_ONLY2 = 2;
var Z_RLE2 = 3;
var Z_FIXED3 = 4;
var Z_DEFAULT_STRATEGY = 0;
var Z_BINARY2 = 0;
var Z_TEXT2 = 1;
var Z_UNKNOWN3 = 2;
var Z_DEFLATED3 = 8;
function Zlib(mode) {
  if (mode < DEFLATE || mode > UNZIP)
    throw new TypeError("Bad argument");
  this.mode = mode;
  this.init_done = false;
  this.write_in_progress = false;
  this.pending_close = false;
  this.windowBits = 0;
  this.level = 0;
  this.memLevel = 0;
  this.strategy = 0;
  this.dictionary = null;
}
Zlib.prototype.init = function(windowBits, level, memLevel, strategy, dictionary) {
  this.windowBits = windowBits;
  this.level = level;
  this.memLevel = memLevel;
  this.strategy = strategy;
  if (this.mode === GZIP || this.mode === GUNZIP)
    this.windowBits += 16;
  if (this.mode === UNZIP)
    this.windowBits += 32;
  if (this.mode === DEFLATERAW || this.mode === INFLATERAW)
    this.windowBits = -this.windowBits;
  this.strm = new zstream_default();
  var status2;
  switch (this.mode) {
    case DEFLATE:
    case GZIP:
    case DEFLATERAW:
      status2 = deflateInit2(
        this.strm,
        this.level,
        Z_DEFLATED3,
        this.windowBits,
        this.memLevel,
        this.strategy
      );
      break;
    case INFLATE:
    case GUNZIP:
    case INFLATERAW:
    case UNZIP:
      status2 = inflateInit2(
        this.strm,
        this.windowBits
      );
      break;
    default:
      throw new Error("Unknown mode " + this.mode);
  }
  if (status2 !== Z_OK3) {
    this._error(status2);
    return;
  }
  this.write_in_progress = false;
  this.init_done = true;
};
Zlib.prototype.params = function() {
  throw new Error("deflateParams Not supported");
};
Zlib.prototype._writeCheck = function() {
  if (!this.init_done)
    throw new Error("write before init");
  if (this.mode === NONE)
    throw new Error("already finalized");
  if (this.write_in_progress)
    throw new Error("write already in progress");
  if (this.pending_close)
    throw new Error("close is pending");
};
Zlib.prototype.write = function(flush, input, in_off, in_len, out, out_off, out_len) {
  this._writeCheck();
  this.write_in_progress = true;
  var self2 = this;
  process.nextTick(function() {
    self2.write_in_progress = false;
    var res = self2._write(flush, input, in_off, in_len, out, out_off, out_len);
    self2.callback(res[0], res[1]);
    if (self2.pending_close)
      self2.close();
  });
  return this;
};
function bufferSet(data, offset) {
  for (var i = 0; i < data.length; i++) {
    this[offset + i] = data[i];
  }
}
Zlib.prototype.writeSync = function(flush, input, in_off, in_len, out, out_off, out_len) {
  this._writeCheck();
  return this._write(flush, input, in_off, in_len, out, out_off, out_len);
};
Zlib.prototype._write = function(flush, input, in_off, in_len, out, out_off, out_len) {
  this.write_in_progress = true;
  if (flush !== Z_NO_FLUSH2 && flush !== Z_PARTIAL_FLUSH2 && flush !== Z_SYNC_FLUSH && flush !== Z_FULL_FLUSH2 && flush !== Z_FINISH3 && flush !== Z_BLOCK3) {
    throw new Error("Invalid flush value");
  }
  if (input == null) {
    input = new Buffer(0);
    in_len = 0;
    in_off = 0;
  }
  if (out._set)
    out.set = out._set;
  else
    out.set = bufferSet;
  var strm = this.strm;
  strm.avail_in = in_len;
  strm.input = input;
  strm.next_in = in_off;
  strm.avail_out = out_len;
  strm.output = out;
  strm.next_out = out_off;
  var status2;
  switch (this.mode) {
    case DEFLATE:
    case GZIP:
    case DEFLATERAW:
      status2 = deflate(strm, flush);
      break;
    case UNZIP:
    case INFLATE:
    case GUNZIP:
    case INFLATERAW:
      status2 = inflate(strm, flush);
      break;
    default:
      throw new Error("Unknown mode " + this.mode);
  }
  if (status2 !== Z_STREAM_END3 && status2 !== Z_OK3) {
    this._error(status2);
  }
  this.write_in_progress = false;
  return [strm.avail_in, strm.avail_out];
};
Zlib.prototype.close = function() {
  if (this.write_in_progress) {
    this.pending_close = true;
    return;
  }
  this.pending_close = false;
  if (this.mode === DEFLATE || this.mode === GZIP || this.mode === DEFLATERAW) {
    deflateEnd(this.strm);
  } else {
    inflateEnd(this.strm);
  }
  this.mode = NONE;
};
var status;
Zlib.prototype.reset = function() {
  switch (this.mode) {
    case DEFLATE:
    case DEFLATERAW:
      status = deflateReset(this.strm);
      break;
    case INFLATE:
    case INFLATERAW:
      status = inflateReset(this.strm);
      break;
  }
  if (status !== Z_OK3) {
    this._error(status);
  }
};
Zlib.prototype._error = function(status2) {
  this.onerror(messages_default[status2] + ": " + this.strm.msg, status2);
  this.write_in_progress = false;
  if (this.pending_close)
    this.close();
};

// node-modules-polyfills:zlib
function assert(a, msg) {
  if (!a) {
    throw new Error(msg);
  }
}
var binding2 = {};
Object.keys(binding_exports).forEach(function(key) {
  binding2[key] = binding_exports[key];
});
binding2.Z_MIN_WINDOWBITS = 8;
binding2.Z_MAX_WINDOWBITS = 15;
binding2.Z_DEFAULT_WINDOWBITS = 15;
binding2.Z_MIN_CHUNK = 64;
binding2.Z_MAX_CHUNK = Infinity;
binding2.Z_DEFAULT_CHUNK = 16 * 1024;
binding2.Z_MIN_MEMLEVEL = 1;
binding2.Z_MAX_MEMLEVEL = 9;
binding2.Z_DEFAULT_MEMLEVEL = 8;
binding2.Z_MIN_LEVEL = -1;
binding2.Z_MAX_LEVEL = 9;
binding2.Z_DEFAULT_LEVEL = binding2.Z_DEFAULT_COMPRESSION;
var codes = {
  Z_OK: binding2.Z_OK,
  Z_STREAM_END: binding2.Z_STREAM_END,
  Z_NEED_DICT: binding2.Z_NEED_DICT,
  Z_ERRNO: binding2.Z_ERRNO,
  Z_STREAM_ERROR: binding2.Z_STREAM_ERROR,
  Z_DATA_ERROR: binding2.Z_DATA_ERROR,
  Z_MEM_ERROR: binding2.Z_MEM_ERROR,
  Z_BUF_ERROR: binding2.Z_BUF_ERROR,
  Z_VERSION_ERROR: binding2.Z_VERSION_ERROR
};
Object.keys(codes).forEach(function(k) {
  codes[codes[k]] = k;
});
function inflateRawSync(buffer, opts) {
  return zlibBufferSync(new InflateRaw(opts), buffer);
}
function zlibBufferSync(engine, buffer) {
  if (typeof buffer === "string")
    buffer = new Buffer(buffer);
  if (!Buffer.isBuffer(buffer))
    throw new TypeError("Not a string or buffer");
  var flushFlag = binding2.Z_FINISH;
  return engine._processChunk(buffer, flushFlag);
}
function Deflate(opts) {
  if (!(this instanceof Deflate))
    return new Deflate(opts);
  Zlib2.call(this, opts, binding2.DEFLATE);
}
function Inflate(opts) {
  if (!(this instanceof Inflate))
    return new Inflate(opts);
  Zlib2.call(this, opts, binding2.INFLATE);
}
function Gzip(opts) {
  if (!(this instanceof Gzip))
    return new Gzip(opts);
  Zlib2.call(this, opts, binding2.GZIP);
}
function Gunzip(opts) {
  if (!(this instanceof Gunzip))
    return new Gunzip(opts);
  Zlib2.call(this, opts, binding2.GUNZIP);
}
function DeflateRaw(opts) {
  if (!(this instanceof DeflateRaw))
    return new DeflateRaw(opts);
  Zlib2.call(this, opts, binding2.DEFLATERAW);
}
function InflateRaw(opts) {
  if (!(this instanceof InflateRaw))
    return new InflateRaw(opts);
  Zlib2.call(this, opts, binding2.INFLATERAW);
}
function Unzip(opts) {
  if (!(this instanceof Unzip))
    return new Unzip(opts);
  Zlib2.call(this, opts, binding2.UNZIP);
}
function Zlib2(opts, mode) {
  this._opts = opts = opts || {};
  this._chunkSize = opts.chunkSize || binding2.Z_DEFAULT_CHUNK;
  Transform.call(this, opts);
  if (opts.flush) {
    if (opts.flush !== binding2.Z_NO_FLUSH && opts.flush !== binding2.Z_PARTIAL_FLUSH && opts.flush !== binding2.Z_SYNC_FLUSH && opts.flush !== binding2.Z_FULL_FLUSH && opts.flush !== binding2.Z_FINISH && opts.flush !== binding2.Z_BLOCK) {
      throw new Error("Invalid flush flag: " + opts.flush);
    }
  }
  this._flushFlag = opts.flush || binding2.Z_NO_FLUSH;
  if (opts.chunkSize) {
    if (opts.chunkSize < binding2.Z_MIN_CHUNK || opts.chunkSize > binding2.Z_MAX_CHUNK) {
      throw new Error("Invalid chunk size: " + opts.chunkSize);
    }
  }
  if (opts.windowBits) {
    if (opts.windowBits < binding2.Z_MIN_WINDOWBITS || opts.windowBits > binding2.Z_MAX_WINDOWBITS) {
      throw new Error("Invalid windowBits: " + opts.windowBits);
    }
  }
  if (opts.level) {
    if (opts.level < binding2.Z_MIN_LEVEL || opts.level > binding2.Z_MAX_LEVEL) {
      throw new Error("Invalid compression level: " + opts.level);
    }
  }
  if (opts.memLevel) {
    if (opts.memLevel < binding2.Z_MIN_MEMLEVEL || opts.memLevel > binding2.Z_MAX_MEMLEVEL) {
      throw new Error("Invalid memLevel: " + opts.memLevel);
    }
  }
  if (opts.strategy) {
    if (opts.strategy != binding2.Z_FILTERED && opts.strategy != binding2.Z_HUFFMAN_ONLY && opts.strategy != binding2.Z_RLE && opts.strategy != binding2.Z_FIXED && opts.strategy != binding2.Z_DEFAULT_STRATEGY) {
      throw new Error("Invalid strategy: " + opts.strategy);
    }
  }
  if (opts.dictionary) {
    if (!Buffer.isBuffer(opts.dictionary)) {
      throw new Error("Invalid dictionary: it should be a Buffer instance");
    }
  }
  this._binding = new binding2.Zlib(mode);
  var self2 = this;
  this._hadError = false;
  this._binding.onerror = function(message, errno) {
    self2._binding = null;
    self2._hadError = true;
    var error = new Error(message);
    error.errno = errno;
    error.code = binding2.codes[errno];
    self2.emit("error", error);
  };
  var level = binding2.Z_DEFAULT_COMPRESSION;
  if (typeof opts.level === "number")
    level = opts.level;
  var strategy = binding2.Z_DEFAULT_STRATEGY;
  if (typeof opts.strategy === "number")
    strategy = opts.strategy;
  this._binding.init(
    opts.windowBits || binding2.Z_DEFAULT_WINDOWBITS,
    level,
    opts.memLevel || binding2.Z_DEFAULT_MEMLEVEL,
    strategy,
    opts.dictionary
  );
  this._buffer = new Buffer(this._chunkSize);
  this._offset = 0;
  this._closed = false;
  this._level = level;
  this._strategy = strategy;
  this.once("end", this.close);
}
inherits_default(Zlib2, Transform);
Zlib2.prototype.params = function(level, strategy, callback) {
  if (level < binding2.Z_MIN_LEVEL || level > binding2.Z_MAX_LEVEL) {
    throw new RangeError("Invalid compression level: " + level);
  }
  if (strategy != binding2.Z_FILTERED && strategy != binding2.Z_HUFFMAN_ONLY && strategy != binding2.Z_RLE && strategy != binding2.Z_FIXED && strategy != binding2.Z_DEFAULT_STRATEGY) {
    throw new TypeError("Invalid strategy: " + strategy);
  }
  if (this._level !== level || this._strategy !== strategy) {
    var self2 = this;
    this.flush(binding2.Z_SYNC_FLUSH, function() {
      self2._binding.params(level, strategy);
      if (!self2._hadError) {
        self2._level = level;
        self2._strategy = strategy;
        if (callback)
          callback();
      }
    });
  } else {
    process.nextTick(callback);
  }
};
Zlib2.prototype.reset = function() {
  return this._binding.reset();
};
Zlib2.prototype._flush = function(callback) {
  this._transform(new Buffer(0), "", callback);
};
Zlib2.prototype.flush = function(kind, callback) {
  var ws = this._writableState;
  if (typeof kind === "function" || kind === void 0 && !callback) {
    callback = kind;
    kind = binding2.Z_FULL_FLUSH;
  }
  if (ws.ended) {
    if (callback)
      process.nextTick(callback);
  } else if (ws.ending) {
    if (callback)
      this.once("end", callback);
  } else if (ws.needDrain) {
    var self2 = this;
    this.once("drain", function() {
      self2.flush(callback);
    });
  } else {
    this._flushFlag = kind;
    this.write(new Buffer(0), "", callback);
  }
};
Zlib2.prototype.close = function(callback) {
  if (callback)
    process.nextTick(callback);
  if (this._closed)
    return;
  this._closed = true;
  this._binding.close();
  var self2 = this;
  process.nextTick(function() {
    self2.emit("close");
  });
};
Zlib2.prototype._transform = function(chunk, encoding, cb) {
  var flushFlag;
  var ws = this._writableState;
  var ending = ws.ending || ws.ended;
  var last = ending && (!chunk || ws.length === chunk.length);
  if (!chunk === null && !Buffer.isBuffer(chunk))
    return cb(new Error("invalid input"));
  if (last)
    flushFlag = binding2.Z_FINISH;
  else {
    flushFlag = this._flushFlag;
    if (chunk.length >= ws.length) {
      this._flushFlag = this._opts.flush || binding2.Z_NO_FLUSH;
    }
  }
  this._processChunk(chunk, flushFlag, cb);
};
Zlib2.prototype._processChunk = function(chunk, flushFlag, cb) {
  var availInBefore = chunk && chunk.length;
  var availOutBefore = this._chunkSize - this._offset;
  var inOff = 0;
  var self2 = this;
  var async = typeof cb === "function";
  if (!async) {
    var buffers = [];
    var nread = 0;
    var error;
    this.on("error", function(er) {
      error = er;
    });
    do {
      var res = this._binding.writeSync(
        flushFlag,
        chunk,
        // in
        inOff,
        // in_off
        availInBefore,
        // in_len
        this._buffer,
        // out
        this._offset,
        //out_off
        availOutBefore
      );
    } while (!this._hadError && callback(res[0], res[1]));
    if (this._hadError) {
      throw error;
    }
    var buf = Buffer.concat(buffers, nread);
    this.close();
    return buf;
  }
  var req = this._binding.write(
    flushFlag,
    chunk,
    // in
    inOff,
    // in_off
    availInBefore,
    // in_len
    this._buffer,
    // out
    this._offset,
    //out_off
    availOutBefore
  );
  req.buffer = chunk;
  req.callback = callback;
  function callback(availInAfter, availOutAfter) {
    if (self2._hadError)
      return;
    var have = availOutBefore - availOutAfter;
    assert(have >= 0, "have should not go down");
    if (have > 0) {
      var out = self2._buffer.slice(self2._offset, self2._offset + have);
      self2._offset += have;
      if (async) {
        self2.push(out);
      } else {
        buffers.push(out);
        nread += out.length;
      }
    }
    if (availOutAfter === 0 || self2._offset >= self2._chunkSize) {
      availOutBefore = self2._chunkSize;
      self2._offset = 0;
      self2._buffer = new Buffer(self2._chunkSize);
    }
    if (availOutAfter === 0) {
      inOff += availInBefore - availInAfter;
      availInBefore = availInAfter;
      if (!async)
        return true;
      var newReq = self2._binding.write(
        flushFlag,
        chunk,
        inOff,
        availInBefore,
        self2._buffer,
        self2._offset,
        self2._chunkSize
      );
      newReq.callback = callback;
      newReq.buffer = chunk;
      return;
    }
    if (!async)
      return false;
    cb();
  }
};
inherits_default(Deflate, Zlib2);
inherits_default(Inflate, Zlib2);
inherits_default(Gzip, Zlib2);
inherits_default(Gunzip, Zlib2);
inherits_default(DeflateRaw, Zlib2);
inherits_default(InflateRaw, Zlib2);
inherits_default(Unzip, Zlib2);

// src/backend/ZipFS.ts
var decompressionMethods = {};
var CompressionMethod = /* @__PURE__ */ ((CompressionMethod2) => {
  CompressionMethod2[CompressionMethod2["STORED"] = 0] = "STORED";
  CompressionMethod2[CompressionMethod2["SHRUNK"] = 1] = "SHRUNK";
  CompressionMethod2[CompressionMethod2["REDUCED_1"] = 2] = "REDUCED_1";
  CompressionMethod2[CompressionMethod2["REDUCED_2"] = 3] = "REDUCED_2";
  CompressionMethod2[CompressionMethod2["REDUCED_3"] = 4] = "REDUCED_3";
  CompressionMethod2[CompressionMethod2["REDUCED_4"] = 5] = "REDUCED_4";
  CompressionMethod2[CompressionMethod2["IMPLODE"] = 6] = "IMPLODE";
  CompressionMethod2[CompressionMethod2["DEFLATE"] = 8] = "DEFLATE";
  CompressionMethod2[CompressionMethod2["DEFLATE64"] = 9] = "DEFLATE64";
  CompressionMethod2[CompressionMethod2["TERSE_OLD"] = 10] = "TERSE_OLD";
  CompressionMethod2[CompressionMethod2["BZIP2"] = 12] = "BZIP2";
  CompressionMethod2[CompressionMethod2["LZMA"] = 14] = "LZMA";
  CompressionMethod2[CompressionMethod2["TERSE_NEW"] = 18] = "TERSE_NEW";
  CompressionMethod2[CompressionMethod2["LZ77"] = 19] = "LZ77";
  CompressionMethod2[CompressionMethod2["WAVPACK"] = 97] = "WAVPACK";
  CompressionMethod2[CompressionMethod2["PPMD"] = 98] = "PPMD";
  return CompressionMethod2;
})(CompressionMethod || {});
function msdos2date(time, date) {
  const day = date & 31;
  const month = (date >> 5 & 15) - 1;
  const year = (date >> 9) + 1980;
  const second = time & 31;
  const minute = time >> 5 & 63;
  const hour = time >> 11;
  return new Date(year, month, day, hour, minute, second);
}
function safeToString(buff, useUTF8, start, length) {
  if (length === 0) {
    return "";
  } else if (useUTF8) {
    return buff.toString("utf8", start, start + length);
  } else {
    return ExtendedASCII.byte2str(buff.slice(start, start + length));
  }
}
var FileHeader = class {
  constructor(data) {
    this.data = data;
    if (data.readUInt32LE(0) !== 67324752) {
      throw new ApiError(22 /* EINVAL */, "Invalid Zip file: Local file header has invalid signature: " + this.data.readUInt32LE(0));
    }
  }
  versionNeeded() {
    return this.data.readUInt16LE(4);
  }
  flags() {
    return this.data.readUInt16LE(6);
  }
  compressionMethod() {
    return this.data.readUInt16LE(8);
  }
  lastModFileTime() {
    return msdos2date(this.data.readUInt16LE(10), this.data.readUInt16LE(12));
  }
  rawLastModFileTime() {
    return this.data.readUInt32LE(10);
  }
  crc32() {
    return this.data.readUInt32LE(14);
  }
  /**
   * These two values are COMPLETELY USELESS.
   *
   * Section 4.4.9:
   *   If bit 3 of the general purpose bit flag is set,
   *   these fields are set to zero in the local header and the
   *   correct values are put in the data descriptor and
   *   in the central directory.
   *
   * So we'll just use the central directory's values.
   */
  // public compressedSize(): number { return this.data.readUInt32LE(18); }
  // public uncompressedSize(): number { return this.data.readUInt32LE(22); }
  fileNameLength() {
    return this.data.readUInt16LE(26);
  }
  extraFieldLength() {
    return this.data.readUInt16LE(28);
  }
  fileName() {
    return safeToString(this.data, this.useUTF8(), 30, this.fileNameLength());
  }
  extraField() {
    const start = 30 + this.fileNameLength();
    return this.data.slice(start, start + this.extraFieldLength());
  }
  totalSize() {
    return 30 + this.fileNameLength() + this.extraFieldLength();
  }
  useUTF8() {
    return (this.flags() & 2048) === 2048;
  }
};
var FileData = class {
  constructor(header, record, data) {
    this.header = header;
    this.record = record;
    this.data = data;
  }
  decompress() {
    const compressionMethod = this.header.compressionMethod();
    const fcn = decompressionMethods[compressionMethod];
    if (fcn) {
      return fcn(this.data, this.record.compressedSize(), this.record.uncompressedSize(), this.record.flag());
    } else {
      let name = CompressionMethod[compressionMethod];
      if (!name) {
        name = `Unknown: ${compressionMethod}`;
      }
      throw new ApiError(22 /* EINVAL */, `Invalid compression method on file '${this.header.fileName()}': ${name}`);
    }
  }
  getHeader() {
    return this.header;
  }
  getRecord() {
    return this.record;
  }
  getRawData() {
    return this.data;
  }
};
var CentralDirectory = class {
  constructor(zipData, data) {
    this.zipData = zipData;
    this.data = data;
    if (this.data.readUInt32LE(0) !== 33639248) {
      throw new ApiError(22 /* EINVAL */, `Invalid Zip file: Central directory record has invalid signature: ${this.data.readUInt32LE(0)}`);
    }
    this._filename = this.produceFilename();
  }
  versionMadeBy() {
    return this.data.readUInt16LE(4);
  }
  versionNeeded() {
    return this.data.readUInt16LE(6);
  }
  flag() {
    return this.data.readUInt16LE(8);
  }
  compressionMethod() {
    return this.data.readUInt16LE(10);
  }
  lastModFileTime() {
    return msdos2date(this.data.readUInt16LE(12), this.data.readUInt16LE(14));
  }
  rawLastModFileTime() {
    return this.data.readUInt32LE(12);
  }
  crc32() {
    return this.data.readUInt32LE(16);
  }
  compressedSize() {
    return this.data.readUInt32LE(20);
  }
  uncompressedSize() {
    return this.data.readUInt32LE(24);
  }
  fileNameLength() {
    return this.data.readUInt16LE(28);
  }
  extraFieldLength() {
    return this.data.readUInt16LE(30);
  }
  fileCommentLength() {
    return this.data.readUInt16LE(32);
  }
  diskNumberStart() {
    return this.data.readUInt16LE(34);
  }
  internalAttributes() {
    return this.data.readUInt16LE(36);
  }
  externalAttributes() {
    return this.data.readUInt32LE(38);
  }
  headerRelativeOffset() {
    return this.data.readUInt32LE(42);
  }
  produceFilename() {
    const fileName = safeToString(this.data, this.useUTF8(), 46, this.fileNameLength());
    return fileName.replace(/\\/g, "/");
  }
  fileName() {
    return this._filename;
  }
  rawFileName() {
    return this.data.slice(46, 46 + this.fileNameLength());
  }
  extraField() {
    const start = 44 + this.fileNameLength();
    return this.data.slice(start, start + this.extraFieldLength());
  }
  fileComment() {
    const start = 46 + this.fileNameLength() + this.extraFieldLength();
    return safeToString(this.data, this.useUTF8(), start, this.fileCommentLength());
  }
  rawFileComment() {
    const start = 46 + this.fileNameLength() + this.extraFieldLength();
    return this.data.slice(start, start + this.fileCommentLength());
  }
  totalSize() {
    return 46 + this.fileNameLength() + this.extraFieldLength() + this.fileCommentLength();
  }
  isDirectory() {
    const fileName = this.fileName();
    return (this.externalAttributes() & 16 ? true : false) || fileName.charAt(fileName.length - 1) === "/";
  }
  isFile() {
    return !this.isDirectory();
  }
  useUTF8() {
    return (this.flag() & 2048) === 2048;
  }
  isEncrypted() {
    return (this.flag() & 1) === 1;
  }
  getFileData() {
    const start = this.headerRelativeOffset();
    const header = new FileHeader(this.zipData.slice(start));
    return new FileData(header, this, this.zipData.slice(start + header.totalSize()));
  }
  getData() {
    return this.getFileData().decompress();
  }
  getRawData() {
    return this.getFileData().getRawData();
  }
  getStats() {
    return new Stats(32768 /* FILE */, this.uncompressedSize(), 365, Date.now(), this.lastModFileTime().getTime());
  }
};
var EndOfCentralDirectory = class {
  constructor(data) {
    this.data = data;
    if (this.data.readUInt32LE(0) !== 101010256) {
      throw new ApiError(22 /* EINVAL */, `Invalid Zip file: End of central directory record has invalid signature: ${this.data.readUInt32LE(0)}`);
    }
  }
  diskNumber() {
    return this.data.readUInt16LE(4);
  }
  cdDiskNumber() {
    return this.data.readUInt16LE(6);
  }
  cdDiskEntryCount() {
    return this.data.readUInt16LE(8);
  }
  cdTotalEntryCount() {
    return this.data.readUInt16LE(10);
  }
  cdSize() {
    return this.data.readUInt32LE(12);
  }
  cdOffset() {
    return this.data.readUInt32LE(16);
  }
  cdZipCommentLength() {
    return this.data.readUInt16LE(20);
  }
  cdZipComment() {
    return safeToString(this.data, true, 22, this.cdZipCommentLength());
  }
  rawCdZipComment() {
    return this.data.slice(22, 22 + this.cdZipCommentLength());
  }
};
var ZipTOC = class {
  constructor(index, directoryEntries, eocd, data) {
    this.index = index;
    this.directoryEntries = directoryEntries;
    this.eocd = eocd;
    this.data = data;
  }
};
var _ZipFS = class extends SynchronousFileSystem {
  constructor(input, name = "") {
    super();
    this.name = name;
    this._index = new FileIndex();
    this._directoryEntries = [];
    this._eocd = null;
    this._index = input.index;
    this._directoryEntries = input.directoryEntries;
    this._eocd = input.eocd;
    this.data = input.data;
  }
  /**
   * Constructs a ZipFS instance with the given options.
   */
  static Create(opts, cb) {
    try {
      _ZipFS._computeIndex(opts.zipData, (e, zipTOC) => {
        if (zipTOC) {
          const fs2 = new _ZipFS(zipTOC, opts.name);
          cb(null, fs2);
        } else {
          cb(e);
        }
      });
    } catch (e) {
      cb(e);
    }
  }
  static CreateAsync(opts) {
    return new Promise((resolve2, reject) => {
      this.Create(opts, (error, fs2) => {
        if (error || !fs2) {
          reject(error);
        } else {
          resolve2(fs2);
        }
      });
    });
  }
  static isAvailable() {
    return true;
  }
  static RegisterDecompressionMethod(m, fcn) {
    decompressionMethods[m] = fcn;
  }
  /**
   * Locates the end of central directory record at the end of the file.
   * Throws an exception if it cannot be found.
   */
  static _getEOCD(data) {
    const startOffset = 22;
    const endOffset = Math.min(startOffset + 65535, data.length - 1);
    for (let i = startOffset; i < endOffset; i++) {
      if (data.readUInt32LE(data.length - i) === 101010256) {
        return new EndOfCentralDirectory(data.slice(data.length - i));
      }
    }
    throw new ApiError(22 /* EINVAL */, "Invalid ZIP file: Could not locate End of Central Directory signature.");
  }
  static _addToIndex(cd, index) {
    let filename = cd.fileName();
    if (filename.charAt(0) === "/") {
      throw new ApiError(1 /* EPERM */, `Unexpectedly encountered an absolute path in a zip file. Please file a bug.`);
    }
    if (filename.charAt(filename.length - 1) === "/") {
      filename = filename.substr(0, filename.length - 1);
    }
    if (cd.isDirectory()) {
      index.addPathFast("/" + filename, new DirInode(cd));
    } else {
      index.addPathFast("/" + filename, new FileInode(cd));
    }
  }
  static _computeIndex(data, cb) {
    try {
      const index = new FileIndex();
      const eocd = _ZipFS._getEOCD(data);
      if (eocd.diskNumber() !== eocd.cdDiskNumber()) {
        return cb(new ApiError(22 /* EINVAL */, "ZipFS does not support spanned zip files."));
      }
      const cdPtr = eocd.cdOffset();
      if (cdPtr === 4294967295) {
        return cb(new ApiError(22 /* EINVAL */, "ZipFS does not support Zip64."));
      }
      const cdEnd = cdPtr + eocd.cdSize();
      _ZipFS._computeIndexResponsive(data, index, cdPtr, cdEnd, cb, [], eocd);
    } catch (e) {
      cb(e);
    }
  }
  static _computeIndexResponsiveTrampoline(data, index, cdPtr, cdEnd, cb, cdEntries, eocd) {
    try {
      _ZipFS._computeIndexResponsive(data, index, cdPtr, cdEnd, cb, cdEntries, eocd);
    } catch (e) {
      cb(e);
    }
  }
  static _computeIndexResponsive(data, index, cdPtr, cdEnd, cb, cdEntries, eocd) {
    if (cdPtr < cdEnd) {
      let count = 0;
      while (count++ < 200 && cdPtr < cdEnd) {
        const cd = new CentralDirectory(data, data.slice(cdPtr));
        _ZipFS._addToIndex(cd, index);
        cdPtr += cd.totalSize();
        cdEntries.push(cd);
      }
      setImmediate_default(() => {
        _ZipFS._computeIndexResponsiveTrampoline(data, index, cdPtr, cdEnd, cb, cdEntries, eocd);
      });
    } else {
      cb(null, new ZipTOC(index, cdEntries, eocd, data));
    }
  }
  getName() {
    return _ZipFS.Name + (this.name !== "" ? ` ${this.name}` : "");
  }
  /**
   * Get the CentralDirectory object for the given path.
   */
  getCentralDirectoryEntry(path) {
    const inode = this._index.getInode(path);
    if (inode === null) {
      throw ApiError.ENOENT(path);
    }
    if (isFileInode(inode)) {
      return inode.getData();
    } else if (isDirInode(inode)) {
      return inode.getData();
    } else {
      throw ApiError.EPERM(`Invalid inode: ${inode}`);
    }
  }
  getCentralDirectoryEntryAt(index) {
    const dirEntry = this._directoryEntries[index];
    if (!dirEntry) {
      throw new RangeError(`Invalid directory index: ${index}.`);
    }
    return dirEntry;
  }
  getNumberOfCentralDirectoryEntries() {
    return this._directoryEntries.length;
  }
  getEndOfCentralDirectory() {
    return this._eocd;
  }
  diskSpace(path, cb) {
    cb(this.data.length, 0);
  }
  isReadOnly() {
    return true;
  }
  supportsLinks() {
    return false;
  }
  supportsProps() {
    return false;
  }
  supportsSynch() {
    return true;
  }
  statSync(path, isLstat) {
    const inode = this._index.getInode(path);
    if (inode === null) {
      throw ApiError.ENOENT(path);
    }
    let stats;
    if (isFileInode(inode)) {
      stats = inode.getData().getStats();
    } else if (isDirInode(inode)) {
      stats = inode.getStats();
    } else {
      throw new ApiError(22 /* EINVAL */, "Invalid inode.");
    }
    return stats;
  }
  openSync(path, flags, mode) {
    if (flags.isWriteable()) {
      throw new ApiError(1 /* EPERM */, path);
    }
    const inode = this._index.getInode(path);
    if (!inode) {
      throw ApiError.ENOENT(path);
    } else if (isFileInode(inode) || isDirInode(inode)) {
      const stats = !isDirInode(inode) ? inode.getData().getStats() : inode.getStats();
      const data = !isDirInode(inode) ? inode.getData().getData() : inode.getStats().fileData;
      switch (flags.pathExistsAction()) {
        case 1 /* THROW_EXCEPTION */:
        case 2 /* TRUNCATE_FILE */:
          throw ApiError.EEXIST(path);
        case 0 /* NOP */:
          return new NoSyncFile(this, path, flags, stats, data || void 0);
        default:
          throw new ApiError(22 /* EINVAL */, "Invalid FileMode object.");
      }
    } else {
      throw ApiError.EPERM(path);
    }
  }
  readdirSync(path) {
    const inode = this._index.getInode(path);
    if (!inode) {
      throw ApiError.ENOENT(path);
    } else if (isDirInode(inode)) {
      return inode.getListing();
    } else {
      throw ApiError.ENOTDIR(path);
    }
  }
  /**
   * Specially-optimized readfile.
   */
  readFileSync(fname, encoding, flag) {
    const fd = this.openSync(fname, flag, 420);
    try {
      const fdCast = fd;
      const fdBuff = fdCast.getBuffer();
      if (encoding === null) {
        return copyingSlice(fdBuff);
      }
      return fdBuff.toString(encoding);
    } finally {
      fd.closeSync();
    }
  }
};
var ZipFS = _ZipFS;
ZipFS.Name = "ZipFS";
ZipFS.Options = {
  zipData: {
    type: "object",
    description: "The zip file as a Buffer object.",
    validator: bufferValidator
  },
  name: {
    type: "string",
    optional: true,
    description: "The name of the zip file (optional)."
  }
};
ZipFS.CompressionMethod = CompressionMethod;
ZipFS.RegisterDecompressionMethod(8 /* DEFLATE */, (data, compressedSize, uncompressedSize) => {
  return inflateRawSync(data.slice(0, compressedSize), { chunkSize: uncompressedSize });
});
ZipFS.RegisterDecompressionMethod(0 /* STORED */, (data, compressedSize, uncompressedSize) => {
  return copyingSlice(data, 0, uncompressedSize);
});

// src/backend/IsoFS.ts
var rockRidgeIdentifier = "IEEE_P1282";
function getASCIIString(data, startIndex, length) {
  return data.toString("ascii", startIndex, startIndex + length).trim();
}
function getJolietString(data, startIndex, length) {
  if (length === 1) {
    return String.fromCharCode(data[startIndex]);
  }
  const pairs = Math.floor(length / 2);
  const chars = new Array(pairs);
  for (let i = 0; i < pairs; i++) {
    const pos = startIndex + (i << 1);
    chars[i] = String.fromCharCode(data[pos + 1] | data[pos] << 8);
  }
  return chars.join("");
}
function getDate(data, startIndex) {
  const year = parseInt(getASCIIString(data, startIndex, 4), 10);
  const mon = parseInt(getASCIIString(data, startIndex + 4, 2), 10);
  const day = parseInt(getASCIIString(data, startIndex + 6, 2), 10);
  const hour = parseInt(getASCIIString(data, startIndex + 8, 2), 10);
  const min = parseInt(getASCIIString(data, startIndex + 10, 2), 10);
  const sec = parseInt(getASCIIString(data, startIndex + 12, 2), 10);
  const hundrethsSec = parseInt(getASCIIString(data, startIndex + 14, 2), 10);
  return new Date(year, mon, day, hour, min, sec, hundrethsSec * 100);
}
function getShortFormDate(data, startIndex) {
  const yearsSince1900 = data[startIndex];
  const month = data[startIndex + 1];
  const day = data[startIndex + 2];
  const hour = data[startIndex + 3];
  const minute = data[startIndex + 4];
  const second = data[startIndex + 5];
  return new Date(yearsSince1900, month - 1, day, hour, minute, second);
}
function constructSystemUseEntry(bigData, i) {
  const data = bigData.slice(i);
  const sue = new SystemUseEntry(data);
  switch (sue.signatureWord()) {
    case 17221 /* CE */:
      return new CEEntry(data);
    case 20548 /* PD */:
      return new PDEntry(data);
    case 21328 /* SP */:
      return new SPEntry(data);
    case 21332 /* ST */:
      return new STEntry(data);
    case 17746 /* ER */:
      return new EREntry(data);
    case 17747 /* ES */:
      return new ESEntry(data);
    case 20568 /* PX */:
      return new PXEntry(data);
    case 20558 /* PN */:
      return new PNEntry(data);
    case 21324 /* SL */:
      return new SLEntry(data);
    case 20045 /* NM */:
      return new NMEntry(data);
    case 17228 /* CL */:
      return new CLEntry(data);
    case 20556 /* PL */:
      return new PLEntry(data);
    case 21061 /* RE */:
      return new REEntry(data);
    case 21574 /* TF */:
      return new TFEntry(data);
    case 21318 /* SF */:
      return new SFEntry(data);
    case 21074 /* RR */:
      return new RREntry(data);
    default:
      return sue;
  }
}
function constructSystemUseEntries(data, i, len, isoData) {
  len = len - 4;
  let entries = new Array();
  while (i < len) {
    const entry = constructSystemUseEntry(data, i);
    const length = entry.length();
    if (length === 0) {
      return entries;
    }
    i += length;
    if (entry instanceof STEntry) {
      break;
    }
    if (entry instanceof CEEntry) {
      entries = entries.concat(entry.getEntries(isoData));
    } else {
      entries.push(entry);
    }
  }
  return entries;
}
var VolumeDescriptor = class {
  constructor(data) {
    this._data = data;
  }
  type() {
    return this._data[0];
  }
  standardIdentifier() {
    return getASCIIString(this._data, 1, 5);
  }
  version() {
    return this._data[6];
  }
  data() {
    return this._data.slice(7, 2048);
  }
};
var PrimaryOrSupplementaryVolumeDescriptor = class extends VolumeDescriptor {
  constructor(data) {
    super(data);
    this._root = null;
  }
  systemIdentifier() {
    return this._getString32(8);
  }
  volumeIdentifier() {
    return this._getString32(40);
  }
  volumeSpaceSize() {
    return this._data.readUInt32LE(80);
  }
  volumeSetSize() {
    return this._data.readUInt16LE(120);
  }
  volumeSequenceNumber() {
    return this._data.readUInt16LE(124);
  }
  logicalBlockSize() {
    return this._data.readUInt16LE(128);
  }
  pathTableSize() {
    return this._data.readUInt32LE(132);
  }
  locationOfTypeLPathTable() {
    return this._data.readUInt32LE(140);
  }
  locationOfOptionalTypeLPathTable() {
    return this._data.readUInt32LE(144);
  }
  locationOfTypeMPathTable() {
    return this._data.readUInt32BE(148);
  }
  locationOfOptionalTypeMPathTable() {
    return this._data.readUInt32BE(152);
  }
  rootDirectoryEntry(isoData) {
    if (this._root === null) {
      this._root = this._constructRootDirectoryRecord(this._data.slice(156));
      this._root.rootCheckForRockRidge(isoData);
    }
    return this._root;
  }
  volumeSetIdentifier() {
    return this._getString(190, 128);
  }
  publisherIdentifier() {
    return this._getString(318, 128);
  }
  dataPreparerIdentifier() {
    return this._getString(446, 128);
  }
  applicationIdentifier() {
    return this._getString(574, 128);
  }
  copyrightFileIdentifier() {
    return this._getString(702, 38);
  }
  abstractFileIdentifier() {
    return this._getString(740, 36);
  }
  bibliographicFileIdentifier() {
    return this._getString(776, 37);
  }
  volumeCreationDate() {
    return getDate(this._data, 813);
  }
  volumeModificationDate() {
    return getDate(this._data, 830);
  }
  volumeExpirationDate() {
    return getDate(this._data, 847);
  }
  volumeEffectiveDate() {
    return getDate(this._data, 864);
  }
  fileStructureVersion() {
    return this._data[881];
  }
  applicationUsed() {
    return this._data.slice(883, 883 + 512);
  }
  reserved() {
    return this._data.slice(1395, 1395 + 653);
  }
  _getString32(idx) {
    return this._getString(idx, 32);
  }
};
var PrimaryVolumeDescriptor = class extends PrimaryOrSupplementaryVolumeDescriptor {
  constructor(data) {
    super(data);
    if (this.type() !== 1 /* PrimaryVolumeDescriptor */) {
      throw new ApiError(5 /* EIO */, `Invalid primary volume descriptor.`);
    }
  }
  name() {
    return "ISO9660";
  }
  _constructRootDirectoryRecord(data) {
    return new ISODirectoryRecord(data, -1);
  }
  _getString(idx, len) {
    return this._getString(idx, len);
  }
};
var SupplementaryVolumeDescriptor = class extends PrimaryOrSupplementaryVolumeDescriptor {
  constructor(data) {
    super(data);
    if (this.type() !== 2 /* SupplementaryVolumeDescriptor */) {
      throw new ApiError(5 /* EIO */, `Invalid supplementary volume descriptor.`);
    }
    const escapeSequence = this.escapeSequence();
    const third = escapeSequence[2];
    if (escapeSequence[0] !== 37 || escapeSequence[1] !== 47 || third !== 64 && third !== 67 && third !== 69) {
      throw new ApiError(5 /* EIO */, `Unrecognized escape sequence for SupplementaryVolumeDescriptor: ${escapeSequence.toString()}`);
    }
  }
  name() {
    return "Joliet";
  }
  escapeSequence() {
    return this._data.slice(88, 120);
  }
  _constructRootDirectoryRecord(data) {
    return new JolietDirectoryRecord(data, -1);
  }
  _getString(idx, len) {
    return getJolietString(this._data, idx, len);
  }
};
var DirectoryRecord = class {
  constructor(data, rockRidgeOffset) {
    this._suEntries = null;
    this._fileOrDir = null;
    this._data = data;
    this._rockRidgeOffset = rockRidgeOffset;
  }
  hasRockRidge() {
    return this._rockRidgeOffset > -1;
  }
  getRockRidgeOffset() {
    return this._rockRidgeOffset;
  }
  /**
   * !!ONLY VALID ON ROOT NODE!!
   * Checks if Rock Ridge is enabled, and sets the offset.
   */
  rootCheckForRockRidge(isoData) {
    const dir = this.getDirectory(isoData);
    this._rockRidgeOffset = dir.getDotEntry(isoData)._getRockRidgeOffset(isoData);
    if (this._rockRidgeOffset > -1) {
      this._fileOrDir = null;
    }
  }
  length() {
    return this._data[0];
  }
  extendedAttributeRecordLength() {
    return this._data[1];
  }
  lba() {
    return this._data.readUInt32LE(2) * 2048;
  }
  dataLength() {
    return this._data.readUInt32LE(10);
  }
  recordingDate() {
    return getShortFormDate(this._data, 18);
  }
  fileFlags() {
    return this._data[25];
  }
  fileUnitSize() {
    return this._data[26];
  }
  interleaveGapSize() {
    return this._data[27];
  }
  volumeSequenceNumber() {
    return this._data.readUInt16LE(28);
  }
  identifier() {
    return this._getString(33, this._data[32]);
  }
  fileName(isoData) {
    if (this.hasRockRidge()) {
      const fn = this._rockRidgeFilename(isoData);
      if (fn !== null) {
        return fn;
      }
    }
    const ident = this.identifier();
    if (this.isDirectory(isoData)) {
      return ident;
    }
    const versionSeparator = ident.indexOf(";");
    if (versionSeparator === -1) {
      return ident;
    } else if (ident[versionSeparator - 1] === ".") {
      return ident.slice(0, versionSeparator - 1);
    } else {
      return ident.slice(0, versionSeparator);
    }
  }
  isDirectory(isoData) {
    let rv = !!(this.fileFlags() & 2 /* Directory */);
    if (!rv && this.hasRockRidge()) {
      rv = this.getSUEntries(isoData).filter((e) => e instanceof CLEntry).length > 0;
    }
    return rv;
  }
  isSymlink(isoData) {
    return this.hasRockRidge() && this.getSUEntries(isoData).filter((e) => e instanceof SLEntry).length > 0;
  }
  getSymlinkPath(isoData) {
    let p = "";
    const entries = this.getSUEntries(isoData);
    const getStr = this._getGetString();
    for (const entry of entries) {
      if (entry instanceof SLEntry) {
        const components = entry.componentRecords();
        for (const component of components) {
          const flags = component.flags();
          if (flags & 2 /* CURRENT */) {
            p += "./";
          } else if (flags & 4 /* PARENT */) {
            p += "../";
          } else if (flags & 8 /* ROOT */) {
            p += "/";
          } else {
            p += component.content(getStr);
            if (!(flags & 1 /* CONTINUE */)) {
              p += "/";
            }
          }
        }
        if (!entry.continueFlag()) {
          break;
        }
      }
    }
    if (p.length > 1 && p[p.length - 1] === "/") {
      return p.slice(0, p.length - 1);
    } else {
      return p;
    }
  }
  getFile(isoData) {
    if (this.isDirectory(isoData)) {
      throw new Error(`Tried to get a File from a directory.`);
    }
    if (this._fileOrDir === null) {
      this._fileOrDir = isoData.slice(this.lba(), this.lba() + this.dataLength());
    }
    return this._fileOrDir;
  }
  getDirectory(isoData) {
    if (!this.isDirectory(isoData)) {
      throw new Error(`Tried to get a Directory from a file.`);
    }
    if (this._fileOrDir === null) {
      this._fileOrDir = this._constructDirectory(isoData);
    }
    return this._fileOrDir;
  }
  getSUEntries(isoData) {
    if (!this._suEntries) {
      this._constructSUEntries(isoData);
    }
    return this._suEntries;
  }
  _rockRidgeFilename(isoData) {
    const nmEntries = this.getSUEntries(isoData).filter((e) => e instanceof NMEntry);
    if (nmEntries.length === 0 || nmEntries[0].flags() & (2 /* CURRENT */ | 4 /* PARENT */)) {
      return null;
    }
    let str = "";
    const getString = this._getGetString();
    for (const e of nmEntries) {
      str += e.name(getString);
      if (!(e.flags() & 1 /* CONTINUE */)) {
        break;
      }
    }
    return str;
  }
  _constructSUEntries(isoData) {
    let i = 33 + this._data[32];
    if (i % 2 === 1) {
      i++;
    }
    i += this._rockRidgeOffset;
    this._suEntries = constructSystemUseEntries(this._data, i, this.length(), isoData);
  }
  /**
   * !!ONLY VALID ON FIRST ENTRY OF ROOT DIRECTORY!!
   * Returns -1 if rock ridge is not enabled. Otherwise, returns the offset
   * at which system use fields begin.
   */
  _getRockRidgeOffset(isoData) {
    this._rockRidgeOffset = 0;
    const suEntries = this.getSUEntries(isoData);
    if (suEntries.length > 0) {
      const spEntry = suEntries[0];
      if (spEntry instanceof SPEntry && spEntry.checkBytesPass()) {
        for (let i = 1; i < suEntries.length; i++) {
          const entry = suEntries[i];
          if (entry instanceof RREntry || entry instanceof EREntry && entry.extensionIdentifier() === rockRidgeIdentifier) {
            return spEntry.bytesSkipped();
          }
        }
      }
    }
    this._rockRidgeOffset = -1;
    return -1;
  }
};
var ISODirectoryRecord = class extends DirectoryRecord {
  constructor(data, rockRidgeOffset) {
    super(data, rockRidgeOffset);
  }
  _getString(i, len) {
    return getASCIIString(this._data, i, len);
  }
  _constructDirectory(isoData) {
    return new ISODirectory(this, isoData);
  }
  _getGetString() {
    return getASCIIString;
  }
};
var JolietDirectoryRecord = class extends DirectoryRecord {
  constructor(data, rockRidgeOffset) {
    super(data, rockRidgeOffset);
  }
  _getString(i, len) {
    return getJolietString(this._data, i, len);
  }
  _constructDirectory(isoData) {
    return new JolietDirectory(this, isoData);
  }
  _getGetString() {
    return getJolietString;
  }
};
var SystemUseEntry = class {
  constructor(data) {
    this._data = data;
  }
  signatureWord() {
    return this._data.readUInt16BE(0);
  }
  signatureWordString() {
    return getASCIIString(this._data, 0, 2);
  }
  length() {
    return this._data[2];
  }
  suVersion() {
    return this._data[3];
  }
};
var CEEntry = class extends SystemUseEntry {
  constructor(data) {
    super(data);
    this._entries = null;
  }
  /**
   * Logical block address of the continuation area.
   */
  continuationLba() {
    return this._data.readUInt32LE(4);
  }
  /**
   * Offset into the logical block.
   */
  continuationLbaOffset() {
    return this._data.readUInt32LE(12);
  }
  /**
   * Length of the continuation area.
   */
  continuationLength() {
    return this._data.readUInt32LE(20);
  }
  getEntries(isoData) {
    if (!this._entries) {
      const start = this.continuationLba() * 2048 + this.continuationLbaOffset();
      this._entries = constructSystemUseEntries(isoData, start, this.continuationLength(), isoData);
    }
    return this._entries;
  }
};
var PDEntry = class extends SystemUseEntry {
  constructor(data) {
    super(data);
  }
};
var SPEntry = class extends SystemUseEntry {
  constructor(data) {
    super(data);
  }
  checkBytesPass() {
    return this._data[4] === 190 && this._data[5] === 239;
  }
  bytesSkipped() {
    return this._data[6];
  }
};
var STEntry = class extends SystemUseEntry {
  constructor(data) {
    super(data);
  }
};
var EREntry = class extends SystemUseEntry {
  constructor(data) {
    super(data);
  }
  identifierLength() {
    return this._data[4];
  }
  descriptorLength() {
    return this._data[5];
  }
  sourceLength() {
    return this._data[6];
  }
  extensionVersion() {
    return this._data[7];
  }
  extensionIdentifier() {
    return getASCIIString(this._data, 8, this.identifierLength());
  }
  extensionDescriptor() {
    return getASCIIString(this._data, 8 + this.identifierLength(), this.descriptorLength());
  }
  extensionSource() {
    return getASCIIString(this._data, 8 + this.identifierLength() + this.descriptorLength(), this.sourceLength());
  }
};
var ESEntry = class extends SystemUseEntry {
  constructor(data) {
    super(data);
  }
  extensionSequence() {
    return this._data[4];
  }
};
var RREntry = class extends SystemUseEntry {
  constructor(data) {
    super(data);
  }
};
var PXEntry = class extends SystemUseEntry {
  constructor(data) {
    super(data);
  }
  mode() {
    return this._data.readUInt32LE(4);
  }
  fileLinks() {
    return this._data.readUInt32LE(12);
  }
  uid() {
    return this._data.readUInt32LE(20);
  }
  gid() {
    return this._data.readUInt32LE(28);
  }
  inode() {
    return this._data.readUInt32LE(36);
  }
};
var PNEntry = class extends SystemUseEntry {
  constructor(data) {
    super(data);
  }
  devTHigh() {
    return this._data.readUInt32LE(4);
  }
  devTLow() {
    return this._data.readUInt32LE(12);
  }
};
var SLEntry = class extends SystemUseEntry {
  constructor(data) {
    super(data);
  }
  flags() {
    return this._data[4];
  }
  continueFlag() {
    return this.flags() & 1;
  }
  componentRecords() {
    const records = new Array();
    let i = 5;
    while (i < this.length()) {
      const record = new SLComponentRecord(this._data.slice(i));
      records.push(record);
      i += record.length();
    }
    return records;
  }
};
var SLComponentRecord = class {
  constructor(data) {
    this._data = data;
  }
  flags() {
    return this._data[0];
  }
  length() {
    return 2 + this.componentLength();
  }
  componentLength() {
    return this._data[1];
  }
  content(getString) {
    return getString(this._data, 2, this.componentLength());
  }
};
var NMEntry = class extends SystemUseEntry {
  constructor(data) {
    super(data);
  }
  flags() {
    return this._data[4];
  }
  name(getString) {
    return getString(this._data, 5, this.length() - 5);
  }
};
var CLEntry = class extends SystemUseEntry {
  constructor(data) {
    super(data);
  }
  childDirectoryLba() {
    return this._data.readUInt32LE(4);
  }
};
var PLEntry = class extends SystemUseEntry {
  constructor(data) {
    super(data);
  }
  parentDirectoryLba() {
    return this._data.readUInt32LE(4);
  }
};
var REEntry = class extends SystemUseEntry {
  constructor(data) {
    super(data);
  }
};
var TFEntry = class extends SystemUseEntry {
  constructor(data) {
    super(data);
  }
  flags() {
    return this._data[4];
  }
  creation() {
    if (this.flags() & 1 /* CREATION */) {
      if (this._longFormDates()) {
        return getDate(this._data, 5);
      } else {
        return getShortFormDate(this._data, 5);
      }
    } else {
      return null;
    }
  }
  modify() {
    if (this.flags() & 2 /* MODIFY */) {
      const previousDates = this.flags() & 1 /* CREATION */ ? 1 : 0;
      if (this._longFormDates()) {
        return getDate(this._data, 5 + previousDates * 17);
      } else {
        return getShortFormDate(this._data, 5 + previousDates * 7);
      }
    } else {
      return null;
    }
  }
  access() {
    if (this.flags() & 4 /* ACCESS */) {
      let previousDates = this.flags() & 1 /* CREATION */ ? 1 : 0;
      previousDates += this.flags() & 2 /* MODIFY */ ? 1 : 0;
      if (this._longFormDates()) {
        return getDate(this._data, 5 + previousDates * 17);
      } else {
        return getShortFormDate(this._data, 5 + previousDates * 7);
      }
    } else {
      return null;
    }
  }
  backup() {
    if (this.flags() & 16 /* BACKUP */) {
      let previousDates = this.flags() & 1 /* CREATION */ ? 1 : 0;
      previousDates += this.flags() & 2 /* MODIFY */ ? 1 : 0;
      previousDates += this.flags() & 4 /* ACCESS */ ? 1 : 0;
      if (this._longFormDates()) {
        return getDate(this._data, 5 + previousDates * 17);
      } else {
        return getShortFormDate(this._data, 5 + previousDates * 7);
      }
    } else {
      return null;
    }
  }
  expiration() {
    if (this.flags() & 32 /* EXPIRATION */) {
      let previousDates = this.flags() & 1 /* CREATION */ ? 1 : 0;
      previousDates += this.flags() & 2 /* MODIFY */ ? 1 : 0;
      previousDates += this.flags() & 4 /* ACCESS */ ? 1 : 0;
      previousDates += this.flags() & 16 /* BACKUP */ ? 1 : 0;
      if (this._longFormDates()) {
        return getDate(this._data, 5 + previousDates * 17);
      } else {
        return getShortFormDate(this._data, 5 + previousDates * 7);
      }
    } else {
      return null;
    }
  }
  effective() {
    if (this.flags() & 64 /* EFFECTIVE */) {
      let previousDates = this.flags() & 1 /* CREATION */ ? 1 : 0;
      previousDates += this.flags() & 2 /* MODIFY */ ? 1 : 0;
      previousDates += this.flags() & 4 /* ACCESS */ ? 1 : 0;
      previousDates += this.flags() & 16 /* BACKUP */ ? 1 : 0;
      previousDates += this.flags() & 32 /* EXPIRATION */ ? 1 : 0;
      if (this._longFormDates()) {
        return getDate(this._data, 5 + previousDates * 17);
      } else {
        return getShortFormDate(this._data, 5 + previousDates * 7);
      }
    } else {
      return null;
    }
  }
  _longFormDates() {
    return !!(this.flags() && 128 /* LONG_FORM */);
  }
};
var SFEntry = class extends SystemUseEntry {
  constructor(data) {
    super(data);
  }
  virtualSizeHigh() {
    return this._data.readUInt32LE(4);
  }
  virtualSizeLow() {
    return this._data.readUInt32LE(12);
  }
  tableDepth() {
    return this._data[20];
  }
};
var Directory = class {
  constructor(record, isoData) {
    this._fileList = [];
    this._fileMap = {};
    this._record = record;
    let i = record.lba();
    let iLimit = i + record.dataLength();
    if (!(record.fileFlags() & 2 /* Directory */)) {
      const cl = record.getSUEntries(isoData).filter((e) => e instanceof CLEntry)[0];
      i = cl.childDirectoryLba() * 2048;
      iLimit = Infinity;
    }
    while (i < iLimit) {
      const len = isoData[i];
      if (len === 0) {
        i++;
        continue;
      }
      const r = this._constructDirectoryRecord(isoData.slice(i));
      const fname = r.fileName(isoData);
      if (fname !== "\0" && fname !== "") {
        if (!r.hasRockRidge() || r.getSUEntries(isoData).filter((e) => e instanceof REEntry).length === 0) {
          this._fileMap[fname] = r;
          this._fileList.push(fname);
        }
      } else if (iLimit === Infinity) {
        iLimit = i + r.dataLength();
      }
      i += r.length();
    }
  }
  /**
   * Get the record with the given name.
   * Returns undefined if not present.
   */
  getRecord(name) {
    return this._fileMap[name];
  }
  getFileList() {
    return this._fileList;
  }
  getDotEntry(isoData) {
    return this._constructDirectoryRecord(isoData.slice(this._record.lba()));
  }
};
var ISODirectory = class extends Directory {
  constructor(record, isoData) {
    super(record, isoData);
  }
  _constructDirectoryRecord(data) {
    return new ISODirectoryRecord(data, this._record.getRockRidgeOffset());
  }
};
var JolietDirectory = class extends Directory {
  constructor(record, isoData) {
    super(record, isoData);
  }
  _constructDirectoryRecord(data) {
    return new JolietDirectoryRecord(data, this._record.getRockRidgeOffset());
  }
};
var _IsoFS = class extends SynchronousFileSystem {
  /**
   * **Deprecated. Please use IsoFS.Create() method instead.**
   *
   * Constructs a read-only file system from the given ISO.
   * @param data The ISO file in a buffer.
   * @param name The name of the ISO (optional; used for debug messages / identification via getName()).
   */
  constructor(data, name = "") {
    super();
    this._data = data;
    let vdTerminatorFound = false;
    let i = 16 * 2048;
    const candidateVDs = new Array();
    while (!vdTerminatorFound) {
      const slice2 = data.slice(i);
      const vd = new VolumeDescriptor(slice2);
      switch (vd.type()) {
        case 1 /* PrimaryVolumeDescriptor */:
          candidateVDs.push(new PrimaryVolumeDescriptor(slice2));
          break;
        case 2 /* SupplementaryVolumeDescriptor */:
          candidateVDs.push(new SupplementaryVolumeDescriptor(slice2));
          break;
        case 255 /* VolumeDescriptorSetTerminator */:
          vdTerminatorFound = true;
          break;
      }
      i += 2048;
    }
    if (candidateVDs.length === 0) {
      throw new ApiError(5 /* EIO */, `Unable to find a suitable volume descriptor.`);
    }
    candidateVDs.forEach((v) => {
      if (!this._pvd || this._pvd.type() !== 2 /* SupplementaryVolumeDescriptor */) {
        this._pvd = v;
      }
    });
    this._root = this._pvd.rootDirectoryEntry(data);
    this._name = name;
  }
  /**
   * Creates an IsoFS instance with the given options.
   */
  static Create(opts, cb) {
    try {
      cb(null, new _IsoFS(opts.data, opts.name));
    } catch (e) {
      cb(e);
    }
  }
  static CreateAsync(opts) {
    return new Promise((resolve2, reject) => {
      this.Create(opts, (error, fs2) => {
        if (error || !fs2) {
          reject(error);
        } else {
          resolve2(fs2);
        }
      });
    });
  }
  static isAvailable() {
    return true;
  }
  getName() {
    let name = `IsoFS${this._name}${this._pvd ? `-${this._pvd.name()}` : ""}`;
    if (this._root && this._root.hasRockRidge()) {
      name += `-RockRidge`;
    }
    return name;
  }
  diskSpace(path, cb) {
    cb(this._data.length, 0);
  }
  isReadOnly() {
    return true;
  }
  supportsLinks() {
    return false;
  }
  supportsProps() {
    return false;
  }
  supportsSynch() {
    return true;
  }
  statSync(p, isLstat) {
    const record = this._getDirectoryRecord(p);
    if (record === null) {
      throw ApiError.ENOENT(p);
    }
    return this._getStats(p, record);
  }
  openSync(p, flags, mode) {
    if (flags.isWriteable()) {
      throw new ApiError(1 /* EPERM */, p);
    }
    const record = this._getDirectoryRecord(p);
    if (!record) {
      throw ApiError.ENOENT(p);
    } else if (record.isSymlink(this._data)) {
      return this.openSync(resolve(p, record.getSymlinkPath(this._data)), flags, mode);
    } else {
      const data = !record.isDirectory(this._data) ? record.getFile(this._data) : void 0;
      const stats = this._getStats(p, record);
      switch (flags.pathExistsAction()) {
        case 1 /* THROW_EXCEPTION */:
        case 2 /* TRUNCATE_FILE */:
          throw ApiError.EEXIST(p);
        case 0 /* NOP */:
          return new NoSyncFile(this, p, flags, stats, data);
        default:
          throw new ApiError(22 /* EINVAL */, "Invalid FileMode object.");
      }
    }
  }
  readdirSync(path) {
    const record = this._getDirectoryRecord(path);
    if (!record) {
      throw ApiError.ENOENT(path);
    } else if (record.isDirectory(this._data)) {
      return record.getDirectory(this._data).getFileList().slice(0);
    } else {
      throw ApiError.ENOTDIR(path);
    }
  }
  /**
   * Specially-optimized readfile.
   */
  readFileSync(fname, encoding, flag) {
    const fd = this.openSync(fname, flag, 420);
    try {
      const fdCast = fd;
      const fdBuff = fdCast.getBuffer();
      if (encoding === null) {
        return copyingSlice(fdBuff);
      }
      return fdBuff.toString(encoding);
    } finally {
      fd.closeSync();
    }
  }
  _getDirectoryRecord(path) {
    if (path === "/") {
      return this._root;
    }
    const components = path.split("/").slice(1);
    let dir = this._root;
    for (const component of components) {
      if (dir.isDirectory(this._data)) {
        dir = dir.getDirectory(this._data).getRecord(component);
        if (!dir) {
          return null;
        }
      } else {
        return null;
      }
    }
    return dir;
  }
  _getStats(p, record) {
    if (record.isSymlink(this._data)) {
      const newP = resolve(p, record.getSymlinkPath(this._data));
      const dirRec = this._getDirectoryRecord(newP);
      if (!dirRec) {
        return null;
      }
      return this._getStats(newP, dirRec);
    } else {
      const len = record.dataLength();
      let mode = 365;
      const date = record.recordingDate().getTime();
      let atime = date;
      let mtime = date;
      let ctime = date;
      if (record.hasRockRidge()) {
        const entries = record.getSUEntries(this._data);
        for (const entry of entries) {
          if (entry instanceof PXEntry) {
            mode = entry.mode();
          } else if (entry instanceof TFEntry) {
            const flags = entry.flags();
            if (flags & 4 /* ACCESS */) {
              atime = entry.access().getTime();
            }
            if (flags & 2 /* MODIFY */) {
              mtime = entry.modify().getTime();
            }
            if (flags & 1 /* CREATION */) {
              ctime = entry.creation().getTime();
            }
          }
        }
      }
      mode = mode & 365;
      return new Stats(record.isDirectory(this._data) ? 16384 /* DIRECTORY */ : 32768 /* FILE */, len, mode, atime, mtime, ctime);
    }
  }
};
var IsoFS = _IsoFS;
IsoFS.Name = "IsoFS";
IsoFS.Options = {
  data: {
    type: "object",
    description: "The ISO file in a buffer",
    validator: bufferValidator
  }
};

// src/core/backends.ts
[AsyncMirror, DropboxFileSystem, EmscriptenFileSystem, FileSystemAccessFileSystem, FolderAdapter, InMemoryFileSystem, IndexedDBFileSystem, IsoFS, LocalStorageFileSystem, MountableFileSystem, OverlayFS, WorkerFS, HTTPRequest, ZipFS].forEach(
  (fsType) => {
    const create = fsType.Create;
    fsType.Create = function(opts, cb) {
      const oneArg = typeof opts === "function";
      const normalizedCb = oneArg ? opts : cb;
      const normalizedOpts = oneArg ? {} : opts;
      function wrappedCb(e) {
        if (e) {
          normalizedCb(e);
        } else {
          create.call(fsType, normalizedOpts, normalizedCb);
        }
      }
      checkOptions(fsType, normalizedOpts, wrappedCb);
    };
  }
);
var Backends = {
  AsyncMirror,
  Dropbox: DropboxFileSystem,
  Emscripten: EmscriptenFileSystem,
  FileSystemAccess: FileSystemAccessFileSystem,
  FolderAdapter,
  InMemory: InMemoryFileSystem,
  IndexedDB: IndexedDBFileSystem,
  IsoFS,
  LocalStorage: LocalStorageFileSystem,
  MountableFileSystem,
  OverlayFS,
  WorkerFS,
  HTTPRequest,
  XmlHttpRequest: HTTPRequest,
  ZipFS
};
var backends_default = Backends;

// src/core/browserfs.ts
if (process_exports && void 0) {
  (void 0)();
}
function install(obj) {
  obj.Buffer = Buffer;
  obj.process = process_exports;
  const oldRequire = obj.require ? obj.require : null;
  obj.require = function(arg) {
    const rv = BFSRequire(arg);
    if (!rv) {
      return oldRequire.apply(null, Array.prototype.slice.call(arguments, 0));
    } else {
      return rv;
    }
  };
}
function registerFileSystem(name, fs2) {
  backends_default[name] = fs2;
}
var BFSRequire = (module2) => {
  switch (module2) {
    case "fs":
      return node_fs_default;
    case "path":
      return path_exports;
    case "buffer":
      return buffer_exports;
    case "process":
      return process_exports;
    case "bfs_utils":
    case "bfs-utils":
      return util_exports;
    default:
      return backends_default[module2];
  }
};
function initialize(rootfs, uid = 0, gid = 0) {
  const cred = new Cred(uid, gid, uid, gid, uid, gid);
  return node_fs_default.initialize(rootfs, cred);
}
function configure(config2, cb) {
  getFileSystem(config2, (e, fs2) => {
    if (fs2) {
      initialize(fs2);
      cb();
    } else {
      cb(e);
    }
  });
}
function configureAsync(config2) {
  return new Promise((resolve2, reject) => {
    getFileSystem(config2, (e, fs2) => {
      if (fs2) {
        initialize(fs2);
        resolve2(fs2);
      } else {
        reject(e);
      }
    });
  });
}
function getFileSystem(config2, cb) {
  const fsName = config2["fs"];
  if (!fsName) {
    return cb(new ApiError(1 /* EPERM */, 'Missing "fs" property on configuration object.'));
  }
  const options = config2["options"];
  let waitCount = 0;
  let called = false;
  function finish() {
    if (!called) {
      called = true;
      const fsc = backends_default[fsName];
      if (!fsc) {
        cb(new ApiError(1 /* EPERM */, `File system ${fsName} is not available in BrowserFS.`));
      } else {
        fsc.Create(options, cb);
      }
    }
  }
  if (options !== null && typeof options === "object") {
    let finishedIterating = false;
    const props = Object.keys(options).filter((k) => k !== "fs");
    props.forEach((p) => {
      const d = options[p];
      if (d !== null && typeof d === "object" && d["fs"]) {
        waitCount++;
        getFileSystem(d, function(e, fs2) {
          waitCount--;
          if (e) {
            if (called) {
              return;
            }
            called = true;
            cb(e);
          } else {
            options[p] = fs2;
            if (waitCount === 0 && finishedIterating) {
              finish();
            }
          }
        });
      }
    });
    finishedIterating = true;
  }
  if (waitCount === 0) {
    finish();
  }
}
/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>
 * @license  MIT
 */
//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsiLi4vc3JjL2NvcmUvYnJvd3NlcmZzLnRzIiwgIm5vZGUtbW9kdWxlcy1wb2x5ZmlsbHM6YnVmZmVyIiwgIi4uL3NyYy9jb3JlL2FwaV9lcnJvci50cyIsICIuLi9zcmMvY29yZS9maWxlX2ZsYWcudHMiLCAibm9kZS1tb2R1bGVzLXBvbHlmaWxsczpwYXRoIiwgIi4uL3NyYy9jb3JlL2NyZWQudHMiLCAiLi4vc3JjL2NvcmUvc3RhdHMudHMiLCAiLi4vc3JjL2dlbmVyaWMvc2V0SW1tZWRpYXRlLnRzIiwgIi4uL3NyYy9jb3JlL0ZTLnRzIiwgIi4uL3NyYy9jb3JlL25vZGVfZnMudHMiLCAiLi4vc3JjL2NvcmUvdXRpbC50cyIsICIuLi9zcmMvY29yZS9sZXZlbnNodGVpbi50cyIsICIuLi9zcmMvZ2VuZXJpYy9lbXNjcmlwdGVuX2ZzLnRzIiwgIi4uL3NyYy9jb3JlL2ZpbGVfc3lzdGVtLnRzIiwgIi4uL3NyYy9jb3JlL2ZpbGUudHMiLCAiLi4vc3JjL2dlbmVyaWMvcHJlbG9hZF9maWxlLnRzIiwgIi4uL3NyYy9iYWNrZW5kL0FzeW5jTWlycm9yLnRzIiwgIi4uL3NyYy9nZW5lcmljL2Ryb3Bib3hfYnJpZGdlX2FjdHVhbC50cyIsICIuLi9zcmMvYmFja2VuZC9Ecm9wYm94LnRzIiwgIi4uL3NyYy9iYWNrZW5kL0Vtc2NyaXB0ZW4udHMiLCAiLi4vc3JjL2JhY2tlbmQvRmlsZVN5c3RlbUFjY2Vzcy50cyIsICIuLi9zcmMvYmFja2VuZC9Gb2xkZXJBZGFwdGVyLnRzIiwgIm5vZGUtbW9kdWxlcy1wb2x5ZmlsbHM6cHJvY2VzcyIsICIuLi9zcmMvZ2VuZXJpYy9pbm9kZS50cyIsICIuLi9zcmMvZ2VuZXJpYy9rZXlfdmFsdWVfZmlsZXN5c3RlbS50cyIsICIuLi9zcmMvYmFja2VuZC9Jbk1lbW9yeS50cyIsICIuLi9zcmMvYmFja2VuZC9JbmRleGVkREIudHMiLCAiLi4vc3JjL2JhY2tlbmQvTG9jYWxTdG9yYWdlLnRzIiwgIi4uL3NyYy9iYWNrZW5kL01vdW50YWJsZUZpbGVTeXN0ZW0udHMiLCAiLi4vc3JjL2dlbmVyaWMvbXV0ZXgudHMiLCAiLi4vc3JjL2dlbmVyaWMvbG9ja2VkX2ZzLnRzIiwgIi4uL3NyYy9iYWNrZW5kL092ZXJsYXlGUy50cyIsICIuLi9zcmMvYmFja2VuZC9Xb3JrZXJGUy50cyIsICIuLi9zcmMvZ2VuZXJpYy94aHIudHMiLCAiLi4vc3JjL2dlbmVyaWMvZmV0Y2gudHMiLCAiLi4vc3JjL2dlbmVyaWMvZmlsZV9pbmRleC50cyIsICIuLi9zcmMvYmFja2VuZC9IVFRQUmVxdWVzdC50cyIsICIuLi9zcmMvZ2VuZXJpYy9leHRlbmRlZF9hc2NpaS50cyIsICJub2RlLW1vZHVsZXMtcG9seWZpbGxzOmV2ZW50cyIsICIuLi9ub2RlX21vZHVsZXMvcm9sbHVwLXBsdWdpbi1ub2RlLXBvbHlmaWxscy9wb2x5ZmlsbHMvaW5oZXJpdHMuanMiLCAibm9kZS1tb2R1bGVzLXBvbHlmaWxsczp1dGlsIiwgIi4uL25vZGVfbW9kdWxlcy9yb2xsdXAtcGx1Z2luLW5vZGUtcG9seWZpbGxzL3BvbHlmaWxscy9yZWFkYWJsZS1zdHJlYW0vYnVmZmVyLWxpc3QuanMiLCAibm9kZS1tb2R1bGVzLXBvbHlmaWxsczpzdHJpbmdfZGVjb2RlciIsICIuLi9ub2RlX21vZHVsZXMvcm9sbHVwLXBsdWdpbi1ub2RlLXBvbHlmaWxscy9wb2x5ZmlsbHMvcmVhZGFibGUtc3RyZWFtL3JlYWRhYmxlLmpzIiwgIi4uL25vZGVfbW9kdWxlcy9yb2xsdXAtcGx1Z2luLW5vZGUtcG9seWZpbGxzL3BvbHlmaWxscy9yZWFkYWJsZS1zdHJlYW0vd3JpdGFibGUuanMiLCAiLi4vbm9kZV9tb2R1bGVzL3JvbGx1cC1wbHVnaW4tbm9kZS1wb2x5ZmlsbHMvcG9seWZpbGxzL3JlYWRhYmxlLXN0cmVhbS9kdXBsZXguanMiLCAiLi4vbm9kZV9tb2R1bGVzL3JvbGx1cC1wbHVnaW4tbm9kZS1wb2x5ZmlsbHMvcG9seWZpbGxzL3JlYWRhYmxlLXN0cmVhbS90cmFuc2Zvcm0uanMiLCAiLi4vbm9kZV9tb2R1bGVzL3JvbGx1cC1wbHVnaW4tbm9kZS1wb2x5ZmlsbHMvcG9seWZpbGxzL3JlYWRhYmxlLXN0cmVhbS9wYXNzdGhyb3VnaC5qcyIsICJub2RlLW1vZHVsZXMtcG9seWZpbGxzOnN0cmVhbSIsICIuLi9ub2RlX21vZHVsZXMvcm9sbHVwLXBsdWdpbi1ub2RlLXBvbHlmaWxscy9wb2x5ZmlsbHMvemxpYi1saWIvYmluZGluZy5qcyIsICIuLi9ub2RlX21vZHVsZXMvcm9sbHVwLXBsdWdpbi1ub2RlLXBvbHlmaWxscy9wb2x5ZmlsbHMvemxpYi1saWIvbWVzc2FnZXMuanMiLCAiLi4vbm9kZV9tb2R1bGVzL3JvbGx1cC1wbHVnaW4tbm9kZS1wb2x5ZmlsbHMvcG9seWZpbGxzL3psaWItbGliL3pzdHJlYW0uanMiLCAiLi4vbm9kZV9tb2R1bGVzL3JvbGx1cC1wbHVnaW4tbm9kZS1wb2x5ZmlsbHMvcG9seWZpbGxzL3psaWItbGliL3V0aWxzLmpzIiwgIi4uL25vZGVfbW9kdWxlcy9yb2xsdXAtcGx1Z2luLW5vZGUtcG9seWZpbGxzL3BvbHlmaWxscy96bGliLWxpYi90cmVlcy5qcyIsICIuLi9ub2RlX21vZHVsZXMvcm9sbHVwLXBsdWdpbi1ub2RlLXBvbHlmaWxscy9wb2x5ZmlsbHMvemxpYi1saWIvYWRsZXIzMi5qcyIsICIuLi9ub2RlX21vZHVsZXMvcm9sbHVwLXBsdWdpbi1ub2RlLXBvbHlmaWxscy9wb2x5ZmlsbHMvemxpYi1saWIvY3JjMzIuanMiLCAiLi4vbm9kZV9tb2R1bGVzL3JvbGx1cC1wbHVnaW4tbm9kZS1wb2x5ZmlsbHMvcG9seWZpbGxzL3psaWItbGliL2RlZmxhdGUuanMiLCAiLi4vbm9kZV9tb2R1bGVzL3JvbGx1cC1wbHVnaW4tbm9kZS1wb2x5ZmlsbHMvcG9seWZpbGxzL3psaWItbGliL2luZmZhc3QuanMiLCAiLi4vbm9kZV9tb2R1bGVzL3JvbGx1cC1wbHVnaW4tbm9kZS1wb2x5ZmlsbHMvcG9seWZpbGxzL3psaWItbGliL2luZnRyZWVzLmpzIiwgIi4uL25vZGVfbW9kdWxlcy9yb2xsdXAtcGx1Z2luLW5vZGUtcG9seWZpbGxzL3BvbHlmaWxscy96bGliLWxpYi9pbmZsYXRlLmpzIiwgIm5vZGUtbW9kdWxlcy1wb2x5ZmlsbHM6emxpYiIsICIuLi9zcmMvYmFja2VuZC9aaXBGUy50cyIsICIuLi9zcmMvYmFja2VuZC9Jc29GUy50cyIsICIuLi9zcmMvY29yZS9iYWNrZW5kcy50cyJdLAogICJzb3VyY2VzQ29udGVudCI6IFsiLyoqXG4gKiBCcm93c2VyRlMncyBtYWluIG1vZHVsZS4gVGhpcyBpcyBleHBvc2VkIGluIHRoZSBicm93c2VyIHZpYSB0aGUgQnJvd3NlckZTIGdsb2JhbC5cbiAqIER1ZSB0byBsaW1pdGF0aW9ucyBpbiB0eXBlZG9jLCB3ZSBkb2N1bWVudCB0aGVzZSBmdW5jdGlvbnMgaW4gLi90eXBlZG9jLnRzLlxuICovXG5cbmltcG9ydCAqIGFzIGJ1ZmZlciBmcm9tICdidWZmZXInO1xuaW1wb3J0IGZzIGZyb20gJy4vbm9kZV9mcyc7XG5pbXBvcnQgKiBhcyBwYXRoIGZyb20gJ3BhdGgnO1xuaW1wb3J0IHsgRmlsZVN5c3RlbUNvbnN0cnVjdG9yLCBGaWxlU3lzdGVtLCBCRlNPbmVBcmdDYWxsYmFjaywgQkZTQ2FsbGJhY2sgfSBmcm9tICcuL2ZpbGVfc3lzdGVtJztcbmltcG9ydCBFbXNjcmlwdGVuRlMgZnJvbSAnLi4vZ2VuZXJpYy9lbXNjcmlwdGVuX2ZzJztcbmltcG9ydCBCYWNrZW5kcyBmcm9tICcuL2JhY2tlbmRzJztcbmltcG9ydCAqIGFzIEJGU1V0aWxzIGZyb20gJy4vdXRpbCc7XG5pbXBvcnQgKiBhcyBFcnJvcnMgZnJvbSAnLi9hcGlfZXJyb3InO1xuaW1wb3J0IHNldEltbWVkaWF0ZSBmcm9tICcuLi9nZW5lcmljL3NldEltbWVkaWF0ZSc7XG5pbXBvcnQgQ3JlZCBmcm9tICcuL2NyZWQnO1xuaW1wb3J0ICogYXMgcHJvY2VzcyBmcm9tICdwcm9jZXNzJztcblxuaWYgKHByb2Nlc3MgJiYgKDxhbnk+cHJvY2VzcylbJ2luaXRpYWxpemVUVFlzJ10pIHtcblx0KDxhbnk+cHJvY2VzcylbJ2luaXRpYWxpemVUVFlzJ10oKTtcbn1cblxuLyoqXG4gKiBJbnN0YWxscyBCRlNSZXF1aXJlIGFzIGdsb2JhbCBgcmVxdWlyZWAsIGEgTm9kZSBCdWZmZXIgcG9seWZpbGwgYXMgdGhlIGdsb2JhbCBgQnVmZmVyYCB2YXJpYWJsZSxcbiAqIGFuZCBhIE5vZGUgcHJvY2VzcyBwb2x5ZmlsbCBhcyB0aGUgZ2xvYmFsIGBwcm9jZXNzYCB2YXJpYWJsZS5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGluc3RhbGwob2JqOiBhbnkpIHtcblx0b2JqLkJ1ZmZlciA9IEJ1ZmZlcjtcblx0b2JqLnByb2Nlc3MgPSBwcm9jZXNzO1xuXHRjb25zdCBvbGRSZXF1aXJlID0gb2JqLnJlcXVpcmUgPyBvYmoucmVxdWlyZSA6IG51bGw7XG5cdC8vIE1vbmtleS1wYXRjaCByZXF1aXJlIGZvciBOb2RlLXN0eWxlIGNvZGUuXG5cdG9iai5yZXF1aXJlID0gZnVuY3Rpb24gKGFyZzogc3RyaW5nKSB7XG5cdFx0Y29uc3QgcnYgPSBCRlNSZXF1aXJlKGFyZyk7XG5cdFx0aWYgKCFydikge1xuXHRcdFx0cmV0dXJuIG9sZFJlcXVpcmUuYXBwbHkobnVsbCwgQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoYXJndW1lbnRzLCAwKSk7XG5cdFx0fSBlbHNlIHtcblx0XHRcdHJldHVybiBydjtcblx0XHR9XG5cdH07XG59XG5cbi8qKlxuICogQGhpZGRlblxuICovXG5leHBvcnQgZnVuY3Rpb24gcmVnaXN0ZXJGaWxlU3lzdGVtKG5hbWU6IHN0cmluZywgZnM6IEZpbGVTeXN0ZW1Db25zdHJ1Y3Rvcikge1xuXHQoPGFueT5CYWNrZW5kcylbbmFtZV0gPSBmcztcbn1cblxuLyoqXG4gKiBQb2x5ZmlsbCBmb3IgQ29tbW9uSlMgYHJlcXVpcmUoKWAuIEZvciBleGFtcGxlLCBjYW4gY2FsbCBgQkZTUmVxdWlyZSgnZnMnKWAgdG8gZ2V0IGEgJ2ZzJyBtb2R1bGUgcG9seWZpbGwuXG4gKi9cbi8vIGV4cG9ydCBmdW5jdGlvbiBCRlNSZXF1aXJlKG1vZHVsZTogJ2ZzJyk6IHR5cGVvZiBmcztcbi8vIGV4cG9ydCBmdW5jdGlvbiBCRlNSZXF1aXJlKG1vZHVsZTogJ3BhdGgnKTogdHlwZW9mIHBhdGg7XG4vLyBleHBvcnQgZnVuY3Rpb24gQkZTUmVxdWlyZShtb2R1bGU6ICdidWZmZXInKTogdHlwZW9mIGJ1ZmZlcjtcbi8vIGV4cG9ydCBmdW5jdGlvbiBCRlNSZXF1aXJlKG1vZHVsZTogJ3Byb2Nlc3MnKTogdHlwZW9mIHByb2Nlc3M7XG4vLyBleHBvcnQgZnVuY3Rpb24gQkZTUmVxdWlyZShtb2R1bGU6ICdiZnNfdXRpbHMnKTogdHlwZW9mIEJGU1V0aWxzO1xuLy8gZXhwb3J0IGZ1bmN0aW9uIEJGU1JlcXVpcmUobW9kdWxlOiBzdHJpbmcpOiBhbnk7XG5leHBvcnQgY29uc3QgQkZTUmVxdWlyZSA9IChtb2R1bGU6IHN0cmluZykgPT4ge1xuXHRzd2l0Y2ggKG1vZHVsZSkge1xuXHRcdGNhc2UgJ2ZzJzpcblx0XHRcdHJldHVybiBmcztcblx0XHRjYXNlICdwYXRoJzpcblx0XHRcdHJldHVybiBwYXRoO1xuXHRcdGNhc2UgJ2J1ZmZlcic6XG5cdFx0XHQvLyBUaGUgJ2J1ZmZlcicgbW9kdWxlIGhhcyAnQnVmZmVyJyBhcyBhIHByb3BlcnR5LlxuXHRcdFx0cmV0dXJuIGJ1ZmZlcjtcblx0XHRjYXNlICdwcm9jZXNzJzpcblx0XHRcdHJldHVybiBwcm9jZXNzO1xuXHRcdGNhc2UgJ2Jmc191dGlscyc6XG5cdFx0Y2FzZSAnYmZzLXV0aWxzJzpcblx0XHRcdHJldHVybiBCRlNVdGlscztcblx0XHRkZWZhdWx0OlxuXHRcdFx0cmV0dXJuICg8YW55PkJhY2tlbmRzKVttb2R1bGVdO1xuXHR9XG59XG5cbi8qKlxuICogSW5pdGlhbGl6ZXMgQnJvd3NlckZTIHdpdGggdGhlIGdpdmVuIHJvb3QgZmlsZSBzeXN0ZW0uXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBpbml0aWFsaXplKHJvb3RmczogRmlsZVN5c3RlbSwgdWlkOiBudW1iZXIgPSAwLCBnaWQ6IG51bWJlciA9IDApIHtcblx0Y29uc3QgY3JlZCA9IG5ldyBDcmVkKHVpZCwgZ2lkLCB1aWQsIGdpZCwgdWlkLCBnaWQpO1xuXHRyZXR1cm4gZnMuaW5pdGlhbGl6ZShyb290ZnMsIGNyZWQpO1xufVxuXG4vKipcbiAqIENyZWF0ZXMgYSBmaWxlIHN5c3RlbSB3aXRoIHRoZSBnaXZlbiBjb25maWd1cmF0aW9uLCBhbmQgaW5pdGlhbGl6ZXMgQnJvd3NlckZTIHdpdGggaXQuXG4gKiBTZWUgdGhlIEZpbGVTeXN0ZW1Db25maWd1cmF0aW9uIHR5cGUgZm9yIG1vcmUgaW5mbyBvbiB0aGUgY29uZmlndXJhdGlvbiBvYmplY3QuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBjb25maWd1cmUoY29uZmlnOiBGaWxlU3lzdGVtQ29uZmlndXJhdGlvbiwgY2I6IEJGU09uZUFyZ0NhbGxiYWNrKTogdm9pZCB7XG5cdGdldEZpbGVTeXN0ZW0oY29uZmlnLCAoZSwgZnM/KSA9PiB7XG5cdFx0aWYgKGZzKSB7XG5cdFx0XHRpbml0aWFsaXplKGZzKTtcblx0XHRcdGNiKCk7XG5cdFx0fSBlbHNlIHtcblx0XHRcdGNiKGUpO1xuXHRcdH1cblx0fSk7XG59XG5cbi8qKlxuICogQXN5bmNocm9ub3VzbHkgY3JlYXRlcyBhIGZpbGUgc3lzdGVtIHdpdGggdGhlIGdpdmVuIGNvbmZpZ3VyYXRpb24sIGFuZCBpbml0aWFsaXplcyBCcm93c2VyRlMgd2l0aCBpdC5cbiAqIFNlZSB0aGUgRmlsZVN5c3RlbUNvbmZpZ3VyYXRpb24gdHlwZSBmb3IgbW9yZSBpbmZvIG9uIHRoZSBjb25maWd1cmF0aW9uIG9iamVjdC5cbiAqIE5vdGU6IHVubGlrZSBjb25maWd1cmUsIHRoZSAudGhlbiBpcyBwcm92aWRlZCB3aXRoIHRoZSBmaWxlIHN5c3RlbVxuICovXG5leHBvcnQgZnVuY3Rpb24gY29uZmlndXJlQXN5bmMoY29uZmlnOiBGaWxlU3lzdGVtQ29uZmlndXJhdGlvbik6IFByb21pc2U8RmlsZVN5c3RlbSB8IEVycm9ycy5BcGlFcnJvciB8IG51bGw+IHtcblx0cmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcblx0XHRnZXRGaWxlU3lzdGVtKGNvbmZpZywgKGUsIGZzPykgPT4ge1xuXHRcdFx0aWYgKGZzKSB7XG5cdFx0XHRcdGluaXRpYWxpemUoZnMpO1xuXHRcdFx0XHRyZXNvbHZlKGZzKTtcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdHJlamVjdChlKTtcblx0XHRcdH1cblx0XHR9KTtcblx0fSk7XG59XG5cbi8qKlxuICogU3BlY2lmaWVzIGEgZmlsZSBzeXN0ZW0gYmFja2VuZCB0eXBlIGFuZCBpdHMgb3B0aW9ucy5cbiAqXG4gKiBJbmRpdmlkdWFsIG9wdGlvbnMgY2FuIHJlY3Vyc2l2ZWx5IGNvbnRhaW4gRmlsZVN5c3RlbUNvbmZpZ3VyYXRpb24gb2JqZWN0cyBmb3JcbiAqIG9wdGlvbiB2YWx1ZXMgdGhhdCByZXF1aXJlIGZpbGUgc3lzdGVtcy5cbiAqXG4gKiBGb3IgZXhhbXBsZSwgdG8gbWlycm9yIERyb3Bib3ggdG8gTG9jYWxTdG9yYWdlIHdpdGggQXN5bmNNaXJyb3IsIHVzZSB0aGUgZm9sbG93aW5nXG4gKiBvYmplY3Q6XG4gKlxuICogYGBgamF2YXNjcmlwdFxuICogdmFyIGNvbmZpZyA9IHtcbiAqICAgZnM6IFwiQXN5bmNNaXJyb3JcIixcbiAqICAgb3B0aW9uczoge1xuICogICAgIHN5bmM6IHtmczogXCJMb2NhbFN0b3JhZ2VcIn0sXG4gKiAgICAgYXN5bmM6IHtmczogXCJEcm9wYm94XCIsIG9wdGlvbnM6IHtjbGllbnQ6IGFuQXV0aGVudGljYXRlZERyb3Bib3hTREtDbGllbnQgfX1cbiAqICAgfVxuICogfTtcbiAqIGBgYFxuICpcbiAqIFRoZSBvcHRpb24gb2JqZWN0IGZvciBlYWNoIGZpbGUgc3lzdGVtIGNvcnJlc3BvbmRzIHRvIHRoYXQgZmlsZSBzeXN0ZW0ncyBvcHRpb24gb2JqZWN0IHBhc3NlZCB0byBpdHMgYENyZWF0ZSgpYCBtZXRob2QuXG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgRmlsZVN5c3RlbUNvbmZpZ3VyYXRpb24ge1xuXHRmczogc3RyaW5nO1xuXHRvcHRpb25zPzogYW55O1xufVxuXG4vKipcbiAqIFJldHJpZXZlIGEgZmlsZSBzeXN0ZW0gd2l0aCB0aGUgZ2l2ZW4gY29uZmlndXJhdGlvbi5cbiAqIEBwYXJhbSBjb25maWcgQSBGaWxlU3lzdGVtQ29uZmlndXJhdGlvbiBvYmplY3QuIFNlZSBGaWxlU3lzdGVtQ29uZmlndXJhdGlvbiBmb3IgZGV0YWlscy5cbiAqIEBwYXJhbSBjYiBDYWxsZWQgd2hlbiB0aGUgZmlsZSBzeXN0ZW0gaXMgY29uc3RydWN0ZWQsIG9yIHdoZW4gYW4gZXJyb3Igb2NjdXJzLlxuICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0RmlsZVN5c3RlbShjb25maWc6IEZpbGVTeXN0ZW1Db25maWd1cmF0aW9uLCBjYjogQkZTQ2FsbGJhY2s8RmlsZVN5c3RlbT4pOiB2b2lkIHtcblx0Y29uc3QgZnNOYW1lID0gY29uZmlnWydmcyddO1xuXHRpZiAoIWZzTmFtZSkge1xuXHRcdHJldHVybiBjYihuZXcgRXJyb3JzLkFwaUVycm9yKEVycm9ycy5FcnJvckNvZGUuRVBFUk0sICdNaXNzaW5nIFwiZnNcIiBwcm9wZXJ0eSBvbiBjb25maWd1cmF0aW9uIG9iamVjdC4nKSk7XG5cdH1cblx0Y29uc3Qgb3B0aW9ucyA9IGNvbmZpZ1snb3B0aW9ucyddO1xuXHRsZXQgd2FpdENvdW50ID0gMDtcblx0bGV0IGNhbGxlZCA9IGZhbHNlO1xuXHRmdW5jdGlvbiBmaW5pc2goKSB7XG5cdFx0aWYgKCFjYWxsZWQpIHtcblx0XHRcdGNhbGxlZCA9IHRydWU7XG5cdFx0XHRjb25zdCBmc2MgPSA8RmlsZVN5c3RlbUNvbnN0cnVjdG9yIHwgdW5kZWZpbmVkPig8YW55PkJhY2tlbmRzKVtmc05hbWVdO1xuXHRcdFx0aWYgKCFmc2MpIHtcblx0XHRcdFx0Y2IobmV3IEVycm9ycy5BcGlFcnJvcihFcnJvcnMuRXJyb3JDb2RlLkVQRVJNLCBgRmlsZSBzeXN0ZW0gJHtmc05hbWV9IGlzIG5vdCBhdmFpbGFibGUgaW4gQnJvd3NlckZTLmApKTtcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdGZzYy5DcmVhdGUob3B0aW9ucywgY2IpO1xuXHRcdFx0fVxuXHRcdH1cblx0fVxuXG5cdGlmIChvcHRpb25zICE9PSBudWxsICYmIHR5cGVvZiBvcHRpb25zID09PSAnb2JqZWN0Jykge1xuXHRcdGxldCBmaW5pc2hlZEl0ZXJhdGluZyA9IGZhbHNlO1xuXHRcdGNvbnN0IHByb3BzID0gT2JqZWN0LmtleXMob3B0aW9ucykuZmlsdGVyKGsgPT4gayAhPT0gJ2ZzJyk7XG5cdFx0Ly8gQ2hlY2sgcmVjdXJzaXZlbHkgaWYgb3RoZXIgZmllbGRzIGhhdmUgJ2ZzJyBwcm9wZXJ0aWVzLlxuXHRcdHByb3BzLmZvckVhY2gocCA9PiB7XG5cdFx0XHRjb25zdCBkID0gb3B0aW9uc1twXTtcblx0XHRcdGlmIChkICE9PSBudWxsICYmIHR5cGVvZiBkID09PSAnb2JqZWN0JyAmJiBkWydmcyddKSB7XG5cdFx0XHRcdHdhaXRDb3VudCsrO1xuXHRcdFx0XHRnZXRGaWxlU3lzdGVtKGQsIGZ1bmN0aW9uIChlLCBmcz8pIHtcblx0XHRcdFx0XHR3YWl0Q291bnQtLTtcblx0XHRcdFx0XHRpZiAoZSkge1xuXHRcdFx0XHRcdFx0aWYgKGNhbGxlZCkge1xuXHRcdFx0XHRcdFx0XHRyZXR1cm47XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRjYWxsZWQgPSB0cnVlO1xuXHRcdFx0XHRcdFx0Y2IoZSk7XG5cdFx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRcdG9wdGlvbnNbcF0gPSBmcztcblx0XHRcdFx0XHRcdGlmICh3YWl0Q291bnQgPT09IDAgJiYgZmluaXNoZWRJdGVyYXRpbmcpIHtcblx0XHRcdFx0XHRcdFx0ZmluaXNoKCk7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9KTtcblx0XHRcdH1cblx0XHR9KTtcblx0XHRmaW5pc2hlZEl0ZXJhdGluZyA9IHRydWU7XG5cdH1cblx0aWYgKHdhaXRDb3VudCA9PT0gMCkge1xuXHRcdGZpbmlzaCgpO1xuXHR9XG59XG5cbmV4cG9ydCB7IEVtc2NyaXB0ZW5GUywgQmFja2VuZHMgYXMgRmlsZVN5c3RlbSwgRXJyb3JzLCBzZXRJbW1lZGlhdGUgfTtcbiIsICJ2YXIgbG9va3VwID0gW107XG52YXIgcmV2TG9va3VwID0gW107XG52YXIgQXJyID0gdHlwZW9mIFVpbnQ4QXJyYXkgIT09ICd1bmRlZmluZWQnID8gVWludDhBcnJheSA6IEFycmF5O1xudmFyIGluaXRlZCA9IGZhbHNlO1xuZnVuY3Rpb24gaW5pdCAoKSB7XG4gIGluaXRlZCA9IHRydWU7XG4gIHZhciBjb2RlID0gJ0FCQ0RFRkdISUpLTE1OT1BRUlNUVVZXWFlaYWJjZGVmZ2hpamtsbW5vcHFyc3R1dnd4eXowMTIzNDU2Nzg5Ky8nO1xuICBmb3IgKHZhciBpID0gMCwgbGVuID0gY29kZS5sZW5ndGg7IGkgPCBsZW47ICsraSkge1xuICAgIGxvb2t1cFtpXSA9IGNvZGVbaV07XG4gICAgcmV2TG9va3VwW2NvZGUuY2hhckNvZGVBdChpKV0gPSBpO1xuICB9XG5cbiAgcmV2TG9va3VwWyctJy5jaGFyQ29kZUF0KDApXSA9IDYyO1xuICByZXZMb29rdXBbJ18nLmNoYXJDb2RlQXQoMCldID0gNjM7XG59XG5cbmZ1bmN0aW9uIHRvQnl0ZUFycmF5IChiNjQpIHtcbiAgaWYgKCFpbml0ZWQpIHtcbiAgICBpbml0KCk7XG4gIH1cbiAgdmFyIGksIGosIGwsIHRtcCwgcGxhY2VIb2xkZXJzLCBhcnI7XG4gIHZhciBsZW4gPSBiNjQubGVuZ3RoO1xuXG4gIGlmIChsZW4gJSA0ID4gMCkge1xuICAgIHRocm93IG5ldyBFcnJvcignSW52YWxpZCBzdHJpbmcuIExlbmd0aCBtdXN0IGJlIGEgbXVsdGlwbGUgb2YgNCcpXG4gIH1cblxuICAvLyB0aGUgbnVtYmVyIG9mIGVxdWFsIHNpZ25zIChwbGFjZSBob2xkZXJzKVxuICAvLyBpZiB0aGVyZSBhcmUgdHdvIHBsYWNlaG9sZGVycywgdGhhbiB0aGUgdHdvIGNoYXJhY3RlcnMgYmVmb3JlIGl0XG4gIC8vIHJlcHJlc2VudCBvbmUgYnl0ZVxuICAvLyBpZiB0aGVyZSBpcyBvbmx5IG9uZSwgdGhlbiB0aGUgdGhyZWUgY2hhcmFjdGVycyBiZWZvcmUgaXQgcmVwcmVzZW50IDIgYnl0ZXNcbiAgLy8gdGhpcyBpcyBqdXN0IGEgY2hlYXAgaGFjayB0byBub3QgZG8gaW5kZXhPZiB0d2ljZVxuICBwbGFjZUhvbGRlcnMgPSBiNjRbbGVuIC0gMl0gPT09ICc9JyA/IDIgOiBiNjRbbGVuIC0gMV0gPT09ICc9JyA/IDEgOiAwO1xuXG4gIC8vIGJhc2U2NCBpcyA0LzMgKyB1cCB0byB0d28gY2hhcmFjdGVycyBvZiB0aGUgb3JpZ2luYWwgZGF0YVxuICBhcnIgPSBuZXcgQXJyKGxlbiAqIDMgLyA0IC0gcGxhY2VIb2xkZXJzKTtcblxuICAvLyBpZiB0aGVyZSBhcmUgcGxhY2Vob2xkZXJzLCBvbmx5IGdldCB1cCB0byB0aGUgbGFzdCBjb21wbGV0ZSA0IGNoYXJzXG4gIGwgPSBwbGFjZUhvbGRlcnMgPiAwID8gbGVuIC0gNCA6IGxlbjtcblxuICB2YXIgTCA9IDA7XG5cbiAgZm9yIChpID0gMCwgaiA9IDA7IGkgPCBsOyBpICs9IDQsIGogKz0gMykge1xuICAgIHRtcCA9IChyZXZMb29rdXBbYjY0LmNoYXJDb2RlQXQoaSldIDw8IDE4KSB8IChyZXZMb29rdXBbYjY0LmNoYXJDb2RlQXQoaSArIDEpXSA8PCAxMikgfCAocmV2TG9va3VwW2I2NC5jaGFyQ29kZUF0KGkgKyAyKV0gPDwgNikgfCByZXZMb29rdXBbYjY0LmNoYXJDb2RlQXQoaSArIDMpXTtcbiAgICBhcnJbTCsrXSA9ICh0bXAgPj4gMTYpICYgMHhGRjtcbiAgICBhcnJbTCsrXSA9ICh0bXAgPj4gOCkgJiAweEZGO1xuICAgIGFycltMKytdID0gdG1wICYgMHhGRjtcbiAgfVxuXG4gIGlmIChwbGFjZUhvbGRlcnMgPT09IDIpIHtcbiAgICB0bXAgPSAocmV2TG9va3VwW2I2NC5jaGFyQ29kZUF0KGkpXSA8PCAyKSB8IChyZXZMb29rdXBbYjY0LmNoYXJDb2RlQXQoaSArIDEpXSA+PiA0KTtcbiAgICBhcnJbTCsrXSA9IHRtcCAmIDB4RkY7XG4gIH0gZWxzZSBpZiAocGxhY2VIb2xkZXJzID09PSAxKSB7XG4gICAgdG1wID0gKHJldkxvb2t1cFtiNjQuY2hhckNvZGVBdChpKV0gPDwgMTApIHwgKHJldkxvb2t1cFtiNjQuY2hhckNvZGVBdChpICsgMSldIDw8IDQpIHwgKHJldkxvb2t1cFtiNjQuY2hhckNvZGVBdChpICsgMildID4+IDIpO1xuICAgIGFycltMKytdID0gKHRtcCA+PiA4KSAmIDB4RkY7XG4gICAgYXJyW0wrK10gPSB0bXAgJiAweEZGO1xuICB9XG5cbiAgcmV0dXJuIGFyclxufVxuXG5mdW5jdGlvbiB0cmlwbGV0VG9CYXNlNjQgKG51bSkge1xuICByZXR1cm4gbG9va3VwW251bSA+PiAxOCAmIDB4M0ZdICsgbG9va3VwW251bSA+PiAxMiAmIDB4M0ZdICsgbG9va3VwW251bSA+PiA2ICYgMHgzRl0gKyBsb29rdXBbbnVtICYgMHgzRl1cbn1cblxuZnVuY3Rpb24gZW5jb2RlQ2h1bmsgKHVpbnQ4LCBzdGFydCwgZW5kKSB7XG4gIHZhciB0bXA7XG4gIHZhciBvdXRwdXQgPSBbXTtcbiAgZm9yICh2YXIgaSA9IHN0YXJ0OyBpIDwgZW5kOyBpICs9IDMpIHtcbiAgICB0bXAgPSAodWludDhbaV0gPDwgMTYpICsgKHVpbnQ4W2kgKyAxXSA8PCA4KSArICh1aW50OFtpICsgMl0pO1xuICAgIG91dHB1dC5wdXNoKHRyaXBsZXRUb0Jhc2U2NCh0bXApKTtcbiAgfVxuICByZXR1cm4gb3V0cHV0LmpvaW4oJycpXG59XG5cbmZ1bmN0aW9uIGZyb21CeXRlQXJyYXkgKHVpbnQ4KSB7XG4gIGlmICghaW5pdGVkKSB7XG4gICAgaW5pdCgpO1xuICB9XG4gIHZhciB0bXA7XG4gIHZhciBsZW4gPSB1aW50OC5sZW5ndGg7XG4gIHZhciBleHRyYUJ5dGVzID0gbGVuICUgMzsgLy8gaWYgd2UgaGF2ZSAxIGJ5dGUgbGVmdCwgcGFkIDIgYnl0ZXNcbiAgdmFyIG91dHB1dCA9ICcnO1xuICB2YXIgcGFydHMgPSBbXTtcbiAgdmFyIG1heENodW5rTGVuZ3RoID0gMTYzODM7IC8vIG11c3QgYmUgbXVsdGlwbGUgb2YgM1xuXG4gIC8vIGdvIHRocm91Z2ggdGhlIGFycmF5IGV2ZXJ5IHRocmVlIGJ5dGVzLCB3ZSdsbCBkZWFsIHdpdGggdHJhaWxpbmcgc3R1ZmYgbGF0ZXJcbiAgZm9yICh2YXIgaSA9IDAsIGxlbjIgPSBsZW4gLSBleHRyYUJ5dGVzOyBpIDwgbGVuMjsgaSArPSBtYXhDaHVua0xlbmd0aCkge1xuICAgIHBhcnRzLnB1c2goZW5jb2RlQ2h1bmsodWludDgsIGksIChpICsgbWF4Q2h1bmtMZW5ndGgpID4gbGVuMiA/IGxlbjIgOiAoaSArIG1heENodW5rTGVuZ3RoKSkpO1xuICB9XG5cbiAgLy8gcGFkIHRoZSBlbmQgd2l0aCB6ZXJvcywgYnV0IG1ha2Ugc3VyZSB0byBub3QgZm9yZ2V0IHRoZSBleHRyYSBieXRlc1xuICBpZiAoZXh0cmFCeXRlcyA9PT0gMSkge1xuICAgIHRtcCA9IHVpbnQ4W2xlbiAtIDFdO1xuICAgIG91dHB1dCArPSBsb29rdXBbdG1wID4+IDJdO1xuICAgIG91dHB1dCArPSBsb29rdXBbKHRtcCA8PCA0KSAmIDB4M0ZdO1xuICAgIG91dHB1dCArPSAnPT0nO1xuICB9IGVsc2UgaWYgKGV4dHJhQnl0ZXMgPT09IDIpIHtcbiAgICB0bXAgPSAodWludDhbbGVuIC0gMl0gPDwgOCkgKyAodWludDhbbGVuIC0gMV0pO1xuICAgIG91dHB1dCArPSBsb29rdXBbdG1wID4+IDEwXTtcbiAgICBvdXRwdXQgKz0gbG9va3VwWyh0bXAgPj4gNCkgJiAweDNGXTtcbiAgICBvdXRwdXQgKz0gbG9va3VwWyh0bXAgPDwgMikgJiAweDNGXTtcbiAgICBvdXRwdXQgKz0gJz0nO1xuICB9XG5cbiAgcGFydHMucHVzaChvdXRwdXQpO1xuXG4gIHJldHVybiBwYXJ0cy5qb2luKCcnKVxufVxuXG5mdW5jdGlvbiByZWFkIChidWZmZXIsIG9mZnNldCwgaXNMRSwgbUxlbiwgbkJ5dGVzKSB7XG4gIHZhciBlLCBtO1xuICB2YXIgZUxlbiA9IG5CeXRlcyAqIDggLSBtTGVuIC0gMTtcbiAgdmFyIGVNYXggPSAoMSA8PCBlTGVuKSAtIDE7XG4gIHZhciBlQmlhcyA9IGVNYXggPj4gMTtcbiAgdmFyIG5CaXRzID0gLTc7XG4gIHZhciBpID0gaXNMRSA/IChuQnl0ZXMgLSAxKSA6IDA7XG4gIHZhciBkID0gaXNMRSA/IC0xIDogMTtcbiAgdmFyIHMgPSBidWZmZXJbb2Zmc2V0ICsgaV07XG5cbiAgaSArPSBkO1xuXG4gIGUgPSBzICYgKCgxIDw8ICgtbkJpdHMpKSAtIDEpO1xuICBzID4+PSAoLW5CaXRzKTtcbiAgbkJpdHMgKz0gZUxlbjtcbiAgZm9yICg7IG5CaXRzID4gMDsgZSA9IGUgKiAyNTYgKyBidWZmZXJbb2Zmc2V0ICsgaV0sIGkgKz0gZCwgbkJpdHMgLT0gOCkge31cblxuICBtID0gZSAmICgoMSA8PCAoLW5CaXRzKSkgLSAxKTtcbiAgZSA+Pj0gKC1uQml0cyk7XG4gIG5CaXRzICs9IG1MZW47XG4gIGZvciAoOyBuQml0cyA+IDA7IG0gPSBtICogMjU2ICsgYnVmZmVyW29mZnNldCArIGldLCBpICs9IGQsIG5CaXRzIC09IDgpIHt9XG5cbiAgaWYgKGUgPT09IDApIHtcbiAgICBlID0gMSAtIGVCaWFzO1xuICB9IGVsc2UgaWYgKGUgPT09IGVNYXgpIHtcbiAgICByZXR1cm4gbSA/IE5hTiA6ICgocyA/IC0xIDogMSkgKiBJbmZpbml0eSlcbiAgfSBlbHNlIHtcbiAgICBtID0gbSArIE1hdGgucG93KDIsIG1MZW4pO1xuICAgIGUgPSBlIC0gZUJpYXM7XG4gIH1cbiAgcmV0dXJuIChzID8gLTEgOiAxKSAqIG0gKiBNYXRoLnBvdygyLCBlIC0gbUxlbilcbn1cblxuZnVuY3Rpb24gd3JpdGUgKGJ1ZmZlciwgdmFsdWUsIG9mZnNldCwgaXNMRSwgbUxlbiwgbkJ5dGVzKSB7XG4gIHZhciBlLCBtLCBjO1xuICB2YXIgZUxlbiA9IG5CeXRlcyAqIDggLSBtTGVuIC0gMTtcbiAgdmFyIGVNYXggPSAoMSA8PCBlTGVuKSAtIDE7XG4gIHZhciBlQmlhcyA9IGVNYXggPj4gMTtcbiAgdmFyIHJ0ID0gKG1MZW4gPT09IDIzID8gTWF0aC5wb3coMiwgLTI0KSAtIE1hdGgucG93KDIsIC03NykgOiAwKTtcbiAgdmFyIGkgPSBpc0xFID8gMCA6IChuQnl0ZXMgLSAxKTtcbiAgdmFyIGQgPSBpc0xFID8gMSA6IC0xO1xuICB2YXIgcyA9IHZhbHVlIDwgMCB8fCAodmFsdWUgPT09IDAgJiYgMSAvIHZhbHVlIDwgMCkgPyAxIDogMDtcblxuICB2YWx1ZSA9IE1hdGguYWJzKHZhbHVlKTtcblxuICBpZiAoaXNOYU4odmFsdWUpIHx8IHZhbHVlID09PSBJbmZpbml0eSkge1xuICAgIG0gPSBpc05hTih2YWx1ZSkgPyAxIDogMDtcbiAgICBlID0gZU1heDtcbiAgfSBlbHNlIHtcbiAgICBlID0gTWF0aC5mbG9vcihNYXRoLmxvZyh2YWx1ZSkgLyBNYXRoLkxOMik7XG4gICAgaWYgKHZhbHVlICogKGMgPSBNYXRoLnBvdygyLCAtZSkpIDwgMSkge1xuICAgICAgZS0tO1xuICAgICAgYyAqPSAyO1xuICAgIH1cbiAgICBpZiAoZSArIGVCaWFzID49IDEpIHtcbiAgICAgIHZhbHVlICs9IHJ0IC8gYztcbiAgICB9IGVsc2Uge1xuICAgICAgdmFsdWUgKz0gcnQgKiBNYXRoLnBvdygyLCAxIC0gZUJpYXMpO1xuICAgIH1cbiAgICBpZiAodmFsdWUgKiBjID49IDIpIHtcbiAgICAgIGUrKztcbiAgICAgIGMgLz0gMjtcbiAgICB9XG5cbiAgICBpZiAoZSArIGVCaWFzID49IGVNYXgpIHtcbiAgICAgIG0gPSAwO1xuICAgICAgZSA9IGVNYXg7XG4gICAgfSBlbHNlIGlmIChlICsgZUJpYXMgPj0gMSkge1xuICAgICAgbSA9ICh2YWx1ZSAqIGMgLSAxKSAqIE1hdGgucG93KDIsIG1MZW4pO1xuICAgICAgZSA9IGUgKyBlQmlhcztcbiAgICB9IGVsc2Uge1xuICAgICAgbSA9IHZhbHVlICogTWF0aC5wb3coMiwgZUJpYXMgLSAxKSAqIE1hdGgucG93KDIsIG1MZW4pO1xuICAgICAgZSA9IDA7XG4gICAgfVxuICB9XG5cbiAgZm9yICg7IG1MZW4gPj0gODsgYnVmZmVyW29mZnNldCArIGldID0gbSAmIDB4ZmYsIGkgKz0gZCwgbSAvPSAyNTYsIG1MZW4gLT0gOCkge31cblxuICBlID0gKGUgPDwgbUxlbikgfCBtO1xuICBlTGVuICs9IG1MZW47XG4gIGZvciAoOyBlTGVuID4gMDsgYnVmZmVyW29mZnNldCArIGldID0gZSAmIDB4ZmYsIGkgKz0gZCwgZSAvPSAyNTYsIGVMZW4gLT0gOCkge31cblxuICBidWZmZXJbb2Zmc2V0ICsgaSAtIGRdIHw9IHMgKiAxMjg7XG59XG5cbnZhciB0b1N0cmluZyA9IHt9LnRvU3RyaW5nO1xuXG52YXIgaXNBcnJheSA9IEFycmF5LmlzQXJyYXkgfHwgZnVuY3Rpb24gKGFycikge1xuICByZXR1cm4gdG9TdHJpbmcuY2FsbChhcnIpID09ICdbb2JqZWN0IEFycmF5XSc7XG59O1xuXG4vKiFcbiAqIFRoZSBidWZmZXIgbW9kdWxlIGZyb20gbm9kZS5qcywgZm9yIHRoZSBicm93c2VyLlxuICpcbiAqIEBhdXRob3IgICBGZXJvc3MgQWJvdWtoYWRpamVoIDxmZXJvc3NAZmVyb3NzLm9yZz4gPGh0dHA6Ly9mZXJvc3Mub3JnPlxuICogQGxpY2Vuc2UgIE1JVFxuICovXG5cbnZhciBJTlNQRUNUX01BWF9CWVRFUyA9IDUwO1xuXG4vKipcbiAqIElmIGBCdWZmZXIuVFlQRURfQVJSQVlfU1VQUE9SVGA6XG4gKiAgID09PSB0cnVlICAgIFVzZSBVaW50OEFycmF5IGltcGxlbWVudGF0aW9uIChmYXN0ZXN0KVxuICogICA9PT0gZmFsc2UgICBVc2UgT2JqZWN0IGltcGxlbWVudGF0aW9uIChtb3N0IGNvbXBhdGlibGUsIGV2ZW4gSUU2KVxuICpcbiAqIEJyb3dzZXJzIHRoYXQgc3VwcG9ydCB0eXBlZCBhcnJheXMgYXJlIElFIDEwKywgRmlyZWZveCA0KywgQ2hyb21lIDcrLCBTYWZhcmkgNS4xKyxcbiAqIE9wZXJhIDExLjYrLCBpT1MgNC4yKy5cbiAqXG4gKiBEdWUgdG8gdmFyaW91cyBicm93c2VyIGJ1Z3MsIHNvbWV0aW1lcyB0aGUgT2JqZWN0IGltcGxlbWVudGF0aW9uIHdpbGwgYmUgdXNlZCBldmVuXG4gKiB3aGVuIHRoZSBicm93c2VyIHN1cHBvcnRzIHR5cGVkIGFycmF5cy5cbiAqXG4gKiBOb3RlOlxuICpcbiAqICAgLSBGaXJlZm94IDQtMjkgbGFja3Mgc3VwcG9ydCBmb3IgYWRkaW5nIG5ldyBwcm9wZXJ0aWVzIHRvIGBVaW50OEFycmF5YCBpbnN0YW5jZXMsXG4gKiAgICAgU2VlOiBodHRwczovL2J1Z3ppbGxhLm1vemlsbGEub3JnL3Nob3dfYnVnLmNnaT9pZD02OTU0MzguXG4gKlxuICogICAtIENocm9tZSA5LTEwIGlzIG1pc3NpbmcgdGhlIGBUeXBlZEFycmF5LnByb3RvdHlwZS5zdWJhcnJheWAgZnVuY3Rpb24uXG4gKlxuICogICAtIElFMTAgaGFzIGEgYnJva2VuIGBUeXBlZEFycmF5LnByb3RvdHlwZS5zdWJhcnJheWAgZnVuY3Rpb24gd2hpY2ggcmV0dXJucyBhcnJheXMgb2ZcbiAqICAgICBpbmNvcnJlY3QgbGVuZ3RoIGluIHNvbWUgc2l0dWF0aW9ucy5cblxuICogV2UgZGV0ZWN0IHRoZXNlIGJ1Z2d5IGJyb3dzZXJzIGFuZCBzZXQgYEJ1ZmZlci5UWVBFRF9BUlJBWV9TVVBQT1JUYCB0byBgZmFsc2VgIHNvIHRoZXlcbiAqIGdldCB0aGUgT2JqZWN0IGltcGxlbWVudGF0aW9uLCB3aGljaCBpcyBzbG93ZXIgYnV0IGJlaGF2ZXMgY29ycmVjdGx5LlxuICovXG5CdWZmZXIuVFlQRURfQVJSQVlfU1VQUE9SVCA9IGdsb2JhbC5UWVBFRF9BUlJBWV9TVVBQT1JUICE9PSB1bmRlZmluZWRcbiAgPyBnbG9iYWwuVFlQRURfQVJSQVlfU1VQUE9SVFxuICA6IHRydWU7XG5cbi8qXG4gKiBFeHBvcnQga01heExlbmd0aCBhZnRlciB0eXBlZCBhcnJheSBzdXBwb3J0IGlzIGRldGVybWluZWQuXG4gKi9cbnZhciBfa01heExlbmd0aCA9IGtNYXhMZW5ndGgoKTtcblxuZnVuY3Rpb24ga01heExlbmd0aCAoKSB7XG4gIHJldHVybiBCdWZmZXIuVFlQRURfQVJSQVlfU1VQUE9SVFxuICAgID8gMHg3ZmZmZmZmZlxuICAgIDogMHgzZmZmZmZmZlxufVxuXG5mdW5jdGlvbiBjcmVhdGVCdWZmZXIgKHRoYXQsIGxlbmd0aCkge1xuICBpZiAoa01heExlbmd0aCgpIDwgbGVuZ3RoKSB7XG4gICAgdGhyb3cgbmV3IFJhbmdlRXJyb3IoJ0ludmFsaWQgdHlwZWQgYXJyYXkgbGVuZ3RoJylcbiAgfVxuICBpZiAoQnVmZmVyLlRZUEVEX0FSUkFZX1NVUFBPUlQpIHtcbiAgICAvLyBSZXR1cm4gYW4gYXVnbWVudGVkIGBVaW50OEFycmF5YCBpbnN0YW5jZSwgZm9yIGJlc3QgcGVyZm9ybWFuY2VcbiAgICB0aGF0ID0gbmV3IFVpbnQ4QXJyYXkobGVuZ3RoKTtcbiAgICB0aGF0Ll9fcHJvdG9fXyA9IEJ1ZmZlci5wcm90b3R5cGU7XG4gIH0gZWxzZSB7XG4gICAgLy8gRmFsbGJhY2s6IFJldHVybiBhbiBvYmplY3QgaW5zdGFuY2Ugb2YgdGhlIEJ1ZmZlciBjbGFzc1xuICAgIGlmICh0aGF0ID09PSBudWxsKSB7XG4gICAgICB0aGF0ID0gbmV3IEJ1ZmZlcihsZW5ndGgpO1xuICAgIH1cbiAgICB0aGF0Lmxlbmd0aCA9IGxlbmd0aDtcbiAgfVxuXG4gIHJldHVybiB0aGF0XG59XG5cbi8qKlxuICogVGhlIEJ1ZmZlciBjb25zdHJ1Y3RvciByZXR1cm5zIGluc3RhbmNlcyBvZiBgVWludDhBcnJheWAgdGhhdCBoYXZlIHRoZWlyXG4gKiBwcm90b3R5cGUgY2hhbmdlZCB0byBgQnVmZmVyLnByb3RvdHlwZWAuIEZ1cnRoZXJtb3JlLCBgQnVmZmVyYCBpcyBhIHN1YmNsYXNzIG9mXG4gKiBgVWludDhBcnJheWAsIHNvIHRoZSByZXR1cm5lZCBpbnN0YW5jZXMgd2lsbCBoYXZlIGFsbCB0aGUgbm9kZSBgQnVmZmVyYCBtZXRob2RzXG4gKiBhbmQgdGhlIGBVaW50OEFycmF5YCBtZXRob2RzLiBTcXVhcmUgYnJhY2tldCBub3RhdGlvbiB3b3JrcyBhcyBleHBlY3RlZCAtLSBpdFxuICogcmV0dXJucyBhIHNpbmdsZSBvY3RldC5cbiAqXG4gKiBUaGUgYFVpbnQ4QXJyYXlgIHByb3RvdHlwZSByZW1haW5zIHVubW9kaWZpZWQuXG4gKi9cblxuZnVuY3Rpb24gQnVmZmVyIChhcmcsIGVuY29kaW5nT3JPZmZzZXQsIGxlbmd0aCkge1xuICBpZiAoIUJ1ZmZlci5UWVBFRF9BUlJBWV9TVVBQT1JUICYmICEodGhpcyBpbnN0YW5jZW9mIEJ1ZmZlcikpIHtcbiAgICByZXR1cm4gbmV3IEJ1ZmZlcihhcmcsIGVuY29kaW5nT3JPZmZzZXQsIGxlbmd0aClcbiAgfVxuXG4gIC8vIENvbW1vbiBjYXNlLlxuICBpZiAodHlwZW9mIGFyZyA9PT0gJ251bWJlcicpIHtcbiAgICBpZiAodHlwZW9mIGVuY29kaW5nT3JPZmZzZXQgPT09ICdzdHJpbmcnKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgICAgICdJZiBlbmNvZGluZyBpcyBzcGVjaWZpZWQgdGhlbiB0aGUgZmlyc3QgYXJndW1lbnQgbXVzdCBiZSBhIHN0cmluZydcbiAgICAgIClcbiAgICB9XG4gICAgcmV0dXJuIGFsbG9jVW5zYWZlKHRoaXMsIGFyZylcbiAgfVxuICByZXR1cm4gZnJvbSh0aGlzLCBhcmcsIGVuY29kaW5nT3JPZmZzZXQsIGxlbmd0aClcbn1cblxuQnVmZmVyLnBvb2xTaXplID0gODE5MjsgLy8gbm90IHVzZWQgYnkgdGhpcyBpbXBsZW1lbnRhdGlvblxuXG4vLyBUT0RPOiBMZWdhY3ksIG5vdCBuZWVkZWQgYW55bW9yZS4gUmVtb3ZlIGluIG5leHQgbWFqb3IgdmVyc2lvbi5cbkJ1ZmZlci5fYXVnbWVudCA9IGZ1bmN0aW9uIChhcnIpIHtcbiAgYXJyLl9fcHJvdG9fXyA9IEJ1ZmZlci5wcm90b3R5cGU7XG4gIHJldHVybiBhcnJcbn07XG5cbmZ1bmN0aW9uIGZyb20gKHRoYXQsIHZhbHVlLCBlbmNvZGluZ09yT2Zmc2V0LCBsZW5ndGgpIHtcbiAgaWYgKHR5cGVvZiB2YWx1ZSA9PT0gJ251bWJlcicpIHtcbiAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdcInZhbHVlXCIgYXJndW1lbnQgbXVzdCBub3QgYmUgYSBudW1iZXInKVxuICB9XG5cbiAgaWYgKHR5cGVvZiBBcnJheUJ1ZmZlciAhPT0gJ3VuZGVmaW5lZCcgJiYgdmFsdWUgaW5zdGFuY2VvZiBBcnJheUJ1ZmZlcikge1xuICAgIHJldHVybiBmcm9tQXJyYXlCdWZmZXIodGhhdCwgdmFsdWUsIGVuY29kaW5nT3JPZmZzZXQsIGxlbmd0aClcbiAgfVxuXG4gIGlmICh0eXBlb2YgdmFsdWUgPT09ICdzdHJpbmcnKSB7XG4gICAgcmV0dXJuIGZyb21TdHJpbmcodGhhdCwgdmFsdWUsIGVuY29kaW5nT3JPZmZzZXQpXG4gIH1cblxuICByZXR1cm4gZnJvbU9iamVjdCh0aGF0LCB2YWx1ZSlcbn1cblxuLyoqXG4gKiBGdW5jdGlvbmFsbHkgZXF1aXZhbGVudCB0byBCdWZmZXIoYXJnLCBlbmNvZGluZykgYnV0IHRocm93cyBhIFR5cGVFcnJvclxuICogaWYgdmFsdWUgaXMgYSBudW1iZXIuXG4gKiBCdWZmZXIuZnJvbShzdHJbLCBlbmNvZGluZ10pXG4gKiBCdWZmZXIuZnJvbShhcnJheSlcbiAqIEJ1ZmZlci5mcm9tKGJ1ZmZlcilcbiAqIEJ1ZmZlci5mcm9tKGFycmF5QnVmZmVyWywgYnl0ZU9mZnNldFssIGxlbmd0aF1dKVxuICoqL1xuQnVmZmVyLmZyb20gPSBmdW5jdGlvbiAodmFsdWUsIGVuY29kaW5nT3JPZmZzZXQsIGxlbmd0aCkge1xuICByZXR1cm4gZnJvbShudWxsLCB2YWx1ZSwgZW5jb2RpbmdPck9mZnNldCwgbGVuZ3RoKVxufTtcblxuaWYgKEJ1ZmZlci5UWVBFRF9BUlJBWV9TVVBQT1JUKSB7XG4gIEJ1ZmZlci5wcm90b3R5cGUuX19wcm90b19fID0gVWludDhBcnJheS5wcm90b3R5cGU7XG4gIEJ1ZmZlci5fX3Byb3RvX18gPSBVaW50OEFycmF5O1xufVxuXG5mdW5jdGlvbiBhc3NlcnRTaXplIChzaXplKSB7XG4gIGlmICh0eXBlb2Ygc2l6ZSAhPT0gJ251bWJlcicpIHtcbiAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdcInNpemVcIiBhcmd1bWVudCBtdXN0IGJlIGEgbnVtYmVyJylcbiAgfSBlbHNlIGlmIChzaXplIDwgMCkge1xuICAgIHRocm93IG5ldyBSYW5nZUVycm9yKCdcInNpemVcIiBhcmd1bWVudCBtdXN0IG5vdCBiZSBuZWdhdGl2ZScpXG4gIH1cbn1cblxuZnVuY3Rpb24gYWxsb2MgKHRoYXQsIHNpemUsIGZpbGwsIGVuY29kaW5nKSB7XG4gIGFzc2VydFNpemUoc2l6ZSk7XG4gIGlmIChzaXplIDw9IDApIHtcbiAgICByZXR1cm4gY3JlYXRlQnVmZmVyKHRoYXQsIHNpemUpXG4gIH1cbiAgaWYgKGZpbGwgIT09IHVuZGVmaW5lZCkge1xuICAgIC8vIE9ubHkgcGF5IGF0dGVudGlvbiB0byBlbmNvZGluZyBpZiBpdCdzIGEgc3RyaW5nLiBUaGlzXG4gICAgLy8gcHJldmVudHMgYWNjaWRlbnRhbGx5IHNlbmRpbmcgaW4gYSBudW1iZXIgdGhhdCB3b3VsZFxuICAgIC8vIGJlIGludGVycHJldHRlZCBhcyBhIHN0YXJ0IG9mZnNldC5cbiAgICByZXR1cm4gdHlwZW9mIGVuY29kaW5nID09PSAnc3RyaW5nJ1xuICAgICAgPyBjcmVhdGVCdWZmZXIodGhhdCwgc2l6ZSkuZmlsbChmaWxsLCBlbmNvZGluZylcbiAgICAgIDogY3JlYXRlQnVmZmVyKHRoYXQsIHNpemUpLmZpbGwoZmlsbClcbiAgfVxuICByZXR1cm4gY3JlYXRlQnVmZmVyKHRoYXQsIHNpemUpXG59XG5cbi8qKlxuICogQ3JlYXRlcyBhIG5ldyBmaWxsZWQgQnVmZmVyIGluc3RhbmNlLlxuICogYWxsb2Moc2l6ZVssIGZpbGxbLCBlbmNvZGluZ11dKVxuICoqL1xuQnVmZmVyLmFsbG9jID0gZnVuY3Rpb24gKHNpemUsIGZpbGwsIGVuY29kaW5nKSB7XG4gIHJldHVybiBhbGxvYyhudWxsLCBzaXplLCBmaWxsLCBlbmNvZGluZylcbn07XG5cbmZ1bmN0aW9uIGFsbG9jVW5zYWZlICh0aGF0LCBzaXplKSB7XG4gIGFzc2VydFNpemUoc2l6ZSk7XG4gIHRoYXQgPSBjcmVhdGVCdWZmZXIodGhhdCwgc2l6ZSA8IDAgPyAwIDogY2hlY2tlZChzaXplKSB8IDApO1xuICBpZiAoIUJ1ZmZlci5UWVBFRF9BUlJBWV9TVVBQT1JUKSB7XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBzaXplOyArK2kpIHtcbiAgICAgIHRoYXRbaV0gPSAwO1xuICAgIH1cbiAgfVxuICByZXR1cm4gdGhhdFxufVxuXG4vKipcbiAqIEVxdWl2YWxlbnQgdG8gQnVmZmVyKG51bSksIGJ5IGRlZmF1bHQgY3JlYXRlcyBhIG5vbi16ZXJvLWZpbGxlZCBCdWZmZXIgaW5zdGFuY2UuXG4gKiAqL1xuQnVmZmVyLmFsbG9jVW5zYWZlID0gZnVuY3Rpb24gKHNpemUpIHtcbiAgcmV0dXJuIGFsbG9jVW5zYWZlKG51bGwsIHNpemUpXG59O1xuLyoqXG4gKiBFcXVpdmFsZW50IHRvIFNsb3dCdWZmZXIobnVtKSwgYnkgZGVmYXVsdCBjcmVhdGVzIGEgbm9uLXplcm8tZmlsbGVkIEJ1ZmZlciBpbnN0YW5jZS5cbiAqL1xuQnVmZmVyLmFsbG9jVW5zYWZlU2xvdyA9IGZ1bmN0aW9uIChzaXplKSB7XG4gIHJldHVybiBhbGxvY1Vuc2FmZShudWxsLCBzaXplKVxufTtcblxuZnVuY3Rpb24gZnJvbVN0cmluZyAodGhhdCwgc3RyaW5nLCBlbmNvZGluZykge1xuICBpZiAodHlwZW9mIGVuY29kaW5nICE9PSAnc3RyaW5nJyB8fCBlbmNvZGluZyA9PT0gJycpIHtcbiAgICBlbmNvZGluZyA9ICd1dGY4JztcbiAgfVxuXG4gIGlmICghQnVmZmVyLmlzRW5jb2RpbmcoZW5jb2RpbmcpKSB7XG4gICAgdGhyb3cgbmV3IFR5cGVFcnJvcignXCJlbmNvZGluZ1wiIG11c3QgYmUgYSB2YWxpZCBzdHJpbmcgZW5jb2RpbmcnKVxuICB9XG5cbiAgdmFyIGxlbmd0aCA9IGJ5dGVMZW5ndGgoc3RyaW5nLCBlbmNvZGluZykgfCAwO1xuICB0aGF0ID0gY3JlYXRlQnVmZmVyKHRoYXQsIGxlbmd0aCk7XG5cbiAgdmFyIGFjdHVhbCA9IHRoYXQud3JpdGUoc3RyaW5nLCBlbmNvZGluZyk7XG5cbiAgaWYgKGFjdHVhbCAhPT0gbGVuZ3RoKSB7XG4gICAgLy8gV3JpdGluZyBhIGhleCBzdHJpbmcsIGZvciBleGFtcGxlLCB0aGF0IGNvbnRhaW5zIGludmFsaWQgY2hhcmFjdGVycyB3aWxsXG4gICAgLy8gY2F1c2UgZXZlcnl0aGluZyBhZnRlciB0aGUgZmlyc3QgaW52YWxpZCBjaGFyYWN0ZXIgdG8gYmUgaWdub3JlZC4gKGUuZy5cbiAgICAvLyAnYWJ4eGNkJyB3aWxsIGJlIHRyZWF0ZWQgYXMgJ2FiJylcbiAgICB0aGF0ID0gdGhhdC5zbGljZSgwLCBhY3R1YWwpO1xuICB9XG5cbiAgcmV0dXJuIHRoYXRcbn1cblxuZnVuY3Rpb24gZnJvbUFycmF5TGlrZSAodGhhdCwgYXJyYXkpIHtcbiAgdmFyIGxlbmd0aCA9IGFycmF5Lmxlbmd0aCA8IDAgPyAwIDogY2hlY2tlZChhcnJheS5sZW5ndGgpIHwgMDtcbiAgdGhhdCA9IGNyZWF0ZUJ1ZmZlcih0aGF0LCBsZW5ndGgpO1xuICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbmd0aDsgaSArPSAxKSB7XG4gICAgdGhhdFtpXSA9IGFycmF5W2ldICYgMjU1O1xuICB9XG4gIHJldHVybiB0aGF0XG59XG5cbmZ1bmN0aW9uIGZyb21BcnJheUJ1ZmZlciAodGhhdCwgYXJyYXksIGJ5dGVPZmZzZXQsIGxlbmd0aCkge1xuICBhcnJheS5ieXRlTGVuZ3RoOyAvLyB0aGlzIHRocm93cyBpZiBgYXJyYXlgIGlzIG5vdCBhIHZhbGlkIEFycmF5QnVmZmVyXG5cbiAgaWYgKGJ5dGVPZmZzZXQgPCAwIHx8IGFycmF5LmJ5dGVMZW5ndGggPCBieXRlT2Zmc2V0KSB7XG4gICAgdGhyb3cgbmV3IFJhbmdlRXJyb3IoJ1xcJ29mZnNldFxcJyBpcyBvdXQgb2YgYm91bmRzJylcbiAgfVxuXG4gIGlmIChhcnJheS5ieXRlTGVuZ3RoIDwgYnl0ZU9mZnNldCArIChsZW5ndGggfHwgMCkpIHtcbiAgICB0aHJvdyBuZXcgUmFuZ2VFcnJvcignXFwnbGVuZ3RoXFwnIGlzIG91dCBvZiBib3VuZHMnKVxuICB9XG5cbiAgaWYgKGJ5dGVPZmZzZXQgPT09IHVuZGVmaW5lZCAmJiBsZW5ndGggPT09IHVuZGVmaW5lZCkge1xuICAgIGFycmF5ID0gbmV3IFVpbnQ4QXJyYXkoYXJyYXkpO1xuICB9IGVsc2UgaWYgKGxlbmd0aCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgYXJyYXkgPSBuZXcgVWludDhBcnJheShhcnJheSwgYnl0ZU9mZnNldCk7XG4gIH0gZWxzZSB7XG4gICAgYXJyYXkgPSBuZXcgVWludDhBcnJheShhcnJheSwgYnl0ZU9mZnNldCwgbGVuZ3RoKTtcbiAgfVxuXG4gIGlmIChCdWZmZXIuVFlQRURfQVJSQVlfU1VQUE9SVCkge1xuICAgIC8vIFJldHVybiBhbiBhdWdtZW50ZWQgYFVpbnQ4QXJyYXlgIGluc3RhbmNlLCBmb3IgYmVzdCBwZXJmb3JtYW5jZVxuICAgIHRoYXQgPSBhcnJheTtcbiAgICB0aGF0Ll9fcHJvdG9fXyA9IEJ1ZmZlci5wcm90b3R5cGU7XG4gIH0gZWxzZSB7XG4gICAgLy8gRmFsbGJhY2s6IFJldHVybiBhbiBvYmplY3QgaW5zdGFuY2Ugb2YgdGhlIEJ1ZmZlciBjbGFzc1xuICAgIHRoYXQgPSBmcm9tQXJyYXlMaWtlKHRoYXQsIGFycmF5KTtcbiAgfVxuICByZXR1cm4gdGhhdFxufVxuXG5mdW5jdGlvbiBmcm9tT2JqZWN0ICh0aGF0LCBvYmopIHtcbiAgaWYgKGludGVybmFsSXNCdWZmZXIob2JqKSkge1xuICAgIHZhciBsZW4gPSBjaGVja2VkKG9iai5sZW5ndGgpIHwgMDtcbiAgICB0aGF0ID0gY3JlYXRlQnVmZmVyKHRoYXQsIGxlbik7XG5cbiAgICBpZiAodGhhdC5sZW5ndGggPT09IDApIHtcbiAgICAgIHJldHVybiB0aGF0XG4gICAgfVxuXG4gICAgb2JqLmNvcHkodGhhdCwgMCwgMCwgbGVuKTtcbiAgICByZXR1cm4gdGhhdFxuICB9XG5cbiAgaWYgKG9iaikge1xuICAgIGlmICgodHlwZW9mIEFycmF5QnVmZmVyICE9PSAndW5kZWZpbmVkJyAmJlxuICAgICAgICBvYmouYnVmZmVyIGluc3RhbmNlb2YgQXJyYXlCdWZmZXIpIHx8ICdsZW5ndGgnIGluIG9iaikge1xuICAgICAgaWYgKHR5cGVvZiBvYmoubGVuZ3RoICE9PSAnbnVtYmVyJyB8fCBpc25hbihvYmoubGVuZ3RoKSkge1xuICAgICAgICByZXR1cm4gY3JlYXRlQnVmZmVyKHRoYXQsIDApXG4gICAgICB9XG4gICAgICByZXR1cm4gZnJvbUFycmF5TGlrZSh0aGF0LCBvYmopXG4gICAgfVxuXG4gICAgaWYgKG9iai50eXBlID09PSAnQnVmZmVyJyAmJiBpc0FycmF5KG9iai5kYXRhKSkge1xuICAgICAgcmV0dXJuIGZyb21BcnJheUxpa2UodGhhdCwgb2JqLmRhdGEpXG4gICAgfVxuICB9XG5cbiAgdGhyb3cgbmV3IFR5cGVFcnJvcignRmlyc3QgYXJndW1lbnQgbXVzdCBiZSBhIHN0cmluZywgQnVmZmVyLCBBcnJheUJ1ZmZlciwgQXJyYXksIG9yIGFycmF5LWxpa2Ugb2JqZWN0LicpXG59XG5cbmZ1bmN0aW9uIGNoZWNrZWQgKGxlbmd0aCkge1xuICAvLyBOb3RlOiBjYW5ub3QgdXNlIGBsZW5ndGggPCBrTWF4TGVuZ3RoKClgIGhlcmUgYmVjYXVzZSB0aGF0IGZhaWxzIHdoZW5cbiAgLy8gbGVuZ3RoIGlzIE5hTiAod2hpY2ggaXMgb3RoZXJ3aXNlIGNvZXJjZWQgdG8gemVyby4pXG4gIGlmIChsZW5ndGggPj0ga01heExlbmd0aCgpKSB7XG4gICAgdGhyb3cgbmV3IFJhbmdlRXJyb3IoJ0F0dGVtcHQgdG8gYWxsb2NhdGUgQnVmZmVyIGxhcmdlciB0aGFuIG1heGltdW0gJyArXG4gICAgICAgICAgICAgICAgICAgICAgICAgJ3NpemU6IDB4JyArIGtNYXhMZW5ndGgoKS50b1N0cmluZygxNikgKyAnIGJ5dGVzJylcbiAgfVxuICByZXR1cm4gbGVuZ3RoIHwgMFxufVxuXG5mdW5jdGlvbiBTbG93QnVmZmVyIChsZW5ndGgpIHtcbiAgaWYgKCtsZW5ndGggIT0gbGVuZ3RoKSB7IC8vIGVzbGludC1kaXNhYmxlLWxpbmUgZXFlcWVxXG4gICAgbGVuZ3RoID0gMDtcbiAgfVxuICByZXR1cm4gQnVmZmVyLmFsbG9jKCtsZW5ndGgpXG59XG5CdWZmZXIuaXNCdWZmZXIgPSBpc0J1ZmZlcjtcbmZ1bmN0aW9uIGludGVybmFsSXNCdWZmZXIgKGIpIHtcbiAgcmV0dXJuICEhKGIgIT0gbnVsbCAmJiBiLl9pc0J1ZmZlcilcbn1cblxuQnVmZmVyLmNvbXBhcmUgPSBmdW5jdGlvbiBjb21wYXJlIChhLCBiKSB7XG4gIGlmICghaW50ZXJuYWxJc0J1ZmZlcihhKSB8fCAhaW50ZXJuYWxJc0J1ZmZlcihiKSkge1xuICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ0FyZ3VtZW50cyBtdXN0IGJlIEJ1ZmZlcnMnKVxuICB9XG5cbiAgaWYgKGEgPT09IGIpIHJldHVybiAwXG5cbiAgdmFyIHggPSBhLmxlbmd0aDtcbiAgdmFyIHkgPSBiLmxlbmd0aDtcblxuICBmb3IgKHZhciBpID0gMCwgbGVuID0gTWF0aC5taW4oeCwgeSk7IGkgPCBsZW47ICsraSkge1xuICAgIGlmIChhW2ldICE9PSBiW2ldKSB7XG4gICAgICB4ID0gYVtpXTtcbiAgICAgIHkgPSBiW2ldO1xuICAgICAgYnJlYWtcbiAgICB9XG4gIH1cblxuICBpZiAoeCA8IHkpIHJldHVybiAtMVxuICBpZiAoeSA8IHgpIHJldHVybiAxXG4gIHJldHVybiAwXG59O1xuXG5CdWZmZXIuaXNFbmNvZGluZyA9IGZ1bmN0aW9uIGlzRW5jb2RpbmcgKGVuY29kaW5nKSB7XG4gIHN3aXRjaCAoU3RyaW5nKGVuY29kaW5nKS50b0xvd2VyQ2FzZSgpKSB7XG4gICAgY2FzZSAnaGV4JzpcbiAgICBjYXNlICd1dGY4JzpcbiAgICBjYXNlICd1dGYtOCc6XG4gICAgY2FzZSAnYXNjaWknOlxuICAgIGNhc2UgJ2xhdGluMSc6XG4gICAgY2FzZSAnYmluYXJ5JzpcbiAgICBjYXNlICdiYXNlNjQnOlxuICAgIGNhc2UgJ3VjczInOlxuICAgIGNhc2UgJ3Vjcy0yJzpcbiAgICBjYXNlICd1dGYxNmxlJzpcbiAgICBjYXNlICd1dGYtMTZsZSc6XG4gICAgICByZXR1cm4gdHJ1ZVxuICAgIGRlZmF1bHQ6XG4gICAgICByZXR1cm4gZmFsc2VcbiAgfVxufTtcblxuQnVmZmVyLmNvbmNhdCA9IGZ1bmN0aW9uIGNvbmNhdCAobGlzdCwgbGVuZ3RoKSB7XG4gIGlmICghaXNBcnJheShsaXN0KSkge1xuICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ1wibGlzdFwiIGFyZ3VtZW50IG11c3QgYmUgYW4gQXJyYXkgb2YgQnVmZmVycycpXG4gIH1cblxuICBpZiAobGlzdC5sZW5ndGggPT09IDApIHtcbiAgICByZXR1cm4gQnVmZmVyLmFsbG9jKDApXG4gIH1cblxuICB2YXIgaTtcbiAgaWYgKGxlbmd0aCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgbGVuZ3RoID0gMDtcbiAgICBmb3IgKGkgPSAwOyBpIDwgbGlzdC5sZW5ndGg7ICsraSkge1xuICAgICAgbGVuZ3RoICs9IGxpc3RbaV0ubGVuZ3RoO1xuICAgIH1cbiAgfVxuXG4gIHZhciBidWZmZXIgPSBCdWZmZXIuYWxsb2NVbnNhZmUobGVuZ3RoKTtcbiAgdmFyIHBvcyA9IDA7XG4gIGZvciAoaSA9IDA7IGkgPCBsaXN0Lmxlbmd0aDsgKytpKSB7XG4gICAgdmFyIGJ1ZiA9IGxpc3RbaV07XG4gICAgaWYgKCFpbnRlcm5hbElzQnVmZmVyKGJ1ZikpIHtcbiAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ1wibGlzdFwiIGFyZ3VtZW50IG11c3QgYmUgYW4gQXJyYXkgb2YgQnVmZmVycycpXG4gICAgfVxuICAgIGJ1Zi5jb3B5KGJ1ZmZlciwgcG9zKTtcbiAgICBwb3MgKz0gYnVmLmxlbmd0aDtcbiAgfVxuICByZXR1cm4gYnVmZmVyXG59O1xuXG5mdW5jdGlvbiBieXRlTGVuZ3RoIChzdHJpbmcsIGVuY29kaW5nKSB7XG4gIGlmIChpbnRlcm5hbElzQnVmZmVyKHN0cmluZykpIHtcbiAgICByZXR1cm4gc3RyaW5nLmxlbmd0aFxuICB9XG4gIGlmICh0eXBlb2YgQXJyYXlCdWZmZXIgIT09ICd1bmRlZmluZWQnICYmIHR5cGVvZiBBcnJheUJ1ZmZlci5pc1ZpZXcgPT09ICdmdW5jdGlvbicgJiZcbiAgICAgIChBcnJheUJ1ZmZlci5pc1ZpZXcoc3RyaW5nKSB8fCBzdHJpbmcgaW5zdGFuY2VvZiBBcnJheUJ1ZmZlcikpIHtcbiAgICByZXR1cm4gc3RyaW5nLmJ5dGVMZW5ndGhcbiAgfVxuICBpZiAodHlwZW9mIHN0cmluZyAhPT0gJ3N0cmluZycpIHtcbiAgICBzdHJpbmcgPSAnJyArIHN0cmluZztcbiAgfVxuXG4gIHZhciBsZW4gPSBzdHJpbmcubGVuZ3RoO1xuICBpZiAobGVuID09PSAwKSByZXR1cm4gMFxuXG4gIC8vIFVzZSBhIGZvciBsb29wIHRvIGF2b2lkIHJlY3Vyc2lvblxuICB2YXIgbG93ZXJlZENhc2UgPSBmYWxzZTtcbiAgZm9yICg7Oykge1xuICAgIHN3aXRjaCAoZW5jb2RpbmcpIHtcbiAgICAgIGNhc2UgJ2FzY2lpJzpcbiAgICAgIGNhc2UgJ2xhdGluMSc6XG4gICAgICBjYXNlICdiaW5hcnknOlxuICAgICAgICByZXR1cm4gbGVuXG4gICAgICBjYXNlICd1dGY4JzpcbiAgICAgIGNhc2UgJ3V0Zi04JzpcbiAgICAgIGNhc2UgdW5kZWZpbmVkOlxuICAgICAgICByZXR1cm4gdXRmOFRvQnl0ZXMoc3RyaW5nKS5sZW5ndGhcbiAgICAgIGNhc2UgJ3VjczInOlxuICAgICAgY2FzZSAndWNzLTInOlxuICAgICAgY2FzZSAndXRmMTZsZSc6XG4gICAgICBjYXNlICd1dGYtMTZsZSc6XG4gICAgICAgIHJldHVybiBsZW4gKiAyXG4gICAgICBjYXNlICdoZXgnOlxuICAgICAgICByZXR1cm4gbGVuID4+PiAxXG4gICAgICBjYXNlICdiYXNlNjQnOlxuICAgICAgICByZXR1cm4gYmFzZTY0VG9CeXRlcyhzdHJpbmcpLmxlbmd0aFxuICAgICAgZGVmYXVsdDpcbiAgICAgICAgaWYgKGxvd2VyZWRDYXNlKSByZXR1cm4gdXRmOFRvQnl0ZXMoc3RyaW5nKS5sZW5ndGggLy8gYXNzdW1lIHV0ZjhcbiAgICAgICAgZW5jb2RpbmcgPSAoJycgKyBlbmNvZGluZykudG9Mb3dlckNhc2UoKTtcbiAgICAgICAgbG93ZXJlZENhc2UgPSB0cnVlO1xuICAgIH1cbiAgfVxufVxuQnVmZmVyLmJ5dGVMZW5ndGggPSBieXRlTGVuZ3RoO1xuXG5mdW5jdGlvbiBzbG93VG9TdHJpbmcgKGVuY29kaW5nLCBzdGFydCwgZW5kKSB7XG4gIHZhciBsb3dlcmVkQ2FzZSA9IGZhbHNlO1xuXG4gIC8vIE5vIG5lZWQgdG8gdmVyaWZ5IHRoYXQgXCJ0aGlzLmxlbmd0aCA8PSBNQVhfVUlOVDMyXCIgc2luY2UgaXQncyBhIHJlYWQtb25seVxuICAvLyBwcm9wZXJ0eSBvZiBhIHR5cGVkIGFycmF5LlxuXG4gIC8vIFRoaXMgYmVoYXZlcyBuZWl0aGVyIGxpa2UgU3RyaW5nIG5vciBVaW50OEFycmF5IGluIHRoYXQgd2Ugc2V0IHN0YXJ0L2VuZFxuICAvLyB0byB0aGVpciB1cHBlci9sb3dlciBib3VuZHMgaWYgdGhlIHZhbHVlIHBhc3NlZCBpcyBvdXQgb2YgcmFuZ2UuXG4gIC8vIHVuZGVmaW5lZCBpcyBoYW5kbGVkIHNwZWNpYWxseSBhcyBwZXIgRUNNQS0yNjIgNnRoIEVkaXRpb24sXG4gIC8vIFNlY3Rpb24gMTMuMy4zLjcgUnVudGltZSBTZW1hbnRpY3M6IEtleWVkQmluZGluZ0luaXRpYWxpemF0aW9uLlxuICBpZiAoc3RhcnQgPT09IHVuZGVmaW5lZCB8fCBzdGFydCA8IDApIHtcbiAgICBzdGFydCA9IDA7XG4gIH1cbiAgLy8gUmV0dXJuIGVhcmx5IGlmIHN0YXJ0ID4gdGhpcy5sZW5ndGguIERvbmUgaGVyZSB0byBwcmV2ZW50IHBvdGVudGlhbCB1aW50MzJcbiAgLy8gY29lcmNpb24gZmFpbCBiZWxvdy5cbiAgaWYgKHN0YXJ0ID4gdGhpcy5sZW5ndGgpIHtcbiAgICByZXR1cm4gJydcbiAgfVxuXG4gIGlmIChlbmQgPT09IHVuZGVmaW5lZCB8fCBlbmQgPiB0aGlzLmxlbmd0aCkge1xuICAgIGVuZCA9IHRoaXMubGVuZ3RoO1xuICB9XG5cbiAgaWYgKGVuZCA8PSAwKSB7XG4gICAgcmV0dXJuICcnXG4gIH1cblxuICAvLyBGb3JjZSBjb2Vyc2lvbiB0byB1aW50MzIuIFRoaXMgd2lsbCBhbHNvIGNvZXJjZSBmYWxzZXkvTmFOIHZhbHVlcyB0byAwLlxuICBlbmQgPj4+PSAwO1xuICBzdGFydCA+Pj49IDA7XG5cbiAgaWYgKGVuZCA8PSBzdGFydCkge1xuICAgIHJldHVybiAnJ1xuICB9XG5cbiAgaWYgKCFlbmNvZGluZykgZW5jb2RpbmcgPSAndXRmOCc7XG5cbiAgd2hpbGUgKHRydWUpIHtcbiAgICBzd2l0Y2ggKGVuY29kaW5nKSB7XG4gICAgICBjYXNlICdoZXgnOlxuICAgICAgICByZXR1cm4gaGV4U2xpY2UodGhpcywgc3RhcnQsIGVuZClcblxuICAgICAgY2FzZSAndXRmOCc6XG4gICAgICBjYXNlICd1dGYtOCc6XG4gICAgICAgIHJldHVybiB1dGY4U2xpY2UodGhpcywgc3RhcnQsIGVuZClcblxuICAgICAgY2FzZSAnYXNjaWknOlxuICAgICAgICByZXR1cm4gYXNjaWlTbGljZSh0aGlzLCBzdGFydCwgZW5kKVxuXG4gICAgICBjYXNlICdsYXRpbjEnOlxuICAgICAgY2FzZSAnYmluYXJ5JzpcbiAgICAgICAgcmV0dXJuIGxhdGluMVNsaWNlKHRoaXMsIHN0YXJ0LCBlbmQpXG5cbiAgICAgIGNhc2UgJ2Jhc2U2NCc6XG4gICAgICAgIHJldHVybiBiYXNlNjRTbGljZSh0aGlzLCBzdGFydCwgZW5kKVxuXG4gICAgICBjYXNlICd1Y3MyJzpcbiAgICAgIGNhc2UgJ3Vjcy0yJzpcbiAgICAgIGNhc2UgJ3V0ZjE2bGUnOlxuICAgICAgY2FzZSAndXRmLTE2bGUnOlxuICAgICAgICByZXR1cm4gdXRmMTZsZVNsaWNlKHRoaXMsIHN0YXJ0LCBlbmQpXG5cbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIGlmIChsb3dlcmVkQ2FzZSkgdGhyb3cgbmV3IFR5cGVFcnJvcignVW5rbm93biBlbmNvZGluZzogJyArIGVuY29kaW5nKVxuICAgICAgICBlbmNvZGluZyA9IChlbmNvZGluZyArICcnKS50b0xvd2VyQ2FzZSgpO1xuICAgICAgICBsb3dlcmVkQ2FzZSA9IHRydWU7XG4gICAgfVxuICB9XG59XG5cbi8vIFRoZSBwcm9wZXJ0eSBpcyB1c2VkIGJ5IGBCdWZmZXIuaXNCdWZmZXJgIGFuZCBgaXMtYnVmZmVyYCAoaW4gU2FmYXJpIDUtNykgdG8gZGV0ZWN0XG4vLyBCdWZmZXIgaW5zdGFuY2VzLlxuQnVmZmVyLnByb3RvdHlwZS5faXNCdWZmZXIgPSB0cnVlO1xuXG5mdW5jdGlvbiBzd2FwIChiLCBuLCBtKSB7XG4gIHZhciBpID0gYltuXTtcbiAgYltuXSA9IGJbbV07XG4gIGJbbV0gPSBpO1xufVxuXG5CdWZmZXIucHJvdG90eXBlLnN3YXAxNiA9IGZ1bmN0aW9uIHN3YXAxNiAoKSB7XG4gIHZhciBsZW4gPSB0aGlzLmxlbmd0aDtcbiAgaWYgKGxlbiAlIDIgIT09IDApIHtcbiAgICB0aHJvdyBuZXcgUmFuZ2VFcnJvcignQnVmZmVyIHNpemUgbXVzdCBiZSBhIG11bHRpcGxlIG9mIDE2LWJpdHMnKVxuICB9XG4gIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuOyBpICs9IDIpIHtcbiAgICBzd2FwKHRoaXMsIGksIGkgKyAxKTtcbiAgfVxuICByZXR1cm4gdGhpc1xufTtcblxuQnVmZmVyLnByb3RvdHlwZS5zd2FwMzIgPSBmdW5jdGlvbiBzd2FwMzIgKCkge1xuICB2YXIgbGVuID0gdGhpcy5sZW5ndGg7XG4gIGlmIChsZW4gJSA0ICE9PSAwKSB7XG4gICAgdGhyb3cgbmV3IFJhbmdlRXJyb3IoJ0J1ZmZlciBzaXplIG11c3QgYmUgYSBtdWx0aXBsZSBvZiAzMi1iaXRzJylcbiAgfVxuICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbjsgaSArPSA0KSB7XG4gICAgc3dhcCh0aGlzLCBpLCBpICsgMyk7XG4gICAgc3dhcCh0aGlzLCBpICsgMSwgaSArIDIpO1xuICB9XG4gIHJldHVybiB0aGlzXG59O1xuXG5CdWZmZXIucHJvdG90eXBlLnN3YXA2NCA9IGZ1bmN0aW9uIHN3YXA2NCAoKSB7XG4gIHZhciBsZW4gPSB0aGlzLmxlbmd0aDtcbiAgaWYgKGxlbiAlIDggIT09IDApIHtcbiAgICB0aHJvdyBuZXcgUmFuZ2VFcnJvcignQnVmZmVyIHNpemUgbXVzdCBiZSBhIG11bHRpcGxlIG9mIDY0LWJpdHMnKVxuICB9XG4gIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuOyBpICs9IDgpIHtcbiAgICBzd2FwKHRoaXMsIGksIGkgKyA3KTtcbiAgICBzd2FwKHRoaXMsIGkgKyAxLCBpICsgNik7XG4gICAgc3dhcCh0aGlzLCBpICsgMiwgaSArIDUpO1xuICAgIHN3YXAodGhpcywgaSArIDMsIGkgKyA0KTtcbiAgfVxuICByZXR1cm4gdGhpc1xufTtcblxuQnVmZmVyLnByb3RvdHlwZS50b1N0cmluZyA9IGZ1bmN0aW9uIHRvU3RyaW5nICgpIHtcbiAgdmFyIGxlbmd0aCA9IHRoaXMubGVuZ3RoIHwgMDtcbiAgaWYgKGxlbmd0aCA9PT0gMCkgcmV0dXJuICcnXG4gIGlmIChhcmd1bWVudHMubGVuZ3RoID09PSAwKSByZXR1cm4gdXRmOFNsaWNlKHRoaXMsIDAsIGxlbmd0aClcbiAgcmV0dXJuIHNsb3dUb1N0cmluZy5hcHBseSh0aGlzLCBhcmd1bWVudHMpXG59O1xuXG5CdWZmZXIucHJvdG90eXBlLmVxdWFscyA9IGZ1bmN0aW9uIGVxdWFscyAoYikge1xuICBpZiAoIWludGVybmFsSXNCdWZmZXIoYikpIHRocm93IG5ldyBUeXBlRXJyb3IoJ0FyZ3VtZW50IG11c3QgYmUgYSBCdWZmZXInKVxuICBpZiAodGhpcyA9PT0gYikgcmV0dXJuIHRydWVcbiAgcmV0dXJuIEJ1ZmZlci5jb21wYXJlKHRoaXMsIGIpID09PSAwXG59O1xuXG5CdWZmZXIucHJvdG90eXBlLmluc3BlY3QgPSBmdW5jdGlvbiBpbnNwZWN0ICgpIHtcbiAgdmFyIHN0ciA9ICcnO1xuICB2YXIgbWF4ID0gSU5TUEVDVF9NQVhfQllURVM7XG4gIGlmICh0aGlzLmxlbmd0aCA+IDApIHtcbiAgICBzdHIgPSB0aGlzLnRvU3RyaW5nKCdoZXgnLCAwLCBtYXgpLm1hdGNoKC8uezJ9L2cpLmpvaW4oJyAnKTtcbiAgICBpZiAodGhpcy5sZW5ndGggPiBtYXgpIHN0ciArPSAnIC4uLiAnO1xuICB9XG4gIHJldHVybiAnPEJ1ZmZlciAnICsgc3RyICsgJz4nXG59O1xuXG5CdWZmZXIucHJvdG90eXBlLmNvbXBhcmUgPSBmdW5jdGlvbiBjb21wYXJlICh0YXJnZXQsIHN0YXJ0LCBlbmQsIHRoaXNTdGFydCwgdGhpc0VuZCkge1xuICBpZiAoIWludGVybmFsSXNCdWZmZXIodGFyZ2V0KSkge1xuICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ0FyZ3VtZW50IG11c3QgYmUgYSBCdWZmZXInKVxuICB9XG5cbiAgaWYgKHN0YXJ0ID09PSB1bmRlZmluZWQpIHtcbiAgICBzdGFydCA9IDA7XG4gIH1cbiAgaWYgKGVuZCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgZW5kID0gdGFyZ2V0ID8gdGFyZ2V0Lmxlbmd0aCA6IDA7XG4gIH1cbiAgaWYgKHRoaXNTdGFydCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgdGhpc1N0YXJ0ID0gMDtcbiAgfVxuICBpZiAodGhpc0VuZCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgdGhpc0VuZCA9IHRoaXMubGVuZ3RoO1xuICB9XG5cbiAgaWYgKHN0YXJ0IDwgMCB8fCBlbmQgPiB0YXJnZXQubGVuZ3RoIHx8IHRoaXNTdGFydCA8IDAgfHwgdGhpc0VuZCA+IHRoaXMubGVuZ3RoKSB7XG4gICAgdGhyb3cgbmV3IFJhbmdlRXJyb3IoJ291dCBvZiByYW5nZSBpbmRleCcpXG4gIH1cblxuICBpZiAodGhpc1N0YXJ0ID49IHRoaXNFbmQgJiYgc3RhcnQgPj0gZW5kKSB7XG4gICAgcmV0dXJuIDBcbiAgfVxuICBpZiAodGhpc1N0YXJ0ID49IHRoaXNFbmQpIHtcbiAgICByZXR1cm4gLTFcbiAgfVxuICBpZiAoc3RhcnQgPj0gZW5kKSB7XG4gICAgcmV0dXJuIDFcbiAgfVxuXG4gIHN0YXJ0ID4+Pj0gMDtcbiAgZW5kID4+Pj0gMDtcbiAgdGhpc1N0YXJ0ID4+Pj0gMDtcbiAgdGhpc0VuZCA+Pj49IDA7XG5cbiAgaWYgKHRoaXMgPT09IHRhcmdldCkgcmV0dXJuIDBcblxuICB2YXIgeCA9IHRoaXNFbmQgLSB0aGlzU3RhcnQ7XG4gIHZhciB5ID0gZW5kIC0gc3RhcnQ7XG4gIHZhciBsZW4gPSBNYXRoLm1pbih4LCB5KTtcblxuICB2YXIgdGhpc0NvcHkgPSB0aGlzLnNsaWNlKHRoaXNTdGFydCwgdGhpc0VuZCk7XG4gIHZhciB0YXJnZXRDb3B5ID0gdGFyZ2V0LnNsaWNlKHN0YXJ0LCBlbmQpO1xuXG4gIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuOyArK2kpIHtcbiAgICBpZiAodGhpc0NvcHlbaV0gIT09IHRhcmdldENvcHlbaV0pIHtcbiAgICAgIHggPSB0aGlzQ29weVtpXTtcbiAgICAgIHkgPSB0YXJnZXRDb3B5W2ldO1xuICAgICAgYnJlYWtcbiAgICB9XG4gIH1cblxuICBpZiAoeCA8IHkpIHJldHVybiAtMVxuICBpZiAoeSA8IHgpIHJldHVybiAxXG4gIHJldHVybiAwXG59O1xuXG4vLyBGaW5kcyBlaXRoZXIgdGhlIGZpcnN0IGluZGV4IG9mIGB2YWxgIGluIGBidWZmZXJgIGF0IG9mZnNldCA+PSBgYnl0ZU9mZnNldGAsXG4vLyBPUiB0aGUgbGFzdCBpbmRleCBvZiBgdmFsYCBpbiBgYnVmZmVyYCBhdCBvZmZzZXQgPD0gYGJ5dGVPZmZzZXRgLlxuLy9cbi8vIEFyZ3VtZW50czpcbi8vIC0gYnVmZmVyIC0gYSBCdWZmZXIgdG8gc2VhcmNoXG4vLyAtIHZhbCAtIGEgc3RyaW5nLCBCdWZmZXIsIG9yIG51bWJlclxuLy8gLSBieXRlT2Zmc2V0IC0gYW4gaW5kZXggaW50byBgYnVmZmVyYDsgd2lsbCBiZSBjbGFtcGVkIHRvIGFuIGludDMyXG4vLyAtIGVuY29kaW5nIC0gYW4gb3B0aW9uYWwgZW5jb2RpbmcsIHJlbGV2YW50IGlzIHZhbCBpcyBhIHN0cmluZ1xuLy8gLSBkaXIgLSB0cnVlIGZvciBpbmRleE9mLCBmYWxzZSBmb3IgbGFzdEluZGV4T2ZcbmZ1bmN0aW9uIGJpZGlyZWN0aW9uYWxJbmRleE9mIChidWZmZXIsIHZhbCwgYnl0ZU9mZnNldCwgZW5jb2RpbmcsIGRpcikge1xuICAvLyBFbXB0eSBidWZmZXIgbWVhbnMgbm8gbWF0Y2hcbiAgaWYgKGJ1ZmZlci5sZW5ndGggPT09IDApIHJldHVybiAtMVxuXG4gIC8vIE5vcm1hbGl6ZSBieXRlT2Zmc2V0XG4gIGlmICh0eXBlb2YgYnl0ZU9mZnNldCA9PT0gJ3N0cmluZycpIHtcbiAgICBlbmNvZGluZyA9IGJ5dGVPZmZzZXQ7XG4gICAgYnl0ZU9mZnNldCA9IDA7XG4gIH0gZWxzZSBpZiAoYnl0ZU9mZnNldCA+IDB4N2ZmZmZmZmYpIHtcbiAgICBieXRlT2Zmc2V0ID0gMHg3ZmZmZmZmZjtcbiAgfSBlbHNlIGlmIChieXRlT2Zmc2V0IDwgLTB4ODAwMDAwMDApIHtcbiAgICBieXRlT2Zmc2V0ID0gLTB4ODAwMDAwMDA7XG4gIH1cbiAgYnl0ZU9mZnNldCA9ICtieXRlT2Zmc2V0OyAgLy8gQ29lcmNlIHRvIE51bWJlci5cbiAgaWYgKGlzTmFOKGJ5dGVPZmZzZXQpKSB7XG4gICAgLy8gYnl0ZU9mZnNldDogaXQgaXQncyB1bmRlZmluZWQsIG51bGwsIE5hTiwgXCJmb29cIiwgZXRjLCBzZWFyY2ggd2hvbGUgYnVmZmVyXG4gICAgYnl0ZU9mZnNldCA9IGRpciA/IDAgOiAoYnVmZmVyLmxlbmd0aCAtIDEpO1xuICB9XG5cbiAgLy8gTm9ybWFsaXplIGJ5dGVPZmZzZXQ6IG5lZ2F0aXZlIG9mZnNldHMgc3RhcnQgZnJvbSB0aGUgZW5kIG9mIHRoZSBidWZmZXJcbiAgaWYgKGJ5dGVPZmZzZXQgPCAwKSBieXRlT2Zmc2V0ID0gYnVmZmVyLmxlbmd0aCArIGJ5dGVPZmZzZXQ7XG4gIGlmIChieXRlT2Zmc2V0ID49IGJ1ZmZlci5sZW5ndGgpIHtcbiAgICBpZiAoZGlyKSByZXR1cm4gLTFcbiAgICBlbHNlIGJ5dGVPZmZzZXQgPSBidWZmZXIubGVuZ3RoIC0gMTtcbiAgfSBlbHNlIGlmIChieXRlT2Zmc2V0IDwgMCkge1xuICAgIGlmIChkaXIpIGJ5dGVPZmZzZXQgPSAwO1xuICAgIGVsc2UgcmV0dXJuIC0xXG4gIH1cblxuICAvLyBOb3JtYWxpemUgdmFsXG4gIGlmICh0eXBlb2YgdmFsID09PSAnc3RyaW5nJykge1xuICAgIHZhbCA9IEJ1ZmZlci5mcm9tKHZhbCwgZW5jb2RpbmcpO1xuICB9XG5cbiAgLy8gRmluYWxseSwgc2VhcmNoIGVpdGhlciBpbmRleE9mIChpZiBkaXIgaXMgdHJ1ZSkgb3IgbGFzdEluZGV4T2ZcbiAgaWYgKGludGVybmFsSXNCdWZmZXIodmFsKSkge1xuICAgIC8vIFNwZWNpYWwgY2FzZTogbG9va2luZyBmb3IgZW1wdHkgc3RyaW5nL2J1ZmZlciBhbHdheXMgZmFpbHNcbiAgICBpZiAodmFsLmxlbmd0aCA9PT0gMCkge1xuICAgICAgcmV0dXJuIC0xXG4gICAgfVxuICAgIHJldHVybiBhcnJheUluZGV4T2YoYnVmZmVyLCB2YWwsIGJ5dGVPZmZzZXQsIGVuY29kaW5nLCBkaXIpXG4gIH0gZWxzZSBpZiAodHlwZW9mIHZhbCA9PT0gJ251bWJlcicpIHtcbiAgICB2YWwgPSB2YWwgJiAweEZGOyAvLyBTZWFyY2ggZm9yIGEgYnl0ZSB2YWx1ZSBbMC0yNTVdXG4gICAgaWYgKEJ1ZmZlci5UWVBFRF9BUlJBWV9TVVBQT1JUICYmXG4gICAgICAgIHR5cGVvZiBVaW50OEFycmF5LnByb3RvdHlwZS5pbmRleE9mID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICBpZiAoZGlyKSB7XG4gICAgICAgIHJldHVybiBVaW50OEFycmF5LnByb3RvdHlwZS5pbmRleE9mLmNhbGwoYnVmZmVyLCB2YWwsIGJ5dGVPZmZzZXQpXG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gVWludDhBcnJheS5wcm90b3R5cGUubGFzdEluZGV4T2YuY2FsbChidWZmZXIsIHZhbCwgYnl0ZU9mZnNldClcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIGFycmF5SW5kZXhPZihidWZmZXIsIFsgdmFsIF0sIGJ5dGVPZmZzZXQsIGVuY29kaW5nLCBkaXIpXG4gIH1cblxuICB0aHJvdyBuZXcgVHlwZUVycm9yKCd2YWwgbXVzdCBiZSBzdHJpbmcsIG51bWJlciBvciBCdWZmZXInKVxufVxuXG5mdW5jdGlvbiBhcnJheUluZGV4T2YgKGFyciwgdmFsLCBieXRlT2Zmc2V0LCBlbmNvZGluZywgZGlyKSB7XG4gIHZhciBpbmRleFNpemUgPSAxO1xuICB2YXIgYXJyTGVuZ3RoID0gYXJyLmxlbmd0aDtcbiAgdmFyIHZhbExlbmd0aCA9IHZhbC5sZW5ndGg7XG5cbiAgaWYgKGVuY29kaW5nICE9PSB1bmRlZmluZWQpIHtcbiAgICBlbmNvZGluZyA9IFN0cmluZyhlbmNvZGluZykudG9Mb3dlckNhc2UoKTtcbiAgICBpZiAoZW5jb2RpbmcgPT09ICd1Y3MyJyB8fCBlbmNvZGluZyA9PT0gJ3Vjcy0yJyB8fFxuICAgICAgICBlbmNvZGluZyA9PT0gJ3V0ZjE2bGUnIHx8IGVuY29kaW5nID09PSAndXRmLTE2bGUnKSB7XG4gICAgICBpZiAoYXJyLmxlbmd0aCA8IDIgfHwgdmFsLmxlbmd0aCA8IDIpIHtcbiAgICAgICAgcmV0dXJuIC0xXG4gICAgICB9XG4gICAgICBpbmRleFNpemUgPSAyO1xuICAgICAgYXJyTGVuZ3RoIC89IDI7XG4gICAgICB2YWxMZW5ndGggLz0gMjtcbiAgICAgIGJ5dGVPZmZzZXQgLz0gMjtcbiAgICB9XG4gIH1cblxuICBmdW5jdGlvbiByZWFkIChidWYsIGkpIHtcbiAgICBpZiAoaW5kZXhTaXplID09PSAxKSB7XG4gICAgICByZXR1cm4gYnVmW2ldXG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiBidWYucmVhZFVJbnQxNkJFKGkgKiBpbmRleFNpemUpXG4gICAgfVxuICB9XG5cbiAgdmFyIGk7XG4gIGlmIChkaXIpIHtcbiAgICB2YXIgZm91bmRJbmRleCA9IC0xO1xuICAgIGZvciAoaSA9IGJ5dGVPZmZzZXQ7IGkgPCBhcnJMZW5ndGg7IGkrKykge1xuICAgICAgaWYgKHJlYWQoYXJyLCBpKSA9PT0gcmVhZCh2YWwsIGZvdW5kSW5kZXggPT09IC0xID8gMCA6IGkgLSBmb3VuZEluZGV4KSkge1xuICAgICAgICBpZiAoZm91bmRJbmRleCA9PT0gLTEpIGZvdW5kSW5kZXggPSBpO1xuICAgICAgICBpZiAoaSAtIGZvdW5kSW5kZXggKyAxID09PSB2YWxMZW5ndGgpIHJldHVybiBmb3VuZEluZGV4ICogaW5kZXhTaXplXG4gICAgICB9IGVsc2Uge1xuICAgICAgICBpZiAoZm91bmRJbmRleCAhPT0gLTEpIGkgLT0gaSAtIGZvdW5kSW5kZXg7XG4gICAgICAgIGZvdW5kSW5kZXggPSAtMTtcbiAgICAgIH1cbiAgICB9XG4gIH0gZWxzZSB7XG4gICAgaWYgKGJ5dGVPZmZzZXQgKyB2YWxMZW5ndGggPiBhcnJMZW5ndGgpIGJ5dGVPZmZzZXQgPSBhcnJMZW5ndGggLSB2YWxMZW5ndGg7XG4gICAgZm9yIChpID0gYnl0ZU9mZnNldDsgaSA+PSAwOyBpLS0pIHtcbiAgICAgIHZhciBmb3VuZCA9IHRydWU7XG4gICAgICBmb3IgKHZhciBqID0gMDsgaiA8IHZhbExlbmd0aDsgaisrKSB7XG4gICAgICAgIGlmIChyZWFkKGFyciwgaSArIGopICE9PSByZWFkKHZhbCwgaikpIHtcbiAgICAgICAgICBmb3VuZCA9IGZhbHNlO1xuICAgICAgICAgIGJyZWFrXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGlmIChmb3VuZCkgcmV0dXJuIGlcbiAgICB9XG4gIH1cblxuICByZXR1cm4gLTFcbn1cblxuQnVmZmVyLnByb3RvdHlwZS5pbmNsdWRlcyA9IGZ1bmN0aW9uIGluY2x1ZGVzICh2YWwsIGJ5dGVPZmZzZXQsIGVuY29kaW5nKSB7XG4gIHJldHVybiB0aGlzLmluZGV4T2YodmFsLCBieXRlT2Zmc2V0LCBlbmNvZGluZykgIT09IC0xXG59O1xuXG5CdWZmZXIucHJvdG90eXBlLmluZGV4T2YgPSBmdW5jdGlvbiBpbmRleE9mICh2YWwsIGJ5dGVPZmZzZXQsIGVuY29kaW5nKSB7XG4gIHJldHVybiBiaWRpcmVjdGlvbmFsSW5kZXhPZih0aGlzLCB2YWwsIGJ5dGVPZmZzZXQsIGVuY29kaW5nLCB0cnVlKVxufTtcblxuQnVmZmVyLnByb3RvdHlwZS5sYXN0SW5kZXhPZiA9IGZ1bmN0aW9uIGxhc3RJbmRleE9mICh2YWwsIGJ5dGVPZmZzZXQsIGVuY29kaW5nKSB7XG4gIHJldHVybiBiaWRpcmVjdGlvbmFsSW5kZXhPZih0aGlzLCB2YWwsIGJ5dGVPZmZzZXQsIGVuY29kaW5nLCBmYWxzZSlcbn07XG5cbmZ1bmN0aW9uIGhleFdyaXRlIChidWYsIHN0cmluZywgb2Zmc2V0LCBsZW5ndGgpIHtcbiAgb2Zmc2V0ID0gTnVtYmVyKG9mZnNldCkgfHwgMDtcbiAgdmFyIHJlbWFpbmluZyA9IGJ1Zi5sZW5ndGggLSBvZmZzZXQ7XG4gIGlmICghbGVuZ3RoKSB7XG4gICAgbGVuZ3RoID0gcmVtYWluaW5nO1xuICB9IGVsc2Uge1xuICAgIGxlbmd0aCA9IE51bWJlcihsZW5ndGgpO1xuICAgIGlmIChsZW5ndGggPiByZW1haW5pbmcpIHtcbiAgICAgIGxlbmd0aCA9IHJlbWFpbmluZztcbiAgICB9XG4gIH1cblxuICAvLyBtdXN0IGJlIGFuIGV2ZW4gbnVtYmVyIG9mIGRpZ2l0c1xuICB2YXIgc3RyTGVuID0gc3RyaW5nLmxlbmd0aDtcbiAgaWYgKHN0ckxlbiAlIDIgIT09IDApIHRocm93IG5ldyBUeXBlRXJyb3IoJ0ludmFsaWQgaGV4IHN0cmluZycpXG5cbiAgaWYgKGxlbmd0aCA+IHN0ckxlbiAvIDIpIHtcbiAgICBsZW5ndGggPSBzdHJMZW4gLyAyO1xuICB9XG4gIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuZ3RoOyArK2kpIHtcbiAgICB2YXIgcGFyc2VkID0gcGFyc2VJbnQoc3RyaW5nLnN1YnN0cihpICogMiwgMiksIDE2KTtcbiAgICBpZiAoaXNOYU4ocGFyc2VkKSkgcmV0dXJuIGlcbiAgICBidWZbb2Zmc2V0ICsgaV0gPSBwYXJzZWQ7XG4gIH1cbiAgcmV0dXJuIGlcbn1cblxuZnVuY3Rpb24gdXRmOFdyaXRlIChidWYsIHN0cmluZywgb2Zmc2V0LCBsZW5ndGgpIHtcbiAgcmV0dXJuIGJsaXRCdWZmZXIodXRmOFRvQnl0ZXMoc3RyaW5nLCBidWYubGVuZ3RoIC0gb2Zmc2V0KSwgYnVmLCBvZmZzZXQsIGxlbmd0aClcbn1cblxuZnVuY3Rpb24gYXNjaWlXcml0ZSAoYnVmLCBzdHJpbmcsIG9mZnNldCwgbGVuZ3RoKSB7XG4gIHJldHVybiBibGl0QnVmZmVyKGFzY2lpVG9CeXRlcyhzdHJpbmcpLCBidWYsIG9mZnNldCwgbGVuZ3RoKVxufVxuXG5mdW5jdGlvbiBsYXRpbjFXcml0ZSAoYnVmLCBzdHJpbmcsIG9mZnNldCwgbGVuZ3RoKSB7XG4gIHJldHVybiBhc2NpaVdyaXRlKGJ1Ziwgc3RyaW5nLCBvZmZzZXQsIGxlbmd0aClcbn1cblxuZnVuY3Rpb24gYmFzZTY0V3JpdGUgKGJ1Ziwgc3RyaW5nLCBvZmZzZXQsIGxlbmd0aCkge1xuICByZXR1cm4gYmxpdEJ1ZmZlcihiYXNlNjRUb0J5dGVzKHN0cmluZyksIGJ1Ziwgb2Zmc2V0LCBsZW5ndGgpXG59XG5cbmZ1bmN0aW9uIHVjczJXcml0ZSAoYnVmLCBzdHJpbmcsIG9mZnNldCwgbGVuZ3RoKSB7XG4gIHJldHVybiBibGl0QnVmZmVyKHV0ZjE2bGVUb0J5dGVzKHN0cmluZywgYnVmLmxlbmd0aCAtIG9mZnNldCksIGJ1Ziwgb2Zmc2V0LCBsZW5ndGgpXG59XG5cbkJ1ZmZlci5wcm90b3R5cGUud3JpdGUgPSBmdW5jdGlvbiB3cml0ZSAoc3RyaW5nLCBvZmZzZXQsIGxlbmd0aCwgZW5jb2RpbmcpIHtcbiAgLy8gQnVmZmVyI3dyaXRlKHN0cmluZylcbiAgaWYgKG9mZnNldCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgZW5jb2RpbmcgPSAndXRmOCc7XG4gICAgbGVuZ3RoID0gdGhpcy5sZW5ndGg7XG4gICAgb2Zmc2V0ID0gMDtcbiAgLy8gQnVmZmVyI3dyaXRlKHN0cmluZywgZW5jb2RpbmcpXG4gIH0gZWxzZSBpZiAobGVuZ3RoID09PSB1bmRlZmluZWQgJiYgdHlwZW9mIG9mZnNldCA9PT0gJ3N0cmluZycpIHtcbiAgICBlbmNvZGluZyA9IG9mZnNldDtcbiAgICBsZW5ndGggPSB0aGlzLmxlbmd0aDtcbiAgICBvZmZzZXQgPSAwO1xuICAvLyBCdWZmZXIjd3JpdGUoc3RyaW5nLCBvZmZzZXRbLCBsZW5ndGhdWywgZW5jb2RpbmddKVxuICB9IGVsc2UgaWYgKGlzRmluaXRlKG9mZnNldCkpIHtcbiAgICBvZmZzZXQgPSBvZmZzZXQgfCAwO1xuICAgIGlmIChpc0Zpbml0ZShsZW5ndGgpKSB7XG4gICAgICBsZW5ndGggPSBsZW5ndGggfCAwO1xuICAgICAgaWYgKGVuY29kaW5nID09PSB1bmRlZmluZWQpIGVuY29kaW5nID0gJ3V0ZjgnO1xuICAgIH0gZWxzZSB7XG4gICAgICBlbmNvZGluZyA9IGxlbmd0aDtcbiAgICAgIGxlbmd0aCA9IHVuZGVmaW5lZDtcbiAgICB9XG4gIC8vIGxlZ2FjeSB3cml0ZShzdHJpbmcsIGVuY29kaW5nLCBvZmZzZXQsIGxlbmd0aCkgLSByZW1vdmUgaW4gdjAuMTNcbiAgfSBlbHNlIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgICAnQnVmZmVyLndyaXRlKHN0cmluZywgZW5jb2RpbmcsIG9mZnNldFssIGxlbmd0aF0pIGlzIG5vIGxvbmdlciBzdXBwb3J0ZWQnXG4gICAgKVxuICB9XG5cbiAgdmFyIHJlbWFpbmluZyA9IHRoaXMubGVuZ3RoIC0gb2Zmc2V0O1xuICBpZiAobGVuZ3RoID09PSB1bmRlZmluZWQgfHwgbGVuZ3RoID4gcmVtYWluaW5nKSBsZW5ndGggPSByZW1haW5pbmc7XG5cbiAgaWYgKChzdHJpbmcubGVuZ3RoID4gMCAmJiAobGVuZ3RoIDwgMCB8fCBvZmZzZXQgPCAwKSkgfHwgb2Zmc2V0ID4gdGhpcy5sZW5ndGgpIHtcbiAgICB0aHJvdyBuZXcgUmFuZ2VFcnJvcignQXR0ZW1wdCB0byB3cml0ZSBvdXRzaWRlIGJ1ZmZlciBib3VuZHMnKVxuICB9XG5cbiAgaWYgKCFlbmNvZGluZykgZW5jb2RpbmcgPSAndXRmOCc7XG5cbiAgdmFyIGxvd2VyZWRDYXNlID0gZmFsc2U7XG4gIGZvciAoOzspIHtcbiAgICBzd2l0Y2ggKGVuY29kaW5nKSB7XG4gICAgICBjYXNlICdoZXgnOlxuICAgICAgICByZXR1cm4gaGV4V3JpdGUodGhpcywgc3RyaW5nLCBvZmZzZXQsIGxlbmd0aClcblxuICAgICAgY2FzZSAndXRmOCc6XG4gICAgICBjYXNlICd1dGYtOCc6XG4gICAgICAgIHJldHVybiB1dGY4V3JpdGUodGhpcywgc3RyaW5nLCBvZmZzZXQsIGxlbmd0aClcblxuICAgICAgY2FzZSAnYXNjaWknOlxuICAgICAgICByZXR1cm4gYXNjaWlXcml0ZSh0aGlzLCBzdHJpbmcsIG9mZnNldCwgbGVuZ3RoKVxuXG4gICAgICBjYXNlICdsYXRpbjEnOlxuICAgICAgY2FzZSAnYmluYXJ5JzpcbiAgICAgICAgcmV0dXJuIGxhdGluMVdyaXRlKHRoaXMsIHN0cmluZywgb2Zmc2V0LCBsZW5ndGgpXG5cbiAgICAgIGNhc2UgJ2Jhc2U2NCc6XG4gICAgICAgIC8vIFdhcm5pbmc6IG1heExlbmd0aCBub3QgdGFrZW4gaW50byBhY2NvdW50IGluIGJhc2U2NFdyaXRlXG4gICAgICAgIHJldHVybiBiYXNlNjRXcml0ZSh0aGlzLCBzdHJpbmcsIG9mZnNldCwgbGVuZ3RoKVxuXG4gICAgICBjYXNlICd1Y3MyJzpcbiAgICAgIGNhc2UgJ3Vjcy0yJzpcbiAgICAgIGNhc2UgJ3V0ZjE2bGUnOlxuICAgICAgY2FzZSAndXRmLTE2bGUnOlxuICAgICAgICByZXR1cm4gdWNzMldyaXRlKHRoaXMsIHN0cmluZywgb2Zmc2V0LCBsZW5ndGgpXG5cbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIGlmIChsb3dlcmVkQ2FzZSkgdGhyb3cgbmV3IFR5cGVFcnJvcignVW5rbm93biBlbmNvZGluZzogJyArIGVuY29kaW5nKVxuICAgICAgICBlbmNvZGluZyA9ICgnJyArIGVuY29kaW5nKS50b0xvd2VyQ2FzZSgpO1xuICAgICAgICBsb3dlcmVkQ2FzZSA9IHRydWU7XG4gICAgfVxuICB9XG59O1xuXG5CdWZmZXIucHJvdG90eXBlLnRvSlNPTiA9IGZ1bmN0aW9uIHRvSlNPTiAoKSB7XG4gIHJldHVybiB7XG4gICAgdHlwZTogJ0J1ZmZlcicsXG4gICAgZGF0YTogQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwodGhpcy5fYXJyIHx8IHRoaXMsIDApXG4gIH1cbn07XG5cbmZ1bmN0aW9uIGJhc2U2NFNsaWNlIChidWYsIHN0YXJ0LCBlbmQpIHtcbiAgaWYgKHN0YXJ0ID09PSAwICYmIGVuZCA9PT0gYnVmLmxlbmd0aCkge1xuICAgIHJldHVybiBmcm9tQnl0ZUFycmF5KGJ1ZilcbiAgfSBlbHNlIHtcbiAgICByZXR1cm4gZnJvbUJ5dGVBcnJheShidWYuc2xpY2Uoc3RhcnQsIGVuZCkpXG4gIH1cbn1cblxuZnVuY3Rpb24gdXRmOFNsaWNlIChidWYsIHN0YXJ0LCBlbmQpIHtcbiAgZW5kID0gTWF0aC5taW4oYnVmLmxlbmd0aCwgZW5kKTtcbiAgdmFyIHJlcyA9IFtdO1xuXG4gIHZhciBpID0gc3RhcnQ7XG4gIHdoaWxlIChpIDwgZW5kKSB7XG4gICAgdmFyIGZpcnN0Qnl0ZSA9IGJ1ZltpXTtcbiAgICB2YXIgY29kZVBvaW50ID0gbnVsbDtcbiAgICB2YXIgYnl0ZXNQZXJTZXF1ZW5jZSA9IChmaXJzdEJ5dGUgPiAweEVGKSA/IDRcbiAgICAgIDogKGZpcnN0Qnl0ZSA+IDB4REYpID8gM1xuICAgICAgOiAoZmlyc3RCeXRlID4gMHhCRikgPyAyXG4gICAgICA6IDE7XG5cbiAgICBpZiAoaSArIGJ5dGVzUGVyU2VxdWVuY2UgPD0gZW5kKSB7XG4gICAgICB2YXIgc2Vjb25kQnl0ZSwgdGhpcmRCeXRlLCBmb3VydGhCeXRlLCB0ZW1wQ29kZVBvaW50O1xuXG4gICAgICBzd2l0Y2ggKGJ5dGVzUGVyU2VxdWVuY2UpIHtcbiAgICAgICAgY2FzZSAxOlxuICAgICAgICAgIGlmIChmaXJzdEJ5dGUgPCAweDgwKSB7XG4gICAgICAgICAgICBjb2RlUG9pbnQgPSBmaXJzdEJ5dGU7XG4gICAgICAgICAgfVxuICAgICAgICAgIGJyZWFrXG4gICAgICAgIGNhc2UgMjpcbiAgICAgICAgICBzZWNvbmRCeXRlID0gYnVmW2kgKyAxXTtcbiAgICAgICAgICBpZiAoKHNlY29uZEJ5dGUgJiAweEMwKSA9PT0gMHg4MCkge1xuICAgICAgICAgICAgdGVtcENvZGVQb2ludCA9IChmaXJzdEJ5dGUgJiAweDFGKSA8PCAweDYgfCAoc2Vjb25kQnl0ZSAmIDB4M0YpO1xuICAgICAgICAgICAgaWYgKHRlbXBDb2RlUG9pbnQgPiAweDdGKSB7XG4gICAgICAgICAgICAgIGNvZGVQb2ludCA9IHRlbXBDb2RlUG9pbnQ7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICAgIGJyZWFrXG4gICAgICAgIGNhc2UgMzpcbiAgICAgICAgICBzZWNvbmRCeXRlID0gYnVmW2kgKyAxXTtcbiAgICAgICAgICB0aGlyZEJ5dGUgPSBidWZbaSArIDJdO1xuICAgICAgICAgIGlmICgoc2Vjb25kQnl0ZSAmIDB4QzApID09PSAweDgwICYmICh0aGlyZEJ5dGUgJiAweEMwKSA9PT0gMHg4MCkge1xuICAgICAgICAgICAgdGVtcENvZGVQb2ludCA9IChmaXJzdEJ5dGUgJiAweEYpIDw8IDB4QyB8IChzZWNvbmRCeXRlICYgMHgzRikgPDwgMHg2IHwgKHRoaXJkQnl0ZSAmIDB4M0YpO1xuICAgICAgICAgICAgaWYgKHRlbXBDb2RlUG9pbnQgPiAweDdGRiAmJiAodGVtcENvZGVQb2ludCA8IDB4RDgwMCB8fCB0ZW1wQ29kZVBvaW50ID4gMHhERkZGKSkge1xuICAgICAgICAgICAgICBjb2RlUG9pbnQgPSB0ZW1wQ29kZVBvaW50O1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgICBicmVha1xuICAgICAgICBjYXNlIDQ6XG4gICAgICAgICAgc2Vjb25kQnl0ZSA9IGJ1ZltpICsgMV07XG4gICAgICAgICAgdGhpcmRCeXRlID0gYnVmW2kgKyAyXTtcbiAgICAgICAgICBmb3VydGhCeXRlID0gYnVmW2kgKyAzXTtcbiAgICAgICAgICBpZiAoKHNlY29uZEJ5dGUgJiAweEMwKSA9PT0gMHg4MCAmJiAodGhpcmRCeXRlICYgMHhDMCkgPT09IDB4ODAgJiYgKGZvdXJ0aEJ5dGUgJiAweEMwKSA9PT0gMHg4MCkge1xuICAgICAgICAgICAgdGVtcENvZGVQb2ludCA9IChmaXJzdEJ5dGUgJiAweEYpIDw8IDB4MTIgfCAoc2Vjb25kQnl0ZSAmIDB4M0YpIDw8IDB4QyB8ICh0aGlyZEJ5dGUgJiAweDNGKSA8PCAweDYgfCAoZm91cnRoQnl0ZSAmIDB4M0YpO1xuICAgICAgICAgICAgaWYgKHRlbXBDb2RlUG9pbnQgPiAweEZGRkYgJiYgdGVtcENvZGVQb2ludCA8IDB4MTEwMDAwKSB7XG4gICAgICAgICAgICAgIGNvZGVQb2ludCA9IHRlbXBDb2RlUG9pbnQ7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIGlmIChjb2RlUG9pbnQgPT09IG51bGwpIHtcbiAgICAgIC8vIHdlIGRpZCBub3QgZ2VuZXJhdGUgYSB2YWxpZCBjb2RlUG9pbnQgc28gaW5zZXJ0IGFcbiAgICAgIC8vIHJlcGxhY2VtZW50IGNoYXIgKFUrRkZGRCkgYW5kIGFkdmFuY2Ugb25seSAxIGJ5dGVcbiAgICAgIGNvZGVQb2ludCA9IDB4RkZGRDtcbiAgICAgIGJ5dGVzUGVyU2VxdWVuY2UgPSAxO1xuICAgIH0gZWxzZSBpZiAoY29kZVBvaW50ID4gMHhGRkZGKSB7XG4gICAgICAvLyBlbmNvZGUgdG8gdXRmMTYgKHN1cnJvZ2F0ZSBwYWlyIGRhbmNlKVxuICAgICAgY29kZVBvaW50IC09IDB4MTAwMDA7XG4gICAgICByZXMucHVzaChjb2RlUG9pbnQgPj4+IDEwICYgMHgzRkYgfCAweEQ4MDApO1xuICAgICAgY29kZVBvaW50ID0gMHhEQzAwIHwgY29kZVBvaW50ICYgMHgzRkY7XG4gICAgfVxuXG4gICAgcmVzLnB1c2goY29kZVBvaW50KTtcbiAgICBpICs9IGJ5dGVzUGVyU2VxdWVuY2U7XG4gIH1cblxuICByZXR1cm4gZGVjb2RlQ29kZVBvaW50c0FycmF5KHJlcylcbn1cblxuLy8gQmFzZWQgb24gaHR0cDovL3N0YWNrb3ZlcmZsb3cuY29tL2EvMjI3NDcyNzIvNjgwNzQyLCB0aGUgYnJvd3NlciB3aXRoXG4vLyB0aGUgbG93ZXN0IGxpbWl0IGlzIENocm9tZSwgd2l0aCAweDEwMDAwIGFyZ3MuXG4vLyBXZSBnbyAxIG1hZ25pdHVkZSBsZXNzLCBmb3Igc2FmZXR5XG52YXIgTUFYX0FSR1VNRU5UU19MRU5HVEggPSAweDEwMDA7XG5cbmZ1bmN0aW9uIGRlY29kZUNvZGVQb2ludHNBcnJheSAoY29kZVBvaW50cykge1xuICB2YXIgbGVuID0gY29kZVBvaW50cy5sZW5ndGg7XG4gIGlmIChsZW4gPD0gTUFYX0FSR1VNRU5UU19MRU5HVEgpIHtcbiAgICByZXR1cm4gU3RyaW5nLmZyb21DaGFyQ29kZS5hcHBseShTdHJpbmcsIGNvZGVQb2ludHMpIC8vIGF2b2lkIGV4dHJhIHNsaWNlKClcbiAgfVxuXG4gIC8vIERlY29kZSBpbiBjaHVua3MgdG8gYXZvaWQgXCJjYWxsIHN0YWNrIHNpemUgZXhjZWVkZWRcIi5cbiAgdmFyIHJlcyA9ICcnO1xuICB2YXIgaSA9IDA7XG4gIHdoaWxlIChpIDwgbGVuKSB7XG4gICAgcmVzICs9IFN0cmluZy5mcm9tQ2hhckNvZGUuYXBwbHkoXG4gICAgICBTdHJpbmcsXG4gICAgICBjb2RlUG9pbnRzLnNsaWNlKGksIGkgKz0gTUFYX0FSR1VNRU5UU19MRU5HVEgpXG4gICAgKTtcbiAgfVxuICByZXR1cm4gcmVzXG59XG5cbmZ1bmN0aW9uIGFzY2lpU2xpY2UgKGJ1Ziwgc3RhcnQsIGVuZCkge1xuICB2YXIgcmV0ID0gJyc7XG4gIGVuZCA9IE1hdGgubWluKGJ1Zi5sZW5ndGgsIGVuZCk7XG5cbiAgZm9yICh2YXIgaSA9IHN0YXJ0OyBpIDwgZW5kOyArK2kpIHtcbiAgICByZXQgKz0gU3RyaW5nLmZyb21DaGFyQ29kZShidWZbaV0gJiAweDdGKTtcbiAgfVxuICByZXR1cm4gcmV0XG59XG5cbmZ1bmN0aW9uIGxhdGluMVNsaWNlIChidWYsIHN0YXJ0LCBlbmQpIHtcbiAgdmFyIHJldCA9ICcnO1xuICBlbmQgPSBNYXRoLm1pbihidWYubGVuZ3RoLCBlbmQpO1xuXG4gIGZvciAodmFyIGkgPSBzdGFydDsgaSA8IGVuZDsgKytpKSB7XG4gICAgcmV0ICs9IFN0cmluZy5mcm9tQ2hhckNvZGUoYnVmW2ldKTtcbiAgfVxuICByZXR1cm4gcmV0XG59XG5cbmZ1bmN0aW9uIGhleFNsaWNlIChidWYsIHN0YXJ0LCBlbmQpIHtcbiAgdmFyIGxlbiA9IGJ1Zi5sZW5ndGg7XG5cbiAgaWYgKCFzdGFydCB8fCBzdGFydCA8IDApIHN0YXJ0ID0gMDtcbiAgaWYgKCFlbmQgfHwgZW5kIDwgMCB8fCBlbmQgPiBsZW4pIGVuZCA9IGxlbjtcblxuICB2YXIgb3V0ID0gJyc7XG4gIGZvciAodmFyIGkgPSBzdGFydDsgaSA8IGVuZDsgKytpKSB7XG4gICAgb3V0ICs9IHRvSGV4KGJ1ZltpXSk7XG4gIH1cbiAgcmV0dXJuIG91dFxufVxuXG5mdW5jdGlvbiB1dGYxNmxlU2xpY2UgKGJ1Ziwgc3RhcnQsIGVuZCkge1xuICB2YXIgYnl0ZXMgPSBidWYuc2xpY2Uoc3RhcnQsIGVuZCk7XG4gIHZhciByZXMgPSAnJztcbiAgZm9yICh2YXIgaSA9IDA7IGkgPCBieXRlcy5sZW5ndGg7IGkgKz0gMikge1xuICAgIHJlcyArPSBTdHJpbmcuZnJvbUNoYXJDb2RlKGJ5dGVzW2ldICsgYnl0ZXNbaSArIDFdICogMjU2KTtcbiAgfVxuICByZXR1cm4gcmVzXG59XG5cbkJ1ZmZlci5wcm90b3R5cGUuc2xpY2UgPSBmdW5jdGlvbiBzbGljZSAoc3RhcnQsIGVuZCkge1xuICB2YXIgbGVuID0gdGhpcy5sZW5ndGg7XG4gIHN0YXJ0ID0gfn5zdGFydDtcbiAgZW5kID0gZW5kID09PSB1bmRlZmluZWQgPyBsZW4gOiB+fmVuZDtcblxuICBpZiAoc3RhcnQgPCAwKSB7XG4gICAgc3RhcnQgKz0gbGVuO1xuICAgIGlmIChzdGFydCA8IDApIHN0YXJ0ID0gMDtcbiAgfSBlbHNlIGlmIChzdGFydCA+IGxlbikge1xuICAgIHN0YXJ0ID0gbGVuO1xuICB9XG5cbiAgaWYgKGVuZCA8IDApIHtcbiAgICBlbmQgKz0gbGVuO1xuICAgIGlmIChlbmQgPCAwKSBlbmQgPSAwO1xuICB9IGVsc2UgaWYgKGVuZCA+IGxlbikge1xuICAgIGVuZCA9IGxlbjtcbiAgfVxuXG4gIGlmIChlbmQgPCBzdGFydCkgZW5kID0gc3RhcnQ7XG5cbiAgdmFyIG5ld0J1ZjtcbiAgaWYgKEJ1ZmZlci5UWVBFRF9BUlJBWV9TVVBQT1JUKSB7XG4gICAgbmV3QnVmID0gdGhpcy5zdWJhcnJheShzdGFydCwgZW5kKTtcbiAgICBuZXdCdWYuX19wcm90b19fID0gQnVmZmVyLnByb3RvdHlwZTtcbiAgfSBlbHNlIHtcbiAgICB2YXIgc2xpY2VMZW4gPSBlbmQgLSBzdGFydDtcbiAgICBuZXdCdWYgPSBuZXcgQnVmZmVyKHNsaWNlTGVuLCB1bmRlZmluZWQpO1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgc2xpY2VMZW47ICsraSkge1xuICAgICAgbmV3QnVmW2ldID0gdGhpc1tpICsgc3RhcnRdO1xuICAgIH1cbiAgfVxuXG4gIHJldHVybiBuZXdCdWZcbn07XG5cbi8qXG4gKiBOZWVkIHRvIG1ha2Ugc3VyZSB0aGF0IGJ1ZmZlciBpc24ndCB0cnlpbmcgdG8gd3JpdGUgb3V0IG9mIGJvdW5kcy5cbiAqL1xuZnVuY3Rpb24gY2hlY2tPZmZzZXQgKG9mZnNldCwgZXh0LCBsZW5ndGgpIHtcbiAgaWYgKChvZmZzZXQgJSAxKSAhPT0gMCB8fCBvZmZzZXQgPCAwKSB0aHJvdyBuZXcgUmFuZ2VFcnJvcignb2Zmc2V0IGlzIG5vdCB1aW50JylcbiAgaWYgKG9mZnNldCArIGV4dCA+IGxlbmd0aCkgdGhyb3cgbmV3IFJhbmdlRXJyb3IoJ1RyeWluZyB0byBhY2Nlc3MgYmV5b25kIGJ1ZmZlciBsZW5ndGgnKVxufVxuXG5CdWZmZXIucHJvdG90eXBlLnJlYWRVSW50TEUgPSBmdW5jdGlvbiByZWFkVUludExFIChvZmZzZXQsIGJ5dGVMZW5ndGgsIG5vQXNzZXJ0KSB7XG4gIG9mZnNldCA9IG9mZnNldCB8IDA7XG4gIGJ5dGVMZW5ndGggPSBieXRlTGVuZ3RoIHwgMDtcbiAgaWYgKCFub0Fzc2VydCkgY2hlY2tPZmZzZXQob2Zmc2V0LCBieXRlTGVuZ3RoLCB0aGlzLmxlbmd0aCk7XG5cbiAgdmFyIHZhbCA9IHRoaXNbb2Zmc2V0XTtcbiAgdmFyIG11bCA9IDE7XG4gIHZhciBpID0gMDtcbiAgd2hpbGUgKCsraSA8IGJ5dGVMZW5ndGggJiYgKG11bCAqPSAweDEwMCkpIHtcbiAgICB2YWwgKz0gdGhpc1tvZmZzZXQgKyBpXSAqIG11bDtcbiAgfVxuXG4gIHJldHVybiB2YWxcbn07XG5cbkJ1ZmZlci5wcm90b3R5cGUucmVhZFVJbnRCRSA9IGZ1bmN0aW9uIHJlYWRVSW50QkUgKG9mZnNldCwgYnl0ZUxlbmd0aCwgbm9Bc3NlcnQpIHtcbiAgb2Zmc2V0ID0gb2Zmc2V0IHwgMDtcbiAgYnl0ZUxlbmd0aCA9IGJ5dGVMZW5ndGggfCAwO1xuICBpZiAoIW5vQXNzZXJ0KSB7XG4gICAgY2hlY2tPZmZzZXQob2Zmc2V0LCBieXRlTGVuZ3RoLCB0aGlzLmxlbmd0aCk7XG4gIH1cblxuICB2YXIgdmFsID0gdGhpc1tvZmZzZXQgKyAtLWJ5dGVMZW5ndGhdO1xuICB2YXIgbXVsID0gMTtcbiAgd2hpbGUgKGJ5dGVMZW5ndGggPiAwICYmIChtdWwgKj0gMHgxMDApKSB7XG4gICAgdmFsICs9IHRoaXNbb2Zmc2V0ICsgLS1ieXRlTGVuZ3RoXSAqIG11bDtcbiAgfVxuXG4gIHJldHVybiB2YWxcbn07XG5cbkJ1ZmZlci5wcm90b3R5cGUucmVhZFVJbnQ4ID0gZnVuY3Rpb24gcmVhZFVJbnQ4IChvZmZzZXQsIG5vQXNzZXJ0KSB7XG4gIGlmICghbm9Bc3NlcnQpIGNoZWNrT2Zmc2V0KG9mZnNldCwgMSwgdGhpcy5sZW5ndGgpO1xuICByZXR1cm4gdGhpc1tvZmZzZXRdXG59O1xuXG5CdWZmZXIucHJvdG90eXBlLnJlYWRVSW50MTZMRSA9IGZ1bmN0aW9uIHJlYWRVSW50MTZMRSAob2Zmc2V0LCBub0Fzc2VydCkge1xuICBpZiAoIW5vQXNzZXJ0KSBjaGVja09mZnNldChvZmZzZXQsIDIsIHRoaXMubGVuZ3RoKTtcbiAgcmV0dXJuIHRoaXNbb2Zmc2V0XSB8ICh0aGlzW29mZnNldCArIDFdIDw8IDgpXG59O1xuXG5CdWZmZXIucHJvdG90eXBlLnJlYWRVSW50MTZCRSA9IGZ1bmN0aW9uIHJlYWRVSW50MTZCRSAob2Zmc2V0LCBub0Fzc2VydCkge1xuICBpZiAoIW5vQXNzZXJ0KSBjaGVja09mZnNldChvZmZzZXQsIDIsIHRoaXMubGVuZ3RoKTtcbiAgcmV0dXJuICh0aGlzW29mZnNldF0gPDwgOCkgfCB0aGlzW29mZnNldCArIDFdXG59O1xuXG5CdWZmZXIucHJvdG90eXBlLnJlYWRVSW50MzJMRSA9IGZ1bmN0aW9uIHJlYWRVSW50MzJMRSAob2Zmc2V0LCBub0Fzc2VydCkge1xuICBpZiAoIW5vQXNzZXJ0KSBjaGVja09mZnNldChvZmZzZXQsIDQsIHRoaXMubGVuZ3RoKTtcblxuICByZXR1cm4gKCh0aGlzW29mZnNldF0pIHxcbiAgICAgICh0aGlzW29mZnNldCArIDFdIDw8IDgpIHxcbiAgICAgICh0aGlzW29mZnNldCArIDJdIDw8IDE2KSkgK1xuICAgICAgKHRoaXNbb2Zmc2V0ICsgM10gKiAweDEwMDAwMDApXG59O1xuXG5CdWZmZXIucHJvdG90eXBlLnJlYWRVSW50MzJCRSA9IGZ1bmN0aW9uIHJlYWRVSW50MzJCRSAob2Zmc2V0LCBub0Fzc2VydCkge1xuICBpZiAoIW5vQXNzZXJ0KSBjaGVja09mZnNldChvZmZzZXQsIDQsIHRoaXMubGVuZ3RoKTtcblxuICByZXR1cm4gKHRoaXNbb2Zmc2V0XSAqIDB4MTAwMDAwMCkgK1xuICAgICgodGhpc1tvZmZzZXQgKyAxXSA8PCAxNikgfFxuICAgICh0aGlzW29mZnNldCArIDJdIDw8IDgpIHxcbiAgICB0aGlzW29mZnNldCArIDNdKVxufTtcblxuQnVmZmVyLnByb3RvdHlwZS5yZWFkSW50TEUgPSBmdW5jdGlvbiByZWFkSW50TEUgKG9mZnNldCwgYnl0ZUxlbmd0aCwgbm9Bc3NlcnQpIHtcbiAgb2Zmc2V0ID0gb2Zmc2V0IHwgMDtcbiAgYnl0ZUxlbmd0aCA9IGJ5dGVMZW5ndGggfCAwO1xuICBpZiAoIW5vQXNzZXJ0KSBjaGVja09mZnNldChvZmZzZXQsIGJ5dGVMZW5ndGgsIHRoaXMubGVuZ3RoKTtcblxuICB2YXIgdmFsID0gdGhpc1tvZmZzZXRdO1xuICB2YXIgbXVsID0gMTtcbiAgdmFyIGkgPSAwO1xuICB3aGlsZSAoKytpIDwgYnl0ZUxlbmd0aCAmJiAobXVsICo9IDB4MTAwKSkge1xuICAgIHZhbCArPSB0aGlzW29mZnNldCArIGldICogbXVsO1xuICB9XG4gIG11bCAqPSAweDgwO1xuXG4gIGlmICh2YWwgPj0gbXVsKSB2YWwgLT0gTWF0aC5wb3coMiwgOCAqIGJ5dGVMZW5ndGgpO1xuXG4gIHJldHVybiB2YWxcbn07XG5cbkJ1ZmZlci5wcm90b3R5cGUucmVhZEludEJFID0gZnVuY3Rpb24gcmVhZEludEJFIChvZmZzZXQsIGJ5dGVMZW5ndGgsIG5vQXNzZXJ0KSB7XG4gIG9mZnNldCA9IG9mZnNldCB8IDA7XG4gIGJ5dGVMZW5ndGggPSBieXRlTGVuZ3RoIHwgMDtcbiAgaWYgKCFub0Fzc2VydCkgY2hlY2tPZmZzZXQob2Zmc2V0LCBieXRlTGVuZ3RoLCB0aGlzLmxlbmd0aCk7XG5cbiAgdmFyIGkgPSBieXRlTGVuZ3RoO1xuICB2YXIgbXVsID0gMTtcbiAgdmFyIHZhbCA9IHRoaXNbb2Zmc2V0ICsgLS1pXTtcbiAgd2hpbGUgKGkgPiAwICYmIChtdWwgKj0gMHgxMDApKSB7XG4gICAgdmFsICs9IHRoaXNbb2Zmc2V0ICsgLS1pXSAqIG11bDtcbiAgfVxuICBtdWwgKj0gMHg4MDtcblxuICBpZiAodmFsID49IG11bCkgdmFsIC09IE1hdGgucG93KDIsIDggKiBieXRlTGVuZ3RoKTtcblxuICByZXR1cm4gdmFsXG59O1xuXG5CdWZmZXIucHJvdG90eXBlLnJlYWRJbnQ4ID0gZnVuY3Rpb24gcmVhZEludDggKG9mZnNldCwgbm9Bc3NlcnQpIHtcbiAgaWYgKCFub0Fzc2VydCkgY2hlY2tPZmZzZXQob2Zmc2V0LCAxLCB0aGlzLmxlbmd0aCk7XG4gIGlmICghKHRoaXNbb2Zmc2V0XSAmIDB4ODApKSByZXR1cm4gKHRoaXNbb2Zmc2V0XSlcbiAgcmV0dXJuICgoMHhmZiAtIHRoaXNbb2Zmc2V0XSArIDEpICogLTEpXG59O1xuXG5CdWZmZXIucHJvdG90eXBlLnJlYWRJbnQxNkxFID0gZnVuY3Rpb24gcmVhZEludDE2TEUgKG9mZnNldCwgbm9Bc3NlcnQpIHtcbiAgaWYgKCFub0Fzc2VydCkgY2hlY2tPZmZzZXQob2Zmc2V0LCAyLCB0aGlzLmxlbmd0aCk7XG4gIHZhciB2YWwgPSB0aGlzW29mZnNldF0gfCAodGhpc1tvZmZzZXQgKyAxXSA8PCA4KTtcbiAgcmV0dXJuICh2YWwgJiAweDgwMDApID8gdmFsIHwgMHhGRkZGMDAwMCA6IHZhbFxufTtcblxuQnVmZmVyLnByb3RvdHlwZS5yZWFkSW50MTZCRSA9IGZ1bmN0aW9uIHJlYWRJbnQxNkJFIChvZmZzZXQsIG5vQXNzZXJ0KSB7XG4gIGlmICghbm9Bc3NlcnQpIGNoZWNrT2Zmc2V0KG9mZnNldCwgMiwgdGhpcy5sZW5ndGgpO1xuICB2YXIgdmFsID0gdGhpc1tvZmZzZXQgKyAxXSB8ICh0aGlzW29mZnNldF0gPDwgOCk7XG4gIHJldHVybiAodmFsICYgMHg4MDAwKSA/IHZhbCB8IDB4RkZGRjAwMDAgOiB2YWxcbn07XG5cbkJ1ZmZlci5wcm90b3R5cGUucmVhZEludDMyTEUgPSBmdW5jdGlvbiByZWFkSW50MzJMRSAob2Zmc2V0LCBub0Fzc2VydCkge1xuICBpZiAoIW5vQXNzZXJ0KSBjaGVja09mZnNldChvZmZzZXQsIDQsIHRoaXMubGVuZ3RoKTtcblxuICByZXR1cm4gKHRoaXNbb2Zmc2V0XSkgfFxuICAgICh0aGlzW29mZnNldCArIDFdIDw8IDgpIHxcbiAgICAodGhpc1tvZmZzZXQgKyAyXSA8PCAxNikgfFxuICAgICh0aGlzW29mZnNldCArIDNdIDw8IDI0KVxufTtcblxuQnVmZmVyLnByb3RvdHlwZS5yZWFkSW50MzJCRSA9IGZ1bmN0aW9uIHJlYWRJbnQzMkJFIChvZmZzZXQsIG5vQXNzZXJ0KSB7XG4gIGlmICghbm9Bc3NlcnQpIGNoZWNrT2Zmc2V0KG9mZnNldCwgNCwgdGhpcy5sZW5ndGgpO1xuXG4gIHJldHVybiAodGhpc1tvZmZzZXRdIDw8IDI0KSB8XG4gICAgKHRoaXNbb2Zmc2V0ICsgMV0gPDwgMTYpIHxcbiAgICAodGhpc1tvZmZzZXQgKyAyXSA8PCA4KSB8XG4gICAgKHRoaXNbb2Zmc2V0ICsgM10pXG59O1xuXG5CdWZmZXIucHJvdG90eXBlLnJlYWRGbG9hdExFID0gZnVuY3Rpb24gcmVhZEZsb2F0TEUgKG9mZnNldCwgbm9Bc3NlcnQpIHtcbiAgaWYgKCFub0Fzc2VydCkgY2hlY2tPZmZzZXQob2Zmc2V0LCA0LCB0aGlzLmxlbmd0aCk7XG4gIHJldHVybiByZWFkKHRoaXMsIG9mZnNldCwgdHJ1ZSwgMjMsIDQpXG59O1xuXG5CdWZmZXIucHJvdG90eXBlLnJlYWRGbG9hdEJFID0gZnVuY3Rpb24gcmVhZEZsb2F0QkUgKG9mZnNldCwgbm9Bc3NlcnQpIHtcbiAgaWYgKCFub0Fzc2VydCkgY2hlY2tPZmZzZXQob2Zmc2V0LCA0LCB0aGlzLmxlbmd0aCk7XG4gIHJldHVybiByZWFkKHRoaXMsIG9mZnNldCwgZmFsc2UsIDIzLCA0KVxufTtcblxuQnVmZmVyLnByb3RvdHlwZS5yZWFkRG91YmxlTEUgPSBmdW5jdGlvbiByZWFkRG91YmxlTEUgKG9mZnNldCwgbm9Bc3NlcnQpIHtcbiAgaWYgKCFub0Fzc2VydCkgY2hlY2tPZmZzZXQob2Zmc2V0LCA4LCB0aGlzLmxlbmd0aCk7XG4gIHJldHVybiByZWFkKHRoaXMsIG9mZnNldCwgdHJ1ZSwgNTIsIDgpXG59O1xuXG5CdWZmZXIucHJvdG90eXBlLnJlYWREb3VibGVCRSA9IGZ1bmN0aW9uIHJlYWREb3VibGVCRSAob2Zmc2V0LCBub0Fzc2VydCkge1xuICBpZiAoIW5vQXNzZXJ0KSBjaGVja09mZnNldChvZmZzZXQsIDgsIHRoaXMubGVuZ3RoKTtcbiAgcmV0dXJuIHJlYWQodGhpcywgb2Zmc2V0LCBmYWxzZSwgNTIsIDgpXG59O1xuXG5mdW5jdGlvbiBjaGVja0ludCAoYnVmLCB2YWx1ZSwgb2Zmc2V0LCBleHQsIG1heCwgbWluKSB7XG4gIGlmICghaW50ZXJuYWxJc0J1ZmZlcihidWYpKSB0aHJvdyBuZXcgVHlwZUVycm9yKCdcImJ1ZmZlclwiIGFyZ3VtZW50IG11c3QgYmUgYSBCdWZmZXIgaW5zdGFuY2UnKVxuICBpZiAodmFsdWUgPiBtYXggfHwgdmFsdWUgPCBtaW4pIHRocm93IG5ldyBSYW5nZUVycm9yKCdcInZhbHVlXCIgYXJndW1lbnQgaXMgb3V0IG9mIGJvdW5kcycpXG4gIGlmIChvZmZzZXQgKyBleHQgPiBidWYubGVuZ3RoKSB0aHJvdyBuZXcgUmFuZ2VFcnJvcignSW5kZXggb3V0IG9mIHJhbmdlJylcbn1cblxuQnVmZmVyLnByb3RvdHlwZS53cml0ZVVJbnRMRSA9IGZ1bmN0aW9uIHdyaXRlVUludExFICh2YWx1ZSwgb2Zmc2V0LCBieXRlTGVuZ3RoLCBub0Fzc2VydCkge1xuICB2YWx1ZSA9ICt2YWx1ZTtcbiAgb2Zmc2V0ID0gb2Zmc2V0IHwgMDtcbiAgYnl0ZUxlbmd0aCA9IGJ5dGVMZW5ndGggfCAwO1xuICBpZiAoIW5vQXNzZXJ0KSB7XG4gICAgdmFyIG1heEJ5dGVzID0gTWF0aC5wb3coMiwgOCAqIGJ5dGVMZW5ndGgpIC0gMTtcbiAgICBjaGVja0ludCh0aGlzLCB2YWx1ZSwgb2Zmc2V0LCBieXRlTGVuZ3RoLCBtYXhCeXRlcywgMCk7XG4gIH1cblxuICB2YXIgbXVsID0gMTtcbiAgdmFyIGkgPSAwO1xuICB0aGlzW29mZnNldF0gPSB2YWx1ZSAmIDB4RkY7XG4gIHdoaWxlICgrK2kgPCBieXRlTGVuZ3RoICYmIChtdWwgKj0gMHgxMDApKSB7XG4gICAgdGhpc1tvZmZzZXQgKyBpXSA9ICh2YWx1ZSAvIG11bCkgJiAweEZGO1xuICB9XG5cbiAgcmV0dXJuIG9mZnNldCArIGJ5dGVMZW5ndGhcbn07XG5cbkJ1ZmZlci5wcm90b3R5cGUud3JpdGVVSW50QkUgPSBmdW5jdGlvbiB3cml0ZVVJbnRCRSAodmFsdWUsIG9mZnNldCwgYnl0ZUxlbmd0aCwgbm9Bc3NlcnQpIHtcbiAgdmFsdWUgPSArdmFsdWU7XG4gIG9mZnNldCA9IG9mZnNldCB8IDA7XG4gIGJ5dGVMZW5ndGggPSBieXRlTGVuZ3RoIHwgMDtcbiAgaWYgKCFub0Fzc2VydCkge1xuICAgIHZhciBtYXhCeXRlcyA9IE1hdGgucG93KDIsIDggKiBieXRlTGVuZ3RoKSAtIDE7XG4gICAgY2hlY2tJbnQodGhpcywgdmFsdWUsIG9mZnNldCwgYnl0ZUxlbmd0aCwgbWF4Qnl0ZXMsIDApO1xuICB9XG5cbiAgdmFyIGkgPSBieXRlTGVuZ3RoIC0gMTtcbiAgdmFyIG11bCA9IDE7XG4gIHRoaXNbb2Zmc2V0ICsgaV0gPSB2YWx1ZSAmIDB4RkY7XG4gIHdoaWxlICgtLWkgPj0gMCAmJiAobXVsICo9IDB4MTAwKSkge1xuICAgIHRoaXNbb2Zmc2V0ICsgaV0gPSAodmFsdWUgLyBtdWwpICYgMHhGRjtcbiAgfVxuXG4gIHJldHVybiBvZmZzZXQgKyBieXRlTGVuZ3RoXG59O1xuXG5CdWZmZXIucHJvdG90eXBlLndyaXRlVUludDggPSBmdW5jdGlvbiB3cml0ZVVJbnQ4ICh2YWx1ZSwgb2Zmc2V0LCBub0Fzc2VydCkge1xuICB2YWx1ZSA9ICt2YWx1ZTtcbiAgb2Zmc2V0ID0gb2Zmc2V0IHwgMDtcbiAgaWYgKCFub0Fzc2VydCkgY2hlY2tJbnQodGhpcywgdmFsdWUsIG9mZnNldCwgMSwgMHhmZiwgMCk7XG4gIGlmICghQnVmZmVyLlRZUEVEX0FSUkFZX1NVUFBPUlQpIHZhbHVlID0gTWF0aC5mbG9vcih2YWx1ZSk7XG4gIHRoaXNbb2Zmc2V0XSA9ICh2YWx1ZSAmIDB4ZmYpO1xuICByZXR1cm4gb2Zmc2V0ICsgMVxufTtcblxuZnVuY3Rpb24gb2JqZWN0V3JpdGVVSW50MTYgKGJ1ZiwgdmFsdWUsIG9mZnNldCwgbGl0dGxlRW5kaWFuKSB7XG4gIGlmICh2YWx1ZSA8IDApIHZhbHVlID0gMHhmZmZmICsgdmFsdWUgKyAxO1xuICBmb3IgKHZhciBpID0gMCwgaiA9IE1hdGgubWluKGJ1Zi5sZW5ndGggLSBvZmZzZXQsIDIpOyBpIDwgajsgKytpKSB7XG4gICAgYnVmW29mZnNldCArIGldID0gKHZhbHVlICYgKDB4ZmYgPDwgKDggKiAobGl0dGxlRW5kaWFuID8gaSA6IDEgLSBpKSkpKSA+Pj5cbiAgICAgIChsaXR0bGVFbmRpYW4gPyBpIDogMSAtIGkpICogODtcbiAgfVxufVxuXG5CdWZmZXIucHJvdG90eXBlLndyaXRlVUludDE2TEUgPSBmdW5jdGlvbiB3cml0ZVVJbnQxNkxFICh2YWx1ZSwgb2Zmc2V0LCBub0Fzc2VydCkge1xuICB2YWx1ZSA9ICt2YWx1ZTtcbiAgb2Zmc2V0ID0gb2Zmc2V0IHwgMDtcbiAgaWYgKCFub0Fzc2VydCkgY2hlY2tJbnQodGhpcywgdmFsdWUsIG9mZnNldCwgMiwgMHhmZmZmLCAwKTtcbiAgaWYgKEJ1ZmZlci5UWVBFRF9BUlJBWV9TVVBQT1JUKSB7XG4gICAgdGhpc1tvZmZzZXRdID0gKHZhbHVlICYgMHhmZik7XG4gICAgdGhpc1tvZmZzZXQgKyAxXSA9ICh2YWx1ZSA+Pj4gOCk7XG4gIH0gZWxzZSB7XG4gICAgb2JqZWN0V3JpdGVVSW50MTYodGhpcywgdmFsdWUsIG9mZnNldCwgdHJ1ZSk7XG4gIH1cbiAgcmV0dXJuIG9mZnNldCArIDJcbn07XG5cbkJ1ZmZlci5wcm90b3R5cGUud3JpdGVVSW50MTZCRSA9IGZ1bmN0aW9uIHdyaXRlVUludDE2QkUgKHZhbHVlLCBvZmZzZXQsIG5vQXNzZXJ0KSB7XG4gIHZhbHVlID0gK3ZhbHVlO1xuICBvZmZzZXQgPSBvZmZzZXQgfCAwO1xuICBpZiAoIW5vQXNzZXJ0KSBjaGVja0ludCh0aGlzLCB2YWx1ZSwgb2Zmc2V0LCAyLCAweGZmZmYsIDApO1xuICBpZiAoQnVmZmVyLlRZUEVEX0FSUkFZX1NVUFBPUlQpIHtcbiAgICB0aGlzW29mZnNldF0gPSAodmFsdWUgPj4+IDgpO1xuICAgIHRoaXNbb2Zmc2V0ICsgMV0gPSAodmFsdWUgJiAweGZmKTtcbiAgfSBlbHNlIHtcbiAgICBvYmplY3RXcml0ZVVJbnQxNih0aGlzLCB2YWx1ZSwgb2Zmc2V0LCBmYWxzZSk7XG4gIH1cbiAgcmV0dXJuIG9mZnNldCArIDJcbn07XG5cbmZ1bmN0aW9uIG9iamVjdFdyaXRlVUludDMyIChidWYsIHZhbHVlLCBvZmZzZXQsIGxpdHRsZUVuZGlhbikge1xuICBpZiAodmFsdWUgPCAwKSB2YWx1ZSA9IDB4ZmZmZmZmZmYgKyB2YWx1ZSArIDE7XG4gIGZvciAodmFyIGkgPSAwLCBqID0gTWF0aC5taW4oYnVmLmxlbmd0aCAtIG9mZnNldCwgNCk7IGkgPCBqOyArK2kpIHtcbiAgICBidWZbb2Zmc2V0ICsgaV0gPSAodmFsdWUgPj4+IChsaXR0bGVFbmRpYW4gPyBpIDogMyAtIGkpICogOCkgJiAweGZmO1xuICB9XG59XG5cbkJ1ZmZlci5wcm90b3R5cGUud3JpdGVVSW50MzJMRSA9IGZ1bmN0aW9uIHdyaXRlVUludDMyTEUgKHZhbHVlLCBvZmZzZXQsIG5vQXNzZXJ0KSB7XG4gIHZhbHVlID0gK3ZhbHVlO1xuICBvZmZzZXQgPSBvZmZzZXQgfCAwO1xuICBpZiAoIW5vQXNzZXJ0KSBjaGVja0ludCh0aGlzLCB2YWx1ZSwgb2Zmc2V0LCA0LCAweGZmZmZmZmZmLCAwKTtcbiAgaWYgKEJ1ZmZlci5UWVBFRF9BUlJBWV9TVVBQT1JUKSB7XG4gICAgdGhpc1tvZmZzZXQgKyAzXSA9ICh2YWx1ZSA+Pj4gMjQpO1xuICAgIHRoaXNbb2Zmc2V0ICsgMl0gPSAodmFsdWUgPj4+IDE2KTtcbiAgICB0aGlzW29mZnNldCArIDFdID0gKHZhbHVlID4+PiA4KTtcbiAgICB0aGlzW29mZnNldF0gPSAodmFsdWUgJiAweGZmKTtcbiAgfSBlbHNlIHtcbiAgICBvYmplY3RXcml0ZVVJbnQzMih0aGlzLCB2YWx1ZSwgb2Zmc2V0LCB0cnVlKTtcbiAgfVxuICByZXR1cm4gb2Zmc2V0ICsgNFxufTtcblxuQnVmZmVyLnByb3RvdHlwZS53cml0ZVVJbnQzMkJFID0gZnVuY3Rpb24gd3JpdGVVSW50MzJCRSAodmFsdWUsIG9mZnNldCwgbm9Bc3NlcnQpIHtcbiAgdmFsdWUgPSArdmFsdWU7XG4gIG9mZnNldCA9IG9mZnNldCB8IDA7XG4gIGlmICghbm9Bc3NlcnQpIGNoZWNrSW50KHRoaXMsIHZhbHVlLCBvZmZzZXQsIDQsIDB4ZmZmZmZmZmYsIDApO1xuICBpZiAoQnVmZmVyLlRZUEVEX0FSUkFZX1NVUFBPUlQpIHtcbiAgICB0aGlzW29mZnNldF0gPSAodmFsdWUgPj4+IDI0KTtcbiAgICB0aGlzW29mZnNldCArIDFdID0gKHZhbHVlID4+PiAxNik7XG4gICAgdGhpc1tvZmZzZXQgKyAyXSA9ICh2YWx1ZSA+Pj4gOCk7XG4gICAgdGhpc1tvZmZzZXQgKyAzXSA9ICh2YWx1ZSAmIDB4ZmYpO1xuICB9IGVsc2Uge1xuICAgIG9iamVjdFdyaXRlVUludDMyKHRoaXMsIHZhbHVlLCBvZmZzZXQsIGZhbHNlKTtcbiAgfVxuICByZXR1cm4gb2Zmc2V0ICsgNFxufTtcblxuQnVmZmVyLnByb3RvdHlwZS53cml0ZUludExFID0gZnVuY3Rpb24gd3JpdGVJbnRMRSAodmFsdWUsIG9mZnNldCwgYnl0ZUxlbmd0aCwgbm9Bc3NlcnQpIHtcbiAgdmFsdWUgPSArdmFsdWU7XG4gIG9mZnNldCA9IG9mZnNldCB8IDA7XG4gIGlmICghbm9Bc3NlcnQpIHtcbiAgICB2YXIgbGltaXQgPSBNYXRoLnBvdygyLCA4ICogYnl0ZUxlbmd0aCAtIDEpO1xuXG4gICAgY2hlY2tJbnQodGhpcywgdmFsdWUsIG9mZnNldCwgYnl0ZUxlbmd0aCwgbGltaXQgLSAxLCAtbGltaXQpO1xuICB9XG5cbiAgdmFyIGkgPSAwO1xuICB2YXIgbXVsID0gMTtcbiAgdmFyIHN1YiA9IDA7XG4gIHRoaXNbb2Zmc2V0XSA9IHZhbHVlICYgMHhGRjtcbiAgd2hpbGUgKCsraSA8IGJ5dGVMZW5ndGggJiYgKG11bCAqPSAweDEwMCkpIHtcbiAgICBpZiAodmFsdWUgPCAwICYmIHN1YiA9PT0gMCAmJiB0aGlzW29mZnNldCArIGkgLSAxXSAhPT0gMCkge1xuICAgICAgc3ViID0gMTtcbiAgICB9XG4gICAgdGhpc1tvZmZzZXQgKyBpXSA9ICgodmFsdWUgLyBtdWwpID4+IDApIC0gc3ViICYgMHhGRjtcbiAgfVxuXG4gIHJldHVybiBvZmZzZXQgKyBieXRlTGVuZ3RoXG59O1xuXG5CdWZmZXIucHJvdG90eXBlLndyaXRlSW50QkUgPSBmdW5jdGlvbiB3cml0ZUludEJFICh2YWx1ZSwgb2Zmc2V0LCBieXRlTGVuZ3RoLCBub0Fzc2VydCkge1xuICB2YWx1ZSA9ICt2YWx1ZTtcbiAgb2Zmc2V0ID0gb2Zmc2V0IHwgMDtcbiAgaWYgKCFub0Fzc2VydCkge1xuICAgIHZhciBsaW1pdCA9IE1hdGgucG93KDIsIDggKiBieXRlTGVuZ3RoIC0gMSk7XG5cbiAgICBjaGVja0ludCh0aGlzLCB2YWx1ZSwgb2Zmc2V0LCBieXRlTGVuZ3RoLCBsaW1pdCAtIDEsIC1saW1pdCk7XG4gIH1cblxuICB2YXIgaSA9IGJ5dGVMZW5ndGggLSAxO1xuICB2YXIgbXVsID0gMTtcbiAgdmFyIHN1YiA9IDA7XG4gIHRoaXNbb2Zmc2V0ICsgaV0gPSB2YWx1ZSAmIDB4RkY7XG4gIHdoaWxlICgtLWkgPj0gMCAmJiAobXVsICo9IDB4MTAwKSkge1xuICAgIGlmICh2YWx1ZSA8IDAgJiYgc3ViID09PSAwICYmIHRoaXNbb2Zmc2V0ICsgaSArIDFdICE9PSAwKSB7XG4gICAgICBzdWIgPSAxO1xuICAgIH1cbiAgICB0aGlzW29mZnNldCArIGldID0gKCh2YWx1ZSAvIG11bCkgPj4gMCkgLSBzdWIgJiAweEZGO1xuICB9XG5cbiAgcmV0dXJuIG9mZnNldCArIGJ5dGVMZW5ndGhcbn07XG5cbkJ1ZmZlci5wcm90b3R5cGUud3JpdGVJbnQ4ID0gZnVuY3Rpb24gd3JpdGVJbnQ4ICh2YWx1ZSwgb2Zmc2V0LCBub0Fzc2VydCkge1xuICB2YWx1ZSA9ICt2YWx1ZTtcbiAgb2Zmc2V0ID0gb2Zmc2V0IHwgMDtcbiAgaWYgKCFub0Fzc2VydCkgY2hlY2tJbnQodGhpcywgdmFsdWUsIG9mZnNldCwgMSwgMHg3ZiwgLTB4ODApO1xuICBpZiAoIUJ1ZmZlci5UWVBFRF9BUlJBWV9TVVBQT1JUKSB2YWx1ZSA9IE1hdGguZmxvb3IodmFsdWUpO1xuICBpZiAodmFsdWUgPCAwKSB2YWx1ZSA9IDB4ZmYgKyB2YWx1ZSArIDE7XG4gIHRoaXNbb2Zmc2V0XSA9ICh2YWx1ZSAmIDB4ZmYpO1xuICByZXR1cm4gb2Zmc2V0ICsgMVxufTtcblxuQnVmZmVyLnByb3RvdHlwZS53cml0ZUludDE2TEUgPSBmdW5jdGlvbiB3cml0ZUludDE2TEUgKHZhbHVlLCBvZmZzZXQsIG5vQXNzZXJ0KSB7XG4gIHZhbHVlID0gK3ZhbHVlO1xuICBvZmZzZXQgPSBvZmZzZXQgfCAwO1xuICBpZiAoIW5vQXNzZXJ0KSBjaGVja0ludCh0aGlzLCB2YWx1ZSwgb2Zmc2V0LCAyLCAweDdmZmYsIC0weDgwMDApO1xuICBpZiAoQnVmZmVyLlRZUEVEX0FSUkFZX1NVUFBPUlQpIHtcbiAgICB0aGlzW29mZnNldF0gPSAodmFsdWUgJiAweGZmKTtcbiAgICB0aGlzW29mZnNldCArIDFdID0gKHZhbHVlID4+PiA4KTtcbiAgfSBlbHNlIHtcbiAgICBvYmplY3RXcml0ZVVJbnQxNih0aGlzLCB2YWx1ZSwgb2Zmc2V0LCB0cnVlKTtcbiAgfVxuICByZXR1cm4gb2Zmc2V0ICsgMlxufTtcblxuQnVmZmVyLnByb3RvdHlwZS53cml0ZUludDE2QkUgPSBmdW5jdGlvbiB3cml0ZUludDE2QkUgKHZhbHVlLCBvZmZzZXQsIG5vQXNzZXJ0KSB7XG4gIHZhbHVlID0gK3ZhbHVlO1xuICBvZmZzZXQgPSBvZmZzZXQgfCAwO1xuICBpZiAoIW5vQXNzZXJ0KSBjaGVja0ludCh0aGlzLCB2YWx1ZSwgb2Zmc2V0LCAyLCAweDdmZmYsIC0weDgwMDApO1xuICBpZiAoQnVmZmVyLlRZUEVEX0FSUkFZX1NVUFBPUlQpIHtcbiAgICB0aGlzW29mZnNldF0gPSAodmFsdWUgPj4+IDgpO1xuICAgIHRoaXNbb2Zmc2V0ICsgMV0gPSAodmFsdWUgJiAweGZmKTtcbiAgfSBlbHNlIHtcbiAgICBvYmplY3RXcml0ZVVJbnQxNih0aGlzLCB2YWx1ZSwgb2Zmc2V0LCBmYWxzZSk7XG4gIH1cbiAgcmV0dXJuIG9mZnNldCArIDJcbn07XG5cbkJ1ZmZlci5wcm90b3R5cGUud3JpdGVJbnQzMkxFID0gZnVuY3Rpb24gd3JpdGVJbnQzMkxFICh2YWx1ZSwgb2Zmc2V0LCBub0Fzc2VydCkge1xuICB2YWx1ZSA9ICt2YWx1ZTtcbiAgb2Zmc2V0ID0gb2Zmc2V0IHwgMDtcbiAgaWYgKCFub0Fzc2VydCkgY2hlY2tJbnQodGhpcywgdmFsdWUsIG9mZnNldCwgNCwgMHg3ZmZmZmZmZiwgLTB4ODAwMDAwMDApO1xuICBpZiAoQnVmZmVyLlRZUEVEX0FSUkFZX1NVUFBPUlQpIHtcbiAgICB0aGlzW29mZnNldF0gPSAodmFsdWUgJiAweGZmKTtcbiAgICB0aGlzW29mZnNldCArIDFdID0gKHZhbHVlID4+PiA4KTtcbiAgICB0aGlzW29mZnNldCArIDJdID0gKHZhbHVlID4+PiAxNik7XG4gICAgdGhpc1tvZmZzZXQgKyAzXSA9ICh2YWx1ZSA+Pj4gMjQpO1xuICB9IGVsc2Uge1xuICAgIG9iamVjdFdyaXRlVUludDMyKHRoaXMsIHZhbHVlLCBvZmZzZXQsIHRydWUpO1xuICB9XG4gIHJldHVybiBvZmZzZXQgKyA0XG59O1xuXG5CdWZmZXIucHJvdG90eXBlLndyaXRlSW50MzJCRSA9IGZ1bmN0aW9uIHdyaXRlSW50MzJCRSAodmFsdWUsIG9mZnNldCwgbm9Bc3NlcnQpIHtcbiAgdmFsdWUgPSArdmFsdWU7XG4gIG9mZnNldCA9IG9mZnNldCB8IDA7XG4gIGlmICghbm9Bc3NlcnQpIGNoZWNrSW50KHRoaXMsIHZhbHVlLCBvZmZzZXQsIDQsIDB4N2ZmZmZmZmYsIC0weDgwMDAwMDAwKTtcbiAgaWYgKHZhbHVlIDwgMCkgdmFsdWUgPSAweGZmZmZmZmZmICsgdmFsdWUgKyAxO1xuICBpZiAoQnVmZmVyLlRZUEVEX0FSUkFZX1NVUFBPUlQpIHtcbiAgICB0aGlzW29mZnNldF0gPSAodmFsdWUgPj4+IDI0KTtcbiAgICB0aGlzW29mZnNldCArIDFdID0gKHZhbHVlID4+PiAxNik7XG4gICAgdGhpc1tvZmZzZXQgKyAyXSA9ICh2YWx1ZSA+Pj4gOCk7XG4gICAgdGhpc1tvZmZzZXQgKyAzXSA9ICh2YWx1ZSAmIDB4ZmYpO1xuICB9IGVsc2Uge1xuICAgIG9iamVjdFdyaXRlVUludDMyKHRoaXMsIHZhbHVlLCBvZmZzZXQsIGZhbHNlKTtcbiAgfVxuICByZXR1cm4gb2Zmc2V0ICsgNFxufTtcblxuZnVuY3Rpb24gY2hlY2tJRUVFNzU0IChidWYsIHZhbHVlLCBvZmZzZXQsIGV4dCwgbWF4LCBtaW4pIHtcbiAgaWYgKG9mZnNldCArIGV4dCA+IGJ1Zi5sZW5ndGgpIHRocm93IG5ldyBSYW5nZUVycm9yKCdJbmRleCBvdXQgb2YgcmFuZ2UnKVxuICBpZiAob2Zmc2V0IDwgMCkgdGhyb3cgbmV3IFJhbmdlRXJyb3IoJ0luZGV4IG91dCBvZiByYW5nZScpXG59XG5cbmZ1bmN0aW9uIHdyaXRlRmxvYXQgKGJ1ZiwgdmFsdWUsIG9mZnNldCwgbGl0dGxlRW5kaWFuLCBub0Fzc2VydCkge1xuICBpZiAoIW5vQXNzZXJ0KSB7XG4gICAgY2hlY2tJRUVFNzU0KGJ1ZiwgdmFsdWUsIG9mZnNldCwgNCk7XG4gIH1cbiAgd3JpdGUoYnVmLCB2YWx1ZSwgb2Zmc2V0LCBsaXR0bGVFbmRpYW4sIDIzLCA0KTtcbiAgcmV0dXJuIG9mZnNldCArIDRcbn1cblxuQnVmZmVyLnByb3RvdHlwZS53cml0ZUZsb2F0TEUgPSBmdW5jdGlvbiB3cml0ZUZsb2F0TEUgKHZhbHVlLCBvZmZzZXQsIG5vQXNzZXJ0KSB7XG4gIHJldHVybiB3cml0ZUZsb2F0KHRoaXMsIHZhbHVlLCBvZmZzZXQsIHRydWUsIG5vQXNzZXJ0KVxufTtcblxuQnVmZmVyLnByb3RvdHlwZS53cml0ZUZsb2F0QkUgPSBmdW5jdGlvbiB3cml0ZUZsb2F0QkUgKHZhbHVlLCBvZmZzZXQsIG5vQXNzZXJ0KSB7XG4gIHJldHVybiB3cml0ZUZsb2F0KHRoaXMsIHZhbHVlLCBvZmZzZXQsIGZhbHNlLCBub0Fzc2VydClcbn07XG5cbmZ1bmN0aW9uIHdyaXRlRG91YmxlIChidWYsIHZhbHVlLCBvZmZzZXQsIGxpdHRsZUVuZGlhbiwgbm9Bc3NlcnQpIHtcbiAgaWYgKCFub0Fzc2VydCkge1xuICAgIGNoZWNrSUVFRTc1NChidWYsIHZhbHVlLCBvZmZzZXQsIDgpO1xuICB9XG4gIHdyaXRlKGJ1ZiwgdmFsdWUsIG9mZnNldCwgbGl0dGxlRW5kaWFuLCA1MiwgOCk7XG4gIHJldHVybiBvZmZzZXQgKyA4XG59XG5cbkJ1ZmZlci5wcm90b3R5cGUud3JpdGVEb3VibGVMRSA9IGZ1bmN0aW9uIHdyaXRlRG91YmxlTEUgKHZhbHVlLCBvZmZzZXQsIG5vQXNzZXJ0KSB7XG4gIHJldHVybiB3cml0ZURvdWJsZSh0aGlzLCB2YWx1ZSwgb2Zmc2V0LCB0cnVlLCBub0Fzc2VydClcbn07XG5cbkJ1ZmZlci5wcm90b3R5cGUud3JpdGVEb3VibGVCRSA9IGZ1bmN0aW9uIHdyaXRlRG91YmxlQkUgKHZhbHVlLCBvZmZzZXQsIG5vQXNzZXJ0KSB7XG4gIHJldHVybiB3cml0ZURvdWJsZSh0aGlzLCB2YWx1ZSwgb2Zmc2V0LCBmYWxzZSwgbm9Bc3NlcnQpXG59O1xuXG4vLyBjb3B5KHRhcmdldEJ1ZmZlciwgdGFyZ2V0U3RhcnQ9MCwgc291cmNlU3RhcnQ9MCwgc291cmNlRW5kPWJ1ZmZlci5sZW5ndGgpXG5CdWZmZXIucHJvdG90eXBlLmNvcHkgPSBmdW5jdGlvbiBjb3B5ICh0YXJnZXQsIHRhcmdldFN0YXJ0LCBzdGFydCwgZW5kKSB7XG4gIGlmICghc3RhcnQpIHN0YXJ0ID0gMDtcbiAgaWYgKCFlbmQgJiYgZW5kICE9PSAwKSBlbmQgPSB0aGlzLmxlbmd0aDtcbiAgaWYgKHRhcmdldFN0YXJ0ID49IHRhcmdldC5sZW5ndGgpIHRhcmdldFN0YXJ0ID0gdGFyZ2V0Lmxlbmd0aDtcbiAgaWYgKCF0YXJnZXRTdGFydCkgdGFyZ2V0U3RhcnQgPSAwO1xuICBpZiAoZW5kID4gMCAmJiBlbmQgPCBzdGFydCkgZW5kID0gc3RhcnQ7XG5cbiAgLy8gQ29weSAwIGJ5dGVzOyB3ZSdyZSBkb25lXG4gIGlmIChlbmQgPT09IHN0YXJ0KSByZXR1cm4gMFxuICBpZiAodGFyZ2V0Lmxlbmd0aCA9PT0gMCB8fCB0aGlzLmxlbmd0aCA9PT0gMCkgcmV0dXJuIDBcblxuICAvLyBGYXRhbCBlcnJvciBjb25kaXRpb25zXG4gIGlmICh0YXJnZXRTdGFydCA8IDApIHtcbiAgICB0aHJvdyBuZXcgUmFuZ2VFcnJvcigndGFyZ2V0U3RhcnQgb3V0IG9mIGJvdW5kcycpXG4gIH1cbiAgaWYgKHN0YXJ0IDwgMCB8fCBzdGFydCA+PSB0aGlzLmxlbmd0aCkgdGhyb3cgbmV3IFJhbmdlRXJyb3IoJ3NvdXJjZVN0YXJ0IG91dCBvZiBib3VuZHMnKVxuICBpZiAoZW5kIDwgMCkgdGhyb3cgbmV3IFJhbmdlRXJyb3IoJ3NvdXJjZUVuZCBvdXQgb2YgYm91bmRzJylcblxuICAvLyBBcmUgd2Ugb29iP1xuICBpZiAoZW5kID4gdGhpcy5sZW5ndGgpIGVuZCA9IHRoaXMubGVuZ3RoO1xuICBpZiAodGFyZ2V0Lmxlbmd0aCAtIHRhcmdldFN0YXJ0IDwgZW5kIC0gc3RhcnQpIHtcbiAgICBlbmQgPSB0YXJnZXQubGVuZ3RoIC0gdGFyZ2V0U3RhcnQgKyBzdGFydDtcbiAgfVxuXG4gIHZhciBsZW4gPSBlbmQgLSBzdGFydDtcbiAgdmFyIGk7XG5cbiAgaWYgKHRoaXMgPT09IHRhcmdldCAmJiBzdGFydCA8IHRhcmdldFN0YXJ0ICYmIHRhcmdldFN0YXJ0IDwgZW5kKSB7XG4gICAgLy8gZGVzY2VuZGluZyBjb3B5IGZyb20gZW5kXG4gICAgZm9yIChpID0gbGVuIC0gMTsgaSA+PSAwOyAtLWkpIHtcbiAgICAgIHRhcmdldFtpICsgdGFyZ2V0U3RhcnRdID0gdGhpc1tpICsgc3RhcnRdO1xuICAgIH1cbiAgfSBlbHNlIGlmIChsZW4gPCAxMDAwIHx8ICFCdWZmZXIuVFlQRURfQVJSQVlfU1VQUE9SVCkge1xuICAgIC8vIGFzY2VuZGluZyBjb3B5IGZyb20gc3RhcnRcbiAgICBmb3IgKGkgPSAwOyBpIDwgbGVuOyArK2kpIHtcbiAgICAgIHRhcmdldFtpICsgdGFyZ2V0U3RhcnRdID0gdGhpc1tpICsgc3RhcnRdO1xuICAgIH1cbiAgfSBlbHNlIHtcbiAgICBVaW50OEFycmF5LnByb3RvdHlwZS5zZXQuY2FsbChcbiAgICAgIHRhcmdldCxcbiAgICAgIHRoaXMuc3ViYXJyYXkoc3RhcnQsIHN0YXJ0ICsgbGVuKSxcbiAgICAgIHRhcmdldFN0YXJ0XG4gICAgKTtcbiAgfVxuXG4gIHJldHVybiBsZW5cbn07XG5cbi8vIFVzYWdlOlxuLy8gICAgYnVmZmVyLmZpbGwobnVtYmVyWywgb2Zmc2V0WywgZW5kXV0pXG4vLyAgICBidWZmZXIuZmlsbChidWZmZXJbLCBvZmZzZXRbLCBlbmRdXSlcbi8vICAgIGJ1ZmZlci5maWxsKHN0cmluZ1ssIG9mZnNldFssIGVuZF1dWywgZW5jb2RpbmddKVxuQnVmZmVyLnByb3RvdHlwZS5maWxsID0gZnVuY3Rpb24gZmlsbCAodmFsLCBzdGFydCwgZW5kLCBlbmNvZGluZykge1xuICAvLyBIYW5kbGUgc3RyaW5nIGNhc2VzOlxuICBpZiAodHlwZW9mIHZhbCA9PT0gJ3N0cmluZycpIHtcbiAgICBpZiAodHlwZW9mIHN0YXJ0ID09PSAnc3RyaW5nJykge1xuICAgICAgZW5jb2RpbmcgPSBzdGFydDtcbiAgICAgIHN0YXJ0ID0gMDtcbiAgICAgIGVuZCA9IHRoaXMubGVuZ3RoO1xuICAgIH0gZWxzZSBpZiAodHlwZW9mIGVuZCA9PT0gJ3N0cmluZycpIHtcbiAgICAgIGVuY29kaW5nID0gZW5kO1xuICAgICAgZW5kID0gdGhpcy5sZW5ndGg7XG4gICAgfVxuICAgIGlmICh2YWwubGVuZ3RoID09PSAxKSB7XG4gICAgICB2YXIgY29kZSA9IHZhbC5jaGFyQ29kZUF0KDApO1xuICAgICAgaWYgKGNvZGUgPCAyNTYpIHtcbiAgICAgICAgdmFsID0gY29kZTtcbiAgICAgIH1cbiAgICB9XG4gICAgaWYgKGVuY29kaW5nICE9PSB1bmRlZmluZWQgJiYgdHlwZW9mIGVuY29kaW5nICE9PSAnc3RyaW5nJykge1xuICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignZW5jb2RpbmcgbXVzdCBiZSBhIHN0cmluZycpXG4gICAgfVxuICAgIGlmICh0eXBlb2YgZW5jb2RpbmcgPT09ICdzdHJpbmcnICYmICFCdWZmZXIuaXNFbmNvZGluZyhlbmNvZGluZykpIHtcbiAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ1Vua25vd24gZW5jb2Rpbmc6ICcgKyBlbmNvZGluZylcbiAgICB9XG4gIH0gZWxzZSBpZiAodHlwZW9mIHZhbCA9PT0gJ251bWJlcicpIHtcbiAgICB2YWwgPSB2YWwgJiAyNTU7XG4gIH1cblxuICAvLyBJbnZhbGlkIHJhbmdlcyBhcmUgbm90IHNldCB0byBhIGRlZmF1bHQsIHNvIGNhbiByYW5nZSBjaGVjayBlYXJseS5cbiAgaWYgKHN0YXJ0IDwgMCB8fCB0aGlzLmxlbmd0aCA8IHN0YXJ0IHx8IHRoaXMubGVuZ3RoIDwgZW5kKSB7XG4gICAgdGhyb3cgbmV3IFJhbmdlRXJyb3IoJ091dCBvZiByYW5nZSBpbmRleCcpXG4gIH1cblxuICBpZiAoZW5kIDw9IHN0YXJ0KSB7XG4gICAgcmV0dXJuIHRoaXNcbiAgfVxuXG4gIHN0YXJ0ID0gc3RhcnQgPj4+IDA7XG4gIGVuZCA9IGVuZCA9PT0gdW5kZWZpbmVkID8gdGhpcy5sZW5ndGggOiBlbmQgPj4+IDA7XG5cbiAgaWYgKCF2YWwpIHZhbCA9IDA7XG5cbiAgdmFyIGk7XG4gIGlmICh0eXBlb2YgdmFsID09PSAnbnVtYmVyJykge1xuICAgIGZvciAoaSA9IHN0YXJ0OyBpIDwgZW5kOyArK2kpIHtcbiAgICAgIHRoaXNbaV0gPSB2YWw7XG4gICAgfVxuICB9IGVsc2Uge1xuICAgIHZhciBieXRlcyA9IGludGVybmFsSXNCdWZmZXIodmFsKVxuICAgICAgPyB2YWxcbiAgICAgIDogdXRmOFRvQnl0ZXMobmV3IEJ1ZmZlcih2YWwsIGVuY29kaW5nKS50b1N0cmluZygpKTtcbiAgICB2YXIgbGVuID0gYnl0ZXMubGVuZ3RoO1xuICAgIGZvciAoaSA9IDA7IGkgPCBlbmQgLSBzdGFydDsgKytpKSB7XG4gICAgICB0aGlzW2kgKyBzdGFydF0gPSBieXRlc1tpICUgbGVuXTtcbiAgICB9XG4gIH1cblxuICByZXR1cm4gdGhpc1xufTtcblxuLy8gSEVMUEVSIEZVTkNUSU9OU1xuLy8gPT09PT09PT09PT09PT09PVxuXG52YXIgSU5WQUxJRF9CQVNFNjRfUkUgPSAvW14rXFwvMC05QS1aYS16LV9dL2c7XG5cbmZ1bmN0aW9uIGJhc2U2NGNsZWFuIChzdHIpIHtcbiAgLy8gTm9kZSBzdHJpcHMgb3V0IGludmFsaWQgY2hhcmFjdGVycyBsaWtlIFxcbiBhbmQgXFx0IGZyb20gdGhlIHN0cmluZywgYmFzZTY0LWpzIGRvZXMgbm90XG4gIHN0ciA9IHN0cmluZ3RyaW0oc3RyKS5yZXBsYWNlKElOVkFMSURfQkFTRTY0X1JFLCAnJyk7XG4gIC8vIE5vZGUgY29udmVydHMgc3RyaW5ncyB3aXRoIGxlbmd0aCA8IDIgdG8gJydcbiAgaWYgKHN0ci5sZW5ndGggPCAyKSByZXR1cm4gJydcbiAgLy8gTm9kZSBhbGxvd3MgZm9yIG5vbi1wYWRkZWQgYmFzZTY0IHN0cmluZ3MgKG1pc3NpbmcgdHJhaWxpbmcgPT09KSwgYmFzZTY0LWpzIGRvZXMgbm90XG4gIHdoaWxlIChzdHIubGVuZ3RoICUgNCAhPT0gMCkge1xuICAgIHN0ciA9IHN0ciArICc9JztcbiAgfVxuICByZXR1cm4gc3RyXG59XG5cbmZ1bmN0aW9uIHN0cmluZ3RyaW0gKHN0cikge1xuICBpZiAoc3RyLnRyaW0pIHJldHVybiBzdHIudHJpbSgpXG4gIHJldHVybiBzdHIucmVwbGFjZSgvXlxccyt8XFxzKyQvZywgJycpXG59XG5cbmZ1bmN0aW9uIHRvSGV4IChuKSB7XG4gIGlmIChuIDwgMTYpIHJldHVybiAnMCcgKyBuLnRvU3RyaW5nKDE2KVxuICByZXR1cm4gbi50b1N0cmluZygxNilcbn1cblxuZnVuY3Rpb24gdXRmOFRvQnl0ZXMgKHN0cmluZywgdW5pdHMpIHtcbiAgdW5pdHMgPSB1bml0cyB8fCBJbmZpbml0eTtcbiAgdmFyIGNvZGVQb2ludDtcbiAgdmFyIGxlbmd0aCA9IHN0cmluZy5sZW5ndGg7XG4gIHZhciBsZWFkU3Vycm9nYXRlID0gbnVsbDtcbiAgdmFyIGJ5dGVzID0gW107XG5cbiAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW5ndGg7ICsraSkge1xuICAgIGNvZGVQb2ludCA9IHN0cmluZy5jaGFyQ29kZUF0KGkpO1xuXG4gICAgLy8gaXMgc3Vycm9nYXRlIGNvbXBvbmVudFxuICAgIGlmIChjb2RlUG9pbnQgPiAweEQ3RkYgJiYgY29kZVBvaW50IDwgMHhFMDAwKSB7XG4gICAgICAvLyBsYXN0IGNoYXIgd2FzIGEgbGVhZFxuICAgICAgaWYgKCFsZWFkU3Vycm9nYXRlKSB7XG4gICAgICAgIC8vIG5vIGxlYWQgeWV0XG4gICAgICAgIGlmIChjb2RlUG9pbnQgPiAweERCRkYpIHtcbiAgICAgICAgICAvLyB1bmV4cGVjdGVkIHRyYWlsXG4gICAgICAgICAgaWYgKCh1bml0cyAtPSAzKSA+IC0xKSBieXRlcy5wdXNoKDB4RUYsIDB4QkYsIDB4QkQpO1xuICAgICAgICAgIGNvbnRpbnVlXG4gICAgICAgIH0gZWxzZSBpZiAoaSArIDEgPT09IGxlbmd0aCkge1xuICAgICAgICAgIC8vIHVucGFpcmVkIGxlYWRcbiAgICAgICAgICBpZiAoKHVuaXRzIC09IDMpID4gLTEpIGJ5dGVzLnB1c2goMHhFRiwgMHhCRiwgMHhCRCk7XG4gICAgICAgICAgY29udGludWVcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIHZhbGlkIGxlYWRcbiAgICAgICAgbGVhZFN1cnJvZ2F0ZSA9IGNvZGVQb2ludDtcblxuICAgICAgICBjb250aW51ZVxuICAgICAgfVxuXG4gICAgICAvLyAyIGxlYWRzIGluIGEgcm93XG4gICAgICBpZiAoY29kZVBvaW50IDwgMHhEQzAwKSB7XG4gICAgICAgIGlmICgodW5pdHMgLT0gMykgPiAtMSkgYnl0ZXMucHVzaCgweEVGLCAweEJGLCAweEJEKTtcbiAgICAgICAgbGVhZFN1cnJvZ2F0ZSA9IGNvZGVQb2ludDtcbiAgICAgICAgY29udGludWVcbiAgICAgIH1cblxuICAgICAgLy8gdmFsaWQgc3Vycm9nYXRlIHBhaXJcbiAgICAgIGNvZGVQb2ludCA9IChsZWFkU3Vycm9nYXRlIC0gMHhEODAwIDw8IDEwIHwgY29kZVBvaW50IC0gMHhEQzAwKSArIDB4MTAwMDA7XG4gICAgfSBlbHNlIGlmIChsZWFkU3Vycm9nYXRlKSB7XG4gICAgICAvLyB2YWxpZCBibXAgY2hhciwgYnV0IGxhc3QgY2hhciB3YXMgYSBsZWFkXG4gICAgICBpZiAoKHVuaXRzIC09IDMpID4gLTEpIGJ5dGVzLnB1c2goMHhFRiwgMHhCRiwgMHhCRCk7XG4gICAgfVxuXG4gICAgbGVhZFN1cnJvZ2F0ZSA9IG51bGw7XG5cbiAgICAvLyBlbmNvZGUgdXRmOFxuICAgIGlmIChjb2RlUG9pbnQgPCAweDgwKSB7XG4gICAgICBpZiAoKHVuaXRzIC09IDEpIDwgMCkgYnJlYWtcbiAgICAgIGJ5dGVzLnB1c2goY29kZVBvaW50KTtcbiAgICB9IGVsc2UgaWYgKGNvZGVQb2ludCA8IDB4ODAwKSB7XG4gICAgICBpZiAoKHVuaXRzIC09IDIpIDwgMCkgYnJlYWtcbiAgICAgIGJ5dGVzLnB1c2goXG4gICAgICAgIGNvZGVQb2ludCA+PiAweDYgfCAweEMwLFxuICAgICAgICBjb2RlUG9pbnQgJiAweDNGIHwgMHg4MFxuICAgICAgKTtcbiAgICB9IGVsc2UgaWYgKGNvZGVQb2ludCA8IDB4MTAwMDApIHtcbiAgICAgIGlmICgodW5pdHMgLT0gMykgPCAwKSBicmVha1xuICAgICAgYnl0ZXMucHVzaChcbiAgICAgICAgY29kZVBvaW50ID4+IDB4QyB8IDB4RTAsXG4gICAgICAgIGNvZGVQb2ludCA+PiAweDYgJiAweDNGIHwgMHg4MCxcbiAgICAgICAgY29kZVBvaW50ICYgMHgzRiB8IDB4ODBcbiAgICAgICk7XG4gICAgfSBlbHNlIGlmIChjb2RlUG9pbnQgPCAweDExMDAwMCkge1xuICAgICAgaWYgKCh1bml0cyAtPSA0KSA8IDApIGJyZWFrXG4gICAgICBieXRlcy5wdXNoKFxuICAgICAgICBjb2RlUG9pbnQgPj4gMHgxMiB8IDB4RjAsXG4gICAgICAgIGNvZGVQb2ludCA+PiAweEMgJiAweDNGIHwgMHg4MCxcbiAgICAgICAgY29kZVBvaW50ID4+IDB4NiAmIDB4M0YgfCAweDgwLFxuICAgICAgICBjb2RlUG9pbnQgJiAweDNGIHwgMHg4MFxuICAgICAgKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdJbnZhbGlkIGNvZGUgcG9pbnQnKVxuICAgIH1cbiAgfVxuXG4gIHJldHVybiBieXRlc1xufVxuXG5mdW5jdGlvbiBhc2NpaVRvQnl0ZXMgKHN0cikge1xuICB2YXIgYnl0ZUFycmF5ID0gW107XG4gIGZvciAodmFyIGkgPSAwOyBpIDwgc3RyLmxlbmd0aDsgKytpKSB7XG4gICAgLy8gTm9kZSdzIGNvZGUgc2VlbXMgdG8gYmUgZG9pbmcgdGhpcyBhbmQgbm90ICYgMHg3Ri4uXG4gICAgYnl0ZUFycmF5LnB1c2goc3RyLmNoYXJDb2RlQXQoaSkgJiAweEZGKTtcbiAgfVxuICByZXR1cm4gYnl0ZUFycmF5XG59XG5cbmZ1bmN0aW9uIHV0ZjE2bGVUb0J5dGVzIChzdHIsIHVuaXRzKSB7XG4gIHZhciBjLCBoaSwgbG87XG4gIHZhciBieXRlQXJyYXkgPSBbXTtcbiAgZm9yICh2YXIgaSA9IDA7IGkgPCBzdHIubGVuZ3RoOyArK2kpIHtcbiAgICBpZiAoKHVuaXRzIC09IDIpIDwgMCkgYnJlYWtcblxuICAgIGMgPSBzdHIuY2hhckNvZGVBdChpKTtcbiAgICBoaSA9IGMgPj4gODtcbiAgICBsbyA9IGMgJSAyNTY7XG4gICAgYnl0ZUFycmF5LnB1c2gobG8pO1xuICAgIGJ5dGVBcnJheS5wdXNoKGhpKTtcbiAgfVxuXG4gIHJldHVybiBieXRlQXJyYXlcbn1cblxuXG5mdW5jdGlvbiBiYXNlNjRUb0J5dGVzIChzdHIpIHtcbiAgcmV0dXJuIHRvQnl0ZUFycmF5KGJhc2U2NGNsZWFuKHN0cikpXG59XG5cbmZ1bmN0aW9uIGJsaXRCdWZmZXIgKHNyYywgZHN0LCBvZmZzZXQsIGxlbmd0aCkge1xuICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbmd0aDsgKytpKSB7XG4gICAgaWYgKChpICsgb2Zmc2V0ID49IGRzdC5sZW5ndGgpIHx8IChpID49IHNyYy5sZW5ndGgpKSBicmVha1xuICAgIGRzdFtpICsgb2Zmc2V0XSA9IHNyY1tpXTtcbiAgfVxuICByZXR1cm4gaVxufVxuXG5mdW5jdGlvbiBpc25hbiAodmFsKSB7XG4gIHJldHVybiB2YWwgIT09IHZhbCAvLyBlc2xpbnQtZGlzYWJsZS1saW5lIG5vLXNlbGYtY29tcGFyZVxufVxuXG5cbi8vIHRoZSBmb2xsb3dpbmcgaXMgZnJvbSBpcy1idWZmZXIsIGFsc28gYnkgRmVyb3NzIEFib3VraGFkaWplaCBhbmQgd2l0aCBzYW1lIGxpc2VuY2Vcbi8vIFRoZSBfaXNCdWZmZXIgY2hlY2sgaXMgZm9yIFNhZmFyaSA1LTcgc3VwcG9ydCwgYmVjYXVzZSBpdCdzIG1pc3Npbmdcbi8vIE9iamVjdC5wcm90b3R5cGUuY29uc3RydWN0b3IuIFJlbW92ZSB0aGlzIGV2ZW50dWFsbHlcbmZ1bmN0aW9uIGlzQnVmZmVyKG9iaikge1xuICByZXR1cm4gb2JqICE9IG51bGwgJiYgKCEhb2JqLl9pc0J1ZmZlciB8fCBpc0Zhc3RCdWZmZXIob2JqKSB8fCBpc1Nsb3dCdWZmZXIob2JqKSlcbn1cblxuZnVuY3Rpb24gaXNGYXN0QnVmZmVyIChvYmopIHtcbiAgcmV0dXJuICEhb2JqLmNvbnN0cnVjdG9yICYmIHR5cGVvZiBvYmouY29uc3RydWN0b3IuaXNCdWZmZXIgPT09ICdmdW5jdGlvbicgJiYgb2JqLmNvbnN0cnVjdG9yLmlzQnVmZmVyKG9iailcbn1cblxuLy8gRm9yIE5vZGUgdjAuMTAgc3VwcG9ydC4gUmVtb3ZlIHRoaXMgZXZlbnR1YWxseS5cbmZ1bmN0aW9uIGlzU2xvd0J1ZmZlciAob2JqKSB7XG4gIHJldHVybiB0eXBlb2Ygb2JqLnJlYWRGbG9hdExFID09PSAnZnVuY3Rpb24nICYmIHR5cGVvZiBvYmouc2xpY2UgPT09ICdmdW5jdGlvbicgJiYgaXNGYXN0QnVmZmVyKG9iai5zbGljZSgwLCAwKSlcbn1cblxuZXhwb3J0IHsgQnVmZmVyLCBJTlNQRUNUX01BWF9CWVRFUywgU2xvd0J1ZmZlciwgaXNCdWZmZXIsIF9rTWF4TGVuZ3RoIGFzIGtNYXhMZW5ndGggfTtcbiIsICJpbXBvcnQgeyBCdWZmZXIgfSBmcm9tICdidWZmZXInO1xuLyoqXG4gKiBTdGFuZGFyZCBsaWJjIGVycm9yIGNvZGVzLiBBZGQgbW9yZSB0byB0aGlzIGVudW0gYW5kIEVycm9yU3RyaW5ncyBhcyB0aGV5IGFyZVxuICogbmVlZGVkLlxuICogQHVybCBodHRwOi8vd3d3LmdudS5vcmcvc29mdHdhcmUvbGliYy9tYW51YWwvaHRtbF9ub2RlL0Vycm9yLUNvZGVzLmh0bWxcbiAqL1xuZXhwb3J0IGVudW0gRXJyb3JDb2RlIHtcblx0RVBFUk0gPSAxLFxuXHRFTk9FTlQgPSAyLFxuXHRFSU8gPSA1LFxuXHRFQkFERiA9IDksXG5cdEVBQ0NFUyA9IDEzLFxuXHRFQlVTWSA9IDE2LFxuXHRFRVhJU1QgPSAxNyxcblx0RU5PVERJUiA9IDIwLFxuXHRFSVNESVIgPSAyMSxcblx0RUlOVkFMID0gMjIsXG5cdEVGQklHID0gMjcsXG5cdEVOT1NQQyA9IDI4LFxuXHRFUk9GUyA9IDMwLFxuXHRFTk9URU1QVFkgPSAzOSxcblx0RU5PVFNVUCA9IDk1LFxufVxuLyogdHNsaW50OmRpc2FibGU6dmFyaWFibGUtbmFtZSAqL1xuLyoqXG4gKiBTdHJpbmdzIGFzc29jaWF0ZWQgd2l0aCBlYWNoIGVycm9yIGNvZGUuXG4gKiBAaGlkZGVuXG4gKi9cbmV4cG9ydCBjb25zdCBFcnJvclN0cmluZ3M6IHsgW2NvZGU6IHN0cmluZ106IHN0cmluZzsgW2NvZGU6IG51bWJlcl06IHN0cmluZyB9ID0ge307XG5FcnJvclN0cmluZ3NbRXJyb3JDb2RlLkVQRVJNXSA9ICdPcGVyYXRpb24gbm90IHBlcm1pdHRlZC4nO1xuRXJyb3JTdHJpbmdzW0Vycm9yQ29kZS5FTk9FTlRdID0gJ05vIHN1Y2ggZmlsZSBvciBkaXJlY3RvcnkuJztcbkVycm9yU3RyaW5nc1tFcnJvckNvZGUuRUlPXSA9ICdJbnB1dC9vdXRwdXQgZXJyb3IuJztcbkVycm9yU3RyaW5nc1tFcnJvckNvZGUuRUJBREZdID0gJ0JhZCBmaWxlIGRlc2NyaXB0b3IuJztcbkVycm9yU3RyaW5nc1tFcnJvckNvZGUuRUFDQ0VTXSA9ICdQZXJtaXNzaW9uIGRlbmllZC4nO1xuRXJyb3JTdHJpbmdzW0Vycm9yQ29kZS5FQlVTWV0gPSAnUmVzb3VyY2UgYnVzeSBvciBsb2NrZWQuJztcbkVycm9yU3RyaW5nc1tFcnJvckNvZGUuRUVYSVNUXSA9ICdGaWxlIGV4aXN0cy4nO1xuRXJyb3JTdHJpbmdzW0Vycm9yQ29kZS5FTk9URElSXSA9ICdGaWxlIGlzIG5vdCBhIGRpcmVjdG9yeS4nO1xuRXJyb3JTdHJpbmdzW0Vycm9yQ29kZS5FSVNESVJdID0gJ0ZpbGUgaXMgYSBkaXJlY3RvcnkuJztcbkVycm9yU3RyaW5nc1tFcnJvckNvZGUuRUlOVkFMXSA9ICdJbnZhbGlkIGFyZ3VtZW50Lic7XG5FcnJvclN0cmluZ3NbRXJyb3JDb2RlLkVGQklHXSA9ICdGaWxlIGlzIHRvbyBiaWcuJztcbkVycm9yU3RyaW5nc1tFcnJvckNvZGUuRU5PU1BDXSA9ICdObyBzcGFjZSBsZWZ0IG9uIGRpc2suJztcbkVycm9yU3RyaW5nc1tFcnJvckNvZGUuRVJPRlNdID0gJ0Nhbm5vdCBtb2RpZnkgYSByZWFkLW9ubHkgZmlsZSBzeXN0ZW0uJztcbkVycm9yU3RyaW5nc1tFcnJvckNvZGUuRU5PVEVNUFRZXSA9ICdEaXJlY3RvcnkgaXMgbm90IGVtcHR5Lic7XG5FcnJvclN0cmluZ3NbRXJyb3JDb2RlLkVOT1RTVVBdID0gJ09wZXJhdGlvbiBpcyBub3Qgc3VwcG9ydGVkLic7XG4vKiB0c2xpbnQ6ZW5hYmxlOnZhcmlhYmxlLW5hbWUgKi9cblxuLyoqXG4gKiBSZXByZXNlbnRzIGEgQnJvd3NlckZTIGVycm9yLiBQYXNzZWQgYmFjayB0byBhcHBsaWNhdGlvbnMgYWZ0ZXIgYSBmYWlsZWRcbiAqIGNhbGwgdG8gdGhlIEJyb3dzZXJGUyBBUEkuXG4gKi9cbmV4cG9ydCBjbGFzcyBBcGlFcnJvciBleHRlbmRzIEVycm9yIGltcGxlbWVudHMgTm9kZUpTLkVycm5vRXhjZXB0aW9uIHtcblx0cHVibGljIHN0YXRpYyBmcm9tSlNPTihqc29uOiBhbnkpOiBBcGlFcnJvciB7XG5cdFx0Y29uc3QgZXJyID0gbmV3IEFwaUVycm9yKGpzb24uZXJybm8sIGpzb24ubWVzc2FnZSwganNvbi5wYXRoKTtcblx0XHRlcnIuY29kZSA9IGpzb24uY29kZTtcblx0XHRlcnIuc3RhY2sgPSBqc29uLnN0YWNrO1xuXHRcdHJldHVybiBlcnI7XG5cdH1cblxuXHQvKipcblx0ICogQ3JlYXRlcyBhbiBBcGlFcnJvciBvYmplY3QgZnJvbSBhIGJ1ZmZlci5cblx0ICovXG5cdHB1YmxpYyBzdGF0aWMgZnJvbUJ1ZmZlcihidWZmZXI6IEJ1ZmZlciwgaTogbnVtYmVyID0gMCk6IEFwaUVycm9yIHtcblx0XHRyZXR1cm4gQXBpRXJyb3IuZnJvbUpTT04oSlNPTi5wYXJzZShidWZmZXIudG9TdHJpbmcoJ3V0ZjgnLCBpICsgNCwgaSArIDQgKyBidWZmZXIucmVhZFVJbnQzMkxFKGkpKSkpO1xuXHR9XG5cblx0cHVibGljIHN0YXRpYyBGaWxlRXJyb3IoY29kZTogRXJyb3JDb2RlLCBwOiBzdHJpbmcpOiBBcGlFcnJvciB7XG5cdFx0cmV0dXJuIG5ldyBBcGlFcnJvcihjb2RlLCBFcnJvclN0cmluZ3NbY29kZV0sIHApO1xuXHR9XG5cblx0cHVibGljIHN0YXRpYyBFQUNDRVMocGF0aDogc3RyaW5nKTogQXBpRXJyb3Ige1xuXHRcdHJldHVybiB0aGlzLkZpbGVFcnJvcihFcnJvckNvZGUuRUFDQ0VTLCBwYXRoKTtcblx0fVxuXG5cdHB1YmxpYyBzdGF0aWMgRU5PRU5UKHBhdGg6IHN0cmluZyk6IEFwaUVycm9yIHtcblx0XHRyZXR1cm4gdGhpcy5GaWxlRXJyb3IoRXJyb3JDb2RlLkVOT0VOVCwgcGF0aCk7XG5cdH1cblxuXHRwdWJsaWMgc3RhdGljIEVFWElTVChwYXRoOiBzdHJpbmcpOiBBcGlFcnJvciB7XG5cdFx0cmV0dXJuIHRoaXMuRmlsZUVycm9yKEVycm9yQ29kZS5FRVhJU1QsIHBhdGgpO1xuXHR9XG5cblx0cHVibGljIHN0YXRpYyBFSVNESVIocGF0aDogc3RyaW5nKTogQXBpRXJyb3Ige1xuXHRcdHJldHVybiB0aGlzLkZpbGVFcnJvcihFcnJvckNvZGUuRUlTRElSLCBwYXRoKTtcblx0fVxuXG5cdHB1YmxpYyBzdGF0aWMgRU5PVERJUihwYXRoOiBzdHJpbmcpOiBBcGlFcnJvciB7XG5cdFx0cmV0dXJuIHRoaXMuRmlsZUVycm9yKEVycm9yQ29kZS5FTk9URElSLCBwYXRoKTtcblx0fVxuXG5cdHB1YmxpYyBzdGF0aWMgRVBFUk0ocGF0aDogc3RyaW5nKTogQXBpRXJyb3Ige1xuXHRcdHJldHVybiB0aGlzLkZpbGVFcnJvcihFcnJvckNvZGUuRVBFUk0sIHBhdGgpO1xuXHR9XG5cblx0cHVibGljIHN0YXRpYyBFTk9URU1QVFkocGF0aDogc3RyaW5nKTogQXBpRXJyb3Ige1xuXHRcdHJldHVybiB0aGlzLkZpbGVFcnJvcihFcnJvckNvZGUuRU5PVEVNUFRZLCBwYXRoKTtcblx0fVxuXG5cdHB1YmxpYyBlcnJubzogRXJyb3JDb2RlO1xuXHRwdWJsaWMgY29kZTogc3RyaW5nO1xuXHRwdWJsaWMgcGF0aD86IHN0cmluZztcblx0Ly8gVW5zdXBwb3J0ZWQuXG5cdHB1YmxpYyBzeXNjYWxsOiBzdHJpbmcgPSAnJztcblx0cHVibGljIHN0YWNrPzogc3RyaW5nO1xuXG5cdC8qKlxuXHQgKiBSZXByZXNlbnRzIGEgQnJvd3NlckZTIGVycm9yLiBQYXNzZWQgYmFjayB0byBhcHBsaWNhdGlvbnMgYWZ0ZXIgYSBmYWlsZWRcblx0ICogY2FsbCB0byB0aGUgQnJvd3NlckZTIEFQSS5cblx0ICpcblx0ICogRXJyb3IgY29kZXMgbWlycm9yIHRob3NlIHJldHVybmVkIGJ5IHJlZ3VsYXIgVW5peCBmaWxlIG9wZXJhdGlvbnMsIHdoaWNoIGlzXG5cdCAqIHdoYXQgTm9kZSByZXR1cm5zLlxuXHQgKiBAY29uc3RydWN0b3IgQXBpRXJyb3Jcblx0ICogQHBhcmFtIHR5cGUgVGhlIHR5cGUgb2YgdGhlIGVycm9yLlxuXHQgKiBAcGFyYW0gW21lc3NhZ2VdIEEgZGVzY3JpcHRpdmUgZXJyb3IgbWVzc2FnZS5cblx0ICovXG5cdGNvbnN0cnVjdG9yKHR5cGU6IEVycm9yQ29kZSwgbWVzc2FnZTogc3RyaW5nID0gRXJyb3JTdHJpbmdzW3R5cGVdLCBwYXRoPzogc3RyaW5nKSB7XG5cdFx0c3VwZXIobWVzc2FnZSk7XG5cdFx0dGhpcy5lcnJubyA9IHR5cGU7XG5cdFx0dGhpcy5jb2RlID0gRXJyb3JDb2RlW3R5cGVdO1xuXHRcdHRoaXMucGF0aCA9IHBhdGg7XG5cdFx0dGhpcy5tZXNzYWdlID0gYEVycm9yOiAke3RoaXMuY29kZX06ICR7bWVzc2FnZX0ke3RoaXMucGF0aCA/IGAsICcke3RoaXMucGF0aH0nYCA6ICcnfWA7XG5cdH1cblxuXHQvKipcblx0ICogQHJldHVybiBBIGZyaWVuZGx5IGVycm9yIG1lc3NhZ2UuXG5cdCAqL1xuXHRwdWJsaWMgdG9TdHJpbmcoKTogc3RyaW5nIHtcblx0XHRyZXR1cm4gdGhpcy5tZXNzYWdlO1xuXHR9XG5cblx0cHVibGljIHRvSlNPTigpOiBhbnkge1xuXHRcdHJldHVybiB7XG5cdFx0XHRlcnJubzogdGhpcy5lcnJubyxcblx0XHRcdGNvZGU6IHRoaXMuY29kZSxcblx0XHRcdHBhdGg6IHRoaXMucGF0aCxcblx0XHRcdHN0YWNrOiB0aGlzLnN0YWNrLFxuXHRcdFx0bWVzc2FnZTogdGhpcy5tZXNzYWdlLFxuXHRcdH07XG5cdH1cblxuXHQvKipcblx0ICogV3JpdGVzIHRoZSBBUEkgZXJyb3IgaW50byBhIGJ1ZmZlci5cblx0ICovXG5cdHB1YmxpYyB3cml0ZVRvQnVmZmVyKGJ1ZmZlcjogQnVmZmVyID0gQnVmZmVyLmFsbG9jKHRoaXMuYnVmZmVyU2l6ZSgpKSwgaTogbnVtYmVyID0gMCk6IEJ1ZmZlciB7XG5cdFx0Y29uc3QgYnl0ZXNXcml0dGVuID0gYnVmZmVyLndyaXRlKEpTT04uc3RyaW5naWZ5KHRoaXMudG9KU09OKCkpLCBpICsgNCk7XG5cdFx0YnVmZmVyLndyaXRlVUludDMyTEUoYnl0ZXNXcml0dGVuLCBpKTtcblx0XHRyZXR1cm4gYnVmZmVyO1xuXHR9XG5cblx0LyoqXG5cdCAqIFRoZSBzaXplIG9mIHRoZSBBUEkgZXJyb3IgaW4gYnVmZmVyLWZvcm0gaW4gYnl0ZXMuXG5cdCAqL1xuXHRwdWJsaWMgYnVmZmVyU2l6ZSgpOiBudW1iZXIge1xuXHRcdC8vIDQgYnl0ZXMgZm9yIHN0cmluZyBsZW5ndGguXG5cdFx0cmV0dXJuIDQgKyBCdWZmZXIuYnl0ZUxlbmd0aChKU09OLnN0cmluZ2lmeSh0aGlzLnRvSlNPTigpKSk7XG5cdH1cbn1cbiIsICJpbXBvcnQgeyBFcnJvckNvZGUsIEFwaUVycm9yIH0gZnJvbSAnLi9hcGlfZXJyb3InO1xuXG5leHBvcnQgZW51bSBBY3Rpb25UeXBlIHtcblx0Ly8gSW5kaWNhdGVzIHRoYXQgdGhlIGNvZGUgc2hvdWxkIG5vdCBkbyBhbnl0aGluZy5cblx0Tk9QID0gMCxcblx0Ly8gSW5kaWNhdGVzIHRoYXQgdGhlIGNvZGUgc2hvdWxkIHRocm93IGFuIGV4Y2VwdGlvbi5cblx0VEhST1dfRVhDRVBUSU9OID0gMSxcblx0Ly8gSW5kaWNhdGVzIHRoYXQgdGhlIGNvZGUgc2hvdWxkIHRydW5jYXRlIHRoZSBmaWxlLCBidXQgb25seSBpZiBpdCBpcyBhIGZpbGUuXG5cdFRSVU5DQVRFX0ZJTEUgPSAyLFxuXHQvLyBJbmRpY2F0ZXMgdGhhdCB0aGUgY29kZSBzaG91bGQgY3JlYXRlIHRoZSBmaWxlLlxuXHRDUkVBVEVfRklMRSA9IDMsXG59XG5cbi8qKlxuICogUmVwcmVzZW50cyBvbmUgb2YgdGhlIGZvbGxvd2luZyBmaWxlIGZsYWdzLiBBIGNvbnZlbmllbmNlIG9iamVjdC5cbiAqXG4gKiAqIGAncidgIC0gT3BlbiBmaWxlIGZvciByZWFkaW5nLiBBbiBleGNlcHRpb24gb2NjdXJzIGlmIHRoZSBmaWxlIGRvZXMgbm90IGV4aXN0LlxuICogKiBgJ3IrJ2AgLSBPcGVuIGZpbGUgZm9yIHJlYWRpbmcgYW5kIHdyaXRpbmcuIEFuIGV4Y2VwdGlvbiBvY2N1cnMgaWYgdGhlIGZpbGUgZG9lcyBub3QgZXhpc3QuXG4gKiAqIGAncnMnYCAtIE9wZW4gZmlsZSBmb3IgcmVhZGluZyBpbiBzeW5jaHJvbm91cyBtb2RlLiBJbnN0cnVjdHMgdGhlIGZpbGVzeXN0ZW0gdG8gbm90IGNhY2hlIHdyaXRlcy5cbiAqICogYCdycysnYCAtIE9wZW4gZmlsZSBmb3IgcmVhZGluZyBhbmQgd3JpdGluZywgYW5kIG9wZW5zIHRoZSBmaWxlIGluIHN5bmNocm9ub3VzIG1vZGUuXG4gKiAqIGAndydgIC0gT3BlbiBmaWxlIGZvciB3cml0aW5nLiBUaGUgZmlsZSBpcyBjcmVhdGVkIChpZiBpdCBkb2VzIG5vdCBleGlzdCkgb3IgdHJ1bmNhdGVkIChpZiBpdCBleGlzdHMpLlxuICogKiBgJ3d4J2AgLSBMaWtlICd3JyBidXQgb3BlbnMgdGhlIGZpbGUgaW4gZXhjbHVzaXZlIG1vZGUuXG4gKiAqIGAndysnYCAtIE9wZW4gZmlsZSBmb3IgcmVhZGluZyBhbmQgd3JpdGluZy4gVGhlIGZpbGUgaXMgY3JlYXRlZCAoaWYgaXQgZG9lcyBub3QgZXhpc3QpIG9yIHRydW5jYXRlZCAoaWYgaXQgZXhpc3RzKS5cbiAqICogYCd3eCsnYCAtIExpa2UgJ3crJyBidXQgb3BlbnMgdGhlIGZpbGUgaW4gZXhjbHVzaXZlIG1vZGUuXG4gKiAqIGAnYSdgIC0gT3BlbiBmaWxlIGZvciBhcHBlbmRpbmcuIFRoZSBmaWxlIGlzIGNyZWF0ZWQgaWYgaXQgZG9lcyBub3QgZXhpc3QuXG4gKiAqIGAnYXgnYCAtIExpa2UgJ2EnIGJ1dCBvcGVucyB0aGUgZmlsZSBpbiBleGNsdXNpdmUgbW9kZS5cbiAqICogYCdhKydgIC0gT3BlbiBmaWxlIGZvciByZWFkaW5nIGFuZCBhcHBlbmRpbmcuIFRoZSBmaWxlIGlzIGNyZWF0ZWQgaWYgaXQgZG9lcyBub3QgZXhpc3QuXG4gKiAqIGAnYXgrJ2AgLSBMaWtlICdhKycgYnV0IG9wZW5zIHRoZSBmaWxlIGluIGV4Y2x1c2l2ZSBtb2RlLlxuICpcbiAqIEV4Y2x1c2l2ZSBtb2RlIGVuc3VyZXMgdGhhdCB0aGUgZmlsZSBwYXRoIGlzIG5ld2x5IGNyZWF0ZWQuXG4gKi9cbmV4cG9ydCBjbGFzcyBGaWxlRmxhZyB7XG5cdC8vIENvbnRhaW5zIGNhY2hlZCBGaWxlTW9kZSBpbnN0YW5jZXMuXG5cdHByaXZhdGUgc3RhdGljIGZsYWdDYWNoZTogTWFwPHN0cmluZywgRmlsZUZsYWc+ID0gbmV3IE1hcCgpO1xuXHQvLyBBcnJheSBvZiB2YWxpZCBtb2RlIHN0cmluZ3MuXG5cdHByaXZhdGUgc3RhdGljIHZhbGlkRmxhZ1N0cnMgPSBbJ3InLCAncisnLCAncnMnLCAncnMrJywgJ3cnLCAnd3gnLCAndysnLCAnd3grJywgJ2EnLCAnYXgnLCAnYSsnLCAnYXgrJ107XG5cblx0LyoqXG5cdCAqIEdldCBhbiBvYmplY3QgcmVwcmVzZW50aW5nIHRoZSBnaXZlbiBmaWxlIGZsYWcuXG5cdCAqIEBwYXJhbSBtb2RlU3RyIFRoZSBzdHJpbmcgcmVwcmVzZW50aW5nIHRoZSBmbGFnXG5cdCAqIEByZXR1cm4gVGhlIEZpbGVGbGFnIG9iamVjdCByZXByZXNlbnRpbmcgdGhlIGZsYWdcblx0ICogQHRocm93IHdoZW4gdGhlIGZsYWcgc3RyaW5nIGlzIGludmFsaWRcblx0ICovXG5cdHB1YmxpYyBzdGF0aWMgZ2V0RmlsZUZsYWcoZmxhZ1N0cjogc3RyaW5nKTogRmlsZUZsYWcge1xuXHRcdC8vIENoZWNrIGNhY2hlIGZpcnN0LlxuXHRcdGlmICghRmlsZUZsYWcuZmxhZ0NhY2hlLmhhcyhmbGFnU3RyKSkge1xuXHRcdFx0RmlsZUZsYWcuZmxhZ0NhY2hlLnNldChmbGFnU3RyLCBuZXcgRmlsZUZsYWcoZmxhZ1N0cikpO1xuXHRcdH1cblx0XHRyZXR1cm4gRmlsZUZsYWcuZmxhZ0NhY2hlLmdldChmbGFnU3RyKTtcblx0fVxuXG5cdHByaXZhdGUgZmxhZ1N0cjogc3RyaW5nO1xuXHQvKipcblx0ICogVGhpcyBzaG91bGQgbmV2ZXIgYmUgY2FsbGVkIGRpcmVjdGx5LlxuXHQgKiBAcGFyYW0gbW9kZVN0ciBUaGUgc3RyaW5nIHJlcHJlc2VudGluZyB0aGUgbW9kZVxuXHQgKiBAdGhyb3cgd2hlbiB0aGUgbW9kZSBzdHJpbmcgaXMgaW52YWxpZFxuXHQgKi9cblx0Y29uc3RydWN0b3IoZmxhZ1N0cjogc3RyaW5nKSB7XG5cdFx0dGhpcy5mbGFnU3RyID0gZmxhZ1N0cjtcblx0XHRpZiAoRmlsZUZsYWcudmFsaWRGbGFnU3Rycy5pbmRleE9mKGZsYWdTdHIpIDwgMCkge1xuXHRcdFx0dGhyb3cgbmV3IEFwaUVycm9yKEVycm9yQ29kZS5FSU5WQUwsICdJbnZhbGlkIGZsYWc6ICcgKyBmbGFnU3RyKTtcblx0XHR9XG5cdH1cblxuXHQvKipcblx0ICogR2V0IHRoZSB1bmRlcmx5aW5nIGZsYWcgc3RyaW5nIGZvciB0aGlzIGZsYWcuXG5cdCAqL1xuXHRwdWJsaWMgZ2V0RmxhZ1N0cmluZygpOiBzdHJpbmcge1xuXHRcdHJldHVybiB0aGlzLmZsYWdTdHI7XG5cdH1cblxuXHQvKipcblx0ICogR2V0IHRoZSBlcXVpdmFsZW50IG1vZGUgKDBiMHh4eDogcmVhZCwgd3JpdGUsIGV4ZWN1dGUpXG5cdCAqIE5vdGU6IEV4ZWN1dGUgd2lsbCBhbHdheXMgYmUgMFxuXHQgKi9cblx0cHVibGljIGdldE1vZGUoKTogbnVtYmVyIHtcblx0XHRsZXQgbW9kZSA9IDA7XG5cdFx0bW9kZSA8PD0gMTtcblx0XHRtb2RlICs9ICt0aGlzLmlzUmVhZGFibGUoKTtcblx0XHRtb2RlIDw8PSAxO1xuXHRcdG1vZGUgKz0gK3RoaXMuaXNXcml0ZWFibGUoKTtcblx0XHRtb2RlIDw8PSAxO1xuXHRcdHJldHVybiBtb2RlO1xuXHR9XG5cblx0LyoqXG5cdCAqIFJldHVybnMgdHJ1ZSBpZiB0aGUgZmlsZSBpcyByZWFkYWJsZS5cblx0ICovXG5cdHB1YmxpYyBpc1JlYWRhYmxlKCk6IGJvb2xlYW4ge1xuXHRcdHJldHVybiB0aGlzLmZsYWdTdHIuaW5kZXhPZigncicpICE9PSAtMSB8fCB0aGlzLmZsYWdTdHIuaW5kZXhPZignKycpICE9PSAtMTtcblx0fVxuXHQvKipcblx0ICogUmV0dXJucyB0cnVlIGlmIHRoZSBmaWxlIGlzIHdyaXRlYWJsZS5cblx0ICovXG5cdHB1YmxpYyBpc1dyaXRlYWJsZSgpOiBib29sZWFuIHtcblx0XHRyZXR1cm4gdGhpcy5mbGFnU3RyLmluZGV4T2YoJ3cnKSAhPT0gLTEgfHwgdGhpcy5mbGFnU3RyLmluZGV4T2YoJ2EnKSAhPT0gLTEgfHwgdGhpcy5mbGFnU3RyLmluZGV4T2YoJysnKSAhPT0gLTE7XG5cdH1cblx0LyoqXG5cdCAqIFJldHVybnMgdHJ1ZSBpZiB0aGUgZmlsZSBtb2RlIHNob3VsZCB0cnVuY2F0ZS5cblx0ICovXG5cdHB1YmxpYyBpc1RydW5jYXRpbmcoKTogYm9vbGVhbiB7XG5cdFx0cmV0dXJuIHRoaXMuZmxhZ1N0ci5pbmRleE9mKCd3JykgIT09IC0xO1xuXHR9XG5cdC8qKlxuXHQgKiBSZXR1cm5zIHRydWUgaWYgdGhlIGZpbGUgaXMgYXBwZW5kYWJsZS5cblx0ICovXG5cdHB1YmxpYyBpc0FwcGVuZGFibGUoKTogYm9vbGVhbiB7XG5cdFx0cmV0dXJuIHRoaXMuZmxhZ1N0ci5pbmRleE9mKCdhJykgIT09IC0xO1xuXHR9XG5cdC8qKlxuXHQgKiBSZXR1cm5zIHRydWUgaWYgdGhlIGZpbGUgaXMgb3BlbiBpbiBzeW5jaHJvbm91cyBtb2RlLlxuXHQgKi9cblx0cHVibGljIGlzU3luY2hyb25vdXMoKTogYm9vbGVhbiB7XG5cdFx0cmV0dXJuIHRoaXMuZmxhZ1N0ci5pbmRleE9mKCdzJykgIT09IC0xO1xuXHR9XG5cdC8qKlxuXHQgKiBSZXR1cm5zIHRydWUgaWYgdGhlIGZpbGUgaXMgb3BlbiBpbiBleGNsdXNpdmUgbW9kZS5cblx0ICovXG5cdHB1YmxpYyBpc0V4Y2x1c2l2ZSgpOiBib29sZWFuIHtcblx0XHRyZXR1cm4gdGhpcy5mbGFnU3RyLmluZGV4T2YoJ3gnKSAhPT0gLTE7XG5cdH1cblx0LyoqXG5cdCAqIFJldHVybnMgb25lIG9mIHRoZSBzdGF0aWMgZmllbGRzIG9uIHRoaXMgb2JqZWN0IHRoYXQgaW5kaWNhdGVzIHRoZVxuXHQgKiBhcHByb3ByaWF0ZSByZXNwb25zZSB0byB0aGUgcGF0aCBleGlzdGluZy5cblx0ICovXG5cdHB1YmxpYyBwYXRoRXhpc3RzQWN0aW9uKCk6IEFjdGlvblR5cGUge1xuXHRcdGlmICh0aGlzLmlzRXhjbHVzaXZlKCkpIHtcblx0XHRcdHJldHVybiBBY3Rpb25UeXBlLlRIUk9XX0VYQ0VQVElPTjtcblx0XHR9IGVsc2UgaWYgKHRoaXMuaXNUcnVuY2F0aW5nKCkpIHtcblx0XHRcdHJldHVybiBBY3Rpb25UeXBlLlRSVU5DQVRFX0ZJTEU7XG5cdFx0fSBlbHNlIHtcblx0XHRcdHJldHVybiBBY3Rpb25UeXBlLk5PUDtcblx0XHR9XG5cdH1cblx0LyoqXG5cdCAqIFJldHVybnMgb25lIG9mIHRoZSBzdGF0aWMgZmllbGRzIG9uIHRoaXMgb2JqZWN0IHRoYXQgaW5kaWNhdGVzIHRoZVxuXHQgKiBhcHByb3ByaWF0ZSByZXNwb25zZSB0byB0aGUgcGF0aCBub3QgZXhpc3RpbmcuXG5cdCAqL1xuXHRwdWJsaWMgcGF0aE5vdEV4aXN0c0FjdGlvbigpOiBBY3Rpb25UeXBlIHtcblx0XHRpZiAoKHRoaXMuaXNXcml0ZWFibGUoKSB8fCB0aGlzLmlzQXBwZW5kYWJsZSgpKSAmJiB0aGlzLmZsYWdTdHIgIT09ICdyKycpIHtcblx0XHRcdHJldHVybiBBY3Rpb25UeXBlLkNSRUFURV9GSUxFO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHRyZXR1cm4gQWN0aW9uVHlwZS5USFJPV19FWENFUFRJT047XG5cdFx0fVxuXHR9XG59XG4iLCAiLy8gQ29weXJpZ2h0IEpveWVudCwgSW5jLiBhbmQgb3RoZXIgTm9kZSBjb250cmlidXRvcnMuXG4vL1xuLy8gUGVybWlzc2lvbiBpcyBoZXJlYnkgZ3JhbnRlZCwgZnJlZSBvZiBjaGFyZ2UsIHRvIGFueSBwZXJzb24gb2J0YWluaW5nIGFcbi8vIGNvcHkgb2YgdGhpcyBzb2Z0d2FyZSBhbmQgYXNzb2NpYXRlZCBkb2N1bWVudGF0aW9uIGZpbGVzICh0aGVcbi8vIFwiU29mdHdhcmVcIiksIHRvIGRlYWwgaW4gdGhlIFNvZnR3YXJlIHdpdGhvdXQgcmVzdHJpY3Rpb24sIGluY2x1ZGluZ1xuLy8gd2l0aG91dCBsaW1pdGF0aW9uIHRoZSByaWdodHMgdG8gdXNlLCBjb3B5LCBtb2RpZnksIG1lcmdlLCBwdWJsaXNoLFxuLy8gZGlzdHJpYnV0ZSwgc3VibGljZW5zZSwgYW5kL29yIHNlbGwgY29waWVzIG9mIHRoZSBTb2Z0d2FyZSwgYW5kIHRvIHBlcm1pdFxuLy8gcGVyc29ucyB0byB3aG9tIHRoZSBTb2Z0d2FyZSBpcyBmdXJuaXNoZWQgdG8gZG8gc28sIHN1YmplY3QgdG8gdGhlXG4vLyBmb2xsb3dpbmcgY29uZGl0aW9uczpcbi8vXG4vLyBUaGUgYWJvdmUgY29weXJpZ2h0IG5vdGljZSBhbmQgdGhpcyBwZXJtaXNzaW9uIG5vdGljZSBzaGFsbCBiZSBpbmNsdWRlZFxuLy8gaW4gYWxsIGNvcGllcyBvciBzdWJzdGFudGlhbCBwb3J0aW9ucyBvZiB0aGUgU29mdHdhcmUuXG4vL1xuLy8gVEhFIFNPRlRXQVJFIElTIFBST1ZJREVEIFwiQVMgSVNcIiwgV0lUSE9VVCBXQVJSQU5UWSBPRiBBTlkgS0lORCwgRVhQUkVTU1xuLy8gT1IgSU1QTElFRCwgSU5DTFVESU5HIEJVVCBOT1QgTElNSVRFRCBUTyBUSEUgV0FSUkFOVElFUyBPRlxuLy8gTUVSQ0hBTlRBQklMSVRZLCBGSVRORVNTIEZPUiBBIFBBUlRJQ1VMQVIgUFVSUE9TRSBBTkQgTk9OSU5GUklOR0VNRU5ULiBJTlxuLy8gTk8gRVZFTlQgU0hBTEwgVEhFIEFVVEhPUlMgT1IgQ09QWVJJR0hUIEhPTERFUlMgQkUgTElBQkxFIEZPUiBBTlkgQ0xBSU0sXG4vLyBEQU1BR0VTIE9SIE9USEVSIExJQUJJTElUWSwgV0hFVEhFUiBJTiBBTiBBQ1RJT04gT0YgQ09OVFJBQ1QsIFRPUlQgT1Jcbi8vIE9USEVSV0lTRSwgQVJJU0lORyBGUk9NLCBPVVQgT0YgT1IgSU4gQ09OTkVDVElPTiBXSVRIIFRIRSBTT0ZUV0FSRSBPUiBUSEVcbi8vIFVTRSBPUiBPVEhFUiBERUFMSU5HUyBJTiBUSEUgU09GVFdBUkUuXG5cbi8vIHJlc29sdmVzIC4gYW5kIC4uIGVsZW1lbnRzIGluIGEgcGF0aCBhcnJheSB3aXRoIGRpcmVjdG9yeSBuYW1lcyB0aGVyZVxuLy8gbXVzdCBiZSBubyBzbGFzaGVzLCBlbXB0eSBlbGVtZW50cywgb3IgZGV2aWNlIG5hbWVzIChjOlxcKSBpbiB0aGUgYXJyYXlcbi8vIChzbyBhbHNvIG5vIGxlYWRpbmcgYW5kIHRyYWlsaW5nIHNsYXNoZXMgLSBpdCBkb2VzIG5vdCBkaXN0aW5ndWlzaFxuLy8gcmVsYXRpdmUgYW5kIGFic29sdXRlIHBhdGhzKVxuZnVuY3Rpb24gbm9ybWFsaXplQXJyYXkocGFydHMsIGFsbG93QWJvdmVSb290KSB7XG4gIC8vIGlmIHRoZSBwYXRoIHRyaWVzIHRvIGdvIGFib3ZlIHRoZSByb290LCBgdXBgIGVuZHMgdXAgPiAwXG4gIHZhciB1cCA9IDA7XG4gIGZvciAodmFyIGkgPSBwYXJ0cy5sZW5ndGggLSAxOyBpID49IDA7IGktLSkge1xuICAgIHZhciBsYXN0ID0gcGFydHNbaV07XG4gICAgaWYgKGxhc3QgPT09ICcuJykge1xuICAgICAgcGFydHMuc3BsaWNlKGksIDEpO1xuICAgIH0gZWxzZSBpZiAobGFzdCA9PT0gJy4uJykge1xuICAgICAgcGFydHMuc3BsaWNlKGksIDEpO1xuICAgICAgdXArKztcbiAgICB9IGVsc2UgaWYgKHVwKSB7XG4gICAgICBwYXJ0cy5zcGxpY2UoaSwgMSk7XG4gICAgICB1cC0tO1xuICAgIH1cbiAgfVxuXG4gIC8vIGlmIHRoZSBwYXRoIGlzIGFsbG93ZWQgdG8gZ28gYWJvdmUgdGhlIHJvb3QsIHJlc3RvcmUgbGVhZGluZyAuLnNcbiAgaWYgKGFsbG93QWJvdmVSb290KSB7XG4gICAgZm9yICg7IHVwLS07IHVwKSB7XG4gICAgICBwYXJ0cy51bnNoaWZ0KCcuLicpO1xuICAgIH1cbiAgfVxuXG4gIHJldHVybiBwYXJ0cztcbn1cblxuLy8gU3BsaXQgYSBmaWxlbmFtZSBpbnRvIFtyb290LCBkaXIsIGJhc2VuYW1lLCBleHRdLCB1bml4IHZlcnNpb25cbi8vICdyb290JyBpcyBqdXN0IGEgc2xhc2gsIG9yIG5vdGhpbmcuXG52YXIgc3BsaXRQYXRoUmUgPVxuICAgIC9eKFxcLz98KShbXFxzXFxTXSo/KSgoPzpcXC57MSwyfXxbXlxcL10rP3wpKFxcLlteLlxcL10qfCkpKD86W1xcL10qKSQvO1xudmFyIHNwbGl0UGF0aCA9IGZ1bmN0aW9uKGZpbGVuYW1lKSB7XG4gIHJldHVybiBzcGxpdFBhdGhSZS5leGVjKGZpbGVuYW1lKS5zbGljZSgxKTtcbn07XG5cbi8vIHBhdGgucmVzb2x2ZShbZnJvbSAuLi5dLCB0bylcbi8vIHBvc2l4IHZlcnNpb25cbmV4cG9ydCBmdW5jdGlvbiByZXNvbHZlKCkge1xuICB2YXIgcmVzb2x2ZWRQYXRoID0gJycsXG4gICAgICByZXNvbHZlZEFic29sdXRlID0gZmFsc2U7XG5cbiAgZm9yICh2YXIgaSA9IGFyZ3VtZW50cy5sZW5ndGggLSAxOyBpID49IC0xICYmICFyZXNvbHZlZEFic29sdXRlOyBpLS0pIHtcbiAgICB2YXIgcGF0aCA9IChpID49IDApID8gYXJndW1lbnRzW2ldIDogJy8nO1xuXG4gICAgLy8gU2tpcCBlbXB0eSBhbmQgaW52YWxpZCBlbnRyaWVzXG4gICAgaWYgKHR5cGVvZiBwYXRoICE9PSAnc3RyaW5nJykge1xuICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignQXJndW1lbnRzIHRvIHBhdGgucmVzb2x2ZSBtdXN0IGJlIHN0cmluZ3MnKTtcbiAgICB9IGVsc2UgaWYgKCFwYXRoKSB7XG4gICAgICBjb250aW51ZTtcbiAgICB9XG5cbiAgICByZXNvbHZlZFBhdGggPSBwYXRoICsgJy8nICsgcmVzb2x2ZWRQYXRoO1xuICAgIHJlc29sdmVkQWJzb2x1dGUgPSBwYXRoLmNoYXJBdCgwKSA9PT0gJy8nO1xuICB9XG5cbiAgLy8gQXQgdGhpcyBwb2ludCB0aGUgcGF0aCBzaG91bGQgYmUgcmVzb2x2ZWQgdG8gYSBmdWxsIGFic29sdXRlIHBhdGgsIGJ1dFxuICAvLyBoYW5kbGUgcmVsYXRpdmUgcGF0aHMgdG8gYmUgc2FmZSAobWlnaHQgaGFwcGVuIHdoZW4gcHJvY2Vzcy5jd2QoKSBmYWlscylcblxuICAvLyBOb3JtYWxpemUgdGhlIHBhdGhcbiAgcmVzb2x2ZWRQYXRoID0gbm9ybWFsaXplQXJyYXkoZmlsdGVyKHJlc29sdmVkUGF0aC5zcGxpdCgnLycpLCBmdW5jdGlvbihwKSB7XG4gICAgcmV0dXJuICEhcDtcbiAgfSksICFyZXNvbHZlZEFic29sdXRlKS5qb2luKCcvJyk7XG5cbiAgcmV0dXJuICgocmVzb2x2ZWRBYnNvbHV0ZSA/ICcvJyA6ICcnKSArIHJlc29sdmVkUGF0aCkgfHwgJy4nO1xufTtcblxuLy8gcGF0aC5ub3JtYWxpemUocGF0aClcbi8vIHBvc2l4IHZlcnNpb25cbmV4cG9ydCBmdW5jdGlvbiBub3JtYWxpemUocGF0aCkge1xuICB2YXIgaXNQYXRoQWJzb2x1dGUgPSBpc0Fic29sdXRlKHBhdGgpLFxuICAgICAgdHJhaWxpbmdTbGFzaCA9IHN1YnN0cihwYXRoLCAtMSkgPT09ICcvJztcblxuICAvLyBOb3JtYWxpemUgdGhlIHBhdGhcbiAgcGF0aCA9IG5vcm1hbGl6ZUFycmF5KGZpbHRlcihwYXRoLnNwbGl0KCcvJyksIGZ1bmN0aW9uKHApIHtcbiAgICByZXR1cm4gISFwO1xuICB9KSwgIWlzUGF0aEFic29sdXRlKS5qb2luKCcvJyk7XG5cbiAgaWYgKCFwYXRoICYmICFpc1BhdGhBYnNvbHV0ZSkge1xuICAgIHBhdGggPSAnLic7XG4gIH1cbiAgaWYgKHBhdGggJiYgdHJhaWxpbmdTbGFzaCkge1xuICAgIHBhdGggKz0gJy8nO1xuICB9XG5cbiAgcmV0dXJuIChpc1BhdGhBYnNvbHV0ZSA/ICcvJyA6ICcnKSArIHBhdGg7XG59O1xuXG4vLyBwb3NpeCB2ZXJzaW9uXG5leHBvcnQgZnVuY3Rpb24gaXNBYnNvbHV0ZShwYXRoKSB7XG4gIHJldHVybiBwYXRoLmNoYXJBdCgwKSA9PT0gJy8nO1xufVxuXG4vLyBwb3NpeCB2ZXJzaW9uXG5leHBvcnQgZnVuY3Rpb24gam9pbigpIHtcbiAgdmFyIHBhdGhzID0gQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoYXJndW1lbnRzLCAwKTtcbiAgcmV0dXJuIG5vcm1hbGl6ZShmaWx0ZXIocGF0aHMsIGZ1bmN0aW9uKHAsIGluZGV4KSB7XG4gICAgaWYgKHR5cGVvZiBwICE9PSAnc3RyaW5nJykge1xuICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignQXJndW1lbnRzIHRvIHBhdGguam9pbiBtdXN0IGJlIHN0cmluZ3MnKTtcbiAgICB9XG4gICAgcmV0dXJuIHA7XG4gIH0pLmpvaW4oJy8nKSk7XG59XG5cblxuLy8gcGF0aC5yZWxhdGl2ZShmcm9tLCB0bylcbi8vIHBvc2l4IHZlcnNpb25cbmV4cG9ydCBmdW5jdGlvbiByZWxhdGl2ZShmcm9tLCB0bykge1xuICBmcm9tID0gcmVzb2x2ZShmcm9tKS5zdWJzdHIoMSk7XG4gIHRvID0gcmVzb2x2ZSh0bykuc3Vic3RyKDEpO1xuXG4gIGZ1bmN0aW9uIHRyaW0oYXJyKSB7XG4gICAgdmFyIHN0YXJ0ID0gMDtcbiAgICBmb3IgKDsgc3RhcnQgPCBhcnIubGVuZ3RoOyBzdGFydCsrKSB7XG4gICAgICBpZiAoYXJyW3N0YXJ0XSAhPT0gJycpIGJyZWFrO1xuICAgIH1cblxuICAgIHZhciBlbmQgPSBhcnIubGVuZ3RoIC0gMTtcbiAgICBmb3IgKDsgZW5kID49IDA7IGVuZC0tKSB7XG4gICAgICBpZiAoYXJyW2VuZF0gIT09ICcnKSBicmVhaztcbiAgICB9XG5cbiAgICBpZiAoc3RhcnQgPiBlbmQpIHJldHVybiBbXTtcbiAgICByZXR1cm4gYXJyLnNsaWNlKHN0YXJ0LCBlbmQgLSBzdGFydCArIDEpO1xuICB9XG5cbiAgdmFyIGZyb21QYXJ0cyA9IHRyaW0oZnJvbS5zcGxpdCgnLycpKTtcbiAgdmFyIHRvUGFydHMgPSB0cmltKHRvLnNwbGl0KCcvJykpO1xuXG4gIHZhciBsZW5ndGggPSBNYXRoLm1pbihmcm9tUGFydHMubGVuZ3RoLCB0b1BhcnRzLmxlbmd0aCk7XG4gIHZhciBzYW1lUGFydHNMZW5ndGggPSBsZW5ndGg7XG4gIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuZ3RoOyBpKyspIHtcbiAgICBpZiAoZnJvbVBhcnRzW2ldICE9PSB0b1BhcnRzW2ldKSB7XG4gICAgICBzYW1lUGFydHNMZW5ndGggPSBpO1xuICAgICAgYnJlYWs7XG4gICAgfVxuICB9XG5cbiAgdmFyIG91dHB1dFBhcnRzID0gW107XG4gIGZvciAodmFyIGkgPSBzYW1lUGFydHNMZW5ndGg7IGkgPCBmcm9tUGFydHMubGVuZ3RoOyBpKyspIHtcbiAgICBvdXRwdXRQYXJ0cy5wdXNoKCcuLicpO1xuICB9XG5cbiAgb3V0cHV0UGFydHMgPSBvdXRwdXRQYXJ0cy5jb25jYXQodG9QYXJ0cy5zbGljZShzYW1lUGFydHNMZW5ndGgpKTtcblxuICByZXR1cm4gb3V0cHV0UGFydHMuam9pbignLycpO1xufVxuXG5leHBvcnQgdmFyIHNlcCA9ICcvJztcbmV4cG9ydCB2YXIgZGVsaW1pdGVyID0gJzonO1xuXG5leHBvcnQgZnVuY3Rpb24gZGlybmFtZShwYXRoKSB7XG4gIHZhciByZXN1bHQgPSBzcGxpdFBhdGgocGF0aCksXG4gICAgICByb290ID0gcmVzdWx0WzBdLFxuICAgICAgZGlyID0gcmVzdWx0WzFdO1xuXG4gIGlmICghcm9vdCAmJiAhZGlyKSB7XG4gICAgLy8gTm8gZGlybmFtZSB3aGF0c29ldmVyXG4gICAgcmV0dXJuICcuJztcbiAgfVxuXG4gIGlmIChkaXIpIHtcbiAgICAvLyBJdCBoYXMgYSBkaXJuYW1lLCBzdHJpcCB0cmFpbGluZyBzbGFzaFxuICAgIGRpciA9IGRpci5zdWJzdHIoMCwgZGlyLmxlbmd0aCAtIDEpO1xuICB9XG5cbiAgcmV0dXJuIHJvb3QgKyBkaXI7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBiYXNlbmFtZShwYXRoLCBleHQpIHtcbiAgdmFyIGYgPSBzcGxpdFBhdGgocGF0aClbMl07XG4gIC8vIFRPRE86IG1ha2UgdGhpcyBjb21wYXJpc29uIGNhc2UtaW5zZW5zaXRpdmUgb24gd2luZG93cz9cbiAgaWYgKGV4dCAmJiBmLnN1YnN0cigtMSAqIGV4dC5sZW5ndGgpID09PSBleHQpIHtcbiAgICBmID0gZi5zdWJzdHIoMCwgZi5sZW5ndGggLSBleHQubGVuZ3RoKTtcbiAgfVxuICByZXR1cm4gZjtcbn1cblxuXG5leHBvcnQgZnVuY3Rpb24gZXh0bmFtZShwYXRoKSB7XG4gIHJldHVybiBzcGxpdFBhdGgocGF0aClbM107XG59XG5leHBvcnQgZGVmYXVsdCB7XG4gIGV4dG5hbWU6IGV4dG5hbWUsXG4gIGJhc2VuYW1lOiBiYXNlbmFtZSxcbiAgZGlybmFtZTogZGlybmFtZSxcbiAgc2VwOiBzZXAsXG4gIGRlbGltaXRlcjogZGVsaW1pdGVyLFxuICByZWxhdGl2ZTogcmVsYXRpdmUsXG4gIGpvaW46IGpvaW4sXG4gIGlzQWJzb2x1dGU6IGlzQWJzb2x1dGUsXG4gIG5vcm1hbGl6ZTogbm9ybWFsaXplLFxuICByZXNvbHZlOiByZXNvbHZlXG59O1xuZnVuY3Rpb24gZmlsdGVyICh4cywgZikge1xuICAgIGlmICh4cy5maWx0ZXIpIHJldHVybiB4cy5maWx0ZXIoZik7XG4gICAgdmFyIHJlcyA9IFtdO1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgeHMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgaWYgKGYoeHNbaV0sIGksIHhzKSkgcmVzLnB1c2goeHNbaV0pO1xuICAgIH1cbiAgICByZXR1cm4gcmVzO1xufVxuXG4vLyBTdHJpbmcucHJvdG90eXBlLnN1YnN0ciAtIG5lZ2F0aXZlIGluZGV4IGRvbid0IHdvcmsgaW4gSUU4XG52YXIgc3Vic3RyID0gJ2FiJy5zdWJzdHIoLTEpID09PSAnYicgP1xuICAgIGZ1bmN0aW9uIChzdHIsIHN0YXJ0LCBsZW4pIHsgcmV0dXJuIHN0ci5zdWJzdHIoc3RhcnQsIGxlbikgfSA6XG4gICAgZnVuY3Rpb24gKHN0ciwgc3RhcnQsIGxlbikge1xuICAgICAgICBpZiAoc3RhcnQgPCAwKSBzdGFydCA9IHN0ci5sZW5ndGggKyBzdGFydDtcbiAgICAgICAgcmV0dXJuIHN0ci5zdWJzdHIoc3RhcnQsIGxlbik7XG4gICAgfVxuO1xuIiwgIi8qKlxuICogQ3JlZGVudGlhbHMgdXNlZCBmb3IgRlMgb3BzLlxuICogU2ltaWxhciB0byBMaW51eCdzIGNyZWQgc3RydWN0LiBTZWUgaHR0cHM6Ly9naXRodWIuY29tL3RvcnZhbGRzL2xpbnV4L2Jsb2IvbWFzdGVyL2luY2x1ZGUvbGludXgvY3JlZC5oXG4gKi9cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIENyZWQge1xuXHRjb25zdHJ1Y3RvcihwdWJsaWMgdWlkOiBudW1iZXIsIHB1YmxpYyBnaWQ6IG51bWJlciwgcHVibGljIHN1aWQ6IG51bWJlciwgcHVibGljIHNnaWQ6IG51bWJlciwgcHVibGljIGV1aWQ6IG51bWJlciwgcHVibGljIGVnaWQ6IG51bWJlcikge31cblxuXHRwdWJsaWMgc3RhdGljIFJvb3QgPSBuZXcgQ3JlZCgwLCAwLCAwLCAwLCAwLCAwKTtcbn1cbiIsICJpbXBvcnQgKiBhcyBmcyBmcm9tICdmcyc7XG5pbXBvcnQgQ3JlZCBmcm9tICcuL2NyZWQnO1xuaW1wb3J0IHsgQnVmZmVyIH0gZnJvbSAnYnVmZmVyJztcblxuLyoqXG4gKiBJbmRpY2F0ZXMgdGhlIHR5cGUgb2YgdGhlIGdpdmVuIGZpbGUuIEFwcGxpZWQgdG8gJ21vZGUnLlxuICovXG5leHBvcnQgZW51bSBGaWxlVHlwZSB7XG5cdEZJTEUgPSAweDgwMDAsXG5cdERJUkVDVE9SWSA9IDB4NDAwMCxcblx0U1lNTElOSyA9IDB4YTAwMCxcbn1cblxuLyoqXG4gKiBJbmRpY2F0ZXMgdGhlIGRpZmZlcmVudCBwZXJtc3Npb25zIG9uIHRoZSBmaWxlLlxuICovXG5leHBvcnQgZW51bSBGaWxlUGVybSB7XG5cdFJFQUQgPSAwYjEwMCxcblx0V1JJVEUgPSAwYjEwLFxuXHRFWEVDVVRFID0gMGIxLFxufVxuXG4vKipcbiAqIEVtdWxhdGlvbiBvZiBOb2RlJ3MgYGZzLlN0YXRzYCBvYmplY3QuXG4gKlxuICogQXR0cmlidXRlIGRlc2NyaXB0aW9ucyBhcmUgZnJvbSBgbWFuIDIgc3RhdCdcbiAqIEBzZWUgaHR0cDovL25vZGVqcy5vcmcvYXBpL2ZzLmh0bWwjZnNfY2xhc3NfZnNfc3RhdHNcbiAqIEBzZWUgaHR0cDovL21hbjcub3JnL2xpbnV4L21hbi1wYWdlcy9tYW4yL3N0YXQuMi5odG1sXG4gKi9cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFN0YXRzIGltcGxlbWVudHMgZnMuU3RhdHMge1xuXHRwdWJsaWMgc3RhdGljIGZyb21CdWZmZXIoYnVmZmVyOiBCdWZmZXIpOiBTdGF0cyB7XG5cdFx0Y29uc3Qgc2l6ZSA9IGJ1ZmZlci5yZWFkVUludDMyTEUoMCksXG5cdFx0XHRtb2RlID0gYnVmZmVyLnJlYWRVSW50MzJMRSg0KSxcblx0XHRcdGF0aW1lID0gYnVmZmVyLnJlYWREb3VibGVMRSg4KSxcblx0XHRcdG10aW1lID0gYnVmZmVyLnJlYWREb3VibGVMRSgxNiksXG5cdFx0XHRjdGltZSA9IGJ1ZmZlci5yZWFkRG91YmxlTEUoMjQpLFxuXHRcdFx0dWlkID0gYnVmZmVyLnJlYWRVSW50MzJMRSgzMiksXG5cdFx0XHRnaWQgPSBidWZmZXIucmVhZFVJbnQzMkxFKDM2KTtcblxuXHRcdHJldHVybiBuZXcgU3RhdHMobW9kZSAmIDB4ZjAwMCwgc2l6ZSwgbW9kZSAmIDB4ZmZmLCBhdGltZSwgbXRpbWUsIGN0aW1lLCB1aWQsIGdpZCk7XG5cdH1cblxuXHQvKipcblx0ICogQ2xvbmVzIHRoZSBzdGF0cyBvYmplY3QuXG5cdCAqL1xuXHRwdWJsaWMgc3RhdGljIGNsb25lKHM6IFN0YXRzKTogU3RhdHMge1xuXHRcdHJldHVybiBuZXcgU3RhdHMocy5tb2RlICYgMHhmMDAwLCBzLnNpemUsIHMubW9kZSAmIDB4ZmZmLCBzLmF0aW1lTXMsIHMubXRpbWVNcywgcy5jdGltZU1zLCBzLnVpZCwgcy5naWQsIHMuYmlydGh0aW1lTXMpO1xuXHR9XG5cblx0cHVibGljIGJsb2NrczogbnVtYmVyO1xuXHRwdWJsaWMgbW9kZTogbnVtYmVyO1xuXHQvKipcblx0ICogVU5TVVBQT1JURUQgQVRUUklCVVRFU1xuXHQgKiBJIGFzc3VtZSBubyBvbmUgaXMgZ29pbmcgdG8gbmVlZCB0aGVzZSBkZXRhaWxzLCBhbHRob3VnaCB3ZSBjb3VsZCBmYWtlXG5cdCAqIGFwcHJvcHJpYXRlIHZhbHVlcyBpZiBuZWVkIGJlLlxuXHQgKi9cblx0Ly8gSUQgb2YgZGV2aWNlIGNvbnRhaW5pbmcgZmlsZVxuXHRwdWJsaWMgZGV2OiBudW1iZXIgPSAwO1xuXHQvLyBpbm9kZSBudW1iZXJcblx0cHVibGljIGlubzogbnVtYmVyID0gMDtcblx0Ly8gZGV2aWNlIElEIChpZiBzcGVjaWFsIGZpbGUpXG5cdHB1YmxpYyByZGV2OiBudW1iZXIgPSAwO1xuXHQvLyBudW1iZXIgb2YgaGFyZCBsaW5rc1xuXHRwdWJsaWMgbmxpbms6IG51bWJlciA9IDE7XG5cdC8vIGJsb2Nrc2l6ZSBmb3IgZmlsZSBzeXN0ZW0gSS9PXG5cdHB1YmxpYyBibGtzaXplOiBudW1iZXIgPSA0MDk2O1xuXHQvLyB1c2VyIElEIG9mIG93bmVyXG5cdHB1YmxpYyB1aWQ6IG51bWJlciA9IDA7XG5cdC8vIGdyb3VwIElEIG9mIG93bmVyXG5cdHB1YmxpYyBnaWQ6IG51bWJlciA9IDA7XG5cdC8vIFhYWDogU29tZSBmaWxlIHN5c3RlbXMgc3Rhc2ggZGF0YSBvbiBzdGF0cyBvYmplY3RzLlxuXHRwdWJsaWMgZmlsZURhdGE6IEJ1ZmZlciB8IG51bGwgPSBudWxsO1xuXHRwdWJsaWMgYXRpbWVNczogbnVtYmVyO1xuXHRwdWJsaWMgbXRpbWVNczogbnVtYmVyO1xuXHRwdWJsaWMgY3RpbWVNczogbnVtYmVyO1xuXHRwdWJsaWMgYmlydGh0aW1lTXM6IG51bWJlcjtcblx0cHVibGljIHNpemU6IG51bWJlcjtcblxuXHRwdWJsaWMgZ2V0IGF0aW1lKCk6IERhdGUge1xuXHRcdHJldHVybiBuZXcgRGF0ZSh0aGlzLmF0aW1lTXMpO1xuXHR9XG5cblx0cHVibGljIGdldCBtdGltZSgpOiBEYXRlIHtcblx0XHRyZXR1cm4gbmV3IERhdGUodGhpcy5tdGltZU1zKTtcblx0fVxuXG5cdHB1YmxpYyBnZXQgY3RpbWUoKTogRGF0ZSB7XG5cdFx0cmV0dXJuIG5ldyBEYXRlKHRoaXMuY3RpbWVNcyk7XG5cdH1cblxuXHRwdWJsaWMgZ2V0IGJpcnRodGltZSgpOiBEYXRlIHtcblx0XHRyZXR1cm4gbmV3IERhdGUodGhpcy5iaXJ0aHRpbWVNcyk7XG5cdH1cblxuXHQvKipcblx0ICogUHJvdmlkZXMgaW5mb3JtYXRpb24gYWJvdXQgYSBwYXJ0aWN1bGFyIGVudHJ5IGluIHRoZSBmaWxlIHN5c3RlbS5cblx0ICogQHBhcmFtIGl0ZW1UeXBlIFR5cGUgb2YgdGhlIGl0ZW0gKEZJTEUsIERJUkVDVE9SWSwgU1lNTElOSywgb3IgU09DS0VUKVxuXHQgKiBAcGFyYW0gc2l6ZSBTaXplIG9mIHRoZSBpdGVtIGluIGJ5dGVzLiBGb3IgZGlyZWN0b3JpZXMvc3ltbGlua3MsXG5cdCAqICAgdGhpcyBpcyBub3JtYWxseSB0aGUgc2l6ZSBvZiB0aGUgc3RydWN0IHRoYXQgcmVwcmVzZW50cyB0aGUgaXRlbS5cblx0ICogQHBhcmFtIG1vZGUgVW5peC1zdHlsZSBmaWxlIG1vZGUgKGUuZy4gMG82NDQpXG5cdCAqIEBwYXJhbSBhdGltZU1zIHRpbWUgb2YgbGFzdCBhY2Nlc3MsIGluIG1pbGxpc2Vjb25kcyBzaW5jZSBlcG9jaFxuXHQgKiBAcGFyYW0gbXRpbWVNcyB0aW1lIG9mIGxhc3QgbW9kaWZpY2F0aW9uLCBpbiBtaWxsaXNlY29uZHMgc2luY2UgZXBvY2hcblx0ICogQHBhcmFtIGN0aW1lTXMgdGltZSBvZiBsYXN0IHRpbWUgZmlsZSBzdGF0dXMgd2FzIGNoYW5nZWQsIGluIG1pbGxpc2Vjb25kcyBzaW5jZSBlcG9jaFxuXHQgKiBAcGFyYW0gdWlkIHRoZSBpZCBvZiB0aGUgdXNlciB0aGF0IG93bnMgdGhlIGZpbGVcblx0ICogQHBhcmFtIGdpZCB0aGUgaWQgb2YgdGhlIGdyb3VwIHRoYXQgb3ducyB0aGUgZmlsZVxuXHQgKiBAcGFyYW0gYmlydGh0aW1lTXMgdGltZSBvZiBmaWxlIGNyZWF0aW9uLCBpbiBtaWxsaXNlY29uZHMgc2luY2UgZXBvY2hcblx0ICovXG5cdGNvbnN0cnVjdG9yKGl0ZW1UeXBlOiBGaWxlVHlwZSwgc2l6ZTogbnVtYmVyLCBtb2RlPzogbnVtYmVyLCBhdGltZU1zPzogbnVtYmVyLCBtdGltZU1zPzogbnVtYmVyLCBjdGltZU1zPzogbnVtYmVyLCB1aWQ/OiBudW1iZXIsIGdpZD86IG51bWJlciwgYmlydGh0aW1lTXM/OiBudW1iZXIpIHtcblx0XHR0aGlzLnNpemUgPSBzaXplO1xuXHRcdGxldCBjdXJyZW50VGltZSA9IDA7XG5cdFx0aWYgKHR5cGVvZiBhdGltZU1zICE9PSAnbnVtYmVyJykge1xuXHRcdFx0Y3VycmVudFRpbWUgPSBEYXRlLm5vdygpO1xuXHRcdFx0YXRpbWVNcyA9IGN1cnJlbnRUaW1lO1xuXHRcdH1cblx0XHRpZiAodHlwZW9mIG10aW1lTXMgIT09ICdudW1iZXInKSB7XG5cdFx0XHRpZiAoIWN1cnJlbnRUaW1lKSB7XG5cdFx0XHRcdGN1cnJlbnRUaW1lID0gRGF0ZS5ub3coKTtcblx0XHRcdH1cblx0XHRcdG10aW1lTXMgPSBjdXJyZW50VGltZTtcblx0XHR9XG5cdFx0aWYgKHR5cGVvZiBjdGltZU1zICE9PSAnbnVtYmVyJykge1xuXHRcdFx0aWYgKCFjdXJyZW50VGltZSkge1xuXHRcdFx0XHRjdXJyZW50VGltZSA9IERhdGUubm93KCk7XG5cdFx0XHR9XG5cdFx0XHRjdGltZU1zID0gY3VycmVudFRpbWU7XG5cdFx0fVxuXHRcdGlmICh0eXBlb2YgYmlydGh0aW1lTXMgIT09ICdudW1iZXInKSB7XG5cdFx0XHRpZiAoIWN1cnJlbnRUaW1lKSB7XG5cdFx0XHRcdGN1cnJlbnRUaW1lID0gRGF0ZS5ub3coKTtcblx0XHRcdH1cblx0XHRcdGJpcnRodGltZU1zID0gY3VycmVudFRpbWU7XG5cdFx0fVxuXHRcdGlmICh0eXBlb2YgdWlkICE9PSAnbnVtYmVyJykge1xuXHRcdFx0dWlkID0gMDtcblx0XHR9XG5cdFx0aWYgKHR5cGVvZiBnaWQgIT09ICdudW1iZXInKSB7XG5cdFx0XHRnaWQgPSAwO1xuXHRcdH1cblx0XHR0aGlzLmF0aW1lTXMgPSBhdGltZU1zO1xuXHRcdHRoaXMuY3RpbWVNcyA9IGN0aW1lTXM7XG5cdFx0dGhpcy5tdGltZU1zID0gbXRpbWVNcztcblx0XHR0aGlzLmJpcnRodGltZU1zID0gYmlydGh0aW1lTXM7XG5cblx0XHRpZiAoIW1vZGUpIHtcblx0XHRcdHN3aXRjaCAoaXRlbVR5cGUpIHtcblx0XHRcdFx0Y2FzZSBGaWxlVHlwZS5GSUxFOlxuXHRcdFx0XHRcdHRoaXMubW9kZSA9IDB4MWE0O1xuXHRcdFx0XHRcdGJyZWFrO1xuXHRcdFx0XHRjYXNlIEZpbGVUeXBlLkRJUkVDVE9SWTpcblx0XHRcdFx0ZGVmYXVsdDpcblx0XHRcdFx0XHR0aGlzLm1vZGUgPSAweDFmZjtcblx0XHRcdH1cblx0XHR9IGVsc2Uge1xuXHRcdFx0dGhpcy5tb2RlID0gbW9kZTtcblx0XHR9XG5cdFx0Ly8gbnVtYmVyIG9mIDUxMkIgYmxvY2tzIGFsbG9jYXRlZFxuXHRcdHRoaXMuYmxvY2tzID0gTWF0aC5jZWlsKHNpemUgLyA1MTIpO1xuXHRcdC8vIENoZWNrIGlmIG1vZGUgYWxzbyBpbmNsdWRlcyB0b3AtbW9zdCBiaXRzLCB3aGljaCBpbmRpY2F0ZSB0aGUgZmlsZSdzXG5cdFx0Ly8gdHlwZS5cblx0XHRpZiAodGhpcy5tb2RlIDwgMHgxMDAwKSB7XG5cdFx0XHR0aGlzLm1vZGUgfD0gaXRlbVR5cGU7XG5cdFx0fVxuXHR9XG5cblx0cHVibGljIHRvQnVmZmVyKCk6IEJ1ZmZlciB7XG5cdFx0Y29uc3QgYnVmZmVyID0gQnVmZmVyLmFsbG9jKDMyKTtcblx0XHRidWZmZXIud3JpdGVVSW50MzJMRSh0aGlzLnNpemUsIDApO1xuXHRcdGJ1ZmZlci53cml0ZVVJbnQzMkxFKHRoaXMubW9kZSwgNCk7XG5cdFx0YnVmZmVyLndyaXRlRG91YmxlTEUodGhpcy5hdGltZS5nZXRUaW1lKCksIDgpO1xuXHRcdGJ1ZmZlci53cml0ZURvdWJsZUxFKHRoaXMubXRpbWUuZ2V0VGltZSgpLCAxNik7XG5cdFx0YnVmZmVyLndyaXRlRG91YmxlTEUodGhpcy5jdGltZS5nZXRUaW1lKCksIDI0KTtcblx0XHRidWZmZXIud3JpdGVVSW50MzJMRSh0aGlzLnVpZCwgMzIpO1xuXHRcdGJ1ZmZlci53cml0ZVVJbnQzMkxFKHRoaXMuZ2lkLCAzNik7XG5cdFx0cmV0dXJuIGJ1ZmZlcjtcblx0fVxuXG5cdC8qKlxuXHQgKiBAcmV0dXJuIFtCb29sZWFuXSBUcnVlIGlmIHRoaXMgaXRlbSBpcyBhIGZpbGUuXG5cdCAqL1xuXHRwdWJsaWMgaXNGaWxlKCk6IGJvb2xlYW4ge1xuXHRcdHJldHVybiAodGhpcy5tb2RlICYgMHhmMDAwKSA9PT0gRmlsZVR5cGUuRklMRTtcblx0fVxuXG5cdC8qKlxuXHQgKiBAcmV0dXJuIFtCb29sZWFuXSBUcnVlIGlmIHRoaXMgaXRlbSBpcyBhIGRpcmVjdG9yeS5cblx0ICovXG5cdHB1YmxpYyBpc0RpcmVjdG9yeSgpOiBib29sZWFuIHtcblx0XHRyZXR1cm4gKHRoaXMubW9kZSAmIDB4ZjAwMCkgPT09IEZpbGVUeXBlLkRJUkVDVE9SWTtcblx0fVxuXG5cdC8qKlxuXHQgKiBAcmV0dXJuIFtCb29sZWFuXSBUcnVlIGlmIHRoaXMgaXRlbSBpcyBhIHN5bWJvbGljIGxpbmsgKG9ubHkgdmFsaWQgdGhyb3VnaCBsc3RhdClcblx0ICovXG5cdHB1YmxpYyBpc1N5bWJvbGljTGluaygpOiBib29sZWFuIHtcblx0XHRyZXR1cm4gKHRoaXMubW9kZSAmIDB4ZjAwMCkgPT09IEZpbGVUeXBlLlNZTUxJTks7XG5cdH1cblxuXHQvKipcblx0ICogQ2hlY2tzIGlmIGEgZ2l2ZW4gdXNlci9ncm91cCBoYXMgYWNjZXNzIHRvIHRoaXMgaXRlbVxuXHQgKiBAcGFyYW0gbW9kZSBUaGUgcmVxdWVzdCBhY2Nlc3MgYXMgNCBiaXRzICh1bnVzZWQsIHJlYWQsIHdyaXRlLCBleGVjdXRlKVxuXHQgKiBAcGFyYW0gdWlkIFRoZSByZXF1ZXN0aW5nIFVJRFxuXHQgKiBAcGFyYW0gZ2lkIFRoZSByZXF1ZXN0aW5nIEdJRFxuXHQgKiBAcmV0dXJucyBbQm9vbGVhbl0gVHJ1ZSBpZiB0aGUgcmVxdWVzdCBoYXMgYWNjZXNzLCBmYWxzZSBpZiB0aGUgcmVxdWVzdCBkb2VzIG5vdFxuXHQgKi9cblx0cHVibGljIGhhc0FjY2Vzcyhtb2RlOiBudW1iZXIsIGNyZWQ6IENyZWQpOiBib29sZWFuIHtcblx0XHRpZiAoY3JlZC5ldWlkID09PSAwIHx8IGNyZWQuZWdpZCA9PT0gMCkge1xuXHRcdFx0Ly9SdW5uaW5nIGFzIHJvb3Rcblx0XHRcdHJldHVybiB0cnVlO1xuXHRcdH1cblx0XHRjb25zdCBwZXJtcyA9IHRoaXMubW9kZSAmIDB4ZmZmO1xuXHRcdGxldCB1TW9kZSA9IDB4Zixcblx0XHRcdGdNb2RlID0gMHhmLFxuXHRcdFx0d01vZGUgPSAweGY7XG5cblx0XHRpZiAoY3JlZC5ldWlkID09IHRoaXMudWlkKSB7XG5cdFx0XHRjb25zdCB1UGVybXMgPSAoMHhmMDAgJiBwZXJtcykgPj4gODtcblx0XHRcdHVNb2RlID0gKG1vZGUgXiB1UGVybXMpICYgbW9kZTtcblx0XHR9XG5cdFx0aWYgKGNyZWQuZWdpZCA9PSB0aGlzLmdpZCkge1xuXHRcdFx0Y29uc3QgZ1Blcm1zID0gKDB4ZjAgJiBwZXJtcykgPj4gNDtcblx0XHRcdGdNb2RlID0gKG1vZGUgXiBnUGVybXMpICYgbW9kZTtcblx0XHR9XG5cdFx0Y29uc3Qgd1Blcm1zID0gMHhmICYgcGVybXM7XG5cdFx0d01vZGUgPSAobW9kZSBeIHdQZXJtcykgJiBtb2RlO1xuXHRcdC8qXG4gICAgICAgIFJlc3VsdCA9IDBiMHh4eCAocmVhZCwgd3JpdGUsIGV4ZWN1dGUpXG4gICAgICAgIElmIGFueSBiaXRzIGFyZSBzZXQgdGhhdCBtZWFucyB0aGUgcmVxdWVzdCBkb2VzIG5vdCBoYXZlIHRoYXQgcGVybWlzc2lvbi5cbiAgICAqL1xuXHRcdGNvbnN0IHJlc3VsdCA9IHVNb2RlICYgZ01vZGUgJiB3TW9kZTtcblx0XHRyZXR1cm4gIXJlc3VsdDtcblx0fVxuXG5cdC8qKlxuXHQgKiBDb252ZXJ0IHRoZSBjdXJyZW50IHN0YXRzIG9iamVjdCBpbnRvIGEgY3JlZCBvYmplY3Rcblx0ICovXG5cdHB1YmxpYyBnZXRDcmVkKHVpZDogbnVtYmVyID0gdGhpcy51aWQsIGdpZDogbnVtYmVyID0gdGhpcy5naWQpOiBDcmVkIHtcblx0XHRyZXR1cm4gbmV3IENyZWQodWlkLCBnaWQsIHRoaXMudWlkLCB0aGlzLmdpZCwgdWlkLCBnaWQpO1xuXHR9XG5cblx0LyoqXG5cdCAqIENoYW5nZSB0aGUgbW9kZSBvZiB0aGUgZmlsZS4gV2UgdXNlIHRoaXMgaGVscGVyIGZ1bmN0aW9uIHRvIHByZXZlbnQgbWVzc2luZ1xuXHQgKiB1cCB0aGUgdHlwZSBvZiB0aGUgZmlsZSwgd2hpY2ggaXMgZW5jb2RlZCBpbiBtb2RlLlxuXHQgKi9cblx0cHVibGljIGNobW9kKG1vZGU6IG51bWJlcik6IHZvaWQge1xuXHRcdHRoaXMubW9kZSA9ICh0aGlzLm1vZGUgJiAweGYwMDApIHwgbW9kZTtcblx0fVxuXG5cdC8qKlxuXHQgKiBDaGFuZ2UgdGhlIG93bmVyIHVzZXIvZ3JvdXAgb2YgdGhlIGZpbGUuXG5cdCAqIFRoaXMgZnVuY3Rpb24gbWFrZXMgc3VyZSBpdCBpcyBhIHZhbGlkIFVJRC9HSUQgKHRoYXQgaXMsIGEgMzIgdW5zaWduZWQgaW50KVxuXHQgKi9cblx0cHVibGljIGNob3duKHVpZDogbnVtYmVyLCBnaWQ6IG51bWJlcik6IHZvaWQge1xuXHRcdGlmICghaXNOYU4oK3VpZCkgJiYgMCA8PSArdWlkICYmICt1aWQgPCAyICoqIDMyKSB7XG5cdFx0XHR0aGlzLnVpZCA9IHVpZDtcblx0XHR9XG5cdFx0aWYgKCFpc05hTigrZ2lkKSAmJiAwIDw9ICtnaWQgJiYgK2dpZCA8IDIgKiogMzIpIHtcblx0XHRcdHRoaXMuZ2lkID0gZ2lkO1xuXHRcdH1cblx0fVxuXG5cdC8vIFdlIGRvbid0IHN1cHBvcnQgdGhlIGZvbGxvd2luZyB0eXBlcyBvZiBmaWxlcy5cblxuXHRwdWJsaWMgaXNTb2NrZXQoKTogYm9vbGVhbiB7XG5cdFx0cmV0dXJuIGZhbHNlO1xuXHR9XG5cblx0cHVibGljIGlzQmxvY2tEZXZpY2UoKTogYm9vbGVhbiB7XG5cdFx0cmV0dXJuIGZhbHNlO1xuXHR9XG5cblx0cHVibGljIGlzQ2hhcmFjdGVyRGV2aWNlKCk6IGJvb2xlYW4ge1xuXHRcdHJldHVybiBmYWxzZTtcblx0fVxuXG5cdHB1YmxpYyBpc0ZJRk8oKTogYm9vbGVhbiB7XG5cdFx0cmV0dXJuIGZhbHNlO1xuXHR9XG59XG4iLCAiLyoqXG4gKiBAaGlkZGVuXG4gKi9cbmxldCBiZnNTZXRJbW1lZGlhdGU6IChjYjogKCkgPT4gYW55KSA9PiBhbnk7XG5pZiAodHlwZW9mIHNldEltbWVkaWF0ZSAhPT0gJ3VuZGVmaW5lZCcpIHtcblx0YmZzU2V0SW1tZWRpYXRlID0gc2V0SW1tZWRpYXRlO1xufSBlbHNlIHtcblx0Y29uc3QgZ1Njb3BlID0gZ2xvYmFsVGhpcztcblx0Y29uc3QgdGltZW91dHM6ICgoKSA9PiB2b2lkKVtdID0gW107XG5cdGNvbnN0IG1lc3NhZ2VOYW1lID0gJ3plcm8tdGltZW91dC1tZXNzYWdlJztcblx0Y29uc3QgY2FuVXNlUG9zdE1lc3NhZ2UgPSBmdW5jdGlvbiAoKSB7XG5cdFx0aWYgKHR5cGVvZiBnU2NvcGUuaW1wb3J0U2NyaXB0cyAhPT0gJ3VuZGVmaW5lZCcgfHwgIWdTY29wZS5wb3N0TWVzc2FnZSkge1xuXHRcdFx0cmV0dXJuIGZhbHNlO1xuXHRcdH1cblx0XHRsZXQgcG9zdE1lc3NhZ2VJc0FzeW5jID0gdHJ1ZTtcblx0XHRjb25zdCBvbGRPbk1lc3NhZ2UgPSBnU2NvcGUub25tZXNzYWdlO1xuXHRcdGdTY29wZS5vbm1lc3NhZ2UgPSBmdW5jdGlvbiAoKSB7XG5cdFx0XHRwb3N0TWVzc2FnZUlzQXN5bmMgPSBmYWxzZTtcblx0XHR9O1xuXHRcdGdTY29wZS5wb3N0TWVzc2FnZSgnJywgJyonKTtcblx0XHRnU2NvcGUub25tZXNzYWdlID0gb2xkT25NZXNzYWdlO1xuXHRcdHJldHVybiBwb3N0TWVzc2FnZUlzQXN5bmM7XG5cdH07XG5cdGlmIChjYW5Vc2VQb3N0TWVzc2FnZSgpKSB7XG5cdFx0YmZzU2V0SW1tZWRpYXRlID0gZnVuY3Rpb24gKGZuOiAoKSA9PiB2b2lkKSB7XG5cdFx0XHR0aW1lb3V0cy5wdXNoKGZuKTtcblx0XHRcdGdTY29wZS5wb3N0TWVzc2FnZShtZXNzYWdlTmFtZSwgJyonKTtcblx0XHR9O1xuXHRcdGNvbnN0IGhhbmRsZU1lc3NhZ2UgPSBmdW5jdGlvbiAoZXZlbnQ6IE1lc3NhZ2VFdmVudCkge1xuXHRcdFx0aWYgKGV2ZW50LnNvdXJjZSA9PT0gc2VsZiAmJiBldmVudC5kYXRhID09PSBtZXNzYWdlTmFtZSkge1xuXHRcdFx0XHRpZiAoZXZlbnQuc3RvcFByb3BhZ2F0aW9uKSB7XG5cdFx0XHRcdFx0ZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7XG5cdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0ZXZlbnQuY2FuY2VsQnViYmxlID0gdHJ1ZTtcblx0XHRcdFx0fVxuXHRcdFx0XHRpZiAodGltZW91dHMubGVuZ3RoID4gMCkge1xuXHRcdFx0XHRcdGNvbnN0IGZuID0gdGltZW91dHMuc2hpZnQoKSE7XG5cdFx0XHRcdFx0cmV0dXJuIGZuKCk7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9O1xuXHRcdGlmIChnU2NvcGUuYWRkRXZlbnRMaXN0ZW5lcikge1xuXHRcdFx0Z1Njb3BlLmFkZEV2ZW50TGlzdGVuZXIoJ21lc3NhZ2UnLCBoYW5kbGVNZXNzYWdlLCB0cnVlKTtcblx0XHR9IGVsc2Uge1xuXHRcdFx0Z1Njb3BlLmF0dGFjaEV2ZW50KCdvbm1lc3NhZ2UnLCBoYW5kbGVNZXNzYWdlKTtcblx0XHR9XG5cdH0gZWxzZSBpZiAoZ1Njb3BlLk1lc3NhZ2VDaGFubmVsKSB7XG5cdFx0Ly8gV2ViV29ya2VyIE1lc3NhZ2VDaGFubmVsXG5cdFx0Y29uc3QgY2hhbm5lbCA9IG5ldyBnU2NvcGUuTWVzc2FnZUNoYW5uZWwoKTtcblx0XHRjaGFubmVsLnBvcnQxLm9ubWVzc2FnZSA9IChldmVudDogYW55KSA9PiB7XG5cdFx0XHRpZiAodGltZW91dHMubGVuZ3RoID4gMCkge1xuXHRcdFx0XHRyZXR1cm4gdGltZW91dHMuc2hpZnQoKSEoKTtcblx0XHRcdH1cblx0XHR9O1xuXHRcdGJmc1NldEltbWVkaWF0ZSA9IChmbjogKCkgPT4gdm9pZCkgPT4ge1xuXHRcdFx0dGltZW91dHMucHVzaChmbik7XG5cdFx0XHRjaGFubmVsLnBvcnQyLnBvc3RNZXNzYWdlKCcnKTtcblx0XHR9O1xuXHR9IGVsc2Uge1xuXHRcdGJmc1NldEltbWVkaWF0ZSA9IGZ1bmN0aW9uIChmbjogKCkgPT4gdm9pZCkge1xuXHRcdFx0cmV0dXJuIHNldFRpbWVvdXQoZm4sIDApO1xuXHRcdH07XG5cdH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgYmZzU2V0SW1tZWRpYXRlO1xuIiwgImltcG9ydCB7IEZpbGUgfSBmcm9tICcuL2ZpbGUnO1xuaW1wb3J0IHsgQXBpRXJyb3IsIEVycm9yQ29kZSB9IGZyb20gJy4vYXBpX2Vycm9yJztcbmltcG9ydCB7IEZpbGVTeXN0ZW0sIEJGU09uZUFyZ0NhbGxiYWNrLCBCRlNDYWxsYmFjaywgQkZTVGhyZWVBcmdDYWxsYmFjayB9IGZyb20gJy4vZmlsZV9zeXN0ZW0nO1xuaW1wb3J0IHsgRmlsZUZsYWcgfSBmcm9tICcuL2ZpbGVfZmxhZyc7XG5pbXBvcnQgKiBhcyBwYXRoIGZyb20gJ3BhdGgnO1xuaW1wb3J0IHsgZGVmYXVsdCBhcyBTdGF0cywgRmlsZVBlcm0gfSBmcm9tICcuL3N0YXRzJztcbmltcG9ydCBzZXRJbW1lZGlhdGUgZnJvbSAnLi4vZ2VuZXJpYy9zZXRJbW1lZGlhdGUnO1xuaW1wb3J0IHsgQnVmZmVyIH0gZnJvbSAnYnVmZmVyJztcbmltcG9ydCBDcmVkIGZyb20gJy4vY3JlZCc7XG5cbi8vIFR5cGluZyBpbmZvIG9ubHkuXG5pbXBvcnQgdHlwZSAqIGFzIF9mcyBmcm9tICdmcyc7XG5cbi8qKiBVc2VkIGZvciB1bml0IHRlc3RpbmcuIERlZmF1bHRzIHRvIGEgTk9QLiAqL1xubGV0IHdyYXBDYkhvb2sgPSBmdW5jdGlvbiA8VD4oY2I6IFQsIG51bUFyZ3M6IG51bWJlcik6IFQge1xuXHRyZXR1cm4gY2I7XG59O1xuXG4vKipcbiAqIFdyYXBzIGEgY2FsbGJhY2sgZnVuY3Rpb24sIGVuc3VyaW5nIGl0IGlzIGludm9rZWQgdGhyb3VnaCBzZXRJbW1lZGlhdGUuXG4gKiBAaGlkZGVuXG4gKi9cbmZ1bmN0aW9uIHdyYXBDYjxUIGV4dGVuZHMgRnVuY3Rpb24+KGNiOiBULCBudW1BcmdzOiBudW1iZXIpOiBUIHtcblx0aWYgKHR5cGVvZiBjYiAhPT0gJ2Z1bmN0aW9uJykge1xuXHRcdHRocm93IG5ldyBFcnJvcignQ2FsbGJhY2sgbXVzdCBiZSBhIGZ1bmN0aW9uLicpO1xuXHR9XG5cblx0Y29uc3QgaG9va2VkQ2IgPSB3cmFwQ2JIb29rKGNiLCBudW1BcmdzKTtcblxuXHQvLyBXZSBjb3VsZCB1c2UgYGFyZ3VtZW50c2AsIGJ1dCBGdW5jdGlvbi5jYWxsL2FwcGx5IGlzIGV4cGVuc2l2ZS4gQW5kIHdlIG9ubHlcblx0Ly8gbmVlZCB0byBoYW5kbGUgMS0zIGFyZ3VtZW50c1xuXHRzd2l0Y2ggKG51bUFyZ3MpIHtcblx0XHRjYXNlIDE6XG5cdFx0XHRyZXR1cm4gPGFueT5mdW5jdGlvbiAoYXJnMTogYW55KSB7XG5cdFx0XHRcdHNldEltbWVkaWF0ZShmdW5jdGlvbiAoKSB7XG5cdFx0XHRcdFx0cmV0dXJuIGhvb2tlZENiKGFyZzEpO1xuXHRcdFx0XHR9KTtcblx0XHRcdH07XG5cdFx0Y2FzZSAyOlxuXHRcdFx0cmV0dXJuIDxhbnk+ZnVuY3Rpb24gKGFyZzE6IGFueSwgYXJnMjogYW55KSB7XG5cdFx0XHRcdHNldEltbWVkaWF0ZShmdW5jdGlvbiAoKSB7XG5cdFx0XHRcdFx0cmV0dXJuIGhvb2tlZENiKGFyZzEsIGFyZzIpO1xuXHRcdFx0XHR9KTtcblx0XHRcdH07XG5cdFx0Y2FzZSAzOlxuXHRcdFx0cmV0dXJuIDxhbnk+ZnVuY3Rpb24gKGFyZzE6IGFueSwgYXJnMjogYW55LCBhcmczOiBhbnkpIHtcblx0XHRcdFx0c2V0SW1tZWRpYXRlKGZ1bmN0aW9uICgpIHtcblx0XHRcdFx0XHRyZXR1cm4gaG9va2VkQ2IoYXJnMSwgYXJnMiwgYXJnMyk7XG5cdFx0XHRcdH0pO1xuXHRcdFx0fTtcblx0XHRkZWZhdWx0OlxuXHRcdFx0dGhyb3cgbmV3IEVycm9yKCdJbnZhbGlkIGludm9jYXRpb24gb2Ygd3JhcENiLicpO1xuXHR9XG59XG5cbi8qKlxuICogQGhpZGRlblxuICovXG5mdW5jdGlvbiBhc3NlcnRSb290KGZzPzogRmlsZVN5c3RlbSB8IG51bGwpOiBGaWxlU3lzdGVtIHtcblx0aWYgKGZzKSB7XG5cdFx0cmV0dXJuIGZzO1xuXHR9XG5cdHRocm93IG5ldyBBcGlFcnJvcihFcnJvckNvZGUuRUlPLCBgSW5pdGlhbGl6ZSBCcm93c2VyRlMgd2l0aCBhIGZpbGUgc3lzdGVtIHVzaW5nIEJyb3dzZXJGUy5pbml0aWFsaXplKGZpbGVzeXN0ZW0pYCk7XG59XG5cbi8qKlxuICogQGhpZGRlblxuICovXG5mdW5jdGlvbiBub3JtYWxpemVNb2RlKG1vZGU6IG51bWJlciB8IHN0cmluZyB8IG51bGwgfCB1bmRlZmluZWQsIGRlZjogbnVtYmVyKTogbnVtYmVyIHtcblx0c3dpdGNoICh0eXBlb2YgbW9kZSkge1xuXHRcdGNhc2UgJ251bWJlcic6XG5cdFx0XHQvLyAocGF0aCwgZmxhZywgbW9kZSwgY2I/KVxuXHRcdFx0cmV0dXJuIDxudW1iZXI+bW9kZTtcblx0XHRjYXNlICdzdHJpbmcnOlxuXHRcdFx0Ly8gKHBhdGgsIGZsYWcsIG1vZGVTdHJpbmcsIGNiPylcblx0XHRcdGNvbnN0IHRydWVNb2RlID0gcGFyc2VJbnQoPHN0cmluZz5tb2RlLCA4KTtcblx0XHRcdGlmICghaXNOYU4odHJ1ZU1vZGUpKSB7XG5cdFx0XHRcdHJldHVybiB0cnVlTW9kZTtcblx0XHRcdH1cblx0XHRcdC8vIEludmFsaWQgc3RyaW5nLlxuXHRcdFx0cmV0dXJuIGRlZjtcblx0XHRkZWZhdWx0OlxuXHRcdFx0cmV0dXJuIGRlZjtcblx0fVxufVxuXG4vKipcbiAqIEBoaWRkZW5cbiAqL1xuZnVuY3Rpb24gbm9ybWFsaXplVGltZSh0aW1lOiBudW1iZXIgfCBEYXRlKTogRGF0ZSB7XG5cdGlmICh0aW1lIGluc3RhbmNlb2YgRGF0ZSkge1xuXHRcdHJldHVybiB0aW1lO1xuXHR9IGVsc2UgaWYgKHR5cGVvZiB0aW1lID09PSAnbnVtYmVyJykge1xuXHRcdHJldHVybiBuZXcgRGF0ZSh0aW1lICogMTAwMCk7XG5cdH0gZWxzZSB7XG5cdFx0dGhyb3cgbmV3IEFwaUVycm9yKEVycm9yQ29kZS5FSU5WQUwsIGBJbnZhbGlkIHRpbWUuYCk7XG5cdH1cbn1cblxuLyoqXG4gKiBAaGlkZGVuXG4gKi9cbmZ1bmN0aW9uIG5vcm1hbGl6ZVBhdGgocDogc3RyaW5nKTogc3RyaW5nIHtcblx0Ly8gTm9kZSBkb2Vzbid0IGFsbG93IG51bGwgY2hhcmFjdGVycyBpbiBwYXRocy5cblx0aWYgKHAuaW5kZXhPZignXFx1MDAwMCcpID49IDApIHtcblx0XHR0aHJvdyBuZXcgQXBpRXJyb3IoRXJyb3JDb2RlLkVJTlZBTCwgJ1BhdGggbXVzdCBiZSBhIHN0cmluZyB3aXRob3V0IG51bGwgYnl0ZXMuJyk7XG5cdH0gZWxzZSBpZiAocCA9PT0gJycpIHtcblx0XHR0aHJvdyBuZXcgQXBpRXJyb3IoRXJyb3JDb2RlLkVJTlZBTCwgJ1BhdGggbXVzdCBub3QgYmUgZW1wdHkuJyk7XG5cdH1cblx0cmV0dXJuIHBhdGgucmVzb2x2ZShwKTtcbn1cblxuLyoqXG4gKiBAaGlkZGVuXG4gKi9cbmZ1bmN0aW9uIG5vcm1hbGl6ZU9wdGlvbnMob3B0aW9uczogYW55LCBkZWZFbmM6IHN0cmluZyB8IG51bGwsIGRlZkZsYWc6IHN0cmluZywgZGVmTW9kZTogbnVtYmVyIHwgbnVsbCk6IHsgZW5jb2Rpbmc6IHN0cmluZzsgZmxhZzogc3RyaW5nOyBtb2RlOiBudW1iZXIgfSB7XG5cdC8vIHR5cGVvZiBudWxsID09PSAnb2JqZWN0JyBzbyBzcGVjaWFsLWNhc2UgaGFuZGluZyBpcyBuZWVkZWQuXG5cdHN3aXRjaCAob3B0aW9ucyA9PT0gbnVsbCA/ICdudWxsJyA6IHR5cGVvZiBvcHRpb25zKSB7XG5cdFx0Y2FzZSAnb2JqZWN0Jzpcblx0XHRcdHJldHVybiB7XG5cdFx0XHRcdGVuY29kaW5nOiB0eXBlb2Ygb3B0aW9uc1snZW5jb2RpbmcnXSAhPT0gJ3VuZGVmaW5lZCcgPyBvcHRpb25zWydlbmNvZGluZyddIDogZGVmRW5jLFxuXHRcdFx0XHRmbGFnOiB0eXBlb2Ygb3B0aW9uc1snZmxhZyddICE9PSAndW5kZWZpbmVkJyA/IG9wdGlvbnNbJ2ZsYWcnXSA6IGRlZkZsYWcsXG5cdFx0XHRcdG1vZGU6IG5vcm1hbGl6ZU1vZGUob3B0aW9uc1snbW9kZSddLCBkZWZNb2RlISksXG5cdFx0XHR9O1xuXHRcdGNhc2UgJ3N0cmluZyc6XG5cdFx0XHRyZXR1cm4ge1xuXHRcdFx0XHRlbmNvZGluZzogb3B0aW9ucyxcblx0XHRcdFx0ZmxhZzogZGVmRmxhZyxcblx0XHRcdFx0bW9kZTogZGVmTW9kZSEsXG5cdFx0XHR9O1xuXHRcdGNhc2UgJ251bGwnOlxuXHRcdGNhc2UgJ3VuZGVmaW5lZCc6XG5cdFx0Y2FzZSAnZnVuY3Rpb24nOlxuXHRcdFx0cmV0dXJuIHtcblx0XHRcdFx0ZW5jb2Rpbmc6IGRlZkVuYyEsXG5cdFx0XHRcdGZsYWc6IGRlZkZsYWcsXG5cdFx0XHRcdG1vZGU6IGRlZk1vZGUhLFxuXHRcdFx0fTtcblx0XHRkZWZhdWx0OlxuXHRcdFx0dGhyb3cgbmV3IFR5cGVFcnJvcihgXCJvcHRpb25zXCIgbXVzdCBiZSBhIHN0cmluZyBvciBhbiBvYmplY3QsIGdvdCAke3R5cGVvZiBvcHRpb25zfSBpbnN0ZWFkLmApO1xuXHR9XG59XG5cbi8qKlxuICogVGhlIGRlZmF1bHQgY2FsbGJhY2sgaXMgYSBOT1AuXG4gKiBAaGlkZGVuXG4gKiBAcHJpdmF0ZVxuICovXG5mdW5jdGlvbiBub3BDYigpIHtcblx0Ly8gTk9QLlxufVxuXG4vKipcbiAqIFRoZSBub2RlIGZyb250ZW5kIHRvIGFsbCBmaWxlc3lzdGVtcy5cbiAqIFRoaXMgbGF5ZXIgaGFuZGxlczpcbiAqXG4gKiAqIFNhbml0eSBjaGVja2luZyBpbnB1dHMuXG4gKiAqIE5vcm1hbGl6aW5nIHBhdGhzLlxuICogKiBSZXNldHRpbmcgc3RhY2sgZGVwdGggZm9yIGFzeW5jaHJvbm91cyBvcGVyYXRpb25zIHdoaWNoIG1heSBub3QgZ28gdGhyb3VnaFxuICogICB0aGUgYnJvd3NlciBieSB3cmFwcGluZyBhbGwgaW5wdXQgY2FsbGJhY2tzIHVzaW5nIGBzZXRJbW1lZGlhdGVgLlxuICogKiBQZXJmb3JtaW5nIHRoZSByZXF1ZXN0ZWQgb3BlcmF0aW9uIHRocm91Z2ggdGhlIGZpbGVzeXN0ZW0gb3IgdGhlIGZpbGVcbiAqICAgZGVzY3JpcHRvciwgYXMgYXBwcm9wcmlhdGUuXG4gKiAqIEhhbmRsaW5nIG9wdGlvbmFsIGFyZ3VtZW50cyBhbmQgc2V0dGluZyBkZWZhdWx0IGFyZ3VtZW50cy5cbiAqIEBzZWUgaHR0cDovL25vZGVqcy5vcmcvYXBpL2ZzLmh0bWxcbiAqL1xuZXhwb3J0IGRlZmF1bHQgY2xhc3MgRlMge1xuXHQvKiB0c2xpbnQ6ZGlzYWJsZTp2YXJpYWJsZS1uYW1lICovXG5cdC8vIEV4cG9ydGVkIGZzLlN0YXRzLlxuXHRwdWJsaWMgc3RhdGljIFN0YXRzID0gU3RhdHM7XG5cdC8qIHRzbGludDplbmFibGU6dmFyaWFibGUtbmFtZSAqL1xuXG5cdHB1YmxpYyBGX09LOiBudW1iZXIgPSAwO1xuXHRwdWJsaWMgUl9PSzogbnVtYmVyID0gNDtcblx0cHVibGljIFdfT0s6IG51bWJlciA9IDI7XG5cdHB1YmxpYyBYX09LOiBudW1iZXIgPSAxO1xuXG5cdHByaXZhdGUgcm9vdDogRmlsZVN5c3RlbSB8IG51bGwgPSBudWxsO1xuXHRwcml2YXRlIGNyZWQ6IENyZWQ7XG5cdHByaXZhdGUgZmRNYXA6IHsgW2ZkOiBudW1iZXJdOiBGaWxlIH0gPSB7fTtcblx0cHJpdmF0ZSBuZXh0RmQgPSAxMDA7XG5cblx0LyoqXG5cdCAqIEluaXRpYWxpemVzIHRoZSBGUyBNb2R1bGVzIHdpdGggdGhlIGdpdmVuIGZpbGVzeXN0ZW1cblx0ICogQHBhcmFtIHJvb3RGUyB0aGUgcm9vdCBmaWxlc3lzdGVtIG9mIHRoZSBGU1xuXHQgKiBAcGFyYW0gY3JlZCB0aGUgY3JlZGVudGlhbHMgdXNlZCBmb3IgaW50ZXJhY3Rpbmcgd2l0aCB0aGUgRlNcblx0ICogQHJldHVybnNcblx0ICovXG5cdHB1YmxpYyBpbml0aWFsaXplKHJvb3RGUzogRmlsZVN5c3RlbSwgY3JlZDogQ3JlZCk6IEZpbGVTeXN0ZW0ge1xuXHRcdGlmICghKDxhbnk+cm9vdEZTKS5jb25zdHJ1Y3Rvci5pc0F2YWlsYWJsZSgpKSB7XG5cdFx0XHR0aHJvdyBuZXcgQXBpRXJyb3IoRXJyb3JDb2RlLkVJTlZBTCwgJ1RyaWVkIHRvIGluc3RhbnRpYXRlIEJyb3dzZXJGUyB3aXRoIGFuIHVuYXZhaWxhYmxlIGZpbGUgc3lzdGVtLicpO1xuXHRcdH1cblx0XHR0aGlzLmNyZWQgPSBjcmVkO1xuXHRcdHJldHVybiAodGhpcy5yb290ID0gcm9vdEZTKTtcblx0fVxuXG5cdC8qKlxuXHQgKiBjb252ZXJ0cyBEYXRlIG9yIG51bWJlciB0byBhIGZyYWN0aW9uYWwgVU5JWCB0aW1lc3RhbXBcblx0ICogR3JhYmJlZCBmcm9tIE5vZGVKUyBzb3VyY2VzIChsaWIvZnMuanMpXG5cdCAqL1xuXHRwdWJsaWMgX3RvVW5peFRpbWVzdGFtcCh0aW1lOiBEYXRlIHwgbnVtYmVyKTogbnVtYmVyIHtcblx0XHRpZiAodHlwZW9mIHRpbWUgPT09ICdudW1iZXInKSB7XG5cdFx0XHRyZXR1cm4gdGltZTtcblx0XHR9IGVsc2UgaWYgKHRpbWUgaW5zdGFuY2VvZiBEYXRlKSB7XG5cdFx0XHRyZXR1cm4gdGltZS5nZXRUaW1lKCkgLyAxMDAwO1xuXHRcdH1cblx0XHR0aHJvdyBuZXcgRXJyb3IoJ0Nhbm5vdCBwYXJzZSB0aW1lOiAnICsgdGltZSk7XG5cdH1cblxuXHQvKipcblx0ICogKipOT05TVEFOREFSRCoqOiBHcmFiIHRoZSBGaWxlU3lzdGVtIGluc3RhbmNlIHRoYXQgYmFja3MgdGhpcyBBUEkuXG5cdCAqIEByZXR1cm4gW0Jyb3dzZXJGUy5GaWxlU3lzdGVtIHwgbnVsbF0gUmV0dXJucyBudWxsIGlmIHRoZSBmaWxlIHN5c3RlbSBoYXNcblx0ICogICBub3QgYmVlbiBpbml0aWFsaXplZC5cblx0ICovXG5cdHB1YmxpYyBnZXRSb290RlMoKTogRmlsZVN5c3RlbSB8IG51bGwge1xuXHRcdGlmICh0aGlzLnJvb3QpIHtcblx0XHRcdHJldHVybiB0aGlzLnJvb3Q7XG5cdFx0fSBlbHNlIHtcblx0XHRcdHJldHVybiBudWxsO1xuXHRcdH1cblx0fVxuXG5cdC8vIEZJTEUgT1IgRElSRUNUT1JZIE1FVEhPRFNcblxuXHQvKipcblx0ICogQXN5bmNocm9ub3VzIHJlbmFtZS4gTm8gYXJndW1lbnRzIG90aGVyIHRoYW4gYSBwb3NzaWJsZSBleGNlcHRpb24gYXJlIGdpdmVuXG5cdCAqIHRvIHRoZSBjb21wbGV0aW9uIGNhbGxiYWNrLlxuXHQgKiBAcGFyYW0gb2xkUGF0aFxuXHQgKiBAcGFyYW0gbmV3UGF0aFxuXHQgKiBAcGFyYW0gY2FsbGJhY2tcblx0ICovXG5cdHB1YmxpYyByZW5hbWUob2xkUGF0aDogc3RyaW5nLCBuZXdQYXRoOiBzdHJpbmcsIGNiOiBCRlNPbmVBcmdDYWxsYmFjayA9IG5vcENiKTogdm9pZCB7XG5cdFx0Y29uc3QgbmV3Q2IgPSB3cmFwQ2IoY2IsIDEpO1xuXHRcdHRyeSB7XG5cdFx0XHRhc3NlcnRSb290KHRoaXMucm9vdCkucmVuYW1lKG5vcm1hbGl6ZVBhdGgob2xkUGF0aCksIG5vcm1hbGl6ZVBhdGgobmV3UGF0aCksIHRoaXMuY3JlZCwgbmV3Q2IpO1xuXHRcdH0gY2F0Y2ggKGUpIHtcblx0XHRcdG5ld0NiKGUpO1xuXHRcdH1cblx0fVxuXG5cdC8qKlxuXHQgKiBTeW5jaHJvbm91cyByZW5hbWUuXG5cdCAqIEBwYXJhbSBvbGRQYXRoXG5cdCAqIEBwYXJhbSBuZXdQYXRoXG5cdCAqL1xuXHRwdWJsaWMgcmVuYW1lU3luYyhvbGRQYXRoOiBzdHJpbmcsIG5ld1BhdGg6IHN0cmluZyk6IHZvaWQge1xuXHRcdGFzc2VydFJvb3QodGhpcy5yb290KS5yZW5hbWVTeW5jKG5vcm1hbGl6ZVBhdGgob2xkUGF0aCksIG5vcm1hbGl6ZVBhdGgobmV3UGF0aCksIHRoaXMuY3JlZCk7XG5cdH1cblxuXHQvKipcblx0ICogVGVzdCB3aGV0aGVyIG9yIG5vdCB0aGUgZ2l2ZW4gcGF0aCBleGlzdHMgYnkgY2hlY2tpbmcgd2l0aCB0aGUgZmlsZSBzeXN0ZW0uXG5cdCAqIFRoZW4gY2FsbCB0aGUgY2FsbGJhY2sgYXJndW1lbnQgd2l0aCBlaXRoZXIgdHJ1ZSBvciBmYWxzZS5cblx0ICogQGV4YW1wbGUgU2FtcGxlIGludm9jYXRpb25cblx0ICogICBmcy5leGlzdHMoJy9ldGMvcGFzc3dkJywgZnVuY3Rpb24gKGV4aXN0cykge1xuXHQgKiAgICAgdXRpbC5kZWJ1ZyhleGlzdHMgPyBcIml0J3MgdGhlcmVcIiA6IFwibm8gcGFzc3dkIVwiKTtcblx0ICogICB9KTtcblx0ICogQHBhcmFtIHBhdGhcblx0ICogQHBhcmFtIGNhbGxiYWNrXG5cdCAqL1xuXHRwdWJsaWMgZXhpc3RzKHBhdGg6IHN0cmluZywgY2I6IChleGlzdHM6IGJvb2xlYW4pID0+IGFueSA9IG5vcENiKTogdm9pZCB7XG5cdFx0Y29uc3QgbmV3Q2IgPSB3cmFwQ2IoY2IsIDEpO1xuXHRcdHRyeSB7XG5cdFx0XHRyZXR1cm4gYXNzZXJ0Um9vdCh0aGlzLnJvb3QpLmV4aXN0cyhub3JtYWxpemVQYXRoKHBhdGgpLCB0aGlzLmNyZWQsIG5ld0NiKTtcblx0XHR9IGNhdGNoIChlKSB7XG5cdFx0XHQvLyBEb2Vzbid0IHJldHVybiBhbiBlcnJvci4gSWYgc29tZXRoaW5nIGJhZCBoYXBwZW5zLCB3ZSBhc3N1bWUgaXQganVzdFxuXHRcdFx0Ly8gZG9lc24ndCBleGlzdC5cblx0XHRcdHJldHVybiBuZXdDYihmYWxzZSk7XG5cdFx0fVxuXHR9XG5cblx0LyoqXG5cdCAqIFRlc3Qgd2hldGhlciBvciBub3QgdGhlIGdpdmVuIHBhdGggZXhpc3RzIGJ5IGNoZWNraW5nIHdpdGggdGhlIGZpbGUgc3lzdGVtLlxuXHQgKiBAcGFyYW0gcGF0aFxuXHQgKiBAcmV0dXJuIFtib29sZWFuXVxuXHQgKi9cblx0cHVibGljIGV4aXN0c1N5bmMocGF0aDogc3RyaW5nKTogYm9vbGVhbiB7XG5cdFx0dHJ5IHtcblx0XHRcdHJldHVybiBhc3NlcnRSb290KHRoaXMucm9vdCkuZXhpc3RzU3luYyhub3JtYWxpemVQYXRoKHBhdGgpLCB0aGlzLmNyZWQpO1xuXHRcdH0gY2F0Y2ggKGUpIHtcblx0XHRcdC8vIERvZXNuJ3QgcmV0dXJuIGFuIGVycm9yLiBJZiBzb21ldGhpbmcgYmFkIGhhcHBlbnMsIHdlIGFzc3VtZSBpdCBqdXN0XG5cdFx0XHQvLyBkb2Vzbid0IGV4aXN0LlxuXHRcdFx0cmV0dXJuIGZhbHNlO1xuXHRcdH1cblx0fVxuXG5cdC8qKlxuXHQgKiBBc3luY2hyb25vdXMgYHN0YXRgLlxuXHQgKiBAcGFyYW0gcGF0aFxuXHQgKiBAcGFyYW0gY2FsbGJhY2tcblx0ICovXG5cdHB1YmxpYyBzdGF0KHBhdGg6IHN0cmluZywgY2I6IEJGU0NhbGxiYWNrPFN0YXRzPiA9IG5vcENiKTogdm9pZCB7XG5cdFx0Y29uc3QgbmV3Q2IgPSB3cmFwQ2IoY2IsIDIpO1xuXHRcdHRyeSB7XG5cdFx0XHRyZXR1cm4gYXNzZXJ0Um9vdCh0aGlzLnJvb3QpLnN0YXQobm9ybWFsaXplUGF0aChwYXRoKSwgZmFsc2UsIHRoaXMuY3JlZCwgbmV3Q2IpO1xuXHRcdH0gY2F0Y2ggKGUpIHtcblx0XHRcdHJldHVybiBuZXdDYihlKTtcblx0XHR9XG5cdH1cblxuXHQvKipcblx0ICogU3luY2hyb25vdXMgYHN0YXRgLlxuXHQgKiBAcGFyYW0gcGF0aFxuXHQgKiBAcmV0dXJuIFtCcm93c2VyRlMubm9kZS5mcy5TdGF0c11cblx0ICovXG5cdHB1YmxpYyBzdGF0U3luYyhwYXRoOiBzdHJpbmcpOiBTdGF0cyB7XG5cdFx0cmV0dXJuIGFzc2VydFJvb3QodGhpcy5yb290KS5zdGF0U3luYyhub3JtYWxpemVQYXRoKHBhdGgpLCBmYWxzZSwgdGhpcy5jcmVkKTtcblx0fVxuXG5cdC8qKlxuXHQgKiBBc3luY2hyb25vdXMgYGxzdGF0YC5cblx0ICogYGxzdGF0KClgIGlzIGlkZW50aWNhbCB0byBgc3RhdCgpYCwgZXhjZXB0IHRoYXQgaWYgcGF0aCBpcyBhIHN5bWJvbGljIGxpbmssXG5cdCAqIHRoZW4gdGhlIGxpbmsgaXRzZWxmIGlzIHN0YXQtZWQsIG5vdCB0aGUgZmlsZSB0aGF0IGl0IHJlZmVycyB0by5cblx0ICogQHBhcmFtIHBhdGhcblx0ICogQHBhcmFtIGNhbGxiYWNrXG5cdCAqL1xuXHRwdWJsaWMgbHN0YXQocGF0aDogc3RyaW5nLCBjYjogQkZTQ2FsbGJhY2s8U3RhdHM+ID0gbm9wQ2IpOiB2b2lkIHtcblx0XHRjb25zdCBuZXdDYiA9IHdyYXBDYihjYiwgMik7XG5cdFx0dHJ5IHtcblx0XHRcdHJldHVybiBhc3NlcnRSb290KHRoaXMucm9vdCkuc3RhdChub3JtYWxpemVQYXRoKHBhdGgpLCB0cnVlLCB0aGlzLmNyZWQsIG5ld0NiKTtcblx0XHR9IGNhdGNoIChlKSB7XG5cdFx0XHRyZXR1cm4gbmV3Q2IoZSk7XG5cdFx0fVxuXHR9XG5cblx0LyoqXG5cdCAqIFN5bmNocm9ub3VzIGBsc3RhdGAuXG5cdCAqIGBsc3RhdCgpYCBpcyBpZGVudGljYWwgdG8gYHN0YXQoKWAsIGV4Y2VwdCB0aGF0IGlmIHBhdGggaXMgYSBzeW1ib2xpYyBsaW5rLFxuXHQgKiB0aGVuIHRoZSBsaW5rIGl0c2VsZiBpcyBzdGF0LWVkLCBub3QgdGhlIGZpbGUgdGhhdCBpdCByZWZlcnMgdG8uXG5cdCAqIEBwYXJhbSBwYXRoXG5cdCAqIEByZXR1cm4gW0Jyb3dzZXJGUy5ub2RlLmZzLlN0YXRzXVxuXHQgKi9cblx0cHVibGljIGxzdGF0U3luYyhwYXRoOiBzdHJpbmcpOiBTdGF0cyB7XG5cdFx0cmV0dXJuIGFzc2VydFJvb3QodGhpcy5yb290KS5zdGF0U3luYyhub3JtYWxpemVQYXRoKHBhdGgpLCB0cnVlLCB0aGlzLmNyZWQpO1xuXHR9XG5cblx0Ly8gRklMRS1PTkxZIE1FVEhPRFNcblxuXHQvKipcblx0ICogQXN5bmNocm9ub3VzIGB0cnVuY2F0ZWAuXG5cdCAqIEBwYXJhbSBwYXRoXG5cdCAqIEBwYXJhbSBsZW5cblx0ICogQHBhcmFtIGNhbGxiYWNrXG5cdCAqL1xuXHRwdWJsaWMgdHJ1bmNhdGUocGF0aDogc3RyaW5nLCBjYj86IEJGU09uZUFyZ0NhbGxiYWNrKTogdm9pZDtcblx0cHVibGljIHRydW5jYXRlKHBhdGg6IHN0cmluZywgbGVuOiBudW1iZXIsIGNiPzogQkZTT25lQXJnQ2FsbGJhY2spOiB2b2lkO1xuXHRwdWJsaWMgdHJ1bmNhdGUocGF0aDogc3RyaW5nLCBhcmcyOiBhbnkgPSAwLCBjYjogQkZTT25lQXJnQ2FsbGJhY2sgPSBub3BDYik6IHZvaWQge1xuXHRcdGxldCBsZW4gPSAwO1xuXHRcdGlmICh0eXBlb2YgYXJnMiA9PT0gJ2Z1bmN0aW9uJykge1xuXHRcdFx0Y2IgPSBhcmcyO1xuXHRcdH0gZWxzZSBpZiAodHlwZW9mIGFyZzIgPT09ICdudW1iZXInKSB7XG5cdFx0XHRsZW4gPSBhcmcyO1xuXHRcdH1cblxuXHRcdGNvbnN0IG5ld0NiID0gd3JhcENiKGNiLCAxKTtcblx0XHR0cnkge1xuXHRcdFx0aWYgKGxlbiA8IDApIHtcblx0XHRcdFx0dGhyb3cgbmV3IEFwaUVycm9yKEVycm9yQ29kZS5FSU5WQUwpO1xuXHRcdFx0fVxuXHRcdFx0cmV0dXJuIGFzc2VydFJvb3QodGhpcy5yb290KS50cnVuY2F0ZShub3JtYWxpemVQYXRoKHBhdGgpLCBsZW4sIHRoaXMuY3JlZCwgbmV3Q2IpO1xuXHRcdH0gY2F0Y2ggKGUpIHtcblx0XHRcdHJldHVybiBuZXdDYihlKTtcblx0XHR9XG5cdH1cblxuXHQvKipcblx0ICogU3luY2hyb25vdXMgYHRydW5jYXRlYC5cblx0ICogQHBhcmFtIHBhdGhcblx0ICogQHBhcmFtIGxlblxuXHQgKi9cblx0cHVibGljIHRydW5jYXRlU3luYyhwYXRoOiBzdHJpbmcsIGxlbjogbnVtYmVyID0gMCk6IHZvaWQge1xuXHRcdGlmIChsZW4gPCAwKSB7XG5cdFx0XHR0aHJvdyBuZXcgQXBpRXJyb3IoRXJyb3JDb2RlLkVJTlZBTCk7XG5cdFx0fVxuXHRcdHJldHVybiBhc3NlcnRSb290KHRoaXMucm9vdCkudHJ1bmNhdGVTeW5jKG5vcm1hbGl6ZVBhdGgocGF0aCksIGxlbiwgdGhpcy5jcmVkKTtcblx0fVxuXG5cdC8qKlxuXHQgKiBBc3luY2hyb25vdXMgYHVubGlua2AuXG5cdCAqIEBwYXJhbSBwYXRoXG5cdCAqIEBwYXJhbSBjYWxsYmFja1xuXHQgKi9cblx0cHVibGljIHVubGluayhwYXRoOiBzdHJpbmcsIGNiOiBCRlNPbmVBcmdDYWxsYmFjayA9IG5vcENiKTogdm9pZCB7XG5cdFx0Y29uc3QgbmV3Q2IgPSB3cmFwQ2IoY2IsIDEpO1xuXHRcdHRyeSB7XG5cdFx0XHRyZXR1cm4gYXNzZXJ0Um9vdCh0aGlzLnJvb3QpLnVubGluayhub3JtYWxpemVQYXRoKHBhdGgpLCB0aGlzLmNyZWQsIG5ld0NiKTtcblx0XHR9IGNhdGNoIChlKSB7XG5cdFx0XHRyZXR1cm4gbmV3Q2IoZSk7XG5cdFx0fVxuXHR9XG5cblx0LyoqXG5cdCAqIFN5bmNocm9ub3VzIGB1bmxpbmtgLlxuXHQgKiBAcGFyYW0gcGF0aFxuXHQgKi9cblx0cHVibGljIHVubGlua1N5bmMocGF0aDogc3RyaW5nKTogdm9pZCB7XG5cdFx0cmV0dXJuIGFzc2VydFJvb3QodGhpcy5yb290KS51bmxpbmtTeW5jKG5vcm1hbGl6ZVBhdGgocGF0aCksIHRoaXMuY3JlZCk7XG5cdH1cblxuXHQvKipcblx0ICogQXN5bmNocm9ub3VzIGZpbGUgb3Blbi5cblx0ICogRXhjbHVzaXZlIG1vZGUgZW5zdXJlcyB0aGF0IHBhdGggaXMgbmV3bHkgY3JlYXRlZC5cblx0ICpcblx0ICogYGZsYWdzYCBjYW4gYmU6XG5cdCAqXG5cdCAqICogYCdyJ2AgLSBPcGVuIGZpbGUgZm9yIHJlYWRpbmcuIEFuIGV4Y2VwdGlvbiBvY2N1cnMgaWYgdGhlIGZpbGUgZG9lcyBub3QgZXhpc3QuXG5cdCAqICogYCdyKydgIC0gT3BlbiBmaWxlIGZvciByZWFkaW5nIGFuZCB3cml0aW5nLiBBbiBleGNlcHRpb24gb2NjdXJzIGlmIHRoZSBmaWxlIGRvZXMgbm90IGV4aXN0LlxuXHQgKiAqIGAncnMnYCAtIE9wZW4gZmlsZSBmb3IgcmVhZGluZyBpbiBzeW5jaHJvbm91cyBtb2RlLiBJbnN0cnVjdHMgdGhlIGZpbGVzeXN0ZW0gdG8gbm90IGNhY2hlIHdyaXRlcy5cblx0ICogKiBgJ3JzKydgIC0gT3BlbiBmaWxlIGZvciByZWFkaW5nIGFuZCB3cml0aW5nLCBhbmQgb3BlbnMgdGhlIGZpbGUgaW4gc3luY2hyb25vdXMgbW9kZS5cblx0ICogKiBgJ3cnYCAtIE9wZW4gZmlsZSBmb3Igd3JpdGluZy4gVGhlIGZpbGUgaXMgY3JlYXRlZCAoaWYgaXQgZG9lcyBub3QgZXhpc3QpIG9yIHRydW5jYXRlZCAoaWYgaXQgZXhpc3RzKS5cblx0ICogKiBgJ3d4J2AgLSBMaWtlICd3JyBidXQgb3BlbnMgdGhlIGZpbGUgaW4gZXhjbHVzaXZlIG1vZGUuXG5cdCAqICogYCd3KydgIC0gT3BlbiBmaWxlIGZvciByZWFkaW5nIGFuZCB3cml0aW5nLiBUaGUgZmlsZSBpcyBjcmVhdGVkIChpZiBpdCBkb2VzIG5vdCBleGlzdCkgb3IgdHJ1bmNhdGVkIChpZiBpdCBleGlzdHMpLlxuXHQgKiAqIGAnd3grJ2AgLSBMaWtlICd3KycgYnV0IG9wZW5zIHRoZSBmaWxlIGluIGV4Y2x1c2l2ZSBtb2RlLlxuXHQgKiAqIGAnYSdgIC0gT3BlbiBmaWxlIGZvciBhcHBlbmRpbmcuIFRoZSBmaWxlIGlzIGNyZWF0ZWQgaWYgaXQgZG9lcyBub3QgZXhpc3QuXG5cdCAqICogYCdheCdgIC0gTGlrZSAnYScgYnV0IG9wZW5zIHRoZSBmaWxlIGluIGV4Y2x1c2l2ZSBtb2RlLlxuXHQgKiAqIGAnYSsnYCAtIE9wZW4gZmlsZSBmb3IgcmVhZGluZyBhbmQgYXBwZW5kaW5nLiBUaGUgZmlsZSBpcyBjcmVhdGVkIGlmIGl0IGRvZXMgbm90IGV4aXN0LlxuXHQgKiAqIGAnYXgrJ2AgLSBMaWtlICdhKycgYnV0IG9wZW5zIHRoZSBmaWxlIGluIGV4Y2x1c2l2ZSBtb2RlLlxuXHQgKlxuXHQgKiBAc2VlIGh0dHA6Ly93d3cubWFucGFnZXouY29tL21hbi8yL29wZW4vXG5cdCAqIEBwYXJhbSBwYXRoXG5cdCAqIEBwYXJhbSBmbGFnc1xuXHQgKiBAcGFyYW0gbW9kZSBkZWZhdWx0cyB0byBgMDY0NGBcblx0ICogQHBhcmFtIGNhbGxiYWNrXG5cdCAqL1xuXHRwdWJsaWMgb3BlbihwYXRoOiBzdHJpbmcsIGZsYWc6IHN0cmluZywgY2I/OiBCRlNDYWxsYmFjazxudW1iZXI+KTogdm9pZDtcblx0cHVibGljIG9wZW4ocGF0aDogc3RyaW5nLCBmbGFnOiBzdHJpbmcsIG1vZGU6IG51bWJlciB8IHN0cmluZywgY2I/OiBCRlNDYWxsYmFjazxudW1iZXI+KTogdm9pZDtcblx0cHVibGljIG9wZW4ocGF0aDogc3RyaW5nLCBmbGFnOiBzdHJpbmcsIGFyZzI/OiBhbnksIGNiOiBCRlNDYWxsYmFjazxudW1iZXI+ID0gbm9wQ2IpOiB2b2lkIHtcblx0XHRjb25zdCBtb2RlID0gbm9ybWFsaXplTW9kZShhcmcyLCAweDFhNCk7XG5cdFx0Y2IgPSB0eXBlb2YgYXJnMiA9PT0gJ2Z1bmN0aW9uJyA/IGFyZzIgOiBjYjtcblx0XHRjb25zdCBuZXdDYiA9IHdyYXBDYihjYiwgMik7XG5cdFx0dHJ5IHtcblx0XHRcdGFzc2VydFJvb3QodGhpcy5yb290KS5vcGVuKG5vcm1hbGl6ZVBhdGgocGF0aCksIEZpbGVGbGFnLmdldEZpbGVGbGFnKGZsYWcpLCBtb2RlLCB0aGlzLmNyZWQsIChlOiBBcGlFcnJvciwgZmlsZT86IEZpbGUpID0+IHtcblx0XHRcdFx0aWYgKGZpbGUpIHtcblx0XHRcdFx0XHRuZXdDYihlLCB0aGlzLmdldEZkRm9yRmlsZShmaWxlKSk7XG5cdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0bmV3Q2IoZSk7XG5cdFx0XHRcdH1cblx0XHRcdH0pO1xuXHRcdH0gY2F0Y2ggKGUpIHtcblx0XHRcdG5ld0NiKGUpO1xuXHRcdH1cblx0fVxuXG5cdC8qKlxuXHQgKiBTeW5jaHJvbm91cyBmaWxlIG9wZW4uXG5cdCAqIEBzZWUgaHR0cDovL3d3dy5tYW5wYWdlei5jb20vbWFuLzIvb3Blbi9cblx0ICogQHBhcmFtIHBhdGhcblx0ICogQHBhcmFtIGZsYWdzXG5cdCAqIEBwYXJhbSBtb2RlIGRlZmF1bHRzIHRvIGAwNjQ0YFxuXHQgKiBAcmV0dXJuIFtCcm93c2VyRlMuRmlsZV1cblx0ICovXG5cdHB1YmxpYyBvcGVuU3luYyhwYXRoOiBzdHJpbmcsIGZsYWc6IHN0cmluZywgbW9kZTogbnVtYmVyIHwgc3RyaW5nID0gMHgxYTQpOiBudW1iZXIge1xuXHRcdHJldHVybiB0aGlzLmdldEZkRm9yRmlsZShhc3NlcnRSb290KHRoaXMucm9vdCkub3BlblN5bmMobm9ybWFsaXplUGF0aChwYXRoKSwgRmlsZUZsYWcuZ2V0RmlsZUZsYWcoZmxhZyksIG5vcm1hbGl6ZU1vZGUobW9kZSwgMHgxYTQpLCB0aGlzLmNyZWQpKTtcblx0fVxuXG5cdC8qKlxuXHQgKiBBc3luY2hyb25vdXNseSByZWFkcyB0aGUgZW50aXJlIGNvbnRlbnRzIG9mIGEgZmlsZS5cblx0ICogQGV4YW1wbGUgVXNhZ2UgZXhhbXBsZVxuXHQgKiAgIGZzLnJlYWRGaWxlKCcvZXRjL3Bhc3N3ZCcsIGZ1bmN0aW9uIChlcnIsIGRhdGEpIHtcblx0ICogICAgIGlmIChlcnIpIHRocm93IGVycjtcblx0ICogICAgIGNvbnNvbGUubG9nKGRhdGEpO1xuXHQgKiAgIH0pO1xuXHQgKiBAcGFyYW0gZmlsZW5hbWVcblx0ICogQHBhcmFtIG9wdGlvbnNcblx0ICogQG9wdGlvbiBvcHRpb25zIFtTdHJpbmddIGVuY29kaW5nIFRoZSBzdHJpbmcgZW5jb2RpbmcgZm9yIHRoZSBmaWxlIGNvbnRlbnRzLiBEZWZhdWx0cyB0byBgbnVsbGAuXG5cdCAqIEBvcHRpb24gb3B0aW9ucyBbU3RyaW5nXSBmbGFnIERlZmF1bHRzIHRvIGAncidgLlxuXHQgKiBAcGFyYW0gY2FsbGJhY2sgSWYgbm8gZW5jb2RpbmcgaXMgc3BlY2lmaWVkLCB0aGVuIHRoZSByYXcgYnVmZmVyIGlzIHJldHVybmVkLlxuXHQgKi9cblx0cHVibGljIHJlYWRGaWxlKGZpbGVuYW1lOiBzdHJpbmcsIGNiOiBCRlNDYWxsYmFjazxCdWZmZXI+KTogdm9pZDtcblx0cHVibGljIHJlYWRGaWxlKGZpbGVuYW1lOiBzdHJpbmcsIG9wdGlvbnM6IHsgZmxhZz86IHN0cmluZyB9LCBjYWxsYmFjaz86IEJGU0NhbGxiYWNrPEJ1ZmZlcj4pOiB2b2lkO1xuXHRwdWJsaWMgcmVhZEZpbGUoZmlsZW5hbWU6IHN0cmluZywgb3B0aW9uczogeyBlbmNvZGluZzogc3RyaW5nOyBmbGFnPzogc3RyaW5nIH0sIGNhbGxiYWNrPzogQkZTQ2FsbGJhY2s8c3RyaW5nPik6IHZvaWQ7XG5cdHB1YmxpYyByZWFkRmlsZShmaWxlbmFtZTogc3RyaW5nLCBlbmNvZGluZzogc3RyaW5nLCBjYjogQkZTQ2FsbGJhY2s8c3RyaW5nPik6IHZvaWQ7XG5cdHB1YmxpYyByZWFkRmlsZShmaWxlbmFtZTogc3RyaW5nLCBhcmcyOiBhbnkgPSB7fSwgY2I6IEJGU0NhbGxiYWNrPGFueT4gPSBub3BDYikge1xuXHRcdGNvbnN0IG9wdGlvbnMgPSBub3JtYWxpemVPcHRpb25zKGFyZzIsIG51bGwsICdyJywgbnVsbCk7XG5cdFx0Y2IgPSB0eXBlb2YgYXJnMiA9PT0gJ2Z1bmN0aW9uJyA/IGFyZzIgOiBjYjtcblx0XHRjb25zdCBuZXdDYiA9IHdyYXBDYihjYiwgMik7XG5cdFx0dHJ5IHtcblx0XHRcdGNvbnN0IGZsYWcgPSBGaWxlRmxhZy5nZXRGaWxlRmxhZyhvcHRpb25zWydmbGFnJ10pO1xuXHRcdFx0aWYgKCFmbGFnLmlzUmVhZGFibGUoKSkge1xuXHRcdFx0XHRyZXR1cm4gbmV3Q2IobmV3IEFwaUVycm9yKEVycm9yQ29kZS5FSU5WQUwsICdGbGFnIHBhc3NlZCB0byByZWFkRmlsZSBtdXN0IGFsbG93IGZvciByZWFkaW5nLicpKTtcblx0XHRcdH1cblx0XHRcdHJldHVybiBhc3NlcnRSb290KHRoaXMucm9vdCkucmVhZEZpbGUobm9ybWFsaXplUGF0aChmaWxlbmFtZSksIG9wdGlvbnMuZW5jb2RpbmcsIGZsYWcsIHRoaXMuY3JlZCwgbmV3Q2IpO1xuXHRcdH0gY2F0Y2ggKGUpIHtcblx0XHRcdHJldHVybiBuZXdDYihlKTtcblx0XHR9XG5cdH1cblxuXHQvKipcblx0ICogU3luY2hyb25vdXNseSByZWFkcyB0aGUgZW50aXJlIGNvbnRlbnRzIG9mIGEgZmlsZS5cblx0ICogQHBhcmFtIGZpbGVuYW1lXG5cdCAqIEBwYXJhbSBvcHRpb25zXG5cdCAqIEBvcHRpb24gb3B0aW9ucyBbU3RyaW5nXSBlbmNvZGluZyBUaGUgc3RyaW5nIGVuY29kaW5nIGZvciB0aGUgZmlsZSBjb250ZW50cy4gRGVmYXVsdHMgdG8gYG51bGxgLlxuXHQgKiBAb3B0aW9uIG9wdGlvbnMgW1N0cmluZ10gZmxhZyBEZWZhdWx0cyB0byBgJ3InYC5cblx0ICogQHJldHVybiBbU3RyaW5nIHwgQnJvd3NlckZTLm5vZGUuQnVmZmVyXVxuXHQgKi9cblx0cHVibGljIHJlYWRGaWxlU3luYyhmaWxlbmFtZTogc3RyaW5nLCBvcHRpb25zPzogeyBmbGFnPzogc3RyaW5nIH0pOiBCdWZmZXI7XG5cdHB1YmxpYyByZWFkRmlsZVN5bmMoZmlsZW5hbWU6IHN0cmluZywgb3B0aW9uczogeyBlbmNvZGluZzogc3RyaW5nOyBmbGFnPzogc3RyaW5nIH0pOiBzdHJpbmc7XG5cdHB1YmxpYyByZWFkRmlsZVN5bmMoZmlsZW5hbWU6IHN0cmluZywgZW5jb2Rpbmc6IHN0cmluZyk6IHN0cmluZztcblx0cHVibGljIHJlYWRGaWxlU3luYyhmaWxlbmFtZTogc3RyaW5nLCBhcmcyOiBhbnkgPSB7fSk6IGFueSB7XG5cdFx0Y29uc3Qgb3B0aW9ucyA9IG5vcm1hbGl6ZU9wdGlvbnMoYXJnMiwgbnVsbCwgJ3InLCBudWxsKTtcblx0XHRjb25zdCBmbGFnID0gRmlsZUZsYWcuZ2V0RmlsZUZsYWcob3B0aW9ucy5mbGFnKTtcblx0XHRpZiAoIWZsYWcuaXNSZWFkYWJsZSgpKSB7XG5cdFx0XHR0aHJvdyBuZXcgQXBpRXJyb3IoRXJyb3JDb2RlLkVJTlZBTCwgJ0ZsYWcgcGFzc2VkIHRvIHJlYWRGaWxlIG11c3QgYWxsb3cgZm9yIHJlYWRpbmcuJyk7XG5cdFx0fVxuXHRcdHJldHVybiBhc3NlcnRSb290KHRoaXMucm9vdCkucmVhZEZpbGVTeW5jKG5vcm1hbGl6ZVBhdGgoZmlsZW5hbWUpLCBvcHRpb25zLmVuY29kaW5nLCBmbGFnLCB0aGlzLmNyZWQpO1xuXHR9XG5cblx0LyoqXG5cdCAqIEFzeW5jaHJvbm91c2x5IHdyaXRlcyBkYXRhIHRvIGEgZmlsZSwgcmVwbGFjaW5nIHRoZSBmaWxlIGlmIGl0IGFscmVhZHlcblx0ICogZXhpc3RzLlxuXHQgKlxuXHQgKiBUaGUgZW5jb2Rpbmcgb3B0aW9uIGlzIGlnbm9yZWQgaWYgZGF0YSBpcyBhIGJ1ZmZlci5cblx0ICpcblx0ICogQGV4YW1wbGUgVXNhZ2UgZXhhbXBsZVxuXHQgKiAgIGZzLndyaXRlRmlsZSgnbWVzc2FnZS50eHQnLCAnSGVsbG8gTm9kZScsIGZ1bmN0aW9uIChlcnIpIHtcblx0ICogICAgIGlmIChlcnIpIHRocm93IGVycjtcblx0ICogICAgIGNvbnNvbGUubG9nKCdJdFxcJ3Mgc2F2ZWQhJyk7XG5cdCAqICAgfSk7XG5cdCAqIEBwYXJhbSBmaWxlbmFtZVxuXHQgKiBAcGFyYW0gZGF0YVxuXHQgKiBAcGFyYW0gb3B0aW9uc1xuXHQgKiBAb3B0aW9uIG9wdGlvbnMgW1N0cmluZ10gZW5jb2RpbmcgRGVmYXVsdHMgdG8gYCd1dGY4J2AuXG5cdCAqIEBvcHRpb24gb3B0aW9ucyBbTnVtYmVyXSBtb2RlIERlZmF1bHRzIHRvIGAwNjQ0YC5cblx0ICogQG9wdGlvbiBvcHRpb25zIFtTdHJpbmddIGZsYWcgRGVmYXVsdHMgdG8gYCd3J2AuXG5cdCAqIEBwYXJhbSBjYWxsYmFja1xuXHQgKi9cblx0cHVibGljIHdyaXRlRmlsZShmaWxlbmFtZTogc3RyaW5nLCBkYXRhOiBhbnksIGNiPzogQkZTT25lQXJnQ2FsbGJhY2spOiB2b2lkO1xuXHRwdWJsaWMgd3JpdGVGaWxlKGZpbGVuYW1lOiBzdHJpbmcsIGRhdGE6IGFueSwgZW5jb2Rpbmc/OiBzdHJpbmcsIGNiPzogQkZTT25lQXJnQ2FsbGJhY2spOiB2b2lkO1xuXHRwdWJsaWMgd3JpdGVGaWxlKGZpbGVuYW1lOiBzdHJpbmcsIGRhdGE6IGFueSwgb3B0aW9ucz86IHsgZW5jb2Rpbmc/OiBzdHJpbmc7IG1vZGU/OiBzdHJpbmcgfCBudW1iZXI7IGZsYWc/OiBzdHJpbmcgfSwgY2I/OiBCRlNPbmVBcmdDYWxsYmFjayk6IHZvaWQ7XG5cdHB1YmxpYyB3cml0ZUZpbGUoZmlsZW5hbWU6IHN0cmluZywgZGF0YTogYW55LCBhcmczOiBhbnkgPSB7fSwgY2I6IEJGU09uZUFyZ0NhbGxiYWNrID0gbm9wQ2IpOiB2b2lkIHtcblx0XHRjb25zdCBvcHRpb25zID0gbm9ybWFsaXplT3B0aW9ucyhhcmczLCAndXRmOCcsICd3JywgMHgxYTQpO1xuXHRcdGNiID0gdHlwZW9mIGFyZzMgPT09ICdmdW5jdGlvbicgPyBhcmczIDogY2I7XG5cdFx0Y29uc3QgbmV3Q2IgPSB3cmFwQ2IoY2IsIDEpO1xuXHRcdHRyeSB7XG5cdFx0XHRjb25zdCBmbGFnID0gRmlsZUZsYWcuZ2V0RmlsZUZsYWcob3B0aW9ucy5mbGFnKTtcblx0XHRcdGlmICghZmxhZy5pc1dyaXRlYWJsZSgpKSB7XG5cdFx0XHRcdHJldHVybiBuZXdDYihuZXcgQXBpRXJyb3IoRXJyb3JDb2RlLkVJTlZBTCwgJ0ZsYWcgcGFzc2VkIHRvIHdyaXRlRmlsZSBtdXN0IGFsbG93IGZvciB3cml0aW5nLicpKTtcblx0XHRcdH1cblx0XHRcdHJldHVybiBhc3NlcnRSb290KHRoaXMucm9vdCkud3JpdGVGaWxlKG5vcm1hbGl6ZVBhdGgoZmlsZW5hbWUpLCBkYXRhLCBvcHRpb25zLmVuY29kaW5nLCBmbGFnLCBvcHRpb25zLm1vZGUsIHRoaXMuY3JlZCwgbmV3Q2IpO1xuXHRcdH0gY2F0Y2ggKGUpIHtcblx0XHRcdHJldHVybiBuZXdDYihlKTtcblx0XHR9XG5cdH1cblxuXHQvKipcblx0ICogU3luY2hyb25vdXNseSB3cml0ZXMgZGF0YSB0byBhIGZpbGUsIHJlcGxhY2luZyB0aGUgZmlsZSBpZiBpdCBhbHJlYWR5XG5cdCAqIGV4aXN0cy5cblx0ICpcblx0ICogVGhlIGVuY29kaW5nIG9wdGlvbiBpcyBpZ25vcmVkIGlmIGRhdGEgaXMgYSBidWZmZXIuXG5cdCAqIEBwYXJhbSBmaWxlbmFtZVxuXHQgKiBAcGFyYW0gZGF0YVxuXHQgKiBAcGFyYW0gb3B0aW9uc1xuXHQgKiBAb3B0aW9uIG9wdGlvbnMgW1N0cmluZ10gZW5jb2RpbmcgRGVmYXVsdHMgdG8gYCd1dGY4J2AuXG5cdCAqIEBvcHRpb24gb3B0aW9ucyBbTnVtYmVyXSBtb2RlIERlZmF1bHRzIHRvIGAwNjQ0YC5cblx0ICogQG9wdGlvbiBvcHRpb25zIFtTdHJpbmddIGZsYWcgRGVmYXVsdHMgdG8gYCd3J2AuXG5cdCAqL1xuXHRwdWJsaWMgd3JpdGVGaWxlU3luYyhmaWxlbmFtZTogc3RyaW5nLCBkYXRhOiBhbnksIG9wdGlvbnM/OiB7IGVuY29kaW5nPzogc3RyaW5nOyBtb2RlPzogbnVtYmVyIHwgc3RyaW5nOyBmbGFnPzogc3RyaW5nIH0pOiB2b2lkO1xuXHRwdWJsaWMgd3JpdGVGaWxlU3luYyhmaWxlbmFtZTogc3RyaW5nLCBkYXRhOiBhbnksIGVuY29kaW5nPzogc3RyaW5nKTogdm9pZDtcblx0cHVibGljIHdyaXRlRmlsZVN5bmMoZmlsZW5hbWU6IHN0cmluZywgZGF0YTogYW55LCBhcmczPzogYW55KTogdm9pZCB7XG5cdFx0Y29uc3Qgb3B0aW9ucyA9IG5vcm1hbGl6ZU9wdGlvbnMoYXJnMywgJ3V0ZjgnLCAndycsIDB4MWE0KTtcblx0XHRjb25zdCBmbGFnID0gRmlsZUZsYWcuZ2V0RmlsZUZsYWcob3B0aW9ucy5mbGFnKTtcblx0XHRpZiAoIWZsYWcuaXNXcml0ZWFibGUoKSkge1xuXHRcdFx0dGhyb3cgbmV3IEFwaUVycm9yKEVycm9yQ29kZS5FSU5WQUwsICdGbGFnIHBhc3NlZCB0byB3cml0ZUZpbGUgbXVzdCBhbGxvdyBmb3Igd3JpdGluZy4nKTtcblx0XHR9XG5cdFx0cmV0dXJuIGFzc2VydFJvb3QodGhpcy5yb290KS53cml0ZUZpbGVTeW5jKG5vcm1hbGl6ZVBhdGgoZmlsZW5hbWUpLCBkYXRhLCBvcHRpb25zLmVuY29kaW5nLCBmbGFnLCBvcHRpb25zLm1vZGUsIHRoaXMuY3JlZCk7XG5cdH1cblxuXHQvKipcblx0ICogQXN5bmNocm9ub3VzbHkgYXBwZW5kIGRhdGEgdG8gYSBmaWxlLCBjcmVhdGluZyB0aGUgZmlsZSBpZiBpdCBub3QgeWV0XG5cdCAqIGV4aXN0cy5cblx0ICpcblx0ICogQGV4YW1wbGUgVXNhZ2UgZXhhbXBsZVxuXHQgKiAgIGZzLmFwcGVuZEZpbGUoJ21lc3NhZ2UudHh0JywgJ2RhdGEgdG8gYXBwZW5kJywgZnVuY3Rpb24gKGVycikge1xuXHQgKiAgICAgaWYgKGVycikgdGhyb3cgZXJyO1xuXHQgKiAgICAgY29uc29sZS5sb2coJ1RoZSBcImRhdGEgdG8gYXBwZW5kXCIgd2FzIGFwcGVuZGVkIHRvIGZpbGUhJyk7XG5cdCAqICAgfSk7XG5cdCAqIEBwYXJhbSBmaWxlbmFtZVxuXHQgKiBAcGFyYW0gZGF0YVxuXHQgKiBAcGFyYW0gb3B0aW9uc1xuXHQgKiBAb3B0aW9uIG9wdGlvbnMgW1N0cmluZ10gZW5jb2RpbmcgRGVmYXVsdHMgdG8gYCd1dGY4J2AuXG5cdCAqIEBvcHRpb24gb3B0aW9ucyBbTnVtYmVyXSBtb2RlIERlZmF1bHRzIHRvIGAwNjQ0YC5cblx0ICogQG9wdGlvbiBvcHRpb25zIFtTdHJpbmddIGZsYWcgRGVmYXVsdHMgdG8gYCdhJ2AuXG5cdCAqIEBwYXJhbSBjYWxsYmFja1xuXHQgKi9cblx0cHVibGljIGFwcGVuZEZpbGUoZmlsZW5hbWU6IHN0cmluZywgZGF0YTogYW55LCBjYj86IEJGU09uZUFyZ0NhbGxiYWNrKTogdm9pZDtcblx0cHVibGljIGFwcGVuZEZpbGUoZmlsZW5hbWU6IHN0cmluZywgZGF0YTogYW55LCBvcHRpb25zPzogeyBlbmNvZGluZz86IHN0cmluZzsgbW9kZT86IG51bWJlciB8IHN0cmluZzsgZmxhZz86IHN0cmluZyB9LCBjYj86IEJGU09uZUFyZ0NhbGxiYWNrKTogdm9pZDtcblx0cHVibGljIGFwcGVuZEZpbGUoZmlsZW5hbWU6IHN0cmluZywgZGF0YTogYW55LCBlbmNvZGluZz86IHN0cmluZywgY2I/OiBCRlNPbmVBcmdDYWxsYmFjayk6IHZvaWQ7XG5cdHB1YmxpYyBhcHBlbmRGaWxlKGZpbGVuYW1lOiBzdHJpbmcsIGRhdGE6IGFueSwgYXJnMz86IGFueSwgY2I6IEJGU09uZUFyZ0NhbGxiYWNrID0gbm9wQ2IpOiB2b2lkIHtcblx0XHRjb25zdCBvcHRpb25zID0gbm9ybWFsaXplT3B0aW9ucyhhcmczLCAndXRmOCcsICdhJywgMHgxYTQpO1xuXHRcdGNiID0gdHlwZW9mIGFyZzMgPT09ICdmdW5jdGlvbicgPyBhcmczIDogY2I7XG5cdFx0Y29uc3QgbmV3Q2IgPSB3cmFwQ2IoY2IsIDEpO1xuXHRcdHRyeSB7XG5cdFx0XHRjb25zdCBmbGFnID0gRmlsZUZsYWcuZ2V0RmlsZUZsYWcob3B0aW9ucy5mbGFnKTtcblx0XHRcdGlmICghZmxhZy5pc0FwcGVuZGFibGUoKSkge1xuXHRcdFx0XHRyZXR1cm4gbmV3Q2IobmV3IEFwaUVycm9yKEVycm9yQ29kZS5FSU5WQUwsICdGbGFnIHBhc3NlZCB0byBhcHBlbmRGaWxlIG11c3QgYWxsb3cgZm9yIGFwcGVuZGluZy4nKSk7XG5cdFx0XHR9XG5cdFx0XHRhc3NlcnRSb290KHRoaXMucm9vdCkuYXBwZW5kRmlsZShub3JtYWxpemVQYXRoKGZpbGVuYW1lKSwgZGF0YSwgb3B0aW9ucy5lbmNvZGluZywgZmxhZywgb3B0aW9ucy5tb2RlLCB0aGlzLmNyZWQsIG5ld0NiKTtcblx0XHR9IGNhdGNoIChlKSB7XG5cdFx0XHRuZXdDYihlKTtcblx0XHR9XG5cdH1cblxuXHQvKipcblx0ICogQXN5bmNocm9ub3VzbHkgYXBwZW5kIGRhdGEgdG8gYSBmaWxlLCBjcmVhdGluZyB0aGUgZmlsZSBpZiBpdCBub3QgeWV0XG5cdCAqIGV4aXN0cy5cblx0ICpcblx0ICogQGV4YW1wbGUgVXNhZ2UgZXhhbXBsZVxuXHQgKiAgIGZzLmFwcGVuZEZpbGUoJ21lc3NhZ2UudHh0JywgJ2RhdGEgdG8gYXBwZW5kJywgZnVuY3Rpb24gKGVycikge1xuXHQgKiAgICAgaWYgKGVycikgdGhyb3cgZXJyO1xuXHQgKiAgICAgY29uc29sZS5sb2coJ1RoZSBcImRhdGEgdG8gYXBwZW5kXCIgd2FzIGFwcGVuZGVkIHRvIGZpbGUhJyk7XG5cdCAqICAgfSk7XG5cdCAqIEBwYXJhbSBmaWxlbmFtZVxuXHQgKiBAcGFyYW0gZGF0YVxuXHQgKiBAcGFyYW0gb3B0aW9uc1xuXHQgKiBAb3B0aW9uIG9wdGlvbnMgW1N0cmluZ10gZW5jb2RpbmcgRGVmYXVsdHMgdG8gYCd1dGY4J2AuXG5cdCAqIEBvcHRpb24gb3B0aW9ucyBbTnVtYmVyXSBtb2RlIERlZmF1bHRzIHRvIGAwNjQ0YC5cblx0ICogQG9wdGlvbiBvcHRpb25zIFtTdHJpbmddIGZsYWcgRGVmYXVsdHMgdG8gYCdhJ2AuXG5cdCAqL1xuXHRwdWJsaWMgYXBwZW5kRmlsZVN5bmMoZmlsZW5hbWU6IHN0cmluZywgZGF0YTogYW55LCBvcHRpb25zPzogeyBlbmNvZGluZz86IHN0cmluZzsgbW9kZT86IG51bWJlciB8IHN0cmluZzsgZmxhZz86IHN0cmluZyB9KTogdm9pZDtcblx0cHVibGljIGFwcGVuZEZpbGVTeW5jKGZpbGVuYW1lOiBzdHJpbmcsIGRhdGE6IGFueSwgZW5jb2Rpbmc/OiBzdHJpbmcpOiB2b2lkO1xuXHRwdWJsaWMgYXBwZW5kRmlsZVN5bmMoZmlsZW5hbWU6IHN0cmluZywgZGF0YTogYW55LCBhcmczPzogYW55KTogdm9pZCB7XG5cdFx0Y29uc3Qgb3B0aW9ucyA9IG5vcm1hbGl6ZU9wdGlvbnMoYXJnMywgJ3V0ZjgnLCAnYScsIDB4MWE0KTtcblx0XHRjb25zdCBmbGFnID0gRmlsZUZsYWcuZ2V0RmlsZUZsYWcob3B0aW9ucy5mbGFnKTtcblx0XHRpZiAoIWZsYWcuaXNBcHBlbmRhYmxlKCkpIHtcblx0XHRcdHRocm93IG5ldyBBcGlFcnJvcihFcnJvckNvZGUuRUlOVkFMLCAnRmxhZyBwYXNzZWQgdG8gYXBwZW5kRmlsZSBtdXN0IGFsbG93IGZvciBhcHBlbmRpbmcuJyk7XG5cdFx0fVxuXHRcdHJldHVybiBhc3NlcnRSb290KHRoaXMucm9vdCkuYXBwZW5kRmlsZVN5bmMobm9ybWFsaXplUGF0aChmaWxlbmFtZSksIGRhdGEsIG9wdGlvbnMuZW5jb2RpbmcsIGZsYWcsIG9wdGlvbnMubW9kZSwgdGhpcy5jcmVkKTtcblx0fVxuXG5cdC8vIEZJTEUgREVTQ1JJUFRPUiBNRVRIT0RTXG5cblx0LyoqXG5cdCAqIEFzeW5jaHJvbm91cyBgZnN0YXRgLlxuXHQgKiBgZnN0YXQoKWAgaXMgaWRlbnRpY2FsIHRvIGBzdGF0KClgLCBleGNlcHQgdGhhdCB0aGUgZmlsZSB0byBiZSBzdGF0LWVkIGlzXG5cdCAqIHNwZWNpZmllZCBieSB0aGUgZmlsZSBkZXNjcmlwdG9yIGBmZGAuXG5cdCAqIEBwYXJhbSBmZFxuXHQgKiBAcGFyYW0gY2FsbGJhY2tcblx0ICovXG5cdHB1YmxpYyBmc3RhdChmZDogbnVtYmVyLCBjYjogQkZTQ2FsbGJhY2s8U3RhdHM+ID0gbm9wQ2IpOiB2b2lkIHtcblx0XHRjb25zdCBuZXdDYiA9IHdyYXBDYihjYiwgMik7XG5cdFx0dHJ5IHtcblx0XHRcdGNvbnN0IGZpbGUgPSB0aGlzLmZkMmZpbGUoZmQpO1xuXHRcdFx0ZmlsZS5zdGF0KG5ld0NiKTtcblx0XHR9IGNhdGNoIChlKSB7XG5cdFx0XHRuZXdDYihlKTtcblx0XHR9XG5cdH1cblxuXHQvKipcblx0ICogU3luY2hyb25vdXMgYGZzdGF0YC5cblx0ICogYGZzdGF0KClgIGlzIGlkZW50aWNhbCB0byBgc3RhdCgpYCwgZXhjZXB0IHRoYXQgdGhlIGZpbGUgdG8gYmUgc3RhdC1lZCBpc1xuXHQgKiBzcGVjaWZpZWQgYnkgdGhlIGZpbGUgZGVzY3JpcHRvciBgZmRgLlxuXHQgKiBAcGFyYW0gZmRcblx0ICogQHJldHVybiBbQnJvd3NlckZTLm5vZGUuZnMuU3RhdHNdXG5cdCAqL1xuXHRwdWJsaWMgZnN0YXRTeW5jKGZkOiBudW1iZXIpOiBTdGF0cyB7XG5cdFx0cmV0dXJuIHRoaXMuZmQyZmlsZShmZCkuc3RhdFN5bmMoKTtcblx0fVxuXG5cdC8qKlxuXHQgKiBBc3luY2hyb25vdXMgY2xvc2UuXG5cdCAqIEBwYXJhbSBmZFxuXHQgKiBAcGFyYW0gY2FsbGJhY2tcblx0ICovXG5cdHB1YmxpYyBjbG9zZShmZDogbnVtYmVyLCBjYjogQkZTT25lQXJnQ2FsbGJhY2sgPSBub3BDYik6IHZvaWQge1xuXHRcdGNvbnN0IG5ld0NiID0gd3JhcENiKGNiLCAxKTtcblx0XHR0cnkge1xuXHRcdFx0dGhpcy5mZDJmaWxlKGZkKS5jbG9zZSgoZTogQXBpRXJyb3IpID0+IHtcblx0XHRcdFx0aWYgKCFlKSB7XG5cdFx0XHRcdFx0dGhpcy5jbG9zZUZkKGZkKTtcblx0XHRcdFx0fVxuXHRcdFx0XHRuZXdDYihlKTtcblx0XHRcdH0pO1xuXHRcdH0gY2F0Y2ggKGUpIHtcblx0XHRcdG5ld0NiKGUpO1xuXHRcdH1cblx0fVxuXG5cdC8qKlxuXHQgKiBTeW5jaHJvbm91cyBjbG9zZS5cblx0ICogQHBhcmFtIGZkXG5cdCAqL1xuXHRwdWJsaWMgY2xvc2VTeW5jKGZkOiBudW1iZXIpOiB2b2lkIHtcblx0XHR0aGlzLmZkMmZpbGUoZmQpLmNsb3NlU3luYygpO1xuXHRcdHRoaXMuY2xvc2VGZChmZCk7XG5cdH1cblxuXHQvKipcblx0ICogQXN5bmNocm9ub3VzIGZ0cnVuY2F0ZS5cblx0ICogQHBhcmFtIGZkXG5cdCAqIEBwYXJhbSBsZW5cblx0ICogQHBhcmFtIGNhbGxiYWNrXG5cdCAqL1xuXHRwdWJsaWMgZnRydW5jYXRlKGZkOiBudW1iZXIsIGNiPzogQkZTT25lQXJnQ2FsbGJhY2spOiB2b2lkO1xuXHRwdWJsaWMgZnRydW5jYXRlKGZkOiBudW1iZXIsIGxlbj86IG51bWJlciwgY2I/OiBCRlNPbmVBcmdDYWxsYmFjayk6IHZvaWQ7XG5cdHB1YmxpYyBmdHJ1bmNhdGUoZmQ6IG51bWJlciwgYXJnMj86IGFueSwgY2I6IEJGU09uZUFyZ0NhbGxiYWNrID0gbm9wQ2IpOiB2b2lkIHtcblx0XHRjb25zdCBsZW5ndGggPSB0eXBlb2YgYXJnMiA9PT0gJ251bWJlcicgPyBhcmcyIDogMDtcblx0XHRjYiA9IHR5cGVvZiBhcmcyID09PSAnZnVuY3Rpb24nID8gYXJnMiA6IGNiO1xuXHRcdGNvbnN0IG5ld0NiID0gd3JhcENiKGNiLCAxKTtcblx0XHR0cnkge1xuXHRcdFx0Y29uc3QgZmlsZSA9IHRoaXMuZmQyZmlsZShmZCk7XG5cdFx0XHRpZiAobGVuZ3RoIDwgMCkge1xuXHRcdFx0XHR0aHJvdyBuZXcgQXBpRXJyb3IoRXJyb3JDb2RlLkVJTlZBTCk7XG5cdFx0XHR9XG5cdFx0XHRmaWxlLnRydW5jYXRlKGxlbmd0aCwgbmV3Q2IpO1xuXHRcdH0gY2F0Y2ggKGUpIHtcblx0XHRcdG5ld0NiKGUpO1xuXHRcdH1cblx0fVxuXG5cdC8qKlxuXHQgKiBTeW5jaHJvbm91cyBmdHJ1bmNhdGUuXG5cdCAqIEBwYXJhbSBmZFxuXHQgKiBAcGFyYW0gbGVuXG5cdCAqL1xuXHRwdWJsaWMgZnRydW5jYXRlU3luYyhmZDogbnVtYmVyLCBsZW46IG51bWJlciA9IDApOiB2b2lkIHtcblx0XHRjb25zdCBmaWxlID0gdGhpcy5mZDJmaWxlKGZkKTtcblx0XHRpZiAobGVuIDwgMCkge1xuXHRcdFx0dGhyb3cgbmV3IEFwaUVycm9yKEVycm9yQ29kZS5FSU5WQUwpO1xuXHRcdH1cblx0XHRmaWxlLnRydW5jYXRlU3luYyhsZW4pO1xuXHR9XG5cblx0LyoqXG5cdCAqIEFzeW5jaHJvbm91cyBmc3luYy5cblx0ICogQHBhcmFtIGZkXG5cdCAqIEBwYXJhbSBjYWxsYmFja1xuXHQgKi9cblx0cHVibGljIGZzeW5jKGZkOiBudW1iZXIsIGNiOiBCRlNPbmVBcmdDYWxsYmFjayA9IG5vcENiKTogdm9pZCB7XG5cdFx0Y29uc3QgbmV3Q2IgPSB3cmFwQ2IoY2IsIDEpO1xuXHRcdHRyeSB7XG5cdFx0XHR0aGlzLmZkMmZpbGUoZmQpLnN5bmMobmV3Q2IpO1xuXHRcdH0gY2F0Y2ggKGUpIHtcblx0XHRcdG5ld0NiKGUpO1xuXHRcdH1cblx0fVxuXG5cdC8qKlxuXHQgKiBTeW5jaHJvbm91cyBmc3luYy5cblx0ICogQHBhcmFtIGZkXG5cdCAqL1xuXHRwdWJsaWMgZnN5bmNTeW5jKGZkOiBudW1iZXIpOiB2b2lkIHtcblx0XHR0aGlzLmZkMmZpbGUoZmQpLnN5bmNTeW5jKCk7XG5cdH1cblxuXHQvKipcblx0ICogQXN5bmNocm9ub3VzIGZkYXRhc3luYy5cblx0ICogQHBhcmFtIGZkXG5cdCAqIEBwYXJhbSBjYWxsYmFja1xuXHQgKi9cblx0cHVibGljIGZkYXRhc3luYyhmZDogbnVtYmVyLCBjYjogQkZTT25lQXJnQ2FsbGJhY2sgPSBub3BDYik6IHZvaWQge1xuXHRcdGNvbnN0IG5ld0NiID0gd3JhcENiKGNiLCAxKTtcblx0XHR0cnkge1xuXHRcdFx0dGhpcy5mZDJmaWxlKGZkKS5kYXRhc3luYyhuZXdDYik7XG5cdFx0fSBjYXRjaCAoZSkge1xuXHRcdFx0bmV3Q2IoZSk7XG5cdFx0fVxuXHR9XG5cblx0LyoqXG5cdCAqIFN5bmNocm9ub3VzIGZkYXRhc3luYy5cblx0ICogQHBhcmFtIGZkXG5cdCAqL1xuXHRwdWJsaWMgZmRhdGFzeW5jU3luYyhmZDogbnVtYmVyKTogdm9pZCB7XG5cdFx0dGhpcy5mZDJmaWxlKGZkKS5kYXRhc3luY1N5bmMoKTtcblx0fVxuXG5cdC8qKlxuXHQgKiBXcml0ZSBidWZmZXIgdG8gdGhlIGZpbGUgc3BlY2lmaWVkIGJ5IGBmZGAuXG5cdCAqIE5vdGUgdGhhdCBpdCBpcyB1bnNhZmUgdG8gdXNlIGZzLndyaXRlIG11bHRpcGxlIHRpbWVzIG9uIHRoZSBzYW1lIGZpbGVcblx0ICogd2l0aG91dCB3YWl0aW5nIGZvciB0aGUgY2FsbGJhY2suXG5cdCAqIEBwYXJhbSBmZFxuXHQgKiBAcGFyYW0gYnVmZmVyIEJ1ZmZlciBjb250YWluaW5nIHRoZSBkYXRhIHRvIHdyaXRlIHRvXG5cdCAqICAgdGhlIGZpbGUuXG5cdCAqIEBwYXJhbSBvZmZzZXQgT2Zmc2V0IGluIHRoZSBidWZmZXIgdG8gc3RhcnQgcmVhZGluZyBkYXRhIGZyb20uXG5cdCAqIEBwYXJhbSBsZW5ndGggVGhlIGFtb3VudCBvZiBieXRlcyB0byB3cml0ZSB0byB0aGUgZmlsZS5cblx0ICogQHBhcmFtIHBvc2l0aW9uIE9mZnNldCBmcm9tIHRoZSBiZWdpbm5pbmcgb2YgdGhlIGZpbGUgd2hlcmUgdGhpc1xuXHQgKiAgIGRhdGEgc2hvdWxkIGJlIHdyaXR0ZW4uIElmIHBvc2l0aW9uIGlzIG51bGwsIHRoZSBkYXRhIHdpbGwgYmUgd3JpdHRlbiBhdFxuXHQgKiAgIHRoZSBjdXJyZW50IHBvc2l0aW9uLlxuXHQgKiBAcGFyYW0gY2FsbGJhY2sgVGhlIG51bWJlciBzcGVjaWZpZXMgdGhlIG51bWJlciBvZiBieXRlcyB3cml0dGVuIGludG8gdGhlIGZpbGUuXG5cdCAqL1xuXHRwdWJsaWMgd3JpdGUoZmQ6IG51bWJlciwgYnVmZmVyOiBCdWZmZXIsIG9mZnNldDogbnVtYmVyLCBsZW5ndGg6IG51bWJlciwgY2I/OiBCRlNUaHJlZUFyZ0NhbGxiYWNrPG51bWJlciwgQnVmZmVyPik6IHZvaWQ7XG5cdHB1YmxpYyB3cml0ZShmZDogbnVtYmVyLCBidWZmZXI6IEJ1ZmZlciwgb2Zmc2V0OiBudW1iZXIsIGxlbmd0aDogbnVtYmVyLCBwb3NpdGlvbjogbnVtYmVyIHwgbnVsbCwgY2I/OiBCRlNUaHJlZUFyZ0NhbGxiYWNrPG51bWJlciwgQnVmZmVyPik6IHZvaWQ7XG5cdHB1YmxpYyB3cml0ZShmZDogbnVtYmVyLCBkYXRhOiBhbnksIGNiPzogQkZTVGhyZWVBcmdDYWxsYmFjazxudW1iZXIsIHN0cmluZz4pOiB2b2lkO1xuXHRwdWJsaWMgd3JpdGUoZmQ6IG51bWJlciwgZGF0YTogYW55LCBwb3NpdGlvbjogbnVtYmVyIHwgbnVsbCwgY2I/OiBCRlNUaHJlZUFyZ0NhbGxiYWNrPG51bWJlciwgc3RyaW5nPik6IHZvaWQ7XG5cdHB1YmxpYyB3cml0ZShmZDogbnVtYmVyLCBkYXRhOiBhbnksIHBvc2l0aW9uOiBudW1iZXIgfCBudWxsLCBlbmNvZGluZzogQnVmZmVyRW5jb2RpbmcsIGNiPzogQkZTVGhyZWVBcmdDYWxsYmFjazxudW1iZXIsIHN0cmluZz4pOiB2b2lkO1xuXHRwdWJsaWMgd3JpdGUoZmQ6IG51bWJlciwgYXJnMjogYW55LCBhcmczPzogYW55LCBhcmc0PzogYW55LCBhcmc1PzogYW55LCBjYjogQkZTVGhyZWVBcmdDYWxsYmFjazxudW1iZXIsIGFueT4gPSBub3BDYik6IHZvaWQge1xuXHRcdGxldCBidWZmZXI6IEJ1ZmZlcixcblx0XHRcdG9mZnNldDogbnVtYmVyLFxuXHRcdFx0bGVuZ3RoOiBudW1iZXIsXG5cdFx0XHRwb3NpdGlvbjogbnVtYmVyIHwgbnVsbCA9IG51bGw7XG5cdFx0aWYgKHR5cGVvZiBhcmcyID09PSAnc3RyaW5nJykge1xuXHRcdFx0Ly8gU2lnbmF0dXJlIDE6IChmZCwgc3RyaW5nLCBbcG9zaXRpb24/LCBbZW5jb2Rpbmc/XV0sIGNiPylcblx0XHRcdGxldCBlbmNvZGluZzogQnVmZmVyRW5jb2RpbmcgPSAndXRmOCc7XG5cdFx0XHRzd2l0Y2ggKHR5cGVvZiBhcmczKSB7XG5cdFx0XHRcdGNhc2UgJ2Z1bmN0aW9uJzpcblx0XHRcdFx0XHQvLyAoZmQsIHN0cmluZywgY2IpXG5cdFx0XHRcdFx0Y2IgPSBhcmczO1xuXHRcdFx0XHRcdGJyZWFrO1xuXHRcdFx0XHRjYXNlICdudW1iZXInOlxuXHRcdFx0XHRcdC8vIChmZCwgc3RyaW5nLCBwb3NpdGlvbiwgZW5jb2Rpbmc/LCBjYj8pXG5cdFx0XHRcdFx0cG9zaXRpb24gPSBhcmczO1xuXHRcdFx0XHRcdGVuY29kaW5nID0gKHR5cGVvZiBhcmc0ID09PSAnc3RyaW5nJyA/IGFyZzQgOiAndXRmOCcpIGFzIEJ1ZmZlckVuY29kaW5nO1xuXHRcdFx0XHRcdGNiID0gdHlwZW9mIGFyZzUgPT09ICdmdW5jdGlvbicgPyBhcmc1IDogY2I7XG5cdFx0XHRcdFx0YnJlYWs7XG5cdFx0XHRcdGRlZmF1bHQ6XG5cdFx0XHRcdFx0Ly8gLi4udHJ5IHRvIGZpbmQgdGhlIGNhbGxiYWNrIGFuZCBnZXQgb3V0IG9mIGhlcmUhXG5cdFx0XHRcdFx0Y2IgPSB0eXBlb2YgYXJnNCA9PT0gJ2Z1bmN0aW9uJyA/IGFyZzQgOiB0eXBlb2YgYXJnNSA9PT0gJ2Z1bmN0aW9uJyA/IGFyZzUgOiBjYjtcblx0XHRcdFx0XHRyZXR1cm4gY2IobmV3IEFwaUVycm9yKEVycm9yQ29kZS5FSU5WQUwsICdJbnZhbGlkIGFyZ3VtZW50cy4nKSk7XG5cdFx0XHR9XG5cdFx0XHRidWZmZXIgPSBCdWZmZXIuZnJvbShhcmcyLCBlbmNvZGluZyk7XG5cdFx0XHRvZmZzZXQgPSAwO1xuXHRcdFx0bGVuZ3RoID0gYnVmZmVyLmxlbmd0aDtcblx0XHR9IGVsc2Uge1xuXHRcdFx0Ly8gU2lnbmF0dXJlIDI6IChmZCwgYnVmZmVyLCBvZmZzZXQsIGxlbmd0aCwgcG9zaXRpb24/LCBjYj8pXG5cdFx0XHRidWZmZXIgPSBhcmcyO1xuXHRcdFx0b2Zmc2V0ID0gYXJnMztcblx0XHRcdGxlbmd0aCA9IGFyZzQ7XG5cdFx0XHRwb3NpdGlvbiA9IHR5cGVvZiBhcmc1ID09PSAnbnVtYmVyJyA/IGFyZzUgOiBudWxsO1xuXHRcdFx0Y2IgPSB0eXBlb2YgYXJnNSA9PT0gJ2Z1bmN0aW9uJyA/IGFyZzUgOiBjYjtcblx0XHR9XG5cblx0XHRjb25zdCBuZXdDYiA9IHdyYXBDYihjYiwgMyk7XG5cdFx0dHJ5IHtcblx0XHRcdGNvbnN0IGZpbGUgPSB0aGlzLmZkMmZpbGUoZmQpO1xuXHRcdFx0aWYgKHBvc2l0aW9uID09PSB1bmRlZmluZWQgfHwgcG9zaXRpb24gPT09IG51bGwpIHtcblx0XHRcdFx0cG9zaXRpb24gPSBmaWxlLmdldFBvcygpITtcblx0XHRcdH1cblx0XHRcdGZpbGUud3JpdGUoYnVmZmVyLCBvZmZzZXQsIGxlbmd0aCwgcG9zaXRpb24sIG5ld0NiKTtcblx0XHR9IGNhdGNoIChlKSB7XG5cdFx0XHRuZXdDYihlKTtcblx0XHR9XG5cdH1cblxuXHQvKipcblx0ICogV3JpdGUgYnVmZmVyIHRvIHRoZSBmaWxlIHNwZWNpZmllZCBieSBgZmRgLlxuXHQgKiBOb3RlIHRoYXQgaXQgaXMgdW5zYWZlIHRvIHVzZSBmcy53cml0ZSBtdWx0aXBsZSB0aW1lcyBvbiB0aGUgc2FtZSBmaWxlXG5cdCAqIHdpdGhvdXQgd2FpdGluZyBmb3IgaXQgdG8gcmV0dXJuLlxuXHQgKiBAcGFyYW0gZmRcblx0ICogQHBhcmFtIGJ1ZmZlciBCdWZmZXIgY29udGFpbmluZyB0aGUgZGF0YSB0byB3cml0ZSB0b1xuXHQgKiAgIHRoZSBmaWxlLlxuXHQgKiBAcGFyYW0gb2Zmc2V0IE9mZnNldCBpbiB0aGUgYnVmZmVyIHRvIHN0YXJ0IHJlYWRpbmcgZGF0YSBmcm9tLlxuXHQgKiBAcGFyYW0gbGVuZ3RoIFRoZSBhbW91bnQgb2YgYnl0ZXMgdG8gd3JpdGUgdG8gdGhlIGZpbGUuXG5cdCAqIEBwYXJhbSBwb3NpdGlvbiBPZmZzZXQgZnJvbSB0aGUgYmVnaW5uaW5nIG9mIHRoZSBmaWxlIHdoZXJlIHRoaXNcblx0ICogICBkYXRhIHNob3VsZCBiZSB3cml0dGVuLiBJZiBwb3NpdGlvbiBpcyBudWxsLCB0aGUgZGF0YSB3aWxsIGJlIHdyaXR0ZW4gYXRcblx0ICogICB0aGUgY3VycmVudCBwb3NpdGlvbi5cblx0ICovXG5cdHB1YmxpYyB3cml0ZVN5bmMoZmQ6IG51bWJlciwgYnVmZmVyOiBCdWZmZXIsIG9mZnNldDogbnVtYmVyLCBsZW5ndGg6IG51bWJlciwgcG9zaXRpb24/OiBudW1iZXIgfCBudWxsKTogbnVtYmVyO1xuXHRwdWJsaWMgd3JpdGVTeW5jKGZkOiBudW1iZXIsIGRhdGE6IHN0cmluZywgcG9zaXRpb24/OiBudW1iZXIgfCBudWxsLCBlbmNvZGluZz86IEJ1ZmZlckVuY29kaW5nKTogbnVtYmVyO1xuXHRwdWJsaWMgd3JpdGVTeW5jKGZkOiBudW1iZXIsIGFyZzI6IGFueSwgYXJnMz86IGFueSwgYXJnND86IGFueSwgYXJnNT86IGFueSk6IG51bWJlciB7XG5cdFx0bGV0IGJ1ZmZlcjogQnVmZmVyLFxuXHRcdFx0b2Zmc2V0OiBudW1iZXIgPSAwLFxuXHRcdFx0bGVuZ3RoOiBudW1iZXIsXG5cdFx0XHRwb3NpdGlvbjogbnVtYmVyIHwgbnVsbDtcblx0XHRpZiAodHlwZW9mIGFyZzIgPT09ICdzdHJpbmcnKSB7XG5cdFx0XHQvLyBTaWduYXR1cmUgMTogKGZkLCBzdHJpbmcsIFtwb3NpdGlvbj8sIFtlbmNvZGluZz9dXSlcblx0XHRcdHBvc2l0aW9uID0gdHlwZW9mIGFyZzMgPT09ICdudW1iZXInID8gYXJnMyA6IG51bGw7XG5cdFx0XHRjb25zdCBlbmNvZGluZyA9ICh0eXBlb2YgYXJnNCA9PT0gJ3N0cmluZycgPyBhcmc0IDogJ3V0ZjgnKSBhcyBCdWZmZXJFbmNvZGluZztcblx0XHRcdG9mZnNldCA9IDA7XG5cdFx0XHRidWZmZXIgPSBCdWZmZXIuZnJvbShhcmcyLCBlbmNvZGluZyk7XG5cdFx0XHRsZW5ndGggPSBidWZmZXIubGVuZ3RoO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHQvLyBTaWduYXR1cmUgMjogKGZkLCBidWZmZXIsIG9mZnNldCwgbGVuZ3RoLCBwb3NpdGlvbj8pXG5cdFx0XHRidWZmZXIgPSBhcmcyO1xuXHRcdFx0b2Zmc2V0ID0gYXJnMztcblx0XHRcdGxlbmd0aCA9IGFyZzQ7XG5cdFx0XHRwb3NpdGlvbiA9IHR5cGVvZiBhcmc1ID09PSAnbnVtYmVyJyA/IGFyZzUgOiBudWxsO1xuXHRcdH1cblxuXHRcdGNvbnN0IGZpbGUgPSB0aGlzLmZkMmZpbGUoZmQpO1xuXHRcdGlmIChwb3NpdGlvbiA9PT0gdW5kZWZpbmVkIHx8IHBvc2l0aW9uID09PSBudWxsKSB7XG5cdFx0XHRwb3NpdGlvbiA9IGZpbGUuZ2V0UG9zKCkhO1xuXHRcdH1cblx0XHRyZXR1cm4gZmlsZS53cml0ZVN5bmMoYnVmZmVyLCBvZmZzZXQsIGxlbmd0aCwgcG9zaXRpb24pO1xuXHR9XG5cblx0LyoqXG5cdCAqIFJlYWQgZGF0YSBmcm9tIHRoZSBmaWxlIHNwZWNpZmllZCBieSBgZmRgLlxuXHQgKiBAcGFyYW0gYnVmZmVyIFRoZSBidWZmZXIgdGhhdCB0aGUgZGF0YSB3aWxsIGJlXG5cdCAqICAgd3JpdHRlbiB0by5cblx0ICogQHBhcmFtIG9mZnNldCBUaGUgb2Zmc2V0IHdpdGhpbiB0aGUgYnVmZmVyIHdoZXJlIHdyaXRpbmcgd2lsbFxuXHQgKiAgIHN0YXJ0LlxuXHQgKiBAcGFyYW0gbGVuZ3RoIEFuIGludGVnZXIgc3BlY2lmeWluZyB0aGUgbnVtYmVyIG9mIGJ5dGVzIHRvIHJlYWQuXG5cdCAqIEBwYXJhbSBwb3NpdGlvbiBBbiBpbnRlZ2VyIHNwZWNpZnlpbmcgd2hlcmUgdG8gYmVnaW4gcmVhZGluZyBmcm9tXG5cdCAqICAgaW4gdGhlIGZpbGUuIElmIHBvc2l0aW9uIGlzIG51bGwsIGRhdGEgd2lsbCBiZSByZWFkIGZyb20gdGhlIGN1cnJlbnQgZmlsZVxuXHQgKiAgIHBvc2l0aW9uLlxuXHQgKiBAcGFyYW0gY2FsbGJhY2sgVGhlIG51bWJlciBpcyB0aGUgbnVtYmVyIG9mIGJ5dGVzIHJlYWRcblx0ICovXG5cdHB1YmxpYyByZWFkKGZkOiBudW1iZXIsIGxlbmd0aDogbnVtYmVyLCBwb3NpdGlvbjogbnVtYmVyIHwgbnVsbCwgZW5jb2Rpbmc6IHN0cmluZywgY2I/OiBCRlNUaHJlZUFyZ0NhbGxiYWNrPHN0cmluZywgbnVtYmVyPik6IHZvaWQ7XG5cdHB1YmxpYyByZWFkKGZkOiBudW1iZXIsIGJ1ZmZlcjogQnVmZmVyLCBvZmZzZXQ6IG51bWJlciwgbGVuZ3RoOiBudW1iZXIsIHBvc2l0aW9uOiBudW1iZXIgfCBudWxsLCBjYj86IEJGU1RocmVlQXJnQ2FsbGJhY2s8bnVtYmVyLCBCdWZmZXI+KTogdm9pZDtcblx0cHVibGljIHJlYWQoZmQ6IG51bWJlciwgYXJnMjogYW55LCBhcmczOiBhbnksIGFyZzQ6IGFueSwgYXJnNT86IGFueSwgY2I6IEJGU1RocmVlQXJnQ2FsbGJhY2s8c3RyaW5nLCBudW1iZXI+IHwgQkZTVGhyZWVBcmdDYWxsYmFjazxudW1iZXIsIEJ1ZmZlcj4gPSBub3BDYik6IHZvaWQge1xuXHRcdGxldCBwb3NpdGlvbjogbnVtYmVyIHwgbnVsbCwgb2Zmc2V0OiBudW1iZXIsIGxlbmd0aDogbnVtYmVyLCBidWZmZXI6IEJ1ZmZlciwgbmV3Q2I6IEJGU1RocmVlQXJnQ2FsbGJhY2s8bnVtYmVyLCBCdWZmZXI+O1xuXHRcdGlmICh0eXBlb2YgYXJnMiA9PT0gJ251bWJlcicpIHtcblx0XHRcdC8vIGxlZ2FjeSBpbnRlcmZhY2Vcblx0XHRcdC8vIChmZCwgbGVuZ3RoLCBwb3NpdGlvbiwgZW5jb2RpbmcsIGNhbGxiYWNrKVxuXHRcdFx0bGVuZ3RoID0gYXJnMjtcblx0XHRcdHBvc2l0aW9uID0gYXJnMztcblx0XHRcdGNvbnN0IGVuY29kaW5nID0gYXJnNDtcblx0XHRcdGNiID0gdHlwZW9mIGFyZzUgPT09ICdmdW5jdGlvbicgPyBhcmc1IDogY2I7XG5cdFx0XHRvZmZzZXQgPSAwO1xuXHRcdFx0YnVmZmVyID0gQnVmZmVyLmFsbG9jKGxlbmd0aCk7XG5cdFx0XHQvLyBYWFg6IEluZWZmaWNpZW50LlxuXHRcdFx0Ly8gV3JhcCB0aGUgY2Igc28gd2Ugc2hlbHRlciB1cHBlciBsYXllcnMgb2YgdGhlIEFQSSBmcm9tIHRoZXNlXG5cdFx0XHQvLyBzaGVuYW5pZ2Fucy5cblx0XHRcdG5ld0NiID0gd3JhcENiKChlcnI/OiBBcGlFcnJvciB8IG51bGwsIGJ5dGVzUmVhZD86IG51bWJlciwgYnVmPzogQnVmZmVyKSA9PiB7XG5cdFx0XHRcdGlmIChlcnIpIHtcblx0XHRcdFx0XHRyZXR1cm4gKDxGdW5jdGlvbj5jYikoZXJyKTtcblx0XHRcdFx0fVxuXHRcdFx0XHQoPEJGU1RocmVlQXJnQ2FsbGJhY2s8c3RyaW5nLCBudW1iZXI+PmNiKShlcnIsIGJ1ZiEudG9TdHJpbmcoZW5jb2RpbmcpLCBieXRlc1JlYWQhKTtcblx0XHRcdH0sIDMpO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHRidWZmZXIgPSBhcmcyO1xuXHRcdFx0b2Zmc2V0ID0gYXJnMztcblx0XHRcdGxlbmd0aCA9IGFyZzQ7XG5cdFx0XHRwb3NpdGlvbiA9IGFyZzU7XG5cdFx0XHRuZXdDYiA9IHdyYXBDYig8QkZTVGhyZWVBcmdDYWxsYmFjazxudW1iZXIsIEJ1ZmZlcj4+Y2IsIDMpO1xuXHRcdH1cblxuXHRcdHRyeSB7XG5cdFx0XHRjb25zdCBmaWxlID0gdGhpcy5mZDJmaWxlKGZkKTtcblx0XHRcdGlmIChwb3NpdGlvbiA9PT0gdW5kZWZpbmVkIHx8IHBvc2l0aW9uID09PSBudWxsKSB7XG5cdFx0XHRcdHBvc2l0aW9uID0gZmlsZS5nZXRQb3MoKSE7XG5cdFx0XHR9XG5cdFx0XHRmaWxlLnJlYWQoYnVmZmVyLCBvZmZzZXQsIGxlbmd0aCwgcG9zaXRpb24sIG5ld0NiKTtcblx0XHR9IGNhdGNoIChlKSB7XG5cdFx0XHRuZXdDYihlKTtcblx0XHR9XG5cdH1cblxuXHQvKipcblx0ICogUmVhZCBkYXRhIGZyb20gdGhlIGZpbGUgc3BlY2lmaWVkIGJ5IGBmZGAuXG5cdCAqIEBwYXJhbSBmZFxuXHQgKiBAcGFyYW0gYnVmZmVyIFRoZSBidWZmZXIgdGhhdCB0aGUgZGF0YSB3aWxsIGJlXG5cdCAqICAgd3JpdHRlbiB0by5cblx0ICogQHBhcmFtIG9mZnNldCBUaGUgb2Zmc2V0IHdpdGhpbiB0aGUgYnVmZmVyIHdoZXJlIHdyaXRpbmcgd2lsbFxuXHQgKiAgIHN0YXJ0LlxuXHQgKiBAcGFyYW0gbGVuZ3RoIEFuIGludGVnZXIgc3BlY2lmeWluZyB0aGUgbnVtYmVyIG9mIGJ5dGVzIHRvIHJlYWQuXG5cdCAqIEBwYXJhbSBwb3NpdGlvbiBBbiBpbnRlZ2VyIHNwZWNpZnlpbmcgd2hlcmUgdG8gYmVnaW4gcmVhZGluZyBmcm9tXG5cdCAqICAgaW4gdGhlIGZpbGUuIElmIHBvc2l0aW9uIGlzIG51bGwsIGRhdGEgd2lsbCBiZSByZWFkIGZyb20gdGhlIGN1cnJlbnQgZmlsZVxuXHQgKiAgIHBvc2l0aW9uLlxuXHQgKiBAcmV0dXJuIFtOdW1iZXJdXG5cdCAqL1xuXHRwdWJsaWMgcmVhZFN5bmMoZmQ6IG51bWJlciwgbGVuZ3RoOiBudW1iZXIsIHBvc2l0aW9uOiBudW1iZXIsIGVuY29kaW5nOiBCdWZmZXJFbmNvZGluZyk6IHN0cmluZztcblx0cHVibGljIHJlYWRTeW5jKGZkOiBudW1iZXIsIGJ1ZmZlcjogQnVmZmVyLCBvZmZzZXQ6IG51bWJlciwgbGVuZ3RoOiBudW1iZXIsIHBvc2l0aW9uOiBudW1iZXIpOiBudW1iZXI7XG5cdHB1YmxpYyByZWFkU3luYyhmZDogbnVtYmVyLCBhcmcyOiBhbnksIGFyZzM6IGFueSwgYXJnNDogYW55LCBhcmc1PzogYW55KTogYW55IHtcblx0XHRsZXQgc2hlbmFuaWdhbnMgPSBmYWxzZTtcblx0XHRsZXQgYnVmZmVyOiBCdWZmZXIsXG5cdFx0XHRvZmZzZXQ6IG51bWJlcixcblx0XHRcdGxlbmd0aDogbnVtYmVyLFxuXHRcdFx0cG9zaXRpb246IG51bWJlcixcblx0XHRcdGVuY29kaW5nOiBCdWZmZXJFbmNvZGluZyA9ICd1dGY4Jztcblx0XHRpZiAodHlwZW9mIGFyZzIgPT09ICdudW1iZXInKSB7XG5cdFx0XHRsZW5ndGggPSBhcmcyO1xuXHRcdFx0cG9zaXRpb24gPSBhcmczO1xuXHRcdFx0ZW5jb2RpbmcgPSBhcmc0O1xuXHRcdFx0b2Zmc2V0ID0gMDtcblx0XHRcdGJ1ZmZlciA9IEJ1ZmZlci5hbGxvYyhsZW5ndGgpO1xuXHRcdFx0c2hlbmFuaWdhbnMgPSB0cnVlO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHRidWZmZXIgPSBhcmcyO1xuXHRcdFx0b2Zmc2V0ID0gYXJnMztcblx0XHRcdGxlbmd0aCA9IGFyZzQ7XG5cdFx0XHRwb3NpdGlvbiA9IGFyZzU7XG5cdFx0fVxuXHRcdGNvbnN0IGZpbGUgPSB0aGlzLmZkMmZpbGUoZmQpO1xuXHRcdGlmIChwb3NpdGlvbiA9PT0gdW5kZWZpbmVkIHx8IHBvc2l0aW9uID09PSBudWxsKSB7XG5cdFx0XHRwb3NpdGlvbiA9IGZpbGUuZ2V0UG9zKCkhO1xuXHRcdH1cblxuXHRcdGNvbnN0IHJ2ID0gZmlsZS5yZWFkU3luYyhidWZmZXIsIG9mZnNldCwgbGVuZ3RoLCBwb3NpdGlvbik7XG5cdFx0aWYgKCFzaGVuYW5pZ2Fucykge1xuXHRcdFx0cmV0dXJuIHJ2O1xuXHRcdH0gZWxzZSB7XG5cdFx0XHRyZXR1cm4gW2J1ZmZlci50b1N0cmluZyhlbmNvZGluZyksIHJ2XTtcblx0XHR9XG5cdH1cblxuXHQvKipcblx0ICogQXN5bmNocm9ub3VzIGBmY2hvd25gLlxuXHQgKiBAcGFyYW0gZmRcblx0ICogQHBhcmFtIHVpZFxuXHQgKiBAcGFyYW0gZ2lkXG5cdCAqIEBwYXJhbSBjYWxsYmFja1xuXHQgKi9cblx0cHVibGljIGZjaG93bihmZDogbnVtYmVyLCB1aWQ6IG51bWJlciwgZ2lkOiBudW1iZXIsIGNhbGxiYWNrOiBCRlNPbmVBcmdDYWxsYmFjayA9IG5vcENiKTogdm9pZCB7XG5cdFx0Y29uc3QgbmV3Q2IgPSB3cmFwQ2IoY2FsbGJhY2ssIDEpO1xuXHRcdHRyeSB7XG5cdFx0XHR0aGlzLmZkMmZpbGUoZmQpLmNob3duKHVpZCwgZ2lkLCBuZXdDYik7XG5cdFx0fSBjYXRjaCAoZSkge1xuXHRcdFx0bmV3Q2IoZSk7XG5cdFx0fVxuXHR9XG5cblx0LyoqXG5cdCAqIFN5bmNocm9ub3VzIGBmY2hvd25gLlxuXHQgKiBAcGFyYW0gZmRcblx0ICogQHBhcmFtIHVpZFxuXHQgKiBAcGFyYW0gZ2lkXG5cdCAqL1xuXHRwdWJsaWMgZmNob3duU3luYyhmZDogbnVtYmVyLCB1aWQ6IG51bWJlciwgZ2lkOiBudW1iZXIpOiB2b2lkIHtcblx0XHR0aGlzLmZkMmZpbGUoZmQpLmNob3duU3luYyh1aWQsIGdpZCk7XG5cdH1cblxuXHQvKipcblx0ICogQXN5bmNocm9ub3VzIGBmY2htb2RgLlxuXHQgKiBAcGFyYW0gZmRcblx0ICogQHBhcmFtIG1vZGVcblx0ICogQHBhcmFtIGNhbGxiYWNrXG5cdCAqL1xuXHRwdWJsaWMgZmNobW9kKGZkOiBudW1iZXIsIG1vZGU6IHN0cmluZyB8IG51bWJlciwgY2I6IEJGU09uZUFyZ0NhbGxiYWNrKTogdm9pZCB7XG5cdFx0Y29uc3QgbmV3Q2IgPSB3cmFwQ2IoY2IsIDEpO1xuXHRcdHRyeSB7XG5cdFx0XHRjb25zdCBudW1Nb2RlID0gdHlwZW9mIG1vZGUgPT09ICdzdHJpbmcnID8gcGFyc2VJbnQobW9kZSwgOCkgOiBtb2RlO1xuXHRcdFx0dGhpcy5mZDJmaWxlKGZkKS5jaG1vZChudW1Nb2RlLCBuZXdDYik7XG5cdFx0fSBjYXRjaCAoZSkge1xuXHRcdFx0bmV3Q2IoZSk7XG5cdFx0fVxuXHR9XG5cblx0LyoqXG5cdCAqIFN5bmNocm9ub3VzIGBmY2htb2RgLlxuXHQgKiBAcGFyYW0gZmRcblx0ICogQHBhcmFtIG1vZGVcblx0ICovXG5cdHB1YmxpYyBmY2htb2RTeW5jKGZkOiBudW1iZXIsIG1vZGU6IG51bWJlciB8IHN0cmluZyk6IHZvaWQge1xuXHRcdGNvbnN0IG51bU1vZGUgPSB0eXBlb2YgbW9kZSA9PT0gJ3N0cmluZycgPyBwYXJzZUludChtb2RlLCA4KSA6IG1vZGU7XG5cdFx0dGhpcy5mZDJmaWxlKGZkKS5jaG1vZFN5bmMobnVtTW9kZSk7XG5cdH1cblxuXHQvKipcblx0ICogQ2hhbmdlIHRoZSBmaWxlIHRpbWVzdGFtcHMgb2YgYSBmaWxlIHJlZmVyZW5jZWQgYnkgdGhlIHN1cHBsaWVkIGZpbGVcblx0ICogZGVzY3JpcHRvci5cblx0ICogQHBhcmFtIGZkXG5cdCAqIEBwYXJhbSBhdGltZVxuXHQgKiBAcGFyYW0gbXRpbWVcblx0ICogQHBhcmFtIGNhbGxiYWNrXG5cdCAqL1xuXHRwdWJsaWMgZnV0aW1lcyhmZDogbnVtYmVyLCBhdGltZTogbnVtYmVyIHwgRGF0ZSwgbXRpbWU6IG51bWJlciB8IERhdGUsIGNiOiBCRlNPbmVBcmdDYWxsYmFjayA9IG5vcENiKTogdm9pZCB7XG5cdFx0Y29uc3QgbmV3Q2IgPSB3cmFwQ2IoY2IsIDEpO1xuXHRcdHRyeSB7XG5cdFx0XHRjb25zdCBmaWxlID0gdGhpcy5mZDJmaWxlKGZkKTtcblx0XHRcdGlmICh0eXBlb2YgYXRpbWUgPT09ICdudW1iZXInKSB7XG5cdFx0XHRcdGF0aW1lID0gbmV3IERhdGUoYXRpbWUgKiAxMDAwKTtcblx0XHRcdH1cblx0XHRcdGlmICh0eXBlb2YgbXRpbWUgPT09ICdudW1iZXInKSB7XG5cdFx0XHRcdG10aW1lID0gbmV3IERhdGUobXRpbWUgKiAxMDAwKTtcblx0XHRcdH1cblx0XHRcdGZpbGUudXRpbWVzKGF0aW1lLCBtdGltZSwgbmV3Q2IpO1xuXHRcdH0gY2F0Y2ggKGUpIHtcblx0XHRcdG5ld0NiKGUpO1xuXHRcdH1cblx0fVxuXG5cdC8qKlxuXHQgKiBDaGFuZ2UgdGhlIGZpbGUgdGltZXN0YW1wcyBvZiBhIGZpbGUgcmVmZXJlbmNlZCBieSB0aGUgc3VwcGxpZWQgZmlsZVxuXHQgKiBkZXNjcmlwdG9yLlxuXHQgKiBAcGFyYW0gZmRcblx0ICogQHBhcmFtIGF0aW1lXG5cdCAqIEBwYXJhbSBtdGltZVxuXHQgKi9cblx0cHVibGljIGZ1dGltZXNTeW5jKGZkOiBudW1iZXIsIGF0aW1lOiBudW1iZXIgfCBEYXRlLCBtdGltZTogbnVtYmVyIHwgRGF0ZSk6IHZvaWQge1xuXHRcdHRoaXMuZmQyZmlsZShmZCkudXRpbWVzU3luYyhub3JtYWxpemVUaW1lKGF0aW1lKSwgbm9ybWFsaXplVGltZShtdGltZSkpO1xuXHR9XG5cblx0Ly8gRElSRUNUT1JZLU9OTFkgTUVUSE9EU1xuXG5cdC8qKlxuXHQgKiBBc3luY2hyb25vdXMgYHJtZGlyYC5cblx0ICogQHBhcmFtIHBhdGhcblx0ICogQHBhcmFtIGNhbGxiYWNrXG5cdCAqL1xuXHRwdWJsaWMgcm1kaXIocGF0aDogc3RyaW5nLCBjYjogQkZTT25lQXJnQ2FsbGJhY2sgPSBub3BDYik6IHZvaWQge1xuXHRcdGNvbnN0IG5ld0NiID0gd3JhcENiKGNiLCAxKTtcblx0XHR0cnkge1xuXHRcdFx0cGF0aCA9IG5vcm1hbGl6ZVBhdGgocGF0aCk7XG5cdFx0XHRhc3NlcnRSb290KHRoaXMucm9vdCkucm1kaXIocGF0aCwgdGhpcy5jcmVkLCBuZXdDYik7XG5cdFx0fSBjYXRjaCAoZSkge1xuXHRcdFx0bmV3Q2IoZSk7XG5cdFx0fVxuXHR9XG5cblx0LyoqXG5cdCAqIFN5bmNocm9ub3VzIGBybWRpcmAuXG5cdCAqIEBwYXJhbSBwYXRoXG5cdCAqL1xuXHRwdWJsaWMgcm1kaXJTeW5jKHBhdGg6IHN0cmluZyk6IHZvaWQge1xuXHRcdHBhdGggPSBub3JtYWxpemVQYXRoKHBhdGgpO1xuXHRcdHJldHVybiBhc3NlcnRSb290KHRoaXMucm9vdCkucm1kaXJTeW5jKHBhdGgsIHRoaXMuY3JlZCk7XG5cdH1cblxuXHQvKipcblx0ICogQXN5bmNocm9ub3VzIGBta2RpcmAuXG5cdCAqIEBwYXJhbSBwYXRoXG5cdCAqIEBwYXJhbSBtb2RlIGRlZmF1bHRzIHRvIGAwNzc3YFxuXHQgKiBAcGFyYW0gY2FsbGJhY2tcblx0ICovXG5cdHB1YmxpYyBta2RpcihwYXRoOiBzdHJpbmcsIG1vZGU/OiBhbnksIGNiOiBCRlNPbmVBcmdDYWxsYmFjayA9IG5vcENiKTogdm9pZCB7XG5cdFx0aWYgKHR5cGVvZiBtb2RlID09PSAnZnVuY3Rpb24nKSB7XG5cdFx0XHRjYiA9IG1vZGU7XG5cdFx0XHRtb2RlID0gMHgxZmY7XG5cdFx0fVxuXHRcdGNvbnN0IG5ld0NiID0gd3JhcENiKGNiLCAxKTtcblx0XHR0cnkge1xuXHRcdFx0cGF0aCA9IG5vcm1hbGl6ZVBhdGgocGF0aCk7XG5cdFx0XHRhc3NlcnRSb290KHRoaXMucm9vdCkubWtkaXIocGF0aCwgbW9kZSwgdGhpcy5jcmVkLCBuZXdDYik7XG5cdFx0fSBjYXRjaCAoZSkge1xuXHRcdFx0bmV3Q2IoZSk7XG5cdFx0fVxuXHR9XG5cblx0LyoqXG5cdCAqIFN5bmNocm9ub3VzIGBta2RpcmAuXG5cdCAqIEBwYXJhbSBwYXRoXG5cdCAqIEBwYXJhbSBtb2RlIGRlZmF1bHRzIHRvIGAwNzc3YFxuXHQgKi9cblx0cHVibGljIG1rZGlyU3luYyhwYXRoOiBzdHJpbmcsIG1vZGU/OiBudW1iZXIgfCBzdHJpbmcpOiB2b2lkIHtcblx0XHRhc3NlcnRSb290KHRoaXMucm9vdCkubWtkaXJTeW5jKG5vcm1hbGl6ZVBhdGgocGF0aCksIG5vcm1hbGl6ZU1vZGUobW9kZSwgMHgxZmYpLCB0aGlzLmNyZWQpO1xuXHR9XG5cblx0LyoqXG5cdCAqIEFzeW5jaHJvbm91cyBgcmVhZGRpcmAuIFJlYWRzIHRoZSBjb250ZW50cyBvZiBhIGRpcmVjdG9yeS5cblx0ICogVGhlIGNhbGxiYWNrIGdldHMgdHdvIGFyZ3VtZW50cyBgKGVyciwgZmlsZXMpYCB3aGVyZSBgZmlsZXNgIGlzIGFuIGFycmF5IG9mXG5cdCAqIHRoZSBuYW1lcyBvZiB0aGUgZmlsZXMgaW4gdGhlIGRpcmVjdG9yeSBleGNsdWRpbmcgYCcuJ2AgYW5kIGAnLi4nYC5cblx0ICogQHBhcmFtIHBhdGhcblx0ICogQHBhcmFtIGNhbGxiYWNrXG5cdCAqL1xuXHRwdWJsaWMgcmVhZGRpcihwYXRoOiBzdHJpbmcsIGNiOiBCRlNDYWxsYmFjazxzdHJpbmdbXT4gPSBub3BDYik6IHZvaWQge1xuXHRcdGNvbnN0IG5ld0NiID0gPChlcnI6IEFwaUVycm9yLCBmaWxlcz86IHN0cmluZ1tdKSA9PiB2b2lkPndyYXBDYihjYiwgMik7XG5cdFx0dHJ5IHtcblx0XHRcdHBhdGggPSBub3JtYWxpemVQYXRoKHBhdGgpO1xuXHRcdFx0YXNzZXJ0Um9vdCh0aGlzLnJvb3QpLnJlYWRkaXIocGF0aCwgdGhpcy5jcmVkLCBuZXdDYik7XG5cdFx0fSBjYXRjaCAoZSkge1xuXHRcdFx0bmV3Q2IoZSk7XG5cdFx0fVxuXHR9XG5cblx0LyoqXG5cdCAqIFN5bmNocm9ub3VzIGByZWFkZGlyYC4gUmVhZHMgdGhlIGNvbnRlbnRzIG9mIGEgZGlyZWN0b3J5LlxuXHQgKiBAcGFyYW0gcGF0aFxuXHQgKiBAcmV0dXJuIFtTdHJpbmdbXV1cblx0ICovXG5cdHB1YmxpYyByZWFkZGlyU3luYyhwYXRoOiBzdHJpbmcpOiBzdHJpbmdbXSB7XG5cdFx0cGF0aCA9IG5vcm1hbGl6ZVBhdGgocGF0aCk7XG5cdFx0cmV0dXJuIGFzc2VydFJvb3QodGhpcy5yb290KS5yZWFkZGlyU3luYyhwYXRoLCB0aGlzLmNyZWQpO1xuXHR9XG5cblx0Ly8gU1lNTElOSyBNRVRIT0RTXG5cblx0LyoqXG5cdCAqIEFzeW5jaHJvbm91cyBgbGlua2AuXG5cdCAqIEBwYXJhbSBzcmNwYXRoXG5cdCAqIEBwYXJhbSBkc3RwYXRoXG5cdCAqIEBwYXJhbSBjYWxsYmFja1xuXHQgKi9cblx0cHVibGljIGxpbmsoc3JjcGF0aDogc3RyaW5nLCBkc3RwYXRoOiBzdHJpbmcsIGNiOiBCRlNPbmVBcmdDYWxsYmFjayA9IG5vcENiKTogdm9pZCB7XG5cdFx0Y29uc3QgbmV3Q2IgPSB3cmFwQ2IoY2IsIDEpO1xuXHRcdHRyeSB7XG5cdFx0XHRzcmNwYXRoID0gbm9ybWFsaXplUGF0aChzcmNwYXRoKTtcblx0XHRcdGRzdHBhdGggPSBub3JtYWxpemVQYXRoKGRzdHBhdGgpO1xuXHRcdFx0YXNzZXJ0Um9vdCh0aGlzLnJvb3QpLmxpbmsoc3JjcGF0aCwgZHN0cGF0aCwgdGhpcy5jcmVkLCBuZXdDYik7XG5cdFx0fSBjYXRjaCAoZSkge1xuXHRcdFx0bmV3Q2IoZSk7XG5cdFx0fVxuXHR9XG5cblx0LyoqXG5cdCAqIFN5bmNocm9ub3VzIGBsaW5rYC5cblx0ICogQHBhcmFtIHNyY3BhdGhcblx0ICogQHBhcmFtIGRzdHBhdGhcblx0ICovXG5cdHB1YmxpYyBsaW5rU3luYyhzcmNwYXRoOiBzdHJpbmcsIGRzdHBhdGg6IHN0cmluZyk6IHZvaWQge1xuXHRcdHNyY3BhdGggPSBub3JtYWxpemVQYXRoKHNyY3BhdGgpO1xuXHRcdGRzdHBhdGggPSBub3JtYWxpemVQYXRoKGRzdHBhdGgpO1xuXHRcdHJldHVybiBhc3NlcnRSb290KHRoaXMucm9vdCkubGlua1N5bmMoc3JjcGF0aCwgZHN0cGF0aCwgdGhpcy5jcmVkKTtcblx0fVxuXG5cdC8qKlxuXHQgKiBBc3luY2hyb25vdXMgYHN5bWxpbmtgLlxuXHQgKiBAcGFyYW0gc3JjcGF0aFxuXHQgKiBAcGFyYW0gZHN0cGF0aFxuXHQgKiBAcGFyYW0gdHlwZSBjYW4gYmUgZWl0aGVyIGAnZGlyJ2Agb3IgYCdmaWxlJ2AgKGRlZmF1bHQgaXMgYCdmaWxlJ2ApXG5cdCAqIEBwYXJhbSBjYWxsYmFja1xuXHQgKi9cblx0cHVibGljIHN5bWxpbmsoc3JjcGF0aDogc3RyaW5nLCBkc3RwYXRoOiBzdHJpbmcsIGNiPzogQkZTT25lQXJnQ2FsbGJhY2spOiB2b2lkO1xuXHRwdWJsaWMgc3ltbGluayhzcmNwYXRoOiBzdHJpbmcsIGRzdHBhdGg6IHN0cmluZywgdHlwZT86IHN0cmluZywgY2I/OiBCRlNPbmVBcmdDYWxsYmFjayk6IHZvaWQ7XG5cdHB1YmxpYyBzeW1saW5rKHNyY3BhdGg6IHN0cmluZywgZHN0cGF0aDogc3RyaW5nLCBhcmczPzogYW55LCBjYjogQkZTT25lQXJnQ2FsbGJhY2sgPSBub3BDYik6IHZvaWQge1xuXHRcdGNvbnN0IHR5cGUgPSB0eXBlb2YgYXJnMyA9PT0gJ3N0cmluZycgPyBhcmczIDogJ2ZpbGUnO1xuXHRcdGNiID0gdHlwZW9mIGFyZzMgPT09ICdmdW5jdGlvbicgPyBhcmczIDogY2I7XG5cdFx0Y29uc3QgbmV3Q2IgPSB3cmFwQ2IoY2IsIDEpO1xuXHRcdHRyeSB7XG5cdFx0XHRpZiAodHlwZSAhPT0gJ2ZpbGUnICYmIHR5cGUgIT09ICdkaXInKSB7XG5cdFx0XHRcdHJldHVybiBuZXdDYihuZXcgQXBpRXJyb3IoRXJyb3JDb2RlLkVJTlZBTCwgJ0ludmFsaWQgdHlwZTogJyArIHR5cGUpKTtcblx0XHRcdH1cblx0XHRcdHNyY3BhdGggPSBub3JtYWxpemVQYXRoKHNyY3BhdGgpO1xuXHRcdFx0ZHN0cGF0aCA9IG5vcm1hbGl6ZVBhdGgoZHN0cGF0aCk7XG5cdFx0XHRhc3NlcnRSb290KHRoaXMucm9vdCkuc3ltbGluayhzcmNwYXRoLCBkc3RwYXRoLCB0eXBlLCB0aGlzLmNyZWQsIG5ld0NiKTtcblx0XHR9IGNhdGNoIChlKSB7XG5cdFx0XHRuZXdDYihlKTtcblx0XHR9XG5cdH1cblxuXHQvKipcblx0ICogU3luY2hyb25vdXMgYHN5bWxpbmtgLlxuXHQgKiBAcGFyYW0gc3JjcGF0aFxuXHQgKiBAcGFyYW0gZHN0cGF0aFxuXHQgKiBAcGFyYW0gdHlwZSBjYW4gYmUgZWl0aGVyIGAnZGlyJ2Agb3IgYCdmaWxlJ2AgKGRlZmF1bHQgaXMgYCdmaWxlJ2ApXG5cdCAqL1xuXHRwdWJsaWMgc3ltbGlua1N5bmMoc3JjcGF0aDogc3RyaW5nLCBkc3RwYXRoOiBzdHJpbmcsIHR5cGU/OiBzdHJpbmcpOiB2b2lkIHtcblx0XHRpZiAoIXR5cGUpIHtcblx0XHRcdHR5cGUgPSAnZmlsZSc7XG5cdFx0fSBlbHNlIGlmICh0eXBlICE9PSAnZmlsZScgJiYgdHlwZSAhPT0gJ2RpcicpIHtcblx0XHRcdHRocm93IG5ldyBBcGlFcnJvcihFcnJvckNvZGUuRUlOVkFMLCAnSW52YWxpZCB0eXBlOiAnICsgdHlwZSk7XG5cdFx0fVxuXHRcdHNyY3BhdGggPSBub3JtYWxpemVQYXRoKHNyY3BhdGgpO1xuXHRcdGRzdHBhdGggPSBub3JtYWxpemVQYXRoKGRzdHBhdGgpO1xuXHRcdHJldHVybiBhc3NlcnRSb290KHRoaXMucm9vdCkuc3ltbGlua1N5bmMoc3JjcGF0aCwgZHN0cGF0aCwgdHlwZSwgdGhpcy5jcmVkKTtcblx0fVxuXG5cdC8qKlxuXHQgKiBBc3luY2hyb25vdXMgcmVhZGxpbmsuXG5cdCAqIEBwYXJhbSBwYXRoXG5cdCAqIEBwYXJhbSBjYWxsYmFja1xuXHQgKi9cblx0cHVibGljIHJlYWRsaW5rKHBhdGg6IHN0cmluZywgY2I6IEJGU0NhbGxiYWNrPHN0cmluZz4gPSBub3BDYik6IHZvaWQge1xuXHRcdGNvbnN0IG5ld0NiID0gd3JhcENiKGNiLCAyKTtcblx0XHR0cnkge1xuXHRcdFx0cGF0aCA9IG5vcm1hbGl6ZVBhdGgocGF0aCk7XG5cdFx0XHRhc3NlcnRSb290KHRoaXMucm9vdCkucmVhZGxpbmsocGF0aCwgdGhpcy5jcmVkLCBuZXdDYik7XG5cdFx0fSBjYXRjaCAoZSkge1xuXHRcdFx0bmV3Q2IoZSk7XG5cdFx0fVxuXHR9XG5cblx0LyoqXG5cdCAqIFN5bmNocm9ub3VzIHJlYWRsaW5rLlxuXHQgKiBAcGFyYW0gcGF0aFxuXHQgKiBAcmV0dXJuIFtTdHJpbmddXG5cdCAqL1xuXHRwdWJsaWMgcmVhZGxpbmtTeW5jKHBhdGg6IHN0cmluZyk6IHN0cmluZyB7XG5cdFx0cGF0aCA9IG5vcm1hbGl6ZVBhdGgocGF0aCk7XG5cdFx0cmV0dXJuIGFzc2VydFJvb3QodGhpcy5yb290KS5yZWFkbGlua1N5bmMocGF0aCwgdGhpcy5jcmVkKTtcblx0fVxuXG5cdC8vIFBST1BFUlRZIE9QRVJBVElPTlNcblxuXHQvKipcblx0ICogQXN5bmNocm9ub3VzIGBjaG93bmAuXG5cdCAqIEBwYXJhbSBwYXRoXG5cdCAqIEBwYXJhbSB1aWRcblx0ICogQHBhcmFtIGdpZFxuXHQgKiBAcGFyYW0gY2FsbGJhY2tcblx0ICovXG5cdHB1YmxpYyBjaG93bihwYXRoOiBzdHJpbmcsIHVpZDogbnVtYmVyLCBnaWQ6IG51bWJlciwgY2I6IEJGU09uZUFyZ0NhbGxiYWNrID0gbm9wQ2IpOiB2b2lkIHtcblx0XHRjb25zdCBuZXdDYiA9IHdyYXBDYihjYiwgMSk7XG5cdFx0dHJ5IHtcblx0XHRcdHBhdGggPSBub3JtYWxpemVQYXRoKHBhdGgpO1xuXHRcdFx0YXNzZXJ0Um9vdCh0aGlzLnJvb3QpLmNob3duKHBhdGgsIGZhbHNlLCB1aWQsIGdpZCwgdGhpcy5jcmVkLCBuZXdDYik7XG5cdFx0fSBjYXRjaCAoZSkge1xuXHRcdFx0bmV3Q2IoZSk7XG5cdFx0fVxuXHR9XG5cblx0LyoqXG5cdCAqIFN5bmNocm9ub3VzIGBjaG93bmAuXG5cdCAqIEBwYXJhbSBwYXRoXG5cdCAqIEBwYXJhbSB1aWRcblx0ICogQHBhcmFtIGdpZFxuXHQgKi9cblx0cHVibGljIGNob3duU3luYyhwYXRoOiBzdHJpbmcsIHVpZDogbnVtYmVyLCBnaWQ6IG51bWJlcik6IHZvaWQge1xuXHRcdHBhdGggPSBub3JtYWxpemVQYXRoKHBhdGgpO1xuXHRcdGFzc2VydFJvb3QodGhpcy5yb290KS5jaG93blN5bmMocGF0aCwgZmFsc2UsIHVpZCwgZ2lkLCB0aGlzLmNyZWQpO1xuXHR9XG5cblx0LyoqXG5cdCAqIEFzeW5jaHJvbm91cyBgbGNob3duYC5cblx0ICogQHBhcmFtIHBhdGhcblx0ICogQHBhcmFtIHVpZFxuXHQgKiBAcGFyYW0gZ2lkXG5cdCAqIEBwYXJhbSBjYWxsYmFja1xuXHQgKi9cblx0cHVibGljIGxjaG93bihwYXRoOiBzdHJpbmcsIHVpZDogbnVtYmVyLCBnaWQ6IG51bWJlciwgY2I6IEJGU09uZUFyZ0NhbGxiYWNrID0gbm9wQ2IpOiB2b2lkIHtcblx0XHRjb25zdCBuZXdDYiA9IHdyYXBDYihjYiwgMSk7XG5cdFx0dHJ5IHtcblx0XHRcdHBhdGggPSBub3JtYWxpemVQYXRoKHBhdGgpO1xuXHRcdFx0YXNzZXJ0Um9vdCh0aGlzLnJvb3QpLmNob3duKHBhdGgsIHRydWUsIHVpZCwgZ2lkLCB0aGlzLmNyZWQsIG5ld0NiKTtcblx0XHR9IGNhdGNoIChlKSB7XG5cdFx0XHRuZXdDYihlKTtcblx0XHR9XG5cdH1cblxuXHQvKipcblx0ICogU3luY2hyb25vdXMgYGxjaG93bmAuXG5cdCAqIEBwYXJhbSBwYXRoXG5cdCAqIEBwYXJhbSB1aWRcblx0ICogQHBhcmFtIGdpZFxuXHQgKi9cblx0cHVibGljIGxjaG93blN5bmMocGF0aDogc3RyaW5nLCB1aWQ6IG51bWJlciwgZ2lkOiBudW1iZXIpOiB2b2lkIHtcblx0XHRwYXRoID0gbm9ybWFsaXplUGF0aChwYXRoKTtcblx0XHRhc3NlcnRSb290KHRoaXMucm9vdCkuY2hvd25TeW5jKHBhdGgsIHRydWUsIHVpZCwgZ2lkLCB0aGlzLmNyZWQpO1xuXHR9XG5cblx0LyoqXG5cdCAqIEFzeW5jaHJvbm91cyBgY2htb2RgLlxuXHQgKiBAcGFyYW0gcGF0aFxuXHQgKiBAcGFyYW0gbW9kZVxuXHQgKiBAcGFyYW0gY2FsbGJhY2tcblx0ICovXG5cdHB1YmxpYyBjaG1vZChwYXRoOiBzdHJpbmcsIG1vZGU6IG51bWJlciB8IHN0cmluZywgY2I6IEJGU09uZUFyZ0NhbGxiYWNrID0gbm9wQ2IpOiB2b2lkIHtcblx0XHRjb25zdCBuZXdDYiA9IHdyYXBDYihjYiwgMSk7XG5cdFx0dHJ5IHtcblx0XHRcdGNvbnN0IG51bU1vZGUgPSBub3JtYWxpemVNb2RlKG1vZGUsIC0xKTtcblx0XHRcdGlmIChudW1Nb2RlIDwgMCkge1xuXHRcdFx0XHR0aHJvdyBuZXcgQXBpRXJyb3IoRXJyb3JDb2RlLkVJTlZBTCwgYEludmFsaWQgbW9kZS5gKTtcblx0XHRcdH1cblx0XHRcdGFzc2VydFJvb3QodGhpcy5yb290KS5jaG1vZChub3JtYWxpemVQYXRoKHBhdGgpLCBmYWxzZSwgbnVtTW9kZSwgdGhpcy5jcmVkLCBuZXdDYik7XG5cdFx0fSBjYXRjaCAoZSkge1xuXHRcdFx0bmV3Q2IoZSk7XG5cdFx0fVxuXHR9XG5cblx0LyoqXG5cdCAqIFN5bmNocm9ub3VzIGBjaG1vZGAuXG5cdCAqIEBwYXJhbSBwYXRoXG5cdCAqIEBwYXJhbSBtb2RlXG5cdCAqL1xuXHRwdWJsaWMgY2htb2RTeW5jKHBhdGg6IHN0cmluZywgbW9kZTogc3RyaW5nIHwgbnVtYmVyKTogdm9pZCB7XG5cdFx0Y29uc3QgbnVtTW9kZSA9IG5vcm1hbGl6ZU1vZGUobW9kZSwgLTEpO1xuXHRcdGlmIChudW1Nb2RlIDwgMCkge1xuXHRcdFx0dGhyb3cgbmV3IEFwaUVycm9yKEVycm9yQ29kZS5FSU5WQUwsIGBJbnZhbGlkIG1vZGUuYCk7XG5cdFx0fVxuXHRcdHBhdGggPSBub3JtYWxpemVQYXRoKHBhdGgpO1xuXHRcdGFzc2VydFJvb3QodGhpcy5yb290KS5jaG1vZFN5bmMocGF0aCwgZmFsc2UsIG51bU1vZGUsIHRoaXMuY3JlZCk7XG5cdH1cblxuXHQvKipcblx0ICogQXN5bmNocm9ub3VzIGBsY2htb2RgLlxuXHQgKiBAcGFyYW0gcGF0aFxuXHQgKiBAcGFyYW0gbW9kZVxuXHQgKiBAcGFyYW0gY2FsbGJhY2tcblx0ICovXG5cdHB1YmxpYyBsY2htb2QocGF0aDogc3RyaW5nLCBtb2RlOiBudW1iZXIgfCBzdHJpbmcsIGNiOiBCRlNPbmVBcmdDYWxsYmFjayA9IG5vcENiKTogdm9pZCB7XG5cdFx0Y29uc3QgbmV3Q2IgPSB3cmFwQ2IoY2IsIDEpO1xuXHRcdHRyeSB7XG5cdFx0XHRjb25zdCBudW1Nb2RlID0gbm9ybWFsaXplTW9kZShtb2RlLCAtMSk7XG5cdFx0XHRpZiAobnVtTW9kZSA8IDApIHtcblx0XHRcdFx0dGhyb3cgbmV3IEFwaUVycm9yKEVycm9yQ29kZS5FSU5WQUwsIGBJbnZhbGlkIG1vZGUuYCk7XG5cdFx0XHR9XG5cdFx0XHRhc3NlcnRSb290KHRoaXMucm9vdCkuY2htb2Qobm9ybWFsaXplUGF0aChwYXRoKSwgdHJ1ZSwgbnVtTW9kZSwgdGhpcy5jcmVkLCBuZXdDYik7XG5cdFx0fSBjYXRjaCAoZSkge1xuXHRcdFx0bmV3Q2IoZSk7XG5cdFx0fVxuXHR9XG5cblx0LyoqXG5cdCAqIFN5bmNocm9ub3VzIGBsY2htb2RgLlxuXHQgKiBAcGFyYW0gcGF0aFxuXHQgKiBAcGFyYW0gbW9kZVxuXHQgKi9cblx0cHVibGljIGxjaG1vZFN5bmMocGF0aDogc3RyaW5nLCBtb2RlOiBudW1iZXIgfCBzdHJpbmcpOiB2b2lkIHtcblx0XHRjb25zdCBudW1Nb2RlID0gbm9ybWFsaXplTW9kZShtb2RlLCAtMSk7XG5cdFx0aWYgKG51bU1vZGUgPCAxKSB7XG5cdFx0XHR0aHJvdyBuZXcgQXBpRXJyb3IoRXJyb3JDb2RlLkVJTlZBTCwgYEludmFsaWQgbW9kZS5gKTtcblx0XHR9XG5cdFx0YXNzZXJ0Um9vdCh0aGlzLnJvb3QpLmNobW9kU3luYyhub3JtYWxpemVQYXRoKHBhdGgpLCB0cnVlLCBudW1Nb2RlLCB0aGlzLmNyZWQpO1xuXHR9XG5cblx0LyoqXG5cdCAqIENoYW5nZSBmaWxlIHRpbWVzdGFtcHMgb2YgdGhlIGZpbGUgcmVmZXJlbmNlZCBieSB0aGUgc3VwcGxpZWQgcGF0aC5cblx0ICogQHBhcmFtIHBhdGhcblx0ICogQHBhcmFtIGF0aW1lXG5cdCAqIEBwYXJhbSBtdGltZVxuXHQgKiBAcGFyYW0gY2FsbGJhY2tcblx0ICovXG5cdHB1YmxpYyB1dGltZXMocGF0aDogc3RyaW5nLCBhdGltZTogbnVtYmVyIHwgRGF0ZSwgbXRpbWU6IG51bWJlciB8IERhdGUsIGNiOiBCRlNPbmVBcmdDYWxsYmFjayA9IG5vcENiKTogdm9pZCB7XG5cdFx0Y29uc3QgbmV3Q2IgPSB3cmFwQ2IoY2IsIDEpO1xuXHRcdHRyeSB7XG5cdFx0XHRhc3NlcnRSb290KHRoaXMucm9vdCkudXRpbWVzKG5vcm1hbGl6ZVBhdGgocGF0aCksIG5vcm1hbGl6ZVRpbWUoYXRpbWUpLCBub3JtYWxpemVUaW1lKG10aW1lKSwgdGhpcy5jcmVkLCBuZXdDYik7XG5cdFx0fSBjYXRjaCAoZSkge1xuXHRcdFx0bmV3Q2IoZSk7XG5cdFx0fVxuXHR9XG5cblx0LyoqXG5cdCAqIENoYW5nZSBmaWxlIHRpbWVzdGFtcHMgb2YgdGhlIGZpbGUgcmVmZXJlbmNlZCBieSB0aGUgc3VwcGxpZWQgcGF0aC5cblx0ICogQHBhcmFtIHBhdGhcblx0ICogQHBhcmFtIGF0aW1lXG5cdCAqIEBwYXJhbSBtdGltZVxuXHQgKi9cblx0cHVibGljIHV0aW1lc1N5bmMocGF0aDogc3RyaW5nLCBhdGltZTogbnVtYmVyIHwgRGF0ZSwgbXRpbWU6IG51bWJlciB8IERhdGUpOiB2b2lkIHtcblx0XHRhc3NlcnRSb290KHRoaXMucm9vdCkudXRpbWVzU3luYyhub3JtYWxpemVQYXRoKHBhdGgpLCBub3JtYWxpemVUaW1lKGF0aW1lKSwgbm9ybWFsaXplVGltZShtdGltZSksIHRoaXMuY3JlZCk7XG5cdH1cblxuXHQvKipcblx0ICogQXN5bmNocm9ub3VzIGByZWFscGF0aGAuIFRoZSBjYWxsYmFjayBnZXRzIHR3byBhcmd1bWVudHNcblx0ICogYChlcnIsIHJlc29sdmVkUGF0aClgLiBNYXkgdXNlIGBwcm9jZXNzLmN3ZGAgdG8gcmVzb2x2ZSByZWxhdGl2ZSBwYXRocy5cblx0ICpcblx0ICogQGV4YW1wbGUgVXNhZ2UgZXhhbXBsZVxuXHQgKiAgIGxldCBjYWNoZSA9IHsnL2V0Yyc6Jy9wcml2YXRlL2V0Yyd9O1xuXHQgKiAgIGZzLnJlYWxwYXRoKCcvZXRjL3Bhc3N3ZCcsIGNhY2hlLCBmdW5jdGlvbiAoZXJyLCByZXNvbHZlZFBhdGgpIHtcblx0ICogICAgIGlmIChlcnIpIHRocm93IGVycjtcblx0ICogICAgIGNvbnNvbGUubG9nKHJlc29sdmVkUGF0aCk7XG5cdCAqICAgfSk7XG5cdCAqXG5cdCAqIEBwYXJhbSBwYXRoXG5cdCAqIEBwYXJhbSBjYWNoZSBBbiBvYmplY3QgbGl0ZXJhbCBvZiBtYXBwZWQgcGF0aHMgdGhhdCBjYW4gYmUgdXNlZCB0b1xuXHQgKiAgIGZvcmNlIGEgc3BlY2lmaWMgcGF0aCByZXNvbHV0aW9uIG9yIGF2b2lkIGFkZGl0aW9uYWwgYGZzLnN0YXRgIGNhbGxzIGZvclxuXHQgKiAgIGtub3duIHJlYWwgcGF0aHMuXG5cdCAqIEBwYXJhbSBjYWxsYmFja1xuXHQgKi9cblx0cHVibGljIHJlYWxwYXRoKHBhdGg6IHN0cmluZywgY2I/OiBCRlNDYWxsYmFjazxzdHJpbmc+KTogdm9pZDtcblx0cHVibGljIHJlYWxwYXRoKHBhdGg6IHN0cmluZywgY2FjaGU6IHsgW3BhdGg6IHN0cmluZ106IHN0cmluZyB9LCBjYjogQkZTQ2FsbGJhY2s8c3RyaW5nPik6IHZvaWQ7XG5cdHB1YmxpYyByZWFscGF0aChwYXRoOiBzdHJpbmcsIGFyZzI/OiBhbnksIGNiOiBCRlNDYWxsYmFjazxzdHJpbmc+ID0gbm9wQ2IpOiB2b2lkIHtcblx0XHRjb25zdCBjYWNoZSA9IHR5cGVvZiBhcmcyID09PSAnb2JqZWN0JyA/IGFyZzIgOiB7fTtcblx0XHRjYiA9IHR5cGVvZiBhcmcyID09PSAnZnVuY3Rpb24nID8gYXJnMiA6IG5vcENiO1xuXHRcdGNvbnN0IG5ld0NiID0gPChlcnI6IEFwaUVycm9yLCByZXNvbHZlZFBhdGg/OiBzdHJpbmcpID0+IGFueT53cmFwQ2IoY2IsIDIpO1xuXHRcdHRyeSB7XG5cdFx0XHRwYXRoID0gbm9ybWFsaXplUGF0aChwYXRoKTtcblx0XHRcdGFzc2VydFJvb3QodGhpcy5yb290KS5yZWFscGF0aChwYXRoLCBjYWNoZSwgdGhpcy5jcmVkLCBuZXdDYik7XG5cdFx0fSBjYXRjaCAoZSkge1xuXHRcdFx0bmV3Q2IoZSk7XG5cdFx0fVxuXHR9XG5cblx0LyoqXG5cdCAqIFN5bmNocm9ub3VzIGByZWFscGF0aGAuXG5cdCAqIEBwYXJhbSBwYXRoXG5cdCAqIEBwYXJhbSBjYWNoZSBBbiBvYmplY3QgbGl0ZXJhbCBvZiBtYXBwZWQgcGF0aHMgdGhhdCBjYW4gYmUgdXNlZCB0b1xuXHQgKiAgIGZvcmNlIGEgc3BlY2lmaWMgcGF0aCByZXNvbHV0aW9uIG9yIGF2b2lkIGFkZGl0aW9uYWwgYGZzLnN0YXRgIGNhbGxzIGZvclxuXHQgKiAgIGtub3duIHJlYWwgcGF0aHMuXG5cdCAqIEByZXR1cm4gW1N0cmluZ11cblx0ICovXG5cdHB1YmxpYyByZWFscGF0aFN5bmMocGF0aDogc3RyaW5nLCBjYWNoZTogeyBbcGF0aDogc3RyaW5nXTogc3RyaW5nIH0gPSB7fSk6IHN0cmluZyB7XG5cdFx0cGF0aCA9IG5vcm1hbGl6ZVBhdGgocGF0aCk7XG5cdFx0cmV0dXJuIGFzc2VydFJvb3QodGhpcy5yb290KS5yZWFscGF0aFN5bmMocGF0aCwgY2FjaGUsIHRoaXMuY3JlZCk7XG5cdH1cblxuXHRwdWJsaWMgd2F0Y2hGaWxlKGZpbGVuYW1lOiBzdHJpbmcsIGxpc3RlbmVyOiAoY3VycjogU3RhdHMsIHByZXY6IFN0YXRzKSA9PiB2b2lkKTogdm9pZDtcblx0cHVibGljIHdhdGNoRmlsZShmaWxlbmFtZTogc3RyaW5nLCBvcHRpb25zOiB7IHBlcnNpc3RlbnQ/OiBib29sZWFuOyBpbnRlcnZhbD86IG51bWJlciB9LCBsaXN0ZW5lcjogKGN1cnI6IFN0YXRzLCBwcmV2OiBTdGF0cykgPT4gdm9pZCk6IHZvaWQ7XG5cdHB1YmxpYyB3YXRjaEZpbGUoZmlsZW5hbWU6IHN0cmluZywgYXJnMjogYW55LCBsaXN0ZW5lcjogKGN1cnI6IFN0YXRzLCBwcmV2OiBTdGF0cykgPT4gdm9pZCA9IG5vcENiKTogdm9pZCB7XG5cdFx0dGhyb3cgbmV3IEFwaUVycm9yKEVycm9yQ29kZS5FTk9UU1VQKTtcblx0fVxuXG5cdHB1YmxpYyB1bndhdGNoRmlsZShmaWxlbmFtZTogc3RyaW5nLCBsaXN0ZW5lcjogKGN1cnI6IFN0YXRzLCBwcmV2OiBTdGF0cykgPT4gdm9pZCA9IG5vcENiKTogdm9pZCB7XG5cdFx0dGhyb3cgbmV3IEFwaUVycm9yKEVycm9yQ29kZS5FTk9UU1VQKTtcblx0fVxuXG5cdHB1YmxpYyB3YXRjaChmaWxlbmFtZTogc3RyaW5nLCBsaXN0ZW5lcj86IChldmVudDogc3RyaW5nLCBmaWxlbmFtZTogc3RyaW5nKSA9PiBhbnkpOiBfZnMuRlNXYXRjaGVyO1xuXHRwdWJsaWMgd2F0Y2goZmlsZW5hbWU6IHN0cmluZywgb3B0aW9uczogeyBwZXJzaXN0ZW50PzogYm9vbGVhbiB9LCBsaXN0ZW5lcj86IChldmVudDogc3RyaW5nLCBmaWxlbmFtZTogc3RyaW5nKSA9PiBhbnkpOiBfZnMuRlNXYXRjaGVyO1xuXHRwdWJsaWMgd2F0Y2goZmlsZW5hbWU6IHN0cmluZywgYXJnMjogYW55LCBsaXN0ZW5lcjogKGV2ZW50OiBzdHJpbmcsIGZpbGVuYW1lOiBzdHJpbmcpID0+IGFueSA9IG5vcENiKTogX2ZzLkZTV2F0Y2hlciB7XG5cdFx0dGhyb3cgbmV3IEFwaUVycm9yKEVycm9yQ29kZS5FTk9UU1VQKTtcblx0fVxuXG5cdC8qKlxuXHQgKiBBc3luY2hyb25vdXMgYGFjY2Vzc2AuXG5cdCAqIEBwYXJhbSBwYXRoXG5cdCAqIEBwYXJhbSBtb2RlXG5cdCAqIEBwYXJhbSBjYWxsYmFja1xuXHQgKi9cblx0cHVibGljIGFjY2VzcyhwYXRoOiBzdHJpbmcsIGNhbGxiYWNrOiAoZXJyOiBBcGlFcnJvcikgPT4gdm9pZCk6IHZvaWQ7XG5cdHB1YmxpYyBhY2Nlc3MocGF0aDogc3RyaW5nLCBtb2RlOiBudW1iZXIsIGNhbGxiYWNrOiAoZXJyOiBBcGlFcnJvcikgPT4gdm9pZCk6IHZvaWQ7XG5cdHB1YmxpYyBhY2Nlc3MocGF0aDogc3RyaW5nLCBhcmcyOiBhbnksIGNhbGxiYWNrOiAoZTogQXBpRXJyb3IpID0+IHZvaWQgPSBub3BDYik6IHZvaWQge1xuXHRcdGNvbnN0IG1vZGUgPSB0eXBlb2YgYXJnMiA9PT0gJ251bWJlcicgPyBhcmcyIDogRmlsZVBlcm0uUkVBRDtcblx0XHRjYWxsYmFjayA9IHR5cGVvZiBhcmcyID09PSAnZnVuY3Rpb24nID8gYXJnMiA6IG5vcENiO1xuXHRcdGNvbnN0IG5ld0NiID0gPChlcnI6IEFwaUVycm9yLCByZXNvbHZlZFBhdGg/OiBzdHJpbmcpID0+IGFueT53cmFwQ2IoY2FsbGJhY2ssIDIpO1xuXHRcdHRyeSB7XG5cdFx0XHRwYXRoID0gbm9ybWFsaXplUGF0aChwYXRoKTtcblx0XHRcdGFzc2VydFJvb3QodGhpcy5yb290KS5hY2Nlc3MocGF0aCwgbW9kZSwgdGhpcy5jcmVkLCBuZXdDYik7XG5cdFx0fSBjYXRjaCAoZSkge1xuXHRcdFx0bmV3Q2IoZSk7XG5cdFx0fVxuXHR9XG5cblx0LyoqXG5cdCAqIFN5bmNocm9ub3VzIGBhY2Nlc3NgLlxuXHQgKiBAcGFyYW0gcGF0aFxuXHQgKiBAcGFyYW0gbW9kZVxuXHQgKi9cblx0cHVibGljIGFjY2Vzc1N5bmMocGF0aDogc3RyaW5nLCBtb2RlOiBudW1iZXIgPSAwbzYwMCk6IHZvaWQge1xuXHRcdHBhdGggPSBub3JtYWxpemVQYXRoKHBhdGgpO1xuXHRcdHJldHVybiBhc3NlcnRSb290KHRoaXMucm9vdCkuYWNjZXNzU3luYyhwYXRoLCBtb2RlLCB0aGlzLmNyZWQpO1xuXHR9XG5cblx0cHVibGljIGNyZWF0ZVJlYWRTdHJlYW0oXG5cdFx0cGF0aDogc3RyaW5nLFxuXHRcdG9wdGlvbnM/OiB7XG5cdFx0XHRmbGFncz86IHN0cmluZztcblx0XHRcdGVuY29kaW5nPzogc3RyaW5nO1xuXHRcdFx0ZmQ/OiBudW1iZXI7XG5cdFx0XHRtb2RlPzogbnVtYmVyO1xuXHRcdFx0YXV0b0Nsb3NlPzogYm9vbGVhbjtcblx0XHR9XG5cdCk6IF9mcy5SZWFkU3RyZWFtIHtcblx0XHR0aHJvdyBuZXcgQXBpRXJyb3IoRXJyb3JDb2RlLkVOT1RTVVApO1xuXHR9XG5cblx0cHVibGljIGNyZWF0ZVdyaXRlU3RyZWFtKFxuXHRcdHBhdGg6IHN0cmluZyxcblx0XHRvcHRpb25zPzoge1xuXHRcdFx0ZmxhZ3M/OiBzdHJpbmc7XG5cdFx0XHRlbmNvZGluZz86IHN0cmluZztcblx0XHRcdGZkPzogbnVtYmVyO1xuXHRcdFx0bW9kZT86IG51bWJlcjtcblx0XHR9XG5cdCk6IF9mcy5Xcml0ZVN0cmVhbSB7XG5cdFx0dGhyb3cgbmV3IEFwaUVycm9yKEVycm9yQ29kZS5FTk9UU1VQKTtcblx0fVxuXG5cdC8qKlxuXHQgKiBGb3IgdW5pdCB0ZXN0aW5nLiBQYXNzZXMgYWxsIGluY29taW5nIGNhbGxiYWNrcyB0byBjYldyYXBwZXIgZm9yIHdyYXBwaW5nLlxuXHQgKi9cblx0cHVibGljIHdyYXBDYWxsYmFja3MoY2JXcmFwcGVyOiAoY2I6IEZ1bmN0aW9uLCBhcmdzOiBudW1iZXIpID0+IEZ1bmN0aW9uKSB7XG5cdFx0d3JhcENiSG9vayA9IDxhbnk+Y2JXcmFwcGVyO1xuXHR9XG5cblx0cHJpdmF0ZSBnZXRGZEZvckZpbGUoZmlsZTogRmlsZSk6IG51bWJlciB7XG5cdFx0Y29uc3QgZmQgPSB0aGlzLm5leHRGZCsrO1xuXHRcdHRoaXMuZmRNYXBbZmRdID0gZmlsZTtcblx0XHRyZXR1cm4gZmQ7XG5cdH1cblx0cHJpdmF0ZSBmZDJmaWxlKGZkOiBudW1iZXIpOiBGaWxlIHtcblx0XHRjb25zdCBydiA9IHRoaXMuZmRNYXBbZmRdO1xuXHRcdGlmIChydikge1xuXHRcdFx0cmV0dXJuIHJ2O1xuXHRcdH0gZWxzZSB7XG5cdFx0XHR0aHJvdyBuZXcgQXBpRXJyb3IoRXJyb3JDb2RlLkVCQURGLCAnSW52YWxpZCBmaWxlIGRlc2NyaXB0b3IuJyk7XG5cdFx0fVxuXHR9XG5cdHByaXZhdGUgY2xvc2VGZChmZDogbnVtYmVyKTogdm9pZCB7XG5cdFx0ZGVsZXRlIHRoaXMuZmRNYXBbZmRdO1xuXHR9XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgRlNNb2R1bGUgZXh0ZW5kcyBGUyB7XG5cdC8qKlxuXHQgKiBUaGUgRlMgY29uc3RydWN0b3IuXG5cdCAqL1xuXHRGUzogdHlwZW9mIEZTO1xuXHQvKipcblx0ICogVGhlIEZTLlN0YXRzIGNvbnN0cnVjdG9yLlxuXHQgKi9cblx0U3RhdHM6IHR5cGVvZiBTdGF0cztcblx0LyoqXG5cdCAqIFJldHJpZXZlIHRoZSBGUyBvYmplY3QgYmFja2luZyB0aGUgZnMgbW9kdWxlLlxuXHQgKi9cblx0Z2V0RlNNb2R1bGUoKTogRlM7XG5cdC8qKlxuXHQgKiBTZXQgdGhlIEZTIG9iamVjdCBiYWNraW5nIHRoZSBmcyBtb2R1bGUuXG5cdCAqL1xuXHRjaGFuZ2VGU01vZHVsZShuZXdGczogRlMpOiB2b2lkO1xufVxuIiwgImltcG9ydCB7IGRlZmF1bHQgYXMgRlMsIEZTTW9kdWxlIH0gZnJvbSAnLi9GUyc7XG5cbi8vIE1hbnVhbGx5IGV4cG9ydCB0aGUgaW5kaXZpZHVhbCBwdWJsaWMgZnVuY3Rpb25zIG9mIGZzLlxuLy8gUmVxdWlyZWQgYmVjYXVzZSBzb21lIGNvZGUgd2lsbCBpbnZva2UgZnVuY3Rpb25zIG9mZiBvZiB0aGUgbW9kdWxlLlxuLy8gZS5nLjpcbi8vIGxldCB3cml0ZUZpbGUgPSBmcy53cml0ZUZpbGU7XG4vLyB3cml0ZUZpbGUoLi4uKVxuXG4vKipcbiAqIEBoaWRkZW5cbiAqL1xubGV0IGZzOiBhbnkgPSBuZXcgRlMoKTtcbi8qKlxuICogQGhpZGRlblxuICovXG5jb25zdCBfZnNNb2NrOiBGU01vZHVsZSA9IDxhbnk+e307XG4vKipcbiAqIEBoaWRkZW5cbiAqL1xuZm9yIChjb25zdCBrZXkgb2YgT2JqZWN0LmdldE93blByb3BlcnR5TmFtZXMoRlMucHJvdG90eXBlKSkge1xuXHRpZiAodHlwZW9mIGZzW2tleV0gPT09ICdmdW5jdGlvbicpIHtcblx0XHRfZnNNb2NrW2tleV0gPSBmdW5jdGlvbiAoLi4uYXJncykge1xuXHRcdFx0cmV0dXJuICg8RnVuY3Rpb24+ZnNba2V5XSkuYXBwbHkoZnMsIGFyZ3MpO1xuXHRcdH07XG5cdH0gZWxzZSB7XG5cdFx0X2ZzTW9ja1trZXldID0gZnNba2V5XTtcblx0fVxufVxuX2ZzTW9jay5jaGFuZ2VGU01vZHVsZSA9IGZ1bmN0aW9uIChuZXdGczogRlMpOiB2b2lkIHtcblx0ZnMgPSBuZXdGcztcbn07XG5fZnNNb2NrLmdldEZTTW9kdWxlID0gZnVuY3Rpb24gKCk6IEZTIHtcblx0cmV0dXJuIGZzO1xufTtcbl9mc01vY2suRlMgPSBGUztcbl9mc01vY2suU3RhdHMgPSBGUy5TdGF0cztcblxuZXhwb3J0IGRlZmF1bHQgX2ZzTW9jaztcbiIsICIvKipcbiAqIEdyYWIgYmFnIG9mIHV0aWxpdHkgZnVuY3Rpb25zIHVzZWQgYWNyb3NzIHRoZSBjb2RlLlxuICovXG5pbXBvcnQgeyBGaWxlU3lzdGVtLCBCRlNPbmVBcmdDYWxsYmFjaywgRmlsZVN5c3RlbUNvbnN0cnVjdG9yIH0gZnJvbSAnLi9maWxlX3N5c3RlbSc7XG5pbXBvcnQgeyBFcnJvckNvZGUsIEFwaUVycm9yIH0gZnJvbSAnLi9hcGlfZXJyb3InO1xuaW1wb3J0IGxldmVuc2h0ZWluIGZyb20gJy4vbGV2ZW5zaHRlaW4nO1xuaW1wb3J0ICogYXMgcGF0aCBmcm9tICdwYXRoJztcbmltcG9ydCBDcmVkIGZyb20gJy4vY3JlZCc7XG5pbXBvcnQgeyBCdWZmZXIgfSBmcm9tICdidWZmZXInO1xuXG5leHBvcnQgZnVuY3Rpb24gZGVwcmVjYXRpb25NZXNzYWdlKHByaW50OiBib29sZWFuLCBmc05hbWU6IHN0cmluZywgb3B0czogYW55KTogdm9pZCB7XG5cdGlmIChwcmludCkge1xuXHRcdC8vIHRzbGludDpkaXNhYmxlLW5leHQtbGluZTpuby1jb25zb2xlXG5cdFx0Y29uc29sZS53YXJuKFxuXHRcdFx0YFske2ZzTmFtZX1dIERpcmVjdCBmaWxlIHN5c3RlbSBjb25zdHJ1Y3RvciB1c2FnZSBpcyBkZXByZWNhdGVkIGZvciB0aGlzIGZpbGUgc3lzdGVtLCBhbmQgd2lsbCBiZSByZW1vdmVkIGluIHRoZSBuZXh0IG1ham9yIHZlcnNpb24uIFBsZWFzZSB1c2UgdGhlICcke2ZzTmFtZX0uQ3JlYXRlKCR7SlNPTi5zdHJpbmdpZnkoXG5cdFx0XHRcdG9wdHNcblx0XHRcdCl9LCBjYWxsYmFjayknIG1ldGhvZCBpbnN0ZWFkLiBTZWUgaHR0cHM6Ly9naXRodWIuY29tL2p2aWxrL0Jyb3dzZXJGUy9pc3N1ZXMvMTc2IGZvciBtb3JlIGRldGFpbHMuYFxuXHRcdCk7XG5cdFx0Ly8gdHNsaW50OmVuYWJsZS1uZXh0LWxpbmU6bm8tY29uc29sZVxuXHR9XG59XG5cbi8qKlxuICogQ2hlY2tzIGZvciBhbnkgSUUgdmVyc2lvbiwgaW5jbHVkaW5nIElFMTEgd2hpY2ggcmVtb3ZlZCBNU0lFIGZyb20gdGhlXG4gKiB1c2VyQWdlbnQgc3RyaW5nLlxuICogQGhpZGRlblxuICovXG5leHBvcnQgY29uc3QgaXNJRTogYm9vbGVhbiA9IHR5cGVvZiBuYXZpZ2F0b3IgIT09ICd1bmRlZmluZWQnICYmICEhKC8obXNpZSkgKFtcXHcuXSspLy5leGVjKG5hdmlnYXRvci51c2VyQWdlbnQudG9Mb3dlckNhc2UoKSkgfHwgbmF2aWdhdG9yLnVzZXJBZ2VudC5pbmRleE9mKCdUcmlkZW50JykgIT09IC0xKTtcblxuLyoqXG4gKiBDaGVjayBpZiB3ZSdyZSBpbiBhIHdlYiB3b3JrZXIuXG4gKiBAaGlkZGVuXG4gKi9cbmV4cG9ydCBjb25zdCBpc1dlYldvcmtlcjogYm9vbGVhbiA9IHR5cGVvZiB3aW5kb3cgPT09ICd1bmRlZmluZWQnO1xuXG4vKipcbiAqIFRocm93cyBhbiBleGNlcHRpb24uIENhbGxlZCBvbiBjb2RlIHBhdGhzIHRoYXQgc2hvdWxkIGJlIGltcG9zc2libGUuXG4gKiBAaGlkZGVuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBmYWlsKCkge1xuXHR0aHJvdyBuZXcgRXJyb3IoJ0JGUyBoYXMgcmVhY2hlZCBhbiBpbXBvc3NpYmxlIGNvZGUgcGF0aDsgcGxlYXNlIGZpbGUgYSBidWcuJyk7XG59XG5cbi8qKlxuICogU3luY2hyb25vdXMgcmVjdXJzaXZlIG1ha2VkaXIuXG4gKiBAaGlkZGVuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBta2RpcnBTeW5jKHA6IHN0cmluZywgbW9kZTogbnVtYmVyLCBjcmVkOiBDcmVkLCBmczogRmlsZVN5c3RlbSk6IHZvaWQge1xuXHRpZiAoIWZzLmV4aXN0c1N5bmMocCwgY3JlZCkpIHtcblx0XHRta2RpcnBTeW5jKHBhdGguZGlybmFtZShwKSwgbW9kZSwgY3JlZCwgZnMpO1xuXHRcdGZzLm1rZGlyU3luYyhwLCBtb2RlLCBjcmVkKTtcblx0fVxufVxuXG4vKipcbiAqIENvbnZlcnRzIGEgYnVmZmVyIGludG8gYW4gYXJyYXkgYnVmZmVyLiBBdHRlbXB0cyB0byBkbyBzbyBpbiBhXG4gKiB6ZXJvLWNvcHkgbWFubmVyLCBlLmcuIHRoZSBhcnJheSByZWZlcmVuY2VzIHRoZSBzYW1lIG1lbW9yeS5cbiAqIEBoaWRkZW5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGJ1ZmZlcjJBcnJheUJ1ZmZlcihidWZmOiBCdWZmZXIpOiBBcnJheUJ1ZmZlciB8IFNoYXJlZEFycmF5QnVmZmVyIHtcblx0Y29uc3QgdTggPSBidWZmZXIyVWludDhhcnJheShidWZmKSxcblx0XHR1OG9mZnNldCA9IHU4LmJ5dGVPZmZzZXQsXG5cdFx0dThMZW4gPSB1OC5ieXRlTGVuZ3RoO1xuXHRpZiAodThvZmZzZXQgPT09IDAgJiYgdThMZW4gPT09IHU4LmJ1ZmZlci5ieXRlTGVuZ3RoKSB7XG5cdFx0cmV0dXJuIHU4LmJ1ZmZlcjtcblx0fSBlbHNlIHtcblx0XHRyZXR1cm4gdTguYnVmZmVyLnNsaWNlKHU4b2Zmc2V0LCB1OG9mZnNldCArIHU4TGVuKTtcblx0fVxufVxuXG4vKipcbiAqIENvbnZlcnRzIGEgYnVmZmVyIGludG8gYSBVaW50OEFycmF5LiBBdHRlbXB0cyB0byBkbyBzbyBpbiBhXG4gKiB6ZXJvLWNvcHkgbWFubmVyLCBlLmcuIHRoZSBhcnJheSByZWZlcmVuY2VzIHRoZSBzYW1lIG1lbW9yeS5cbiAqIEBoaWRkZW5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGJ1ZmZlcjJVaW50OGFycmF5KGJ1ZmY6IEJ1ZmZlcik6IFVpbnQ4QXJyYXkge1xuXHRpZiAoYnVmZiBpbnN0YW5jZW9mIFVpbnQ4QXJyYXkpIHtcblx0XHQvLyBCRlMgJiBOb2RlIHY0LjAgYnVmZmVycyAqYXJlKiBVaW50OEFycmF5cy5cblx0XHRyZXR1cm4gPGFueT5idWZmO1xuXHR9IGVsc2Uge1xuXHRcdC8vIFVpbnQ4QXJyYXlzIGNhbiBiZSBjb25zdHJ1Y3RlZCBmcm9tIGFycmF5aXNoIG51bWJlcnMuXG5cdFx0Ly8gQXQgdGhpcyBwb2ludCwgd2UgYXNzdW1lIHRoaXMgaXNuJ3QgYSBCRlMgYXJyYXkuXG5cdFx0cmV0dXJuIG5ldyBVaW50OEFycmF5KGJ1ZmYpO1xuXHR9XG59XG5cbi8qKlxuICogQ29udmVydHMgdGhlIGdpdmVuIFVpbnQ4QXJyYXkgaW50byBhIEJ1ZmZlci4gQXR0ZW1wdHMgdG8gYmUgemVyby1jb3B5LlxuICogQGhpZGRlblxuICovXG5leHBvcnQgZnVuY3Rpb24gdWludDhBcnJheTJCdWZmZXIodTg6IFVpbnQ4QXJyYXkpOiBCdWZmZXIge1xuXHRpZiAodTggaW5zdGFuY2VvZiBCdWZmZXIpIHtcblx0XHRyZXR1cm4gdTg7XG5cdH0gZWxzZSBpZiAodTguYnl0ZU9mZnNldCA9PT0gMCAmJiB1OC5ieXRlTGVuZ3RoID09PSB1OC5idWZmZXIuYnl0ZUxlbmd0aCkge1xuXHRcdHJldHVybiBhcnJheUJ1ZmZlcjJCdWZmZXIodTguYnVmZmVyKTtcblx0fSBlbHNlIHtcblx0XHRyZXR1cm4gQnVmZmVyLmZyb20oPEFycmF5QnVmZmVyPnU4LmJ1ZmZlciwgdTguYnl0ZU9mZnNldCwgdTguYnl0ZUxlbmd0aCk7XG5cdH1cbn1cblxuLyoqXG4gKiBDb252ZXJ0cyB0aGUgZ2l2ZW4gYXJyYXkgYnVmZmVyIGludG8gYSBCdWZmZXIuIEF0dGVtcHRzIHRvIGJlXG4gKiB6ZXJvLWNvcHkuXG4gKiBAaGlkZGVuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBhcnJheUJ1ZmZlcjJCdWZmZXIoYWI6IEFycmF5QnVmZmVyIHwgU2hhcmVkQXJyYXlCdWZmZXIpOiBCdWZmZXIge1xuXHRyZXR1cm4gQnVmZmVyLmZyb20oPEFycmF5QnVmZmVyPmFiKTtcbn1cblxuLyoqXG4gKiBDb3BpZXMgYSBzbGljZSBvZiB0aGUgZ2l2ZW4gYnVmZmVyXG4gKiBAaGlkZGVuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBjb3B5aW5nU2xpY2UoYnVmZjogQnVmZmVyLCBzdGFydDogbnVtYmVyID0gMCwgZW5kID0gYnVmZi5sZW5ndGgpOiBCdWZmZXIge1xuXHRpZiAoc3RhcnQgPCAwIHx8IGVuZCA8IDAgfHwgZW5kID4gYnVmZi5sZW5ndGggfHwgc3RhcnQgPiBlbmQpIHtcblx0XHR0aHJvdyBuZXcgVHlwZUVycm9yKGBJbnZhbGlkIHNsaWNlIGJvdW5kcyBvbiBidWZmZXIgb2YgbGVuZ3RoICR7YnVmZi5sZW5ndGh9OiBbJHtzdGFydH0sICR7ZW5kfV1gKTtcblx0fVxuXHRpZiAoYnVmZi5sZW5ndGggPT09IDApIHtcblx0XHQvLyBBdm9pZCBzMCBjb3JuZXIgY2FzZSBpbiBBcnJheUJ1ZmZlciBjYXNlLlxuXHRcdHJldHVybiBlbXB0eUJ1ZmZlcigpO1xuXHR9IGVsc2Uge1xuXHRcdGNvbnN0IHU4ID0gYnVmZmVyMlVpbnQ4YXJyYXkoYnVmZiksXG5cdFx0XHRzMCA9IGJ1ZmZbMF0sXG5cdFx0XHRuZXdTMCA9IChzMCArIDEpICUgMHhmZjtcblxuXHRcdGJ1ZmZbMF0gPSBuZXdTMDtcblx0XHRpZiAodThbMF0gPT09IG5ld1MwKSB7XG5cdFx0XHQvLyBTYW1lIG1lbW9yeS4gUmV2ZXJ0ICYgY29weS5cblx0XHRcdHU4WzBdID0gczA7XG5cdFx0XHRyZXR1cm4gdWludDhBcnJheTJCdWZmZXIodTguc2xpY2Uoc3RhcnQsIGVuZCkpO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHQvLyBSZXZlcnQuXG5cdFx0XHRidWZmWzBdID0gczA7XG5cdFx0XHRyZXR1cm4gdWludDhBcnJheTJCdWZmZXIodTguc3ViYXJyYXkoc3RhcnQsIGVuZCkpO1xuXHRcdH1cblx0fVxufVxuXG4vKipcbiAqIEBoaWRkZW5cbiAqL1xubGV0IGVtcHR5QnVmZjogQnVmZmVyIHwgbnVsbCA9IG51bGw7XG4vKipcbiAqIFJldHVybnMgYW4gZW1wdHkgYnVmZmVyLlxuICogQGhpZGRlblxuICovXG5leHBvcnQgZnVuY3Rpb24gZW1wdHlCdWZmZXIoKTogQnVmZmVyIHtcblx0aWYgKGVtcHR5QnVmZikge1xuXHRcdHJldHVybiBlbXB0eUJ1ZmY7XG5cdH1cblx0cmV0dXJuIChlbXB0eUJ1ZmYgPSBCdWZmZXIuYWxsb2MoMCkpO1xufVxuXG4vKipcbiAqIE9wdGlvbiB2YWxpZGF0b3IgZm9yIGEgQnVmZmVyIGZpbGUgc3lzdGVtIG9wdGlvbi5cbiAqIEBoaWRkZW5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGJ1ZmZlclZhbGlkYXRvcih2OiBvYmplY3QsIGNiOiBCRlNPbmVBcmdDYWxsYmFjayk6IHZvaWQge1xuXHRpZiAoQnVmZmVyLmlzQnVmZmVyKHYpKSB7XG5cdFx0Y2IoKTtcblx0fSBlbHNlIHtcblx0XHRjYihuZXcgQXBpRXJyb3IoRXJyb3JDb2RlLkVJTlZBTCwgYG9wdGlvbiBtdXN0IGJlIGEgQnVmZmVyLmApKTtcblx0fVxufVxuXG4vKipcbiAqIENoZWNrcyB0aGF0IHRoZSBnaXZlbiBvcHRpb25zIG9iamVjdCBpcyB2YWxpZCBmb3IgdGhlIGZpbGUgc3lzdGVtIG9wdGlvbnMuXG4gKiBAaGlkZGVuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBjaGVja09wdGlvbnMoZnNUeXBlOiBGaWxlU3lzdGVtQ29uc3RydWN0b3IsIG9wdHM6IGFueSwgY2I6IEJGU09uZUFyZ0NhbGxiYWNrKTogdm9pZCB7XG5cdGNvbnN0IG9wdHNJbmZvID0gZnNUeXBlLk9wdGlvbnM7XG5cdGNvbnN0IGZzTmFtZSA9IGZzVHlwZS5OYW1lO1xuXG5cdGxldCBwZW5kaW5nVmFsaWRhdG9ycyA9IDA7XG5cdGxldCBjYWxsYmFja0NhbGxlZCA9IGZhbHNlO1xuXHRsZXQgbG9vcEVuZGVkID0gZmFsc2U7XG5cdGZ1bmN0aW9uIHZhbGlkYXRvckNhbGxiYWNrKGU/OiBBcGlFcnJvcik6IHZvaWQge1xuXHRcdGlmICghY2FsbGJhY2tDYWxsZWQpIHtcblx0XHRcdGlmIChlKSB7XG5cdFx0XHRcdGNhbGxiYWNrQ2FsbGVkID0gdHJ1ZTtcblx0XHRcdFx0Y2IoZSk7XG5cdFx0XHR9XG5cdFx0XHRwZW5kaW5nVmFsaWRhdG9ycy0tO1xuXHRcdFx0aWYgKHBlbmRpbmdWYWxpZGF0b3JzID09PSAwICYmIGxvb3BFbmRlZCkge1xuXHRcdFx0XHRjYigpO1xuXHRcdFx0fVxuXHRcdH1cblx0fVxuXG5cdC8vIENoZWNrIGZvciByZXF1aXJlZCBvcHRpb25zLlxuXHRmb3IgKGNvbnN0IG9wdE5hbWUgaW4gb3B0c0luZm8pIHtcblx0XHRpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9wdHNJbmZvLCBvcHROYW1lKSkge1xuXHRcdFx0Y29uc3Qgb3B0ID0gb3B0c0luZm9bb3B0TmFtZV07XG5cdFx0XHRjb25zdCBwcm92aWRlZFZhbHVlID0gb3B0cyAmJiBvcHRzW29wdE5hbWVdO1xuXG5cdFx0XHRpZiAocHJvdmlkZWRWYWx1ZSA9PT0gdW5kZWZpbmVkIHx8IHByb3ZpZGVkVmFsdWUgPT09IG51bGwpIHtcblx0XHRcdFx0aWYgKCFvcHQub3B0aW9uYWwpIHtcblx0XHRcdFx0XHQvLyBSZXF1aXJlZCBvcHRpb24sIG5vdCBwcm92aWRlZC5cblx0XHRcdFx0XHQvLyBBbnkgaW5jb3JyZWN0IG9wdGlvbnMgcHJvdmlkZWQ/IFdoaWNoIG9uZXMgYXJlIGNsb3NlIHRvIHRoZSBwcm92aWRlZCBvbmU/XG5cdFx0XHRcdFx0Ly8gKGVkaXQgZGlzdGFuY2UgNSA9PT0gY2xvc2UpXG5cdFx0XHRcdFx0Y29uc3QgaW5jb3JyZWN0T3B0aW9ucyA9IE9iamVjdC5rZXlzKG9wdHMpXG5cdFx0XHRcdFx0XHQuZmlsdGVyKG8gPT4gIShvIGluIG9wdHNJbmZvKSlcblx0XHRcdFx0XHRcdC5tYXAoKGE6IHN0cmluZykgPT4ge1xuXHRcdFx0XHRcdFx0XHRyZXR1cm4geyBzdHI6IGEsIGRpc3RhbmNlOiBsZXZlbnNodGVpbihvcHROYW1lLCBhKSB9O1xuXHRcdFx0XHRcdFx0fSlcblx0XHRcdFx0XHRcdC5maWx0ZXIobyA9PiBvLmRpc3RhbmNlIDwgNSlcblx0XHRcdFx0XHRcdC5zb3J0KChhLCBiKSA9PiBhLmRpc3RhbmNlIC0gYi5kaXN0YW5jZSk7XG5cdFx0XHRcdFx0Ly8gVmFsaWRhdG9ycyBtYXkgYmUgc3luY2hyb25vdXMuXG5cdFx0XHRcdFx0aWYgKGNhbGxiYWNrQ2FsbGVkKSB7XG5cdFx0XHRcdFx0XHRyZXR1cm47XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdGNhbGxiYWNrQ2FsbGVkID0gdHJ1ZTtcblx0XHRcdFx0XHRyZXR1cm4gY2IoXG5cdFx0XHRcdFx0XHRuZXcgQXBpRXJyb3IoXG5cdFx0XHRcdFx0XHRcdEVycm9yQ29kZS5FSU5WQUwsXG5cdFx0XHRcdFx0XHRcdGBbJHtmc05hbWV9XSBSZXF1aXJlZCBvcHRpb24gJyR7b3B0TmFtZX0nIG5vdCBwcm92aWRlZC4ke1xuXHRcdFx0XHRcdFx0XHRcdGluY29ycmVjdE9wdGlvbnMubGVuZ3RoID4gMCA/IGAgWW91IHByb3ZpZGVkIHVucmVjb2duaXplZCBvcHRpb24gJyR7aW5jb3JyZWN0T3B0aW9uc1swXS5zdHJ9JzsgcGVyaGFwcyB5b3UgbWVhbnQgdG8gdHlwZSAnJHtvcHROYW1lfScuYCA6ICcnXG5cdFx0XHRcdFx0XHRcdH1cXG5PcHRpb24gZGVzY3JpcHRpb246ICR7b3B0LmRlc2NyaXB0aW9ufWBcblx0XHRcdFx0XHRcdClcblx0XHRcdFx0XHQpO1xuXHRcdFx0XHR9XG5cdFx0XHRcdC8vIEVsc2U6IE9wdGlvbmFsIG9wdGlvbiwgbm90IHByb3ZpZGVkLiBUaGF0IGlzIE9LLlxuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0Ly8gT3B0aW9uIHByb3ZpZGVkISBDaGVjayB0eXBlLlxuXHRcdFx0XHRsZXQgdHlwZU1hdGNoZXMgPSBmYWxzZTtcblx0XHRcdFx0aWYgKEFycmF5LmlzQXJyYXkob3B0LnR5cGUpKSB7XG5cdFx0XHRcdFx0dHlwZU1hdGNoZXMgPSBvcHQudHlwZS5pbmRleE9mKHR5cGVvZiBwcm92aWRlZFZhbHVlKSAhPT0gLTE7XG5cdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0dHlwZU1hdGNoZXMgPSB0eXBlb2YgcHJvdmlkZWRWYWx1ZSA9PT0gb3B0LnR5cGU7XG5cdFx0XHRcdH1cblx0XHRcdFx0aWYgKCF0eXBlTWF0Y2hlcykge1xuXHRcdFx0XHRcdC8vIFZhbGlkYXRvcnMgbWF5IGJlIHN5bmNocm9ub3VzLlxuXHRcdFx0XHRcdGlmIChjYWxsYmFja0NhbGxlZCkge1xuXHRcdFx0XHRcdFx0cmV0dXJuO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHRjYWxsYmFja0NhbGxlZCA9IHRydWU7XG5cdFx0XHRcdFx0cmV0dXJuIGNiKFxuXHRcdFx0XHRcdFx0bmV3IEFwaUVycm9yKFxuXHRcdFx0XHRcdFx0XHRFcnJvckNvZGUuRUlOVkFMLFxuXHRcdFx0XHRcdFx0XHRgWyR7ZnNOYW1lfV0gVmFsdWUgcHJvdmlkZWQgZm9yIG9wdGlvbiAke29wdE5hbWV9IGlzIG5vdCB0aGUgcHJvcGVyIHR5cGUuIEV4cGVjdGVkICR7XG5cdFx0XHRcdFx0XHRcdFx0QXJyYXkuaXNBcnJheShvcHQudHlwZSkgPyBgb25lIG9mIHske29wdC50eXBlLmpvaW4oJywgJyl9fWAgOiBvcHQudHlwZVxuXHRcdFx0XHRcdFx0XHR9LCBidXQgcmVjZWl2ZWQgJHt0eXBlb2YgcHJvdmlkZWRWYWx1ZX1cXG5PcHRpb24gZGVzY3JpcHRpb246ICR7b3B0LmRlc2NyaXB0aW9ufWBcblx0XHRcdFx0XHRcdClcblx0XHRcdFx0XHQpO1xuXHRcdFx0XHR9IGVsc2UgaWYgKG9wdC52YWxpZGF0b3IpIHtcblx0XHRcdFx0XHRwZW5kaW5nVmFsaWRhdG9ycysrO1xuXHRcdFx0XHRcdG9wdC52YWxpZGF0b3IocHJvdmlkZWRWYWx1ZSwgdmFsaWRhdG9yQ2FsbGJhY2spO1xuXHRcdFx0XHR9XG5cdFx0XHRcdC8vIE90aGVyd2lzZTogQWxsIGdvb2QhXG5cdFx0XHR9XG5cdFx0fVxuXHR9XG5cdGxvb3BFbmRlZCA9IHRydWU7XG5cdGlmIChwZW5kaW5nVmFsaWRhdG9ycyA9PT0gMCAmJiAhY2FsbGJhY2tDYWxsZWQpIHtcblx0XHRjYigpO1xuXHR9XG59XG4iLCAiLypcbiAqIExldmVuc2h0ZWluIGRpc3RhbmNlLCBmcm9tIHRoZSBganMtbGV2ZW5zaHRlaW5gIE5QTSBtb2R1bGUuXG4gKiBDb3BpZWQgaGVyZSB0byBhdm9pZCBjb21wbGV4aXR5IG9mIGFkZGluZyBhbm90aGVyIENvbW1vbkpTIG1vZHVsZSBkZXBlbmRlbmN5LlxuICovXG5cbmZ1bmN0aW9uIF9taW4oZDA6IG51bWJlciwgZDE6IG51bWJlciwgZDI6IG51bWJlciwgYng6IG51bWJlciwgYXk6IG51bWJlcik6IG51bWJlciB7XG5cdHJldHVybiBkMCA8IGQxIHx8IGQyIDwgZDEgPyAoZDAgPiBkMiA/IGQyICsgMSA6IGQwICsgMSkgOiBieCA9PT0gYXkgPyBkMSA6IGQxICsgMTtcbn1cblxuLyoqXG4gKiBDYWxjdWxhdGVzIGxldmVuc2h0ZWluIGRpc3RhbmNlLlxuICogQHBhcmFtIGFcbiAqIEBwYXJhbSBiXG4gKi9cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIGxldmVuc2h0ZWluKGE6IHN0cmluZywgYjogc3RyaW5nKTogbnVtYmVyIHtcblx0aWYgKGEgPT09IGIpIHtcblx0XHRyZXR1cm4gMDtcblx0fVxuXG5cdGlmIChhLmxlbmd0aCA+IGIubGVuZ3RoKSB7XG5cdFx0Y29uc3QgdG1wID0gYTtcblx0XHRhID0gYjtcblx0XHRiID0gdG1wO1xuXHR9XG5cblx0bGV0IGxhID0gYS5sZW5ndGg7XG5cdGxldCBsYiA9IGIubGVuZ3RoO1xuXG5cdHdoaWxlIChsYSA+IDAgJiYgYS5jaGFyQ29kZUF0KGxhIC0gMSkgPT09IGIuY2hhckNvZGVBdChsYiAtIDEpKSB7XG5cdFx0bGEtLTtcblx0XHRsYi0tO1xuXHR9XG5cblx0bGV0IG9mZnNldCA9IDA7XG5cblx0d2hpbGUgKG9mZnNldCA8IGxhICYmIGEuY2hhckNvZGVBdChvZmZzZXQpID09PSBiLmNoYXJDb2RlQXQob2Zmc2V0KSkge1xuXHRcdG9mZnNldCsrO1xuXHR9XG5cblx0bGEgLT0gb2Zmc2V0O1xuXHRsYiAtPSBvZmZzZXQ7XG5cblx0aWYgKGxhID09PSAwIHx8IGxiID09PSAxKSB7XG5cdFx0cmV0dXJuIGxiO1xuXHR9XG5cblx0Y29uc3QgdmVjdG9yID0gbmV3IEFycmF5PG51bWJlcj4obGEgPDwgMSk7XG5cblx0Zm9yIChsZXQgeSA9IDA7IHkgPCBsYTsgKSB7XG5cdFx0dmVjdG9yW2xhICsgeV0gPSBhLmNoYXJDb2RlQXQob2Zmc2V0ICsgeSk7XG5cdFx0dmVjdG9yW3ldID0gKyt5O1xuXHR9XG5cblx0bGV0IHg6IG51bWJlcjtcblx0bGV0IGQwOiBudW1iZXI7XG5cdGxldCBkMTogbnVtYmVyO1xuXHRsZXQgZDI6IG51bWJlcjtcblx0bGV0IGQzOiBudW1iZXI7XG5cdGZvciAoeCA9IDA7IHggKyAzIDwgbGI7ICkge1xuXHRcdGNvbnN0IGJ4MCA9IGIuY2hhckNvZGVBdChvZmZzZXQgKyAoZDAgPSB4KSk7XG5cdFx0Y29uc3QgYngxID0gYi5jaGFyQ29kZUF0KG9mZnNldCArIChkMSA9IHggKyAxKSk7XG5cdFx0Y29uc3QgYngyID0gYi5jaGFyQ29kZUF0KG9mZnNldCArIChkMiA9IHggKyAyKSk7XG5cdFx0Y29uc3QgYngzID0gYi5jaGFyQ29kZUF0KG9mZnNldCArIChkMyA9IHggKyAzKSk7XG5cdFx0bGV0IGRkID0gKHggKz0gNCk7XG5cdFx0Zm9yIChsZXQgeSA9IDA7IHkgPCBsYTsgKSB7XG5cdFx0XHRjb25zdCBheSA9IHZlY3RvcltsYSArIHldO1xuXHRcdFx0Y29uc3QgZHkgPSB2ZWN0b3JbeV07XG5cdFx0XHRkMCA9IF9taW4oZHksIGQwLCBkMSwgYngwLCBheSk7XG5cdFx0XHRkMSA9IF9taW4oZDAsIGQxLCBkMiwgYngxLCBheSk7XG5cdFx0XHRkMiA9IF9taW4oZDEsIGQyLCBkMywgYngyLCBheSk7XG5cdFx0XHRkZCA9IF9taW4oZDIsIGQzLCBkZCwgYngzLCBheSk7XG5cdFx0XHR2ZWN0b3JbeSsrXSA9IGRkO1xuXHRcdFx0ZDMgPSBkMjtcblx0XHRcdGQyID0gZDE7XG5cdFx0XHRkMSA9IGQwO1xuXHRcdFx0ZDAgPSBkeTtcblx0XHR9XG5cdH1cblxuXHRsZXQgZGQ6IG51bWJlciA9IDA7XG5cdGZvciAoOyB4IDwgbGI7ICkge1xuXHRcdGNvbnN0IGJ4MCA9IGIuY2hhckNvZGVBdChvZmZzZXQgKyAoZDAgPSB4KSk7XG5cdFx0ZGQgPSArK3g7XG5cdFx0Zm9yIChsZXQgeSA9IDA7IHkgPCBsYTsgeSsrKSB7XG5cdFx0XHRjb25zdCBkeSA9IHZlY3Rvclt5XTtcblx0XHRcdHZlY3Rvclt5XSA9IGRkID0gZHkgPCBkMCB8fCBkZCA8IGQwID8gKGR5ID4gZGQgPyBkZCArIDEgOiBkeSArIDEpIDogYngwID09PSB2ZWN0b3JbbGEgKyB5XSA/IGQwIDogZDAgKyAxO1xuXHRcdFx0ZDAgPSBkeTtcblx0XHR9XG5cdH1cblxuXHRyZXR1cm4gZGQ7XG59XG4iLCAiLyoqXG4gKiBEZWZpbmVzIGFuIEVtc2NyaXB0ZW4gZmlsZSBzeXN0ZW0gb2JqZWN0IGZvciB1c2UgaW4gdGhlIEVtc2NyaXB0ZW4gdmlydHVhbFxuICogZmlsZXN5c3RlbS4gQWxsb3dzIHlvdSB0byB1c2Ugc3luY2hyb25vdXMgQnJvd3NlckZTIGZpbGUgc3lzdGVtcyBmcm9tIHdpdGhpblxuICogRW1zY3JpcHRlbi5cbiAqXG4gKiBZb3UgY2FuIGNvbnN0cnVjdCBhIEJGU0Vtc2NyaXB0ZW5GUywgbW91bnQgaXQgdXNpbmcgaXRzIG1vdW50IGNvbW1hbmQsXG4gKiBhbmQgdGhlbiBtb3VudCBpdCBpbnRvIEVtc2NyaXB0ZW4uXG4gKlxuICogQWRhcHRlZCBmcm9tIEVtc2NyaXB0ZW4ncyBOb2RlRlM6XG4gKiBodHRwczovL3Jhdy5naXRodWIuY29tL2tyaXBrZW4vZW1zY3JpcHRlbi9tYXN0ZXIvc3JjL2xpYnJhcnlfbm9kZWZzLmpzXG4gKi9cbmltcG9ydCBGUyBmcm9tICcuLi9jb3JlL0ZTJztcbmltcG9ydCBmcyBmcm9tICcuLi9jb3JlL25vZGVfZnMnO1xuaW1wb3J0IE5vZGVTdGF0cyBmcm9tICcuLi9jb3JlL3N0YXRzJztcbmltcG9ydCB7IHVpbnQ4QXJyYXkyQnVmZmVyIH0gZnJvbSAnLi4vY29yZS91dGlsJztcblxuZXhwb3J0IGludGVyZmFjZSBTdGF0cyB7XG5cdGRldjogbnVtYmVyO1xuXHRpbm86IG51bWJlcjtcblx0bW9kZTogbnVtYmVyO1xuXHRubGluazogbnVtYmVyO1xuXHR1aWQ6IG51bWJlcjtcblx0Z2lkOiBudW1iZXI7XG5cdHJkZXY6IG51bWJlcjtcblx0c2l6ZTogbnVtYmVyO1xuXHRibGtzaXplOiBudW1iZXI7XG5cdGJsb2NrczogbnVtYmVyO1xuXHRhdGltZTogRGF0ZTtcblx0bXRpbWU6IERhdGU7XG5cdGN0aW1lOiBEYXRlO1xuXHR0aW1lc3RhbXA/OiBudW1iZXI7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgRW1zY3JpcHRlbkZTTm9kZSB7XG5cdG5hbWU6IHN0cmluZztcblx0bW9kZTogbnVtYmVyO1xuXHRwYXJlbnQ6IEVtc2NyaXB0ZW5GU05vZGU7XG5cdG1vdW50OiB7IG9wdHM6IHsgcm9vdDogc3RyaW5nIH0gfTtcblx0c3RyZWFtX29wczogRW1zY3JpcHRlblN0cmVhbU9wcztcblx0bm9kZV9vcHM6IEVtc2NyaXB0ZW5Ob2RlT3BzO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIEVtc2NyaXB0ZW5TdHJlYW0ge1xuXHRub2RlOiBFbXNjcmlwdGVuRlNOb2RlO1xuXHRuZmQ6IGFueTtcblx0ZmxhZ3M6IHN0cmluZztcblx0cG9zaXRpb246IG51bWJlcjtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBFbXNjcmlwdGVuTm9kZU9wcyB7XG5cdGdldGF0dHIobm9kZTogRW1zY3JpcHRlbkZTTm9kZSk6IFN0YXRzO1xuXHRzZXRhdHRyKG5vZGU6IEVtc2NyaXB0ZW5GU05vZGUsIGF0dHI6IFN0YXRzKTogdm9pZDtcblx0bG9va3VwKHBhcmVudDogRW1zY3JpcHRlbkZTTm9kZSwgbmFtZTogc3RyaW5nKTogRW1zY3JpcHRlbkZTTm9kZTtcblx0bWtub2QocGFyZW50OiBFbXNjcmlwdGVuRlNOb2RlLCBuYW1lOiBzdHJpbmcsIG1vZGU6IG51bWJlciwgZGV2OiBhbnkpOiBFbXNjcmlwdGVuRlNOb2RlO1xuXHRyZW5hbWUob2xkTm9kZTogRW1zY3JpcHRlbkZTTm9kZSwgbmV3RGlyOiBFbXNjcmlwdGVuRlNOb2RlLCBuZXdOYW1lOiBzdHJpbmcpOiB2b2lkO1xuXHR1bmxpbmsocGFyZW50OiBFbXNjcmlwdGVuRlNOb2RlLCBuYW1lOiBzdHJpbmcpOiB2b2lkO1xuXHRybWRpcihwYXJlbnQ6IEVtc2NyaXB0ZW5GU05vZGUsIG5hbWU6IHN0cmluZyk6IHZvaWQ7XG5cdHJlYWRkaXIobm9kZTogRW1zY3JpcHRlbkZTTm9kZSk6IHN0cmluZ1tdO1xuXHRzeW1saW5rKHBhcmVudDogRW1zY3JpcHRlbkZTTm9kZSwgbmV3TmFtZTogc3RyaW5nLCBvbGRQYXRoOiBzdHJpbmcpOiB2b2lkO1xuXHRyZWFkbGluayhub2RlOiBFbXNjcmlwdGVuRlNOb2RlKTogc3RyaW5nO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIEVtc2NyaXB0ZW5TdHJlYW1PcHMge1xuXHRvcGVuKHN0cmVhbTogRW1zY3JpcHRlblN0cmVhbSk6IHZvaWQ7XG5cdGNsb3NlKHN0cmVhbTogRW1zY3JpcHRlblN0cmVhbSk6IHZvaWQ7XG5cdHJlYWQoc3RyZWFtOiBFbXNjcmlwdGVuU3RyZWFtLCBidWZmZXI6IFVpbnQ4QXJyYXksIG9mZnNldDogbnVtYmVyLCBsZW5ndGg6IG51bWJlciwgcG9zaXRpb246IG51bWJlcik6IG51bWJlcjtcblx0d3JpdGUoc3RyZWFtOiBFbXNjcmlwdGVuU3RyZWFtLCBidWZmZXI6IFVpbnQ4QXJyYXksIG9mZnNldDogbnVtYmVyLCBsZW5ndGg6IG51bWJlciwgcG9zaXRpb246IG51bWJlcik6IG51bWJlcjtcblx0bGxzZWVrKHN0cmVhbTogRW1zY3JpcHRlblN0cmVhbSwgb2Zmc2V0OiBudW1iZXIsIHdoZW5jZTogbnVtYmVyKTogbnVtYmVyO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIEVtc2NyaXB0ZW5GUyB7XG5cdG5vZGVfb3BzOiBFbXNjcmlwdGVuTm9kZU9wcztcblx0c3RyZWFtX29wczogRW1zY3JpcHRlblN0cmVhbU9wcztcblx0bW91bnQobW91bnQ6IHsgb3B0czogeyByb290OiBzdHJpbmcgfSB9KTogRW1zY3JpcHRlbkZTTm9kZTtcblx0Y3JlYXRlTm9kZShwYXJlbnQ6IEVtc2NyaXB0ZW5GU05vZGUsIG5hbWU6IHN0cmluZywgbW9kZTogbnVtYmVyLCBkZXY/OiBhbnkpOiBFbXNjcmlwdGVuRlNOb2RlO1xuXHRnZXRNb2RlKHBhdGg6IHN0cmluZyk6IG51bWJlcjtcblx0cmVhbFBhdGgobm9kZTogRW1zY3JpcHRlbkZTTm9kZSk6IHN0cmluZztcbn1cblxuY2xhc3MgQkZTRW1zY3JpcHRlblN0cmVhbU9wcyBpbXBsZW1lbnRzIEVtc2NyaXB0ZW5TdHJlYW1PcHMge1xuXHRwdWJsaWMgUEFUSDogYW55O1xuXHRwcml2YXRlIEZTOiBhbnk7XG5cdHByaXZhdGUgRVJSTk9fQ09ERVM6IGFueTtcblx0cHJpdmF0ZSBub2RlZnM6IEZTO1xuXG5cdGNvbnN0cnVjdG9yKHByaXZhdGUgZnM6IEJGU0Vtc2NyaXB0ZW5GUykge1xuXHRcdHRoaXMubm9kZWZzID0gZnMuZ2V0Tm9kZUZTKCk7XG5cdFx0dGhpcy5GUyA9IGZzLmdldEZTKCk7XG5cdFx0dGhpcy5QQVRIID0gZnMuZ2V0UEFUSCgpO1xuXHRcdHRoaXMuRVJSTk9fQ09ERVMgPSBmcy5nZXRFUlJOT19DT0RFUygpO1xuXHR9XG5cblx0cHVibGljIG9wZW4oc3RyZWFtOiBFbXNjcmlwdGVuU3RyZWFtKTogdm9pZCB7XG5cdFx0Y29uc3QgcGF0aCA9IHRoaXMuZnMucmVhbFBhdGgoc3RyZWFtLm5vZGUpO1xuXHRcdGNvbnN0IEZTID0gdGhpcy5GUztcblx0XHR0cnkge1xuXHRcdFx0aWYgKEZTLmlzRmlsZShzdHJlYW0ubm9kZS5tb2RlKSkge1xuXHRcdFx0XHRzdHJlYW0ubmZkID0gdGhpcy5ub2RlZnMub3BlblN5bmMocGF0aCwgdGhpcy5mcy5mbGFnc1RvUGVybWlzc2lvblN0cmluZyhzdHJlYW0uZmxhZ3MpKTtcblx0XHRcdH1cblx0XHR9IGNhdGNoIChlKSB7XG5cdFx0XHRpZiAoIWUuY29kZSkge1xuXHRcdFx0XHR0aHJvdyBlO1xuXHRcdFx0fVxuXHRcdFx0dGhyb3cgbmV3IEZTLkVycm5vRXJyb3IodGhpcy5FUlJOT19DT0RFU1tlLmNvZGVdKTtcblx0XHR9XG5cdH1cblxuXHRwdWJsaWMgY2xvc2Uoc3RyZWFtOiBFbXNjcmlwdGVuU3RyZWFtKTogdm9pZCB7XG5cdFx0Y29uc3QgRlMgPSB0aGlzLkZTO1xuXHRcdHRyeSB7XG5cdFx0XHRpZiAoRlMuaXNGaWxlKHN0cmVhbS5ub2RlLm1vZGUpICYmIHN0cmVhbS5uZmQpIHtcblx0XHRcdFx0dGhpcy5ub2RlZnMuY2xvc2VTeW5jKHN0cmVhbS5uZmQpO1xuXHRcdFx0fVxuXHRcdH0gY2F0Y2ggKGUpIHtcblx0XHRcdGlmICghZS5jb2RlKSB7XG5cdFx0XHRcdHRocm93IGU7XG5cdFx0XHR9XG5cdFx0XHR0aHJvdyBuZXcgRlMuRXJybm9FcnJvcih0aGlzLkVSUk5PX0NPREVTW2UuY29kZV0pO1xuXHRcdH1cblx0fVxuXG5cdHB1YmxpYyByZWFkKHN0cmVhbTogRW1zY3JpcHRlblN0cmVhbSwgYnVmZmVyOiBVaW50OEFycmF5LCBvZmZzZXQ6IG51bWJlciwgbGVuZ3RoOiBudW1iZXIsIHBvc2l0aW9uOiBudW1iZXIpOiBudW1iZXIge1xuXHRcdC8vIEF2b2lkIGNvcHlpbmcgb3ZlcmhlYWQgYnkgcmVhZGluZyBkaXJlY3RseSBpbnRvIGJ1ZmZlci5cblx0XHR0cnkge1xuXHRcdFx0cmV0dXJuIHRoaXMubm9kZWZzLnJlYWRTeW5jKHN0cmVhbS5uZmQsIHVpbnQ4QXJyYXkyQnVmZmVyKGJ1ZmZlciksIG9mZnNldCwgbGVuZ3RoLCBwb3NpdGlvbik7XG5cdFx0fSBjYXRjaCAoZSkge1xuXHRcdFx0dGhyb3cgbmV3IHRoaXMuRlMuRXJybm9FcnJvcih0aGlzLkVSUk5PX0NPREVTW2UuY29kZV0pO1xuXHRcdH1cblx0fVxuXG5cdHB1YmxpYyB3cml0ZShzdHJlYW06IEVtc2NyaXB0ZW5TdHJlYW0sIGJ1ZmZlcjogVWludDhBcnJheSwgb2Zmc2V0OiBudW1iZXIsIGxlbmd0aDogbnVtYmVyLCBwb3NpdGlvbjogbnVtYmVyKTogbnVtYmVyIHtcblx0XHQvLyBBdm9pZCBjb3B5aW5nIG92ZXJoZWFkLlxuXHRcdHRyeSB7XG5cdFx0XHRyZXR1cm4gdGhpcy5ub2RlZnMud3JpdGVTeW5jKHN0cmVhbS5uZmQsIHVpbnQ4QXJyYXkyQnVmZmVyKGJ1ZmZlciksIG9mZnNldCwgbGVuZ3RoLCBwb3NpdGlvbik7XG5cdFx0fSBjYXRjaCAoZSkge1xuXHRcdFx0dGhyb3cgbmV3IHRoaXMuRlMuRXJybm9FcnJvcih0aGlzLkVSUk5PX0NPREVTW2UuY29kZV0pO1xuXHRcdH1cblx0fVxuXG5cdHB1YmxpYyBsbHNlZWsoc3RyZWFtOiBFbXNjcmlwdGVuU3RyZWFtLCBvZmZzZXQ6IG51bWJlciwgd2hlbmNlOiBudW1iZXIpOiBudW1iZXIge1xuXHRcdGxldCBwb3NpdGlvbiA9IG9mZnNldDtcblx0XHRpZiAod2hlbmNlID09PSAxKSB7XG5cdFx0XHQvLyBTRUVLX0NVUi5cblx0XHRcdHBvc2l0aW9uICs9IHN0cmVhbS5wb3NpdGlvbjtcblx0XHR9IGVsc2UgaWYgKHdoZW5jZSA9PT0gMikge1xuXHRcdFx0Ly8gU0VFS19FTkQuXG5cdFx0XHRpZiAodGhpcy5GUy5pc0ZpbGUoc3RyZWFtLm5vZGUubW9kZSkpIHtcblx0XHRcdFx0dHJ5IHtcblx0XHRcdFx0XHRjb25zdCBzdGF0ID0gdGhpcy5ub2RlZnMuZnN0YXRTeW5jKHN0cmVhbS5uZmQpO1xuXHRcdFx0XHRcdHBvc2l0aW9uICs9IHN0YXQuc2l6ZTtcblx0XHRcdFx0fSBjYXRjaCAoZSkge1xuXHRcdFx0XHRcdHRocm93IG5ldyB0aGlzLkZTLkVycm5vRXJyb3IodGhpcy5FUlJOT19DT0RFU1tlLmNvZGVdKTtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH1cblxuXHRcdGlmIChwb3NpdGlvbiA8IDApIHtcblx0XHRcdHRocm93IG5ldyB0aGlzLkZTLkVycm5vRXJyb3IodGhpcy5FUlJOT19DT0RFUy5FSU5WQUwpO1xuXHRcdH1cblxuXHRcdHN0cmVhbS5wb3NpdGlvbiA9IHBvc2l0aW9uO1xuXHRcdHJldHVybiBwb3NpdGlvbjtcblx0fVxufVxuXG5jbGFzcyBCRlNFbXNjcmlwdGVuTm9kZU9wcyBpbXBsZW1lbnRzIEVtc2NyaXB0ZW5Ob2RlT3BzIHtcblx0cHJpdmF0ZSBGUzogYW55O1xuXHRwcml2YXRlIFBBVEg6IGFueTtcblx0cHJpdmF0ZSBFUlJOT19DT0RFUzogYW55O1xuXHRwcml2YXRlIG5vZGVmczogRlM7XG5cblx0Y29uc3RydWN0b3IocHJpdmF0ZSBmczogQkZTRW1zY3JpcHRlbkZTKSB7XG5cdFx0dGhpcy5ub2RlZnMgPSBmcy5nZXROb2RlRlMoKTtcblx0XHR0aGlzLkZTID0gZnMuZ2V0RlMoKTtcblx0XHR0aGlzLlBBVEggPSBmcy5nZXRQQVRIKCk7XG5cdFx0dGhpcy5FUlJOT19DT0RFUyA9IGZzLmdldEVSUk5PX0NPREVTKCk7XG5cdH1cblxuXHRwdWJsaWMgZ2V0YXR0cihub2RlOiBFbXNjcmlwdGVuRlNOb2RlKTogU3RhdHMge1xuXHRcdGNvbnN0IHBhdGggPSB0aGlzLmZzLnJlYWxQYXRoKG5vZGUpO1xuXHRcdGxldCBzdGF0OiBOb2RlU3RhdHM7XG5cdFx0dHJ5IHtcblx0XHRcdHN0YXQgPSB0aGlzLm5vZGVmcy5sc3RhdFN5bmMocGF0aCk7XG5cdFx0fSBjYXRjaCAoZSkge1xuXHRcdFx0aWYgKCFlLmNvZGUpIHtcblx0XHRcdFx0dGhyb3cgZTtcblx0XHRcdH1cblx0XHRcdHRocm93IG5ldyB0aGlzLkZTLkVycm5vRXJyb3IodGhpcy5FUlJOT19DT0RFU1tlLmNvZGVdKTtcblx0XHR9XG5cdFx0cmV0dXJuIHtcblx0XHRcdGRldjogc3RhdC5kZXYsXG5cdFx0XHRpbm86IHN0YXQuaW5vLFxuXHRcdFx0bW9kZTogc3RhdC5tb2RlLFxuXHRcdFx0bmxpbms6IHN0YXQubmxpbmssXG5cdFx0XHR1aWQ6IHN0YXQudWlkLFxuXHRcdFx0Z2lkOiBzdGF0LmdpZCxcblx0XHRcdHJkZXY6IHN0YXQucmRldixcblx0XHRcdHNpemU6IHN0YXQuc2l6ZSxcblx0XHRcdGF0aW1lOiBzdGF0LmF0aW1lLFxuXHRcdFx0bXRpbWU6IHN0YXQubXRpbWUsXG5cdFx0XHRjdGltZTogc3RhdC5jdGltZSxcblx0XHRcdGJsa3NpemU6IHN0YXQuYmxrc2l6ZSxcblx0XHRcdGJsb2Nrczogc3RhdC5ibG9ja3MsXG5cdFx0fTtcblx0fVxuXG5cdHB1YmxpYyBzZXRhdHRyKG5vZGU6IEVtc2NyaXB0ZW5GU05vZGUsIGF0dHI6IFN0YXRzKTogdm9pZCB7XG5cdFx0Y29uc3QgcGF0aCA9IHRoaXMuZnMucmVhbFBhdGgobm9kZSk7XG5cdFx0dHJ5IHtcblx0XHRcdGlmIChhdHRyLm1vZGUgIT09IHVuZGVmaW5lZCkge1xuXHRcdFx0XHR0aGlzLm5vZGVmcy5jaG1vZFN5bmMocGF0aCwgYXR0ci5tb2RlKTtcblx0XHRcdFx0Ly8gdXBkYXRlIHRoZSBjb21tb24gbm9kZSBzdHJ1Y3R1cmUgbW9kZSBhcyB3ZWxsXG5cdFx0XHRcdG5vZGUubW9kZSA9IGF0dHIubW9kZTtcblx0XHRcdH1cblx0XHRcdGlmIChhdHRyLnRpbWVzdGFtcCAhPT0gdW5kZWZpbmVkKSB7XG5cdFx0XHRcdGNvbnN0IGRhdGUgPSBuZXcgRGF0ZShhdHRyLnRpbWVzdGFtcCk7XG5cdFx0XHRcdHRoaXMubm9kZWZzLnV0aW1lc1N5bmMocGF0aCwgZGF0ZSwgZGF0ZSk7XG5cdFx0XHR9XG5cdFx0fSBjYXRjaCAoZSkge1xuXHRcdFx0aWYgKCFlLmNvZGUpIHtcblx0XHRcdFx0dGhyb3cgZTtcblx0XHRcdH1cblx0XHRcdC8vIElnbm9yZSBub3Qgc3VwcG9ydGVkIGVycm9ycy4gRW1zY3JpcHRlbiBkb2VzIHV0aW1lc1N5bmMgd2hlbiBpdFxuXHRcdFx0Ly8gd3JpdGVzIGZpbGVzLCBidXQgbmV2ZXIgcmVhbGx5IHJlcXVpcmVzIHRoZSB2YWx1ZSB0byBiZSBzZXQuXG5cdFx0XHRpZiAoZS5jb2RlICE9PSAnRU5PVFNVUCcpIHtcblx0XHRcdFx0dGhyb3cgbmV3IHRoaXMuRlMuRXJybm9FcnJvcih0aGlzLkVSUk5PX0NPREVTW2UuY29kZV0pO1xuXHRcdFx0fVxuXHRcdH1cblx0XHRpZiAoYXR0ci5zaXplICE9PSB1bmRlZmluZWQpIHtcblx0XHRcdHRyeSB7XG5cdFx0XHRcdHRoaXMubm9kZWZzLnRydW5jYXRlU3luYyhwYXRoLCBhdHRyLnNpemUpO1xuXHRcdFx0fSBjYXRjaCAoZSkge1xuXHRcdFx0XHRpZiAoIWUuY29kZSkge1xuXHRcdFx0XHRcdHRocm93IGU7XG5cdFx0XHRcdH1cblx0XHRcdFx0dGhyb3cgbmV3IHRoaXMuRlMuRXJybm9FcnJvcih0aGlzLkVSUk5PX0NPREVTW2UuY29kZV0pO1xuXHRcdFx0fVxuXHRcdH1cblx0fVxuXG5cdHB1YmxpYyBsb29rdXAocGFyZW50OiBFbXNjcmlwdGVuRlNOb2RlLCBuYW1lOiBzdHJpbmcpOiBFbXNjcmlwdGVuRlNOb2RlIHtcblx0XHRjb25zdCBwYXRoID0gdGhpcy5QQVRILmpvaW4yKHRoaXMuZnMucmVhbFBhdGgocGFyZW50KSwgbmFtZSk7XG5cdFx0Y29uc3QgbW9kZSA9IHRoaXMuZnMuZ2V0TW9kZShwYXRoKTtcblx0XHRyZXR1cm4gdGhpcy5mcy5jcmVhdGVOb2RlKHBhcmVudCwgbmFtZSwgbW9kZSk7XG5cdH1cblxuXHRwdWJsaWMgbWtub2QocGFyZW50OiBFbXNjcmlwdGVuRlNOb2RlLCBuYW1lOiBzdHJpbmcsIG1vZGU6IG51bWJlciwgZGV2OiBhbnkpOiBFbXNjcmlwdGVuRlNOb2RlIHtcblx0XHRjb25zdCBub2RlID0gdGhpcy5mcy5jcmVhdGVOb2RlKHBhcmVudCwgbmFtZSwgbW9kZSwgZGV2KTtcblx0XHQvLyBjcmVhdGUgdGhlIGJhY2tpbmcgbm9kZSBmb3IgdGhpcyBpbiB0aGUgZnMgcm9vdCBhcyB3ZWxsXG5cdFx0Y29uc3QgcGF0aCA9IHRoaXMuZnMucmVhbFBhdGgobm9kZSk7XG5cdFx0dHJ5IHtcblx0XHRcdGlmICh0aGlzLkZTLmlzRGlyKG5vZGUubW9kZSkpIHtcblx0XHRcdFx0dGhpcy5ub2RlZnMubWtkaXJTeW5jKHBhdGgsIG5vZGUubW9kZSk7XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHR0aGlzLm5vZGVmcy53cml0ZUZpbGVTeW5jKHBhdGgsICcnLCB7IG1vZGU6IG5vZGUubW9kZSB9KTtcblx0XHRcdH1cblx0XHR9IGNhdGNoIChlKSB7XG5cdFx0XHRpZiAoIWUuY29kZSkge1xuXHRcdFx0XHR0aHJvdyBlO1xuXHRcdFx0fVxuXHRcdFx0dGhyb3cgbmV3IHRoaXMuRlMuRXJybm9FcnJvcih0aGlzLkVSUk5PX0NPREVTW2UuY29kZV0pO1xuXHRcdH1cblx0XHRyZXR1cm4gbm9kZTtcblx0fVxuXG5cdHB1YmxpYyByZW5hbWUob2xkTm9kZTogRW1zY3JpcHRlbkZTTm9kZSwgbmV3RGlyOiBFbXNjcmlwdGVuRlNOb2RlLCBuZXdOYW1lOiBzdHJpbmcpOiB2b2lkIHtcblx0XHRjb25zdCBvbGRQYXRoID0gdGhpcy5mcy5yZWFsUGF0aChvbGROb2RlKTtcblx0XHRjb25zdCBuZXdQYXRoID0gdGhpcy5QQVRILmpvaW4yKHRoaXMuZnMucmVhbFBhdGgobmV3RGlyKSwgbmV3TmFtZSk7XG5cdFx0dHJ5IHtcblx0XHRcdHRoaXMubm9kZWZzLnJlbmFtZVN5bmMob2xkUGF0aCwgbmV3UGF0aCk7XG5cdFx0XHQvLyBUaGlzIGxvZ2ljIGlzIG1pc3NpbmcgZnJvbSB0aGUgb3JpZ2luYWwgTm9kZUZTLFxuXHRcdFx0Ly8gY2F1c2luZyBFbXNjcmlwdGVuJ3MgZmlsZXN5c3RlbSB0byB0aGluayB0aGF0IHRoZSBvbGQgZmlsZSBzdGlsbCBleGlzdHMuXG5cdFx0XHRvbGROb2RlLm5hbWUgPSBuZXdOYW1lO1xuXHRcdFx0b2xkTm9kZS5wYXJlbnQgPSBuZXdEaXI7XG5cdFx0fSBjYXRjaCAoZSkge1xuXHRcdFx0aWYgKCFlLmNvZGUpIHtcblx0XHRcdFx0dGhyb3cgZTtcblx0XHRcdH1cblx0XHRcdHRocm93IG5ldyB0aGlzLkZTLkVycm5vRXJyb3IodGhpcy5FUlJOT19DT0RFU1tlLmNvZGVdKTtcblx0XHR9XG5cdH1cblxuXHRwdWJsaWMgdW5saW5rKHBhcmVudDogRW1zY3JpcHRlbkZTTm9kZSwgbmFtZTogc3RyaW5nKTogdm9pZCB7XG5cdFx0Y29uc3QgcGF0aCA9IHRoaXMuUEFUSC5qb2luMih0aGlzLmZzLnJlYWxQYXRoKHBhcmVudCksIG5hbWUpO1xuXHRcdHRyeSB7XG5cdFx0XHR0aGlzLm5vZGVmcy51bmxpbmtTeW5jKHBhdGgpO1xuXHRcdH0gY2F0Y2ggKGUpIHtcblx0XHRcdGlmICghZS5jb2RlKSB7XG5cdFx0XHRcdHRocm93IGU7XG5cdFx0XHR9XG5cdFx0XHR0aHJvdyBuZXcgdGhpcy5GUy5FcnJub0Vycm9yKHRoaXMuRVJSTk9fQ09ERVNbZS5jb2RlXSk7XG5cdFx0fVxuXHR9XG5cblx0cHVibGljIHJtZGlyKHBhcmVudDogRW1zY3JpcHRlbkZTTm9kZSwgbmFtZTogc3RyaW5nKSB7XG5cdFx0Y29uc3QgcGF0aCA9IHRoaXMuUEFUSC5qb2luMih0aGlzLmZzLnJlYWxQYXRoKHBhcmVudCksIG5hbWUpO1xuXHRcdHRyeSB7XG5cdFx0XHR0aGlzLm5vZGVmcy5ybWRpclN5bmMocGF0aCk7XG5cdFx0fSBjYXRjaCAoZSkge1xuXHRcdFx0aWYgKCFlLmNvZGUpIHtcblx0XHRcdFx0dGhyb3cgZTtcblx0XHRcdH1cblx0XHRcdHRocm93IG5ldyB0aGlzLkZTLkVycm5vRXJyb3IodGhpcy5FUlJOT19DT0RFU1tlLmNvZGVdKTtcblx0XHR9XG5cdH1cblxuXHRwdWJsaWMgcmVhZGRpcihub2RlOiBFbXNjcmlwdGVuRlNOb2RlKTogc3RyaW5nW10ge1xuXHRcdGNvbnN0IHBhdGggPSB0aGlzLmZzLnJlYWxQYXRoKG5vZGUpO1xuXHRcdHRyeSB7XG5cdFx0XHQvLyBOb2RlIGRvZXMgbm90IGxpc3QgLiBhbmQgLi4gaW4gZGlyZWN0b3J5IGxpc3RpbmdzLFxuXHRcdFx0Ly8gYnV0IEVtc2NyaXB0ZW4gZXhwZWN0cyBpdC5cblx0XHRcdGNvbnN0IGNvbnRlbnRzID0gdGhpcy5ub2RlZnMucmVhZGRpclN5bmMocGF0aCk7XG5cdFx0XHRjb250ZW50cy5wdXNoKCcuJywgJy4uJyk7XG5cdFx0XHRyZXR1cm4gY29udGVudHM7XG5cdFx0fSBjYXRjaCAoZSkge1xuXHRcdFx0aWYgKCFlLmNvZGUpIHtcblx0XHRcdFx0dGhyb3cgZTtcblx0XHRcdH1cblx0XHRcdHRocm93IG5ldyB0aGlzLkZTLkVycm5vRXJyb3IodGhpcy5FUlJOT19DT0RFU1tlLmNvZGVdKTtcblx0XHR9XG5cdH1cblxuXHRwdWJsaWMgc3ltbGluayhwYXJlbnQ6IEVtc2NyaXB0ZW5GU05vZGUsIG5ld05hbWU6IHN0cmluZywgb2xkUGF0aDogc3RyaW5nKTogdm9pZCB7XG5cdFx0Y29uc3QgbmV3UGF0aCA9IHRoaXMuUEFUSC5qb2luMih0aGlzLmZzLnJlYWxQYXRoKHBhcmVudCksIG5ld05hbWUpO1xuXHRcdHRyeSB7XG5cdFx0XHR0aGlzLm5vZGVmcy5zeW1saW5rU3luYyhvbGRQYXRoLCBuZXdQYXRoKTtcblx0XHR9IGNhdGNoIChlKSB7XG5cdFx0XHRpZiAoIWUuY29kZSkge1xuXHRcdFx0XHR0aHJvdyBlO1xuXHRcdFx0fVxuXHRcdFx0dGhyb3cgbmV3IHRoaXMuRlMuRXJybm9FcnJvcih0aGlzLkVSUk5PX0NPREVTW2UuY29kZV0pO1xuXHRcdH1cblx0fVxuXG5cdHB1YmxpYyByZWFkbGluayhub2RlOiBFbXNjcmlwdGVuRlNOb2RlKTogc3RyaW5nIHtcblx0XHRjb25zdCBwYXRoID0gdGhpcy5mcy5yZWFsUGF0aChub2RlKTtcblx0XHR0cnkge1xuXHRcdFx0cmV0dXJuIHRoaXMubm9kZWZzLnJlYWRsaW5rU3luYyhwYXRoKTtcblx0XHR9IGNhdGNoIChlKSB7XG5cdFx0XHRpZiAoIWUuY29kZSkge1xuXHRcdFx0XHR0aHJvdyBlO1xuXHRcdFx0fVxuXHRcdFx0dGhyb3cgbmV3IHRoaXMuRlMuRXJybm9FcnJvcih0aGlzLkVSUk5PX0NPREVTW2UuY29kZV0pO1xuXHRcdH1cblx0fVxufVxuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBCRlNFbXNjcmlwdGVuRlMgaW1wbGVtZW50cyBFbXNjcmlwdGVuRlMge1xuXHQvLyBUaGlzIG1hcHMgdGhlIGludGVnZXIgcGVybWlzc2lvbiBtb2RlcyBmcm9tIGh0dHA6Ly9saW51eC5kaWUubmV0L21hbi8zL29wZW5cblx0Ly8gdG8gbm9kZS5qcy1zcGVjaWZpYyBmaWxlIG9wZW4gcGVybWlzc2lvbiBzdHJpbmdzIGF0IGh0dHA6Ly9ub2RlanMub3JnL2FwaS9mcy5odG1sI2ZzX2ZzX29wZW5fcGF0aF9mbGFnc19tb2RlX2NhbGxiYWNrXG5cdHB1YmxpYyBmbGFnc1RvUGVybWlzc2lvblN0cmluZ01hcCA9IHtcblx0XHQwIC8qT19SRE9OTFkqLzogJ3InLFxuXHRcdDEgLypPX1dST05MWSovOiAncisnLFxuXHRcdDIgLypPX1JEV1IqLzogJ3IrJyxcblx0XHQ2NCAvKk9fQ1JFQVQqLzogJ3InLFxuXHRcdDY1IC8qT19XUk9OTFl8T19DUkVBVCovOiAncisnLFxuXHRcdDY2IC8qT19SRFdSfE9fQ1JFQVQqLzogJ3IrJyxcblx0XHQxMjkgLypPX1dST05MWXxPX0VYQ0wqLzogJ3J4KycsXG5cdFx0MTkzIC8qT19XUk9OTFl8T19DUkVBVHxPX0VYQ0wqLzogJ3J4KycsXG5cdFx0NTE0IC8qT19SRFdSfE9fVFJVTkMqLzogJ3crJyxcblx0XHQ1NzcgLypPX1dST05MWXxPX0NSRUFUfE9fVFJVTkMqLzogJ3cnLFxuXHRcdDU3OCAvKk9fQ1JFQVR8T19SRFdSfE9fVFJVTkMqLzogJ3crJyxcblx0XHQ3MDUgLypPX1dST05MWXxPX0NSRUFUfE9fRVhDTHxPX1RSVU5DKi86ICd3eCcsXG5cdFx0NzA2IC8qT19SRFdSfE9fQ1JFQVR8T19FWENMfE9fVFJVTkMqLzogJ3d4KycsXG5cdFx0MTAyNCAvKk9fQVBQRU5EKi86ICdhJyxcblx0XHQxMDI1IC8qT19XUk9OTFl8T19BUFBFTkQqLzogJ2EnLFxuXHRcdDEwMjYgLypPX1JEV1J8T19BUFBFTkQqLzogJ2ErJyxcblx0XHQxMDg5IC8qT19XUk9OTFl8T19DUkVBVHxPX0FQUEVORCovOiAnYScsXG5cdFx0MTA5MCAvKk9fUkRXUnxPX0NSRUFUfE9fQVBQRU5EKi86ICdhKycsXG5cdFx0MTE1MyAvKk9fV1JPTkxZfE9fRVhDTHxPX0FQUEVORCovOiAnYXgnLFxuXHRcdDExNTQgLypPX1JEV1J8T19FWENMfE9fQVBQRU5EKi86ICdheCsnLFxuXHRcdDEyMTcgLypPX1dST05MWXxPX0NSRUFUfE9fRVhDTHxPX0FQUEVORCovOiAnYXgnLFxuXHRcdDEyMTggLypPX1JEV1J8T19DUkVBVHxPX0VYQ0x8T19BUFBFTkQqLzogJ2F4KycsXG5cdFx0NDA5NiAvKk9fUkRPTkxZfE9fRFNZTkMqLzogJ3JzJyxcblx0XHQ0MDk4IC8qT19SRFdSfE9fRFNZTkMqLzogJ3JzKycsXG5cdH07XG5cdC8qIHRzbGludDpkaXNhYmxlOnZhcmlhYmxlLW5hbWUgKi9cblx0cHVibGljIG5vZGVfb3BzOiBFbXNjcmlwdGVuTm9kZU9wcztcblx0cHVibGljIHN0cmVhbV9vcHM6IEVtc2NyaXB0ZW5TdHJlYW1PcHM7XG5cdC8qIHRzbGludDplbmFibGU6dmFyaWFibGUtbmFtZSAqL1xuXG5cdHByaXZhdGUgRlM6IGFueTtcblx0cHJpdmF0ZSBQQVRIOiBhbnk7XG5cdHByaXZhdGUgRVJSTk9fQ09ERVM6IGFueTtcblx0cHJpdmF0ZSBub2RlZnM6IEZTO1xuXHRjb25zdHJ1Y3RvcihfRlMgPSAoPGFueT5zZWxmKVsnRlMnXSwgX1BBVEggPSAoPGFueT5zZWxmKVsnUEFUSCddLCBfRVJSTk9fQ09ERVMgPSAoPGFueT5zZWxmKVsnRVJSTk9fQ09ERVMnXSwgbm9kZWZzOiBGUyA9IGZzKSB7XG5cdFx0dGhpcy5ub2RlZnMgPSBub2RlZnM7XG5cdFx0dGhpcy5GUyA9IF9GUztcblx0XHR0aGlzLlBBVEggPSBfUEFUSDtcblx0XHR0aGlzLkVSUk5PX0NPREVTID0gX0VSUk5PX0NPREVTO1xuXHRcdHRoaXMubm9kZV9vcHMgPSBuZXcgQkZTRW1zY3JpcHRlbk5vZGVPcHModGhpcyk7XG5cdFx0dGhpcy5zdHJlYW1fb3BzID0gbmV3IEJGU0Vtc2NyaXB0ZW5TdHJlYW1PcHModGhpcyk7XG5cdH1cblxuXHRwdWJsaWMgbW91bnQobTogeyBvcHRzOiB7IHJvb3Q6IHN0cmluZyB9IH0pOiBFbXNjcmlwdGVuRlNOb2RlIHtcblx0XHRyZXR1cm4gdGhpcy5jcmVhdGVOb2RlKG51bGwsICcvJywgdGhpcy5nZXRNb2RlKG0ub3B0cy5yb290KSwgMCk7XG5cdH1cblxuXHRwdWJsaWMgY3JlYXRlTm9kZShwYXJlbnQ6IEVtc2NyaXB0ZW5GU05vZGUgfCBudWxsLCBuYW1lOiBzdHJpbmcsIG1vZGU6IG51bWJlciwgZGV2PzogYW55KTogRW1zY3JpcHRlbkZTTm9kZSB7XG5cdFx0Y29uc3QgRlMgPSB0aGlzLkZTO1xuXHRcdGlmICghRlMuaXNEaXIobW9kZSkgJiYgIUZTLmlzRmlsZShtb2RlKSAmJiAhRlMuaXNMaW5rKG1vZGUpKSB7XG5cdFx0XHR0aHJvdyBuZXcgRlMuRXJybm9FcnJvcih0aGlzLkVSUk5PX0NPREVTLkVJTlZBTCk7XG5cdFx0fVxuXHRcdGNvbnN0IG5vZGUgPSBGUy5jcmVhdGVOb2RlKHBhcmVudCwgbmFtZSwgbW9kZSk7XG5cdFx0bm9kZS5ub2RlX29wcyA9IHRoaXMubm9kZV9vcHM7XG5cdFx0bm9kZS5zdHJlYW1fb3BzID0gdGhpcy5zdHJlYW1fb3BzO1xuXHRcdHJldHVybiBub2RlO1xuXHR9XG5cblx0cHVibGljIGdldE1vZGUocGF0aDogc3RyaW5nKTogbnVtYmVyIHtcblx0XHRsZXQgc3RhdDogTm9kZVN0YXRzO1xuXHRcdHRyeSB7XG5cdFx0XHRzdGF0ID0gdGhpcy5ub2RlZnMubHN0YXRTeW5jKHBhdGgpO1xuXHRcdH0gY2F0Y2ggKGUpIHtcblx0XHRcdGlmICghZS5jb2RlKSB7XG5cdFx0XHRcdHRocm93IGU7XG5cdFx0XHR9XG5cdFx0XHR0aHJvdyBuZXcgdGhpcy5GUy5FcnJub0Vycm9yKHRoaXMuRVJSTk9fQ09ERVNbZS5jb2RlXSk7XG5cdFx0fVxuXHRcdHJldHVybiBzdGF0Lm1vZGU7XG5cdH1cblxuXHRwdWJsaWMgcmVhbFBhdGgobm9kZTogRW1zY3JpcHRlbkZTTm9kZSk6IHN0cmluZyB7XG5cdFx0Y29uc3QgcGFydHM6IHN0cmluZ1tdID0gW107XG5cdFx0d2hpbGUgKG5vZGUucGFyZW50ICE9PSBub2RlKSB7XG5cdFx0XHRwYXJ0cy5wdXNoKG5vZGUubmFtZSk7XG5cdFx0XHRub2RlID0gbm9kZS5wYXJlbnQ7XG5cdFx0fVxuXHRcdHBhcnRzLnB1c2gobm9kZS5tb3VudC5vcHRzLnJvb3QpO1xuXHRcdHBhcnRzLnJldmVyc2UoKTtcblx0XHRyZXR1cm4gdGhpcy5QQVRILmpvaW4uYXBwbHkobnVsbCwgcGFydHMpO1xuXHR9XG5cblx0cHVibGljIGZsYWdzVG9QZXJtaXNzaW9uU3RyaW5nKGZsYWdzOiBzdHJpbmcgfCBudW1iZXIpOiBzdHJpbmcge1xuXHRcdGxldCBwYXJzZWRGbGFncyA9IHR5cGVvZiBmbGFncyA9PT0gJ3N0cmluZycgPyBwYXJzZUludChmbGFncywgMTApIDogZmxhZ3M7XG5cdFx0cGFyc2VkRmxhZ3MgJj0gMHgxZmZmO1xuXHRcdGlmIChwYXJzZWRGbGFncyBpbiB0aGlzLmZsYWdzVG9QZXJtaXNzaW9uU3RyaW5nTWFwKSB7XG5cdFx0XHRyZXR1cm4gKDxhbnk+dGhpcy5mbGFnc1RvUGVybWlzc2lvblN0cmluZ01hcClbcGFyc2VkRmxhZ3NdO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHRyZXR1cm4gPHN0cmluZz5mbGFncztcblx0XHR9XG5cdH1cblxuXHRwdWJsaWMgZ2V0Tm9kZUZTKCkge1xuXHRcdHJldHVybiB0aGlzLm5vZGVmcztcblx0fVxuXG5cdHB1YmxpYyBnZXRGUygpIHtcblx0XHRyZXR1cm4gdGhpcy5GUztcblx0fVxuXG5cdHB1YmxpYyBnZXRQQVRIKCkge1xuXHRcdHJldHVybiB0aGlzLlBBVEg7XG5cdH1cblxuXHRwdWJsaWMgZ2V0RVJSTk9fQ09ERVMoKSB7XG5cdFx0cmV0dXJuIHRoaXMuRVJSTk9fQ09ERVM7XG5cdH1cbn1cbiIsICIvKiBlc2xpbnQtZGlzYWJsZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tdW51c2VkLXZhcnMgKi9cbi8vIGRpc2FibGUgbm8tdW51c2VkLXZhcnMgc2luY2UgQmFzZUZpbGVTeXN0ZW0gdXNlcyB0aGVtIGEgbG90XG5cbmltcG9ydCB7IEFwaUVycm9yLCBFcnJvckNvZGUgfSBmcm9tICcuL2FwaV9lcnJvcic7XG5pbXBvcnQgU3RhdHMgZnJvbSAnLi9zdGF0cyc7XG5pbXBvcnQgeyBGaWxlIH0gZnJvbSAnLi9maWxlJztcbmltcG9ydCB7IEZpbGVGbGFnLCBBY3Rpb25UeXBlIH0gZnJvbSAnLi9maWxlX2ZsYWcnO1xuaW1wb3J0ICogYXMgcGF0aCBmcm9tICdwYXRoJztcbmltcG9ydCB7IGZhaWwgfSBmcm9tICcuL3V0aWwnO1xuaW1wb3J0IENyZWQgZnJvbSAnLi9jcmVkJztcbmltcG9ydCB7IEJ1ZmZlciB9IGZyb20gJ2J1ZmZlcic7XG5cbmV4cG9ydCB0eXBlIEJGU09uZUFyZ0NhbGxiYWNrID0gKGU/OiBBcGlFcnJvciB8IG51bGwpID0+IGFueTtcbmV4cG9ydCB0eXBlIEJGU0NhbGxiYWNrPFQ+ID0gKGU6IEFwaUVycm9yIHwgbnVsbCB8IHVuZGVmaW5lZCwgcnY/OiBUKSA9PiBhbnk7XG5leHBvcnQgdHlwZSBCRlNUaHJlZUFyZ0NhbGxiYWNrPFQsIFU+ID0gKGU6IEFwaUVycm9yIHwgbnVsbCB8IHVuZGVmaW5lZCwgYXJnMT86IFQsIGFyZzI/OiBVKSA9PiBhbnk7XG5cbi8qKlxuICogSW50ZXJmYWNlIGZvciBhIGZpbGVzeXN0ZW0uICoqQWxsKiogQnJvd3NlckZTIEZpbGVTeXN0ZW1zIHNob3VsZCBpbXBsZW1lbnRcbiAqIHRoaXMgaW50ZXJmYWNlLlxuICpcbiAqIEJlbG93LCB3ZSBkZW5vdGUgZWFjaCBBUEkgbWV0aG9kIGFzICoqQ29yZSoqLCAqKlN1cHBsZW1lbnRhbCoqLCBvclxuICogKipPcHRpb25hbCoqLlxuICpcbiAqICMjIyBDb3JlIE1ldGhvZHNcbiAqXG4gKiAqKkNvcmUqKiBBUEkgbWV0aG9kcyAqbmVlZCogdG8gYmUgaW1wbGVtZW50ZWQgZm9yIGJhc2ljIHJlYWQvd3JpdGVcbiAqIGZ1bmN0aW9uYWxpdHkuXG4gKlxuICogTm90ZSB0aGF0IHJlYWQtb25seSBGaWxlU3lzdGVtcyBjYW4gY2hvb3NlIHRvIG5vdCBpbXBsZW1lbnQgY29yZSBtZXRob2RzXG4gKiB0aGF0IG11dGF0ZSBmaWxlcyBvciBtZXRhZGF0YS4gVGhlIGRlZmF1bHQgaW1wbGVtZW50YXRpb24gd2lsbCBwYXNzIGFcbiAqIE5PVF9TVVBQT1JURUQgZXJyb3IgdG8gdGhlIGNhbGxiYWNrLlxuICpcbiAqICMjIyBTdXBwbGVtZW50YWwgTWV0aG9kc1xuICpcbiAqICoqU3VwcGxlbWVudGFsKiogQVBJIG1ldGhvZHMgZG8gbm90IG5lZWQgdG8gYmUgaW1wbGVtZW50ZWQgYnkgYSBmaWxlc3lzdGVtLlxuICogVGhlIGRlZmF1bHQgaW1wbGVtZW50YXRpb24gaW1wbGVtZW50cyBhbGwgb2YgdGhlIHN1cHBsZW1lbnRhbCBBUEkgbWV0aG9kcyBpblxuICogdGVybXMgb2YgdGhlICoqY29yZSoqIEFQSSBtZXRob2RzLlxuICpcbiAqIE5vdGUgdGhhdCBhIGZpbGUgc3lzdGVtIG1heSBjaG9vc2UgdG8gaW1wbGVtZW50IHN1cHBsZW1lbnRhbCBtZXRob2RzIGZvclxuICogZWZmaWNpZW5jeSByZWFzb25zLlxuICpcbiAqIFRoZSBjb2RlIGZvciBzb21lIHN1cHBsZW1lbnRhbCBtZXRob2RzIHdhcyBhZGFwdGVkIGRpcmVjdGx5IGZyb20gTm9kZUpTJ3NcbiAqIGZzLmpzIHNvdXJjZSBjb2RlLlxuICpcbiAqICMjIyBPcHRpb25hbCBNZXRob2RzXG4gKlxuICogKipPcHRpb25hbCoqIEFQSSBtZXRob2RzIHByb3ZpZGUgZnVuY3Rpb25hbGl0eSB0aGF0IG1heSBub3QgYmUgYXZhaWxhYmxlIGluXG4gKiBhbGwgZmlsZXN5c3RlbXMuIEZvciBleGFtcGxlLCBhbGwgc3ltbGluay9oYXJkbGluay1yZWxhdGVkIEFQSSBtZXRob2RzIGZhbGxcbiAqIHVuZGVyIHRoaXMgY2F0ZWdvcnkuXG4gKlxuICogVGhlIGRlZmF1bHQgaW1wbGVtZW50YXRpb24gd2lsbCBwYXNzIGEgTk9UX1NVUFBPUlRFRCBlcnJvciB0byB0aGUgY2FsbGJhY2suXG4gKlxuICogIyMjIEFyZ3VtZW50IEFzc3VtcHRpb25zXG4gKlxuICogWW91IGNhbiBhc3N1bWUgdGhlIGZvbGxvd2luZyBhYm91dCBhcmd1bWVudHMgcGFzc2VkIHRvIGVhY2ggQVBJIG1ldGhvZDpcbiAqXG4gKiAqICoqRXZlcnkgcGF0aCBpcyBhbiBhYnNvbHV0ZSBwYXRoLioqIE1lYW5pbmcsIGAuYCwgYC4uYCwgYW5kIG90aGVyIGl0ZW1zXG4gKiAgIGFyZSByZXNvbHZlZCBpbnRvIGFuIGFic29sdXRlIGZvcm0uXG4gKiAqICoqQWxsIGFyZ3VtZW50cyBhcmUgcHJlc2VudC4qKiBBbnkgb3B0aW9uYWwgYXJndW1lbnRzIGF0IHRoZSBOb2RlIEFQSSBsZXZlbFxuICogICBoYXZlIGJlZW4gcGFzc2VkIGluIHdpdGggdGhlaXIgZGVmYXVsdCB2YWx1ZXMuXG4gKiAqICoqVGhlIGNhbGxiYWNrIHdpbGwgcmVzZXQgdGhlIHN0YWNrIGRlcHRoLioqIFdoZW4geW91ciBmaWxlc3lzdGVtIGNhbGxzIHRoZVxuICogICBjYWxsYmFjayB3aXRoIHRoZSByZXF1ZXN0ZWQgaW5mb3JtYXRpb24sIGl0IHdpbGwgdXNlIGBzZXRJbW1lZGlhdGVgIHRvXG4gKiAgIHJlc2V0IHRoZSBKYXZhU2NyaXB0IHN0YWNrIGRlcHRoIGJlZm9yZSBjYWxsaW5nIHRoZSB1c2VyLXN1cHBsaWVkIGNhbGxiYWNrLlxuICovXG5leHBvcnQgaW50ZXJmYWNlIEZpbGVTeXN0ZW0ge1xuXHQvKipcblx0ICogKipPcHRpb25hbCoqOiBSZXR1cm5zIHRoZSBuYW1lIG9mIHRoZSBmaWxlIHN5c3RlbS5cblx0ICovXG5cdGdldE5hbWUoKTogc3RyaW5nO1xuXHQvKipcblx0ICogKipPcHRpb25hbCoqOiBQYXNzZXMgdGhlIGZvbGxvd2luZyBpbmZvcm1hdGlvbiB0byB0aGUgY2FsbGJhY2s6XG5cdCAqXG5cdCAqICogVG90YWwgbnVtYmVyIG9mIGJ5dGVzIGF2YWlsYWJsZSBvbiB0aGlzIGZpbGUgc3lzdGVtLlxuXHQgKiAqIG51bWJlciBvZiBmcmVlIGJ5dGVzIGF2YWlsYWJsZSBvbiB0aGlzIGZpbGUgc3lzdGVtLlxuXHQgKlxuXHQgKiBAdG9kbyBUaGlzIGluZm8gaXMgbm90IGF2YWlsYWJsZSB0aHJvdWdoIHRoZSBOb2RlIEFQSS4gUGVyaGFwcyB3ZSBjb3VsZCBkbyBhXG5cdCAqICAgcG9seWZpbGwgb2YgZGlza3NwYWNlLmpzLCBvciBhZGQgYSBuZXcgTm9kZSBBUEkgZnVuY3Rpb24uXG5cdCAqIEBwYXJhbSBwYXRoIFRoZSBwYXRoIHRvIHRoZSBsb2NhdGlvbiB0aGF0IGlzIGJlaW5nIHF1ZXJpZWQuIE9ubHlcblx0ICogICB1c2VmdWwgZm9yIGZpbGVzeXN0ZW1zIHRoYXQgc3VwcG9ydCBtb3VudCBwb2ludHMuXG5cdCAqL1xuXHRkaXNrU3BhY2UocDogc3RyaW5nLCBjYjogKHRvdGFsOiBudW1iZXIsIGZyZWU6IG51bWJlcikgPT4gYW55KTogdm9pZDtcblx0LyoqXG5cdCAqICoqQ29yZSoqOiBJcyB0aGlzIGZpbGVzeXN0ZW0gcmVhZC1vbmx5P1xuXHQgKiBAcmV0dXJuIFRydWUgaWYgdGhpcyBGaWxlU3lzdGVtIGlzIGluaGVyZW50bHkgcmVhZC1vbmx5LlxuXHQgKi9cblx0aXNSZWFkT25seSgpOiBib29sZWFuO1xuXHQvKipcblx0ICogKipDb3JlKio6IERvZXMgdGhlIGZpbGVzeXN0ZW0gc3VwcG9ydCBvcHRpb25hbCBzeW1saW5rL2hhcmRsaW5rLXJlbGF0ZWRcblx0ICogICBjb21tYW5kcz9cblx0ICogQHJldHVybiBUcnVlIGlmIHRoZSBGaWxlU3lzdGVtIHN1cHBvcnRzIHRoZSBvcHRpb25hbFxuXHQgKiAgIHN5bWxpbmsvaGFyZGxpbmstcmVsYXRlZCBjb21tYW5kcy5cblx0ICovXG5cdHN1cHBvcnRzTGlua3MoKTogYm9vbGVhbjtcblx0LyoqXG5cdCAqICoqQ29yZSoqOiBEb2VzIHRoZSBmaWxlc3lzdGVtIHN1cHBvcnQgb3B0aW9uYWwgcHJvcGVydHktcmVsYXRlZCBjb21tYW5kcz9cblx0ICogQHJldHVybiBUcnVlIGlmIHRoZSBGaWxlU3lzdGVtIHN1cHBvcnRzIHRoZSBvcHRpb25hbFxuXHQgKiAgIHByb3BlcnR5LXJlbGF0ZWQgY29tbWFuZHMgKHBlcm1pc3Npb25zLCB1dGltZXMsIGV0YykuXG5cdCAqL1xuXHRzdXBwb3J0c1Byb3BzKCk6IGJvb2xlYW47XG5cdC8qKlxuXHQgKiAqKkNvcmUqKjogRG9lcyB0aGUgZmlsZXN5c3RlbSBzdXBwb3J0IHRoZSBvcHRpb25hbCBzeW5jaHJvbm91cyBpbnRlcmZhY2U/XG5cdCAqIEByZXR1cm4gVHJ1ZSBpZiB0aGUgRmlsZVN5c3RlbSBzdXBwb3J0cyBzeW5jaHJvbm91cyBvcGVyYXRpb25zLlxuXHQgKi9cblx0c3VwcG9ydHNTeW5jaCgpOiBib29sZWFuO1xuXHQvLyAqKkNPUkUgQVBJIE1FVEhPRFMqKlxuXHQvLyBGaWxlIG9yIGRpcmVjdG9yeSBvcGVyYXRpb25zXG5cdC8qKlxuXHQgKiAqKkNvcmUqKjogQXN5bmNocm9ub3VzIGFjY2Vzcy5cblx0ICovXG5cdGFjY2VzcyhwOiBzdHJpbmcsIG1vZGU6IG51bWJlciwgY3JlZDogQ3JlZCwgY2I6IEJGU09uZUFyZ0NhbGxiYWNrKTogdm9pZDtcblx0LyoqXG5cdCAqICoqQ29yZSoqOiBTeW5jaHJvbm91cyBhY2Nlc3MuXG5cdCAqL1xuXHRhY2Nlc3NTeW5jKHA6IHN0cmluZywgbW9kZTogbnVtYmVyLCBjcmVkOiBDcmVkKTogdm9pZDtcblx0LyoqXG5cdCAqICoqQ29yZSoqOiBBc3luY2hyb25vdXMgcmVuYW1lLiBObyBhcmd1bWVudHMgb3RoZXIgdGhhbiBhIHBvc3NpYmxlIGV4Y2VwdGlvblxuXHQgKiBhcmUgZ2l2ZW4gdG8gdGhlIGNvbXBsZXRpb24gY2FsbGJhY2suXG5cdCAqL1xuXHRyZW5hbWUob2xkUGF0aDogc3RyaW5nLCBuZXdQYXRoOiBzdHJpbmcsIGNyZWQ6IENyZWQsIGNiOiBCRlNPbmVBcmdDYWxsYmFjayk6IHZvaWQ7XG5cdC8qKlxuXHQgKiAqKkNvcmUqKjogU3luY2hyb25vdXMgcmVuYW1lLlxuXHQgKi9cblx0cmVuYW1lU3luYyhvbGRQYXRoOiBzdHJpbmcsIG5ld1BhdGg6IHN0cmluZywgY3JlZDogQ3JlZCk6IHZvaWQ7XG5cdC8qKlxuXHQgKiAqKkNvcmUqKjogQXN5bmNocm9ub3VzIGBzdGF0YCBvciBgbHN0YXRgLlxuXHQgKiBAcGFyYW0gaXNMc3RhdCBUcnVlIGlmIHRoaXMgaXMgYGxzdGF0YCwgZmFsc2UgaWYgdGhpcyBpcyByZWd1bGFyXG5cdCAqICAgYHN0YXRgLlxuXHQgKi9cblx0c3RhdChwOiBzdHJpbmcsIGlzTHN0YXQ6IGJvb2xlYW4gfCBudWxsLCBjcmVkOiBDcmVkLCBjYjogQkZTQ2FsbGJhY2s8U3RhdHM+KTogdm9pZDtcblx0LyoqXG5cdCAqICoqQ29yZSoqOiBTeW5jaHJvbm91cyBgc3RhdGAgb3IgYGxzdGF0YC5cblx0ICogQHBhcmFtIGlzTHN0YXQgVHJ1ZSBpZiB0aGlzIGlzIGBsc3RhdGAsIGZhbHNlIGlmIHRoaXMgaXMgcmVndWxhclxuXHQgKiAgIGBzdGF0YC5cblx0ICovXG5cdHN0YXRTeW5jKHA6IHN0cmluZywgaXNMc3RhdDogYm9vbGVhbiB8IG51bGwsIGNyZWQ6IENyZWQpOiBTdGF0cztcblx0Ly8gRmlsZSBvcGVyYXRpb25zXG5cdC8qKlxuXHQgKiAqKkNvcmUqKjogQXN5bmNocm9ub3VzIGZpbGUgb3Blbi5cblx0ICogQHNlZSBodHRwOi8vd3d3Lm1hbnBhZ2V6LmNvbS9tYW4vMi9vcGVuL1xuXHQgKiBAcGFyYW0gZmxhZ3MgSGFuZGxlcyB0aGUgY29tcGxleGl0eSBvZiB0aGUgdmFyaW91cyBmaWxlXG5cdCAqICAgbW9kZXMuIFNlZSBpdHMgQVBJIGZvciBtb3JlIGRldGFpbHMuXG5cdCAqIEBwYXJhbSBtb2RlIE1vZGUgdG8gdXNlIHRvIG9wZW4gdGhlIGZpbGUuIENhbiBiZSBpZ25vcmVkIGlmIHRoZVxuXHQgKiAgIGZpbGVzeXN0ZW0gZG9lc24ndCBzdXBwb3J0IHBlcm1pc3Npb25zLlxuXHQgKi9cblx0b3BlbihwOiBzdHJpbmcsIGZsYWc6IEZpbGVGbGFnLCBtb2RlOiBudW1iZXIsIGNyZWQ6IENyZWQsIGNiOiBCRlNDYWxsYmFjazxGaWxlPik6IHZvaWQ7XG5cdC8qKlxuXHQgKiAqKkNvcmUqKjogU3luY2hyb25vdXMgZmlsZSBvcGVuLlxuXHQgKiBAc2VlIGh0dHA6Ly93d3cubWFucGFnZXouY29tL21hbi8yL29wZW4vXG5cdCAqIEBwYXJhbSBmbGFncyBIYW5kbGVzIHRoZSBjb21wbGV4aXR5IG9mIHRoZSB2YXJpb3VzIGZpbGVcblx0ICogICBtb2Rlcy4gU2VlIGl0cyBBUEkgZm9yIG1vcmUgZGV0YWlscy5cblx0ICogQHBhcmFtIG1vZGUgTW9kZSB0byB1c2UgdG8gb3BlbiB0aGUgZmlsZS4gQ2FuIGJlIGlnbm9yZWQgaWYgdGhlXG5cdCAqICAgZmlsZXN5c3RlbSBkb2Vzbid0IHN1cHBvcnQgcGVybWlzc2lvbnMuXG5cdCAqL1xuXHRvcGVuU3luYyhwOiBzdHJpbmcsIGZsYWc6IEZpbGVGbGFnLCBtb2RlOiBudW1iZXIsIGNyZWQ6IENyZWQpOiBGaWxlO1xuXHQvKipcblx0ICogKipDb3JlKio6IEFzeW5jaHJvbm91cyBgdW5saW5rYC5cblx0ICovXG5cdHVubGluayhwOiBzdHJpbmcsIGNyZWQ6IENyZWQsIGNiOiBCRlNPbmVBcmdDYWxsYmFjayk6IHZvaWQ7XG5cdC8qKlxuXHQgKiAqKkNvcmUqKjogU3luY2hyb25vdXMgYHVubGlua2AuXG5cdCAqL1xuXHR1bmxpbmtTeW5jKHA6IHN0cmluZywgY3JlZDogQ3JlZCk6IHZvaWQ7XG5cdC8vIERpcmVjdG9yeSBvcGVyYXRpb25zXG5cdC8qKlxuXHQgKiAqKkNvcmUqKjogQXN5bmNocm9ub3VzIGBybWRpcmAuXG5cdCAqL1xuXHRybWRpcihwOiBzdHJpbmcsIGNyZWQ6IENyZWQsIGNiOiBCRlNPbmVBcmdDYWxsYmFjayk6IHZvaWQ7XG5cdC8qKlxuXHQgKiAqKkNvcmUqKjogU3luY2hyb25vdXMgYHJtZGlyYC5cblx0ICovXG5cdHJtZGlyU3luYyhwOiBzdHJpbmcsIGNyZWQ6IENyZWQpOiB2b2lkO1xuXHQvKipcblx0ICogKipDb3JlKio6IEFzeW5jaHJvbm91cyBgbWtkaXJgLlxuXHQgKiBAcGFyYW0gbW9kZSBNb2RlIHRvIG1ha2UgdGhlIGRpcmVjdG9yeSB1c2luZy4gQ2FuIGJlIGlnbm9yZWQgaWZcblx0ICogICB0aGUgZmlsZXN5c3RlbSBkb2Vzbid0IHN1cHBvcnQgcGVybWlzc2lvbnMuXG5cdCAqL1xuXHRta2RpcihwOiBzdHJpbmcsIG1vZGU6IG51bWJlciwgY3JlZDogQ3JlZCwgY2I6IEJGU09uZUFyZ0NhbGxiYWNrKTogdm9pZDtcblx0LyoqXG5cdCAqICoqQ29yZSoqOiBTeW5jaHJvbm91cyBgbWtkaXJgLlxuXHQgKiBAcGFyYW0gbW9kZSBNb2RlIHRvIG1ha2UgdGhlIGRpcmVjdG9yeSB1c2luZy4gQ2FuIGJlIGlnbm9yZWQgaWZcblx0ICogICB0aGUgZmlsZXN5c3RlbSBkb2Vzbid0IHN1cHBvcnQgcGVybWlzc2lvbnMuXG5cdCAqL1xuXHRta2RpclN5bmMocDogc3RyaW5nLCBtb2RlOiBudW1iZXIsIGNyZWQ6IENyZWQpOiB2b2lkO1xuXHQvKipcblx0ICogKipDb3JlKio6IEFzeW5jaHJvbm91cyBgcmVhZGRpcmAuIFJlYWRzIHRoZSBjb250ZW50cyBvZiBhIGRpcmVjdG9yeS5cblx0ICpcblx0ICogVGhlIGNhbGxiYWNrIGdldHMgdHdvIGFyZ3VtZW50cyBgKGVyciwgZmlsZXMpYCB3aGVyZSBgZmlsZXNgIGlzIGFuIGFycmF5IG9mXG5cdCAqIHRoZSBuYW1lcyBvZiB0aGUgZmlsZXMgaW4gdGhlIGRpcmVjdG9yeSBleGNsdWRpbmcgYCcuJ2AgYW5kIGAnLi4nYC5cblx0ICovXG5cdHJlYWRkaXIocDogc3RyaW5nLCBjcmVkOiBDcmVkLCBjYjogQkZTQ2FsbGJhY2s8c3RyaW5nW10+KTogdm9pZDtcblx0LyoqXG5cdCAqICoqQ29yZSoqOiBTeW5jaHJvbm91cyBgcmVhZGRpcmAuIFJlYWRzIHRoZSBjb250ZW50cyBvZiBhIGRpcmVjdG9yeS5cblx0ICovXG5cdHJlYWRkaXJTeW5jKHA6IHN0cmluZywgY3JlZDogQ3JlZCk6IHN0cmluZ1tdO1xuXHQvLyAqKlNVUFBMRU1FTlRBTCBJTlRFUkZBQ0UgTUVUSE9EUyoqXG5cdC8vIEZpbGUgb3IgZGlyZWN0b3J5IG9wZXJhdGlvbnNcblx0LyoqXG5cdCAqICoqU3VwcGxlbWVudGFsKio6IFRlc3Qgd2hldGhlciBvciBub3QgdGhlIGdpdmVuIHBhdGggZXhpc3RzIGJ5IGNoZWNraW5nIHdpdGhcblx0ICogdGhlIGZpbGUgc3lzdGVtLiBUaGVuIGNhbGwgdGhlIGNhbGxiYWNrIGFyZ3VtZW50IHdpdGggZWl0aGVyIHRydWUgb3IgZmFsc2UuXG5cdCAqL1xuXHRleGlzdHMocDogc3RyaW5nLCBjcmVkOiBDcmVkLCBjYjogKGV4aXN0czogYm9vbGVhbikgPT4gdm9pZCk6IHZvaWQ7XG5cdC8qKlxuXHQgKiAqKlN1cHBsZW1lbnRhbCoqOiBUZXN0IHdoZXRoZXIgb3Igbm90IHRoZSBnaXZlbiBwYXRoIGV4aXN0cyBieSBjaGVja2luZyB3aXRoXG5cdCAqIHRoZSBmaWxlIHN5c3RlbS5cblx0ICovXG5cdGV4aXN0c1N5bmMocDogc3RyaW5nLCBjcmVkOiBDcmVkKTogYm9vbGVhbjtcblx0LyoqXG5cdCAqICoqU3VwcGxlbWVudGFsKio6IEFzeW5jaHJvbm91cyBgcmVhbHBhdGhgLiBUaGUgY2FsbGJhY2sgZ2V0cyB0d28gYXJndW1lbnRzXG5cdCAqIGAoZXJyLCByZXNvbHZlZFBhdGgpYC5cblx0ICpcblx0ICogTm90ZSB0aGF0IHRoZSBOb2RlIEFQSSB3aWxsIHJlc29sdmUgYHBhdGhgIHRvIGFuIGFic29sdXRlIHBhdGguXG5cdCAqIEBwYXJhbSBjYWNoZSBBbiBvYmplY3QgbGl0ZXJhbCBvZiBtYXBwZWQgcGF0aHMgdGhhdCBjYW4gYmUgdXNlZCB0b1xuXHQgKiAgIGZvcmNlIGEgc3BlY2lmaWMgcGF0aCByZXNvbHV0aW9uIG9yIGF2b2lkIGFkZGl0aW9uYWwgYGZzLnN0YXRgIGNhbGxzIGZvclxuXHQgKiAgIGtub3duIHJlYWwgcGF0aHMuIElmIG5vdCBzdXBwbGllZCBieSB0aGUgdXNlciwgaXQnbGwgYmUgYW4gZW1wdHkgb2JqZWN0LlxuXHQgKi9cblx0cmVhbHBhdGgocDogc3RyaW5nLCBjYWNoZTogeyBbcGF0aDogc3RyaW5nXTogc3RyaW5nIH0sIGNyZWQ6IENyZWQsIGNiOiBCRlNDYWxsYmFjazxzdHJpbmc+KTogdm9pZDtcblx0LyoqXG5cdCAqICoqU3VwcGxlbWVudGFsKio6IFN5bmNocm9ub3VzIGByZWFscGF0aGAuXG5cdCAqXG5cdCAqIE5vdGUgdGhhdCB0aGUgTm9kZSBBUEkgd2lsbCByZXNvbHZlIGBwYXRoYCB0byBhbiBhYnNvbHV0ZSBwYXRoLlxuXHQgKiBAcGFyYW0gY2FjaGUgQW4gb2JqZWN0IGxpdGVyYWwgb2YgbWFwcGVkIHBhdGhzIHRoYXQgY2FuIGJlIHVzZWQgdG9cblx0ICogICBmb3JjZSBhIHNwZWNpZmljIHBhdGggcmVzb2x1dGlvbiBvciBhdm9pZCBhZGRpdGlvbmFsIGBmcy5zdGF0YCBjYWxscyBmb3Jcblx0ICogICBrbm93biByZWFsIHBhdGhzLiBJZiBub3Qgc3VwcGxpZWQgYnkgdGhlIHVzZXIsIGl0J2xsIGJlIGFuIGVtcHR5IG9iamVjdC5cblx0ICovXG5cdHJlYWxwYXRoU3luYyhwOiBzdHJpbmcsIGNhY2hlOiB7IFtwYXRoOiBzdHJpbmddOiBzdHJpbmcgfSwgY3JlZDogQ3JlZCk6IHN0cmluZztcblx0Ly8gRmlsZSBvcGVyYXRpb25zXG5cdC8qKlxuXHQgKiAqKlN1cHBsZW1lbnRhbCoqOiBBc3luY2hyb25vdXMgYHRydW5jYXRlYC5cblx0ICovXG5cdHRydW5jYXRlKHA6IHN0cmluZywgbGVuOiBudW1iZXIsIGNyZWQ6IENyZWQsIGNiOiBCRlNPbmVBcmdDYWxsYmFjayk6IHZvaWQ7XG5cdC8qKlxuXHQgKiAqKlN1cHBsZW1lbnRhbCoqOiBTeW5jaHJvbm91cyBgdHJ1bmNhdGVgLlxuXHQgKi9cblx0dHJ1bmNhdGVTeW5jKHA6IHN0cmluZywgbGVuOiBudW1iZXIsIGNyZWQ6IENyZWQpOiB2b2lkO1xuXHQvKipcblx0ICogKipTdXBwbGVtZW50YWwqKjogQXN5bmNocm9ub3VzbHkgcmVhZHMgdGhlIGVudGlyZSBjb250ZW50cyBvZiBhIGZpbGUuXG5cdCAqIEBwYXJhbSBlbmNvZGluZyBJZiBub24tbnVsbCwgdGhlIGZpbGUncyBjb250ZW50cyBzaG91bGQgYmUgZGVjb2RlZFxuXHQgKiAgIGludG8gYSBzdHJpbmcgdXNpbmcgdGhhdCBlbmNvZGluZy4gT3RoZXJ3aXNlLCBpZiBlbmNvZGluZyBpcyBudWxsLCBmZXRjaFxuXHQgKiAgIHRoZSBmaWxlJ3MgY29udGVudHMgYXMgYSBCdWZmZXIuXG5cdCAqIEBwYXJhbSBjYiBJZiBubyBlbmNvZGluZyBpcyBzcGVjaWZpZWQsIHRoZW4gdGhlIHJhdyBidWZmZXIgaXMgcmV0dXJuZWQuXG5cdCAqL1xuXHRyZWFkRmlsZShmbmFtZTogc3RyaW5nLCBlbmNvZGluZzogc3RyaW5nIHwgbnVsbCwgZmxhZzogRmlsZUZsYWcsIGNyZWQ6IENyZWQsIGNiOiBCRlNDYWxsYmFjazxzdHJpbmcgfCBCdWZmZXI+KTogdm9pZDtcblx0LyoqXG5cdCAqICoqU3VwcGxlbWVudGFsKio6IFN5bmNocm9ub3VzbHkgcmVhZHMgdGhlIGVudGlyZSBjb250ZW50cyBvZiBhIGZpbGUuXG5cdCAqIEBwYXJhbSBlbmNvZGluZyBJZiBub24tbnVsbCwgdGhlIGZpbGUncyBjb250ZW50cyBzaG91bGQgYmUgZGVjb2RlZFxuXHQgKiAgIGludG8gYSBzdHJpbmcgdXNpbmcgdGhhdCBlbmNvZGluZy4gT3RoZXJ3aXNlLCBpZiBlbmNvZGluZyBpcyBudWxsLCBmZXRjaFxuXHQgKiAgIHRoZSBmaWxlJ3MgY29udGVudHMgYXMgYSBCdWZmZXIuXG5cdCAqL1xuXHRyZWFkRmlsZVN5bmMoZm5hbWU6IHN0cmluZywgZW5jb2Rpbmc6IHN0cmluZyB8IG51bGwsIGZsYWc6IEZpbGVGbGFnLCBjcmVkOiBDcmVkKTogYW55O1xuXHQvKipcblx0ICogKipTdXBwbGVtZW50YWwqKjogQXN5bmNocm9ub3VzbHkgd3JpdGVzIGRhdGEgdG8gYSBmaWxlLCByZXBsYWNpbmcgdGhlIGZpbGVcblx0ICogaWYgaXQgYWxyZWFkeSBleGlzdHMuXG5cdCAqXG5cdCAqIFRoZSBlbmNvZGluZyBvcHRpb24gaXMgaWdub3JlZCBpZiBkYXRhIGlzIGEgYnVmZmVyLlxuXHQgKi9cblx0d3JpdGVGaWxlKGZuYW1lOiBzdHJpbmcsIGRhdGE6IGFueSwgZW5jb2Rpbmc6IHN0cmluZyB8IG51bGwsIGZsYWc6IEZpbGVGbGFnLCBtb2RlOiBudW1iZXIsIGNyZWQ6IENyZWQsIGNiOiBCRlNPbmVBcmdDYWxsYmFjayk6IHZvaWQ7XG5cdC8qKlxuXHQgKiAqKlN1cHBsZW1lbnRhbCoqOiBTeW5jaHJvbm91c2x5IHdyaXRlcyBkYXRhIHRvIGEgZmlsZSwgcmVwbGFjaW5nIHRoZSBmaWxlXG5cdCAqIGlmIGl0IGFscmVhZHkgZXhpc3RzLlxuXHQgKlxuXHQgKiBUaGUgZW5jb2Rpbmcgb3B0aW9uIGlzIGlnbm9yZWQgaWYgZGF0YSBpcyBhIGJ1ZmZlci5cblx0ICovXG5cdHdyaXRlRmlsZVN5bmMoZm5hbWU6IHN0cmluZywgZGF0YTogc3RyaW5nIHwgQnVmZmVyLCBlbmNvZGluZzogc3RyaW5nIHwgbnVsbCwgZmxhZzogRmlsZUZsYWcsIG1vZGU6IG51bWJlciwgY3JlZDogQ3JlZCk6IHZvaWQ7XG5cdC8qKlxuXHQgKiAqKlN1cHBsZW1lbnRhbCoqOiBBc3luY2hyb25vdXNseSBhcHBlbmQgZGF0YSB0byBhIGZpbGUsIGNyZWF0aW5nIHRoZSBmaWxlIGlmXG5cdCAqIGl0IG5vdCB5ZXQgZXhpc3RzLlxuXHQgKi9cblx0YXBwZW5kRmlsZShmbmFtZTogc3RyaW5nLCBkYXRhOiBzdHJpbmcgfCBCdWZmZXIsIGVuY29kaW5nOiBzdHJpbmcgfCBudWxsLCBmbGFnOiBGaWxlRmxhZywgbW9kZTogbnVtYmVyLCBjcmVkOiBDcmVkLCBjYjogQkZTT25lQXJnQ2FsbGJhY2spOiB2b2lkO1xuXHQvKipcblx0ICogKipTdXBwbGVtZW50YWwqKjogU3luY2hyb25vdXNseSBhcHBlbmQgZGF0YSB0byBhIGZpbGUsIGNyZWF0aW5nIHRoZSBmaWxlIGlmXG5cdCAqIGl0IG5vdCB5ZXQgZXhpc3RzLlxuXHQgKi9cblx0YXBwZW5kRmlsZVN5bmMoZm5hbWU6IHN0cmluZywgZGF0YTogc3RyaW5nIHwgQnVmZmVyLCBlbmNvZGluZzogc3RyaW5nIHwgbnVsbCwgZmxhZzogRmlsZUZsYWcsIG1vZGU6IG51bWJlciwgY3JlZDogQ3JlZCk6IHZvaWQ7XG5cdC8vICoqT1BUSU9OQUwgSU5URVJGQUNFIE1FVEhPRFMqKlxuXHQvLyBQcm9wZXJ0eSBvcGVyYXRpb25zXG5cdC8vIFRoaXMgaXNuJ3QgYWx3YXlzIHBvc3NpYmxlIG9uIHNvbWUgZmlsZXN5c3RlbSB0eXBlcyAoZS5nLiBEcm9wYm94KS5cblx0LyoqXG5cdCAqICoqT3B0aW9uYWwqKjogQXN5bmNocm9ub3VzIGBjaG1vZGAgb3IgYGxjaG1vZGAuXG5cdCAqIEBwYXJhbSBpc0xjaG1vZCBgVHJ1ZWAgaWYgYGxjaG1vZGAsIGZhbHNlIGlmIGBjaG1vZGAuIEhhcyBub1xuXHQgKiAgIGJlYXJpbmcgb24gcmVzdWx0IGlmIGxpbmtzIGFyZW4ndCBzdXBwb3J0ZWQuXG5cdCAqL1xuXHRjaG1vZChwOiBzdHJpbmcsIGlzTGNobW9kOiBib29sZWFuLCBtb2RlOiBudW1iZXIsIGNyZWQ6IENyZWQsIGNiOiBCRlNPbmVBcmdDYWxsYmFjayk6IHZvaWQ7XG5cdC8qKlxuXHQgKiAqKk9wdGlvbmFsKio6IFN5bmNocm9ub3VzIGBjaG1vZGAgb3IgYGxjaG1vZGAuXG5cdCAqIEBwYXJhbSBpc0xjaG1vZCBgVHJ1ZWAgaWYgYGxjaG1vZGAsIGZhbHNlIGlmIGBjaG1vZGAuIEhhcyBub1xuXHQgKiAgIGJlYXJpbmcgb24gcmVzdWx0IGlmIGxpbmtzIGFyZW4ndCBzdXBwb3J0ZWQuXG5cdCAqL1xuXHRjaG1vZFN5bmMocDogc3RyaW5nLCBpc0xjaG1vZDogYm9vbGVhbiwgbW9kZTogbnVtYmVyLCBjcmVkOiBDcmVkKTogdm9pZDtcblx0LyoqXG5cdCAqICoqT3B0aW9uYWwqKjogQXN5bmNocm9ub3VzIGBjaG93bmAgb3IgYGxjaG93bmAuXG5cdCAqIEBwYXJhbSBpc0xjaG93biBgVHJ1ZWAgaWYgYGxjaG93bmAsIGZhbHNlIGlmIGBjaG93bmAuIEhhcyBub1xuXHQgKiAgIGJlYXJpbmcgb24gcmVzdWx0IGlmIGxpbmtzIGFyZW4ndCBzdXBwb3J0ZWQuXG5cdCAqL1xuXHRjaG93bihwOiBzdHJpbmcsIGlzTGNob3duOiBib29sZWFuLCBuZXdfdWlkOiBudW1iZXIsIG5ld19naWQ6IG51bWJlciwgY3JlZDogQ3JlZCwgY2I6IEJGU09uZUFyZ0NhbGxiYWNrKTogdm9pZDtcblx0LyoqXG5cdCAqICoqT3B0aW9uYWwqKjogU3luY2hyb25vdXMgYGNob3duYCBvciBgbGNob3duYC5cblx0ICogQHBhcmFtIGlzTGNob3duIGBUcnVlYCBpZiBgbGNob3duYCwgZmFsc2UgaWYgYGNob3duYC4gSGFzIG5vXG5cdCAqICAgYmVhcmluZyBvbiByZXN1bHQgaWYgbGlua3MgYXJlbid0IHN1cHBvcnRlZC5cblx0ICovXG5cdGNob3duU3luYyhwOiBzdHJpbmcsIGlzTGNob3duOiBib29sZWFuLCBuZXdfdWlkOiBudW1iZXIsIG5ld19naWQ6IG51bWJlciwgY3JlZDogQ3JlZCk6IHZvaWQ7XG5cdC8qKlxuXHQgKiAqKk9wdGlvbmFsKio6IENoYW5nZSBmaWxlIHRpbWVzdGFtcHMgb2YgdGhlIGZpbGUgcmVmZXJlbmNlZCBieSB0aGUgc3VwcGxpZWRcblx0ICogcGF0aC5cblx0ICovXG5cdHV0aW1lcyhwOiBzdHJpbmcsIGF0aW1lOiBEYXRlLCBtdGltZTogRGF0ZSwgY3JlZDogQ3JlZCwgY2I6IEJGU09uZUFyZ0NhbGxiYWNrKTogdm9pZDtcblx0LyoqXG5cdCAqICoqT3B0aW9uYWwqKjogQ2hhbmdlIGZpbGUgdGltZXN0YW1wcyBvZiB0aGUgZmlsZSByZWZlcmVuY2VkIGJ5IHRoZSBzdXBwbGllZFxuXHQgKiBwYXRoLlxuXHQgKi9cblx0dXRpbWVzU3luYyhwOiBzdHJpbmcsIGF0aW1lOiBEYXRlLCBtdGltZTogRGF0ZSwgY3JlZDogQ3JlZCk6IHZvaWQ7XG5cdC8vIFN5bWxpbmsgb3BlcmF0aW9uc1xuXHQvLyBTeW1saW5rcyBhcmVuJ3QgYWx3YXlzIHN1cHBvcnRlZC5cblx0LyoqXG5cdCAqICoqT3B0aW9uYWwqKjogQXN5bmNocm9ub3VzIGBsaW5rYC5cblx0ICovXG5cdGxpbmsoc3JjcGF0aDogc3RyaW5nLCBkc3RwYXRoOiBzdHJpbmcsIGNyZWQ6IENyZWQsIGNiOiBCRlNPbmVBcmdDYWxsYmFjayk6IHZvaWQ7XG5cdC8qKlxuXHQgKiAqKk9wdGlvbmFsKio6IFN5bmNocm9ub3VzIGBsaW5rYC5cblx0ICovXG5cdGxpbmtTeW5jKHNyY3BhdGg6IHN0cmluZywgZHN0cGF0aDogc3RyaW5nLCBjcmVkOiBDcmVkKTogdm9pZDtcblx0LyoqXG5cdCAqICoqT3B0aW9uYWwqKjogQXN5bmNocm9ub3VzIGBzeW1saW5rYC5cblx0ICogQHBhcmFtIHR5cGUgY2FuIGJlIGVpdGhlciBgJ2RpcidgIG9yIGAnZmlsZSdgXG5cdCAqL1xuXHRzeW1saW5rKHNyY3BhdGg6IHN0cmluZywgZHN0cGF0aDogc3RyaW5nLCB0eXBlOiBzdHJpbmcsIGNyZWQ6IENyZWQsIGNiOiBCRlNPbmVBcmdDYWxsYmFjayk6IHZvaWQ7XG5cdC8qKlxuXHQgKiAqKk9wdGlvbmFsKio6IFN5bmNocm9ub3VzIGBzeW1saW5rYC5cblx0ICogQHBhcmFtIHR5cGUgY2FuIGJlIGVpdGhlciBgJ2RpcidgIG9yIGAnZmlsZSdgXG5cdCAqL1xuXHRzeW1saW5rU3luYyhzcmNwYXRoOiBzdHJpbmcsIGRzdHBhdGg6IHN0cmluZywgdHlwZTogc3RyaW5nLCBjcmVkOiBDcmVkKTogdm9pZDtcblx0LyoqXG5cdCAqICoqT3B0aW9uYWwqKjogQXN5bmNocm9ub3VzIHJlYWRsaW5rLlxuXHQgKi9cblx0cmVhZGxpbmsocDogc3RyaW5nLCBjcmVkOiBDcmVkLCBjYjogQkZTQ2FsbGJhY2s8c3RyaW5nPik6IHZvaWQ7XG5cdC8qKlxuXHQgKiAqKk9wdGlvbmFsKio6IFN5bmNocm9ub3VzIHJlYWRsaW5rLlxuXHQgKi9cblx0cmVhZGxpbmtTeW5jKHA6IHN0cmluZywgY3JlZDogQ3JlZCk6IHN0cmluZztcbn1cblxuLyoqXG4gKiBEZXNjcmliZXMgYSBmaWxlIHN5c3RlbSBvcHRpb24uXG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgRmlsZVN5c3RlbU9wdGlvbjxUPiB7XG5cdC8vIFRoZSBiYXNpYyBKYXZhU2NyaXB0IHR5cGUocykgZm9yIHRoaXMgb3B0aW9uLlxuXHR0eXBlOiBzdHJpbmcgfCBzdHJpbmdbXTtcblx0Ly8gV2hldGhlciBvciBub3QgdGhlIG9wdGlvbiBpcyBvcHRpb25hbCAoZS5nLiwgY2FuIGJlIHNldCB0byBudWxsIG9yIHVuZGVmaW5lZCkuXG5cdC8vIERlZmF1bHRzIHRvIGBmYWxzZWAuXG5cdG9wdGlvbmFsPzogYm9vbGVhbjtcblx0Ly8gRGVzY3JpcHRpb24gb2YgdGhlIG9wdGlvbi4gVXNlZCBpbiBlcnJvciBtZXNzYWdlcyBhbmQgZG9jdW1lbnRhdGlvbi5cblx0ZGVzY3JpcHRpb246IHN0cmluZztcblx0Ly8gQSBjdXN0b20gdmFsaWRhdGlvbiBmdW5jdGlvbiB0byBjaGVjayBpZiB0aGUgb3B0aW9uIGlzIHZhbGlkLlxuXHQvLyBDYWxscyB0aGUgY2FsbGJhY2sgd2l0aCBhbiBlcnJvciBvYmplY3Qgb24gYW4gZXJyb3IuXG5cdC8vIChDYW4gY2FsbCBjYWxsYmFjayBzeW5jaHJvbm91c2x5Lilcblx0Ly8gRGVmYXVsdHMgdG8gYChvcHQsIGNiKSA9PiBjYigpYC5cblx0dmFsaWRhdG9yPyhvcHQ6IFQsIGNiOiBCRlNPbmVBcmdDYWxsYmFjayk6IHZvaWQ7XG59XG5cbi8qKlxuICogRGVzY3JpYmVzIGFsbCBvZiB0aGUgb3B0aW9ucyBhdmFpbGFibGUgaW4gYSBmaWxlIHN5c3RlbS5cbiAqL1xuZXhwb3J0IGludGVyZmFjZSBGaWxlU3lzdGVtT3B0aW9ucyB7XG5cdFtuYW1lOiBzdHJpbmddOiBGaWxlU3lzdGVtT3B0aW9uPGFueT47XG59XG5cbi8qKlxuICogQ29udGFpbnMgdHlwaW5ncyBmb3Igc3RhdGljIGZ1bmN0aW9ucyBvbiB0aGUgZmlsZSBzeXN0ZW0gY29uc3RydWN0b3IuXG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgRmlsZVN5c3RlbUNvbnN0cnVjdG9yIHtcblx0LyoqXG5cdCAqICoqQ29yZSoqOiBOYW1lIHRvIGlkZW50aWZ5IHRoaXMgcGFydGljdWxhciBmaWxlIHN5c3RlbS5cblx0ICovXG5cdE5hbWU6IHN0cmluZztcblx0LyoqXG5cdCAqICoqQ29yZSoqOiBEZXNjcmliZXMgYWxsIG9mIHRoZSBvcHRpb25zIGF2YWlsYWJsZSBmb3IgdGhpcyBmaWxlIHN5c3RlbS5cblx0ICovXG5cdE9wdGlvbnM6IEZpbGVTeXN0ZW1PcHRpb25zO1xuXHQvKipcblx0ICogKipDb3JlKio6IENyZWF0ZXMgYSBmaWxlIHN5c3RlbSBvZiB0aGlzIGdpdmVuIHR5cGUgd2l0aCB0aGUgZ2l2ZW5cblx0ICogb3B0aW9ucywgYW5kIHJldHVybnMgdGhlIHJlc3VsdCBpbiBhIGNhbGxiYWNrLlxuXHQgKi9cblx0Q3JlYXRlKG9wdGlvbnM6IG9iamVjdCwgY2I6IEJGU0NhbGxiYWNrPEZpbGVTeXN0ZW0+KTogdm9pZDtcblx0LyoqXG5cdCAqICoqQ29yZSoqOiBDcmVhdGVzIGEgZmlsZSBzeXN0ZW0gb2YgdGhpcyBnaXZlbiB0eXBlIHdpdGggdGhlIGdpdmVuXG5cdCAqIG9wdGlvbnMsIGFuZCByZXR1cm5zIHRoZSByZXN1bHQgaW4gYSBwcm9taXNlLlxuXHQgKi9cblx0Q3JlYXRlQXN5bmMob3B0aW9uczogb2JqZWN0KTogUHJvbWlzZTxGaWxlU3lzdGVtPjtcblx0LyoqXG5cdCAqICoqQ29yZSoqOiBSZXR1cm5zICd0cnVlJyBpZiB0aGlzIGZpbGVzeXN0ZW0gaXMgYXZhaWxhYmxlIGluIHRoZSBjdXJyZW50XG5cdCAqIGVudmlyb25tZW50LiBGb3IgZXhhbXBsZSwgYSBgbG9jYWxTdG9yYWdlYC1iYWNrZWQgZmlsZXN5c3RlbSB3aWxsIHJldHVyblxuXHQgKiAnZmFsc2UnIGlmIHRoZSBicm93c2VyIGRvZXMgbm90IHN1cHBvcnQgdGhhdCBBUEkuXG5cdCAqXG5cdCAqIERlZmF1bHRzIHRvICdmYWxzZScsIGFzIHRoZSBGaWxlU3lzdGVtIGJhc2UgY2xhc3MgaXNuJ3QgdXNhYmxlIGFsb25lLlxuXHQgKi9cblx0aXNBdmFpbGFibGUoKTogYm9vbGVhbjtcbn1cblxuLyoqXG4gKiBCYXNpYyBmaWxlc3lzdGVtIGNsYXNzLiBNb3N0IGZpbGVzeXN0ZW1zIHNob3VsZCBleHRlbmQgdGhpcyBjbGFzcywgYXMgaXRcbiAqIHByb3ZpZGVzIGRlZmF1bHQgaW1wbGVtZW50YXRpb25zIGZvciBhIGhhbmRmdWwgb2YgbWV0aG9kcy5cbiAqL1xuZXhwb3J0IGNsYXNzIEJhc2VGaWxlU3lzdGVtIHtcblx0cHVibGljIHN1cHBvcnRzTGlua3MoKTogYm9vbGVhbiB7XG5cdFx0cmV0dXJuIGZhbHNlO1xuXHR9XG5cdHB1YmxpYyBkaXNrU3BhY2UocDogc3RyaW5nLCBjYjogKHRvdGFsOiBudW1iZXIsIGZyZWU6IG51bWJlcikgPT4gYW55KTogdm9pZCB7XG5cdFx0Y2IoMCwgMCk7XG5cdH1cblx0LyoqXG5cdCAqIE9wZW5zIHRoZSBmaWxlIGF0IHBhdGggcCB3aXRoIHRoZSBnaXZlbiBmbGFnLiBUaGUgZmlsZSBtdXN0IGV4aXN0LlxuXHQgKiBAcGFyYW0gcCBUaGUgcGF0aCB0byBvcGVuLlxuXHQgKiBAcGFyYW0gZmxhZyBUaGUgZmxhZyB0byB1c2Ugd2hlbiBvcGVuaW5nIHRoZSBmaWxlLlxuXHQgKi9cblx0cHVibGljIG9wZW5GaWxlKHA6IHN0cmluZywgZmxhZzogRmlsZUZsYWcsIGNyZWQ6IENyZWQsIGNiOiBCRlNDYWxsYmFjazxGaWxlPik6IHZvaWQge1xuXHRcdHRocm93IG5ldyBBcGlFcnJvcihFcnJvckNvZGUuRU5PVFNVUCk7XG5cdH1cblx0LyoqXG5cdCAqIENyZWF0ZSB0aGUgZmlsZSBhdCBwYXRoIHAgd2l0aCB0aGUgZ2l2ZW4gbW9kZS4gVGhlbiwgb3BlbiBpdCB3aXRoIHRoZSBnaXZlblxuXHQgKiBmbGFnLlxuXHQgKi9cblx0cHVibGljIGNyZWF0ZUZpbGUocDogc3RyaW5nLCBmbGFnOiBGaWxlRmxhZywgbW9kZTogbnVtYmVyLCBjcmVkOiBDcmVkLCBjYjogQkZTQ2FsbGJhY2s8RmlsZT4pOiB2b2lkIHtcblx0XHR0aHJvdyBuZXcgQXBpRXJyb3IoRXJyb3JDb2RlLkVOT1RTVVApO1xuXHR9XG5cdHB1YmxpYyBvcGVuKHA6IHN0cmluZywgZmxhZzogRmlsZUZsYWcsIG1vZGU6IG51bWJlciwgY3JlZDogQ3JlZCwgY2I6IEJGU0NhbGxiYWNrPEZpbGU+KTogdm9pZCB7XG5cdFx0Y29uc3QgbXVzdEJlRmlsZSA9IChlOiBBcGlFcnJvciwgc3RhdHM/OiBTdGF0cyk6IHZvaWQgPT4ge1xuXHRcdFx0aWYgKGUpIHtcblx0XHRcdFx0Ly8gRmlsZSBkb2VzIG5vdCBleGlzdC5cblx0XHRcdFx0c3dpdGNoIChmbGFnLnBhdGhOb3RFeGlzdHNBY3Rpb24oKSkge1xuXHRcdFx0XHRcdGNhc2UgQWN0aW9uVHlwZS5DUkVBVEVfRklMRTpcblx0XHRcdFx0XHRcdC8vIEVuc3VyZSBwYXJlbnQgZXhpc3RzLlxuXHRcdFx0XHRcdFx0cmV0dXJuIHRoaXMuc3RhdChwYXRoLmRpcm5hbWUocCksIGZhbHNlLCBjcmVkLCAoZTogQXBpRXJyb3IsIHBhcmVudFN0YXRzPzogU3RhdHMpID0+IHtcblx0XHRcdFx0XHRcdFx0aWYgKGUpIHtcblx0XHRcdFx0XHRcdFx0XHRjYihlKTtcblx0XHRcdFx0XHRcdFx0fSBlbHNlIGlmIChwYXJlbnRTdGF0cyAmJiAhcGFyZW50U3RhdHMuaXNEaXJlY3RvcnkoKSkge1xuXHRcdFx0XHRcdFx0XHRcdGNiKEFwaUVycm9yLkVOT1RESVIocGF0aC5kaXJuYW1lKHApKSk7XG5cdFx0XHRcdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0XHRcdFx0dGhpcy5jcmVhdGVGaWxlKHAsIGZsYWcsIG1vZGUsIGNyZWQsIGNiKTtcblx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0fSk7XG5cdFx0XHRcdFx0Y2FzZSBBY3Rpb25UeXBlLlRIUk9XX0VYQ0VQVElPTjpcblx0XHRcdFx0XHRcdHJldHVybiBjYihBcGlFcnJvci5FTk9FTlQocCkpO1xuXHRcdFx0XHRcdGRlZmF1bHQ6XG5cdFx0XHRcdFx0XHRyZXR1cm4gY2IobmV3IEFwaUVycm9yKEVycm9yQ29kZS5FSU5WQUwsICdJbnZhbGlkIEZpbGVGbGFnIG9iamVjdC4nKSk7XG5cdFx0XHRcdH1cblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdC8vIEZpbGUgZXhpc3RzLlxuXHRcdFx0XHRzd2l0Y2ggKGZsYWcucGF0aEV4aXN0c0FjdGlvbigpKSB7XG5cdFx0XHRcdFx0Y2FzZSBBY3Rpb25UeXBlLlRIUk9XX0VYQ0VQVElPTjpcblx0XHRcdFx0XHRcdHJldHVybiBjYihBcGlFcnJvci5FRVhJU1QocCkpO1xuXHRcdFx0XHRcdGNhc2UgQWN0aW9uVHlwZS5UUlVOQ0FURV9GSUxFOlxuXHRcdFx0XHRcdFx0Ly8gTk9URTogSW4gYSBwcmV2aW91cyBpbXBsZW1lbnRhdGlvbiwgd2UgZGVsZXRlZCB0aGUgZmlsZSBhbmRcblx0XHRcdFx0XHRcdC8vIHJlLWNyZWF0ZWQgaXQuIEhvd2V2ZXIsIHRoaXMgY3JlYXRlZCBhIHJhY2UgY29uZGl0aW9uIGlmIGFub3RoZXJcblx0XHRcdFx0XHRcdC8vIGFzeW5jaHJvbm91cyByZXF1ZXN0IHdhcyB0cnlpbmcgdG8gcmVhZCB0aGUgZmlsZSwgYXMgdGhlIGZpbGVcblx0XHRcdFx0XHRcdC8vIHdvdWxkIG5vdCBleGlzdCBmb3IgYSBzbWFsbCBwZXJpb2Qgb2YgdGltZS5cblx0XHRcdFx0XHRcdHJldHVybiB0aGlzLm9wZW5GaWxlKHAsIGZsYWcsIGNyZWQsIChlOiBBcGlFcnJvciwgZmQ/OiBGaWxlKTogdm9pZCA9PiB7XG5cdFx0XHRcdFx0XHRcdGlmIChlKSB7XG5cdFx0XHRcdFx0XHRcdFx0Y2IoZSk7XG5cdFx0XHRcdFx0XHRcdH0gZWxzZSBpZiAoZmQpIHtcblx0XHRcdFx0XHRcdFx0XHRmZC50cnVuY2F0ZSgwLCAoKSA9PiB7XG5cdFx0XHRcdFx0XHRcdFx0XHRmZC5zeW5jKCgpID0+IHtcblx0XHRcdFx0XHRcdFx0XHRcdFx0Y2IobnVsbCwgZmQpO1xuXHRcdFx0XHRcdFx0XHRcdFx0fSk7XG5cdFx0XHRcdFx0XHRcdFx0fSk7XG5cdFx0XHRcdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0XHRcdFx0ZmFpbCgpO1xuXHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHR9KTtcblx0XHRcdFx0XHRjYXNlIEFjdGlvblR5cGUuTk9QOlxuXHRcdFx0XHRcdFx0cmV0dXJuIHRoaXMub3BlbkZpbGUocCwgZmxhZywgY3JlZCwgY2IpO1xuXHRcdFx0XHRcdGRlZmF1bHQ6XG5cdFx0XHRcdFx0XHRyZXR1cm4gY2IobmV3IEFwaUVycm9yKEVycm9yQ29kZS5FSU5WQUwsICdJbnZhbGlkIEZpbGVGbGFnIG9iamVjdC4nKSk7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9O1xuXHRcdHRoaXMuc3RhdChwLCBmYWxzZSwgY3JlZCwgbXVzdEJlRmlsZSk7XG5cdH1cblx0cHVibGljIGFjY2VzcyhwOiBzdHJpbmcsIG1vZGU6IG51bWJlciwgY3JlZDogQ3JlZCwgY2I6IEJGU09uZUFyZ0NhbGxiYWNrKTogdm9pZCB7XG5cdFx0Y2IobmV3IEFwaUVycm9yKEVycm9yQ29kZS5FTk9UU1VQKSk7XG5cdH1cblx0cHVibGljIGFjY2Vzc1N5bmMocDogc3RyaW5nLCBtb2RlOiBudW1iZXIsIGNyZWQ6IENyZWQpOiB2b2lkIHtcblx0XHR0aHJvdyBuZXcgQXBpRXJyb3IoRXJyb3JDb2RlLkVOT1RTVVApO1xuXHR9XG5cdHB1YmxpYyByZW5hbWUob2xkUGF0aDogc3RyaW5nLCBuZXdQYXRoOiBzdHJpbmcsIGNyZWQ6IENyZWQsIGNiOiBCRlNPbmVBcmdDYWxsYmFjayk6IHZvaWQge1xuXHRcdGNiKG5ldyBBcGlFcnJvcihFcnJvckNvZGUuRU5PVFNVUCkpO1xuXHR9XG5cdHB1YmxpYyByZW5hbWVTeW5jKG9sZFBhdGg6IHN0cmluZywgbmV3UGF0aDogc3RyaW5nLCBjcmVkOiBDcmVkKTogdm9pZCB7XG5cdFx0dGhyb3cgbmV3IEFwaUVycm9yKEVycm9yQ29kZS5FTk9UU1VQKTtcblx0fVxuXHRwdWJsaWMgc3RhdChwOiBzdHJpbmcsIGlzTHN0YXQ6IGJvb2xlYW4gfCBudWxsLCBjcmVkOiBDcmVkLCBjYjogQkZTQ2FsbGJhY2s8U3RhdHM+KTogdm9pZCB7XG5cdFx0Y2IobmV3IEFwaUVycm9yKEVycm9yQ29kZS5FTk9UU1VQKSk7XG5cdH1cblx0cHVibGljIHN0YXRTeW5jKHA6IHN0cmluZywgaXNMc3RhdDogYm9vbGVhbiB8IG51bGwsIGNyZWQ6IENyZWQpOiBTdGF0cyB7XG5cdFx0dGhyb3cgbmV3IEFwaUVycm9yKEVycm9yQ29kZS5FTk9UU1VQKTtcblx0fVxuXHQvKipcblx0ICogT3BlbnMgdGhlIGZpbGUgYXQgcGF0aCBwIHdpdGggdGhlIGdpdmVuIGZsYWcuIFRoZSBmaWxlIG11c3QgZXhpc3QuXG5cdCAqIEBwYXJhbSBwIFRoZSBwYXRoIHRvIG9wZW4uXG5cdCAqIEBwYXJhbSBmbGFnIFRoZSBmbGFnIHRvIHVzZSB3aGVuIG9wZW5pbmcgdGhlIGZpbGUuXG5cdCAqIEByZXR1cm4gQSBGaWxlIG9iamVjdCBjb3JyZXNwb25kaW5nIHRvIHRoZSBvcGVuZWQgZmlsZS5cblx0ICovXG5cdHB1YmxpYyBvcGVuRmlsZVN5bmMocDogc3RyaW5nLCBmbGFnOiBGaWxlRmxhZywgY3JlZDogQ3JlZCk6IEZpbGUge1xuXHRcdHRocm93IG5ldyBBcGlFcnJvcihFcnJvckNvZGUuRU5PVFNVUCk7XG5cdH1cblx0LyoqXG5cdCAqIENyZWF0ZSB0aGUgZmlsZSBhdCBwYXRoIHAgd2l0aCB0aGUgZ2l2ZW4gbW9kZS4gVGhlbiwgb3BlbiBpdCB3aXRoIHRoZSBnaXZlblxuXHQgKiBmbGFnLlxuXHQgKi9cblx0cHVibGljIGNyZWF0ZUZpbGVTeW5jKHA6IHN0cmluZywgZmxhZzogRmlsZUZsYWcsIG1vZGU6IG51bWJlciwgY3JlZDogQ3JlZCk6IEZpbGUge1xuXHRcdHRocm93IG5ldyBBcGlFcnJvcihFcnJvckNvZGUuRU5PVFNVUCk7XG5cdH1cblx0cHVibGljIG9wZW5TeW5jKHA6IHN0cmluZywgZmxhZzogRmlsZUZsYWcsIG1vZGU6IG51bWJlciwgY3JlZDogQ3JlZCk6IEZpbGUge1xuXHRcdC8vIENoZWNrIGlmIHRoZSBwYXRoIGV4aXN0cywgYW5kIGlzIGEgZmlsZS5cblx0XHRsZXQgc3RhdHM6IFN0YXRzO1xuXHRcdHRyeSB7XG5cdFx0XHRzdGF0cyA9IHRoaXMuc3RhdFN5bmMocCwgZmFsc2UsIGNyZWQpO1xuXHRcdH0gY2F0Y2ggKGUpIHtcblx0XHRcdC8vIEZpbGUgZG9lcyBub3QgZXhpc3QuXG5cdFx0XHRzd2l0Y2ggKGZsYWcucGF0aE5vdEV4aXN0c0FjdGlvbigpKSB7XG5cdFx0XHRcdGNhc2UgQWN0aW9uVHlwZS5DUkVBVEVfRklMRTpcblx0XHRcdFx0XHQvLyBFbnN1cmUgcGFyZW50IGV4aXN0cy5cblx0XHRcdFx0XHRjb25zdCBwYXJlbnRTdGF0cyA9IHRoaXMuc3RhdFN5bmMocGF0aC5kaXJuYW1lKHApLCBmYWxzZSwgY3JlZCk7XG5cdFx0XHRcdFx0aWYgKCFwYXJlbnRTdGF0cy5pc0RpcmVjdG9yeSgpKSB7XG5cdFx0XHRcdFx0XHR0aHJvdyBBcGlFcnJvci5FTk9URElSKHBhdGguZGlybmFtZShwKSk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdHJldHVybiB0aGlzLmNyZWF0ZUZpbGVTeW5jKHAsIGZsYWcsIG1vZGUsIGNyZWQpO1xuXHRcdFx0XHRjYXNlIEFjdGlvblR5cGUuVEhST1dfRVhDRVBUSU9OOlxuXHRcdFx0XHRcdHRocm93IEFwaUVycm9yLkVOT0VOVChwKTtcblx0XHRcdFx0ZGVmYXVsdDpcblx0XHRcdFx0XHR0aHJvdyBuZXcgQXBpRXJyb3IoRXJyb3JDb2RlLkVJTlZBTCwgJ0ludmFsaWQgRmlsZUZsYWcgb2JqZWN0LicpO1xuXHRcdFx0fVxuXHRcdH1cblx0XHRpZiAoIXN0YXRzLmhhc0FjY2Vzcyhtb2RlLCBjcmVkKSkge1xuXHRcdFx0dGhyb3cgQXBpRXJyb3IuRUFDQ0VTKHApO1xuXHRcdH1cblxuXHRcdC8vIEZpbGUgZXhpc3RzLlxuXHRcdHN3aXRjaCAoZmxhZy5wYXRoRXhpc3RzQWN0aW9uKCkpIHtcblx0XHRcdGNhc2UgQWN0aW9uVHlwZS5USFJPV19FWENFUFRJT046XG5cdFx0XHRcdHRocm93IEFwaUVycm9yLkVFWElTVChwKTtcblx0XHRcdGNhc2UgQWN0aW9uVHlwZS5UUlVOQ0FURV9GSUxFOlxuXHRcdFx0XHQvLyBEZWxldGUgZmlsZS5cblx0XHRcdFx0dGhpcy51bmxpbmtTeW5jKHAsIGNyZWQpO1xuXHRcdFx0XHQvLyBDcmVhdGUgZmlsZS4gVXNlIHRoZSBzYW1lIG1vZGUgYXMgdGhlIG9sZCBmaWxlLlxuXHRcdFx0XHQvLyBOb2RlIGl0c2VsZiBtb2RpZmllcyB0aGUgY3RpbWUgd2hlbiB0aGlzIG9jY3Vycywgc28gdGhpcyBhY3Rpb25cblx0XHRcdFx0Ly8gd2lsbCBwcmVzZXJ2ZSB0aGF0IGJlaGF2aW9yIGlmIHRoZSB1bmRlcmx5aW5nIGZpbGUgc3lzdGVtXG5cdFx0XHRcdC8vIHN1cHBvcnRzIHRob3NlIHByb3BlcnRpZXMuXG5cdFx0XHRcdHJldHVybiB0aGlzLmNyZWF0ZUZpbGVTeW5jKHAsIGZsYWcsIHN0YXRzLm1vZGUsIGNyZWQpO1xuXHRcdFx0Y2FzZSBBY3Rpb25UeXBlLk5PUDpcblx0XHRcdFx0cmV0dXJuIHRoaXMub3BlbkZpbGVTeW5jKHAsIGZsYWcsIGNyZWQpO1xuXHRcdFx0ZGVmYXVsdDpcblx0XHRcdFx0dGhyb3cgbmV3IEFwaUVycm9yKEVycm9yQ29kZS5FSU5WQUwsICdJbnZhbGlkIEZpbGVGbGFnIG9iamVjdC4nKTtcblx0XHR9XG5cdH1cblx0cHVibGljIHVubGluayhwOiBzdHJpbmcsIGNyZWQ6IENyZWQsIGNiOiBCRlNPbmVBcmdDYWxsYmFjayk6IHZvaWQge1xuXHRcdGNiKG5ldyBBcGlFcnJvcihFcnJvckNvZGUuRU5PVFNVUCkpO1xuXHR9XG5cdHB1YmxpYyB1bmxpbmtTeW5jKHA6IHN0cmluZywgY3JlZDogQ3JlZCk6IHZvaWQge1xuXHRcdHRocm93IG5ldyBBcGlFcnJvcihFcnJvckNvZGUuRU5PVFNVUCk7XG5cdH1cblx0cHVibGljIHJtZGlyKHA6IHN0cmluZywgY3JlZDogQ3JlZCwgY2I6IEJGU09uZUFyZ0NhbGxiYWNrKTogdm9pZCB7XG5cdFx0Y2IobmV3IEFwaUVycm9yKEVycm9yQ29kZS5FTk9UU1VQKSk7XG5cdH1cblx0cHVibGljIHJtZGlyU3luYyhwOiBzdHJpbmcsIGNyZWQ6IENyZWQpOiB2b2lkIHtcblx0XHR0aHJvdyBuZXcgQXBpRXJyb3IoRXJyb3JDb2RlLkVOT1RTVVApO1xuXHR9XG5cdHB1YmxpYyBta2RpcihwOiBzdHJpbmcsIG1vZGU6IG51bWJlciwgY3JlZDogQ3JlZCwgY2I6IEJGU09uZUFyZ0NhbGxiYWNrKTogdm9pZCB7XG5cdFx0Y2IobmV3IEFwaUVycm9yKEVycm9yQ29kZS5FTk9UU1VQKSk7XG5cdH1cblx0cHVibGljIG1rZGlyU3luYyhwOiBzdHJpbmcsIG1vZGU6IG51bWJlciwgY3JlZDogQ3JlZCk6IHZvaWQge1xuXHRcdHRocm93IG5ldyBBcGlFcnJvcihFcnJvckNvZGUuRU5PVFNVUCk7XG5cdH1cblx0cHVibGljIHJlYWRkaXIocDogc3RyaW5nLCBjcmVkOiBDcmVkLCBjYjogQkZTQ2FsbGJhY2s8c3RyaW5nW10+KTogdm9pZCB7XG5cdFx0Y2IobmV3IEFwaUVycm9yKEVycm9yQ29kZS5FTk9UU1VQKSk7XG5cdH1cblx0cHVibGljIHJlYWRkaXJTeW5jKHA6IHN0cmluZywgY3JlZDogQ3JlZCk6IHN0cmluZ1tdIHtcblx0XHR0aHJvdyBuZXcgQXBpRXJyb3IoRXJyb3JDb2RlLkVOT1RTVVApO1xuXHR9XG5cdHB1YmxpYyBleGlzdHMocDogc3RyaW5nLCBjcmVkOiBDcmVkLCBjYjogKGV4aXN0czogYm9vbGVhbikgPT4gdm9pZCk6IHZvaWQge1xuXHRcdHRoaXMuc3RhdChwLCBudWxsLCBjcmVkLCBmdW5jdGlvbiAoZXJyKSB7XG5cdFx0XHRjYighZXJyKTtcblx0XHR9KTtcblx0fVxuXHRwdWJsaWMgZXhpc3RzU3luYyhwOiBzdHJpbmcsIGNyZWQ6IENyZWQpOiBib29sZWFuIHtcblx0XHR0cnkge1xuXHRcdFx0dGhpcy5zdGF0U3luYyhwLCB0cnVlLCBjcmVkKTtcblx0XHRcdHJldHVybiB0cnVlO1xuXHRcdH0gY2F0Y2ggKGUpIHtcblx0XHRcdHJldHVybiBmYWxzZTtcblx0XHR9XG5cdH1cblx0cHVibGljIHJlYWxwYXRoKHA6IHN0cmluZywgY2FjaGU6IHsgW3BhdGg6IHN0cmluZ106IHN0cmluZyB9LCBjcmVkOiBDcmVkLCBjYjogQkZTQ2FsbGJhY2s8c3RyaW5nPik6IHZvaWQge1xuXHRcdGlmICh0aGlzLnN1cHBvcnRzTGlua3MoKSkge1xuXHRcdFx0Ly8gVGhlIHBhdGggY291bGQgY29udGFpbiBzeW1saW5rcy4gU3BsaXQgdXAgdGhlIHBhdGgsXG5cdFx0XHQvLyByZXNvbHZlIGFueSBzeW1saW5rcywgcmV0dXJuIHRoZSByZXNvbHZlZCBzdHJpbmcuXG5cdFx0XHRjb25zdCBzcGxpdFBhdGggPSBwLnNwbGl0KHBhdGguc2VwKTtcblx0XHRcdC8vIFRPRE86IFNpbXBsZXIgdG8ganVzdCBwYXNzIHRocm91Z2ggZmlsZSwgZmluZCBzZXAgYW5kIHN1Y2guXG5cdFx0XHRmb3IgKGxldCBpID0gMDsgaSA8IHNwbGl0UGF0aC5sZW5ndGg7IGkrKykge1xuXHRcdFx0XHRjb25zdCBhZGRQYXRocyA9IHNwbGl0UGF0aC5zbGljZSgwLCBpICsgMSk7XG5cdFx0XHRcdHNwbGl0UGF0aFtpXSA9IHBhdGguam9pbi5hcHBseShudWxsLCBhZGRQYXRocyk7XG5cdFx0XHR9XG5cdFx0fSBlbHNlIHtcblx0XHRcdC8vIE5vIHN5bWxpbmtzLiBXZSBqdXN0IG5lZWQgdG8gdmVyaWZ5IHRoYXQgaXQgZXhpc3RzLlxuXHRcdFx0dGhpcy5leGlzdHMocCwgY3JlZCwgZnVuY3Rpb24gKGRvZXNFeGlzdCkge1xuXHRcdFx0XHRpZiAoZG9lc0V4aXN0KSB7XG5cdFx0XHRcdFx0Y2IobnVsbCwgcCk7XG5cdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0Y2IoQXBpRXJyb3IuRU5PRU5UKHApKTtcblx0XHRcdFx0fVxuXHRcdFx0fSk7XG5cdFx0fVxuXHR9XG5cdHB1YmxpYyByZWFscGF0aFN5bmMocDogc3RyaW5nLCBjYWNoZTogeyBbcGF0aDogc3RyaW5nXTogc3RyaW5nIH0sIGNyZWQ6IENyZWQpOiBzdHJpbmcge1xuXHRcdGlmICh0aGlzLnN1cHBvcnRzTGlua3MoKSkge1xuXHRcdFx0Ly8gVGhlIHBhdGggY291bGQgY29udGFpbiBzeW1saW5rcy4gU3BsaXQgdXAgdGhlIHBhdGgsXG5cdFx0XHQvLyByZXNvbHZlIGFueSBzeW1saW5rcywgcmV0dXJuIHRoZSByZXNvbHZlZCBzdHJpbmcuXG5cdFx0XHRjb25zdCBzcGxpdFBhdGggPSBwLnNwbGl0KHBhdGguc2VwKTtcblx0XHRcdC8vIFRPRE86IFNpbXBsZXIgdG8ganVzdCBwYXNzIHRocm91Z2ggZmlsZSwgZmluZCBzZXAgYW5kIHN1Y2guXG5cdFx0XHRmb3IgKGxldCBpID0gMDsgaSA8IHNwbGl0UGF0aC5sZW5ndGg7IGkrKykge1xuXHRcdFx0XHRjb25zdCBhZGRQYXRocyA9IHNwbGl0UGF0aC5zbGljZSgwLCBpICsgMSk7XG5cdFx0XHRcdHNwbGl0UGF0aFtpXSA9IHBhdGguam9pbi5hcHBseShwYXRoLCBhZGRQYXRocyk7XG5cdFx0XHR9XG5cdFx0XHRyZXR1cm4gc3BsaXRQYXRoLmpvaW4ocGF0aC5zZXApO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHQvLyBObyBzeW1saW5rcy4gV2UganVzdCBuZWVkIHRvIHZlcmlmeSB0aGF0IGl0IGV4aXN0cy5cblx0XHRcdGlmICh0aGlzLmV4aXN0c1N5bmMocCwgY3JlZCkpIHtcblx0XHRcdFx0cmV0dXJuIHA7XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHR0aHJvdyBBcGlFcnJvci5FTk9FTlQocCk7XG5cdFx0XHR9XG5cdFx0fVxuXHR9XG5cdHB1YmxpYyB0cnVuY2F0ZShwOiBzdHJpbmcsIGxlbjogbnVtYmVyLCBjcmVkOiBDcmVkLCBjYjogQkZTT25lQXJnQ2FsbGJhY2spOiB2b2lkIHtcblx0XHR0aGlzLm9wZW4ocCwgRmlsZUZsYWcuZ2V0RmlsZUZsYWcoJ3IrJyksIDB4MWE0LCBjcmVkLCBmdW5jdGlvbiAoZXI6IEFwaUVycm9yLCBmZD86IEZpbGUpIHtcblx0XHRcdGlmIChlcikge1xuXHRcdFx0XHRyZXR1cm4gY2IoZXIpO1xuXHRcdFx0fVxuXHRcdFx0ZmQhLnRydW5jYXRlKGxlbiwgZnVuY3Rpb24gKGVyOiBhbnkpIHtcblx0XHRcdFx0ZmQhLmNsb3NlKGZ1bmN0aW9uIChlcjI6IGFueSkge1xuXHRcdFx0XHRcdGNiKGVyIHx8IGVyMik7XG5cdFx0XHRcdH0pO1xuXHRcdFx0fSk7XG5cdFx0fSk7XG5cdH1cblx0cHVibGljIHRydW5jYXRlU3luYyhwOiBzdHJpbmcsIGxlbjogbnVtYmVyLCBjcmVkOiBDcmVkKTogdm9pZCB7XG5cdFx0Y29uc3QgZmQgPSB0aGlzLm9wZW5TeW5jKHAsIEZpbGVGbGFnLmdldEZpbGVGbGFnKCdyKycpLCAweDFhNCwgY3JlZCk7XG5cdFx0Ly8gTmVlZCB0byBzYWZlbHkgY2xvc2UgRkQsIHJlZ2FyZGxlc3Mgb2Ygd2hldGhlciBvciBub3QgdHJ1bmNhdGUgc3VjY2VlZHMuXG5cdFx0dHJ5IHtcblx0XHRcdGZkLnRydW5jYXRlU3luYyhsZW4pO1xuXHRcdH0gZmluYWxseSB7XG5cdFx0XHRmZC5jbG9zZVN5bmMoKTtcblx0XHR9XG5cdH1cblx0cHVibGljIHJlYWRGaWxlKGZuYW1lOiBzdHJpbmcsIGVuY29kaW5nOiBCdWZmZXJFbmNvZGluZyB8IG51bGwsIGZsYWc6IEZpbGVGbGFnLCBjcmVkOiBDcmVkLCBjYjogQkZTQ2FsbGJhY2s8c3RyaW5nIHwgQnVmZmVyPik6IHZvaWQge1xuXHRcdC8vIFdyYXAgY2IgaW4gZmlsZSBjbG9zaW5nIGNvZGUuXG5cdFx0Y29uc3Qgb2xkQ2IgPSBjYjtcblx0XHQvLyBHZXQgZmlsZS5cblx0XHR0aGlzLm9wZW4oZm5hbWUsIGZsYWcsIDB4MWE0LCBjcmVkLCAoZXJyLCBmZCkgPT4ge1xuXHRcdFx0aWYgKGVycikge1xuXHRcdFx0XHRyZXR1cm4gY2IoZXJyKTtcblx0XHRcdH1cblx0XHRcdGNiID0gZnVuY3Rpb24gKGVycj86IEFwaUVycm9yIHwgbnVsbCwgYXJnPzogc3RyaW5nIHwgQnVmZmVyKSB7XG5cdFx0XHRcdGZkIS5jbG9zZShmdW5jdGlvbiAoZXJyMjogYW55KSB7XG5cdFx0XHRcdFx0aWYgKCFlcnIpIHtcblx0XHRcdFx0XHRcdGVyciA9IGVycjI7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdHJldHVybiBvbGRDYihlcnIsIGFyZyk7XG5cdFx0XHRcdH0pO1xuXHRcdFx0fTtcblx0XHRcdGZkIS5zdGF0KChlcnIsIHN0YXQ/KSA9PiB7XG5cdFx0XHRcdGlmIChlcnIpIHtcblx0XHRcdFx0XHRyZXR1cm4gY2IoZXJyKTtcblx0XHRcdFx0fVxuXHRcdFx0XHQvLyBBbGxvY2F0ZSBidWZmZXIuXG5cdFx0XHRcdGNvbnN0IGJ1ZiA9IEJ1ZmZlci5hbGxvYyhzdGF0IS5zaXplKTtcblx0XHRcdFx0ZmQhLnJlYWQoYnVmLCAwLCBzdGF0IS5zaXplLCAwLCAoZXJyPzogQXBpRXJyb3IgfCBudWxsKSA9PiB7XG5cdFx0XHRcdFx0aWYgKGVycikge1xuXHRcdFx0XHRcdFx0cmV0dXJuIGNiKGVycik7XG5cdFx0XHRcdFx0fSBlbHNlIGlmIChlbmNvZGluZyA9PT0gbnVsbCkge1xuXHRcdFx0XHRcdFx0cmV0dXJuIGNiKGVyciwgYnVmKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0dHJ5IHtcblx0XHRcdFx0XHRcdGNiKG51bGwsIGJ1Zi50b1N0cmluZyhlbmNvZGluZykpO1xuXHRcdFx0XHRcdH0gY2F0Y2ggKGUpIHtcblx0XHRcdFx0XHRcdGNiKGUpO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fSk7XG5cdFx0XHR9KTtcblx0XHR9KTtcblx0fVxuXHRwdWJsaWMgcmVhZEZpbGVTeW5jKGZuYW1lOiBzdHJpbmcsIGVuY29kaW5nOiBCdWZmZXJFbmNvZGluZyB8IG51bGwsIGZsYWc6IEZpbGVGbGFnLCBjcmVkOiBDcmVkKTogYW55IHtcblx0XHQvLyBHZXQgZmlsZS5cblx0XHRjb25zdCBmZCA9IHRoaXMub3BlblN5bmMoZm5hbWUsIGZsYWcsIDB4MWE0LCBjcmVkKTtcblx0XHR0cnkge1xuXHRcdFx0Y29uc3Qgc3RhdCA9IGZkLnN0YXRTeW5jKCk7XG5cdFx0XHQvLyBBbGxvY2F0ZSBidWZmZXIuXG5cdFx0XHRjb25zdCBidWYgPSBCdWZmZXIuYWxsb2Moc3RhdC5zaXplKTtcblx0XHRcdGZkLnJlYWRTeW5jKGJ1ZiwgMCwgc3RhdC5zaXplLCAwKTtcblx0XHRcdGZkLmNsb3NlU3luYygpO1xuXHRcdFx0aWYgKGVuY29kaW5nID09PSBudWxsKSB7XG5cdFx0XHRcdHJldHVybiBidWY7XG5cdFx0XHR9XG5cdFx0XHRyZXR1cm4gYnVmLnRvU3RyaW5nKGVuY29kaW5nKTtcblx0XHR9IGZpbmFsbHkge1xuXHRcdFx0ZmQuY2xvc2VTeW5jKCk7XG5cdFx0fVxuXHR9XG5cdHB1YmxpYyB3cml0ZUZpbGUoZm5hbWU6IHN0cmluZywgZGF0YTogYW55LCBlbmNvZGluZzogQnVmZmVyRW5jb2RpbmcgfCBudWxsLCBmbGFnOiBGaWxlRmxhZywgbW9kZTogbnVtYmVyLCBjcmVkOiBDcmVkLCBjYjogQkZTT25lQXJnQ2FsbGJhY2spOiB2b2lkIHtcblx0XHQvLyBXcmFwIGNiIGluIGZpbGUgY2xvc2luZyBjb2RlLlxuXHRcdGNvbnN0IG9sZENiID0gY2I7XG5cdFx0Ly8gR2V0IGZpbGUuXG5cdFx0dGhpcy5vcGVuKGZuYW1lLCBmbGFnLCAweDFhNCwgY3JlZCwgZnVuY3Rpb24gKGVycjogQXBpRXJyb3IsIGZkPzogRmlsZSkge1xuXHRcdFx0aWYgKGVycikge1xuXHRcdFx0XHRyZXR1cm4gY2IoZXJyKTtcblx0XHRcdH1cblx0XHRcdGNiID0gZnVuY3Rpb24gKGVycjogQXBpRXJyb3IpIHtcblx0XHRcdFx0ZmQhLmNsb3NlKGZ1bmN0aW9uIChlcnIyOiBhbnkpIHtcblx0XHRcdFx0XHRvbGRDYihlcnIgPyBlcnIgOiBlcnIyKTtcblx0XHRcdFx0fSk7XG5cdFx0XHR9O1xuXG5cdFx0XHR0cnkge1xuXHRcdFx0XHRpZiAodHlwZW9mIGRhdGEgPT09ICdzdHJpbmcnKSB7XG5cdFx0XHRcdFx0ZGF0YSA9IEJ1ZmZlci5mcm9tKGRhdGEsIGVuY29kaW5nISk7XG5cdFx0XHRcdH1cblx0XHRcdH0gY2F0Y2ggKGUpIHtcblx0XHRcdFx0cmV0dXJuIGNiKGUpO1xuXHRcdFx0fVxuXHRcdFx0Ly8gV3JpdGUgaW50byBmaWxlLlxuXHRcdFx0ZmQhLndyaXRlKGRhdGEsIDAsIGRhdGEubGVuZ3RoLCAwLCBjYik7XG5cdFx0fSk7XG5cdH1cblx0cHVibGljIHdyaXRlRmlsZVN5bmMoZm5hbWU6IHN0cmluZywgZGF0YTogYW55LCBlbmNvZGluZzogQnVmZmVyRW5jb2RpbmcgfCBudWxsLCBmbGFnOiBGaWxlRmxhZywgbW9kZTogbnVtYmVyLCBjcmVkOiBDcmVkKTogdm9pZCB7XG5cdFx0Ly8gR2V0IGZpbGUuXG5cdFx0Y29uc3QgZmQgPSB0aGlzLm9wZW5TeW5jKGZuYW1lLCBmbGFnLCBtb2RlLCBjcmVkKTtcblx0XHR0cnkge1xuXHRcdFx0aWYgKHR5cGVvZiBkYXRhID09PSAnc3RyaW5nJykge1xuXHRcdFx0XHRkYXRhID0gQnVmZmVyLmZyb20oZGF0YSwgZW5jb2RpbmchKTtcblx0XHRcdH1cblx0XHRcdC8vIFdyaXRlIGludG8gZmlsZS5cblx0XHRcdGZkLndyaXRlU3luYyhkYXRhLCAwLCBkYXRhLmxlbmd0aCwgMCk7XG5cdFx0fSBmaW5hbGx5IHtcblx0XHRcdGZkLmNsb3NlU3luYygpO1xuXHRcdH1cblx0fVxuXHRwdWJsaWMgYXBwZW5kRmlsZShmbmFtZTogc3RyaW5nLCBkYXRhOiBhbnksIGVuY29kaW5nOiBCdWZmZXJFbmNvZGluZyB8IG51bGwsIGZsYWc6IEZpbGVGbGFnLCBtb2RlOiBudW1iZXIsIGNyZWQ6IENyZWQsIGNiOiBCRlNPbmVBcmdDYWxsYmFjayk6IHZvaWQge1xuXHRcdC8vIFdyYXAgY2IgaW4gZmlsZSBjbG9zaW5nIGNvZGUuXG5cdFx0Y29uc3Qgb2xkQ2IgPSBjYjtcblx0XHR0aGlzLm9wZW4oZm5hbWUsIGZsYWcsIG1vZGUsIGNyZWQsIGZ1bmN0aW9uIChlcnI6IEFwaUVycm9yLCBmZD86IEZpbGUpIHtcblx0XHRcdGlmIChlcnIpIHtcblx0XHRcdFx0cmV0dXJuIGNiKGVycik7XG5cdFx0XHR9XG5cdFx0XHRjYiA9IGZ1bmN0aW9uIChlcnI6IEFwaUVycm9yKSB7XG5cdFx0XHRcdGZkIS5jbG9zZShmdW5jdGlvbiAoZXJyMjogYW55KSB7XG5cdFx0XHRcdFx0b2xkQ2IoZXJyID8gZXJyIDogZXJyMik7XG5cdFx0XHRcdH0pO1xuXHRcdFx0fTtcblx0XHRcdGlmICh0eXBlb2YgZGF0YSA9PT0gJ3N0cmluZycpIHtcblx0XHRcdFx0ZGF0YSA9IEJ1ZmZlci5mcm9tKGRhdGEsIGVuY29kaW5nISk7XG5cdFx0XHR9XG5cdFx0XHRmZCEud3JpdGUoZGF0YSwgMCwgZGF0YS5sZW5ndGgsIG51bGwsIGNiKTtcblx0XHR9KTtcblx0fVxuXHRwdWJsaWMgYXBwZW5kRmlsZVN5bmMoZm5hbWU6IHN0cmluZywgZGF0YTogYW55LCBlbmNvZGluZzogQnVmZmVyRW5jb2RpbmcgfCBudWxsLCBmbGFnOiBGaWxlRmxhZywgbW9kZTogbnVtYmVyLCBjcmVkOiBDcmVkKTogdm9pZCB7XG5cdFx0Y29uc3QgZmQgPSB0aGlzLm9wZW5TeW5jKGZuYW1lLCBmbGFnLCBtb2RlLCBjcmVkKTtcblx0XHR0cnkge1xuXHRcdFx0aWYgKHR5cGVvZiBkYXRhID09PSAnc3RyaW5nJykge1xuXHRcdFx0XHRkYXRhID0gQnVmZmVyLmZyb20oZGF0YSwgZW5jb2RpbmchKTtcblx0XHRcdH1cblx0XHRcdGZkLndyaXRlU3luYyhkYXRhLCAwLCBkYXRhLmxlbmd0aCwgbnVsbCk7XG5cdFx0fSBmaW5hbGx5IHtcblx0XHRcdGZkLmNsb3NlU3luYygpO1xuXHRcdH1cblx0fVxuXHRwdWJsaWMgY2htb2QocDogc3RyaW5nLCBpc0xjaG1vZDogYm9vbGVhbiwgbW9kZTogbnVtYmVyLCBjcmVkOiBDcmVkLCBjYjogQkZTT25lQXJnQ2FsbGJhY2spOiB2b2lkIHtcblx0XHRjYihuZXcgQXBpRXJyb3IoRXJyb3JDb2RlLkVOT1RTVVApKTtcblx0fVxuXHRwdWJsaWMgY2htb2RTeW5jKHA6IHN0cmluZywgaXNMY2htb2Q6IGJvb2xlYW4sIG1vZGU6IG51bWJlciwgY3JlZDogQ3JlZCkge1xuXHRcdHRocm93IG5ldyBBcGlFcnJvcihFcnJvckNvZGUuRU5PVFNVUCk7XG5cdH1cblx0cHVibGljIGNob3duKHA6IHN0cmluZywgaXNMY2hvd246IGJvb2xlYW4sIG5ld191aWQ6IG51bWJlciwgbmV3X2dpZDogbnVtYmVyLCBjcmVkOiBDcmVkLCBjYjogQkZTT25lQXJnQ2FsbGJhY2spOiB2b2lkIHtcblx0XHRjYihuZXcgQXBpRXJyb3IoRXJyb3JDb2RlLkVOT1RTVVApKTtcblx0fVxuXHRwdWJsaWMgY2hvd25TeW5jKHA6IHN0cmluZywgaXNMY2hvd246IGJvb2xlYW4sIG5ld191aWQ6IG51bWJlciwgbmV3X2dpZDogbnVtYmVyLCBjcmVkOiBDcmVkKTogdm9pZCB7XG5cdFx0dGhyb3cgbmV3IEFwaUVycm9yKEVycm9yQ29kZS5FTk9UU1VQKTtcblx0fVxuXHRwdWJsaWMgdXRpbWVzKHA6IHN0cmluZywgYXRpbWU6IERhdGUsIG10aW1lOiBEYXRlLCBjcmVkOiBDcmVkLCBjYjogQkZTT25lQXJnQ2FsbGJhY2spOiB2b2lkIHtcblx0XHRjYihuZXcgQXBpRXJyb3IoRXJyb3JDb2RlLkVOT1RTVVApKTtcblx0fVxuXHRwdWJsaWMgdXRpbWVzU3luYyhwOiBzdHJpbmcsIGF0aW1lOiBEYXRlLCBtdGltZTogRGF0ZSwgY3JlZDogQ3JlZCk6IHZvaWQge1xuXHRcdHRocm93IG5ldyBBcGlFcnJvcihFcnJvckNvZGUuRU5PVFNVUCk7XG5cdH1cblx0cHVibGljIGxpbmsoc3JjcGF0aDogc3RyaW5nLCBkc3RwYXRoOiBzdHJpbmcsIGNyZWQ6IENyZWQsIGNiOiBCRlNPbmVBcmdDYWxsYmFjayk6IHZvaWQge1xuXHRcdGNiKG5ldyBBcGlFcnJvcihFcnJvckNvZGUuRU5PVFNVUCkpO1xuXHR9XG5cdHB1YmxpYyBsaW5rU3luYyhzcmNwYXRoOiBzdHJpbmcsIGRzdHBhdGg6IHN0cmluZywgY3JlZDogQ3JlZCk6IHZvaWQge1xuXHRcdHRocm93IG5ldyBBcGlFcnJvcihFcnJvckNvZGUuRU5PVFNVUCk7XG5cdH1cblx0cHVibGljIHN5bWxpbmsoc3JjcGF0aDogc3RyaW5nLCBkc3RwYXRoOiBzdHJpbmcsIHR5cGU6IHN0cmluZywgY3JlZDogQ3JlZCwgY2I6IEJGU09uZUFyZ0NhbGxiYWNrKTogdm9pZCB7XG5cdFx0Y2IobmV3IEFwaUVycm9yKEVycm9yQ29kZS5FTk9UU1VQKSk7XG5cdH1cblx0cHVibGljIHN5bWxpbmtTeW5jKHNyY3BhdGg6IHN0cmluZywgZHN0cGF0aDogc3RyaW5nLCB0eXBlOiBzdHJpbmcsIGNyZWQ6IENyZWQpOiB2b2lkIHtcblx0XHR0aHJvdyBuZXcgQXBpRXJyb3IoRXJyb3JDb2RlLkVOT1RTVVApO1xuXHR9XG5cdHB1YmxpYyByZWFkbGluayhwOiBzdHJpbmcsIGNyZWQ6IENyZWQsIGNiOiBCRlNPbmVBcmdDYWxsYmFjayk6IHZvaWQge1xuXHRcdGNiKG5ldyBBcGlFcnJvcihFcnJvckNvZGUuRU5PVFNVUCkpO1xuXHR9XG5cdHB1YmxpYyByZWFkbGlua1N5bmMocDogc3RyaW5nLCBjcmVkOiBDcmVkKTogc3RyaW5nIHtcblx0XHR0aHJvdyBuZXcgQXBpRXJyb3IoRXJyb3JDb2RlLkVOT1RTVVApO1xuXHR9XG59XG5cbi8qKlxuICogSW1wbGVtZW50cyB0aGUgYXN5bmNocm9ub3VzIEFQSSBpbiB0ZXJtcyBvZiB0aGUgc3luY2hyb25vdXMgQVBJLlxuICogQGNsYXNzIFN5bmNocm9ub3VzRmlsZVN5c3RlbVxuICovXG5leHBvcnQgY2xhc3MgU3luY2hyb25vdXNGaWxlU3lzdGVtIGV4dGVuZHMgQmFzZUZpbGVTeXN0ZW0ge1xuXHRwdWJsaWMgc3VwcG9ydHNTeW5jaCgpOiBib29sZWFuIHtcblx0XHRyZXR1cm4gdHJ1ZTtcblx0fVxuXG5cdHB1YmxpYyBhY2Nlc3MocDogc3RyaW5nLCBtb2RlOiBudW1iZXIsIGNyZWQ6IENyZWQsIGNiOiBCRlNPbmVBcmdDYWxsYmFjayk6IHZvaWQge1xuXHRcdHRyeSB7XG5cdFx0XHR0aGlzLmFjY2Vzc1N5bmMocCwgbW9kZSwgY3JlZCk7XG5cdFx0XHRjYigpO1xuXHRcdH0gY2F0Y2ggKGUpIHtcblx0XHRcdGNiKGUpO1xuXHRcdH1cblx0fVxuXG5cdHB1YmxpYyByZW5hbWUob2xkUGF0aDogc3RyaW5nLCBuZXdQYXRoOiBzdHJpbmcsIGNyZWQ6IENyZWQsIGNiOiBCRlNPbmVBcmdDYWxsYmFjayk6IHZvaWQge1xuXHRcdHRyeSB7XG5cdFx0XHR0aGlzLnJlbmFtZVN5bmMob2xkUGF0aCwgbmV3UGF0aCwgY3JlZCk7XG5cdFx0XHRjYigpO1xuXHRcdH0gY2F0Y2ggKGUpIHtcblx0XHRcdGNiKGUpO1xuXHRcdH1cblx0fVxuXG5cdHB1YmxpYyBzdGF0KHA6IHN0cmluZywgaXNMc3RhdDogYm9vbGVhbiB8IG51bGwsIGNyZWQ6IENyZWQsIGNiOiBCRlNDYWxsYmFjazxTdGF0cz4pOiB2b2lkIHtcblx0XHR0cnkge1xuXHRcdFx0Y2IobnVsbCwgdGhpcy5zdGF0U3luYyhwLCBpc0xzdGF0LCBjcmVkKSk7XG5cdFx0fSBjYXRjaCAoZSkge1xuXHRcdFx0Y2IoZSk7XG5cdFx0fVxuXHR9XG5cblx0cHVibGljIG9wZW4ocDogc3RyaW5nLCBmbGFnczogRmlsZUZsYWcsIG1vZGU6IG51bWJlciwgY3JlZDogQ3JlZCwgY2I6IEJGU0NhbGxiYWNrPEZpbGU+KTogdm9pZCB7XG5cdFx0dHJ5IHtcblx0XHRcdGNiKG51bGwsIHRoaXMub3BlblN5bmMocCwgZmxhZ3MsIG1vZGUsIGNyZWQpKTtcblx0XHR9IGNhdGNoIChlKSB7XG5cdFx0XHRjYihlKTtcblx0XHR9XG5cdH1cblxuXHRwdWJsaWMgdW5saW5rKHA6IHN0cmluZywgY3JlZDogQ3JlZCwgY2I6IEJGU09uZUFyZ0NhbGxiYWNrKTogdm9pZCB7XG5cdFx0dHJ5IHtcblx0XHRcdHRoaXMudW5saW5rU3luYyhwLCBjcmVkKTtcblx0XHRcdGNiKCk7XG5cdFx0fSBjYXRjaCAoZSkge1xuXHRcdFx0Y2IoZSk7XG5cdFx0fVxuXHR9XG5cblx0cHVibGljIHJtZGlyKHA6IHN0cmluZywgY3JlZDogQ3JlZCwgY2I6IEJGU09uZUFyZ0NhbGxiYWNrKTogdm9pZCB7XG5cdFx0dHJ5IHtcblx0XHRcdHRoaXMucm1kaXJTeW5jKHAsIGNyZWQpO1xuXHRcdFx0Y2IoKTtcblx0XHR9IGNhdGNoIChlKSB7XG5cdFx0XHRjYihlKTtcblx0XHR9XG5cdH1cblxuXHRwdWJsaWMgbWtkaXIocDogc3RyaW5nLCBtb2RlOiBudW1iZXIsIGNyZWQ6IENyZWQsIGNiOiBCRlNPbmVBcmdDYWxsYmFjayk6IHZvaWQge1xuXHRcdHRyeSB7XG5cdFx0XHR0aGlzLm1rZGlyU3luYyhwLCBtb2RlLCBjcmVkKTtcblx0XHRcdGNiKCk7XG5cdFx0fSBjYXRjaCAoZSkge1xuXHRcdFx0Y2IoZSk7XG5cdFx0fVxuXHR9XG5cblx0cHVibGljIHJlYWRkaXIocDogc3RyaW5nLCBjcmVkOiBDcmVkLCBjYjogQkZTQ2FsbGJhY2s8c3RyaW5nW10+KTogdm9pZCB7XG5cdFx0dHJ5IHtcblx0XHRcdGNiKG51bGwsIHRoaXMucmVhZGRpclN5bmMocCwgY3JlZCkpO1xuXHRcdH0gY2F0Y2ggKGUpIHtcblx0XHRcdGNiKGUpO1xuXHRcdH1cblx0fVxuXG5cdHB1YmxpYyBjaG1vZChwOiBzdHJpbmcsIGlzTGNobW9kOiBib29sZWFuLCBtb2RlOiBudW1iZXIsIGNyZWQ6IENyZWQsIGNiOiBCRlNPbmVBcmdDYWxsYmFjayk6IHZvaWQge1xuXHRcdHRyeSB7XG5cdFx0XHR0aGlzLmNobW9kU3luYyhwLCBpc0xjaG1vZCwgbW9kZSwgY3JlZCk7XG5cdFx0XHRjYigpO1xuXHRcdH0gY2F0Y2ggKGUpIHtcblx0XHRcdGNiKGUpO1xuXHRcdH1cblx0fVxuXG5cdHB1YmxpYyBjaG93bihwOiBzdHJpbmcsIGlzTGNob3duOiBib29sZWFuLCBuZXdfdWlkOiBudW1iZXIsIG5ld19naWQ6IG51bWJlciwgY3JlZDogQ3JlZCwgY2I6IEJGU09uZUFyZ0NhbGxiYWNrKTogdm9pZCB7XG5cdFx0dHJ5IHtcblx0XHRcdHRoaXMuY2hvd25TeW5jKHAsIGlzTGNob3duLCBuZXdfdWlkLCBuZXdfZ2lkLCBjcmVkKTtcblx0XHRcdGNiKCk7XG5cdFx0fSBjYXRjaCAoZSkge1xuXHRcdFx0Y2IoZSk7XG5cdFx0fVxuXHR9XG5cblx0cHVibGljIHV0aW1lcyhwOiBzdHJpbmcsIGF0aW1lOiBEYXRlLCBtdGltZTogRGF0ZSwgY3JlZDogQ3JlZCwgY2I6IEJGU09uZUFyZ0NhbGxiYWNrKTogdm9pZCB7XG5cdFx0dHJ5IHtcblx0XHRcdHRoaXMudXRpbWVzU3luYyhwLCBhdGltZSwgbXRpbWUsIGNyZWQpO1xuXHRcdFx0Y2IoKTtcblx0XHR9IGNhdGNoIChlKSB7XG5cdFx0XHRjYihlKTtcblx0XHR9XG5cdH1cblxuXHRwdWJsaWMgbGluayhzcmNwYXRoOiBzdHJpbmcsIGRzdHBhdGg6IHN0cmluZywgY3JlZDogQ3JlZCwgY2I6IEJGU09uZUFyZ0NhbGxiYWNrKTogdm9pZCB7XG5cdFx0dHJ5IHtcblx0XHRcdHRoaXMubGlua1N5bmMoc3JjcGF0aCwgZHN0cGF0aCwgY3JlZCk7XG5cdFx0XHRjYigpO1xuXHRcdH0gY2F0Y2ggKGUpIHtcblx0XHRcdGNiKGUpO1xuXHRcdH1cblx0fVxuXG5cdHB1YmxpYyBzeW1saW5rKHNyY3BhdGg6IHN0cmluZywgZHN0cGF0aDogc3RyaW5nLCB0eXBlOiBzdHJpbmcsIGNyZWQ6IENyZWQsIGNiOiBCRlNPbmVBcmdDYWxsYmFjayk6IHZvaWQge1xuXHRcdHRyeSB7XG5cdFx0XHR0aGlzLnN5bWxpbmtTeW5jKHNyY3BhdGgsIGRzdHBhdGgsIHR5cGUsIGNyZWQpO1xuXHRcdFx0Y2IoKTtcblx0XHR9IGNhdGNoIChlKSB7XG5cdFx0XHRjYihlKTtcblx0XHR9XG5cdH1cblxuXHRwdWJsaWMgcmVhZGxpbmsocDogc3RyaW5nLCBjcmVkOiBDcmVkLCBjYjogQkZTQ2FsbGJhY2s8c3RyaW5nPik6IHZvaWQge1xuXHRcdHRyeSB7XG5cdFx0XHRjYihudWxsLCB0aGlzLnJlYWRsaW5rU3luYyhwLCBjcmVkKSk7XG5cdFx0fSBjYXRjaCAoZSkge1xuXHRcdFx0Y2IoZSk7XG5cdFx0fVxuXHR9XG59XG4iLCAiaW1wb3J0IHsgQXBpRXJyb3IsIEVycm9yQ29kZSB9IGZyb20gJy4vYXBpX2Vycm9yJztcbmltcG9ydCBTdGF0cyBmcm9tICcuL3N0YXRzJztcbmltcG9ydCB7IEJGU0NhbGxiYWNrLCBCRlNPbmVBcmdDYWxsYmFjaywgQkZTVGhyZWVBcmdDYWxsYmFjayB9IGZyb20gJy4vZmlsZV9zeXN0ZW0nO1xuaW1wb3J0IHR5cGUgeyBCdWZmZXIgfSBmcm9tICdidWZmZXInO1xuXG5leHBvcnQgaW50ZXJmYWNlIEZpbGUge1xuXHQvKipcblx0ICogKipDb3JlKio6IEdldCB0aGUgY3VycmVudCBmaWxlIHBvc2l0aW9uLlxuXHQgKi9cblx0Z2V0UG9zKCk6IG51bWJlciB8IHVuZGVmaW5lZDtcblx0LyoqXG5cdCAqICoqQ29yZSoqOiBBc3luY2hyb25vdXMgYHN0YXRgLlxuXHQgKi9cblx0c3RhdChjYjogQkZTQ2FsbGJhY2s8U3RhdHM+KTogdm9pZDtcblx0LyoqXG5cdCAqICoqQ29yZSoqOiBTeW5jaHJvbm91cyBgc3RhdGAuXG5cdCAqL1xuXHRzdGF0U3luYygpOiBTdGF0cztcblx0LyoqXG5cdCAqICoqQ29yZSoqOiBBc3luY2hyb25vdXMgY2xvc2UuXG5cdCAqL1xuXHRjbG9zZShjYjogQkZTT25lQXJnQ2FsbGJhY2spOiB2b2lkO1xuXHQvKipcblx0ICogKipDb3JlKio6IFN5bmNocm9ub3VzIGNsb3NlLlxuXHQgKi9cblx0Y2xvc2VTeW5jKCk6IHZvaWQ7XG5cdC8qKlxuXHQgKiAqKkNvcmUqKjogQXN5bmNocm9ub3VzIHRydW5jYXRlLlxuXHQgKi9cblx0dHJ1bmNhdGUobGVuOiBudW1iZXIsIGNiOiBCRlNPbmVBcmdDYWxsYmFjayk6IHZvaWQ7XG5cdC8qKlxuXHQgKiAqKkNvcmUqKjogU3luY2hyb25vdXMgdHJ1bmNhdGUuXG5cdCAqL1xuXHR0cnVuY2F0ZVN5bmMobGVuOiBudW1iZXIpOiB2b2lkO1xuXHQvKipcblx0ICogKipDb3JlKio6IEFzeW5jaHJvbm91cyBzeW5jLlxuXHQgKi9cblx0c3luYyhjYjogQkZTT25lQXJnQ2FsbGJhY2spOiB2b2lkO1xuXHQvKipcblx0ICogKipDb3JlKio6IFN5bmNocm9ub3VzIHN5bmMuXG5cdCAqL1xuXHRzeW5jU3luYygpOiB2b2lkO1xuXHQvKipcblx0ICogKipDb3JlKio6IFdyaXRlIGJ1ZmZlciB0byB0aGUgZmlsZS5cblx0ICogTm90ZSB0aGF0IGl0IGlzIHVuc2FmZSB0byB1c2UgZnMud3JpdGUgbXVsdGlwbGUgdGltZXMgb24gdGhlIHNhbWUgZmlsZVxuXHQgKiB3aXRob3V0IHdhaXRpbmcgZm9yIHRoZSBjYWxsYmFjay5cblx0ICogQHBhcmFtIGJ1ZmZlciBCdWZmZXIgY29udGFpbmluZyB0aGUgZGF0YSB0byB3cml0ZSB0b1xuXHQgKiAgdGhlIGZpbGUuXG5cdCAqIEBwYXJhbSBvZmZzZXQgT2Zmc2V0IGluIHRoZSBidWZmZXIgdG8gc3RhcnQgcmVhZGluZyBkYXRhIGZyb20uXG5cdCAqIEBwYXJhbSBsZW5ndGggVGhlIGFtb3VudCBvZiBieXRlcyB0byB3cml0ZSB0byB0aGUgZmlsZS5cblx0ICogQHBhcmFtIHBvc2l0aW9uIE9mZnNldCBmcm9tIHRoZSBiZWdpbm5pbmcgb2YgdGhlIGZpbGUgd2hlcmUgdGhpc1xuXHQgKiAgIGRhdGEgc2hvdWxkIGJlIHdyaXR0ZW4uIElmIHBvc2l0aW9uIGlzIG51bGwsIHRoZSBkYXRhIHdpbGwgYmUgd3JpdHRlbiBhdFxuXHQgKiAgIHRoZSBjdXJyZW50IHBvc2l0aW9uLlxuXHQgKiBAcGFyYW0gY2IgVGhlIG51bWJlciBzcGVjaWZpZXMgdGhlIG51bWJlciBvZiBieXRlcyB3cml0dGVuIGludG8gdGhlIGZpbGUuXG5cdCAqL1xuXHR3cml0ZShidWZmZXI6IEJ1ZmZlciwgb2Zmc2V0OiBudW1iZXIsIGxlbmd0aDogbnVtYmVyLCBwb3NpdGlvbjogbnVtYmVyIHwgbnVsbCwgY2I6IEJGU1RocmVlQXJnQ2FsbGJhY2s8bnVtYmVyLCBCdWZmZXI+KTogdm9pZDtcblx0LyoqXG5cdCAqICoqQ29yZSoqOiBXcml0ZSBidWZmZXIgdG8gdGhlIGZpbGUuXG5cdCAqIE5vdGUgdGhhdCBpdCBpcyB1bnNhZmUgdG8gdXNlIGZzLndyaXRlU3luYyBtdWx0aXBsZSB0aW1lcyBvbiB0aGUgc2FtZSBmaWxlXG5cdCAqIHdpdGhvdXQgd2FpdGluZyBmb3IgaXQgdG8gcmV0dXJuLlxuXHQgKiBAcGFyYW0gYnVmZmVyIEJ1ZmZlciBjb250YWluaW5nIHRoZSBkYXRhIHRvIHdyaXRlIHRvXG5cdCAqICB0aGUgZmlsZS5cblx0ICogQHBhcmFtIG9mZnNldCBPZmZzZXQgaW4gdGhlIGJ1ZmZlciB0byBzdGFydCByZWFkaW5nIGRhdGEgZnJvbS5cblx0ICogQHBhcmFtIGxlbmd0aCBUaGUgYW1vdW50IG9mIGJ5dGVzIHRvIHdyaXRlIHRvIHRoZSBmaWxlLlxuXHQgKiBAcGFyYW0gcG9zaXRpb24gT2Zmc2V0IGZyb20gdGhlIGJlZ2lubmluZyBvZiB0aGUgZmlsZSB3aGVyZSB0aGlzXG5cdCAqICAgZGF0YSBzaG91bGQgYmUgd3JpdHRlbi4gSWYgcG9zaXRpb24gaXMgbnVsbCwgdGhlIGRhdGEgd2lsbCBiZSB3cml0dGVuIGF0XG5cdCAqICAgdGhlIGN1cnJlbnQgcG9zaXRpb24uXG5cdCAqL1xuXHR3cml0ZVN5bmMoYnVmZmVyOiBCdWZmZXIsIG9mZnNldDogbnVtYmVyLCBsZW5ndGg6IG51bWJlciwgcG9zaXRpb246IG51bWJlciB8IG51bGwpOiBudW1iZXI7XG5cdC8qKlxuXHQgKiAqKkNvcmUqKjogUmVhZCBkYXRhIGZyb20gdGhlIGZpbGUuXG5cdCAqIEBwYXJhbSBidWZmZXIgVGhlIGJ1ZmZlciB0aGF0IHRoZSBkYXRhIHdpbGwgYmVcblx0ICogICB3cml0dGVuIHRvLlxuXHQgKiBAcGFyYW0gb2Zmc2V0IFRoZSBvZmZzZXQgd2l0aGluIHRoZSBidWZmZXIgd2hlcmUgd3JpdGluZyB3aWxsXG5cdCAqICAgc3RhcnQuXG5cdCAqIEBwYXJhbSBsZW5ndGggQW4gaW50ZWdlciBzcGVjaWZ5aW5nIHRoZSBudW1iZXIgb2YgYnl0ZXMgdG8gcmVhZC5cblx0ICogQHBhcmFtIHBvc2l0aW9uIEFuIGludGVnZXIgc3BlY2lmeWluZyB3aGVyZSB0byBiZWdpbiByZWFkaW5nIGZyb21cblx0ICogICBpbiB0aGUgZmlsZS4gSWYgcG9zaXRpb24gaXMgbnVsbCwgZGF0YSB3aWxsIGJlIHJlYWQgZnJvbSB0aGUgY3VycmVudCBmaWxlXG5cdCAqICAgcG9zaXRpb24uXG5cdCAqIEBwYXJhbSBjYiBUaGUgbnVtYmVyIGlzIHRoZSBudW1iZXIgb2YgYnl0ZXMgcmVhZFxuXHQgKi9cblx0cmVhZChidWZmZXI6IEJ1ZmZlciwgb2Zmc2V0OiBudW1iZXIsIGxlbmd0aDogbnVtYmVyLCBwb3NpdGlvbjogbnVtYmVyIHwgbnVsbCwgY2I6IEJGU1RocmVlQXJnQ2FsbGJhY2s8bnVtYmVyLCBCdWZmZXI+KTogdm9pZDtcblx0LyoqXG5cdCAqICoqQ29yZSoqOiBSZWFkIGRhdGEgZnJvbSB0aGUgZmlsZS5cblx0ICogQHBhcmFtIGJ1ZmZlciBUaGUgYnVmZmVyIHRoYXQgdGhlIGRhdGEgd2lsbCBiZSB3cml0dGVuIHRvLlxuXHQgKiBAcGFyYW0gb2Zmc2V0IFRoZSBvZmZzZXQgd2l0aGluIHRoZSBidWZmZXIgd2hlcmUgd3JpdGluZyB3aWxsIHN0YXJ0LlxuXHQgKiBAcGFyYW0gbGVuZ3RoIEFuIGludGVnZXIgc3BlY2lmeWluZyB0aGUgbnVtYmVyIG9mIGJ5dGVzIHRvIHJlYWQuXG5cdCAqIEBwYXJhbSBwb3NpdGlvbiBBbiBpbnRlZ2VyIHNwZWNpZnlpbmcgd2hlcmUgdG8gYmVnaW4gcmVhZGluZyBmcm9tXG5cdCAqICAgaW4gdGhlIGZpbGUuIElmIHBvc2l0aW9uIGlzIG51bGwsIGRhdGEgd2lsbCBiZSByZWFkIGZyb20gdGhlIGN1cnJlbnQgZmlsZVxuXHQgKiAgIHBvc2l0aW9uLlxuXHQgKi9cblx0cmVhZFN5bmMoYnVmZmVyOiBCdWZmZXIsIG9mZnNldDogbnVtYmVyLCBsZW5ndGg6IG51bWJlciwgcG9zaXRpb246IG51bWJlcik6IG51bWJlcjtcblx0LyoqXG5cdCAqICoqU3VwcGxlbWVudGFyeSoqOiBBc3luY2hyb25vdXMgYGRhdGFzeW5jYC5cblx0ICpcblx0ICogRGVmYXVsdCBpbXBsZW1lbnRhdGlvbiBtYXBzIHRvIGBzeW5jYC5cblx0ICovXG5cdGRhdGFzeW5jKGNiOiBCRlNPbmVBcmdDYWxsYmFjayk6IHZvaWQ7XG5cdC8qKlxuXHQgKiAqKlN1cHBsZW1lbnRhcnkqKjogU3luY2hyb25vdXMgYGRhdGFzeW5jYC5cblx0ICpcblx0ICogRGVmYXVsdCBpbXBsZW1lbnRhdGlvbiBtYXBzIHRvIGBzeW5jU3luY2AuXG5cdCAqL1xuXHRkYXRhc3luY1N5bmMoKTogdm9pZDtcblx0LyoqXG5cdCAqICoqT3B0aW9uYWwqKjogQXN5bmNocm9ub3VzIGBjaG93bmAuXG5cdCAqL1xuXHRjaG93bih1aWQ6IG51bWJlciwgZ2lkOiBudW1iZXIsIGNiOiBCRlNPbmVBcmdDYWxsYmFjayk6IHZvaWQ7XG5cdC8qKlxuXHQgKiAqKk9wdGlvbmFsKio6IFN5bmNocm9ub3VzIGBjaG93bmAuXG5cdCAqL1xuXHRjaG93blN5bmModWlkOiBudW1iZXIsIGdpZDogbnVtYmVyKTogdm9pZDtcblx0LyoqXG5cdCAqICoqT3B0aW9uYWwqKjogQXN5bmNocm9ub3VzIGBmY2htb2RgLlxuXHQgKi9cblx0Y2htb2QobW9kZTogbnVtYmVyLCBjYjogQkZTT25lQXJnQ2FsbGJhY2spOiB2b2lkO1xuXHQvKipcblx0ICogKipPcHRpb25hbCoqOiBTeW5jaHJvbm91cyBgZmNobW9kYC5cblx0ICovXG5cdGNobW9kU3luYyhtb2RlOiBudW1iZXIpOiB2b2lkO1xuXHQvKipcblx0ICogKipPcHRpb25hbCoqOiBDaGFuZ2UgdGhlIGZpbGUgdGltZXN0YW1wcyBvZiB0aGUgZmlsZS5cblx0ICovXG5cdHV0aW1lcyhhdGltZTogRGF0ZSwgbXRpbWU6IERhdGUsIGNiOiBCRlNPbmVBcmdDYWxsYmFjayk6IHZvaWQ7XG5cdC8qKlxuXHQgKiAqKk9wdGlvbmFsKio6IENoYW5nZSB0aGUgZmlsZSB0aW1lc3RhbXBzIG9mIHRoZSBmaWxlLlxuXHQgKi9cblx0dXRpbWVzU3luYyhhdGltZTogRGF0ZSwgbXRpbWU6IERhdGUpOiB2b2lkO1xufVxuXG4vKipcbiAqIEJhc2UgY2xhc3MgdGhhdCBjb250YWlucyBzaGFyZWQgaW1wbGVtZW50YXRpb25zIG9mIGZ1bmN0aW9ucyBmb3IgdGhlIGZpbGVcbiAqIG9iamVjdC5cbiAqL1xuZXhwb3J0IGNsYXNzIEJhc2VGaWxlIHtcblx0cHVibGljIHN5bmMoY2I6IEJGU09uZUFyZ0NhbGxiYWNrKTogdm9pZCB7XG5cdFx0Y2IobmV3IEFwaUVycm9yKEVycm9yQ29kZS5FTk9UU1VQKSk7XG5cdH1cblx0cHVibGljIHN5bmNTeW5jKCk6IHZvaWQge1xuXHRcdHRocm93IG5ldyBBcGlFcnJvcihFcnJvckNvZGUuRU5PVFNVUCk7XG5cdH1cblx0cHVibGljIGRhdGFzeW5jKGNiOiBCRlNPbmVBcmdDYWxsYmFjayk6IHZvaWQge1xuXHRcdHRoaXMuc3luYyhjYik7XG5cdH1cblx0cHVibGljIGRhdGFzeW5jU3luYygpOiB2b2lkIHtcblx0XHRyZXR1cm4gdGhpcy5zeW5jU3luYygpO1xuXHR9XG5cdHB1YmxpYyBjaG93bih1aWQ6IG51bWJlciwgZ2lkOiBudW1iZXIsIGNiOiBCRlNPbmVBcmdDYWxsYmFjayk6IHZvaWQge1xuXHRcdGNiKG5ldyBBcGlFcnJvcihFcnJvckNvZGUuRU5PVFNVUCkpO1xuXHR9XG5cdHB1YmxpYyBjaG93blN5bmModWlkOiBudW1iZXIsIGdpZDogbnVtYmVyKTogdm9pZCB7XG5cdFx0dGhyb3cgbmV3IEFwaUVycm9yKEVycm9yQ29kZS5FTk9UU1VQKTtcblx0fVxuXHRwdWJsaWMgY2htb2QobW9kZTogbnVtYmVyLCBjYjogQkZTT25lQXJnQ2FsbGJhY2spOiB2b2lkIHtcblx0XHRjYihuZXcgQXBpRXJyb3IoRXJyb3JDb2RlLkVOT1RTVVApKTtcblx0fVxuXHRwdWJsaWMgY2htb2RTeW5jKG1vZGU6IG51bWJlcik6IHZvaWQge1xuXHRcdHRocm93IG5ldyBBcGlFcnJvcihFcnJvckNvZGUuRU5PVFNVUCk7XG5cdH1cblx0cHVibGljIHV0aW1lcyhhdGltZTogRGF0ZSwgbXRpbWU6IERhdGUsIGNiOiBCRlNPbmVBcmdDYWxsYmFjayk6IHZvaWQge1xuXHRcdGNiKG5ldyBBcGlFcnJvcihFcnJvckNvZGUuRU5PVFNVUCkpO1xuXHR9XG5cdHB1YmxpYyB1dGltZXNTeW5jKGF0aW1lOiBEYXRlLCBtdGltZTogRGF0ZSk6IHZvaWQge1xuXHRcdHRocm93IG5ldyBBcGlFcnJvcihFcnJvckNvZGUuRU5PVFNVUCk7XG5cdH1cbn1cbiIsICJpbXBvcnQgeyBCYXNlRmlsZSwgRmlsZSB9IGZyb20gJy4uL2NvcmUvZmlsZSc7XG5pbXBvcnQgeyBGaWxlU3lzdGVtLCBCRlNPbmVBcmdDYWxsYmFjaywgQkZTQ2FsbGJhY2ssIEJGU1RocmVlQXJnQ2FsbGJhY2sgfSBmcm9tICcuLi9jb3JlL2ZpbGVfc3lzdGVtJztcbmltcG9ydCBTdGF0cyBmcm9tICcuLi9jb3JlL3N0YXRzJztcbmltcG9ydCB7IEZpbGVGbGFnIH0gZnJvbSAnLi4vY29yZS9maWxlX2ZsYWcnO1xuaW1wb3J0IHsgQXBpRXJyb3IsIEVycm9yQ29kZSB9IGZyb20gJy4uL2NvcmUvYXBpX2Vycm9yJztcbmltcG9ydCBmcyBmcm9tICcuLi9jb3JlL25vZGVfZnMnO1xuaW1wb3J0IHsgZW1wdHlCdWZmZXIgfSBmcm9tICcuLi9jb3JlL3V0aWwnO1xuaW1wb3J0IHsgQnVmZmVyIH0gZnJvbSAnYnVmZmVyJztcblxuLyoqXG4gKiBBbiBpbXBsZW1lbnRhdGlvbiBvZiB0aGUgRmlsZSBpbnRlcmZhY2UgdGhhdCBvcGVyYXRlcyBvbiBhIGZpbGUgdGhhdCBpc1xuICogY29tcGxldGVseSBpbi1tZW1vcnkuIFByZWxvYWRGaWxlcyBhcmUgYmFja2VkIGJ5IGEgQnVmZmVyLlxuICpcbiAqIFRoaXMgaXMgYWxzbyBhbiBhYnN0cmFjdCBjbGFzcywgYXMgaXQgbGFja3MgYW4gaW1wbGVtZW50YXRpb24gb2YgJ3N5bmMnIGFuZFxuICogJ2Nsb3NlJy4gRWFjaCBmaWxlc3lzdGVtIHRoYXQgd2lzaGVzIHRvIHVzZSB0aGlzIGZpbGUgcmVwcmVzZW50YXRpb24gbXVzdFxuICogZXh0ZW5kIHRoaXMgY2xhc3MgYW5kIGltcGxlbWVudCB0aG9zZSB0d28gbWV0aG9kcy5cbiAqIEB0b2RvICdjbG9zZScgbGV2ZXIgdGhhdCBkaXNhYmxlcyBmdW5jdGlvbmFsaXR5IG9uY2UgY2xvc2VkLlxuICovXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQcmVsb2FkRmlsZTxUIGV4dGVuZHMgRmlsZVN5c3RlbT4gZXh0ZW5kcyBCYXNlRmlsZSB7XG5cdHByb3RlY3RlZCBfZnM6IFQ7XG5cdHByb3RlY3RlZCBfcG9zOiBudW1iZXIgPSAwO1xuXHRwcm90ZWN0ZWQgX3BhdGg6IHN0cmluZztcblx0cHJvdGVjdGVkIF9zdGF0OiBTdGF0cztcblx0cHJvdGVjdGVkIF9mbGFnOiBGaWxlRmxhZztcblx0cHJvdGVjdGVkIF9idWZmZXI6IEJ1ZmZlcjtcblx0cHJvdGVjdGVkIF9kaXJ0eTogYm9vbGVhbiA9IGZhbHNlO1xuXHQvKipcblx0ICogQ3JlYXRlcyBhIGZpbGUgd2l0aCB0aGUgZ2l2ZW4gcGF0aCBhbmQsIG9wdGlvbmFsbHksIHRoZSBnaXZlbiBjb250ZW50cy4gTm90ZVxuXHQgKiB0aGF0LCBpZiBjb250ZW50cyBpcyBzcGVjaWZpZWQsIGl0IHdpbGwgYmUgbXV0YXRlZCBieSB0aGUgZmlsZSFcblx0ICogQHBhcmFtIF9mcyBUaGUgZmlsZSBzeXN0ZW0gdGhhdCBjcmVhdGVkIHRoZSBmaWxlLlxuXHQgKiBAcGFyYW0gX3BhdGhcblx0ICogQHBhcmFtIF9tb2RlIFRoZSBtb2RlIHRoYXQgdGhlIGZpbGUgd2FzIG9wZW5lZCB1c2luZy5cblx0ICogICBEaWN0YXRlcyBwZXJtaXNzaW9ucyBhbmQgd2hlcmUgdGhlIGZpbGUgcG9pbnRlciBzdGFydHMuXG5cdCAqIEBwYXJhbSBfc3RhdCBUaGUgc3RhdHMgb2JqZWN0IGZvciB0aGUgZ2l2ZW4gZmlsZS5cblx0ICogICBQcmVsb2FkRmlsZSB3aWxsIG11dGF0ZSB0aGlzIG9iamVjdC4gTm90ZSB0aGF0IHRoaXMgb2JqZWN0IG11c3QgY29udGFpblxuXHQgKiAgIHRoZSBhcHByb3ByaWF0ZSBtb2RlIHRoYXQgdGhlIGZpbGUgd2FzIG9wZW5lZCBhcy5cblx0ICogQHBhcmFtIGNvbnRlbnRzIEEgYnVmZmVyIGNvbnRhaW5pbmcgdGhlIGVudGlyZVxuXHQgKiAgIGNvbnRlbnRzIG9mIHRoZSBmaWxlLiBQcmVsb2FkRmlsZSB3aWxsIG11dGF0ZSB0aGlzIGJ1ZmZlci4gSWYgbm90XG5cdCAqICAgc3BlY2lmaWVkLCB3ZSBhc3N1bWUgaXQgaXMgYSBuZXcgZmlsZS5cblx0ICovXG5cdGNvbnN0cnVjdG9yKF9mczogVCwgX3BhdGg6IHN0cmluZywgX2ZsYWc6IEZpbGVGbGFnLCBfc3RhdDogU3RhdHMsIGNvbnRlbnRzPzogQnVmZmVyKSB7XG5cdFx0c3VwZXIoKTtcblx0XHR0aGlzLl9mcyA9IF9mcztcblx0XHR0aGlzLl9wYXRoID0gX3BhdGg7XG5cdFx0dGhpcy5fZmxhZyA9IF9mbGFnO1xuXHRcdHRoaXMuX3N0YXQgPSBfc3RhdDtcblx0XHR0aGlzLl9idWZmZXIgPSBjb250ZW50cyA/IGNvbnRlbnRzIDogZW1wdHlCdWZmZXIoKTtcblx0XHQvLyBOb3RlOiBUaGlzIGludmFyaWFudCBpcyAqbm90KiBtYWludGFpbmVkIG9uY2UgdGhlIGZpbGUgc3RhcnRzIGdldHRpbmdcblx0XHQvLyBtb2RpZmllZC5cblx0XHQvLyBOb3RlOiBPbmx5IGFjdHVhbGx5IG1hdHRlcnMgaWYgZmlsZSBpcyByZWFkYWJsZSwgYXMgd3JpdGVhYmxlIG1vZGVzIG1heVxuXHRcdC8vIHRydW5jYXRlL2FwcGVuZCB0byBmaWxlLlxuXHRcdGlmICh0aGlzLl9zdGF0LnNpemUgIT09IHRoaXMuX2J1ZmZlci5sZW5ndGggJiYgdGhpcy5fZmxhZy5pc1JlYWRhYmxlKCkpIHtcblx0XHRcdHRocm93IG5ldyBFcnJvcihgSW52YWxpZCBidWZmZXI6IEJ1ZmZlciBpcyAke3RoaXMuX2J1ZmZlci5sZW5ndGh9IGxvbmcsIHlldCBTdGF0cyBvYmplY3Qgc3BlY2lmaWVzIHRoYXQgZmlsZSBpcyAke3RoaXMuX3N0YXQuc2l6ZX0gbG9uZy5gKTtcblx0XHR9XG5cdH1cblxuXHQvKipcblx0ICogTk9OU1RBTkRBUkQ6IEdldCB0aGUgdW5kZXJseWluZyBidWZmZXIgZm9yIHRoaXMgZmlsZS4gISFETyBOT1QgTVVUQVRFISEgV2lsbCBtZXNzIHVwIGRpcnR5IHRyYWNraW5nLlxuXHQgKi9cblx0cHVibGljIGdldEJ1ZmZlcigpOiBCdWZmZXIge1xuXHRcdHJldHVybiB0aGlzLl9idWZmZXI7XG5cdH1cblxuXHQvKipcblx0ICogTk9OU1RBTkRBUkQ6IEdldCB1bmRlcmx5aW5nIHN0YXRzIGZvciB0aGlzIGZpbGUuICEhRE8gTk9UIE1VVEFURSEhXG5cdCAqL1xuXHRwdWJsaWMgZ2V0U3RhdHMoKTogU3RhdHMge1xuXHRcdHJldHVybiB0aGlzLl9zdGF0O1xuXHR9XG5cblx0cHVibGljIGdldEZsYWcoKTogRmlsZUZsYWcge1xuXHRcdHJldHVybiB0aGlzLl9mbGFnO1xuXHR9XG5cblx0LyoqXG5cdCAqIEdldCB0aGUgcGF0aCB0byB0aGlzIGZpbGUuXG5cdCAqIEByZXR1cm4gW1N0cmluZ10gVGhlIHBhdGggdG8gdGhlIGZpbGUuXG5cdCAqL1xuXHRwdWJsaWMgZ2V0UGF0aCgpOiBzdHJpbmcge1xuXHRcdHJldHVybiB0aGlzLl9wYXRoO1xuXHR9XG5cblx0LyoqXG5cdCAqIEdldCB0aGUgY3VycmVudCBmaWxlIHBvc2l0aW9uLlxuXHQgKlxuXHQgKiBXZSBlbXVsYXRlIHRoZSBmb2xsb3dpbmcgYnVnIG1lbnRpb25lZCBpbiB0aGUgTm9kZSBkb2N1bWVudGF0aW9uOlxuXHQgKiA+IE9uIExpbnV4LCBwb3NpdGlvbmFsIHdyaXRlcyBkb24ndCB3b3JrIHdoZW4gdGhlIGZpbGUgaXMgb3BlbmVkIGluIGFwcGVuZFxuXHQgKiAgIG1vZGUuIFRoZSBrZXJuZWwgaWdub3JlcyB0aGUgcG9zaXRpb24gYXJndW1lbnQgYW5kIGFsd2F5cyBhcHBlbmRzIHRoZSBkYXRhXG5cdCAqICAgdG8gdGhlIGVuZCBvZiB0aGUgZmlsZS5cblx0ICogQHJldHVybiBbTnVtYmVyXSBUaGUgY3VycmVudCBmaWxlIHBvc2l0aW9uLlxuXHQgKi9cblx0cHVibGljIGdldFBvcygpOiBudW1iZXIge1xuXHRcdGlmICh0aGlzLl9mbGFnLmlzQXBwZW5kYWJsZSgpKSB7XG5cdFx0XHRyZXR1cm4gdGhpcy5fc3RhdC5zaXplO1xuXHRcdH1cblx0XHRyZXR1cm4gdGhpcy5fcG9zO1xuXHR9XG5cblx0LyoqXG5cdCAqIEFkdmFuY2UgdGhlIGN1cnJlbnQgZmlsZSBwb3NpdGlvbiBieSB0aGUgaW5kaWNhdGVkIG51bWJlciBvZiBwb3NpdGlvbnMuXG5cdCAqIEBwYXJhbSBbTnVtYmVyXSBkZWx0YVxuXHQgKi9cblx0cHVibGljIGFkdmFuY2VQb3MoZGVsdGE6IG51bWJlcik6IG51bWJlciB7XG5cdFx0cmV0dXJuICh0aGlzLl9wb3MgKz0gZGVsdGEpO1xuXHR9XG5cblx0LyoqXG5cdCAqIFNldCB0aGUgZmlsZSBwb3NpdGlvbi5cblx0ICogQHBhcmFtIFtOdW1iZXJdIG5ld1Bvc1xuXHQgKi9cblx0cHVibGljIHNldFBvcyhuZXdQb3M6IG51bWJlcik6IG51bWJlciB7XG5cdFx0cmV0dXJuICh0aGlzLl9wb3MgPSBuZXdQb3MpO1xuXHR9XG5cblx0LyoqXG5cdCAqICoqQ29yZSoqOiBBc3luY2hyb25vdXMgc3luYy4gTXVzdCBiZSBpbXBsZW1lbnRlZCBieSBzdWJjbGFzc2VzIG9mIHRoaXNcblx0ICogY2xhc3MuXG5cdCAqIEBwYXJhbSBbRnVuY3Rpb24oQnJvd3NlckZTLkFwaUVycm9yKV0gY2Jcblx0ICovXG5cdHB1YmxpYyBzeW5jKGNiOiBCRlNPbmVBcmdDYWxsYmFjayk6IHZvaWQge1xuXHRcdHRyeSB7XG5cdFx0XHR0aGlzLnN5bmNTeW5jKCk7XG5cdFx0XHRjYigpO1xuXHRcdH0gY2F0Y2ggKGUpIHtcblx0XHRcdGNiKGUpO1xuXHRcdH1cblx0fVxuXG5cdC8qKlxuXHQgKiAqKkNvcmUqKjogU3luY2hyb25vdXMgc3luYy5cblx0ICovXG5cdHB1YmxpYyBzeW5jU3luYygpOiB2b2lkIHtcblx0XHR0aHJvdyBuZXcgQXBpRXJyb3IoRXJyb3JDb2RlLkVOT1RTVVApO1xuXHR9XG5cblx0LyoqXG5cdCAqICoqQ29yZSoqOiBBc3luY2hyb25vdXMgY2xvc2UuIE11c3QgYmUgaW1wbGVtZW50ZWQgYnkgc3ViY2xhc3NlcyBvZiB0aGlzXG5cdCAqIGNsYXNzLlxuXHQgKiBAcGFyYW0gW0Z1bmN0aW9uKEJyb3dzZXJGUy5BcGlFcnJvcildIGNiXG5cdCAqL1xuXHRwdWJsaWMgY2xvc2UoY2I6IEJGU09uZUFyZ0NhbGxiYWNrKTogdm9pZCB7XG5cdFx0dHJ5IHtcblx0XHRcdHRoaXMuY2xvc2VTeW5jKCk7XG5cdFx0XHRjYigpO1xuXHRcdH0gY2F0Y2ggKGUpIHtcblx0XHRcdGNiKGUpO1xuXHRcdH1cblx0fVxuXG5cdC8qKlxuXHQgKiAqKkNvcmUqKjogU3luY2hyb25vdXMgY2xvc2UuXG5cdCAqL1xuXHRwdWJsaWMgY2xvc2VTeW5jKCk6IHZvaWQge1xuXHRcdHRocm93IG5ldyBBcGlFcnJvcihFcnJvckNvZGUuRU5PVFNVUCk7XG5cdH1cblxuXHQvKipcblx0ICogQXN5bmNocm9ub3VzIGBzdGF0YC5cblx0ICogQHBhcmFtIFtGdW5jdGlvbihCcm93c2VyRlMuQXBpRXJyb3IsIEJyb3dzZXJGUy5ub2RlLmZzLlN0YXRzKV0gY2Jcblx0ICovXG5cdHB1YmxpYyBzdGF0KGNiOiBCRlNDYWxsYmFjazxTdGF0cz4pOiB2b2lkIHtcblx0XHR0cnkge1xuXHRcdFx0Y2IobnVsbCwgU3RhdHMuY2xvbmUodGhpcy5fc3RhdCkpO1xuXHRcdH0gY2F0Y2ggKGUpIHtcblx0XHRcdGNiKGUpO1xuXHRcdH1cblx0fVxuXG5cdC8qKlxuXHQgKiBTeW5jaHJvbm91cyBgc3RhdGAuXG5cdCAqL1xuXHRwdWJsaWMgc3RhdFN5bmMoKTogU3RhdHMge1xuXHRcdHJldHVybiBTdGF0cy5jbG9uZSh0aGlzLl9zdGF0KTtcblx0fVxuXG5cdC8qKlxuXHQgKiBBc3luY2hyb25vdXMgdHJ1bmNhdGUuXG5cdCAqIEBwYXJhbSBbTnVtYmVyXSBsZW5cblx0ICogQHBhcmFtIFtGdW5jdGlvbihCcm93c2VyRlMuQXBpRXJyb3IpXSBjYlxuXHQgKi9cblx0cHVibGljIHRydW5jYXRlKGxlbjogbnVtYmVyLCBjYjogQkZTT25lQXJnQ2FsbGJhY2spOiB2b2lkIHtcblx0XHR0cnkge1xuXHRcdFx0dGhpcy50cnVuY2F0ZVN5bmMobGVuKTtcblx0XHRcdGlmICh0aGlzLl9mbGFnLmlzU3luY2hyb25vdXMoKSAmJiAhZnMuZ2V0Um9vdEZTKCkhLnN1cHBvcnRzU3luY2goKSkge1xuXHRcdFx0XHR0aGlzLnN5bmMoY2IpO1xuXHRcdFx0fVxuXHRcdFx0Y2IoKTtcblx0XHR9IGNhdGNoIChlKSB7XG5cdFx0XHRyZXR1cm4gY2IoZSk7XG5cdFx0fVxuXHR9XG5cblx0LyoqXG5cdCAqIFN5bmNocm9ub3VzIHRydW5jYXRlLlxuXHQgKiBAcGFyYW0gW051bWJlcl0gbGVuXG5cdCAqL1xuXHRwdWJsaWMgdHJ1bmNhdGVTeW5jKGxlbjogbnVtYmVyKTogdm9pZCB7XG5cdFx0dGhpcy5fZGlydHkgPSB0cnVlO1xuXHRcdGlmICghdGhpcy5fZmxhZy5pc1dyaXRlYWJsZSgpKSB7XG5cdFx0XHR0aHJvdyBuZXcgQXBpRXJyb3IoRXJyb3JDb2RlLkVQRVJNLCAnRmlsZSBub3Qgb3BlbmVkIHdpdGggYSB3cml0ZWFibGUgbW9kZS4nKTtcblx0XHR9XG5cdFx0dGhpcy5fc3RhdC5tdGltZU1zID0gRGF0ZS5ub3coKTtcblx0XHRpZiAobGVuID4gdGhpcy5fYnVmZmVyLmxlbmd0aCkge1xuXHRcdFx0Y29uc3QgYnVmID0gQnVmZmVyLmFsbG9jKGxlbiAtIHRoaXMuX2J1ZmZlci5sZW5ndGgsIDApO1xuXHRcdFx0Ly8gV3JpdGUgd2lsbCBzZXQgQF9zdGF0LnNpemUgZm9yIHVzLlxuXHRcdFx0dGhpcy53cml0ZVN5bmMoYnVmLCAwLCBidWYubGVuZ3RoLCB0aGlzLl9idWZmZXIubGVuZ3RoKTtcblx0XHRcdGlmICh0aGlzLl9mbGFnLmlzU3luY2hyb25vdXMoKSAmJiBmcy5nZXRSb290RlMoKSEuc3VwcG9ydHNTeW5jaCgpKSB7XG5cdFx0XHRcdHRoaXMuc3luY1N5bmMoKTtcblx0XHRcdH1cblx0XHRcdHJldHVybjtcblx0XHR9XG5cdFx0dGhpcy5fc3RhdC5zaXplID0gbGVuO1xuXHRcdC8vIFRydW5jYXRlIGJ1ZmZlciB0byAnbGVuJy5cblx0XHRjb25zdCBuZXdCdWZmID0gQnVmZmVyLmFsbG9jKGxlbik7XG5cdFx0dGhpcy5fYnVmZmVyLmNvcHkobmV3QnVmZiwgMCwgMCwgbGVuKTtcblx0XHR0aGlzLl9idWZmZXIgPSBuZXdCdWZmO1xuXHRcdGlmICh0aGlzLl9mbGFnLmlzU3luY2hyb25vdXMoKSAmJiBmcy5nZXRSb290RlMoKSEuc3VwcG9ydHNTeW5jaCgpKSB7XG5cdFx0XHR0aGlzLnN5bmNTeW5jKCk7XG5cdFx0fVxuXHR9XG5cblx0LyoqXG5cdCAqIFdyaXRlIGJ1ZmZlciB0byB0aGUgZmlsZS5cblx0ICogTm90ZSB0aGF0IGl0IGlzIHVuc2FmZSB0byB1c2UgZnMud3JpdGUgbXVsdGlwbGUgdGltZXMgb24gdGhlIHNhbWUgZmlsZVxuXHQgKiB3aXRob3V0IHdhaXRpbmcgZm9yIHRoZSBjYWxsYmFjay5cblx0ICogQHBhcmFtIFtCcm93c2VyRlMubm9kZS5CdWZmZXJdIGJ1ZmZlciBCdWZmZXIgY29udGFpbmluZyB0aGUgZGF0YSB0byB3cml0ZSB0b1xuXHQgKiAgdGhlIGZpbGUuXG5cdCAqIEBwYXJhbSBbTnVtYmVyXSBvZmZzZXQgT2Zmc2V0IGluIHRoZSBidWZmZXIgdG8gc3RhcnQgcmVhZGluZyBkYXRhIGZyb20uXG5cdCAqIEBwYXJhbSBbTnVtYmVyXSBsZW5ndGggVGhlIGFtb3VudCBvZiBieXRlcyB0byB3cml0ZSB0byB0aGUgZmlsZS5cblx0ICogQHBhcmFtIFtOdW1iZXJdIHBvc2l0aW9uIE9mZnNldCBmcm9tIHRoZSBiZWdpbm5pbmcgb2YgdGhlIGZpbGUgd2hlcmUgdGhpc1xuXHQgKiAgIGRhdGEgc2hvdWxkIGJlIHdyaXR0ZW4uIElmIHBvc2l0aW9uIGlzIG51bGwsIHRoZSBkYXRhIHdpbGwgYmUgd3JpdHRlbiBhdFxuXHQgKiAgIHRoZSBjdXJyZW50IHBvc2l0aW9uLlxuXHQgKiBAcGFyYW0gW0Z1bmN0aW9uKEJyb3dzZXJGUy5BcGlFcnJvciwgTnVtYmVyLCBCcm93c2VyRlMubm9kZS5CdWZmZXIpXVxuXHQgKiAgIGNiIFRoZSBudW1iZXIgc3BlY2lmaWVzIHRoZSBudW1iZXIgb2YgYnl0ZXMgd3JpdHRlbiBpbnRvIHRoZSBmaWxlLlxuXHQgKi9cblx0cHVibGljIHdyaXRlKGJ1ZmZlcjogQnVmZmVyLCBvZmZzZXQ6IG51bWJlciwgbGVuZ3RoOiBudW1iZXIsIHBvc2l0aW9uOiBudW1iZXIsIGNiOiBCRlNUaHJlZUFyZ0NhbGxiYWNrPG51bWJlciwgQnVmZmVyPik6IHZvaWQge1xuXHRcdHRyeSB7XG5cdFx0XHRjYihudWxsLCB0aGlzLndyaXRlU3luYyhidWZmZXIsIG9mZnNldCwgbGVuZ3RoLCBwb3NpdGlvbiksIGJ1ZmZlcik7XG5cdFx0fSBjYXRjaCAoZSkge1xuXHRcdFx0Y2IoZSk7XG5cdFx0fVxuXHR9XG5cblx0LyoqXG5cdCAqIFdyaXRlIGJ1ZmZlciB0byB0aGUgZmlsZS5cblx0ICogTm90ZSB0aGF0IGl0IGlzIHVuc2FmZSB0byB1c2UgZnMud3JpdGVTeW5jIG11bHRpcGxlIHRpbWVzIG9uIHRoZSBzYW1lIGZpbGVcblx0ICogd2l0aG91dCB3YWl0aW5nIGZvciB0aGUgY2FsbGJhY2suXG5cdCAqIEBwYXJhbSBbQnJvd3NlckZTLm5vZGUuQnVmZmVyXSBidWZmZXIgQnVmZmVyIGNvbnRhaW5pbmcgdGhlIGRhdGEgdG8gd3JpdGUgdG9cblx0ICogIHRoZSBmaWxlLlxuXHQgKiBAcGFyYW0gW051bWJlcl0gb2Zmc2V0IE9mZnNldCBpbiB0aGUgYnVmZmVyIHRvIHN0YXJ0IHJlYWRpbmcgZGF0YSBmcm9tLlxuXHQgKiBAcGFyYW0gW051bWJlcl0gbGVuZ3RoIFRoZSBhbW91bnQgb2YgYnl0ZXMgdG8gd3JpdGUgdG8gdGhlIGZpbGUuXG5cdCAqIEBwYXJhbSBbTnVtYmVyXSBwb3NpdGlvbiBPZmZzZXQgZnJvbSB0aGUgYmVnaW5uaW5nIG9mIHRoZSBmaWxlIHdoZXJlIHRoaXNcblx0ICogICBkYXRhIHNob3VsZCBiZSB3cml0dGVuLiBJZiBwb3NpdGlvbiBpcyBudWxsLCB0aGUgZGF0YSB3aWxsIGJlIHdyaXR0ZW4gYXRcblx0ICogICB0aGUgY3VycmVudCBwb3NpdGlvbi5cblx0ICogQHJldHVybiBbTnVtYmVyXVxuXHQgKi9cblx0cHVibGljIHdyaXRlU3luYyhidWZmZXI6IEJ1ZmZlciwgb2Zmc2V0OiBudW1iZXIsIGxlbmd0aDogbnVtYmVyLCBwb3NpdGlvbjogbnVtYmVyKTogbnVtYmVyIHtcblx0XHR0aGlzLl9kaXJ0eSA9IHRydWU7XG5cdFx0aWYgKHBvc2l0aW9uID09PSB1bmRlZmluZWQgfHwgcG9zaXRpb24gPT09IG51bGwpIHtcblx0XHRcdHBvc2l0aW9uID0gdGhpcy5nZXRQb3MoKTtcblx0XHR9XG5cdFx0aWYgKCF0aGlzLl9mbGFnLmlzV3JpdGVhYmxlKCkpIHtcblx0XHRcdHRocm93IG5ldyBBcGlFcnJvcihFcnJvckNvZGUuRVBFUk0sICdGaWxlIG5vdCBvcGVuZWQgd2l0aCBhIHdyaXRlYWJsZSBtb2RlLicpO1xuXHRcdH1cblx0XHRjb25zdCBlbmRGcCA9IHBvc2l0aW9uICsgbGVuZ3RoO1xuXHRcdGlmIChlbmRGcCA+IHRoaXMuX3N0YXQuc2l6ZSkge1xuXHRcdFx0dGhpcy5fc3RhdC5zaXplID0gZW5kRnA7XG5cdFx0XHRpZiAoZW5kRnAgPiB0aGlzLl9idWZmZXIubGVuZ3RoKSB7XG5cdFx0XHRcdC8vIEV4dGVuZCB0aGUgYnVmZmVyIVxuXHRcdFx0XHRjb25zdCBuZXdCdWZmID0gQnVmZmVyLmFsbG9jKGVuZEZwKTtcblx0XHRcdFx0dGhpcy5fYnVmZmVyLmNvcHkobmV3QnVmZik7XG5cdFx0XHRcdHRoaXMuX2J1ZmZlciA9IG5ld0J1ZmY7XG5cdFx0XHR9XG5cdFx0fVxuXHRcdGNvbnN0IGxlbiA9IGJ1ZmZlci5jb3B5KHRoaXMuX2J1ZmZlciwgcG9zaXRpb24sIG9mZnNldCwgb2Zmc2V0ICsgbGVuZ3RoKTtcblx0XHR0aGlzLl9zdGF0Lm10aW1lTXMgPSBEYXRlLm5vdygpO1xuXHRcdGlmICh0aGlzLl9mbGFnLmlzU3luY2hyb25vdXMoKSkge1xuXHRcdFx0dGhpcy5zeW5jU3luYygpO1xuXHRcdFx0cmV0dXJuIGxlbjtcblx0XHR9XG5cdFx0dGhpcy5zZXRQb3MocG9zaXRpb24gKyBsZW4pO1xuXHRcdHJldHVybiBsZW47XG5cdH1cblxuXHQvKipcblx0ICogUmVhZCBkYXRhIGZyb20gdGhlIGZpbGUuXG5cdCAqIEBwYXJhbSBbQnJvd3NlckZTLm5vZGUuQnVmZmVyXSBidWZmZXIgVGhlIGJ1ZmZlciB0aGF0IHRoZSBkYXRhIHdpbGwgYmVcblx0ICogICB3cml0dGVuIHRvLlxuXHQgKiBAcGFyYW0gW051bWJlcl0gb2Zmc2V0IFRoZSBvZmZzZXQgd2l0aGluIHRoZSBidWZmZXIgd2hlcmUgd3JpdGluZyB3aWxsXG5cdCAqICAgc3RhcnQuXG5cdCAqIEBwYXJhbSBbTnVtYmVyXSBsZW5ndGggQW4gaW50ZWdlciBzcGVjaWZ5aW5nIHRoZSBudW1iZXIgb2YgYnl0ZXMgdG8gcmVhZC5cblx0ICogQHBhcmFtIFtOdW1iZXJdIHBvc2l0aW9uIEFuIGludGVnZXIgc3BlY2lmeWluZyB3aGVyZSB0byBiZWdpbiByZWFkaW5nIGZyb21cblx0ICogICBpbiB0aGUgZmlsZS4gSWYgcG9zaXRpb24gaXMgbnVsbCwgZGF0YSB3aWxsIGJlIHJlYWQgZnJvbSB0aGUgY3VycmVudCBmaWxlXG5cdCAqICAgcG9zaXRpb24uXG5cdCAqIEBwYXJhbSBbRnVuY3Rpb24oQnJvd3NlckZTLkFwaUVycm9yLCBOdW1iZXIsIEJyb3dzZXJGUy5ub2RlLkJ1ZmZlcildIGNiIFRoZVxuXHQgKiAgIG51bWJlciBpcyB0aGUgbnVtYmVyIG9mIGJ5dGVzIHJlYWRcblx0ICovXG5cdHB1YmxpYyByZWFkKGJ1ZmZlcjogQnVmZmVyLCBvZmZzZXQ6IG51bWJlciwgbGVuZ3RoOiBudW1iZXIsIHBvc2l0aW9uOiBudW1iZXIsIGNiOiBCRlNUaHJlZUFyZ0NhbGxiYWNrPG51bWJlciwgQnVmZmVyPik6IHZvaWQge1xuXHRcdHRyeSB7XG5cdFx0XHRjYihudWxsLCB0aGlzLnJlYWRTeW5jKGJ1ZmZlciwgb2Zmc2V0LCBsZW5ndGgsIHBvc2l0aW9uKSwgYnVmZmVyKTtcblx0XHR9IGNhdGNoIChlKSB7XG5cdFx0XHRjYihlKTtcblx0XHR9XG5cdH1cblxuXHQvKipcblx0ICogUmVhZCBkYXRhIGZyb20gdGhlIGZpbGUuXG5cdCAqIEBwYXJhbSBbQnJvd3NlckZTLm5vZGUuQnVmZmVyXSBidWZmZXIgVGhlIGJ1ZmZlciB0aGF0IHRoZSBkYXRhIHdpbGwgYmVcblx0ICogICB3cml0dGVuIHRvLlxuXHQgKiBAcGFyYW0gW051bWJlcl0gb2Zmc2V0IFRoZSBvZmZzZXQgd2l0aGluIHRoZSBidWZmZXIgd2hlcmUgd3JpdGluZyB3aWxsXG5cdCAqICAgc3RhcnQuXG5cdCAqIEBwYXJhbSBbTnVtYmVyXSBsZW5ndGggQW4gaW50ZWdlciBzcGVjaWZ5aW5nIHRoZSBudW1iZXIgb2YgYnl0ZXMgdG8gcmVhZC5cblx0ICogQHBhcmFtIFtOdW1iZXJdIHBvc2l0aW9uIEFuIGludGVnZXIgc3BlY2lmeWluZyB3aGVyZSB0byBiZWdpbiByZWFkaW5nIGZyb21cblx0ICogICBpbiB0aGUgZmlsZS4gSWYgcG9zaXRpb24gaXMgbnVsbCwgZGF0YSB3aWxsIGJlIHJlYWQgZnJvbSB0aGUgY3VycmVudCBmaWxlXG5cdCAqICAgcG9zaXRpb24uXG5cdCAqIEByZXR1cm4gW051bWJlcl1cblx0ICovXG5cdHB1YmxpYyByZWFkU3luYyhidWZmZXI6IEJ1ZmZlciwgb2Zmc2V0OiBudW1iZXIsIGxlbmd0aDogbnVtYmVyLCBwb3NpdGlvbjogbnVtYmVyKTogbnVtYmVyIHtcblx0XHRpZiAoIXRoaXMuX2ZsYWcuaXNSZWFkYWJsZSgpKSB7XG5cdFx0XHR0aHJvdyBuZXcgQXBpRXJyb3IoRXJyb3JDb2RlLkVQRVJNLCAnRmlsZSBub3Qgb3BlbmVkIHdpdGggYSByZWFkYWJsZSBtb2RlLicpO1xuXHRcdH1cblx0XHRpZiAocG9zaXRpb24gPT09IHVuZGVmaW5lZCB8fCBwb3NpdGlvbiA9PT0gbnVsbCkge1xuXHRcdFx0cG9zaXRpb24gPSB0aGlzLmdldFBvcygpO1xuXHRcdH1cblx0XHRjb25zdCBlbmRSZWFkID0gcG9zaXRpb24gKyBsZW5ndGg7XG5cdFx0aWYgKGVuZFJlYWQgPiB0aGlzLl9zdGF0LnNpemUpIHtcblx0XHRcdGxlbmd0aCA9IHRoaXMuX3N0YXQuc2l6ZSAtIHBvc2l0aW9uO1xuXHRcdH1cblx0XHRjb25zdCBydiA9IHRoaXMuX2J1ZmZlci5jb3B5KGJ1ZmZlciwgb2Zmc2V0LCBwb3NpdGlvbiwgcG9zaXRpb24gKyBsZW5ndGgpO1xuXHRcdHRoaXMuX3N0YXQuYXRpbWVNcyA9IERhdGUubm93KCk7XG5cdFx0dGhpcy5fcG9zID0gcG9zaXRpb24gKyBsZW5ndGg7XG5cdFx0cmV0dXJuIHJ2O1xuXHR9XG5cblx0LyoqXG5cdCAqIEFzeW5jaHJvbm91cyBgZmNobW9kYC5cblx0ICogQHBhcmFtIFtOdW1iZXJ8U3RyaW5nXSBtb2RlXG5cdCAqIEBwYXJhbSBbRnVuY3Rpb24oQnJvd3NlckZTLkFwaUVycm9yKV0gY2Jcblx0ICovXG5cdHB1YmxpYyBjaG1vZChtb2RlOiBudW1iZXIsIGNiOiBCRlNPbmVBcmdDYWxsYmFjayk6IHZvaWQge1xuXHRcdHRyeSB7XG5cdFx0XHR0aGlzLmNobW9kU3luYyhtb2RlKTtcblx0XHRcdGNiKCk7XG5cdFx0fSBjYXRjaCAoZSkge1xuXHRcdFx0Y2IoZSk7XG5cdFx0fVxuXHR9XG5cblx0LyoqXG5cdCAqIFN5bmNocm9ub3VzIGBmY2htb2RgLlxuXHQgKiBAcGFyYW0gW051bWJlcl0gbW9kZVxuXHQgKi9cblx0cHVibGljIGNobW9kU3luYyhtb2RlOiBudW1iZXIpOiB2b2lkIHtcblx0XHRpZiAoIXRoaXMuX2ZzLnN1cHBvcnRzUHJvcHMoKSkge1xuXHRcdFx0dGhyb3cgbmV3IEFwaUVycm9yKEVycm9yQ29kZS5FTk9UU1VQKTtcblx0XHR9XG5cdFx0dGhpcy5fZGlydHkgPSB0cnVlO1xuXHRcdHRoaXMuX3N0YXQuY2htb2QobW9kZSk7XG5cdFx0dGhpcy5zeW5jU3luYygpO1xuXHR9XG5cblx0LyoqXG5cdCAqIEFzeW5jaHJvbm91cyBgZmNob3duYC5cblx0ICogQHBhcmFtIFtOdW1iZXJdIHVpZFxuXHQgKiBAcGFyYW0gW051bWJlcl0gZ2lkXG5cdCAqIEBwYXJhbSBbRnVuY3Rpb24oQnJvd3NlckZTLkFwaUVycm9yKV0gY2Jcblx0ICovXG5cdHB1YmxpYyBjaG93bih1aWQ6IG51bWJlciwgZ2lkOiBudW1iZXIsIGNiOiBCRlNPbmVBcmdDYWxsYmFjayk6IHZvaWQge1xuXHRcdHRyeSB7XG5cdFx0XHR0aGlzLmNob3duU3luYyh1aWQsIGdpZCk7XG5cdFx0XHRjYigpO1xuXHRcdH0gY2F0Y2ggKGUpIHtcblx0XHRcdGNiKGUpO1xuXHRcdH1cblx0fVxuXG5cdC8qKlxuXHQgKiBTeW5jaHJvbm91cyBgZmNob3duYC5cblx0ICogQHBhcmFtIFtOdW1iZXJdIHVpZFxuXHQgKiBAcGFyYW0gW051bWJlcl0gZ2lkXG5cdCAqL1xuXHRwdWJsaWMgY2hvd25TeW5jKHVpZDogbnVtYmVyLCBnaWQ6IG51bWJlcik6IHZvaWQge1xuXHRcdGlmICghdGhpcy5fZnMuc3VwcG9ydHNQcm9wcygpKSB7XG5cdFx0XHR0aHJvdyBuZXcgQXBpRXJyb3IoRXJyb3JDb2RlLkVOT1RTVVApO1xuXHRcdH1cblx0XHR0aGlzLl9kaXJ0eSA9IHRydWU7XG5cdFx0dGhpcy5fc3RhdC5jaG93bih1aWQsIGdpZCk7XG5cdFx0dGhpcy5zeW5jU3luYygpO1xuXHR9XG5cblx0cHJvdGVjdGVkIGlzRGlydHkoKTogYm9vbGVhbiB7XG5cdFx0cmV0dXJuIHRoaXMuX2RpcnR5O1xuXHR9XG5cblx0LyoqXG5cdCAqIFJlc2V0cyB0aGUgZGlydHkgYml0LiBTaG91bGQgb25seSBiZSBjYWxsZWQgYWZ0ZXIgYSBzeW5jIGhhcyBjb21wbGV0ZWQgc3VjY2Vzc2Z1bGx5LlxuXHQgKi9cblx0cHJvdGVjdGVkIHJlc2V0RGlydHkoKSB7XG5cdFx0dGhpcy5fZGlydHkgPSBmYWxzZTtcblx0fVxufVxuXG4vKipcbiAqIEZpbGUgY2xhc3MgZm9yIHRoZSBJbk1lbW9yeSBhbmQgWEhSIGZpbGUgc3lzdGVtcy5cbiAqIERvZXNuJ3Qgc3luYyB0byBhbnl0aGluZywgc28gaXQgd29ya3MgbmljZWx5IGZvciBtZW1vcnktb25seSBmaWxlcy5cbiAqL1xuZXhwb3J0IGNsYXNzIE5vU3luY0ZpbGU8VCBleHRlbmRzIEZpbGVTeXN0ZW0+IGV4dGVuZHMgUHJlbG9hZEZpbGU8VD4gaW1wbGVtZW50cyBGaWxlIHtcblx0Y29uc3RydWN0b3IoX2ZzOiBULCBfcGF0aDogc3RyaW5nLCBfZmxhZzogRmlsZUZsYWcsIF9zdGF0OiBTdGF0cywgY29udGVudHM/OiBCdWZmZXIpIHtcblx0XHRzdXBlcihfZnMsIF9wYXRoLCBfZmxhZywgX3N0YXQsIGNvbnRlbnRzKTtcblx0fVxuXHQvKipcblx0ICogQXN5bmNocm9ub3VzIHN5bmMuIERvZXNuJ3QgZG8gYW55dGhpbmcsIHNpbXBseSBjYWxscyB0aGUgY2IuXG5cdCAqIEBwYXJhbSBbRnVuY3Rpb24oQnJvd3NlckZTLkFwaUVycm9yKV0gY2Jcblx0ICovXG5cdHB1YmxpYyBzeW5jKGNiOiBCRlNPbmVBcmdDYWxsYmFjayk6IHZvaWQge1xuXHRcdGNiKCk7XG5cdH1cblx0LyoqXG5cdCAqIFN5bmNocm9ub3VzIHN5bmMuIERvZXNuJ3QgZG8gYW55dGhpbmcuXG5cdCAqL1xuXHRwdWJsaWMgc3luY1N5bmMoKTogdm9pZCB7XG5cdFx0Ly8gTk9QLlxuXHR9XG5cdC8qKlxuXHQgKiBBc3luY2hyb25vdXMgY2xvc2UuIERvZXNuJ3QgZG8gYW55dGhpbmcsIHNpbXBseSBjYWxscyB0aGUgY2IuXG5cdCAqIEBwYXJhbSBbRnVuY3Rpb24oQnJvd3NlckZTLkFwaUVycm9yKV0gY2Jcblx0ICovXG5cdHB1YmxpYyBjbG9zZShjYjogQkZTT25lQXJnQ2FsbGJhY2spOiB2b2lkIHtcblx0XHRjYigpO1xuXHR9XG5cdC8qKlxuXHQgKiBTeW5jaHJvbm91cyBjbG9zZS4gRG9lc24ndCBkbyBhbnl0aGluZy5cblx0ICovXG5cdHB1YmxpYyBjbG9zZVN5bmMoKTogdm9pZCB7XG5cdFx0Ly8gTk9QLlxuXHR9XG59XG4iLCAiaW1wb3J0IHsgRmlsZVN5c3RlbSwgU3luY2hyb25vdXNGaWxlU3lzdGVtLCBCRlNPbmVBcmdDYWxsYmFjaywgQkZTQ2FsbGJhY2ssIEZpbGVTeXN0ZW1PcHRpb25zIH0gZnJvbSAnLi4vY29yZS9maWxlX3N5c3RlbSc7XG5pbXBvcnQgeyBBcGlFcnJvciwgRXJyb3JDb2RlIH0gZnJvbSAnLi4vY29yZS9hcGlfZXJyb3InO1xuaW1wb3J0IHsgRmlsZUZsYWcgfSBmcm9tICcuLi9jb3JlL2ZpbGVfZmxhZyc7XG5pbXBvcnQgeyBGaWxlIH0gZnJvbSAnLi4vY29yZS9maWxlJztcbmltcG9ydCBTdGF0cyBmcm9tICcuLi9jb3JlL3N0YXRzJztcbmltcG9ydCBQcmVsb2FkRmlsZSBmcm9tICcuLi9nZW5lcmljL3ByZWxvYWRfZmlsZSc7XG5pbXBvcnQgKiBhcyBwYXRoIGZyb20gJ3BhdGgnO1xuaW1wb3J0IENyZWQgZnJvbSAnLi4vY29yZS9jcmVkJztcbmltcG9ydCB0eXBlIHsgQnVmZmVyIH0gZnJvbSAnYnVmZmVyJztcbi8qKlxuICogQGhpZGRlblxuICovXG5pbnRlcmZhY2UgSUFzeW5jT3BlcmF0aW9uIHtcblx0YXBpTWV0aG9kOiBzdHJpbmc7XG5cdGFyZ3VtZW50czogYW55W107XG59XG5cbi8qKlxuICogV2UgZGVmaW5lIG91ciBvd24gZmlsZSB0byBpbnRlcnBvc2Ugb24gc3luY1N5bmMoKSBmb3IgbWlycm9yaW5nIHB1cnBvc2VzLlxuICovXG5jbGFzcyBNaXJyb3JGaWxlIGV4dGVuZHMgUHJlbG9hZEZpbGU8QXN5bmNNaXJyb3I+IGltcGxlbWVudHMgRmlsZSB7XG5cdGNvbnN0cnVjdG9yKGZzOiBBc3luY01pcnJvciwgcGF0aDogc3RyaW5nLCBmbGFnOiBGaWxlRmxhZywgc3RhdDogU3RhdHMsIGRhdGE6IEJ1ZmZlcikge1xuXHRcdHN1cGVyKGZzLCBwYXRoLCBmbGFnLCBzdGF0LCBkYXRhKTtcblx0fVxuXG5cdHB1YmxpYyBzeW5jU3luYygpOiB2b2lkIHtcblx0XHRpZiAodGhpcy5pc0RpcnR5KCkpIHtcblx0XHRcdHRoaXMuX2ZzLl9zeW5jU3luYyh0aGlzKTtcblx0XHRcdHRoaXMucmVzZXREaXJ0eSgpO1xuXHRcdH1cblx0fVxuXG5cdHB1YmxpYyBjbG9zZVN5bmMoKTogdm9pZCB7XG5cdFx0dGhpcy5zeW5jU3luYygpO1xuXHR9XG59XG5cbi8qKlxuICogQ29uZmlndXJhdGlvbiBvcHRpb25zIGZvciB0aGUgQXN5bmNNaXJyb3IgZmlsZSBzeXN0ZW0uXG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgQXN5bmNNaXJyb3JPcHRpb25zIHtcblx0Ly8gVGhlIHN5bmNocm9ub3VzIGZpbGUgc3lzdGVtIHRvIG1pcnJvciB0aGUgYXN5bmNocm9ub3VzIGZpbGUgc3lzdGVtIHRvLlxuXHRzeW5jOiBGaWxlU3lzdGVtO1xuXHQvLyBUaGUgYXN5bmNocm9ub3VzIGZpbGUgc3lzdGVtIHRvIG1pcnJvci5cblx0YXN5bmM6IEZpbGVTeXN0ZW07XG59XG5cbi8qKlxuICogQXN5bmNNaXJyb3JGUyBtaXJyb3JzIGEgc3luY2hyb25vdXMgZmlsZXN5c3RlbSBpbnRvIGFuIGFzeW5jaHJvbm91cyBmaWxlc3lzdGVtXG4gKiBieTpcbiAqXG4gKiAqIFBlcmZvcm1pbmcgb3BlcmF0aW9ucyBvdmVyIHRoZSBpbi1tZW1vcnkgY29weSwgd2hpbGUgYXN5bmNocm9ub3VzbHkgcGlwZWxpbmluZyB0aGVtXG4gKiAgIHRvIHRoZSBiYWNraW5nIHN0b3JlLlxuICogKiBEdXJpbmcgYXBwbGljYXRpb24gbG9hZGluZywgdGhlIGNvbnRlbnRzIG9mIHRoZSBhc3luYyBmaWxlIHN5c3RlbSBjYW4gYmUgcmVsb2FkZWQgaW50b1xuICogICB0aGUgc3luY2hyb25vdXMgc3RvcmUsIGlmIGRlc2lyZWQuXG4gKlxuICogVGhlIHR3byBzdG9yZXMgd2lsbCBiZSBrZXB0IGluIHN5bmMuIFRoZSBtb3N0IGNvbW1vbiB1c2UtY2FzZSBpcyB0byBwYWlyIGEgc3luY2hyb25vdXNcbiAqIGluLW1lbW9yeSBmaWxlc3lzdGVtIHdpdGggYW4gYXN5bmNocm9ub3VzIGJhY2tpbmcgc3RvcmUuXG4gKlxuICogRXhhbXBsZTogTWlycm9yaW5nIGFuIEluZGV4ZWREQiBmaWxlIHN5c3RlbSB0byBhbiBpbiBtZW1vcnkgZmlsZSBzeXN0ZW0uIE5vdywgeW91IGNhbiB1c2VcbiAqIEluZGV4ZWREQiBzeW5jaHJvbm91c2x5LlxuICpcbiAqIGBgYGphdmFzY3JpcHRcbiAqIEJyb3dzZXJGUy5jb25maWd1cmUoe1xuICogICBmczogXCJBc3luY01pcnJvclwiLFxuICogICBvcHRpb25zOiB7XG4gKiAgICAgc3luYzogeyBmczogXCJJbk1lbW9yeVwiIH0sXG4gKiAgICAgYXN5bmM6IHsgZnM6IFwiSW5kZXhlZERCXCIgfVxuICogICB9XG4gKiB9LCBmdW5jdGlvbihlKSB7XG4gKiAgIC8vIEJyb3dzZXJGUyBpcyBpbml0aWFsaXplZCBhbmQgcmVhZHktdG8tdXNlIVxuICogfSk7XG4gKiBgYGBcbiAqXG4gKiBPciwgYWx0ZXJuYXRpdmVseTpcbiAqXG4gKiBgYGBqYXZhc2NyaXB0XG4gKiBCcm93c2VyRlMuRmlsZVN5c3RlbS5JbmRleGVkREIuQ3JlYXRlKGZ1bmN0aW9uKGUsIGlkYmZzKSB7XG4gKiAgIEJyb3dzZXJGUy5GaWxlU3lzdGVtLkluTWVtb3J5LkNyZWF0ZShmdW5jdGlvbihlLCBpbk1lbW9yeSkge1xuICogICAgIEJyb3dzZXJGUy5GaWxlU3lzdGVtLkFzeW5jTWlycm9yKHtcbiAqICAgICAgIHN5bmM6IGluTWVtb3J5LCBhc3luYzogaWRiZnNcbiAqICAgICB9LCBmdW5jdGlvbihlLCBtaXJyb3JlZCkge1xuICogICAgICAgQnJvd3NlckZTLmluaXRpYWxpemUobWlycm9yZWQpO1xuICogICAgIH0pO1xuICogICB9KTtcbiAqIH0pO1xuICogYGBgXG4gKi9cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEFzeW5jTWlycm9yIGV4dGVuZHMgU3luY2hyb25vdXNGaWxlU3lzdGVtIGltcGxlbWVudHMgRmlsZVN5c3RlbSB7XG5cdHB1YmxpYyBzdGF0aWMgcmVhZG9ubHkgTmFtZSA9ICdBc3luY01pcnJvcic7XG5cblx0cHVibGljIHN0YXRpYyByZWFkb25seSBPcHRpb25zOiBGaWxlU3lzdGVtT3B0aW9ucyA9IHtcblx0XHRzeW5jOiB7XG5cdFx0XHR0eXBlOiAnb2JqZWN0Jyxcblx0XHRcdGRlc2NyaXB0aW9uOiAnVGhlIHN5bmNocm9ub3VzIGZpbGUgc3lzdGVtIHRvIG1pcnJvciB0aGUgYXN5bmNocm9ub3VzIGZpbGUgc3lzdGVtIHRvLicsXG5cdFx0XHR2YWxpZGF0b3I6ICh2OiBhbnksIGNiOiBCRlNPbmVBcmdDYWxsYmFjaykgPT4ge1xuXHRcdFx0XHRpZiAodiAmJiB0eXBlb2Ygdlsnc3VwcG9ydHNTeW5jaCddID09PSAnZnVuY3Rpb24nICYmIHYuc3VwcG9ydHNTeW5jaCgpKSB7XG5cdFx0XHRcdFx0Y2IoKTtcblx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRjYihuZXcgQXBpRXJyb3IoRXJyb3JDb2RlLkVJTlZBTCwgYCdzeW5jJyBvcHRpb24gbXVzdCBiZSBhIGZpbGUgc3lzdGVtIHRoYXQgc3VwcG9ydHMgc3luY2hyb25vdXMgb3BlcmF0aW9uc2ApKTtcblx0XHRcdFx0fVxuXHRcdFx0fSxcblx0XHR9LFxuXHRcdGFzeW5jOiB7XG5cdFx0XHR0eXBlOiAnb2JqZWN0Jyxcblx0XHRcdGRlc2NyaXB0aW9uOiAnVGhlIGFzeW5jaHJvbm91cyBmaWxlIHN5c3RlbSB0byBtaXJyb3IuJyxcblx0XHR9LFxuXHR9O1xuXG5cdC8qKlxuXHQgKiBDb25zdHJ1Y3RzIGFuZCBpbml0aWFsaXplcyBhbiBBc3luY01pcnJvciBmaWxlIHN5c3RlbSB3aXRoIHRoZSBnaXZlbiBvcHRpb25zLlxuXHQgKi9cblx0cHVibGljIHN0YXRpYyBDcmVhdGUob3B0czogQXN5bmNNaXJyb3JPcHRpb25zLCBjYjogQkZTQ2FsbGJhY2s8QXN5bmNNaXJyb3I+KTogdm9pZCB7XG5cdFx0dHJ5IHtcblx0XHRcdGNvbnN0IGZzID0gbmV3IEFzeW5jTWlycm9yKG9wdHMuc3luYywgb3B0cy5hc3luYyk7XG5cdFx0XHRmcy5faW5pdGlhbGl6ZSgoZT8pID0+IHtcblx0XHRcdFx0aWYgKGUpIHtcblx0XHRcdFx0XHRjYihlKTtcblx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRjYihudWxsLCBmcyk7XG5cdFx0XHRcdH1cblx0XHRcdH0pO1xuXHRcdH0gY2F0Y2ggKGUpIHtcblx0XHRcdGNiKGUpO1xuXHRcdH1cblx0fVxuXG5cdC8qKlxuXHQgKiBBc3luY2hyb25vdXNseSBjb25zdHJ1Y3RzIGFuZCBpbml0aWFsaXplcyBhbiBBc3luY01pcnJvciBmaWxlIHN5c3RlbSB3aXRoIHRoZSBnaXZlbiBvcHRpb25zLlxuXHQgKi9cblx0cHVibGljIHN0YXRpYyBDcmVhdGVBc3luYyhvcHRzOiBBc3luY01pcnJvck9wdGlvbnMpOiBQcm9taXNlPEFzeW5jTWlycm9yPiB7XG5cdFx0cmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcblx0XHRcdHRoaXMuQ3JlYXRlKG9wdHMsIChlcnJvciwgZnMpID0+IHtcblx0XHRcdFx0aWYgKGVycm9yIHx8ICFmcykge1xuXHRcdFx0XHRcdHJlamVjdChlcnJvcik7XG5cdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0cmVzb2x2ZShmcyk7XG5cdFx0XHRcdH1cblx0XHRcdH0pO1xuXHRcdH0pO1xuXHR9XG5cblx0cHVibGljIHN0YXRpYyBpc0F2YWlsYWJsZSgpOiBib29sZWFuIHtcblx0XHRyZXR1cm4gdHJ1ZTtcblx0fVxuXG5cdC8qKlxuXHQgKiBRdWV1ZSBvZiBwZW5kaW5nIGFzeW5jaHJvbm91cyBvcGVyYXRpb25zLlxuXHQgKi9cblx0cHJpdmF0ZSBfcXVldWU6IElBc3luY09wZXJhdGlvbltdID0gW107XG5cdHByaXZhdGUgX3F1ZXVlUnVubmluZzogYm9vbGVhbiA9IGZhbHNlO1xuXHRwcml2YXRlIF9zeW5jOiBGaWxlU3lzdGVtO1xuXHRwcml2YXRlIF9hc3luYzogRmlsZVN5c3RlbTtcblx0cHJpdmF0ZSBfaXNJbml0aWFsaXplZDogYm9vbGVhbiA9IGZhbHNlO1xuXHRwcml2YXRlIF9pbml0aWFsaXplQ2FsbGJhY2tzOiAoKGU/OiBBcGlFcnJvcikgPT4gdm9pZClbXSA9IFtdO1xuXG5cdC8qKlxuXHQgKiAqKkRlcHJlY2F0ZWQ7IHVzZSBBc3luY01pcnJvci5DcmVhdGUoKSBtZXRob2QgaW5zdGVhZC4qKlxuXHQgKlxuXHQgKiBNaXJyb3JzIHRoZSBzeW5jaHJvbm91cyBmaWxlIHN5c3RlbSBpbnRvIHRoZSBhc3luY2hyb25vdXMgZmlsZSBzeXN0ZW0uXG5cdCAqXG5cdCAqICoqSU1QT1JUQU5UKio6IFlvdSBtdXN0IGNhbGwgYGluaXRpYWxpemVgIG9uIHRoZSBmaWxlIHN5c3RlbSBiZWZvcmUgaXQgY2FuIGJlIHVzZWQuXG5cdCAqIEBwYXJhbSBzeW5jIFRoZSBzeW5jaHJvbm91cyBmaWxlIHN5c3RlbSB0byBtaXJyb3IgdGhlIGFzeW5jaHJvbm91cyBmaWxlIHN5c3RlbSB0by5cblx0ICogQHBhcmFtIGFzeW5jIFRoZSBhc3luY2hyb25vdXMgZmlsZSBzeXN0ZW0gdG8gbWlycm9yLlxuXHQgKi9cblx0Y29uc3RydWN0b3Ioc3luYzogRmlsZVN5c3RlbSwgYXN5bmM6IEZpbGVTeXN0ZW0pIHtcblx0XHRzdXBlcigpO1xuXHRcdHRoaXMuX3N5bmMgPSBzeW5jO1xuXHRcdHRoaXMuX2FzeW5jID0gYXN5bmM7XG5cdH1cblxuXHRwdWJsaWMgZ2V0TmFtZSgpOiBzdHJpbmcge1xuXHRcdHJldHVybiBBc3luY01pcnJvci5OYW1lO1xuXHR9XG5cblx0cHVibGljIF9zeW5jU3luYyhmZDogUHJlbG9hZEZpbGU8YW55Pikge1xuXHRcdGNvbnN0IHN0YXRzID0gZmQuZ2V0U3RhdHMoKTtcblx0XHR0aGlzLl9zeW5jLndyaXRlRmlsZVN5bmMoZmQuZ2V0UGF0aCgpLCBmZC5nZXRCdWZmZXIoKSwgbnVsbCwgRmlsZUZsYWcuZ2V0RmlsZUZsYWcoJ3cnKSwgc3RhdHMubW9kZSwgc3RhdHMuZ2V0Q3JlZCgwLCAwKSk7XG5cdFx0dGhpcy5lbnF1ZXVlT3Aoe1xuXHRcdFx0YXBpTWV0aG9kOiAnd3JpdGVGaWxlJyxcblx0XHRcdGFyZ3VtZW50czogW2ZkLmdldFBhdGgoKSwgZmQuZ2V0QnVmZmVyKCksIG51bGwsIGZkLmdldEZsYWcoKSwgc3RhdHMubW9kZSwgc3RhdHMuZ2V0Q3JlZCgwLCAwKV0sXG5cdFx0fSk7XG5cdH1cblxuXHRwdWJsaWMgaXNSZWFkT25seSgpOiBib29sZWFuIHtcblx0XHRyZXR1cm4gZmFsc2U7XG5cdH1cblx0cHVibGljIHN1cHBvcnRzU3luY2goKTogYm9vbGVhbiB7XG5cdFx0cmV0dXJuIHRydWU7XG5cdH1cblx0cHVibGljIHN1cHBvcnRzTGlua3MoKTogYm9vbGVhbiB7XG5cdFx0cmV0dXJuIGZhbHNlO1xuXHR9XG5cdHB1YmxpYyBzdXBwb3J0c1Byb3BzKCk6IGJvb2xlYW4ge1xuXHRcdHJldHVybiB0aGlzLl9zeW5jLnN1cHBvcnRzUHJvcHMoKSAmJiB0aGlzLl9hc3luYy5zdXBwb3J0c1Byb3BzKCk7XG5cdH1cblxuXHRwdWJsaWMgcmVuYW1lU3luYyhvbGRQYXRoOiBzdHJpbmcsIG5ld1BhdGg6IHN0cmluZywgY3JlZDogQ3JlZCk6IHZvaWQge1xuXHRcdHRoaXMuX3N5bmMucmVuYW1lU3luYyhvbGRQYXRoLCBuZXdQYXRoLCBjcmVkKTtcblx0XHR0aGlzLmVucXVldWVPcCh7XG5cdFx0XHRhcGlNZXRob2Q6ICdyZW5hbWUnLFxuXHRcdFx0YXJndW1lbnRzOiBbb2xkUGF0aCwgbmV3UGF0aCwgY3JlZF0sXG5cdFx0fSk7XG5cdH1cblxuXHRwdWJsaWMgc3RhdFN5bmMocDogc3RyaW5nLCBpc0xzdGF0OiBib29sZWFuLCBjcmVkOiBDcmVkKTogU3RhdHMge1xuXHRcdHJldHVybiB0aGlzLl9zeW5jLnN0YXRTeW5jKHAsIGlzTHN0YXQsIGNyZWQpO1xuXHR9XG5cblx0cHVibGljIG9wZW5TeW5jKHA6IHN0cmluZywgZmxhZzogRmlsZUZsYWcsIG1vZGU6IG51bWJlciwgY3JlZDogQ3JlZCk6IEZpbGUge1xuXHRcdC8vIFNhbml0eSBjaGVjazogSXMgdGhpcyBvcGVuL2Nsb3NlIHBlcm1pdHRlZD9cblx0XHRjb25zdCBmZCA9IHRoaXMuX3N5bmMub3BlblN5bmMocCwgZmxhZywgbW9kZSwgY3JlZCk7XG5cdFx0ZmQuY2xvc2VTeW5jKCk7XG5cdFx0cmV0dXJuIG5ldyBNaXJyb3JGaWxlKHRoaXMsIHAsIGZsYWcsIHRoaXMuX3N5bmMuc3RhdFN5bmMocCwgZmFsc2UsIGNyZWQpLCB0aGlzLl9zeW5jLnJlYWRGaWxlU3luYyhwLCBudWxsLCBGaWxlRmxhZy5nZXRGaWxlRmxhZygncicpLCBjcmVkKSk7XG5cdH1cblxuXHRwdWJsaWMgdW5saW5rU3luYyhwOiBzdHJpbmcsIGNyZWQ6IENyZWQpOiB2b2lkIHtcblx0XHR0aGlzLl9zeW5jLnVubGlua1N5bmMocCwgY3JlZCk7XG5cdFx0dGhpcy5lbnF1ZXVlT3Aoe1xuXHRcdFx0YXBpTWV0aG9kOiAndW5saW5rJyxcblx0XHRcdGFyZ3VtZW50czogW3AsIGNyZWRdLFxuXHRcdH0pO1xuXHR9XG5cblx0cHVibGljIHJtZGlyU3luYyhwOiBzdHJpbmcsIGNyZWQ6IENyZWQpOiB2b2lkIHtcblx0XHR0aGlzLl9zeW5jLnJtZGlyU3luYyhwLCBjcmVkKTtcblx0XHR0aGlzLmVucXVldWVPcCh7XG5cdFx0XHRhcGlNZXRob2Q6ICdybWRpcicsXG5cdFx0XHRhcmd1bWVudHM6IFtwLCBjcmVkXSxcblx0XHR9KTtcblx0fVxuXG5cdHB1YmxpYyBta2RpclN5bmMocDogc3RyaW5nLCBtb2RlOiBudW1iZXIsIGNyZWQ6IENyZWQpOiB2b2lkIHtcblx0XHR0aGlzLl9zeW5jLm1rZGlyU3luYyhwLCBtb2RlLCBjcmVkKTtcblx0XHR0aGlzLmVucXVldWVPcCh7XG5cdFx0XHRhcGlNZXRob2Q6ICdta2RpcicsXG5cdFx0XHRhcmd1bWVudHM6IFtwLCBtb2RlLCBjcmVkXSxcblx0XHR9KTtcblx0fVxuXG5cdHB1YmxpYyByZWFkZGlyU3luYyhwOiBzdHJpbmcsIGNyZWQ6IENyZWQpOiBzdHJpbmdbXSB7XG5cdFx0cmV0dXJuIHRoaXMuX3N5bmMucmVhZGRpclN5bmMocCwgY3JlZCk7XG5cdH1cblxuXHRwdWJsaWMgZXhpc3RzU3luYyhwOiBzdHJpbmcsIGNyZWQ6IENyZWQpOiBib29sZWFuIHtcblx0XHRyZXR1cm4gdGhpcy5fc3luYy5leGlzdHNTeW5jKHAsIGNyZWQpO1xuXHR9XG5cblx0cHVibGljIGNobW9kU3luYyhwOiBzdHJpbmcsIGlzTGNobW9kOiBib29sZWFuLCBtb2RlOiBudW1iZXIsIGNyZWQ6IENyZWQpOiB2b2lkIHtcblx0XHR0aGlzLl9zeW5jLmNobW9kU3luYyhwLCBpc0xjaG1vZCwgbW9kZSwgY3JlZCk7XG5cdFx0dGhpcy5lbnF1ZXVlT3Aoe1xuXHRcdFx0YXBpTWV0aG9kOiAnY2htb2QnLFxuXHRcdFx0YXJndW1lbnRzOiBbcCwgaXNMY2htb2QsIG1vZGUsIGNyZWRdLFxuXHRcdH0pO1xuXHR9XG5cblx0cHVibGljIGNob3duU3luYyhwOiBzdHJpbmcsIGlzTGNob3duOiBib29sZWFuLCBuZXdfdWlkOiBudW1iZXIsIG5ld19naWQ6IG51bWJlciwgY3JlZDogQ3JlZCk6IHZvaWQge1xuXHRcdHRoaXMuX3N5bmMuY2hvd25TeW5jKHAsIGlzTGNob3duLCBuZXdfdWlkLCBuZXdfZ2lkLCBjcmVkKTtcblx0XHR0aGlzLmVucXVldWVPcCh7XG5cdFx0XHRhcGlNZXRob2Q6ICdjaG93bicsXG5cdFx0XHRhcmd1bWVudHM6IFtwLCBpc0xjaG93biwgbmV3X3VpZCwgbmV3X2dpZCwgY3JlZF0sXG5cdFx0fSk7XG5cdH1cblxuXHRwdWJsaWMgdXRpbWVzU3luYyhwOiBzdHJpbmcsIGF0aW1lOiBEYXRlLCBtdGltZTogRGF0ZSwgY3JlZDogQ3JlZCk6IHZvaWQge1xuXHRcdHRoaXMuX3N5bmMudXRpbWVzU3luYyhwLCBhdGltZSwgbXRpbWUsIGNyZWQpO1xuXHRcdHRoaXMuZW5xdWV1ZU9wKHtcblx0XHRcdGFwaU1ldGhvZDogJ3V0aW1lcycsXG5cdFx0XHRhcmd1bWVudHM6IFtwLCBhdGltZSwgbXRpbWUsIGNyZWRdLFxuXHRcdH0pO1xuXHR9XG5cblx0LyoqXG5cdCAqIENhbGxlZCBvbmNlIHRvIGxvYWQgdXAgZmlsZXMgZnJvbSBhc3luYyBzdG9yYWdlIGludG8gc3luYyBzdG9yYWdlLlxuXHQgKi9cblx0cHJpdmF0ZSBfaW5pdGlhbGl6ZSh1c2VyQ2I6IEJGU09uZUFyZ0NhbGxiYWNrKTogdm9pZCB7XG5cdFx0Y29uc3QgY2FsbGJhY2tzID0gdGhpcy5faW5pdGlhbGl6ZUNhbGxiYWNrcztcblxuXHRcdGNvbnN0IGVuZCA9IChlPzogQXBpRXJyb3IpOiB2b2lkID0+IHtcblx0XHRcdHRoaXMuX2lzSW5pdGlhbGl6ZWQgPSAhZTtcblx0XHRcdHRoaXMuX2luaXRpYWxpemVDYWxsYmFja3MgPSBbXTtcblx0XHRcdGNhbGxiYWNrcy5mb3JFYWNoKGNiID0+IGNiKGUpKTtcblx0XHR9O1xuXG5cdFx0aWYgKCF0aGlzLl9pc0luaXRpYWxpemVkKSB7XG5cdFx0XHQvLyBGaXJzdCBjYWxsIHRyaWdnZXJzIGluaXRpYWxpemF0aW9uLCB0aGUgcmVzdCB3YWl0LlxuXHRcdFx0aWYgKGNhbGxiYWNrcy5wdXNoKHVzZXJDYikgPT09IDEpIHtcblx0XHRcdFx0Y29uc3QgY29weURpcmVjdG9yeSA9IChwOiBzdHJpbmcsIG1vZGU6IG51bWJlciwgY2I6IEJGU09uZUFyZ0NhbGxiYWNrKSA9PiB7XG5cdFx0XHRcdFx0XHRpZiAocCAhPT0gJy8nKSB7XG5cdFx0XHRcdFx0XHRcdHRoaXMuX2FzeW5jLnN0YXQocCwgdHJ1ZSwgQ3JlZC5Sb290LCAoZXJyPzogQXBpRXJyb3IsIHN0YXRzPzogU3RhdHMpID0+IHtcblx0XHRcdFx0XHRcdFx0XHRpZiAoZXJyKSB7XG5cdFx0XHRcdFx0XHRcdFx0XHRjYihlcnIpO1xuXHRcdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdFx0XHR0aGlzLl9zeW5jLm1rZGlyU3luYyhwLCBzdGF0cy5tb2RlLCBzdGF0cy5nZXRDcmVkKCkpO1xuXHRcdFx0XHRcdFx0XHR9KTtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdHRoaXMuX2FzeW5jLnJlYWRkaXIocCwgQ3JlZC5Sb290LCAoZXJyLCBmaWxlcykgPT4ge1xuXHRcdFx0XHRcdFx0XHRsZXQgaSA9IDA7XG5cdFx0XHRcdFx0XHRcdC8vIE5PVEU6IFRoaXMgZnVuY3Rpb24gbXVzdCBub3QgYmUgaW4gYSBsZXhpY2FsbHkgbmVzdGVkIHN0YXRlbWVudCxcblx0XHRcdFx0XHRcdFx0Ly8gc3VjaCBhcyBhbiBpZiBvciB3aGlsZSBzdGF0ZW1lbnQuIFNhZmFyaSByZWZ1c2VzIHRvIHJ1biB0aGVcblx0XHRcdFx0XHRcdFx0Ly8gc2NyaXB0IHNpbmNlIGl0IGlzIHVuZGVmaW5lZCBiZWhhdmlvci5cblx0XHRcdFx0XHRcdFx0ZnVuY3Rpb24gY29weU5leHRGaWxlKGVycj86IEFwaUVycm9yKSB7XG5cdFx0XHRcdFx0XHRcdFx0aWYgKGVycikge1xuXHRcdFx0XHRcdFx0XHRcdFx0Y2IoZXJyKTtcblx0XHRcdFx0XHRcdFx0XHR9IGVsc2UgaWYgKGkgPCBmaWxlcyEubGVuZ3RoKSB7XG5cdFx0XHRcdFx0XHRcdFx0XHRjb3B5SXRlbShwYXRoLmpvaW4ocCwgZmlsZXMhW2ldKSwgY29weU5leHRGaWxlKTtcblx0XHRcdFx0XHRcdFx0XHRcdGkrKztcblx0XHRcdFx0XHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdFx0XHRcdFx0Y2IoKTtcblx0XHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdFx0aWYgKGVycikge1xuXHRcdFx0XHRcdFx0XHRcdGNiKGVycik7XG5cdFx0XHRcdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0XHRcdFx0Y29weU5leHRGaWxlKCk7XG5cdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdH0pO1xuXHRcdFx0XHRcdH0sXG5cdFx0XHRcdFx0Y29weUZpbGUgPSAocDogc3RyaW5nLCBtb2RlOiBudW1iZXIsIGNiOiBCRlNPbmVBcmdDYWxsYmFjaykgPT4ge1xuXHRcdFx0XHRcdFx0dGhpcy5fYXN5bmMucmVhZEZpbGUocCwgbnVsbCwgRmlsZUZsYWcuZ2V0RmlsZUZsYWcoJ3InKSwgQ3JlZC5Sb290LCAoZXJyLCBkYXRhKSA9PiB7XG5cdFx0XHRcdFx0XHRcdGlmIChlcnIpIHtcblx0XHRcdFx0XHRcdFx0XHRjYihlcnIpO1xuXHRcdFx0XHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdFx0XHRcdHRyeSB7XG5cdFx0XHRcdFx0XHRcdFx0XHR0aGlzLl9zeW5jLndyaXRlRmlsZVN5bmMocCwgZGF0YSEsIG51bGwsIEZpbGVGbGFnLmdldEZpbGVGbGFnKCd3JyksIG1vZGUsIENyZWQuUm9vdCk7XG5cdFx0XHRcdFx0XHRcdFx0fSBjYXRjaCAoZSkge1xuXHRcdFx0XHRcdFx0XHRcdFx0ZXJyID0gZTtcblx0XHRcdFx0XHRcdFx0XHR9IGZpbmFsbHkge1xuXHRcdFx0XHRcdFx0XHRcdFx0Y2IoZXJyKTtcblx0XHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdH0pO1xuXHRcdFx0XHRcdH0sXG5cdFx0XHRcdFx0Y29weUl0ZW0gPSAocDogc3RyaW5nLCBjYjogQkZTT25lQXJnQ2FsbGJhY2spID0+IHtcblx0XHRcdFx0XHRcdHRoaXMuX2FzeW5jLnN0YXQocCwgZmFsc2UsIENyZWQuUm9vdCwgKGVyciwgc3RhdHMpID0+IHtcblx0XHRcdFx0XHRcdFx0aWYgKGVycikge1xuXHRcdFx0XHRcdFx0XHRcdGNiKGVycik7XG5cdFx0XHRcdFx0XHRcdH0gZWxzZSBpZiAoc3RhdHMhLmlzRGlyZWN0b3J5KCkpIHtcblx0XHRcdFx0XHRcdFx0XHRjb3B5RGlyZWN0b3J5KHAsIHN0YXRzIS5tb2RlLCBjYik7XG5cdFx0XHRcdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0XHRcdFx0Y29weUZpbGUocCwgc3RhdHMhLm1vZGUsIGNiKTtcblx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0fSk7XG5cdFx0XHRcdFx0fTtcblx0XHRcdFx0Y29weURpcmVjdG9yeSgnLycsIDAsIGVuZCk7XG5cdFx0XHR9XG5cdFx0fSBlbHNlIHtcblx0XHRcdHVzZXJDYigpO1xuXHRcdH1cblx0fVxuXG5cdHByaXZhdGUgZW5xdWV1ZU9wKG9wOiBJQXN5bmNPcGVyYXRpb24pIHtcblx0XHR0aGlzLl9xdWV1ZS5wdXNoKG9wKTtcblx0XHRpZiAoIXRoaXMuX3F1ZXVlUnVubmluZykge1xuXHRcdFx0dGhpcy5fcXVldWVSdW5uaW5nID0gdHJ1ZTtcblx0XHRcdGNvbnN0IGRvTmV4dE9wID0gKGVycj86IEFwaUVycm9yKSA9PiB7XG5cdFx0XHRcdGlmIChlcnIpIHtcblx0XHRcdFx0XHR0aHJvdyBuZXcgRXJyb3IoYFdBUk5JTkc6IEZpbGUgc3lzdGVtIGhhcyBkZXN5bmNocm9uaXplZC4gUmVjZWl2ZWQgZm9sbG93aW5nIGVycm9yOiAke2Vycn1cXG4kYCk7XG5cdFx0XHRcdH1cblx0XHRcdFx0aWYgKHRoaXMuX3F1ZXVlLmxlbmd0aCA+IDApIHtcblx0XHRcdFx0XHRjb25zdCBvcCA9IHRoaXMuX3F1ZXVlLnNoaWZ0KCkhLFxuXHRcdFx0XHRcdFx0YXJncyA9IG9wLmFyZ3VtZW50cztcblx0XHRcdFx0XHRhcmdzLnB1c2goZG9OZXh0T3ApO1xuXHRcdFx0XHRcdCg8RnVuY3Rpb24+KDxhbnk+dGhpcy5fYXN5bmMpW29wLmFwaU1ldGhvZF0pLmFwcGx5KHRoaXMuX2FzeW5jLCBhcmdzKTtcblx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHR0aGlzLl9xdWV1ZVJ1bm5pbmcgPSBmYWxzZTtcblx0XHRcdFx0fVxuXHRcdFx0fTtcblx0XHRcdGRvTmV4dE9wKCk7XG5cdFx0fVxuXHR9XG59XG4iLCAiLy8gSWYgRHJvcGJveCBpc24ndCBvbiB0aGUgd2VicGFnZSwgdGhlbiBzZXQgdGhpcyB0byBudWxsLlxuZXhwb3J0IGNvbnN0IERyb3Bib3ggPSBnbG9iYWxUaGlzLkRyb3Bib3ggPyBnbG9iYWxUaGlzLkRyb3Bib3guRHJvcGJveCA6IHVuZGVmaW5lZDtcbiIsICJpbXBvcnQgUHJlbG9hZEZpbGUgZnJvbSAnLi4vZ2VuZXJpYy9wcmVsb2FkX2ZpbGUnO1xuaW1wb3J0IHsgQmFzZUZpbGVTeXN0ZW0sIEZpbGVTeXN0ZW0sIEJGU09uZUFyZ0NhbGxiYWNrLCBCRlNDYWxsYmFjaywgRmlsZVN5c3RlbU9wdGlvbnMgfSBmcm9tICcuLi9jb3JlL2ZpbGVfc3lzdGVtJztcbmltcG9ydCB7IEZpbGVGbGFnIH0gZnJvbSAnLi4vY29yZS9maWxlX2ZsYWcnO1xuaW1wb3J0IHsgZGVmYXVsdCBhcyBTdGF0cywgRmlsZVR5cGUgfSBmcm9tICcuLi9jb3JlL3N0YXRzJztcbmltcG9ydCB7IEFwaUVycm9yLCBFcnJvckNvZGUgfSBmcm9tICcuLi9jb3JlL2FwaV9lcnJvcic7XG5pbXBvcnQgeyBGaWxlIH0gZnJvbSAnLi4vY29yZS9maWxlJztcbmltcG9ydCB7IGFycmF5QnVmZmVyMkJ1ZmZlciwgYnVmZmVyMkFycmF5QnVmZmVyIH0gZnJvbSAnLi4vY29yZS91dGlsJztcbmltcG9ydCB7IERyb3Bib3ggfSBmcm9tICcuLi9nZW5lcmljL2Ryb3Bib3hfYnJpZGdlX2FjdHVhbCc7XG5pbXBvcnQgc2V0SW1tZWRpYXRlIGZyb20gJy4uL2dlbmVyaWMvc2V0SW1tZWRpYXRlJztcbmltcG9ydCB7IGRpcm5hbWUgfSBmcm9tICdwYXRoJztcbmltcG9ydCBDcmVkIGZyb20gJy4uL2NvcmUvY3JlZCc7XG5pbXBvcnQgeyBCdWZmZXIgfSBmcm9tICdidWZmZXInO1xudHlwZSBEcm9wYm94Q2xpZW50ID0gRHJvcGJveFR5cGVzLkRyb3Bib3g7XG5cbi8qKlxuICogRHJvcGJveCBwYXRocyBkbyBub3QgYmVnaW4gd2l0aCBhIC8sIHRoZXkganVzdCBiZWdpbiB3aXRoIGEgZm9sZGVyIGF0IHRoZSByb290IG5vZGUuXG4gKiBIZXJlLCB3ZSBzdHJpcCB0aGUgYC9gLlxuICogQHBhcmFtIHAgQW4gYWJzb2x1dGUgcGF0aFxuICovXG5mdW5jdGlvbiBGaXhQYXRoKHA6IHN0cmluZyk6IHN0cmluZyB7XG5cdGlmIChwID09PSAnLycpIHtcblx0XHRyZXR1cm4gJyc7XG5cdH0gZWxzZSB7XG5cdFx0cmV0dXJuIHA7XG5cdH1cbn1cblxuLyoqXG4gKiBIQUNLOiBEcm9wYm94IGVycm9ycyBhcmUgRlVCQVInZCBzb21ldGltZXMuXG4gKiBAdXJsIGh0dHBzOi8vZ2l0aHViLmNvbS9kcm9wYm94L2Ryb3Bib3gtc2RrLWpzL2lzc3Vlcy8xNDZcbiAqIEBwYXJhbSBlXG4gKi9cbmZ1bmN0aW9uIEV4dHJhY3RUaGVGdWNraW5nRXJyb3I8VD4oZTogRHJvcGJveFR5cGVzLkVycm9yPFQ+KTogVCB7XG5cdGNvbnN0IG9iaiA9IDxhbnk+ZS5lcnJvcjtcblx0aWYgKG9ialsnLnRhZyddKSB7XG5cdFx0Ly8gRXZlcnl0aGluZyBpcyBPSy5cblx0XHRyZXR1cm4gb2JqO1xuXHR9IGVsc2UgaWYgKG9ialsnZXJyb3InXSkge1xuXHRcdC8vIFRlcnJpYmxlIG5lc3RlZCBvYmplY3QgYnVnLlxuXHRcdGNvbnN0IG9iajIgPSBvYmouZXJyb3I7XG5cdFx0aWYgKG9iajJbJy50YWcnXSkge1xuXHRcdFx0cmV0dXJuIG9iajI7XG5cdFx0fSBlbHNlIGlmIChvYmoyWydyZWFzb24nXSAmJiBvYmoyWydyZWFzb24nXVsnLnRhZyddKSB7XG5cdFx0XHRyZXR1cm4gb2JqMi5yZWFzb247XG5cdFx0fSBlbHNlIHtcblx0XHRcdHJldHVybiBvYmoyO1xuXHRcdH1cblx0fSBlbHNlIGlmICh0eXBlb2Ygb2JqID09PSAnc3RyaW5nJykge1xuXHRcdC8vIE1pZ2h0IGJlIGEgZnVja2luZyBKU09OIG9iamVjdCBlcnJvci5cblx0XHR0cnkge1xuXHRcdFx0Y29uc3Qgb2JqMiA9IEpTT04ucGFyc2Uob2JqKTtcblx0XHRcdGlmIChvYmoyWydlcnJvciddICYmIG9iajJbJ2Vycm9yJ11bJ3JlYXNvbiddICYmIG9iajJbJ2Vycm9yJ11bJ3JlYXNvbiddWycudGFnJ10pIHtcblx0XHRcdFx0cmV0dXJuIG9iajIuZXJyb3IucmVhc29uO1xuXHRcdFx0fVxuXHRcdH0gY2F0Y2ggKGUpIHtcblx0XHRcdC8vIE5vcGUuIEdpdmUgdXAuXG5cdFx0fVxuXHR9XG5cdHJldHVybiA8YW55Pm9iajtcbn1cblxuLyoqXG4gKiBSZXR1cm5zIGEgdXNlci1mYWNpbmcgZXJyb3IgbWVzc2FnZSBnaXZlbiBhbiBlcnJvci5cbiAqXG4gKiBIQUNLOiBEcm9wYm94IGVycm9yIG1lc3NhZ2VzIHNvbWV0aW1lcyBsYWNrIGEgYHVzZXJfbWVzc2FnZWAgZmllbGQuXG4gKiBTb21ldGltZXMsIHRoZXkgYXJlIGV2ZW4gc3RyaW5ncy4gVWdoLlxuICogQHVybCBodHRwczovL2dpdGh1Yi5jb20vZHJvcGJveC9kcm9wYm94LXNkay1qcy9pc3N1ZXMvMTQ2XG4gKiBAdXJsIGh0dHBzOi8vZ2l0aHViLmNvbS9kcm9wYm94L2Ryb3Bib3gtc2RrLWpzL2lzc3Vlcy8xNDVcbiAqIEB1cmwgaHR0cHM6Ly9naXRodWIuY29tL2Ryb3Bib3gvZHJvcGJveC1zZGstanMvaXNzdWVzLzE0NFxuICogQHBhcmFtIGVyciBBbiBlcnJvci5cbiAqL1xuZnVuY3Rpb24gR2V0RXJyb3JNZXNzYWdlKGVycjogRHJvcGJveFR5cGVzLkVycm9yPGFueT4pOiBzdHJpbmcge1xuXHRpZiAoZXJyWyd1c2VyX21lc3NhZ2UnXSkge1xuXHRcdHJldHVybiBlcnIudXNlcl9tZXNzYWdlLnRleHQ7XG5cdH0gZWxzZSBpZiAoZXJyWydlcnJvcl9zdW1tYXJ5J10pIHtcblx0XHRyZXR1cm4gZXJyLmVycm9yX3N1bW1hcnk7XG5cdH0gZWxzZSBpZiAodHlwZW9mIGVyci5lcnJvciA9PT0gJ3N0cmluZycpIHtcblx0XHRyZXR1cm4gZXJyLmVycm9yO1xuXHR9IGVsc2UgaWYgKHR5cGVvZiBlcnIuZXJyb3IgPT09ICdvYmplY3QnKSB7XG5cdFx0Ly8gRFJPUEJPWCBCVUc6IFNvbWV0aW1lcywgZXJyb3IgaXMgYSBuZXN0ZWQgZXJyb3IuXG5cdFx0cmV0dXJuIEdldEVycm9yTWVzc2FnZShlcnIuZXJyb3IpO1xuXHR9IGVsc2Uge1xuXHRcdHRocm93IG5ldyBFcnJvcihgRHJvcGJveCdzIHNlcnZlcnMgZ2F2ZSB1cyBhIGdhcmJhZ2UgZXJyb3IgbWVzc2FnZTogJHtKU09OLnN0cmluZ2lmeShlcnIpfWApO1xuXHR9XG59XG5cbmZ1bmN0aW9uIExvb2t1cEVycm9yVG9FcnJvcihlcnI6IERyb3Bib3hUeXBlcy5maWxlcy5Mb29rdXBFcnJvciwgcDogc3RyaW5nLCBtc2c6IHN0cmluZyk6IEFwaUVycm9yIHtcblx0c3dpdGNoIChlcnJbJy50YWcnXSkge1xuXHRcdGNhc2UgJ21hbGZvcm1lZF9wYXRoJzpcblx0XHRcdHJldHVybiBuZXcgQXBpRXJyb3IoRXJyb3JDb2RlLkVCQURGLCBtc2csIHApO1xuXHRcdGNhc2UgJ25vdF9mb3VuZCc6XG5cdFx0XHRyZXR1cm4gQXBpRXJyb3IuRU5PRU5UKHApO1xuXHRcdGNhc2UgJ25vdF9maWxlJzpcblx0XHRcdHJldHVybiBBcGlFcnJvci5FSVNESVIocCk7XG5cdFx0Y2FzZSAnbm90X2ZvbGRlcic6XG5cdFx0XHRyZXR1cm4gQXBpRXJyb3IuRU5PVERJUihwKTtcblx0XHRjYXNlICdyZXN0cmljdGVkX2NvbnRlbnQnOlxuXHRcdFx0cmV0dXJuIEFwaUVycm9yLkVQRVJNKHApO1xuXHRcdGNhc2UgJ290aGVyJzpcblx0XHRkZWZhdWx0OlxuXHRcdFx0cmV0dXJuIG5ldyBBcGlFcnJvcihFcnJvckNvZGUuRUlPLCBtc2csIHApO1xuXHR9XG59XG5cbmZ1bmN0aW9uIFdyaXRlRXJyb3JUb0Vycm9yKGVycjogRHJvcGJveFR5cGVzLmZpbGVzLldyaXRlRXJyb3IsIHA6IHN0cmluZywgbXNnOiBzdHJpbmcpOiBBcGlFcnJvciB7XG5cdHN3aXRjaCAoZXJyWycudGFnJ10pIHtcblx0XHRjYXNlICdtYWxmb3JtZWRfcGF0aCc6XG5cdFx0Y2FzZSAnZGlzYWxsb3dlZF9uYW1lJzpcblx0XHRcdHJldHVybiBuZXcgQXBpRXJyb3IoRXJyb3JDb2RlLkVCQURGLCBtc2csIHApO1xuXHRcdGNhc2UgJ2NvbmZsaWN0Jzpcblx0XHRjYXNlICdub193cml0ZV9wZXJtaXNzaW9uJzpcblx0XHRjYXNlICd0ZWFtX2ZvbGRlcic6XG5cdFx0XHRyZXR1cm4gQXBpRXJyb3IuRVBFUk0ocCk7XG5cdFx0Y2FzZSAnaW5zdWZmaWNpZW50X3NwYWNlJzpcblx0XHRcdHJldHVybiBuZXcgQXBpRXJyb3IoRXJyb3JDb2RlLkVOT1NQQywgbXNnKTtcblx0XHRjYXNlICdvdGhlcic6XG5cdFx0ZGVmYXVsdDpcblx0XHRcdHJldHVybiBuZXcgQXBpRXJyb3IoRXJyb3JDb2RlLkVJTywgbXNnLCBwKTtcblx0fVxufVxuXG5mdW5jdGlvbiBGaWxlc0RlbGV0ZVdyYXBwZWQoY2xpZW50OiBEcm9wYm94Q2xpZW50LCBwOiBzdHJpbmcsIGNiOiBCRlNPbmVBcmdDYWxsYmFjayk6IHZvaWQge1xuXHRjb25zdCBhcmc6IERyb3Bib3hUeXBlcy5maWxlcy5EZWxldGVBcmcgPSB7XG5cdFx0cGF0aDogRml4UGF0aChwKSxcblx0fTtcblx0Y2xpZW50XG5cdFx0LmZpbGVzRGVsZXRlVjIoYXJnKVxuXHRcdC50aGVuKCgpID0+IHtcblx0XHRcdGNiKCk7XG5cdFx0fSlcblx0XHQuY2F0Y2goKGU6IERyb3Bib3hUeXBlcy5FcnJvcjxEcm9wYm94VHlwZXMuZmlsZXMuRGVsZXRlRXJyb3I+KSA9PiB7XG5cdFx0XHRjb25zdCBlcnIgPSBFeHRyYWN0VGhlRnVja2luZ0Vycm9yKGUpO1xuXHRcdFx0c3dpdGNoIChlcnJbJy50YWcnXSkge1xuXHRcdFx0XHRjYXNlICdwYXRoX2xvb2t1cCc6XG5cdFx0XHRcdFx0Y2IoTG9va3VwRXJyb3JUb0Vycm9yKCg8RHJvcGJveFR5cGVzLmZpbGVzLkRlbGV0ZUVycm9yUGF0aExvb2t1cD5lcnIpLnBhdGhfbG9va3VwLCBwLCBHZXRFcnJvck1lc3NhZ2UoZSkpKTtcblx0XHRcdFx0XHRicmVhaztcblx0XHRcdFx0Y2FzZSAncGF0aF93cml0ZSc6XG5cdFx0XHRcdFx0Y2IoV3JpdGVFcnJvclRvRXJyb3IoKDxEcm9wYm94VHlwZXMuZmlsZXMuRGVsZXRlRXJyb3JQYXRoV3JpdGU+ZXJyKS5wYXRoX3dyaXRlLCBwLCBHZXRFcnJvck1lc3NhZ2UoZSkpKTtcblx0XHRcdFx0XHRicmVhaztcblx0XHRcdFx0Y2FzZSAndG9vX21hbnlfd3JpdGVfb3BlcmF0aW9ucyc6XG5cdFx0XHRcdFx0c2V0VGltZW91dCgoKSA9PiBGaWxlc0RlbGV0ZVdyYXBwZWQoY2xpZW50LCBwLCBjYiksIDUwMCArIDMwMCAqIE1hdGgucmFuZG9tKCkpO1xuXHRcdFx0XHRcdGJyZWFrO1xuXHRcdFx0XHRjYXNlICdvdGhlcic6XG5cdFx0XHRcdGRlZmF1bHQ6XG5cdFx0XHRcdFx0Y2IobmV3IEFwaUVycm9yKEVycm9yQ29kZS5FSU8sIEdldEVycm9yTWVzc2FnZShlKSwgcCkpO1xuXHRcdFx0XHRcdGJyZWFrO1xuXHRcdFx0fVxuXHRcdH0pO1xufVxuXG5leHBvcnQgY2xhc3MgRHJvcGJveEZpbGUgZXh0ZW5kcyBQcmVsb2FkRmlsZTxEcm9wYm94RmlsZVN5c3RlbT4gaW1wbGVtZW50cyBGaWxlIHtcblx0Y29uc3RydWN0b3IoX2ZzOiBEcm9wYm94RmlsZVN5c3RlbSwgX3BhdGg6IHN0cmluZywgX2ZsYWc6IEZpbGVGbGFnLCBfc3RhdDogU3RhdHMsIGNvbnRlbnRzPzogQnVmZmVyKSB7XG5cdFx0c3VwZXIoX2ZzLCBfcGF0aCwgX2ZsYWcsIF9zdGF0LCBjb250ZW50cyk7XG5cdH1cblxuXHRwdWJsaWMgc3luYyhjYjogQkZTT25lQXJnQ2FsbGJhY2spOiB2b2lkIHtcblx0XHR0aGlzLl9mcy5fc3luY0ZpbGUodGhpcy5nZXRQYXRoKCksIHRoaXMuZ2V0QnVmZmVyKCksIGNiKTtcblx0fVxuXG5cdHB1YmxpYyBjbG9zZShjYjogQkZTT25lQXJnQ2FsbGJhY2spOiB2b2lkIHtcblx0XHR0aGlzLnN5bmMoY2IpO1xuXHR9XG59XG5cbi8qKlxuICogT3B0aW9ucyBmb3IgdGhlIERyb3Bib3ggZmlsZSBzeXN0ZW0uXG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgRHJvcGJveEZpbGVTeXN0ZW1PcHRpb25zIHtcblx0Ly8gQW4gKmF1dGhlbnRpY2F0ZWQqIERyb3Bib3ggY2xpZW50IGZyb20gdGhlIDIueCBKUyBTREsuXG5cdGNsaWVudDogRHJvcGJveFR5cGVzLkRyb3Bib3g7XG59XG5cbi8qKlxuICogQSByZWFkL3dyaXRlIGZpbGUgc3lzdGVtIGJhY2tlZCBieSBEcm9wYm94IGNsb3VkIHN0b3JhZ2UuXG4gKlxuICogVXNlcyB0aGUgRHJvcGJveCBWMiBBUEksIGFuZCB0aGUgMi54IEpTIFNESy5cbiAqL1xuZXhwb3J0IGRlZmF1bHQgY2xhc3MgRHJvcGJveEZpbGVTeXN0ZW0gZXh0ZW5kcyBCYXNlRmlsZVN5c3RlbSBpbXBsZW1lbnRzIEZpbGVTeXN0ZW0ge1xuXHRwdWJsaWMgc3RhdGljIHJlYWRvbmx5IE5hbWUgPSAnRHJvcGJveFYyJztcblxuXHRwdWJsaWMgc3RhdGljIHJlYWRvbmx5IE9wdGlvbnM6IEZpbGVTeXN0ZW1PcHRpb25zID0ge1xuXHRcdGNsaWVudDoge1xuXHRcdFx0dHlwZTogJ29iamVjdCcsXG5cdFx0XHRkZXNjcmlwdGlvbjogJ0FuICphdXRoZW50aWNhdGVkKiBEcm9wYm94IGNsaWVudC4gTXVzdCBiZSBmcm9tIHRoZSAyLjUueCBKUyBTREsuJyxcblx0XHR9LFxuXHR9O1xuXG5cdC8qKlxuXHQgKiBDcmVhdGVzIGEgbmV3IERyb3Bib3hGaWxlU3lzdGVtIGluc3RhbmNlIHdpdGggdGhlIGdpdmVuIG9wdGlvbnMuXG5cdCAqIE11c3QgYmUgZ2l2ZW4gYW4gKmF1dGhlbnRpY2F0ZWQqIERyb3Bib3ggY2xpZW50IGZyb20gMi54IEpTIFNESy5cblx0ICovXG5cdHB1YmxpYyBzdGF0aWMgQ3JlYXRlKG9wdHM6IERyb3Bib3hGaWxlU3lzdGVtT3B0aW9ucywgY2I6IEJGU0NhbGxiYWNrPERyb3Bib3hGaWxlU3lzdGVtPik6IHZvaWQge1xuXHRcdGNiKG51bGwsIG5ldyBEcm9wYm94RmlsZVN5c3RlbShvcHRzLmNsaWVudCkpO1xuXHR9XG5cblx0LyoqXG5cdCAqIEFzeW5jaHJvbm91c2x5IGNyZWF0ZXMgYSBuZXcgRHJvcGJveEZpbGVTeXN0ZW0gaW5zdGFuY2Ugd2l0aCB0aGUgZ2l2ZW4gb3B0aW9ucy5cblx0ICogTXVzdCBiZSBnaXZlbiBhbiAqYXV0aGVudGljYXRlZCogRHJvcGJveCBjbGllbnQgZnJvbSAyLnggSlMgU0RLLlxuXHQgKi9cblx0cHVibGljIHN0YXRpYyBDcmVhdGVBc3luYyhvcHRzOiBEcm9wYm94RmlsZVN5c3RlbU9wdGlvbnMpOiBQcm9taXNlPERyb3Bib3hGaWxlU3lzdGVtPiB7XG5cdFx0cmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcblx0XHRcdHRoaXMuQ3JlYXRlKG9wdHMsIChlcnJvciwgZnMpID0+IHtcblx0XHRcdFx0aWYgKGVycm9yIHx8ICFmcykge1xuXHRcdFx0XHRcdHJlamVjdChlcnJvcik7XG5cdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0cmVzb2x2ZShmcyk7XG5cdFx0XHRcdH1cblx0XHRcdH0pO1xuXHRcdH0pO1xuXHR9XG5cblx0cHVibGljIHN0YXRpYyBpc0F2YWlsYWJsZSgpOiBib29sZWFuIHtcblx0XHQvLyBDaGVja3MgaWYgdGhlIERyb3Bib3ggbGlicmFyeSBpcyBsb2FkZWQuXG5cdFx0cmV0dXJuIHR5cGVvZiBEcm9wYm94ICE9PSAndW5kZWZpbmVkJztcblx0fVxuXG5cdHByaXZhdGUgX2NsaWVudDogRHJvcGJveFR5cGVzLkRyb3Bib3g7XG5cblx0cHJpdmF0ZSBjb25zdHJ1Y3RvcihjbGllbnQ6IERyb3Bib3hUeXBlcy5Ecm9wYm94KSB7XG5cdFx0c3VwZXIoKTtcblx0XHR0aGlzLl9jbGllbnQgPSBjbGllbnQ7XG5cdH1cblxuXHRwdWJsaWMgZ2V0TmFtZSgpOiBzdHJpbmcge1xuXHRcdHJldHVybiBEcm9wYm94RmlsZVN5c3RlbS5OYW1lO1xuXHR9XG5cblx0cHVibGljIGlzUmVhZE9ubHkoKTogYm9vbGVhbiB7XG5cdFx0cmV0dXJuIGZhbHNlO1xuXHR9XG5cblx0Ly8gRHJvcGJveCBkb2Vzbid0IHN1cHBvcnQgc3ltbGlua3MsIHByb3BlcnRpZXMsIG9yIHN5bmNocm9ub3VzIGNhbGxzXG5cdC8vIFRPRE86IGRvZXMgaXQ/Pz9cblxuXHRwdWJsaWMgc3VwcG9ydHNTeW1saW5rcygpOiBib29sZWFuIHtcblx0XHRyZXR1cm4gZmFsc2U7XG5cdH1cblxuXHRwdWJsaWMgc3VwcG9ydHNQcm9wcygpOiBib29sZWFuIHtcblx0XHRyZXR1cm4gZmFsc2U7XG5cdH1cblxuXHRwdWJsaWMgc3VwcG9ydHNTeW5jaCgpOiBib29sZWFuIHtcblx0XHRyZXR1cm4gZmFsc2U7XG5cdH1cblxuXHQvKipcblx0ICogRGVsZXRlcyAqZXZlcnl0aGluZyogaW4gdGhlIGZpbGUgc3lzdGVtLiBNYWlubHkgaW50ZW5kZWQgZm9yIHVuaXQgdGVzdGluZyFcblx0ICogQHBhcmFtIG1haW5DYiBDYWxsZWQgd2hlbiBvcGVyYXRpb24gY29tcGxldGVzLlxuXHQgKi9cblx0cHVibGljIGVtcHR5KG1haW5DYjogQkZTT25lQXJnQ2FsbGJhY2spOiB2b2lkIHtcblx0XHR0aGlzLnJlYWRkaXIoJy8nLCBDcmVkLlJvb3QsIChlLCBwYXRocz8pID0+IHtcblx0XHRcdGlmIChwYXRocykge1xuXHRcdFx0XHRjb25zdCBuZXh0ID0gKGU/OiBBcGlFcnJvcikgPT4ge1xuXHRcdFx0XHRcdGlmIChwYXRocy5sZW5ndGggPT09IDApIHtcblx0XHRcdFx0XHRcdG1haW5DYigpO1xuXHRcdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0XHRGaWxlc0RlbGV0ZVdyYXBwZWQodGhpcy5fY2xpZW50LCA8c3RyaW5nPnBhdGhzLnNoaWZ0KCksIG5leHQpO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fTtcblx0XHRcdFx0bmV4dCgpO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0bWFpbkNiKGUpO1xuXHRcdFx0fVxuXHRcdH0pO1xuXHR9XG5cblx0cHVibGljIHJlbmFtZShvbGRQYXRoOiBzdHJpbmcsIG5ld1BhdGg6IHN0cmluZywgY3JlZDogQ3JlZCwgY2I6IEJGU09uZUFyZ0NhbGxiYWNrKTogdm9pZCB7XG5cdFx0Ly8gRHJvcGJveCBkb2Vzbid0IGxldCB5b3UgcmVuYW1lIHRoaW5ncyBvdmVyIGV4aXN0aW5nIHRoaW5ncywgYnV0IFBPU0lYIGRvZXMuXG5cdFx0Ly8gU28sIHdlIG5lZWQgdG8gc2VlIGlmIG5ld1BhdGggZXhpc3RzLi4uXG5cdFx0dGhpcy5zdGF0KG5ld1BhdGgsIGZhbHNlLCBjcmVkLCAoZSwgc3RhdHM/KSA9PiB7XG5cdFx0XHRjb25zdCByZW5hbWUgPSAoKSA9PiB7XG5cdFx0XHRcdGNvbnN0IHJlbG9jYXRpb25Bcmc6IERyb3Bib3hUeXBlcy5maWxlcy5SZWxvY2F0aW9uQXJnID0ge1xuXHRcdFx0XHRcdGZyb21fcGF0aDogRml4UGF0aChvbGRQYXRoKSxcblx0XHRcdFx0XHR0b19wYXRoOiBGaXhQYXRoKG5ld1BhdGgpLFxuXHRcdFx0XHR9O1xuXHRcdFx0XHR0aGlzLl9jbGllbnRcblx0XHRcdFx0XHQuZmlsZXNNb3ZlVjIocmVsb2NhdGlvbkFyZylcblx0XHRcdFx0XHQudGhlbigoKSA9PiBjYigpKVxuXHRcdFx0XHRcdC5jYXRjaChmdW5jdGlvbiAoZTogRHJvcGJveFR5cGVzLkVycm9yPERyb3Bib3hUeXBlcy5maWxlcy5SZWxvY2F0aW9uRXJyb3I+KSB7XG5cdFx0XHRcdFx0XHRjb25zdCBlcnIgPSBFeHRyYWN0VGhlRnVja2luZ0Vycm9yKGUpO1xuXHRcdFx0XHRcdFx0c3dpdGNoIChlcnJbJy50YWcnXSkge1xuXHRcdFx0XHRcdFx0XHRjYXNlICdmcm9tX2xvb2t1cCc6XG5cdFx0XHRcdFx0XHRcdFx0Y2IoTG9va3VwRXJyb3JUb0Vycm9yKCg8RHJvcGJveFR5cGVzLmZpbGVzLlJlbG9jYXRpb25FcnJvckZyb21Mb29rdXA+ZXJyKS5mcm9tX2xvb2t1cCwgb2xkUGF0aCwgR2V0RXJyb3JNZXNzYWdlKGUpKSk7XG5cdFx0XHRcdFx0XHRcdFx0YnJlYWs7XG5cdFx0XHRcdFx0XHRcdGNhc2UgJ2Zyb21fd3JpdGUnOlxuXHRcdFx0XHRcdFx0XHRcdGNiKFdyaXRlRXJyb3JUb0Vycm9yKCg8RHJvcGJveFR5cGVzLmZpbGVzLlJlbG9jYXRpb25FcnJvckZyb21Xcml0ZT5lcnIpLmZyb21fd3JpdGUsIG9sZFBhdGgsIEdldEVycm9yTWVzc2FnZShlKSkpO1xuXHRcdFx0XHRcdFx0XHRcdGJyZWFrO1xuXHRcdFx0XHRcdFx0XHRjYXNlICd0byc6XG5cdFx0XHRcdFx0XHRcdFx0Y2IoV3JpdGVFcnJvclRvRXJyb3IoKDxEcm9wYm94VHlwZXMuZmlsZXMuUmVsb2NhdGlvbkVycm9yVG8+ZXJyKS50bywgbmV3UGF0aCwgR2V0RXJyb3JNZXNzYWdlKGUpKSk7XG5cdFx0XHRcdFx0XHRcdFx0YnJlYWs7XG5cdFx0XHRcdFx0XHRcdGNhc2UgJ2NhbnRfY29weV9zaGFyZWRfZm9sZGVyJzpcblx0XHRcdFx0XHRcdFx0Y2FzZSAnY2FudF9uZXN0X3NoYXJlZF9mb2xkZXInOlxuXHRcdFx0XHRcdFx0XHRcdGNiKG5ldyBBcGlFcnJvcihFcnJvckNvZGUuRVBFUk0sIEdldEVycm9yTWVzc2FnZShlKSwgb2xkUGF0aCkpO1xuXHRcdFx0XHRcdFx0XHRcdGJyZWFrO1xuXHRcdFx0XHRcdFx0XHRjYXNlICdjYW50X21vdmVfZm9sZGVyX2ludG9faXRzZWxmJzpcblx0XHRcdFx0XHRcdFx0Y2FzZSAnZHVwbGljYXRlZF9vcl9uZXN0ZWRfcGF0aHMnOlxuXHRcdFx0XHRcdFx0XHRcdGNiKG5ldyBBcGlFcnJvcihFcnJvckNvZGUuRUJBREYsIEdldEVycm9yTWVzc2FnZShlKSwgb2xkUGF0aCkpO1xuXHRcdFx0XHRcdFx0XHRcdGJyZWFrO1xuXHRcdFx0XHRcdFx0XHRjYXNlICd0b29fbWFueV9maWxlcyc6XG5cdFx0XHRcdFx0XHRcdFx0Y2IobmV3IEFwaUVycm9yKEVycm9yQ29kZS5FTk9TUEMsIEdldEVycm9yTWVzc2FnZShlKSwgb2xkUGF0aCkpO1xuXHRcdFx0XHRcdFx0XHRcdGJyZWFrO1xuXHRcdFx0XHRcdFx0XHRjYXNlICdvdGhlcic6XG5cdFx0XHRcdFx0XHRcdGRlZmF1bHQ6XG5cdFx0XHRcdFx0XHRcdFx0Y2IobmV3IEFwaUVycm9yKEVycm9yQ29kZS5FSU8sIEdldEVycm9yTWVzc2FnZShlKSwgb2xkUGF0aCkpO1xuXHRcdFx0XHRcdFx0XHRcdGJyZWFrO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH0pO1xuXHRcdFx0fTtcblx0XHRcdGlmIChlKSB7XG5cdFx0XHRcdC8vIERvZXNuJ3QgZXhpc3QuIFByb2NlZWQhXG5cdFx0XHRcdHJlbmFtZSgpO1xuXHRcdFx0fSBlbHNlIGlmIChvbGRQYXRoID09PSBuZXdQYXRoKSB7XG5cdFx0XHRcdC8vIE5PUCBpZiB0aGUgcGF0aCBleGlzdHMuIEVycm9yIGlmIGl0IGRvZXNuJ3QgZXhpc3QuXG5cdFx0XHRcdGlmIChlKSB7XG5cdFx0XHRcdFx0Y2IoQXBpRXJyb3IuRU5PRU5UKG5ld1BhdGgpKTtcblx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRjYigpO1xuXHRcdFx0XHR9XG5cdFx0XHR9IGVsc2UgaWYgKHN0YXRzICYmIHN0YXRzLmlzRGlyZWN0b3J5KCkpIHtcblx0XHRcdFx0Ly8gRXhpc3RzLCBpcyBhIGRpcmVjdG9yeS4gQ2Fubm90IHJlbmFtZSBvdmVyIGFuIGV4aXN0aW5nIGRpcmVjdG9yeS5cblx0XHRcdFx0Y2IoQXBpRXJyb3IuRUlTRElSKG5ld1BhdGgpKTtcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdC8vIEV4aXN0cywgaXMgYSBmaWxlLCBhbmQgZGlmZmVycyBmcm9tIG9sZFBhdGguIERlbGV0ZSBhbmQgcmVuYW1lLlxuXHRcdFx0XHR0aGlzLnVubGluayhuZXdQYXRoLCBjcmVkLCBlID0+IHtcblx0XHRcdFx0XHRpZiAoZSkge1xuXHRcdFx0XHRcdFx0Y2IoZSk7XG5cdFx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRcdHJlbmFtZSgpO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fSk7XG5cdFx0XHR9XG5cdFx0fSk7XG5cdH1cblxuXHRwdWJsaWMgc3RhdChwYXRoOiBzdHJpbmcsIGlzTHN0YXQ6IGJvb2xlYW4sIGNyZWQ6IENyZWQsIGNiOiBCRlNDYWxsYmFjazxTdGF0cz4pOiB2b2lkIHtcblx0XHRpZiAocGF0aCA9PT0gJy8nKSB7XG5cdFx0XHQvLyBEcm9wYm94IGRvZXNuJ3Qgc3VwcG9ydCBxdWVyeWluZyB0aGUgcm9vdCBkaXJlY3RvcnkuXG5cdFx0XHRzZXRJbW1lZGlhdGUoZnVuY3Rpb24gKCkge1xuXHRcdFx0XHRjYihudWxsLCBuZXcgU3RhdHMoRmlsZVR5cGUuRElSRUNUT1JZLCA0MDk2KSk7XG5cdFx0XHR9KTtcblx0XHRcdHJldHVybjtcblx0XHR9XG5cdFx0Y29uc3QgYXJnOiBEcm9wYm94VHlwZXMuZmlsZXMuR2V0TWV0YWRhdGFBcmcgPSB7XG5cdFx0XHRwYXRoOiBGaXhQYXRoKHBhdGgpLFxuXHRcdH07XG5cdFx0dGhpcy5fY2xpZW50XG5cdFx0XHQuZmlsZXNHZXRNZXRhZGF0YShhcmcpXG5cdFx0XHQudGhlbihyZWYgPT4ge1xuXHRcdFx0XHRzd2l0Y2ggKHJlZlsnLnRhZyddKSB7XG5cdFx0XHRcdFx0Y2FzZSAnZmlsZSc6XG5cdFx0XHRcdFx0XHRjb25zdCBmaWxlTWV0YWRhdGEgPSA8RHJvcGJveFR5cGVzLmZpbGVzLkZpbGVNZXRhZGF0YT5yZWY7XG5cdFx0XHRcdFx0XHQvLyBUT0RPOiBQYXJzZSB0aW1lIGZpZWxkcy5cblx0XHRcdFx0XHRcdGNiKG51bGwsIG5ldyBTdGF0cyhGaWxlVHlwZS5GSUxFLCBmaWxlTWV0YWRhdGEuc2l6ZSkpO1xuXHRcdFx0XHRcdFx0YnJlYWs7XG5cdFx0XHRcdFx0Y2FzZSAnZm9sZGVyJzpcblx0XHRcdFx0XHRcdGNiKG51bGwsIG5ldyBTdGF0cyhGaWxlVHlwZS5ESVJFQ1RPUlksIDQwOTYpKTtcblx0XHRcdFx0XHRcdGJyZWFrO1xuXHRcdFx0XHRcdGNhc2UgJ2RlbGV0ZWQnOlxuXHRcdFx0XHRcdFx0Y2IoQXBpRXJyb3IuRU5PRU5UKHBhdGgpKTtcblx0XHRcdFx0XHRcdGJyZWFrO1xuXHRcdFx0XHRcdGRlZmF1bHQ6XG5cdFx0XHRcdFx0XHQvLyBVbmtub3duLlxuXHRcdFx0XHRcdFx0YnJlYWs7XG5cdFx0XHRcdH1cblx0XHRcdH0pXG5cdFx0XHQuY2F0Y2goKGU6IERyb3Bib3hUeXBlcy5FcnJvcjxEcm9wYm94VHlwZXMuZmlsZXMuR2V0TWV0YWRhdGFFcnJvcj4pID0+IHtcblx0XHRcdFx0Y29uc3QgZXJyID0gRXh0cmFjdFRoZUZ1Y2tpbmdFcnJvcihlKTtcblx0XHRcdFx0c3dpdGNoIChlcnJbJy50YWcnXSkge1xuXHRcdFx0XHRcdGNhc2UgJ3BhdGgnOlxuXHRcdFx0XHRcdFx0Y2IoTG9va3VwRXJyb3JUb0Vycm9yKGVyci5wYXRoLCBwYXRoLCBHZXRFcnJvck1lc3NhZ2UoZSkpKTtcblx0XHRcdFx0XHRcdGJyZWFrO1xuXHRcdFx0XHRcdGRlZmF1bHQ6XG5cdFx0XHRcdFx0XHRjYihuZXcgQXBpRXJyb3IoRXJyb3JDb2RlLkVJTywgR2V0RXJyb3JNZXNzYWdlKGUpLCBwYXRoKSk7XG5cdFx0XHRcdFx0XHRicmVhaztcblx0XHRcdFx0fVxuXHRcdFx0fSk7XG5cdH1cblxuXHRwdWJsaWMgb3BlbkZpbGUocGF0aDogc3RyaW5nLCBmbGFnczogRmlsZUZsYWcsIGNyZWQ6IENyZWQsIGNiOiBCRlNDYWxsYmFjazxGaWxlPik6IHZvaWQge1xuXHRcdGNvbnN0IGRvd25sb2FkQXJnOiBEcm9wYm94VHlwZXMuZmlsZXMuRG93bmxvYWRBcmcgPSB7XG5cdFx0XHRwYXRoOiBGaXhQYXRoKHBhdGgpLFxuXHRcdH07XG5cdFx0dGhpcy5fY2xpZW50XG5cdFx0XHQuZmlsZXNEb3dubG9hZChkb3dubG9hZEFyZylcblx0XHRcdC50aGVuKHJlcyA9PiB7XG5cdFx0XHRcdGNvbnN0IGI6IEJsb2IgPSAoPGFueT5yZXMpLmZpbGVCbG9iO1xuXHRcdFx0XHRjb25zdCBmciA9IG5ldyBGaWxlUmVhZGVyKCk7XG5cdFx0XHRcdGZyLm9ubG9hZCA9ICgpID0+IHtcblx0XHRcdFx0XHRjb25zdCBhYiA9IGZyLnJlc3VsdCBhcyBBcnJheUJ1ZmZlcjtcblx0XHRcdFx0XHRjYihudWxsLCBuZXcgRHJvcGJveEZpbGUodGhpcywgcGF0aCwgZmxhZ3MsIG5ldyBTdGF0cyhGaWxlVHlwZS5GSUxFLCBhYi5ieXRlTGVuZ3RoKSwgYXJyYXlCdWZmZXIyQnVmZmVyKGFiKSkpO1xuXHRcdFx0XHR9O1xuXHRcdFx0XHRmci5yZWFkQXNBcnJheUJ1ZmZlcihiKTtcblx0XHRcdH0pXG5cdFx0XHQuY2F0Y2goKGU6IERyb3Bib3hUeXBlcy5FcnJvcjxEcm9wYm94VHlwZXMuZmlsZXMuRG93bmxvYWRFcnJvcj4pID0+IHtcblx0XHRcdFx0Y29uc3QgZXJyID0gRXh0cmFjdFRoZUZ1Y2tpbmdFcnJvcihlKTtcblx0XHRcdFx0c3dpdGNoIChlcnJbJy50YWcnXSkge1xuXHRcdFx0XHRcdGNhc2UgJ3BhdGgnOlxuXHRcdFx0XHRcdFx0Y29uc3QgZHBFcnJvciA9IDxEcm9wYm94VHlwZXMuZmlsZXMuRG93bmxvYWRFcnJvclBhdGg+ZXJyO1xuXHRcdFx0XHRcdFx0Y2IoTG9va3VwRXJyb3JUb0Vycm9yKGRwRXJyb3IucGF0aCwgcGF0aCwgR2V0RXJyb3JNZXNzYWdlKGUpKSk7XG5cdFx0XHRcdFx0XHRicmVhaztcblx0XHRcdFx0XHRjYXNlICdvdGhlcic6XG5cdFx0XHRcdFx0ZGVmYXVsdDpcblx0XHRcdFx0XHRcdGNiKG5ldyBBcGlFcnJvcihFcnJvckNvZGUuRUlPLCBHZXRFcnJvck1lc3NhZ2UoZSksIHBhdGgpKTtcblx0XHRcdFx0XHRcdGJyZWFrO1xuXHRcdFx0XHR9XG5cdFx0XHR9KTtcblx0fVxuXG5cdHB1YmxpYyBjcmVhdGVGaWxlKHA6IHN0cmluZywgZmxhZ3M6IEZpbGVGbGFnLCBtb2RlOiBudW1iZXIsIGNyZWQ6IENyZWQsIGNiOiBCRlNDYWxsYmFjazxGaWxlPik6IHZvaWQge1xuXHRcdGNvbnN0IGZpbGVEYXRhID0gQnVmZmVyLmFsbG9jKDApO1xuXHRcdGNvbnN0IGJsb2IgPSBuZXcgQmxvYihbYnVmZmVyMkFycmF5QnVmZmVyKGZpbGVEYXRhKSBhcyBBcnJheUJ1ZmZlcl0sIHsgdHlwZTogJ29jdGV0L3N0cmVhbScgfSk7XG5cdFx0Y29uc3QgY29tbWl0SW5mbzogRHJvcGJveFR5cGVzLmZpbGVzLkNvbW1pdEluZm8gPSB7XG5cdFx0XHRjb250ZW50czogYmxvYixcblx0XHRcdHBhdGg6IEZpeFBhdGgocCksXG5cdFx0fTtcblx0XHR0aGlzLl9jbGllbnRcblx0XHRcdC5maWxlc1VwbG9hZChjb21taXRJbmZvKVxuXHRcdFx0LnRoZW4obWV0YWRhdGEgPT4ge1xuXHRcdFx0XHRjYihudWxsLCBuZXcgRHJvcGJveEZpbGUodGhpcywgcCwgZmxhZ3MsIG5ldyBTdGF0cyhGaWxlVHlwZS5GSUxFLCAwKSwgZmlsZURhdGEpKTtcblx0XHRcdH0pXG5cdFx0XHQuY2F0Y2goKGU6IERyb3Bib3hUeXBlcy5FcnJvcjxEcm9wYm94VHlwZXMuZmlsZXMuVXBsb2FkRXJyb3I+KSA9PiB7XG5cdFx0XHRcdGNvbnN0IGVyciA9IEV4dHJhY3RUaGVGdWNraW5nRXJyb3IoZSk7XG5cdFx0XHRcdC8vIEhBQ0s6IENhc3RpbmcgdG8gJ2FueScgc2luY2UgdGFnIGNhbiBiZSAndG9vX21hbnlfd3JpdGVfb3BlcmF0aW9ucycuXG5cdFx0XHRcdHN3aXRjaCAoPHN0cmluZz5lcnJbJy50YWcnXSkge1xuXHRcdFx0XHRcdGNhc2UgJ3BhdGgnOlxuXHRcdFx0XHRcdFx0Y29uc3QgdXBFcnJvciA9IDxEcm9wYm94VHlwZXMuZmlsZXMuVXBsb2FkRXJyb3JQYXRoPmVycjtcblx0XHRcdFx0XHRcdGNiKFdyaXRlRXJyb3JUb0Vycm9yKCh1cEVycm9yIGFzIGFueSkucGF0aC5yZWFzb24sIHAsIEdldEVycm9yTWVzc2FnZShlKSkpO1xuXHRcdFx0XHRcdFx0YnJlYWs7XG5cdFx0XHRcdFx0Y2FzZSAndG9vX21hbnlfd3JpdGVfb3BlcmF0aW9ucyc6XG5cdFx0XHRcdFx0XHQvLyBSZXRyeSBpbiAoNTAwLCA4MDApIG1zLlxuXHRcdFx0XHRcdFx0c2V0VGltZW91dCgoKSA9PiB0aGlzLmNyZWF0ZUZpbGUocCwgZmxhZ3MsIG1vZGUsIGNyZWQsIGNiKSwgNTAwICsgMzAwICogTWF0aC5yYW5kb20oKSk7XG5cdFx0XHRcdFx0XHRicmVhaztcblx0XHRcdFx0XHRjYXNlICdvdGhlcic6XG5cdFx0XHRcdFx0ZGVmYXVsdDpcblx0XHRcdFx0XHRcdGNiKG5ldyBBcGlFcnJvcihFcnJvckNvZGUuRUlPLCBHZXRFcnJvck1lc3NhZ2UoZSksIHApKTtcblx0XHRcdFx0XHRcdGJyZWFrO1xuXHRcdFx0XHR9XG5cdFx0XHR9KTtcblx0fVxuXG5cdC8qKlxuXHQgKiBEZWxldGUgYSBmaWxlXG5cdCAqL1xuXHRwdWJsaWMgdW5saW5rKHBhdGg6IHN0cmluZywgY3JlZDogQ3JlZCwgY2I6IEJGU09uZUFyZ0NhbGxiYWNrKTogdm9pZCB7XG5cdFx0Ly8gTXVzdCBiZSBhIGZpbGUuIENoZWNrIGZpcnN0LlxuXHRcdHRoaXMuc3RhdChwYXRoLCBmYWxzZSwgY3JlZCwgKGUsIHN0YXQpID0+IHtcblx0XHRcdGlmIChzdGF0KSB7XG5cdFx0XHRcdGlmIChzdGF0LmlzRGlyZWN0b3J5KCkpIHtcblx0XHRcdFx0XHRjYihBcGlFcnJvci5FSVNESVIocGF0aCkpO1xuXHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdEZpbGVzRGVsZXRlV3JhcHBlZCh0aGlzLl9jbGllbnQsIHBhdGgsIGNiKTtcblx0XHRcdFx0fVxuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0Y2IoZSk7XG5cdFx0XHR9XG5cdFx0fSk7XG5cdH1cblxuXHQvKipcblx0ICogRGVsZXRlIGEgZGlyZWN0b3J5XG5cdCAqL1xuXHRwdWJsaWMgcm1kaXIocGF0aDogc3RyaW5nLCBjcmVkOiBDcmVkLCBjYjogQkZTT25lQXJnQ2FsbGJhY2spOiB2b2lkIHtcblx0XHR0aGlzLnJlYWRkaXIocGF0aCwgY3JlZCwgKGUsIHBhdGhzKSA9PiB7XG5cdFx0XHRpZiAocGF0aHMpIHtcblx0XHRcdFx0aWYgKHBhdGhzLmxlbmd0aCA+IDApIHtcblx0XHRcdFx0XHRjYihBcGlFcnJvci5FTk9URU1QVFkocGF0aCkpO1xuXHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdEZpbGVzRGVsZXRlV3JhcHBlZCh0aGlzLl9jbGllbnQsIHBhdGgsIGNiKTtcblx0XHRcdFx0fVxuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0Y2IoZSk7XG5cdFx0XHR9XG5cdFx0fSk7XG5cdH1cblxuXHQvKipcblx0ICogQ3JlYXRlIGEgZGlyZWN0b3J5XG5cdCAqL1xuXHRwdWJsaWMgbWtkaXIocDogc3RyaW5nLCBtb2RlOiBudW1iZXIsIGNyZWQ6IENyZWQsIGNiOiBCRlNPbmVBcmdDYWxsYmFjayk6IHZvaWQge1xuXHRcdC8vIERyb3Bib3gncyBjcmVhdGVfZm9sZGVyIGlzIHJlY3Vyc2l2ZS4gQ2hlY2sgaWYgcGFyZW50IGV4aXN0cy5cblx0XHRjb25zdCBwYXJlbnQgPSBkaXJuYW1lKHApO1xuXHRcdHRoaXMuc3RhdChwYXJlbnQsIGZhbHNlLCBjcmVkLCAoZSwgc3RhdHM/KSA9PiB7XG5cdFx0XHRpZiAoZSkge1xuXHRcdFx0XHRjYihlKTtcblx0XHRcdH0gZWxzZSBpZiAoc3RhdHMgJiYgIXN0YXRzLmlzRGlyZWN0b3J5KCkpIHtcblx0XHRcdFx0Y2IoQXBpRXJyb3IuRU5PVERJUihwYXJlbnQpKTtcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdGNvbnN0IGFyZzogRHJvcGJveFR5cGVzLmZpbGVzLkNyZWF0ZUZvbGRlckFyZyA9IHtcblx0XHRcdFx0XHRwYXRoOiBGaXhQYXRoKHApLFxuXHRcdFx0XHR9O1xuXHRcdFx0XHR0aGlzLl9jbGllbnRcblx0XHRcdFx0XHQuZmlsZXNDcmVhdGVGb2xkZXJWMihhcmcpXG5cdFx0XHRcdFx0LnRoZW4oKCkgPT4gY2IoKSlcblx0XHRcdFx0XHQuY2F0Y2goKGU6IERyb3Bib3hUeXBlcy5FcnJvcjxEcm9wYm94VHlwZXMuZmlsZXMuQ3JlYXRlRm9sZGVyRXJyb3I+KSA9PiB7XG5cdFx0XHRcdFx0XHRjb25zdCBlcnIgPSBFeHRyYWN0VGhlRnVja2luZ0Vycm9yKGUpO1xuXHRcdFx0XHRcdFx0aWYgKDxzdHJpbmc+ZXJyWycudGFnJ10gPT09ICd0b29fbWFueV93cml0ZV9vcGVyYXRpb25zJykge1xuXHRcdFx0XHRcdFx0XHQvLyBSZXRyeSBpbiBhIGJpdC5cblx0XHRcdFx0XHRcdFx0c2V0VGltZW91dCgoKSA9PiB0aGlzLm1rZGlyKHAsIG1vZGUsIGNyZWQsIGNiKSwgNTAwICsgMzAwICogTWF0aC5yYW5kb20oKSk7XG5cdFx0XHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdFx0XHRjYihXcml0ZUVycm9yVG9FcnJvcihFeHRyYWN0VGhlRnVja2luZ0Vycm9yKGUpLnBhdGgsIHAsIEdldEVycm9yTWVzc2FnZShlKSkpO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH0pO1xuXHRcdFx0fVxuXHRcdH0pO1xuXHR9XG5cblx0LyoqXG5cdCAqIEdldCB0aGUgbmFtZXMgb2YgdGhlIGZpbGVzIGluIGEgZGlyZWN0b3J5XG5cdCAqL1xuXHRwdWJsaWMgcmVhZGRpcihwYXRoOiBzdHJpbmcsIGNyZWQ6IENyZWQsIGNiOiBCRlNDYWxsYmFjazxzdHJpbmdbXT4pOiB2b2lkIHtcblx0XHRjb25zdCBhcmc6IERyb3Bib3hUeXBlcy5maWxlcy5MaXN0Rm9sZGVyQXJnID0ge1xuXHRcdFx0cGF0aDogRml4UGF0aChwYXRoKSxcblx0XHR9O1xuXHRcdHRoaXMuX2NsaWVudFxuXHRcdFx0LmZpbGVzTGlzdEZvbGRlcihhcmcpXG5cdFx0XHQudGhlbihyZXMgPT4ge1xuXHRcdFx0XHRDb250aW51ZVJlYWRpbmdEaXIodGhpcy5fY2xpZW50LCBwYXRoLCByZXMsIFtdLCBjYik7XG5cdFx0XHR9KVxuXHRcdFx0LmNhdGNoKChlOiBEcm9wYm94VHlwZXMuRXJyb3I8RHJvcGJveFR5cGVzLmZpbGVzLkxpc3RGb2xkZXJFcnJvcj4pID0+IHtcblx0XHRcdFx0UHJvY2Vzc0xpc3RGb2xkZXJFcnJvcihlLCBwYXRoLCBjYik7XG5cdFx0XHR9KTtcblx0fVxuXG5cdC8qKlxuXHQgKiAoSW50ZXJuYWwpIFN5bmNzIGZpbGUgdG8gRHJvcGJveC5cblx0ICovXG5cdHB1YmxpYyBfc3luY0ZpbGUocDogc3RyaW5nLCBkOiBCdWZmZXIsIGNiOiBCRlNPbmVBcmdDYWxsYmFjayk6IHZvaWQge1xuXHRcdGNvbnN0IGJsb2IgPSBuZXcgQmxvYihbYnVmZmVyMkFycmF5QnVmZmVyKGQpIGFzIEFycmF5QnVmZmVyXSwgeyB0eXBlOiAnb2N0ZXQvc3RyZWFtJyB9KTtcblx0XHRjb25zdCBhcmc6IERyb3Bib3hUeXBlcy5maWxlcy5Db21taXRJbmZvID0ge1xuXHRcdFx0Y29udGVudHM6IGJsb2IsXG5cdFx0XHRwYXRoOiBGaXhQYXRoKHApLFxuXHRcdFx0bW9kZToge1xuXHRcdFx0XHQnLnRhZyc6ICdvdmVyd3JpdGUnLFxuXHRcdFx0fSxcblx0XHR9O1xuXHRcdHRoaXMuX2NsaWVudFxuXHRcdFx0LmZpbGVzVXBsb2FkKGFyZylcblx0XHRcdC50aGVuKCgpID0+IHtcblx0XHRcdFx0Y2IoKTtcblx0XHRcdH0pXG5cdFx0XHQuY2F0Y2goKGU6IERyb3Bib3hUeXBlcy5FcnJvcjxEcm9wYm94VHlwZXMuZmlsZXMuVXBsb2FkRXJyb3I+KSA9PiB7XG5cdFx0XHRcdGNvbnN0IGVyciA9IEV4dHJhY3RUaGVGdWNraW5nRXJyb3IoZSk7XG5cdFx0XHRcdHN3aXRjaCAoPHN0cmluZz5lcnJbJy50YWcnXSkge1xuXHRcdFx0XHRcdGNhc2UgJ3BhdGgnOlxuXHRcdFx0XHRcdFx0Y29uc3QgdXBFcnJvciA9IDxEcm9wYm94VHlwZXMuZmlsZXMuVXBsb2FkRXJyb3JQYXRoPmVycjtcblx0XHRcdFx0XHRcdGNiKFdyaXRlRXJyb3JUb0Vycm9yKCh1cEVycm9yIGFzIGFueSkucGF0aC5yZWFzb24sIHAsIEdldEVycm9yTWVzc2FnZShlKSkpO1xuXHRcdFx0XHRcdFx0YnJlYWs7XG5cdFx0XHRcdFx0Y2FzZSAndG9vX21hbnlfd3JpdGVfb3BlcmF0aW9ucyc6XG5cdFx0XHRcdFx0XHRzZXRUaW1lb3V0KCgpID0+IHRoaXMuX3N5bmNGaWxlKHAsIGQsIGNiKSwgNTAwICsgMzAwICogTWF0aC5yYW5kb20oKSk7XG5cdFx0XHRcdFx0XHRicmVhaztcblx0XHRcdFx0XHRjYXNlICdvdGhlcic6XG5cdFx0XHRcdFx0ZGVmYXVsdDpcblx0XHRcdFx0XHRcdGNiKG5ldyBBcGlFcnJvcihFcnJvckNvZGUuRUlPLCBHZXRFcnJvck1lc3NhZ2UoZSksIHApKTtcblx0XHRcdFx0XHRcdGJyZWFrO1xuXHRcdFx0XHR9XG5cdFx0XHR9KTtcblx0fVxufVxuXG5mdW5jdGlvbiBQcm9jZXNzTGlzdEZvbGRlckVycm9yKGU6IERyb3Bib3hUeXBlcy5FcnJvcjxEcm9wYm94VHlwZXMuZmlsZXMuTGlzdEZvbGRlckVycm9yPiwgcGF0aDogc3RyaW5nLCBjYjogQkZTQ2FsbGJhY2s8c3RyaW5nW10+KTogdm9pZCB7XG5cdGNvbnN0IGVyciA9IEV4dHJhY3RUaGVGdWNraW5nRXJyb3IoZSk7XG5cdHN3aXRjaCAoZXJyWycudGFnJ10pIHtcblx0XHRjYXNlICdwYXRoJzpcblx0XHRcdGNvbnN0IHBhdGhFcnJvciA9IDxEcm9wYm94VHlwZXMuZmlsZXMuTGlzdEZvbGRlckVycm9yUGF0aD5lcnI7XG5cdFx0XHRjYihMb29rdXBFcnJvclRvRXJyb3IocGF0aEVycm9yLnBhdGgsIHBhdGgsIEdldEVycm9yTWVzc2FnZShlKSkpO1xuXHRcdFx0YnJlYWs7XG5cdFx0Y2FzZSAnb3RoZXInOlxuXHRcdGRlZmF1bHQ6XG5cdFx0XHRjYihuZXcgQXBpRXJyb3IoRXJyb3JDb2RlLkVJTywgR2V0RXJyb3JNZXNzYWdlKGUpLCBwYXRoKSk7XG5cdFx0XHRicmVhaztcblx0fVxufVxuXG5mdW5jdGlvbiBDb250aW51ZVJlYWRpbmdEaXIoY2xpZW50OiBEcm9wYm94Q2xpZW50LCBwYXRoOiBzdHJpbmcsIHJlczogRHJvcGJveFR5cGVzLmZpbGVzLkxpc3RGb2xkZXJSZXN1bHQsIHByZXZpb3VzRW50cmllczogc3RyaW5nW10sIGNiOiBCRlNDYWxsYmFjazxzdHJpbmdbXT4pOiB2b2lkIHtcblx0Y29uc3QgbmV3RW50cmllcyA9IDxzdHJpbmdbXT5yZXMuZW50cmllcy5tYXAoZSA9PiBlLnBhdGhfZGlzcGxheSkuZmlsdGVyKHAgPT4gISFwKTtcblx0Y29uc3QgZW50cmllcyA9IHByZXZpb3VzRW50cmllcy5jb25jYXQobmV3RW50cmllcyk7XG5cdGlmICghcmVzLmhhc19tb3JlKSB7XG5cdFx0Y2IobnVsbCwgZW50cmllcyk7XG5cdH0gZWxzZSB7XG5cdFx0Y29uc3QgYXJnOiBEcm9wYm94VHlwZXMuZmlsZXMuTGlzdEZvbGRlckNvbnRpbnVlQXJnID0ge1xuXHRcdFx0Y3Vyc29yOiByZXMuY3Vyc29yLFxuXHRcdH07XG5cdFx0Y2xpZW50XG5cdFx0XHQuZmlsZXNMaXN0Rm9sZGVyQ29udGludWUoYXJnKVxuXHRcdFx0LnRoZW4ocmVzID0+IHtcblx0XHRcdFx0Q29udGludWVSZWFkaW5nRGlyKGNsaWVudCwgcGF0aCwgcmVzLCBlbnRyaWVzLCBjYik7XG5cdFx0XHR9KVxuXHRcdFx0LmNhdGNoKChlOiBEcm9wYm94VHlwZXMuRXJyb3I8RHJvcGJveFR5cGVzLmZpbGVzLkxpc3RGb2xkZXJFcnJvcj4pID0+IHtcblx0XHRcdFx0UHJvY2Vzc0xpc3RGb2xkZXJFcnJvcihlLCBwYXRoLCBjYik7XG5cdFx0XHR9KTtcblx0fVxufVxuIiwgImltcG9ydCB7IFN5bmNocm9ub3VzRmlsZVN5c3RlbSwgQkZTT25lQXJnQ2FsbGJhY2ssIEJGU0NhbGxiYWNrLCBCRlNUaHJlZUFyZ0NhbGxiYWNrLCBGaWxlU3lzdGVtT3B0aW9ucyB9IGZyb20gJy4uL2NvcmUvZmlsZV9zeXN0ZW0nO1xuaW1wb3J0IHsgZGVmYXVsdCBhcyBTdGF0cywgRmlsZVR5cGUgfSBmcm9tICcuLi9jb3JlL3N0YXRzJztcbmltcG9ydCB7IEZpbGVGbGFnIH0gZnJvbSAnLi4vY29yZS9maWxlX2ZsYWcnO1xuaW1wb3J0IHsgQmFzZUZpbGUsIEZpbGUgfSBmcm9tICcuLi9jb3JlL2ZpbGUnO1xuaW1wb3J0IHsgdWludDhBcnJheTJCdWZmZXIsIGJ1ZmZlcjJVaW50OGFycmF5IH0gZnJvbSAnLi4vY29yZS91dGlsJztcbmltcG9ydCB7IEFwaUVycm9yLCBFcnJvckNvZGUsIEVycm9yU3RyaW5ncyB9IGZyb20gJy4uL2NvcmUvYXBpX2Vycm9yJztcbmltcG9ydCB7IEVtc2NyaXB0ZW5GU05vZGUgfSBmcm9tICcuLi9nZW5lcmljL2Vtc2NyaXB0ZW5fZnMnO1xuaW1wb3J0IENyZWQgZnJvbSAnLi4vY29yZS9jcmVkJztcbmltcG9ydCB7IEJ1ZmZlciB9IGZyb20gJ2J1ZmZlcic7XG4vKipcbiAqIEBoaWRkZW5cbiAqL1xuaW50ZXJmYWNlIEVtc2NyaXB0ZW5FcnJvciB7XG5cdG5vZGU6IEVtc2NyaXB0ZW5GU05vZGU7XG5cdGVycm5vOiBudW1iZXI7XG59XG5cbi8qKlxuICogQGhpZGRlblxuICovXG5mdW5jdGlvbiBjb252ZXJ0RXJyb3IoZTogRW1zY3JpcHRlbkVycm9yLCBwYXRoOiBzdHJpbmcgPSAnJyk6IEFwaUVycm9yIHtcblx0Y29uc3QgZXJybm8gPSBlLmVycm5vO1xuXHRsZXQgcGFyZW50ID0gZS5ub2RlO1xuXHRjb25zdCBwYXRoczogc3RyaW5nW10gPSBbXTtcblx0d2hpbGUgKHBhcmVudCkge1xuXHRcdHBhdGhzLnVuc2hpZnQocGFyZW50Lm5hbWUpO1xuXHRcdGlmIChwYXJlbnQgPT09IHBhcmVudC5wYXJlbnQpIHtcblx0XHRcdGJyZWFrO1xuXHRcdH1cblx0XHRwYXJlbnQgPSBwYXJlbnQucGFyZW50O1xuXHR9XG5cdHJldHVybiBuZXcgQXBpRXJyb3IoZXJybm8sIEVycm9yU3RyaW5nc1tlcnJub10sIHBhdGhzLmxlbmd0aCA+IDAgPyAnLycgKyBwYXRocy5qb2luKCcvJykgOiBwYXRoKTtcbn1cblxuZXhwb3J0IGNsYXNzIEVtc2NyaXB0ZW5GaWxlIGV4dGVuZHMgQmFzZUZpbGUgaW1wbGVtZW50cyBGaWxlIHtcblx0Y29uc3RydWN0b3IocHJpdmF0ZSBfZnM6IEVtc2NyaXB0ZW5GaWxlU3lzdGVtLCBwcml2YXRlIF9GUzogYW55LCBwcml2YXRlIF9wYXRoOiBzdHJpbmcsIHByaXZhdGUgX3N0cmVhbTogYW55KSB7XG5cdFx0c3VwZXIoKTtcblx0fVxuXHRwdWJsaWMgZ2V0UG9zKCk6IG51bWJlciB8IHVuZGVmaW5lZCB7XG5cdFx0cmV0dXJuIHVuZGVmaW5lZDtcblx0fVxuXHRwdWJsaWMgY2xvc2UoY2I6IEJGU09uZUFyZ0NhbGxiYWNrKTogdm9pZCB7XG5cdFx0bGV0IGVycjogQXBpRXJyb3IgfCBudWxsID0gbnVsbDtcblx0XHR0cnkge1xuXHRcdFx0dGhpcy5jbG9zZVN5bmMoKTtcblx0XHR9IGNhdGNoIChlKSB7XG5cdFx0XHRlcnIgPSBlO1xuXHRcdH0gZmluYWxseSB7XG5cdFx0XHRjYihlcnIpO1xuXHRcdH1cblx0fVxuXHRwdWJsaWMgY2xvc2VTeW5jKCk6IHZvaWQge1xuXHRcdHRyeSB7XG5cdFx0XHR0aGlzLl9GUy5jbG9zZSh0aGlzLl9zdHJlYW0pO1xuXHRcdH0gY2F0Y2ggKGUpIHtcblx0XHRcdHRocm93IGNvbnZlcnRFcnJvcihlLCB0aGlzLl9wYXRoKTtcblx0XHR9XG5cdH1cblx0cHVibGljIHN0YXQoY2I6IEJGU0NhbGxiYWNrPFN0YXRzPik6IHZvaWQge1xuXHRcdHRyeSB7XG5cdFx0XHRjYihudWxsLCB0aGlzLnN0YXRTeW5jKCkpO1xuXHRcdH0gY2F0Y2ggKGUpIHtcblx0XHRcdGNiKGUpO1xuXHRcdH1cblx0fVxuXHRwdWJsaWMgc3RhdFN5bmMoKTogU3RhdHMge1xuXHRcdHRyeSB7XG5cdFx0XHRyZXR1cm4gdGhpcy5fZnMuc3RhdFN5bmModGhpcy5fcGF0aCwgZmFsc2UsIENyZWQuUm9vdCk7XG5cdFx0fSBjYXRjaCAoZSkge1xuXHRcdFx0dGhyb3cgY29udmVydEVycm9yKGUsIHRoaXMuX3BhdGgpO1xuXHRcdH1cblx0fVxuXHRwdWJsaWMgdHJ1bmNhdGUobGVuOiBudW1iZXIsIGNiOiBCRlNPbmVBcmdDYWxsYmFjayk6IHZvaWQge1xuXHRcdGxldCBlcnI6IEFwaUVycm9yIHwgbnVsbCA9IG51bGw7XG5cdFx0dHJ5IHtcblx0XHRcdHRoaXMudHJ1bmNhdGVTeW5jKGxlbik7XG5cdFx0fSBjYXRjaCAoZSkge1xuXHRcdFx0ZXJyID0gZTtcblx0XHR9IGZpbmFsbHkge1xuXHRcdFx0Y2IoZXJyKTtcblx0XHR9XG5cdH1cblx0cHVibGljIHRydW5jYXRlU3luYyhsZW46IG51bWJlcik6IHZvaWQge1xuXHRcdHRyeSB7XG5cdFx0XHR0aGlzLl9GUy5mdHJ1bmNhdGUodGhpcy5fc3RyZWFtLmZkLCBsZW4pO1xuXHRcdH0gY2F0Y2ggKGUpIHtcblx0XHRcdHRocm93IGNvbnZlcnRFcnJvcihlLCB0aGlzLl9wYXRoKTtcblx0XHR9XG5cdH1cblx0cHVibGljIHdyaXRlKGJ1ZmZlcjogQnVmZmVyLCBvZmZzZXQ6IG51bWJlciwgbGVuZ3RoOiBudW1iZXIsIHBvc2l0aW9uOiBudW1iZXIsIGNiOiBCRlNUaHJlZUFyZ0NhbGxiYWNrPG51bWJlciwgQnVmZmVyPik6IHZvaWQge1xuXHRcdHRyeSB7XG5cdFx0XHRjYihudWxsLCB0aGlzLndyaXRlU3luYyhidWZmZXIsIG9mZnNldCwgbGVuZ3RoLCBwb3NpdGlvbiksIGJ1ZmZlcik7XG5cdFx0fSBjYXRjaCAoZSkge1xuXHRcdFx0Y2IoZSk7XG5cdFx0fVxuXHR9XG5cdHB1YmxpYyB3cml0ZVN5bmMoYnVmZmVyOiBCdWZmZXIsIG9mZnNldDogbnVtYmVyLCBsZW5ndGg6IG51bWJlciwgcG9zaXRpb246IG51bWJlciB8IG51bGwpOiBudW1iZXIge1xuXHRcdHRyeSB7XG5cdFx0XHRjb25zdCB1OCA9IGJ1ZmZlcjJVaW50OGFycmF5KGJ1ZmZlcik7XG5cdFx0XHQvLyBFbXNjcmlwdGVuIGlzIHBhcnRpY3VsYXIgYWJvdXQgd2hhdCBwb3NpdGlvbiBpcyBzZXQgdG8uXG5cdFx0XHRjb25zdCBlbVBvc2l0aW9uID0gcG9zaXRpb24gPT09IG51bGwgPyB1bmRlZmluZWQgOiBwb3NpdGlvbjtcblx0XHRcdHJldHVybiB0aGlzLl9GUy53cml0ZSh0aGlzLl9zdHJlYW0sIHU4LCBvZmZzZXQsIGxlbmd0aCwgZW1Qb3NpdGlvbik7XG5cdFx0fSBjYXRjaCAoZSkge1xuXHRcdFx0dGhyb3cgY29udmVydEVycm9yKGUsIHRoaXMuX3BhdGgpO1xuXHRcdH1cblx0fVxuXHRwdWJsaWMgcmVhZChidWZmZXI6IEJ1ZmZlciwgb2Zmc2V0OiBudW1iZXIsIGxlbmd0aDogbnVtYmVyLCBwb3NpdGlvbjogbnVtYmVyLCBjYjogQkZTVGhyZWVBcmdDYWxsYmFjazxudW1iZXIsIEJ1ZmZlcj4pOiB2b2lkIHtcblx0XHR0cnkge1xuXHRcdFx0Y2IobnVsbCwgdGhpcy5yZWFkU3luYyhidWZmZXIsIG9mZnNldCwgbGVuZ3RoLCBwb3NpdGlvbiksIGJ1ZmZlcik7XG5cdFx0fSBjYXRjaCAoZSkge1xuXHRcdFx0Y2IoZSk7XG5cdFx0fVxuXHR9XG5cdHB1YmxpYyByZWFkU3luYyhidWZmZXI6IEJ1ZmZlciwgb2Zmc2V0OiBudW1iZXIsIGxlbmd0aDogbnVtYmVyLCBwb3NpdGlvbjogbnVtYmVyIHwgbnVsbCk6IG51bWJlciB7XG5cdFx0dHJ5IHtcblx0XHRcdGNvbnN0IHU4ID0gYnVmZmVyMlVpbnQ4YXJyYXkoYnVmZmVyKTtcblx0XHRcdC8vIEVtc2NyaXB0ZW4gaXMgcGFydGljdWxhciBhYm91dCB3aGF0IHBvc2l0aW9uIGlzIHNldCB0by5cblx0XHRcdGNvbnN0IGVtUG9zaXRpb24gPSBwb3NpdGlvbiA9PT0gbnVsbCA/IHVuZGVmaW5lZCA6IHBvc2l0aW9uO1xuXHRcdFx0cmV0dXJuIHRoaXMuX0ZTLnJlYWQodGhpcy5fc3RyZWFtLCB1OCwgb2Zmc2V0LCBsZW5ndGgsIGVtUG9zaXRpb24pO1xuXHRcdH0gY2F0Y2ggKGUpIHtcblx0XHRcdHRocm93IGNvbnZlcnRFcnJvcihlLCB0aGlzLl9wYXRoKTtcblx0XHR9XG5cdH1cblx0cHVibGljIHN5bmMoY2I6IEJGU09uZUFyZ0NhbGxiYWNrKTogdm9pZCB7XG5cdFx0Ly8gTk9QLlxuXHRcdGNiKCk7XG5cdH1cblx0cHVibGljIHN5bmNTeW5jKCk6IHZvaWQge1xuXHRcdC8vIE5PUC5cblx0fVxuXHRwdWJsaWMgY2hvd24odWlkOiBudW1iZXIsIGdpZDogbnVtYmVyLCBjYjogQkZTT25lQXJnQ2FsbGJhY2spOiB2b2lkIHtcblx0XHRsZXQgZXJyOiBBcGlFcnJvciB8IG51bGwgPSBudWxsO1xuXHRcdHRyeSB7XG5cdFx0XHR0aGlzLmNob3duU3luYyh1aWQsIGdpZCk7XG5cdFx0fSBjYXRjaCAoZSkge1xuXHRcdFx0ZXJyID0gZTtcblx0XHR9IGZpbmFsbHkge1xuXHRcdFx0Y2IoZXJyKTtcblx0XHR9XG5cdH1cblx0cHVibGljIGNob3duU3luYyh1aWQ6IG51bWJlciwgZ2lkOiBudW1iZXIpOiB2b2lkIHtcblx0XHR0cnkge1xuXHRcdFx0dGhpcy5fRlMuZmNob3duKHRoaXMuX3N0cmVhbS5mZCwgdWlkLCBnaWQpO1xuXHRcdH0gY2F0Y2ggKGUpIHtcblx0XHRcdHRocm93IGNvbnZlcnRFcnJvcihlLCB0aGlzLl9wYXRoKTtcblx0XHR9XG5cdH1cblx0cHVibGljIGNobW9kKG1vZGU6IG51bWJlciwgY2I6IEJGU09uZUFyZ0NhbGxiYWNrKTogdm9pZCB7XG5cdFx0bGV0IGVycjogQXBpRXJyb3IgfCBudWxsID0gbnVsbDtcblx0XHR0cnkge1xuXHRcdFx0dGhpcy5jaG1vZFN5bmMobW9kZSk7XG5cdFx0fSBjYXRjaCAoZSkge1xuXHRcdFx0ZXJyID0gZTtcblx0XHR9IGZpbmFsbHkge1xuXHRcdFx0Y2IoZXJyKTtcblx0XHR9XG5cdH1cblx0cHVibGljIGNobW9kU3luYyhtb2RlOiBudW1iZXIpOiB2b2lkIHtcblx0XHR0cnkge1xuXHRcdFx0dGhpcy5fRlMuZmNobW9kKHRoaXMuX3N0cmVhbS5mZCwgbW9kZSk7XG5cdFx0fSBjYXRjaCAoZSkge1xuXHRcdFx0dGhyb3cgY29udmVydEVycm9yKGUsIHRoaXMuX3BhdGgpO1xuXHRcdH1cblx0fVxuXHRwdWJsaWMgdXRpbWVzKGF0aW1lOiBEYXRlLCBtdGltZTogRGF0ZSwgY2I6IEJGU09uZUFyZ0NhbGxiYWNrKTogdm9pZCB7XG5cdFx0bGV0IGVycjogQXBpRXJyb3IgfCBudWxsID0gbnVsbDtcblx0XHR0cnkge1xuXHRcdFx0dGhpcy51dGltZXNTeW5jKGF0aW1lLCBtdGltZSk7XG5cdFx0fSBjYXRjaCAoZSkge1xuXHRcdFx0ZXJyID0gZTtcblx0XHR9IGZpbmFsbHkge1xuXHRcdFx0Y2IoZXJyKTtcblx0XHR9XG5cdH1cblx0cHVibGljIHV0aW1lc1N5bmMoYXRpbWU6IERhdGUsIG10aW1lOiBEYXRlKTogdm9pZCB7XG5cdFx0dGhpcy5fZnMudXRpbWVzU3luYyh0aGlzLl9wYXRoLCBhdGltZSwgbXRpbWUsIENyZWQuUm9vdCk7XG5cdH1cbn1cblxuLyoqXG4gKiBDb25maWd1cmF0aW9uIG9wdGlvbnMgZm9yIEVtc2NyaXB0ZW4gZmlsZSBzeXN0ZW1zLlxuICovXG5leHBvcnQgaW50ZXJmYWNlIEVtc2NyaXB0ZW5GaWxlU3lzdGVtT3B0aW9ucyB7XG5cdC8vIFRoZSBFbXNjcmlwdGVuIGZpbGUgc3lzdGVtIHRvIHVzZSAoYEZTYClcblx0RlM6IGFueTtcbn1cblxuLyoqXG4gKiBNb3VudHMgYW4gRW1zY3JpcHRlbiBmaWxlIHN5c3RlbSBpbnRvIHRoZSBCcm93c2VyRlMgZmlsZSBzeXN0ZW0uXG4gKi9cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEVtc2NyaXB0ZW5GaWxlU3lzdGVtIGV4dGVuZHMgU3luY2hyb25vdXNGaWxlU3lzdGVtIHtcblx0cHVibGljIHN0YXRpYyByZWFkb25seSBOYW1lID0gJ0Vtc2NyaXB0ZW5GaWxlU3lzdGVtJztcblxuXHRwdWJsaWMgc3RhdGljIHJlYWRvbmx5IE9wdGlvbnM6IEZpbGVTeXN0ZW1PcHRpb25zID0ge1xuXHRcdEZTOiB7XG5cdFx0XHR0eXBlOiAnb2JqZWN0Jyxcblx0XHRcdGRlc2NyaXB0aW9uOiAnVGhlIEVtc2NyaXB0ZW4gZmlsZSBzeXN0ZW0gdG8gdXNlICh0aGUgYEZTYCB2YXJpYWJsZSknLFxuXHRcdH0sXG5cdH07XG5cblx0LyoqXG5cdCAqIENyZWF0ZSBhbiBFbXNjcmlwdGVuRmlsZVN5c3RlbSBpbnN0YW5jZSB3aXRoIHRoZSBnaXZlbiBvcHRpb25zLlxuXHQgKi9cblx0cHVibGljIHN0YXRpYyBDcmVhdGUob3B0czogRW1zY3JpcHRlbkZpbGVTeXN0ZW1PcHRpb25zLCBjYjogQkZTQ2FsbGJhY2s8RW1zY3JpcHRlbkZpbGVTeXN0ZW0+KTogdm9pZCB7XG5cdFx0Y2IobnVsbCwgbmV3IEVtc2NyaXB0ZW5GaWxlU3lzdGVtKG9wdHMuRlMpKTtcblx0fVxuXG5cdHB1YmxpYyBzdGF0aWMgQ3JlYXRlQXN5bmMob3B0czogRW1zY3JpcHRlbkZpbGVTeXN0ZW1PcHRpb25zKTogUHJvbWlzZTxFbXNjcmlwdGVuRmlsZVN5c3RlbT4ge1xuXHRcdHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG5cdFx0XHR0aGlzLkNyZWF0ZShvcHRzLCAoZXJyb3IsIGZzKSA9PiB7XG5cdFx0XHRcdGlmIChlcnJvciB8fCAhZnMpIHtcblx0XHRcdFx0XHRyZWplY3QoZXJyb3IpO1xuXHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdHJlc29sdmUoZnMpO1xuXHRcdFx0XHR9XG5cdFx0XHR9KTtcblx0XHR9KTtcblx0fVxuXG5cdHB1YmxpYyBzdGF0aWMgaXNBdmFpbGFibGUoKTogYm9vbGVhbiB7XG5cdFx0cmV0dXJuIHRydWU7XG5cdH1cblxuXHRwcml2YXRlIF9GUzogYW55O1xuXG5cdHByaXZhdGUgY29uc3RydWN0b3IoX0ZTOiBhbnkpIHtcblx0XHRzdXBlcigpO1xuXHRcdHRoaXMuX0ZTID0gX0ZTO1xuXHR9XG5cdHB1YmxpYyBnZXROYW1lKCk6IHN0cmluZyB7XG5cdFx0cmV0dXJuIHRoaXMuX0ZTLkRCX05BTUUoKTtcblx0fVxuXHRwdWJsaWMgaXNSZWFkT25seSgpOiBib29sZWFuIHtcblx0XHRyZXR1cm4gZmFsc2U7XG5cdH1cblx0cHVibGljIHN1cHBvcnRzTGlua3MoKTogYm9vbGVhbiB7XG5cdFx0cmV0dXJuIHRydWU7XG5cdH1cblx0cHVibGljIHN1cHBvcnRzUHJvcHMoKTogYm9vbGVhbiB7XG5cdFx0cmV0dXJuIHRydWU7XG5cdH1cblx0cHVibGljIHN1cHBvcnRzU3luY2goKTogYm9vbGVhbiB7XG5cdFx0cmV0dXJuIHRydWU7XG5cdH1cblxuXHRwdWJsaWMgcmVuYW1lU3luYyhvbGRQYXRoOiBzdHJpbmcsIG5ld1BhdGg6IHN0cmluZywgY3JlZDogQ3JlZCk6IHZvaWQge1xuXHRcdHRyeSB7XG5cdFx0XHR0aGlzLl9GUy5yZW5hbWUob2xkUGF0aCwgbmV3UGF0aCk7XG5cdFx0fSBjYXRjaCAoZSkge1xuXHRcdFx0aWYgKGUuZXJybm8gPT09IEVycm9yQ29kZS5FTk9FTlQpIHtcblx0XHRcdFx0dGhyb3cgY29udmVydEVycm9yKGUsIHRoaXMuZXhpc3RzU3luYyhvbGRQYXRoLCBjcmVkKSA/IG5ld1BhdGggOiBvbGRQYXRoKTtcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdHRocm93IGNvbnZlcnRFcnJvcihlKTtcblx0XHRcdH1cblx0XHR9XG5cdH1cblxuXHRwdWJsaWMgc3RhdFN5bmMocDogc3RyaW5nLCBpc0xzdGF0OiBib29sZWFuLCBjcmVkOiBDcmVkKTogU3RhdHMge1xuXHRcdHRyeSB7XG5cdFx0XHRjb25zdCBzdGF0cyA9IGlzTHN0YXQgPyB0aGlzLl9GUy5sc3RhdChwKSA6IHRoaXMuX0ZTLnN0YXQocCk7XG5cdFx0XHRjb25zdCBpdGVtVHlwZSA9IHRoaXMubW9kZVRvRmlsZVR5cGUoc3RhdHMubW9kZSk7XG5cdFx0XHRyZXR1cm4gbmV3IFN0YXRzKGl0ZW1UeXBlLCBzdGF0cy5zaXplLCBzdGF0cy5tb2RlLCBzdGF0cy5hdGltZS5nZXRUaW1lKCksIHN0YXRzLm10aW1lLmdldFRpbWUoKSwgc3RhdHMuY3RpbWUuZ2V0VGltZSgpKTtcblx0XHR9IGNhdGNoIChlKSB7XG5cdFx0XHR0aHJvdyBjb252ZXJ0RXJyb3IoZSwgcCk7XG5cdFx0fVxuXHR9XG5cblx0cHVibGljIG9wZW5TeW5jKHA6IHN0cmluZywgZmxhZzogRmlsZUZsYWcsIG1vZGU6IG51bWJlciwgY3JlZDogQ3JlZCk6IEVtc2NyaXB0ZW5GaWxlIHtcblx0XHR0cnkge1xuXHRcdFx0Y29uc3Qgc3RyZWFtID0gdGhpcy5fRlMub3BlbihwLCBmbGFnLmdldEZsYWdTdHJpbmcoKSwgbW9kZSk7XG5cdFx0XHRyZXR1cm4gbmV3IEVtc2NyaXB0ZW5GaWxlKHRoaXMsIHRoaXMuX0ZTLCBwLCBzdHJlYW0pO1xuXHRcdH0gY2F0Y2ggKGUpIHtcblx0XHRcdHRocm93IGNvbnZlcnRFcnJvcihlLCBwKTtcblx0XHR9XG5cdH1cblxuXHRwdWJsaWMgdW5saW5rU3luYyhwOiBzdHJpbmcsIGNyZWQ6IENyZWQpOiB2b2lkIHtcblx0XHR0cnkge1xuXHRcdFx0dGhpcy5fRlMudW5saW5rKHApO1xuXHRcdH0gY2F0Y2ggKGUpIHtcblx0XHRcdHRocm93IGNvbnZlcnRFcnJvcihlLCBwKTtcblx0XHR9XG5cdH1cblxuXHRwdWJsaWMgcm1kaXJTeW5jKHA6IHN0cmluZywgY3JlZDogQ3JlZCk6IHZvaWQge1xuXHRcdHRyeSB7XG5cdFx0XHR0aGlzLl9GUy5ybWRpcihwKTtcblx0XHR9IGNhdGNoIChlKSB7XG5cdFx0XHR0aHJvdyBjb252ZXJ0RXJyb3IoZSwgcCk7XG5cdFx0fVxuXHR9XG5cblx0cHVibGljIG1rZGlyU3luYyhwOiBzdHJpbmcsIG1vZGU6IG51bWJlciwgY3JlZDogQ3JlZCk6IHZvaWQge1xuXHRcdHRyeSB7XG5cdFx0XHR0aGlzLl9GUy5ta2RpcihwLCBtb2RlKTtcblx0XHR9IGNhdGNoIChlKSB7XG5cdFx0XHR0aHJvdyBjb252ZXJ0RXJyb3IoZSwgcCk7XG5cdFx0fVxuXHR9XG5cblx0cHVibGljIHJlYWRkaXJTeW5jKHA6IHN0cmluZywgY3JlZDogQ3JlZCk6IHN0cmluZ1tdIHtcblx0XHR0cnkge1xuXHRcdFx0Ly8gRW1zY3JpcHRlbiByZXR1cm5zIGl0ZW1zIGZvciAnLicgYW5kICcuLicuIE5vZGUgZG9lcyBub3QuXG5cdFx0XHRyZXR1cm4gdGhpcy5fRlMucmVhZGRpcihwKS5maWx0ZXIoKHA6IHN0cmluZykgPT4gcCAhPT0gJy4nICYmIHAgIT09ICcuLicpO1xuXHRcdH0gY2F0Y2ggKGUpIHtcblx0XHRcdHRocm93IGNvbnZlcnRFcnJvcihlLCBwKTtcblx0XHR9XG5cdH1cblxuXHRwdWJsaWMgdHJ1bmNhdGVTeW5jKHA6IHN0cmluZywgbGVuOiBudW1iZXIsIGNyZWQ6IENyZWQpOiB2b2lkIHtcblx0XHR0cnkge1xuXHRcdFx0dGhpcy5fRlMudHJ1bmNhdGUocCwgbGVuKTtcblx0XHR9IGNhdGNoIChlKSB7XG5cdFx0XHR0aHJvdyBjb252ZXJ0RXJyb3IoZSwgcCk7XG5cdFx0fVxuXHR9XG5cblx0cHVibGljIHJlYWRGaWxlU3luYyhwOiBzdHJpbmcsIGVuY29kaW5nOiBCdWZmZXJFbmNvZGluZywgZmxhZzogRmlsZUZsYWcsIGNyZWQ6IENyZWQpOiBhbnkge1xuXHRcdHRyeSB7XG5cdFx0XHRjb25zdCBkYXRhOiBVaW50OEFycmF5ID0gdGhpcy5fRlMucmVhZEZpbGUocCwgeyBmbGFnczogZmxhZy5nZXRGbGFnU3RyaW5nKCkgfSk7XG5cdFx0XHRjb25zdCBidWZmID0gdWludDhBcnJheTJCdWZmZXIoZGF0YSk7XG5cdFx0XHRpZiAoZW5jb2RpbmcpIHtcblx0XHRcdFx0cmV0dXJuIGJ1ZmYudG9TdHJpbmcoZW5jb2RpbmcpO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0cmV0dXJuIGJ1ZmY7XG5cdFx0XHR9XG5cdFx0fSBjYXRjaCAoZSkge1xuXHRcdFx0dGhyb3cgY29udmVydEVycm9yKGUsIHApO1xuXHRcdH1cblx0fVxuXG5cdHB1YmxpYyB3cml0ZUZpbGVTeW5jKHA6IHN0cmluZywgZGF0YTogYW55LCBlbmNvZGluZzogQnVmZmVyRW5jb2RpbmcsIGZsYWc6IEZpbGVGbGFnLCBtb2RlOiBudW1iZXIsIGNyZWQ6IENyZWQpOiB2b2lkIHtcblx0XHR0cnkge1xuXHRcdFx0aWYgKGVuY29kaW5nKSB7XG5cdFx0XHRcdGRhdGEgPSBCdWZmZXIuZnJvbShkYXRhLCBlbmNvZGluZyk7XG5cdFx0XHR9XG5cdFx0XHRjb25zdCB1OCA9IGJ1ZmZlcjJVaW50OGFycmF5KGRhdGEpO1xuXHRcdFx0dGhpcy5fRlMud3JpdGVGaWxlKHAsIHU4LCB7IGZsYWdzOiBmbGFnLmdldEZsYWdTdHJpbmcoKSwgZW5jb2Rpbmc6ICdiaW5hcnknIH0pO1xuXHRcdFx0dGhpcy5fRlMuY2htb2QocCwgbW9kZSk7XG5cdFx0fSBjYXRjaCAoZSkge1xuXHRcdFx0dGhyb3cgY29udmVydEVycm9yKGUsIHApO1xuXHRcdH1cblx0fVxuXG5cdHB1YmxpYyBjaG1vZFN5bmMocDogc3RyaW5nLCBpc0xjaG1vZDogYm9vbGVhbiwgbW9kZTogbnVtYmVyLCBjcmVkOiBDcmVkKSB7XG5cdFx0dHJ5IHtcblx0XHRcdGlzTGNobW9kID8gdGhpcy5fRlMubGNobW9kKHAsIG1vZGUpIDogdGhpcy5fRlMuY2htb2QocCwgbW9kZSk7XG5cdFx0fSBjYXRjaCAoZSkge1xuXHRcdFx0dGhyb3cgY29udmVydEVycm9yKGUsIHApO1xuXHRcdH1cblx0fVxuXG5cdHB1YmxpYyBjaG93blN5bmMocDogc3RyaW5nLCBpc0xjaG93bjogYm9vbGVhbiwgbmV3X3VpZDogbnVtYmVyLCBuZXdfZ2lkOiBudW1iZXIsIGNyZWQ6IENyZWQpOiB2b2lkIHtcblx0XHR0cnkge1xuXHRcdFx0aXNMY2hvd24gPyB0aGlzLl9GUy5sY2hvd24ocCwgbmV3X3VpZCwgbmV3X2dpZCkgOiB0aGlzLl9GUy5jaG93bihwLCBuZXdfdWlkLCBuZXdfZ2lkKTtcblx0XHR9IGNhdGNoIChlKSB7XG5cdFx0XHR0aHJvdyBjb252ZXJ0RXJyb3IoZSwgcCk7XG5cdFx0fVxuXHR9XG5cblx0cHVibGljIHN5bWxpbmtTeW5jKHNyY3BhdGg6IHN0cmluZywgZHN0cGF0aDogc3RyaW5nLCB0eXBlOiBzdHJpbmcsIGNyZWQ6IENyZWQpOiB2b2lkIHtcblx0XHR0cnkge1xuXHRcdFx0dGhpcy5fRlMuc3ltbGluayhzcmNwYXRoLCBkc3RwYXRoKTtcblx0XHR9IGNhdGNoIChlKSB7XG5cdFx0XHR0aHJvdyBjb252ZXJ0RXJyb3IoZSk7XG5cdFx0fVxuXHR9XG5cblx0cHVibGljIHJlYWRsaW5rU3luYyhwOiBzdHJpbmcsIGNyZWQ6IENyZWQpOiBzdHJpbmcge1xuXHRcdHRyeSB7XG5cdFx0XHRyZXR1cm4gdGhpcy5fRlMucmVhZGxpbmsocCk7XG5cdFx0fSBjYXRjaCAoZSkge1xuXHRcdFx0dGhyb3cgY29udmVydEVycm9yKGUsIHApO1xuXHRcdH1cblx0fVxuXG5cdHB1YmxpYyB1dGltZXNTeW5jKHA6IHN0cmluZywgYXRpbWU6IERhdGUsIG10aW1lOiBEYXRlLCBjcmVkOiBDcmVkKTogdm9pZCB7XG5cdFx0dHJ5IHtcblx0XHRcdHRoaXMuX0ZTLnV0aW1lKHAsIGF0aW1lLmdldFRpbWUoKSwgbXRpbWUuZ2V0VGltZSgpKTtcblx0XHR9IGNhdGNoIChlKSB7XG5cdFx0XHR0aHJvdyBjb252ZXJ0RXJyb3IoZSwgcCk7XG5cdFx0fVxuXHR9XG5cblx0cHJpdmF0ZSBtb2RlVG9GaWxlVHlwZShtb2RlOiBudW1iZXIpOiBGaWxlVHlwZSB7XG5cdFx0aWYgKHRoaXMuX0ZTLmlzRGlyKG1vZGUpKSB7XG5cdFx0XHRyZXR1cm4gRmlsZVR5cGUuRElSRUNUT1JZO1xuXHRcdH0gZWxzZSBpZiAodGhpcy5fRlMuaXNGaWxlKG1vZGUpKSB7XG5cdFx0XHRyZXR1cm4gRmlsZVR5cGUuRklMRTtcblx0XHR9IGVsc2UgaWYgKHRoaXMuX0ZTLmlzTGluayhtb2RlKSkge1xuXHRcdFx0cmV0dXJuIEZpbGVUeXBlLlNZTUxJTks7XG5cdFx0fSBlbHNlIHtcblx0XHRcdHRocm93IEFwaUVycm9yLkVQRVJNKGBJbnZhbGlkIG1vZGU6ICR7bW9kZX1gKTtcblx0XHR9XG5cdH1cbn1cbiIsICJpbXBvcnQgeyBiYXNlbmFtZSwgZGlybmFtZSwgam9pbiB9IGZyb20gJ3BhdGgnO1xuaW1wb3J0IHsgQXBpRXJyb3IsIEVycm9yQ29kZSB9IGZyb20gJy4uL2NvcmUvYXBpX2Vycm9yJztcbmltcG9ydCBDcmVkIGZyb20gJy4uL2NvcmUvY3JlZCc7XG5pbXBvcnQgeyBGaWxlIH0gZnJvbSAnLi4vY29yZS9maWxlJztcbmltcG9ydCB7IEZpbGVGbGFnIH0gZnJvbSAnLi4vY29yZS9maWxlX2ZsYWcnO1xuaW1wb3J0IHsgQmFzZUZpbGVTeXN0ZW0sIEJGU0NhbGxiYWNrLCBCRlNPbmVBcmdDYWxsYmFjaywgRmlsZVN5c3RlbSwgRmlsZVN5c3RlbU9wdGlvbnMgfSBmcm9tICcuLi9jb3JlL2ZpbGVfc3lzdGVtJztcbmltcG9ydCB7IGRlZmF1bHQgYXMgU3RhdHMsIEZpbGVUeXBlIH0gZnJvbSAnLi4vY29yZS9zdGF0cyc7XG5pbXBvcnQgeyBlbXB0eUJ1ZmZlciB9IGZyb20gJy4uL2NvcmUvdXRpbCc7XG5pbXBvcnQgUHJlbG9hZEZpbGUgZnJvbSAnLi4vZ2VuZXJpYy9wcmVsb2FkX2ZpbGUnO1xuaW1wb3J0IHsgQnVmZmVyIH0gZnJvbSAnYnVmZmVyJztcblxuaW50ZXJmYWNlIEZpbGVTeXN0ZW1BY2Nlc3NGaWxlU3lzdGVtT3B0aW9ucyB7XG5cdGhhbmRsZTogRmlsZVN5c3RlbURpcmVjdG9yeUhhbmRsZTtcbn1cblxudHlwZSBGaWxlU3lzdGVtS2V5c0l0ZXJhdG9yID0gQXN5bmNJdGVyYWJsZUl0ZXJhdG9yPHN0cmluZz4gJiB7XG5cdG5leHQ6ICgpID0+IFByb21pc2U8SXRlcmF0b3JSZXN1bHQ8c3RyaW5nPj47XG59O1xuXG50eXBlIEdsb2JhbEZpbGUgPSBnbG9iYWxUaGlzLkZpbGUgJiB7XG5cdGFycmF5QnVmZmVyOiAoKSA9PiBQcm9taXNlPEFycmF5QnVmZmVyPjtcbn07XG5cbmNvbnN0IGhhbmRsZUVycm9yID1cblx0KGNiOiBCRlNDYWxsYmFjazxuZXZlcj4sIHBhdGggPSAnJykgPT5cblx0KGVycm9yOiBFcnJvcikgPT4ge1xuXHRcdGlmIChlcnJvci5uYW1lID09PSAnTm90Rm91bmRFcnJvcicpIHtcblx0XHRcdHJldHVybiBjYihBcGlFcnJvci5FTk9FTlQocGF0aCkpO1xuXHRcdH1cblxuXHRcdGNiKGVycm9yIGFzIEFwaUVycm9yKTtcblx0fTtcblxuY29uc3Qga2V5c1RvQXJyYXkgPSAoZGlyZWN0b3J5S2V5czogRmlsZVN5c3RlbUtleXNJdGVyYXRvciwgY2I6IEJGU0NhbGxiYWNrPHN0cmluZ1tdPiwgcGF0aDogc3RyaW5nKTogdm9pZCA9PiB7XG5cdGNvbnN0IGtleXM6IHN0cmluZ1tdID0gW107XG5cdGNvbnN0IGl0ZXJhdGVLZXlzID0gKCk6IHZvaWQgPT4ge1xuXHRcdGRpcmVjdG9yeUtleXNcblx0XHRcdC5uZXh0KClcblx0XHRcdC50aGVuKCh7IGRvbmUsIHZhbHVlIH0pID0+IHtcblx0XHRcdFx0aWYgKGRvbmUpIHtcblx0XHRcdFx0XHRyZXR1cm4gY2IobnVsbCwga2V5cyk7XG5cdFx0XHRcdH1cblxuXHRcdFx0XHRrZXlzLnB1c2godmFsdWUpO1xuXHRcdFx0XHRpdGVyYXRlS2V5cygpO1xuXHRcdFx0fSlcblx0XHRcdC5jYXRjaChoYW5kbGVFcnJvcihjYiwgcGF0aCkpO1xuXHR9O1xuXG5cdGl0ZXJhdGVLZXlzKCk7XG59O1xuXG5leHBvcnQgY2xhc3MgRmlsZVN5c3RlbUFjY2Vzc0ZpbGUgZXh0ZW5kcyBQcmVsb2FkRmlsZTxGaWxlU3lzdGVtQWNjZXNzRmlsZVN5c3RlbT4gaW1wbGVtZW50cyBGaWxlIHtcblx0Y29uc3RydWN0b3IoX2ZzOiBGaWxlU3lzdGVtQWNjZXNzRmlsZVN5c3RlbSwgX3BhdGg6IHN0cmluZywgX2ZsYWc6IEZpbGVGbGFnLCBfc3RhdDogU3RhdHMsIGNvbnRlbnRzPzogQnVmZmVyKSB7XG5cdFx0c3VwZXIoX2ZzLCBfcGF0aCwgX2ZsYWcsIF9zdGF0LCBjb250ZW50cyk7XG5cdH1cblxuXHRwdWJsaWMgc3luYyhjYjogQkZTT25lQXJnQ2FsbGJhY2spOiB2b2lkIHtcblx0XHRpZiAodGhpcy5pc0RpcnR5KCkpIHtcblx0XHRcdHRoaXMuX2ZzLl9zeW5jKHRoaXMuZ2V0UGF0aCgpLCB0aGlzLmdldEJ1ZmZlcigpLCB0aGlzLmdldFN0YXRzKCksIENyZWQuUm9vdCwgKGU/OiBBcGlFcnJvcikgPT4ge1xuXHRcdFx0XHRpZiAoIWUpIHtcblx0XHRcdFx0XHR0aGlzLnJlc2V0RGlydHkoKTtcblx0XHRcdFx0fVxuXHRcdFx0XHRjYihlKTtcblx0XHRcdH0pO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHRjYigpO1xuXHRcdH1cblx0fVxuXG5cdHB1YmxpYyBjbG9zZShjYjogQkZTT25lQXJnQ2FsbGJhY2spOiB2b2lkIHtcblx0XHR0aGlzLnN5bmMoY2IpO1xuXHR9XG59XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEZpbGVTeXN0ZW1BY2Nlc3NGaWxlU3lzdGVtIGV4dGVuZHMgQmFzZUZpbGVTeXN0ZW0gaW1wbGVtZW50cyBGaWxlU3lzdGVtIHtcblx0cHVibGljIHN0YXRpYyByZWFkb25seSBOYW1lID0gJ0ZpbGVTeXN0ZW1BY2Nlc3MnO1xuXG5cdHB1YmxpYyBzdGF0aWMgcmVhZG9ubHkgT3B0aW9uczogRmlsZVN5c3RlbU9wdGlvbnMgPSB7fTtcblxuXHRwdWJsaWMgc3RhdGljIENyZWF0ZSh7IGhhbmRsZSB9OiBGaWxlU3lzdGVtQWNjZXNzRmlsZVN5c3RlbU9wdGlvbnMsIGNiOiBCRlNDYWxsYmFjazxGaWxlU3lzdGVtQWNjZXNzRmlsZVN5c3RlbT4pOiB2b2lkIHtcblx0XHRjYihudWxsLCBuZXcgRmlsZVN5c3RlbUFjY2Vzc0ZpbGVTeXN0ZW0oaGFuZGxlKSk7XG5cdH1cblxuXHRwdWJsaWMgc3RhdGljIENyZWF0ZUFzeW5jKG9wdHM6IEZpbGVTeXN0ZW1BY2Nlc3NGaWxlU3lzdGVtT3B0aW9ucyk6IFByb21pc2U8RmlsZVN5c3RlbUFjY2Vzc0ZpbGVTeXN0ZW0+IHtcblx0XHRyZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuXHRcdFx0dGhpcy5DcmVhdGUob3B0cywgKGVycm9yLCBmcykgPT4ge1xuXHRcdFx0XHRpZiAoZXJyb3IgfHwgIWZzKSB7XG5cdFx0XHRcdFx0cmVqZWN0KGVycm9yKTtcblx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRyZXNvbHZlKGZzKTtcblx0XHRcdFx0fVxuXHRcdFx0fSk7XG5cdFx0fSk7XG5cdH1cblxuXHRwdWJsaWMgc3RhdGljIGlzQXZhaWxhYmxlKCk6IGJvb2xlYW4ge1xuXHRcdHJldHVybiB0eXBlb2YgRmlsZVN5c3RlbUhhbmRsZSA9PT0gJ2Z1bmN0aW9uJztcblx0fVxuXG5cdHByaXZhdGUgX2hhbmRsZXM6IHsgW3BhdGg6IHN0cmluZ106IEZpbGVTeXN0ZW1IYW5kbGUgfTtcblxuXHRwcml2YXRlIGNvbnN0cnVjdG9yKGhhbmRsZTogRmlsZVN5c3RlbURpcmVjdG9yeUhhbmRsZSkge1xuXHRcdHN1cGVyKCk7XG5cdFx0dGhpcy5faGFuZGxlcyA9IHsgJy8nOiBoYW5kbGUgfTtcblx0fVxuXG5cdHB1YmxpYyBnZXROYW1lKCk6IHN0cmluZyB7XG5cdFx0cmV0dXJuIEZpbGVTeXN0ZW1BY2Nlc3NGaWxlU3lzdGVtLk5hbWU7XG5cdH1cblxuXHRwdWJsaWMgaXNSZWFkT25seSgpOiBib29sZWFuIHtcblx0XHRyZXR1cm4gZmFsc2U7XG5cdH1cblxuXHRwdWJsaWMgc3VwcG9ydHNTeW1saW5rcygpOiBib29sZWFuIHtcblx0XHRyZXR1cm4gZmFsc2U7XG5cdH1cblxuXHRwdWJsaWMgc3VwcG9ydHNQcm9wcygpOiBib29sZWFuIHtcblx0XHRyZXR1cm4gZmFsc2U7XG5cdH1cblxuXHRwdWJsaWMgc3VwcG9ydHNTeW5jaCgpOiBib29sZWFuIHtcblx0XHRyZXR1cm4gZmFsc2U7XG5cdH1cblxuXHRwdWJsaWMgX3N5bmMocDogc3RyaW5nLCBkYXRhOiBCdWZmZXIsIHN0YXRzOiBTdGF0cywgY3JlZDogQ3JlZCwgY2I6IEJGU09uZUFyZ0NhbGxiYWNrKTogdm9pZCB7XG5cdFx0dGhpcy5zdGF0KHAsIGZhbHNlLCBjcmVkLCAoZXJyLCBjdXJyZW50U3RhdHMpID0+IHtcblx0XHRcdGlmIChzdGF0cy5tdGltZSAhPT0gY3VycmVudFN0YXRzIS5tdGltZSkge1xuXHRcdFx0XHR0aGlzLndyaXRlRmlsZShwLCBkYXRhLCBudWxsLCBGaWxlRmxhZy5nZXRGaWxlRmxhZygndycpLCBjdXJyZW50U3RhdHMhLm1vZGUsIGNyZWQsIGNiKTtcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdGNiKGVycik7XG5cdFx0XHR9XG5cdFx0fSk7XG5cdH1cblxuXHRwdWJsaWMgcmVuYW1lKG9sZFBhdGg6IHN0cmluZywgbmV3UGF0aDogc3RyaW5nLCBjcmVkOiBDcmVkLCBjYjogQkZTT25lQXJnQ2FsbGJhY2spOiB2b2lkIHtcblx0XHR0aGlzLmdldEhhbmRsZShvbGRQYXRoLCAoc291cmNlRXJyb3IsIGhhbmRsZSkgPT4ge1xuXHRcdFx0aWYgKHNvdXJjZUVycm9yKSB7XG5cdFx0XHRcdHJldHVybiBjYihzb3VyY2VFcnJvcik7XG5cdFx0XHR9XG5cdFx0XHRpZiAoaGFuZGxlIGluc3RhbmNlb2YgRmlsZVN5c3RlbURpcmVjdG9yeUhhbmRsZSkge1xuXHRcdFx0XHR0aGlzLnJlYWRkaXIob2xkUGF0aCwgY3JlZCwgKHJlYWREaXJFcnJvciwgZmlsZXMgPSBbXSkgPT4ge1xuXHRcdFx0XHRcdGlmIChyZWFkRGlyRXJyb3IpIHtcblx0XHRcdFx0XHRcdHJldHVybiBjYihyZWFkRGlyRXJyb3IpO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHR0aGlzLm1rZGlyKG5ld1BhdGgsICd3eCcsIGNyZWQsIG1rZGlyRXJyb3IgPT4ge1xuXHRcdFx0XHRcdFx0aWYgKG1rZGlyRXJyb3IpIHtcblx0XHRcdFx0XHRcdFx0cmV0dXJuIGNiKG1rZGlyRXJyb3IpO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0aWYgKGZpbGVzLmxlbmd0aCA9PT0gMCkge1xuXHRcdFx0XHRcdFx0XHR0aGlzLnVubGluayhvbGRQYXRoLCBjcmVkLCBjYik7XG5cdFx0XHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdFx0XHRmaWxlcy5mb3JFYWNoKGZpbGUgPT4gdGhpcy5yZW5hbWUoam9pbihvbGRQYXRoLCBmaWxlKSwgam9pbihuZXdQYXRoLCBmaWxlKSwgY3JlZCwgKCkgPT4gdGhpcy51bmxpbmsob2xkUGF0aCwgY3JlZCwgY2IpKSk7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fSk7XG5cdFx0XHRcdH0pO1xuXHRcdFx0fVxuXHRcdFx0aWYgKGhhbmRsZSBpbnN0YW5jZW9mIEZpbGVTeXN0ZW1GaWxlSGFuZGxlKSB7XG5cdFx0XHRcdGhhbmRsZVxuXHRcdFx0XHRcdC5nZXRGaWxlKClcblx0XHRcdFx0XHQudGhlbigob2xkRmlsZTogR2xvYmFsRmlsZSkgPT5cblx0XHRcdFx0XHRcdHRoaXMuZ2V0SGFuZGxlKGRpcm5hbWUobmV3UGF0aCksIChkZXN0RXJyb3IsIGRlc3RGb2xkZXIpID0+IHtcblx0XHRcdFx0XHRcdFx0aWYgKGRlc3RFcnJvcikge1xuXHRcdFx0XHRcdFx0XHRcdHJldHVybiBjYihkZXN0RXJyb3IpO1xuXHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRcdGlmIChkZXN0Rm9sZGVyIGluc3RhbmNlb2YgRmlsZVN5c3RlbURpcmVjdG9yeUhhbmRsZSkge1xuXHRcdFx0XHRcdFx0XHRcdGRlc3RGb2xkZXJcblx0XHRcdFx0XHRcdFx0XHRcdC5nZXRGaWxlSGFuZGxlKGJhc2VuYW1lKG5ld1BhdGgpLCB7IGNyZWF0ZTogdHJ1ZSB9KVxuXHRcdFx0XHRcdFx0XHRcdFx0LnRoZW4obmV3RmlsZSA9PlxuXHRcdFx0XHRcdFx0XHRcdFx0XHRuZXdGaWxlXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0LmNyZWF0ZVdyaXRhYmxlKClcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHQudGhlbih3cml0YWJsZSA9PlxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0b2xkRmlsZVxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHQuYXJyYXlCdWZmZXIoKVxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHQudGhlbihidWZmZXIgPT5cblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHR3cml0YWJsZVxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0LndyaXRlKGJ1ZmZlcilcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdC50aGVuKCgpID0+IHtcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0d3JpdGFibGUuY2xvc2UoKTtcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0dGhpcy51bmxpbmsob2xkUGF0aCwgY3JlZCwgY2IpO1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0fSlcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdC5jYXRjaChoYW5kbGVFcnJvcihjYiwgbmV3UGF0aCkpXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdClcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0LmNhdGNoKGhhbmRsZUVycm9yKGNiLCBvbGRQYXRoKSlcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHQpXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0LmNhdGNoKGhhbmRsZUVycm9yKGNiLCBuZXdQYXRoKSlcblx0XHRcdFx0XHRcdFx0XHRcdClcblx0XHRcdFx0XHRcdFx0XHRcdC5jYXRjaChoYW5kbGVFcnJvcihjYiwgbmV3UGF0aCkpO1xuXHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHR9KVxuXHRcdFx0XHRcdClcblx0XHRcdFx0XHQuY2F0Y2goaGFuZGxlRXJyb3IoY2IsIG9sZFBhdGgpKTtcblx0XHRcdH1cblx0XHR9KTtcblx0fVxuXG5cdHB1YmxpYyB3cml0ZUZpbGUoZm5hbWU6IHN0cmluZywgZGF0YTogYW55LCBlbmNvZGluZzogc3RyaW5nIHwgbnVsbCwgZmxhZzogRmlsZUZsYWcsIG1vZGU6IG51bWJlciwgY3JlZDogQ3JlZCwgY2I6IEJGU0NhbGxiYWNrPEZpbGUgfCB1bmRlZmluZWQ+LCBjcmVhdGVGaWxlPzogYm9vbGVhbik6IHZvaWQge1xuXHRcdHRoaXMuZ2V0SGFuZGxlKGRpcm5hbWUoZm5hbWUpLCAoZXJyb3IsIGhhbmRsZSkgPT4ge1xuXHRcdFx0aWYgKGVycm9yKSB7XG5cdFx0XHRcdHJldHVybiBjYihlcnJvcik7XG5cdFx0XHR9XG5cdFx0XHRpZiAoaGFuZGxlIGluc3RhbmNlb2YgRmlsZVN5c3RlbURpcmVjdG9yeUhhbmRsZSkge1xuXHRcdFx0XHRoYW5kbGVcblx0XHRcdFx0XHQuZ2V0RmlsZUhhbmRsZShiYXNlbmFtZShmbmFtZSksIHsgY3JlYXRlOiB0cnVlIH0pXG5cdFx0XHRcdFx0LnRoZW4oZmlsZSA9PlxuXHRcdFx0XHRcdFx0ZmlsZVxuXHRcdFx0XHRcdFx0XHQuY3JlYXRlV3JpdGFibGUoKVxuXHRcdFx0XHRcdFx0XHQudGhlbih3cml0YWJsZSA9PlxuXHRcdFx0XHRcdFx0XHRcdHdyaXRhYmxlXG5cdFx0XHRcdFx0XHRcdFx0XHQud3JpdGUoZGF0YSlcblx0XHRcdFx0XHRcdFx0XHRcdC50aGVuKCgpID0+IHtcblx0XHRcdFx0XHRcdFx0XHRcdFx0d3JpdGFibGUuY2xvc2UoKS5jYXRjaChoYW5kbGVFcnJvcihjYiwgZm5hbWUpKTtcblx0XHRcdFx0XHRcdFx0XHRcdFx0Y2IobnVsbCwgY3JlYXRlRmlsZSA/IHRoaXMubmV3RmlsZShmbmFtZSwgZmxhZywgZGF0YSkgOiB1bmRlZmluZWQpO1xuXHRcdFx0XHRcdFx0XHRcdFx0fSlcblx0XHRcdFx0XHRcdFx0XHRcdC5jYXRjaChoYW5kbGVFcnJvcihjYiwgZm5hbWUpKVxuXHRcdFx0XHRcdFx0XHQpXG5cdFx0XHRcdFx0XHRcdC5jYXRjaChoYW5kbGVFcnJvcihjYiwgZm5hbWUpKVxuXHRcdFx0XHRcdClcblx0XHRcdFx0XHQuY2F0Y2goaGFuZGxlRXJyb3IoY2IsIGZuYW1lKSk7XG5cdFx0XHR9XG5cdFx0fSk7XG5cdH1cblxuXHRwdWJsaWMgY3JlYXRlRmlsZShwOiBzdHJpbmcsIGZsYWc6IEZpbGVGbGFnLCBtb2RlOiBudW1iZXIsIGNyZWQ6IENyZWQsIGNiOiBCRlNDYWxsYmFjazxGaWxlPik6IHZvaWQge1xuXHRcdHRoaXMud3JpdGVGaWxlKHAsIGVtcHR5QnVmZmVyKCksIG51bGwsIGZsYWcsIG1vZGUsIGNyZWQsIGNiLCB0cnVlKTtcblx0fVxuXG5cdHB1YmxpYyBzdGF0KHBhdGg6IHN0cmluZywgaXNMc3RhdDogYm9vbGVhbiwgY3JlZDogQ3JlZCwgY2I6IEJGU0NhbGxiYWNrPFN0YXRzPik6IHZvaWQge1xuXHRcdHRoaXMuZ2V0SGFuZGxlKHBhdGgsIChlcnJvciwgaGFuZGxlKSA9PiB7XG5cdFx0XHRpZiAoZXJyb3IpIHtcblx0XHRcdFx0cmV0dXJuIGNiKGVycm9yKTtcblx0XHRcdH1cblx0XHRcdGlmICghaGFuZGxlKSB7XG5cdFx0XHRcdHJldHVybiBjYihBcGlFcnJvci5GaWxlRXJyb3IoRXJyb3JDb2RlLkVJTlZBTCwgcGF0aCkpO1xuXHRcdFx0fVxuXHRcdFx0aWYgKGhhbmRsZSBpbnN0YW5jZW9mIEZpbGVTeXN0ZW1EaXJlY3RvcnlIYW5kbGUpIHtcblx0XHRcdFx0cmV0dXJuIGNiKG51bGwsIG5ldyBTdGF0cyhGaWxlVHlwZS5ESVJFQ1RPUlksIDQwOTYpKTtcblx0XHRcdH1cblx0XHRcdGlmIChoYW5kbGUgaW5zdGFuY2VvZiBGaWxlU3lzdGVtRmlsZUhhbmRsZSkge1xuXHRcdFx0XHRoYW5kbGVcblx0XHRcdFx0XHQuZ2V0RmlsZSgpXG5cdFx0XHRcdFx0LnRoZW4oKHsgbGFzdE1vZGlmaWVkLCBzaXplIH0pID0+IGNiKG51bGwsIG5ldyBTdGF0cyhGaWxlVHlwZS5GSUxFLCBzaXplLCB1bmRlZmluZWQsIHVuZGVmaW5lZCwgbGFzdE1vZGlmaWVkKSkpXG5cdFx0XHRcdFx0LmNhdGNoKGhhbmRsZUVycm9yKGNiLCBwYXRoKSk7XG5cdFx0XHR9XG5cdFx0fSk7XG5cdH1cblxuXHRwdWJsaWMgZXhpc3RzKHA6IHN0cmluZywgY3JlZDogQ3JlZCwgY2I6IChleGlzdHM6IGJvb2xlYW4pID0+IHZvaWQpOiB2b2lkIHtcblx0XHR0aGlzLmdldEhhbmRsZShwLCBlcnJvciA9PiBjYihlcnJvciA9PT0gbnVsbCkpO1xuXHR9XG5cblx0cHVibGljIG9wZW5GaWxlKHBhdGg6IHN0cmluZywgZmxhZ3M6IEZpbGVGbGFnLCBjcmVkOiBDcmVkLCBjYjogQkZTQ2FsbGJhY2s8RmlsZT4pOiB2b2lkIHtcblx0XHR0aGlzLmdldEhhbmRsZShwYXRoLCAoZXJyb3IsIGhhbmRsZSkgPT4ge1xuXHRcdFx0aWYgKGVycm9yKSB7XG5cdFx0XHRcdHJldHVybiBjYihlcnJvcik7XG5cdFx0XHR9XG5cdFx0XHRpZiAoaGFuZGxlIGluc3RhbmNlb2YgRmlsZVN5c3RlbUZpbGVIYW5kbGUpIHtcblx0XHRcdFx0aGFuZGxlXG5cdFx0XHRcdFx0LmdldEZpbGUoKVxuXHRcdFx0XHRcdC50aGVuKChmaWxlOiBHbG9iYWxGaWxlKSA9PlxuXHRcdFx0XHRcdFx0ZmlsZVxuXHRcdFx0XHRcdFx0XHQuYXJyYXlCdWZmZXIoKVxuXHRcdFx0XHRcdFx0XHQudGhlbihidWZmZXIgPT4gY2IobnVsbCwgdGhpcy5uZXdGaWxlKHBhdGgsIGZsYWdzLCBidWZmZXIsIGZpbGUuc2l6ZSwgZmlsZS5sYXN0TW9kaWZpZWQpKSlcblx0XHRcdFx0XHRcdFx0LmNhdGNoKGhhbmRsZUVycm9yKGNiLCBwYXRoKSlcblx0XHRcdFx0XHQpXG5cdFx0XHRcdFx0LmNhdGNoKGhhbmRsZUVycm9yKGNiLCBwYXRoKSk7XG5cdFx0XHR9XG5cdFx0fSk7XG5cdH1cblxuXHRwdWJsaWMgdW5saW5rKHBhdGg6IHN0cmluZywgY3JlZDogQ3JlZCwgY2I6IEJGU09uZUFyZ0NhbGxiYWNrKTogdm9pZCB7XG5cdFx0dGhpcy5nZXRIYW5kbGUoZGlybmFtZShwYXRoKSwgKGVycm9yLCBoYW5kbGUpID0+IHtcblx0XHRcdGlmIChlcnJvcikge1xuXHRcdFx0XHRyZXR1cm4gY2IoZXJyb3IpO1xuXHRcdFx0fVxuXHRcdFx0aWYgKGhhbmRsZSBpbnN0YW5jZW9mIEZpbGVTeXN0ZW1EaXJlY3RvcnlIYW5kbGUpIHtcblx0XHRcdFx0aGFuZGxlXG5cdFx0XHRcdFx0LnJlbW92ZUVudHJ5KGJhc2VuYW1lKHBhdGgpLCB7IHJlY3Vyc2l2ZTogdHJ1ZSB9KVxuXHRcdFx0XHRcdC50aGVuKCgpID0+IGNiKG51bGwpKVxuXHRcdFx0XHRcdC5jYXRjaChoYW5kbGVFcnJvcihjYiwgcGF0aCkpO1xuXHRcdFx0fVxuXHRcdH0pO1xuXHR9XG5cblx0cHVibGljIHJtZGlyKHBhdGg6IHN0cmluZywgY3JlZDogQ3JlZCwgY2I6IEJGU09uZUFyZ0NhbGxiYWNrKTogdm9pZCB7XG5cdFx0dGhpcy51bmxpbmsocGF0aCwgY3JlZCwgY2IpO1xuXHR9XG5cblx0cHVibGljIG1rZGlyKHA6IHN0cmluZywgbW9kZTogYW55LCBjcmVkOiBDcmVkLCBjYjogQkZTT25lQXJnQ2FsbGJhY2spOiB2b2lkIHtcblx0XHRjb25zdCBvdmVyd3JpdGUgPSBtb2RlICYmIG1vZGUuZmxhZyAmJiBtb2RlLmZsYWcuaW5jbHVkZXMoJ3cnKSAmJiAhbW9kZS5mbGFnLmluY2x1ZGVzKCd4Jyk7XG5cblx0XHR0aGlzLmdldEhhbmRsZShwLCAoX2V4aXN0aW5nRXJyb3IsIGV4aXN0aW5nSGFuZGxlKSA9PiB7XG5cdFx0XHRpZiAoZXhpc3RpbmdIYW5kbGUgJiYgIW92ZXJ3cml0ZSkge1xuXHRcdFx0XHRyZXR1cm4gY2IoQXBpRXJyb3IuRUVYSVNUKHApKTtcblx0XHRcdH1cblxuXHRcdFx0dGhpcy5nZXRIYW5kbGUoZGlybmFtZShwKSwgKGVycm9yLCBoYW5kbGUpID0+IHtcblx0XHRcdFx0aWYgKGVycm9yKSB7XG5cdFx0XHRcdFx0cmV0dXJuIGNiKGVycm9yKTtcblx0XHRcdFx0fVxuXHRcdFx0XHRpZiAoaGFuZGxlIGluc3RhbmNlb2YgRmlsZVN5c3RlbURpcmVjdG9yeUhhbmRsZSkge1xuXHRcdFx0XHRcdGhhbmRsZVxuXHRcdFx0XHRcdFx0LmdldERpcmVjdG9yeUhhbmRsZShiYXNlbmFtZShwKSwgeyBjcmVhdGU6IHRydWUgfSlcblx0XHRcdFx0XHRcdC50aGVuKCgpID0+IGNiKG51bGwpKVxuXHRcdFx0XHRcdFx0LmNhdGNoKGhhbmRsZUVycm9yKGNiLCBwKSk7XG5cdFx0XHRcdH1cblx0XHRcdH0pO1xuXHRcdH0pO1xuXHR9XG5cblx0cHVibGljIHJlYWRkaXIocGF0aDogc3RyaW5nLCBjcmVkOiBDcmVkLCBjYjogQkZTQ2FsbGJhY2s8c3RyaW5nW10+KTogdm9pZCB7XG5cdFx0dGhpcy5nZXRIYW5kbGUocGF0aCwgKHJlYWRFcnJvciwgaGFuZGxlKSA9PiB7XG5cdFx0XHRpZiAocmVhZEVycm9yKSB7XG5cdFx0XHRcdHJldHVybiBjYihyZWFkRXJyb3IpO1xuXHRcdFx0fVxuXHRcdFx0aWYgKGhhbmRsZSBpbnN0YW5jZW9mIEZpbGVTeXN0ZW1EaXJlY3RvcnlIYW5kbGUpIHtcblx0XHRcdFx0a2V5c1RvQXJyYXkoaGFuZGxlLmtleXMoKSBhcyBGaWxlU3lzdGVtS2V5c0l0ZXJhdG9yLCBjYiwgcGF0aCk7XG5cdFx0XHR9XG5cdFx0fSk7XG5cdH1cblxuXHRwcml2YXRlIG5ld0ZpbGUocGF0aDogc3RyaW5nLCBmbGFnOiBGaWxlRmxhZywgZGF0YTogQXJyYXlCdWZmZXIsIHNpemU/OiBudW1iZXIsIGxhc3RNb2RpZmllZD86IG51bWJlcik6IEZpbGUge1xuXHRcdHJldHVybiBuZXcgRmlsZVN5c3RlbUFjY2Vzc0ZpbGUodGhpcywgcGF0aCwgZmxhZywgbmV3IFN0YXRzKEZpbGVUeXBlLkZJTEUsIHNpemUgfHwgMCwgdW5kZWZpbmVkLCB1bmRlZmluZWQsIGxhc3RNb2RpZmllZCB8fCBuZXcgRGF0ZSgpLmdldFRpbWUoKSksIEJ1ZmZlci5mcm9tKGRhdGEpKTtcblx0fVxuXG5cdHByaXZhdGUgZ2V0SGFuZGxlKHBhdGg6IHN0cmluZywgY2I6IEJGU0NhbGxiYWNrPEZpbGVTeXN0ZW1IYW5kbGU+KTogdm9pZCB7XG5cdFx0aWYgKHBhdGggPT09ICcvJykge1xuXHRcdFx0cmV0dXJuIGNiKG51bGwsIHRoaXMuX2hhbmRsZXNbJy8nXSk7XG5cdFx0fVxuXG5cdFx0bGV0IHdhbGtlZFBhdGggPSAnLyc7XG5cdFx0Y29uc3QgWywgLi4ucGF0aFBhcnRzXSA9IHBhdGguc3BsaXQoJy8nKTtcblx0XHRjb25zdCBnZXRIYW5kbGVQYXJ0cyA9IChbcGF0aFBhcnQsIC4uLnJlbWFpbmluZ1BhdGhQYXJ0c106IHN0cmluZ1tdKSA9PiB7XG5cdFx0XHRjb25zdCB3YWxraW5nUGF0aCA9IGpvaW4od2Fsa2VkUGF0aCwgcGF0aFBhcnQpO1xuXHRcdFx0Y29uc3QgY29udGludWVXYWxrID0gKGhhbmRsZTogRmlsZVN5c3RlbUhhbmRsZSkgPT4ge1xuXHRcdFx0XHR3YWxrZWRQYXRoID0gd2Fsa2luZ1BhdGg7XG5cdFx0XHRcdHRoaXMuX2hhbmRsZXNbd2Fsa2VkUGF0aF0gPSBoYW5kbGU7XG5cblx0XHRcdFx0aWYgKHJlbWFpbmluZ1BhdGhQYXJ0cy5sZW5ndGggPT09IDApIHtcblx0XHRcdFx0XHRyZXR1cm4gY2IobnVsbCwgdGhpcy5faGFuZGxlc1twYXRoXSk7XG5cdFx0XHRcdH1cblxuXHRcdFx0XHRnZXRIYW5kbGVQYXJ0cyhyZW1haW5pbmdQYXRoUGFydHMpO1xuXHRcdFx0fTtcblx0XHRcdGNvbnN0IGhhbmRsZSA9IHRoaXMuX2hhbmRsZXNbd2Fsa2VkUGF0aF0gYXMgRmlsZVN5c3RlbURpcmVjdG9yeUhhbmRsZTtcblxuXHRcdFx0aGFuZGxlXG5cdFx0XHRcdC5nZXREaXJlY3RvcnlIYW5kbGUocGF0aFBhcnQpXG5cdFx0XHRcdC50aGVuKGNvbnRpbnVlV2Fsaylcblx0XHRcdFx0LmNhdGNoKChlcnJvcjogRXJyb3IpID0+IHtcblx0XHRcdFx0XHRpZiAoZXJyb3IubmFtZSA9PT0gJ1R5cGVNaXNtYXRjaEVycm9yJykge1xuXHRcdFx0XHRcdFx0aGFuZGxlLmdldEZpbGVIYW5kbGUocGF0aFBhcnQpLnRoZW4oY29udGludWVXYWxrKS5jYXRjaChoYW5kbGVFcnJvcihjYiwgd2Fsa2luZ1BhdGgpKTtcblx0XHRcdFx0XHR9IGVsc2UgaWYgKGVycm9yLm1lc3NhZ2UgPT09ICdOYW1lIGlzIG5vdCBhbGxvd2VkLicpIHtcblx0XHRcdFx0XHRcdGNiKG5ldyBBcGlFcnJvcihFcnJvckNvZGUuRU5PRU5ULCBlcnJvci5tZXNzYWdlLCB3YWxraW5nUGF0aCkpO1xuXHRcdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0XHRoYW5kbGVFcnJvcihjYiwgd2Fsa2luZ1BhdGgpKGVycm9yKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH0pO1xuXHRcdH07XG5cblx0XHRnZXRIYW5kbGVQYXJ0cyhwYXRoUGFydHMpO1xuXHR9XG59XG4iLCAiaW1wb3J0IHsgQmFzZUZpbGVTeXN0ZW0sIEZpbGVTeXN0ZW0sIEJGU0NhbGxiYWNrLCBGaWxlU3lzdGVtT3B0aW9ucyB9IGZyb20gJy4uL2NvcmUvZmlsZV9zeXN0ZW0nO1xuaW1wb3J0ICogYXMgcGF0aCBmcm9tICdwYXRoJztcbmltcG9ydCB7IEFwaUVycm9yIH0gZnJvbSAnLi4vY29yZS9hcGlfZXJyb3InO1xuaW1wb3J0IENyZWQgZnJvbSAnLi4vY29yZS9jcmVkJztcblxuLyoqXG4gKiBDb25maWd1cmF0aW9uIG9wdGlvbnMgZm9yIGEgRm9sZGVyQWRhcHRlciBmaWxlIHN5c3RlbS5cbiAqL1xuZXhwb3J0IGludGVyZmFjZSBGb2xkZXJBZGFwdGVyT3B0aW9ucyB7XG5cdC8vIFRoZSBmb2xkZXIgdG8gdXNlIGFzIHRoZSByb290IGRpcmVjdG9yeS5cblx0Zm9sZGVyOiBzdHJpbmc7XG5cdC8vIFRoZSBmaWxlIHN5c3RlbSB0byB3cmFwLlxuXHR3cmFwcGVkOiBGaWxlU3lzdGVtO1xufVxuXG4vKipcbiAqIFRoZSBGb2xkZXJBZGFwdGVyIGZpbGUgc3lzdGVtIHdyYXBzIGEgZmlsZSBzeXN0ZW0sIGFuZCBzY29wZXMgYWxsIGludGVyYWN0aW9ucyB0byBhIHN1YmZvbGRlciBvZiB0aGF0IGZpbGUgc3lzdGVtLlxuICpcbiAqIEV4YW1wbGU6IEdpdmVuIGEgZmlsZSBzeXN0ZW0gYGZvb2Agd2l0aCBmb2xkZXIgYGJhcmAgYW5kIGZpbGUgYGJhci9iYXpgLi4uXG4gKlxuICogYGBgamF2YXNjcmlwdFxuICogQnJvd3NlckZTLmNvbmZpZ3VyZSh7XG4gKiAgIGZzOiBcIkZvbGRlckFkYXB0ZXJcIixcbiAqICAgb3B0aW9uczoge1xuICogICAgIGZvbGRlcjogXCJiYXJcIixcbiAqICAgICB3cmFwcGVkOiBmb29cbiAqICAgfVxuICogfSwgZnVuY3Rpb24oZSkge1xuICogICB2YXIgZnMgPSBCcm93c2VyRlMuQkZTUmVxdWlyZSgnZnMnKTtcbiAqICAgZnMucmVhZGRpclN5bmMoJy8nKTsgLy8gWydiYXonXVxuICogfSk7XG4gKiBgYGBcbiAqL1xuZXhwb3J0IGRlZmF1bHQgY2xhc3MgRm9sZGVyQWRhcHRlciBleHRlbmRzIEJhc2VGaWxlU3lzdGVtIGltcGxlbWVudHMgRmlsZVN5c3RlbSB7XG5cdHB1YmxpYyBzdGF0aWMgcmVhZG9ubHkgTmFtZSA9ICdGb2xkZXJBZGFwdGVyJztcblxuXHRwdWJsaWMgc3RhdGljIHJlYWRvbmx5IE9wdGlvbnM6IEZpbGVTeXN0ZW1PcHRpb25zID0ge1xuXHRcdGZvbGRlcjoge1xuXHRcdFx0dHlwZTogJ3N0cmluZycsXG5cdFx0XHRkZXNjcmlwdGlvbjogJ1RoZSBmb2xkZXIgdG8gdXNlIGFzIHRoZSByb290IGRpcmVjdG9yeScsXG5cdFx0fSxcblx0XHR3cmFwcGVkOiB7XG5cdFx0XHR0eXBlOiAnb2JqZWN0Jyxcblx0XHRcdGRlc2NyaXB0aW9uOiAnVGhlIGZpbGUgc3lzdGVtIHRvIHdyYXAnLFxuXHRcdH0sXG5cdH07XG5cblx0LyoqXG5cdCAqIENyZWF0ZXMgYSBGb2xkZXJBZGFwdGVyIGluc3RhbmNlIHdpdGggdGhlIGdpdmVuIG9wdGlvbnMuXG5cdCAqL1xuXHRwdWJsaWMgc3RhdGljIENyZWF0ZShvcHRzOiBGb2xkZXJBZGFwdGVyT3B0aW9ucywgY2I6IEJGU0NhbGxiYWNrPEZvbGRlckFkYXB0ZXI+KTogdm9pZCB7XG5cdFx0Y29uc3QgZmEgPSBuZXcgRm9sZGVyQWRhcHRlcihvcHRzLmZvbGRlciwgb3B0cy53cmFwcGVkKTtcblx0XHRmYS5faW5pdGlhbGl6ZShmdW5jdGlvbiAoZT8pIHtcblx0XHRcdGlmIChlKSB7XG5cdFx0XHRcdGNiKGUpO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0Y2IobnVsbCwgZmEpO1xuXHRcdFx0fVxuXHRcdH0pO1xuXHR9XG5cblx0cHVibGljIHN0YXRpYyBDcmVhdGVBc3luYyhvcHRzOiBGb2xkZXJBZGFwdGVyT3B0aW9ucyk6IFByb21pc2U8Rm9sZGVyQWRhcHRlcj4ge1xuXHRcdHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG5cdFx0XHR0aGlzLkNyZWF0ZShvcHRzLCAoZXJyb3IsIGZzKSA9PiB7XG5cdFx0XHRcdGlmIChlcnJvciB8fCAhZnMpIHtcblx0XHRcdFx0XHRyZWplY3QoZXJyb3IpO1xuXHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdHJlc29sdmUoZnMpO1xuXHRcdFx0XHR9XG5cdFx0XHR9KTtcblx0XHR9KTtcblx0fVxuXG5cdHB1YmxpYyBzdGF0aWMgaXNBdmFpbGFibGUoKTogYm9vbGVhbiB7XG5cdFx0cmV0dXJuIHRydWU7XG5cdH1cblxuXHRwdWJsaWMgX3dyYXBwZWQ6IEZpbGVTeXN0ZW07XG5cdHB1YmxpYyBfZm9sZGVyOiBzdHJpbmc7XG5cblx0cHJpdmF0ZSBjb25zdHJ1Y3Rvcihmb2xkZXI6IHN0cmluZywgd3JhcHBlZDogRmlsZVN5c3RlbSkge1xuXHRcdHN1cGVyKCk7XG5cdFx0dGhpcy5fZm9sZGVyID0gZm9sZGVyO1xuXHRcdHRoaXMuX3dyYXBwZWQgPSB3cmFwcGVkO1xuXHR9XG5cblx0cHVibGljIGdldE5hbWUoKTogc3RyaW5nIHtcblx0XHRyZXR1cm4gdGhpcy5fd3JhcHBlZC5nZXROYW1lKCk7XG5cdH1cblx0cHVibGljIGlzUmVhZE9ubHkoKTogYm9vbGVhbiB7XG5cdFx0cmV0dXJuIHRoaXMuX3dyYXBwZWQuaXNSZWFkT25seSgpO1xuXHR9XG5cdHB1YmxpYyBzdXBwb3J0c1Byb3BzKCk6IGJvb2xlYW4ge1xuXHRcdHJldHVybiB0aGlzLl93cmFwcGVkLnN1cHBvcnRzUHJvcHMoKTtcblx0fVxuXHRwdWJsaWMgc3VwcG9ydHNTeW5jaCgpOiBib29sZWFuIHtcblx0XHRyZXR1cm4gdGhpcy5fd3JhcHBlZC5zdXBwb3J0c1N5bmNoKCk7XG5cdH1cblx0cHVibGljIHN1cHBvcnRzTGlua3MoKTogYm9vbGVhbiB7XG5cdFx0cmV0dXJuIGZhbHNlO1xuXHR9XG5cblx0LyoqXG5cdCAqIEluaXRpYWxpemUgdGhlIGZpbGUgc3lzdGVtLiBFbnN1cmVzIHRoYXQgdGhlIHdyYXBwZWQgZmlsZSBzeXN0ZW1cblx0ICogaGFzIHRoZSBnaXZlbiBmb2xkZXIuXG5cdCAqL1xuXHRwcml2YXRlIF9pbml0aWFsaXplKGNiOiAoZT86IEFwaUVycm9yKSA9PiB2b2lkKSB7XG5cdFx0dGhpcy5fd3JhcHBlZC5leGlzdHModGhpcy5fZm9sZGVyLCBDcmVkLlJvb3QsIChleGlzdHM6IGJvb2xlYW4pID0+IHtcblx0XHRcdGlmIChleGlzdHMpIHtcblx0XHRcdFx0Y2IoKTtcblx0XHRcdH0gZWxzZSBpZiAodGhpcy5fd3JhcHBlZC5pc1JlYWRPbmx5KCkpIHtcblx0XHRcdFx0Y2IoQXBpRXJyb3IuRU5PRU5UKHRoaXMuX2ZvbGRlcikpO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0dGhpcy5fd3JhcHBlZC5ta2Rpcih0aGlzLl9mb2xkZXIsIDB4MWZmLCBDcmVkLlJvb3QsIGNiKTtcblx0XHRcdH1cblx0XHR9KTtcblx0fVxufVxuXG4vKipcbiAqIEBoaWRkZW5cbiAqL1xuZnVuY3Rpb24gdHJhbnNsYXRlRXJyb3IoZm9sZGVyOiBzdHJpbmcsIGU6IGFueSk6IGFueSB7XG5cdGlmIChlICE9PSBudWxsICYmIHR5cGVvZiBlID09PSAnb2JqZWN0Jykge1xuXHRcdGNvbnN0IGVyciA9IDxBcGlFcnJvcj5lO1xuXHRcdGxldCBwID0gZXJyLnBhdGg7XG5cdFx0aWYgKHApIHtcblx0XHRcdHAgPSAnLycgKyBwYXRoLnJlbGF0aXZlKGZvbGRlciwgcCk7XG5cdFx0XHRlcnIubWVzc2FnZSA9IGVyci5tZXNzYWdlLnJlcGxhY2UoZXJyLnBhdGghLCBwKTtcblx0XHRcdGVyci5wYXRoID0gcDtcblx0XHR9XG5cdH1cblx0cmV0dXJuIGU7XG59XG5cbi8qKlxuICogQGhpZGRlblxuICovXG5mdW5jdGlvbiB3cmFwQ2FsbGJhY2soZm9sZGVyOiBzdHJpbmcsIGNiOiBhbnkpOiBhbnkge1xuXHRpZiAodHlwZW9mIGNiID09PSAnZnVuY3Rpb24nKSB7XG5cdFx0cmV0dXJuIGZ1bmN0aW9uIChlcnI6IEFwaUVycm9yKSB7XG5cdFx0XHRpZiAoYXJndW1lbnRzLmxlbmd0aCA+IDApIHtcblx0XHRcdFx0YXJndW1lbnRzWzBdID0gdHJhbnNsYXRlRXJyb3IoZm9sZGVyLCBlcnIpO1xuXHRcdFx0fVxuXHRcdFx0KDxGdW5jdGlvbj5jYikuYXBwbHkobnVsbCwgYXJndW1lbnRzKTtcblx0XHR9O1xuXHR9IGVsc2Uge1xuXHRcdHJldHVybiBjYjtcblx0fVxufVxuXG4vKipcbiAqIEBoaWRkZW5cbiAqL1xuZnVuY3Rpb24gd3JhcEZ1bmN0aW9uKG5hbWU6IHN0cmluZywgd3JhcEZpcnN0OiBib29sZWFuLCB3cmFwU2Vjb25kOiBib29sZWFuKTogRnVuY3Rpb24ge1xuXHRpZiAobmFtZS5zbGljZShuYW1lLmxlbmd0aCAtIDQpICE9PSAnU3luYycpIHtcblx0XHQvLyBBc3luYyBmdW5jdGlvbi4gVHJhbnNsYXRlIGVycm9yIGluIGNhbGxiYWNrLlxuXHRcdHJldHVybiBmdW5jdGlvbiAodGhpczogRm9sZGVyQWRhcHRlcikge1xuXHRcdFx0aWYgKGFyZ3VtZW50cy5sZW5ndGggPiAwKSB7XG5cdFx0XHRcdGlmICh3cmFwRmlyc3QpIHtcblx0XHRcdFx0XHRhcmd1bWVudHNbMF0gPSBwYXRoLmpvaW4odGhpcy5fZm9sZGVyLCBhcmd1bWVudHNbMF0pO1xuXHRcdFx0XHR9XG5cdFx0XHRcdGlmICh3cmFwU2Vjb25kKSB7XG5cdFx0XHRcdFx0YXJndW1lbnRzWzFdID0gcGF0aC5qb2luKHRoaXMuX2ZvbGRlciwgYXJndW1lbnRzWzFdKTtcblx0XHRcdFx0fVxuXHRcdFx0XHRhcmd1bWVudHNbYXJndW1lbnRzLmxlbmd0aCAtIDFdID0gd3JhcENhbGxiYWNrKHRoaXMuX2ZvbGRlciwgYXJndW1lbnRzW2FyZ3VtZW50cy5sZW5ndGggLSAxXSk7XG5cdFx0XHR9XG5cdFx0XHRyZXR1cm4gKDxhbnk+dGhpcy5fd3JhcHBlZClbbmFtZV0uYXBwbHkodGhpcy5fd3JhcHBlZCwgYXJndW1lbnRzKTtcblx0XHR9O1xuXHR9IGVsc2Uge1xuXHRcdC8vIFN5bmMgZnVuY3Rpb24uIFRyYW5zbGF0ZSBlcnJvciBpbiBjYXRjaC5cblx0XHRyZXR1cm4gZnVuY3Rpb24gKHRoaXM6IEZvbGRlckFkYXB0ZXIpIHtcblx0XHRcdHRyeSB7XG5cdFx0XHRcdGlmICh3cmFwRmlyc3QpIHtcblx0XHRcdFx0XHRhcmd1bWVudHNbMF0gPSBwYXRoLmpvaW4odGhpcy5fZm9sZGVyLCBhcmd1bWVudHNbMF0pO1xuXHRcdFx0XHR9XG5cdFx0XHRcdGlmICh3cmFwU2Vjb25kKSB7XG5cdFx0XHRcdFx0YXJndW1lbnRzWzFdID0gcGF0aC5qb2luKHRoaXMuX2ZvbGRlciwgYXJndW1lbnRzWzFdKTtcblx0XHRcdFx0fVxuXHRcdFx0XHRyZXR1cm4gKDxhbnk+dGhpcy5fd3JhcHBlZClbbmFtZV0uYXBwbHkodGhpcy5fd3JhcHBlZCwgYXJndW1lbnRzKTtcblx0XHRcdH0gY2F0Y2ggKGUpIHtcblx0XHRcdFx0dGhyb3cgdHJhbnNsYXRlRXJyb3IodGhpcy5fZm9sZGVyLCBlKTtcblx0XHRcdH1cblx0XHR9O1xuXHR9XG59XG5cbi8vIEZpcnN0IGFyZ3VtZW50IGlzIGEgcGF0aC5cbltcblx0J2Rpc2tTcGFjZScsXG5cdCdzdGF0Jyxcblx0J3N0YXRTeW5jJyxcblx0J29wZW4nLFxuXHQnb3BlblN5bmMnLFxuXHQndW5saW5rJyxcblx0J3VubGlua1N5bmMnLFxuXHQncm1kaXInLFxuXHQncm1kaXJTeW5jJyxcblx0J21rZGlyJyxcblx0J21rZGlyU3luYycsXG5cdCdyZWFkZGlyJyxcblx0J3JlYWRkaXJTeW5jJyxcblx0J2V4aXN0cycsXG5cdCdleGlzdHNTeW5jJyxcblx0J3JlYWxwYXRoJyxcblx0J3JlYWxwYXRoU3luYycsXG5cdCd0cnVuY2F0ZScsXG5cdCd0cnVuY2F0ZVN5bmMnLFxuXHQncmVhZEZpbGUnLFxuXHQncmVhZEZpbGVTeW5jJyxcblx0J3dyaXRlRmlsZScsXG5cdCd3cml0ZUZpbGVTeW5jJyxcblx0J2FwcGVuZEZpbGUnLFxuXHQnYXBwZW5kRmlsZVN5bmMnLFxuXHQnY2htb2QnLFxuXHQnY2htb2RTeW5jJyxcblx0J2Nob3duJyxcblx0J2Nob3duU3luYycsXG5cdCd1dGltZXMnLFxuXHQndXRpbWVzU3luYycsXG5cdCdyZWFkbGluaycsXG5cdCdyZWFkbGlua1N5bmMnLFxuXS5mb3JFYWNoKChuYW1lOiBzdHJpbmcpID0+IHtcblx0KDxhbnk+Rm9sZGVyQWRhcHRlci5wcm90b3R5cGUpW25hbWVdID0gd3JhcEZ1bmN0aW9uKG5hbWUsIHRydWUsIGZhbHNlKTtcbn0pO1xuXG4vLyBGaXJzdCBhbmQgc2Vjb25kIGFyZ3VtZW50cyBhcmUgcGF0aHMuXG5bJ3JlbmFtZScsICdyZW5hbWVTeW5jJywgJ2xpbmsnLCAnbGlua1N5bmMnLCAnc3ltbGluaycsICdzeW1saW5rU3luYyddLmZvckVhY2goKG5hbWU6IHN0cmluZykgPT4ge1xuXHQoPGFueT5Gb2xkZXJBZGFwdGVyLnByb3RvdHlwZSlbbmFtZV0gPSB3cmFwRnVuY3Rpb24obmFtZSwgdHJ1ZSwgdHJ1ZSk7XG59KTtcbiIsICIvLyBzaGltIGZvciB1c2luZyBwcm9jZXNzIGluIGJyb3dzZXJcbi8vIGJhc2VkIG9mZiBodHRwczovL2dpdGh1Yi5jb20vZGVmdW5jdHpvbWJpZS9ub2RlLXByb2Nlc3MvYmxvYi9tYXN0ZXIvYnJvd3Nlci5qc1xuXG5mdW5jdGlvbiBkZWZhdWx0U2V0VGltb3V0KCkge1xuICAgIHRocm93IG5ldyBFcnJvcignc2V0VGltZW91dCBoYXMgbm90IGJlZW4gZGVmaW5lZCcpO1xufVxuZnVuY3Rpb24gZGVmYXVsdENsZWFyVGltZW91dCAoKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdjbGVhclRpbWVvdXQgaGFzIG5vdCBiZWVuIGRlZmluZWQnKTtcbn1cbnZhciBjYWNoZWRTZXRUaW1lb3V0ID0gZGVmYXVsdFNldFRpbW91dDtcbnZhciBjYWNoZWRDbGVhclRpbWVvdXQgPSBkZWZhdWx0Q2xlYXJUaW1lb3V0O1xuaWYgKHR5cGVvZiBnbG9iYWwuc2V0VGltZW91dCA9PT0gJ2Z1bmN0aW9uJykge1xuICAgIGNhY2hlZFNldFRpbWVvdXQgPSBzZXRUaW1lb3V0O1xufVxuaWYgKHR5cGVvZiBnbG9iYWwuY2xlYXJUaW1lb3V0ID09PSAnZnVuY3Rpb24nKSB7XG4gICAgY2FjaGVkQ2xlYXJUaW1lb3V0ID0gY2xlYXJUaW1lb3V0O1xufVxuXG5mdW5jdGlvbiBydW5UaW1lb3V0KGZ1bikge1xuICAgIGlmIChjYWNoZWRTZXRUaW1lb3V0ID09PSBzZXRUaW1lb3V0KSB7XG4gICAgICAgIC8vbm9ybWFsIGVudmlyb21lbnRzIGluIHNhbmUgc2l0dWF0aW9uc1xuICAgICAgICByZXR1cm4gc2V0VGltZW91dChmdW4sIDApO1xuICAgIH1cbiAgICAvLyBpZiBzZXRUaW1lb3V0IHdhc24ndCBhdmFpbGFibGUgYnV0IHdhcyBsYXR0ZXIgZGVmaW5lZFxuICAgIGlmICgoY2FjaGVkU2V0VGltZW91dCA9PT0gZGVmYXVsdFNldFRpbW91dCB8fCAhY2FjaGVkU2V0VGltZW91dCkgJiYgc2V0VGltZW91dCkge1xuICAgICAgICBjYWNoZWRTZXRUaW1lb3V0ID0gc2V0VGltZW91dDtcbiAgICAgICAgcmV0dXJuIHNldFRpbWVvdXQoZnVuLCAwKTtcbiAgICB9XG4gICAgdHJ5IHtcbiAgICAgICAgLy8gd2hlbiB3aGVuIHNvbWVib2R5IGhhcyBzY3Jld2VkIHdpdGggc2V0VGltZW91dCBidXQgbm8gSS5FLiBtYWRkbmVzc1xuICAgICAgICByZXR1cm4gY2FjaGVkU2V0VGltZW91dChmdW4sIDApO1xuICAgIH0gY2F0Y2goZSl7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICAvLyBXaGVuIHdlIGFyZSBpbiBJLkUuIGJ1dCB0aGUgc2NyaXB0IGhhcyBiZWVuIGV2YWxlZCBzbyBJLkUuIGRvZXNuJ3QgdHJ1c3QgdGhlIGdsb2JhbCBvYmplY3Qgd2hlbiBjYWxsZWQgbm9ybWFsbHlcbiAgICAgICAgICAgIHJldHVybiBjYWNoZWRTZXRUaW1lb3V0LmNhbGwobnVsbCwgZnVuLCAwKTtcbiAgICAgICAgfSBjYXRjaChlKXtcbiAgICAgICAgICAgIC8vIHNhbWUgYXMgYWJvdmUgYnV0IHdoZW4gaXQncyBhIHZlcnNpb24gb2YgSS5FLiB0aGF0IG11c3QgaGF2ZSB0aGUgZ2xvYmFsIG9iamVjdCBmb3IgJ3RoaXMnLCBob3BmdWxseSBvdXIgY29udGV4dCBjb3JyZWN0IG90aGVyd2lzZSBpdCB3aWxsIHRocm93IGEgZ2xvYmFsIGVycm9yXG4gICAgICAgICAgICByZXR1cm4gY2FjaGVkU2V0VGltZW91dC5jYWxsKHRoaXMsIGZ1biwgMCk7XG4gICAgICAgIH1cbiAgICB9XG5cblxufVxuZnVuY3Rpb24gcnVuQ2xlYXJUaW1lb3V0KG1hcmtlcikge1xuICAgIGlmIChjYWNoZWRDbGVhclRpbWVvdXQgPT09IGNsZWFyVGltZW91dCkge1xuICAgICAgICAvL25vcm1hbCBlbnZpcm9tZW50cyBpbiBzYW5lIHNpdHVhdGlvbnNcbiAgICAgICAgcmV0dXJuIGNsZWFyVGltZW91dChtYXJrZXIpO1xuICAgIH1cbiAgICAvLyBpZiBjbGVhclRpbWVvdXQgd2Fzbid0IGF2YWlsYWJsZSBidXQgd2FzIGxhdHRlciBkZWZpbmVkXG4gICAgaWYgKChjYWNoZWRDbGVhclRpbWVvdXQgPT09IGRlZmF1bHRDbGVhclRpbWVvdXQgfHwgIWNhY2hlZENsZWFyVGltZW91dCkgJiYgY2xlYXJUaW1lb3V0KSB7XG4gICAgICAgIGNhY2hlZENsZWFyVGltZW91dCA9IGNsZWFyVGltZW91dDtcbiAgICAgICAgcmV0dXJuIGNsZWFyVGltZW91dChtYXJrZXIpO1xuICAgIH1cbiAgICB0cnkge1xuICAgICAgICAvLyB3aGVuIHdoZW4gc29tZWJvZHkgaGFzIHNjcmV3ZWQgd2l0aCBzZXRUaW1lb3V0IGJ1dCBubyBJLkUuIG1hZGRuZXNzXG4gICAgICAgIHJldHVybiBjYWNoZWRDbGVhclRpbWVvdXQobWFya2VyKTtcbiAgICB9IGNhdGNoIChlKXtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIC8vIFdoZW4gd2UgYXJlIGluIEkuRS4gYnV0IHRoZSBzY3JpcHQgaGFzIGJlZW4gZXZhbGVkIHNvIEkuRS4gZG9lc24ndCAgdHJ1c3QgdGhlIGdsb2JhbCBvYmplY3Qgd2hlbiBjYWxsZWQgbm9ybWFsbHlcbiAgICAgICAgICAgIHJldHVybiBjYWNoZWRDbGVhclRpbWVvdXQuY2FsbChudWxsLCBtYXJrZXIpO1xuICAgICAgICB9IGNhdGNoIChlKXtcbiAgICAgICAgICAgIC8vIHNhbWUgYXMgYWJvdmUgYnV0IHdoZW4gaXQncyBhIHZlcnNpb24gb2YgSS5FLiB0aGF0IG11c3QgaGF2ZSB0aGUgZ2xvYmFsIG9iamVjdCBmb3IgJ3RoaXMnLCBob3BmdWxseSBvdXIgY29udGV4dCBjb3JyZWN0IG90aGVyd2lzZSBpdCB3aWxsIHRocm93IGEgZ2xvYmFsIGVycm9yLlxuICAgICAgICAgICAgLy8gU29tZSB2ZXJzaW9ucyBvZiBJLkUuIGhhdmUgZGlmZmVyZW50IHJ1bGVzIGZvciBjbGVhclRpbWVvdXQgdnMgc2V0VGltZW91dFxuICAgICAgICAgICAgcmV0dXJuIGNhY2hlZENsZWFyVGltZW91dC5jYWxsKHRoaXMsIG1hcmtlcik7XG4gICAgICAgIH1cbiAgICB9XG5cblxuXG59XG52YXIgcXVldWUgPSBbXTtcbnZhciBkcmFpbmluZyA9IGZhbHNlO1xudmFyIGN1cnJlbnRRdWV1ZTtcbnZhciBxdWV1ZUluZGV4ID0gLTE7XG5cbmZ1bmN0aW9uIGNsZWFuVXBOZXh0VGljaygpIHtcbiAgICBpZiAoIWRyYWluaW5nIHx8ICFjdXJyZW50UXVldWUpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBkcmFpbmluZyA9IGZhbHNlO1xuICAgIGlmIChjdXJyZW50UXVldWUubGVuZ3RoKSB7XG4gICAgICAgIHF1ZXVlID0gY3VycmVudFF1ZXVlLmNvbmNhdChxdWV1ZSk7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgcXVldWVJbmRleCA9IC0xO1xuICAgIH1cbiAgICBpZiAocXVldWUubGVuZ3RoKSB7XG4gICAgICAgIGRyYWluUXVldWUoKTtcbiAgICB9XG59XG5cbmZ1bmN0aW9uIGRyYWluUXVldWUoKSB7XG4gICAgaWYgKGRyYWluaW5nKSB7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG4gICAgdmFyIHRpbWVvdXQgPSBydW5UaW1lb3V0KGNsZWFuVXBOZXh0VGljayk7XG4gICAgZHJhaW5pbmcgPSB0cnVlO1xuXG4gICAgdmFyIGxlbiA9IHF1ZXVlLmxlbmd0aDtcbiAgICB3aGlsZShsZW4pIHtcbiAgICAgICAgY3VycmVudFF1ZXVlID0gcXVldWU7XG4gICAgICAgIHF1ZXVlID0gW107XG4gICAgICAgIHdoaWxlICgrK3F1ZXVlSW5kZXggPCBsZW4pIHtcbiAgICAgICAgICAgIGlmIChjdXJyZW50UXVldWUpIHtcbiAgICAgICAgICAgICAgICBjdXJyZW50UXVldWVbcXVldWVJbmRleF0ucnVuKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcXVldWVJbmRleCA9IC0xO1xuICAgICAgICBsZW4gPSBxdWV1ZS5sZW5ndGg7XG4gICAgfVxuICAgIGN1cnJlbnRRdWV1ZSA9IG51bGw7XG4gICAgZHJhaW5pbmcgPSBmYWxzZTtcbiAgICBydW5DbGVhclRpbWVvdXQodGltZW91dCk7XG59XG5mdW5jdGlvbiBuZXh0VGljayhmdW4pIHtcbiAgICB2YXIgYXJncyA9IG5ldyBBcnJheShhcmd1bWVudHMubGVuZ3RoIC0gMSk7XG4gICAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPiAxKSB7XG4gICAgICAgIGZvciAodmFyIGkgPSAxOyBpIDwgYXJndW1lbnRzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBhcmdzW2kgLSAxXSA9IGFyZ3VtZW50c1tpXTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBxdWV1ZS5wdXNoKG5ldyBJdGVtKGZ1biwgYXJncykpO1xuICAgIGlmIChxdWV1ZS5sZW5ndGggPT09IDEgJiYgIWRyYWluaW5nKSB7XG4gICAgICAgIHJ1blRpbWVvdXQoZHJhaW5RdWV1ZSk7XG4gICAgfVxufVxuLy8gdjggbGlrZXMgcHJlZGljdGlibGUgb2JqZWN0c1xuZnVuY3Rpb24gSXRlbShmdW4sIGFycmF5KSB7XG4gICAgdGhpcy5mdW4gPSBmdW47XG4gICAgdGhpcy5hcnJheSA9IGFycmF5O1xufVxuSXRlbS5wcm90b3R5cGUucnVuID0gZnVuY3Rpb24gKCkge1xuICAgIHRoaXMuZnVuLmFwcGx5KG51bGwsIHRoaXMuYXJyYXkpO1xufTtcbnZhciB0aXRsZSA9ICdicm93c2VyJztcbnZhciBwbGF0Zm9ybSA9ICdicm93c2VyJztcbnZhciBicm93c2VyID0gdHJ1ZTtcbnZhciBlbnYgPSB7fTtcbnZhciBhcmd2ID0gW107XG52YXIgdmVyc2lvbiA9ICcnOyAvLyBlbXB0eSBzdHJpbmcgdG8gYXZvaWQgcmVnZXhwIGlzc3Vlc1xudmFyIHZlcnNpb25zID0ge307XG52YXIgcmVsZWFzZSA9IHt9O1xudmFyIGNvbmZpZyA9IHt9O1xuXG5mdW5jdGlvbiBub29wKCkge31cblxudmFyIG9uID0gbm9vcDtcbnZhciBhZGRMaXN0ZW5lciA9IG5vb3A7XG52YXIgb25jZSA9IG5vb3A7XG52YXIgb2ZmID0gbm9vcDtcbnZhciByZW1vdmVMaXN0ZW5lciA9IG5vb3A7XG52YXIgcmVtb3ZlQWxsTGlzdGVuZXJzID0gbm9vcDtcbnZhciBlbWl0ID0gbm9vcDtcblxuZnVuY3Rpb24gYmluZGluZyhuYW1lKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdwcm9jZXNzLmJpbmRpbmcgaXMgbm90IHN1cHBvcnRlZCcpO1xufVxuXG5mdW5jdGlvbiBjd2QgKCkgeyByZXR1cm4gJy8nIH1cbmZ1bmN0aW9uIGNoZGlyIChkaXIpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ3Byb2Nlc3MuY2hkaXIgaXMgbm90IHN1cHBvcnRlZCcpO1xufWZ1bmN0aW9uIHVtYXNrKCkgeyByZXR1cm4gMDsgfVxuXG4vLyBmcm9tIGh0dHBzOi8vZ2l0aHViLmNvbS9rdW1hdmlzL2Jyb3dzZXItcHJvY2Vzcy1ocnRpbWUvYmxvYi9tYXN0ZXIvaW5kZXguanNcbnZhciBwZXJmb3JtYW5jZSA9IGdsb2JhbC5wZXJmb3JtYW5jZSB8fCB7fTtcbnZhciBwZXJmb3JtYW5jZU5vdyA9XG4gIHBlcmZvcm1hbmNlLm5vdyAgICAgICAgfHxcbiAgcGVyZm9ybWFuY2UubW96Tm93ICAgICB8fFxuICBwZXJmb3JtYW5jZS5tc05vdyAgICAgIHx8XG4gIHBlcmZvcm1hbmNlLm9Ob3cgICAgICAgfHxcbiAgcGVyZm9ybWFuY2Uud2Via2l0Tm93ICB8fFxuICBmdW5jdGlvbigpeyByZXR1cm4gKG5ldyBEYXRlKCkpLmdldFRpbWUoKSB9O1xuXG4vLyBnZW5lcmF0ZSB0aW1lc3RhbXAgb3IgZGVsdGFcbi8vIHNlZSBodHRwOi8vbm9kZWpzLm9yZy9hcGkvcHJvY2Vzcy5odG1sI3Byb2Nlc3NfcHJvY2Vzc19ocnRpbWVcbmZ1bmN0aW9uIGhydGltZShwcmV2aW91c1RpbWVzdGFtcCl7XG4gIHZhciBjbG9ja3RpbWUgPSBwZXJmb3JtYW5jZU5vdy5jYWxsKHBlcmZvcm1hbmNlKSoxZS0zO1xuICB2YXIgc2Vjb25kcyA9IE1hdGguZmxvb3IoY2xvY2t0aW1lKTtcbiAgdmFyIG5hbm9zZWNvbmRzID0gTWF0aC5mbG9vcigoY2xvY2t0aW1lJTEpKjFlOSk7XG4gIGlmIChwcmV2aW91c1RpbWVzdGFtcCkge1xuICAgIHNlY29uZHMgPSBzZWNvbmRzIC0gcHJldmlvdXNUaW1lc3RhbXBbMF07XG4gICAgbmFub3NlY29uZHMgPSBuYW5vc2Vjb25kcyAtIHByZXZpb3VzVGltZXN0YW1wWzFdO1xuICAgIGlmIChuYW5vc2Vjb25kczwwKSB7XG4gICAgICBzZWNvbmRzLS07XG4gICAgICBuYW5vc2Vjb25kcyArPSAxZTk7XG4gICAgfVxuICB9XG4gIHJldHVybiBbc2Vjb25kcyxuYW5vc2Vjb25kc11cbn1cblxudmFyIHN0YXJ0VGltZSA9IG5ldyBEYXRlKCk7XG5mdW5jdGlvbiB1cHRpbWUoKSB7XG4gIHZhciBjdXJyZW50VGltZSA9IG5ldyBEYXRlKCk7XG4gIHZhciBkaWYgPSBjdXJyZW50VGltZSAtIHN0YXJ0VGltZTtcbiAgcmV0dXJuIGRpZiAvIDEwMDA7XG59XG5cbnZhciBicm93c2VyJDEgPSB7XG4gIG5leHRUaWNrOiBuZXh0VGljayxcbiAgdGl0bGU6IHRpdGxlLFxuICBicm93c2VyOiBicm93c2VyLFxuICBlbnY6IGVudixcbiAgYXJndjogYXJndixcbiAgdmVyc2lvbjogdmVyc2lvbixcbiAgdmVyc2lvbnM6IHZlcnNpb25zLFxuICBvbjogb24sXG4gIGFkZExpc3RlbmVyOiBhZGRMaXN0ZW5lcixcbiAgb25jZTogb25jZSxcbiAgb2ZmOiBvZmYsXG4gIHJlbW92ZUxpc3RlbmVyOiByZW1vdmVMaXN0ZW5lcixcbiAgcmVtb3ZlQWxsTGlzdGVuZXJzOiByZW1vdmVBbGxMaXN0ZW5lcnMsXG4gIGVtaXQ6IGVtaXQsXG4gIGJpbmRpbmc6IGJpbmRpbmcsXG4gIGN3ZDogY3dkLFxuICBjaGRpcjogY2hkaXIsXG4gIHVtYXNrOiB1bWFzayxcbiAgaHJ0aW1lOiBocnRpbWUsXG4gIHBsYXRmb3JtOiBwbGF0Zm9ybSxcbiAgcmVsZWFzZTogcmVsZWFzZSxcbiAgY29uZmlnOiBjb25maWcsXG4gIHVwdGltZTogdXB0aW1lXG59O1xuXG5leHBvcnQgZGVmYXVsdCBicm93c2VyJDE7XG5leHBvcnQgeyBhZGRMaXN0ZW5lciwgYXJndiwgYmluZGluZywgYnJvd3NlciwgY2hkaXIsIGNvbmZpZywgY3dkLCBlbWl0LCBlbnYsIGhydGltZSwgbmV4dFRpY2ssIG9mZiwgb24sIG9uY2UsIHBsYXRmb3JtLCByZWxlYXNlLCByZW1vdmVBbGxMaXN0ZW5lcnMsIHJlbW92ZUxpc3RlbmVyLCB0aXRsZSwgdW1hc2ssIHVwdGltZSwgdmVyc2lvbiwgdmVyc2lvbnMgfTtcbiIsICJpbXBvcnQgeyBkZWZhdWx0IGFzIFN0YXRzLCBGaWxlVHlwZSB9IGZyb20gJy4uL2NvcmUvc3RhdHMnO1xuaW1wb3J0IHsgQnVmZmVyIH0gZnJvbSAnYnVmZmVyJztcblxuLyoqXG4gKiBHZW5lcmljIGlub2RlIGRlZmluaXRpb24gdGhhdCBjYW4gZWFzaWx5IGJlIHNlcmlhbGl6ZWQuXG4gKi9cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIElub2RlIHtcblx0LyoqXG5cdCAqIENvbnZlcnRzIHRoZSBidWZmZXIgaW50byBhbiBJbm9kZS5cblx0ICovXG5cdHB1YmxpYyBzdGF0aWMgZnJvbUJ1ZmZlcihidWZmZXI6IEJ1ZmZlcik6IElub2RlIHtcblx0XHRpZiAoYnVmZmVyID09PSB1bmRlZmluZWQpIHtcblx0XHRcdHRocm93IG5ldyBFcnJvcignTk8nKTtcblx0XHR9XG5cdFx0cmV0dXJuIG5ldyBJbm9kZShcblx0XHRcdGJ1ZmZlci50b1N0cmluZygnYXNjaWknLCAzOCksXG5cdFx0XHRidWZmZXIucmVhZFVJbnQzMkxFKDApLFxuXHRcdFx0YnVmZmVyLnJlYWRVSW50MTZMRSg0KSxcblx0XHRcdGJ1ZmZlci5yZWFkRG91YmxlTEUoNiksXG5cdFx0XHRidWZmZXIucmVhZERvdWJsZUxFKDE0KSxcblx0XHRcdGJ1ZmZlci5yZWFkRG91YmxlTEUoMjIpLFxuXHRcdFx0YnVmZmVyLnJlYWRVSW50MzJMRSgzMCksXG5cdFx0XHRidWZmZXIucmVhZFVJbnQzMkxFKDM0KVxuXHRcdCk7XG5cdH1cblxuXHRjb25zdHJ1Y3Rvcihcblx0XHRwdWJsaWMgaWQ6IHN0cmluZyxcblx0XHRwdWJsaWMgc2l6ZTogbnVtYmVyLFxuXHRcdHB1YmxpYyBtb2RlOiBudW1iZXIsXG5cdFx0cHVibGljIGF0aW1lOiBudW1iZXIsXG5cdFx0cHVibGljIG10aW1lOiBudW1iZXIsXG5cdFx0cHVibGljIGN0aW1lOiBudW1iZXIsXG5cdFx0cHVibGljIHVpZDogbnVtYmVyLFxuXHRcdHB1YmxpYyBnaWQ6IG51bWJlclxuXHQpIHt9XG5cblx0LyoqXG5cdCAqIEhhbmR5IGZ1bmN0aW9uIHRoYXQgY29udmVydHMgdGhlIElub2RlIHRvIGEgTm9kZSBTdGF0cyBvYmplY3QuXG5cdCAqL1xuXHRwdWJsaWMgdG9TdGF0cygpOiBTdGF0cyB7XG5cdFx0cmV0dXJuIG5ldyBTdGF0cyhcblx0XHRcdCh0aGlzLm1vZGUgJiAweGYwMDApID09PSBGaWxlVHlwZS5ESVJFQ1RPUlkgPyBGaWxlVHlwZS5ESVJFQ1RPUlkgOiBGaWxlVHlwZS5GSUxFLFxuXHRcdFx0dGhpcy5zaXplLFxuXHRcdFx0dGhpcy5tb2RlLFxuXHRcdFx0dGhpcy5hdGltZSxcblx0XHRcdHRoaXMubXRpbWUsXG5cdFx0XHR0aGlzLmN0aW1lLFxuXHRcdFx0dGhpcy51aWQsXG5cdFx0XHR0aGlzLmdpZFxuXHRcdCk7XG5cdH1cblxuXHQvKipcblx0ICogR2V0IHRoZSBzaXplIG9mIHRoaXMgSW5vZGUsIGluIGJ5dGVzLlxuXHQgKi9cblx0cHVibGljIGdldFNpemUoKTogbnVtYmVyIHtcblx0XHQvLyBBU1NVTVBUSU9OOiBJRCBpcyBBU0NJSSAoMSBieXRlIHBlciBjaGFyKS5cblx0XHRyZXR1cm4gMzggKyB0aGlzLmlkLmxlbmd0aDtcblx0fVxuXG5cdC8qKlxuXHQgKiBXcml0ZXMgdGhlIGlub2RlIGludG8gdGhlIHN0YXJ0IG9mIHRoZSBidWZmZXIuXG5cdCAqL1xuXHRwdWJsaWMgdG9CdWZmZXIoYnVmZjogQnVmZmVyID0gQnVmZmVyLmFsbG9jKHRoaXMuZ2V0U2l6ZSgpKSk6IEJ1ZmZlciB7XG5cdFx0YnVmZi53cml0ZVVJbnQzMkxFKHRoaXMuc2l6ZSwgMCk7XG5cdFx0YnVmZi53cml0ZVVJbnQxNkxFKHRoaXMubW9kZSwgNCk7XG5cdFx0YnVmZi53cml0ZURvdWJsZUxFKHRoaXMuYXRpbWUsIDYpO1xuXHRcdGJ1ZmYud3JpdGVEb3VibGVMRSh0aGlzLm10aW1lLCAxNCk7XG5cdFx0YnVmZi53cml0ZURvdWJsZUxFKHRoaXMuY3RpbWUsIDIyKTtcblx0XHRidWZmLndyaXRlVUludDMyTEUodGhpcy51aWQsIDMwKTtcblx0XHRidWZmLndyaXRlVUludDMyTEUodGhpcy5naWQsIDM0KTtcblx0XHRidWZmLndyaXRlKHRoaXMuaWQsIDM4LCB0aGlzLmlkLmxlbmd0aCwgJ2FzY2lpJyk7XG5cdFx0cmV0dXJuIGJ1ZmY7XG5cdH1cblxuXHQvKipcblx0ICogVXBkYXRlcyB0aGUgSW5vZGUgdXNpbmcgaW5mb3JtYXRpb24gZnJvbSB0aGUgc3RhdHMgb2JqZWN0LiBVc2VkIGJ5IGZpbGVcblx0ICogc3lzdGVtcyBhdCBzeW5jIHRpbWUsIGUuZy46XG5cdCAqIC0gUHJvZ3JhbSBvcGVucyBmaWxlIGFuZCBnZXRzIGEgRmlsZSBvYmplY3QuXG5cdCAqIC0gUHJvZ3JhbSBtdXRhdGVzIGZpbGUuIEZpbGUgb2JqZWN0IGlzIHJlc3BvbnNpYmxlIGZvciBtYWludGFpbmluZ1xuXHQgKiAgIG1ldGFkYXRhIGNoYW5nZXMgbG9jYWxseSAtLSB0eXBpY2FsbHkgaW4gYSBTdGF0cyBvYmplY3QuXG5cdCAqIC0gUHJvZ3JhbSBjbG9zZXMgZmlsZS4gRmlsZSBvYmplY3QncyBtZXRhZGF0YSBjaGFuZ2VzIGFyZSBzeW5jZWQgd2l0aCB0aGVcblx0ICogICBmaWxlIHN5c3RlbS5cblx0ICogQHJldHVybiBUcnVlIGlmIGFueSBjaGFuZ2VzIGhhdmUgb2NjdXJyZWQuXG5cdCAqL1xuXHRwdWJsaWMgdXBkYXRlKHN0YXRzOiBTdGF0cyk6IGJvb2xlYW4ge1xuXHRcdGxldCBoYXNDaGFuZ2VkID0gZmFsc2U7XG5cdFx0aWYgKHRoaXMuc2l6ZSAhPT0gc3RhdHMuc2l6ZSkge1xuXHRcdFx0dGhpcy5zaXplID0gc3RhdHMuc2l6ZTtcblx0XHRcdGhhc0NoYW5nZWQgPSB0cnVlO1xuXHRcdH1cblxuXHRcdGlmICh0aGlzLm1vZGUgIT09IHN0YXRzLm1vZGUpIHtcblx0XHRcdHRoaXMubW9kZSA9IHN0YXRzLm1vZGU7XG5cdFx0XHRoYXNDaGFuZ2VkID0gdHJ1ZTtcblx0XHR9XG5cblx0XHRjb25zdCBhdGltZU1zID0gc3RhdHMuYXRpbWUuZ2V0VGltZSgpO1xuXHRcdGlmICh0aGlzLmF0aW1lICE9PSBhdGltZU1zKSB7XG5cdFx0XHR0aGlzLmF0aW1lID0gYXRpbWVNcztcblx0XHRcdGhhc0NoYW5nZWQgPSB0cnVlO1xuXHRcdH1cblxuXHRcdGNvbnN0IG10aW1lTXMgPSBzdGF0cy5tdGltZS5nZXRUaW1lKCk7XG5cdFx0aWYgKHRoaXMubXRpbWUgIT09IG10aW1lTXMpIHtcblx0XHRcdHRoaXMubXRpbWUgPSBtdGltZU1zO1xuXHRcdFx0aGFzQ2hhbmdlZCA9IHRydWU7XG5cdFx0fVxuXG5cdFx0Y29uc3QgY3RpbWVNcyA9IHN0YXRzLmN0aW1lLmdldFRpbWUoKTtcblx0XHRpZiAodGhpcy5jdGltZSAhPT0gY3RpbWVNcykge1xuXHRcdFx0dGhpcy5jdGltZSA9IGN0aW1lTXM7XG5cdFx0XHRoYXNDaGFuZ2VkID0gdHJ1ZTtcblx0XHR9XG5cblx0XHRpZiAodGhpcy51aWQgIT09IHN0YXRzLnVpZCkge1xuXHRcdFx0dGhpcy51aWQgPSBzdGF0cy51aWQ7XG5cdFx0XHRoYXNDaGFuZ2VkID0gdHJ1ZTtcblx0XHR9XG5cblx0XHRpZiAodGhpcy51aWQgIT09IHN0YXRzLnVpZCkge1xuXHRcdFx0dGhpcy51aWQgPSBzdGF0cy51aWQ7XG5cdFx0XHRoYXNDaGFuZ2VkID0gdHJ1ZTtcblx0XHR9XG5cblx0XHRyZXR1cm4gaGFzQ2hhbmdlZDtcblx0fVxuXG5cdC8vIFhYWDogQ29waWVkIGZyb20gU3RhdHMuIFNob3VsZCByZWNvbmNpbGUgdGhlc2UgdHdvIGludG8gc29tZXRoaW5nIG1vcmVcblx0Ly8gICAgICBjb21wYWN0LlxuXG5cdC8qKlxuXHQgKiBAcmV0dXJuIFtCb29sZWFuXSBUcnVlIGlmIHRoaXMgaXRlbSBpcyBhIGZpbGUuXG5cdCAqL1xuXHRwdWJsaWMgaXNGaWxlKCk6IGJvb2xlYW4ge1xuXHRcdHJldHVybiAodGhpcy5tb2RlICYgMHhmMDAwKSA9PT0gRmlsZVR5cGUuRklMRTtcblx0fVxuXG5cdC8qKlxuXHQgKiBAcmV0dXJuIFtCb29sZWFuXSBUcnVlIGlmIHRoaXMgaXRlbSBpcyBhIGRpcmVjdG9yeS5cblx0ICovXG5cdHB1YmxpYyBpc0RpcmVjdG9yeSgpOiBib29sZWFuIHtcblx0XHRyZXR1cm4gKHRoaXMubW9kZSAmIDB4ZjAwMCkgPT09IEZpbGVUeXBlLkRJUkVDVE9SWTtcblx0fVxufVxuIiwgImltcG9ydCB7IEJhc2VGaWxlU3lzdGVtLCBTeW5jaHJvbm91c0ZpbGVTeXN0ZW0sIEJGU09uZUFyZ0NhbGxiYWNrLCBCRlNDYWxsYmFjaywgQkZTVGhyZWVBcmdDYWxsYmFjayB9IGZyb20gJy4uL2NvcmUvZmlsZV9zeXN0ZW0nO1xuaW1wb3J0IHsgQXBpRXJyb3IsIEVycm9yQ29kZSB9IGZyb20gJy4uL2NvcmUvYXBpX2Vycm9yJztcbmltcG9ydCB7IGRlZmF1bHQgYXMgU3RhdHMsIEZpbGVUeXBlLCBGaWxlUGVybSB9IGZyb20gJy4uL2NvcmUvc3RhdHMnO1xuaW1wb3J0IHsgRmlsZSB9IGZyb20gJy4uL2NvcmUvZmlsZSc7XG5pbXBvcnQgeyBGaWxlRmxhZyB9IGZyb20gJy4uL2NvcmUvZmlsZV9mbGFnJztcbmltcG9ydCAqIGFzIHBhdGggZnJvbSAncGF0aCc7XG5pbXBvcnQgKiBhcyBwcm9jZXNzIGZyb20gJ3Byb2Nlc3MnO1xuaW1wb3J0IElub2RlIGZyb20gJy4uL2dlbmVyaWMvaW5vZGUnO1xuaW1wb3J0IFByZWxvYWRGaWxlIGZyb20gJy4uL2dlbmVyaWMvcHJlbG9hZF9maWxlJztcbmltcG9ydCB7IGVtcHR5QnVmZmVyIH0gZnJvbSAnLi4vY29yZS91dGlsJztcbmltcG9ydCBDcmVkIGZyb20gJy4uL2NvcmUvY3JlZCc7XG5pbXBvcnQgeyBCdWZmZXIgfSBmcm9tICdidWZmZXInO1xuLyoqXG4gKiBAaGlkZGVuXG4gKi9cbmNvbnN0IFJPT1RfTk9ERV9JRDogc3RyaW5nID0gJy8nO1xuLyoqXG4gKiBAaGlkZGVuXG4gKi9cbmxldCBlbXB0eURpck5vZGU6IEJ1ZmZlciB8IG51bGwgPSBudWxsO1xuLyoqXG4gKiBSZXR1cm5zIGFuIGVtcHR5IGRpcmVjdG9yeSBub2RlLlxuICogQGhpZGRlblxuICovXG5mdW5jdGlvbiBnZXRFbXB0eURpck5vZGUoKTogQnVmZmVyIHtcblx0aWYgKGVtcHR5RGlyTm9kZSkge1xuXHRcdHJldHVybiBlbXB0eURpck5vZGU7XG5cdH1cblx0cmV0dXJuIChlbXB0eURpck5vZGUgPSBCdWZmZXIuZnJvbSgne30nKSk7XG59XG5cbi8qKlxuICogR2VuZXJhdGVzIGEgcmFuZG9tIElELlxuICogQGhpZGRlblxuICovXG5mdW5jdGlvbiBHZW5lcmF0ZVJhbmRvbUlEKCk6IHN0cmluZyB7XG5cdC8vIEZyb20gaHR0cDovL3N0YWNrb3ZlcmZsb3cuY29tL3F1ZXN0aW9ucy8xMDUwMzQvaG93LXRvLWNyZWF0ZS1hLWd1aWQtdXVpZC1pbi1qYXZhc2NyaXB0XG5cdHJldHVybiAneHh4eHh4eHgteHh4eC00eHh4LXl4eHgteHh4eHh4eHh4eHh4Jy5yZXBsYWNlKC9beHldL2csIGZ1bmN0aW9uIChjKSB7XG5cdFx0Y29uc3QgciA9IChNYXRoLnJhbmRvbSgpICogMTYpIHwgMDtcblx0XHRjb25zdCB2ID0gYyA9PT0gJ3gnID8gciA6IChyICYgMHgzKSB8IDB4ODtcblx0XHRyZXR1cm4gdi50b1N0cmluZygxNik7XG5cdH0pO1xufVxuXG4vKipcbiAqIEhlbHBlciBmdW5jdGlvbi4gQ2hlY2tzIGlmICdlJyBpcyBkZWZpbmVkLiBJZiBzbywgaXQgdHJpZ2dlcnMgdGhlIGNhbGxiYWNrXG4gKiB3aXRoICdlJyBhbmQgcmV0dXJucyBmYWxzZS4gT3RoZXJ3aXNlLCByZXR1cm5zIHRydWUuXG4gKiBAaGlkZGVuXG4gKi9cbmZ1bmN0aW9uIG5vRXJyb3IoZTogQXBpRXJyb3IgfCB1bmRlZmluZWQgfCBudWxsLCBjYjogKGU6IEFwaUVycm9yKSA9PiB2b2lkKTogYm9vbGVhbiB7XG5cdGlmIChlKSB7XG5cdFx0Y2IoZSk7XG5cdFx0cmV0dXJuIGZhbHNlO1xuXHR9XG5cdHJldHVybiB0cnVlO1xufVxuXG4vKipcbiAqIEhlbHBlciBmdW5jdGlvbi4gQ2hlY2tzIGlmICdlJyBpcyBkZWZpbmVkLiBJZiBzbywgaXQgYWJvcnRzIHRoZSB0cmFuc2FjdGlvbixcbiAqIHRyaWdnZXJzIHRoZSBjYWxsYmFjayB3aXRoICdlJywgYW5kIHJldHVybnMgZmFsc2UuIE90aGVyd2lzZSwgcmV0dXJucyB0cnVlLlxuICogQGhpZGRlblxuICovXG5mdW5jdGlvbiBub0Vycm9yVHgoZTogQXBpRXJyb3IgfCB1bmRlZmluZWQgfCBudWxsLCB0eDogQXN5bmNLZXlWYWx1ZVJXVHJhbnNhY3Rpb24sIGNiOiAoZTogQXBpRXJyb3IpID0+IHZvaWQpOiBib29sZWFuIHtcblx0aWYgKGUpIHtcblx0XHR0eC5hYm9ydCgoKSA9PiB7XG5cdFx0XHRjYihlKTtcblx0XHR9KTtcblx0XHRyZXR1cm4gZmFsc2U7XG5cdH1cblx0cmV0dXJuIHRydWU7XG59XG5cbi8qKlxuICogUmVwcmVzZW50cyBhICpzeW5jaHJvbm91cyoga2V5LXZhbHVlIHN0b3JlLlxuICovXG5leHBvcnQgaW50ZXJmYWNlIFN5bmNLZXlWYWx1ZVN0b3JlIHtcblx0LyoqXG5cdCAqIFRoZSBuYW1lIG9mIHRoZSBrZXktdmFsdWUgc3RvcmUuXG5cdCAqL1xuXHRuYW1lKCk6IHN0cmluZztcblx0LyoqXG5cdCAqIEVtcHRpZXMgdGhlIGtleS12YWx1ZSBzdG9yZSBjb21wbGV0ZWx5LlxuXHQgKi9cblx0Y2xlYXIoKTogdm9pZDtcblx0LyoqXG5cdCAqIEJlZ2lucyBhIG5ldyByZWFkLW9ubHkgdHJhbnNhY3Rpb24uXG5cdCAqL1xuXHRiZWdpblRyYW5zYWN0aW9uKHR5cGU6ICdyZWFkb25seScpOiBTeW5jS2V5VmFsdWVST1RyYW5zYWN0aW9uO1xuXHQvKipcblx0ICogQmVnaW5zIGEgbmV3IHJlYWQtd3JpdGUgdHJhbnNhY3Rpb24uXG5cdCAqL1xuXHRiZWdpblRyYW5zYWN0aW9uKHR5cGU6ICdyZWFkd3JpdGUnKTogU3luY0tleVZhbHVlUldUcmFuc2FjdGlvbjtcblx0YmVnaW5UcmFuc2FjdGlvbih0eXBlOiBzdHJpbmcpOiBTeW5jS2V5VmFsdWVST1RyYW5zYWN0aW9uO1xufVxuXG4vKipcbiAqIEEgcmVhZC1vbmx5IHRyYW5zYWN0aW9uIGZvciBhIHN5bmNocm9ub3VzIGtleSB2YWx1ZSBzdG9yZS5cbiAqL1xuZXhwb3J0IGludGVyZmFjZSBTeW5jS2V5VmFsdWVST1RyYW5zYWN0aW9uIHtcblx0LyoqXG5cdCAqIFJldHJpZXZlcyB0aGUgZGF0YSBhdCB0aGUgZ2l2ZW4ga2V5LiBUaHJvd3MgYW4gQXBpRXJyb3IgaWYgYW4gZXJyb3Igb2NjdXJzXG5cdCAqIG9yIGlmIHRoZSBrZXkgZG9lcyBub3QgZXhpc3QuXG5cdCAqIEBwYXJhbSBrZXkgVGhlIGtleSB0byBsb29rIHVuZGVyIGZvciBkYXRhLlxuXHQgKiBAcmV0dXJuIFRoZSBkYXRhIHN0b3JlZCB1bmRlciB0aGUga2V5LCBvciB1bmRlZmluZWQgaWYgbm90IHByZXNlbnQuXG5cdCAqL1xuXHRnZXQoa2V5OiBzdHJpbmcpOiBCdWZmZXIgfCB1bmRlZmluZWQ7XG59XG5cbi8qKlxuICogQSByZWFkLXdyaXRlIHRyYW5zYWN0aW9uIGZvciBhIHN5bmNocm9ub3VzIGtleSB2YWx1ZSBzdG9yZS5cbiAqL1xuZXhwb3J0IGludGVyZmFjZSBTeW5jS2V5VmFsdWVSV1RyYW5zYWN0aW9uIGV4dGVuZHMgU3luY0tleVZhbHVlUk9UcmFuc2FjdGlvbiB7XG5cdC8qKlxuXHQgKiBBZGRzIHRoZSBkYXRhIHRvIHRoZSBzdG9yZSB1bmRlciB0aGUgZ2l2ZW4ga2V5LlxuXHQgKiBAcGFyYW0ga2V5IFRoZSBrZXkgdG8gYWRkIHRoZSBkYXRhIHVuZGVyLlxuXHQgKiBAcGFyYW0gZGF0YSBUaGUgZGF0YSB0byBhZGQgdG8gdGhlIHN0b3JlLlxuXHQgKiBAcGFyYW0gb3ZlcndyaXRlIElmICd0cnVlJywgb3ZlcndyaXRlIGFueSBleGlzdGluZyBkYXRhLiBJZiAnZmFsc2UnLFxuXHQgKiAgIGF2b2lkcyBzdG9yaW5nIHRoZSBkYXRhIGlmIHRoZSBrZXkgZXhpc3RzLlxuXHQgKiBAcmV0dXJuIFRydWUgaWYgc3RvcmFnZSBzdWNjZWVkZWQsIGZhbHNlIG90aGVyd2lzZS5cblx0ICovXG5cdHB1dChrZXk6IHN0cmluZywgZGF0YTogQnVmZmVyLCBvdmVyd3JpdGU6IGJvb2xlYW4pOiBib29sZWFuO1xuXHQvKipcblx0ICogRGVsZXRlcyB0aGUgZGF0YSBhdCB0aGUgZ2l2ZW4ga2V5LlxuXHQgKiBAcGFyYW0ga2V5IFRoZSBrZXkgdG8gZGVsZXRlIGZyb20gdGhlIHN0b3JlLlxuXHQgKi9cblx0ZGVsKGtleTogc3RyaW5nKTogdm9pZDtcblx0LyoqXG5cdCAqIENvbW1pdHMgdGhlIHRyYW5zYWN0aW9uLlxuXHQgKi9cblx0Y29tbWl0KCk6IHZvaWQ7XG5cdC8qKlxuXHQgKiBBYm9ydHMgYW5kIHJvbGxzIGJhY2sgdGhlIHRyYW5zYWN0aW9uLlxuXHQgKi9cblx0YWJvcnQoKTogdm9pZDtcbn1cblxuLyoqXG4gKiBBbiBpbnRlcmZhY2UgZm9yIHNpbXBsZSBzeW5jaHJvbm91cyBrZXktdmFsdWUgc3RvcmVzIHRoYXQgZG9uJ3QgaGF2ZSBzcGVjaWFsXG4gKiBzdXBwb3J0IGZvciB0cmFuc2FjdGlvbnMgYW5kIHN1Y2guXG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgU2ltcGxlU3luY1N0b3JlIHtcblx0Z2V0KGtleTogc3RyaW5nKTogQnVmZmVyIHwgdW5kZWZpbmVkO1xuXHRwdXQoa2V5OiBzdHJpbmcsIGRhdGE6IEJ1ZmZlciwgb3ZlcndyaXRlOiBib29sZWFuKTogYm9vbGVhbjtcblx0ZGVsKGtleTogc3RyaW5nKTogdm9pZDtcbn1cblxuY2xhc3MgTFJVTm9kZSB7XG5cdHB1YmxpYyBwcmV2OiBMUlVOb2RlIHwgbnVsbCA9IG51bGw7XG5cdHB1YmxpYyBuZXh0OiBMUlVOb2RlIHwgbnVsbCA9IG51bGw7XG5cdGNvbnN0cnVjdG9yKHB1YmxpYyBrZXk6IHN0cmluZywgcHVibGljIHZhbHVlOiBzdHJpbmcpIHt9XG59XG5cbi8vIEFkYXB0ZWQgZnJvbSBodHRwczovL2Nocmlzcm5nLnN2YnRsZS5jb20vbHJ1LWNhY2hlLWluLWphdmFzY3JpcHRcbmNsYXNzIExSVUNhY2hlIHtcblx0cHJpdmF0ZSBzaXplID0gMDtcblx0cHJpdmF0ZSBtYXA6IHsgW2lkOiBzdHJpbmddOiBMUlVOb2RlIH0gPSB7fTtcblx0cHJpdmF0ZSBoZWFkOiBMUlVOb2RlIHwgbnVsbCA9IG51bGw7XG5cdHByaXZhdGUgdGFpbDogTFJVTm9kZSB8IG51bGwgPSBudWxsO1xuXHRjb25zdHJ1Y3RvcihwdWJsaWMgcmVhZG9ubHkgbGltaXQ6IG51bWJlcikge31cblxuXHQvKipcblx0ICogQ2hhbmdlIG9yIGFkZCBhIG5ldyB2YWx1ZSBpbiB0aGUgY2FjaGVcblx0ICogV2Ugb3ZlcndyaXRlIHRoZSBlbnRyeSBpZiBpdCBhbHJlYWR5IGV4aXN0c1xuXHQgKi9cblx0cHVibGljIHNldChrZXk6IHN0cmluZywgdmFsdWU6IHN0cmluZyk6IHZvaWQge1xuXHRcdGNvbnN0IG5vZGUgPSBuZXcgTFJVTm9kZShrZXksIHZhbHVlKTtcblx0XHRpZiAodGhpcy5tYXBba2V5XSkge1xuXHRcdFx0dGhpcy5tYXBba2V5XS52YWx1ZSA9IG5vZGUudmFsdWU7XG5cdFx0XHR0aGlzLnJlbW92ZShub2RlLmtleSk7XG5cdFx0fSBlbHNlIHtcblx0XHRcdGlmICh0aGlzLnNpemUgPj0gdGhpcy5saW1pdCkge1xuXHRcdFx0XHRkZWxldGUgdGhpcy5tYXBbdGhpcy50YWlsIS5rZXldO1xuXHRcdFx0XHR0aGlzLnNpemUtLTtcblx0XHRcdFx0dGhpcy50YWlsID0gdGhpcy50YWlsIS5wcmV2O1xuXHRcdFx0XHR0aGlzLnRhaWwhLm5leHQgPSBudWxsO1xuXHRcdFx0fVxuXHRcdH1cblx0XHR0aGlzLnNldEhlYWQobm9kZSk7XG5cdH1cblxuXHQvKiBSZXRyaWV2ZSBhIHNpbmdsZSBlbnRyeSBmcm9tIHRoZSBjYWNoZSAqL1xuXHRwdWJsaWMgZ2V0KGtleTogc3RyaW5nKTogc3RyaW5nIHwgbnVsbCB7XG5cdFx0aWYgKHRoaXMubWFwW2tleV0pIHtcblx0XHRcdGNvbnN0IHZhbHVlID0gdGhpcy5tYXBba2V5XS52YWx1ZTtcblx0XHRcdGNvbnN0IG5vZGUgPSBuZXcgTFJVTm9kZShrZXksIHZhbHVlKTtcblx0XHRcdHRoaXMucmVtb3ZlKGtleSk7XG5cdFx0XHR0aGlzLnNldEhlYWQobm9kZSk7XG5cdFx0XHRyZXR1cm4gdmFsdWU7XG5cdFx0fSBlbHNlIHtcblx0XHRcdHJldHVybiBudWxsO1xuXHRcdH1cblx0fVxuXG5cdC8qIFJlbW92ZSBhIHNpbmdsZSBlbnRyeSBmcm9tIHRoZSBjYWNoZSAqL1xuXHRwdWJsaWMgcmVtb3ZlKGtleTogc3RyaW5nKTogdm9pZCB7XG5cdFx0Y29uc3Qgbm9kZSA9IHRoaXMubWFwW2tleV07XG5cdFx0aWYgKCFub2RlKSB7XG5cdFx0XHRyZXR1cm47XG5cdFx0fVxuXHRcdGlmIChub2RlLnByZXYgIT09IG51bGwpIHtcblx0XHRcdG5vZGUucHJldi5uZXh0ID0gbm9kZS5uZXh0O1xuXHRcdH0gZWxzZSB7XG5cdFx0XHR0aGlzLmhlYWQgPSBub2RlLm5leHQ7XG5cdFx0fVxuXHRcdGlmIChub2RlLm5leHQgIT09IG51bGwpIHtcblx0XHRcdG5vZGUubmV4dC5wcmV2ID0gbm9kZS5wcmV2O1xuXHRcdH0gZWxzZSB7XG5cdFx0XHR0aGlzLnRhaWwgPSBub2RlLnByZXY7XG5cdFx0fVxuXHRcdGRlbGV0ZSB0aGlzLm1hcFtrZXldO1xuXHRcdHRoaXMuc2l6ZS0tO1xuXHR9XG5cblx0LyogUmVzZXRzIHRoZSBlbnRpcmUgY2FjaGUgLSBBcmd1bWVudCBsaW1pdCBpcyBvcHRpb25hbCB0byBiZSByZXNldCAqL1xuXHRwdWJsaWMgcmVtb3ZlQWxsKCkge1xuXHRcdHRoaXMuc2l6ZSA9IDA7XG5cdFx0dGhpcy5tYXAgPSB7fTtcblx0XHR0aGlzLmhlYWQgPSBudWxsO1xuXHRcdHRoaXMudGFpbCA9IG51bGw7XG5cdH1cblxuXHRwcml2YXRlIHNldEhlYWQobm9kZTogTFJVTm9kZSk6IHZvaWQge1xuXHRcdG5vZGUubmV4dCA9IHRoaXMuaGVhZDtcblx0XHRub2RlLnByZXYgPSBudWxsO1xuXHRcdGlmICh0aGlzLmhlYWQgIT09IG51bGwpIHtcblx0XHRcdHRoaXMuaGVhZC5wcmV2ID0gbm9kZTtcblx0XHR9XG5cdFx0dGhpcy5oZWFkID0gbm9kZTtcblx0XHRpZiAodGhpcy50YWlsID09PSBudWxsKSB7XG5cdFx0XHR0aGlzLnRhaWwgPSBub2RlO1xuXHRcdH1cblx0XHR0aGlzLnNpemUrKztcblx0XHR0aGlzLm1hcFtub2RlLmtleV0gPSBub2RlO1xuXHR9XG59XG5cbi8qKlxuICogQSBzaW1wbGUgUlcgdHJhbnNhY3Rpb24gZm9yIHNpbXBsZSBzeW5jaHJvbm91cyBrZXktdmFsdWUgc3RvcmVzLlxuICovXG5leHBvcnQgY2xhc3MgU2ltcGxlU3luY1JXVHJhbnNhY3Rpb24gaW1wbGVtZW50cyBTeW5jS2V5VmFsdWVSV1RyYW5zYWN0aW9uIHtcblx0LyoqXG5cdCAqIFN0b3JlcyBkYXRhIGluIHRoZSBrZXlzIHdlIG1vZGlmeSBwcmlvciB0byBtb2RpZnlpbmcgdGhlbS5cblx0ICogQWxsb3dzIHVzIHRvIHJvbGwgYmFjayBjb21taXRzLlxuXHQgKi9cblx0cHJpdmF0ZSBvcmlnaW5hbERhdGE6IHsgW2tleTogc3RyaW5nXTogQnVmZmVyIHwgdW5kZWZpbmVkIH0gPSB7fTtcblx0LyoqXG5cdCAqIExpc3Qgb2Yga2V5cyBtb2RpZmllZCBpbiB0aGlzIHRyYW5zYWN0aW9uLCBpZiBhbnkuXG5cdCAqL1xuXHRwcml2YXRlIG1vZGlmaWVkS2V5czogc3RyaW5nW10gPSBbXTtcblxuXHRjb25zdHJ1Y3Rvcihwcml2YXRlIHN0b3JlOiBTaW1wbGVTeW5jU3RvcmUpIHt9XG5cblx0cHVibGljIGdldChrZXk6IHN0cmluZyk6IEJ1ZmZlciB8IHVuZGVmaW5lZCB7XG5cdFx0Y29uc3QgdmFsID0gdGhpcy5zdG9yZS5nZXQoa2V5KTtcblx0XHR0aGlzLnN0YXNoT2xkVmFsdWUoa2V5LCB2YWwpO1xuXHRcdHJldHVybiB2YWw7XG5cdH1cblxuXHRwdWJsaWMgcHV0KGtleTogc3RyaW5nLCBkYXRhOiBCdWZmZXIsIG92ZXJ3cml0ZTogYm9vbGVhbik6IGJvb2xlYW4ge1xuXHRcdHRoaXMubWFya01vZGlmaWVkKGtleSk7XG5cdFx0cmV0dXJuIHRoaXMuc3RvcmUucHV0KGtleSwgZGF0YSwgb3ZlcndyaXRlKTtcblx0fVxuXG5cdHB1YmxpYyBkZWwoa2V5OiBzdHJpbmcpOiB2b2lkIHtcblx0XHR0aGlzLm1hcmtNb2RpZmllZChrZXkpO1xuXHRcdHRoaXMuc3RvcmUuZGVsKGtleSk7XG5cdH1cblxuXHRwdWJsaWMgY29tbWl0KCk6IHZvaWQge1xuXHRcdC8qIE5PUCAqL1xuXHR9XG5cblx0cHVibGljIGFib3J0KCk6IHZvaWQge1xuXHRcdC8vIFJvbGxiYWNrIG9sZCB2YWx1ZXMuXG5cdFx0Zm9yIChjb25zdCBrZXkgb2YgdGhpcy5tb2RpZmllZEtleXMpIHtcblx0XHRcdGNvbnN0IHZhbHVlID0gdGhpcy5vcmlnaW5hbERhdGFba2V5XTtcblx0XHRcdGlmICghdmFsdWUpIHtcblx0XHRcdFx0Ly8gS2V5IGRpZG4ndCBleGlzdC5cblx0XHRcdFx0dGhpcy5zdG9yZS5kZWwoa2V5KTtcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdC8vIEtleSBleGlzdGVkLiBTdG9yZSBvbGQgdmFsdWUuXG5cdFx0XHRcdHRoaXMuc3RvcmUucHV0KGtleSwgdmFsdWUsIHRydWUpO1xuXHRcdFx0fVxuXHRcdH1cblx0fVxuXG5cdHByaXZhdGUgX2hhcyhrZXk6IHN0cmluZykge1xuXHRcdHJldHVybiBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwodGhpcy5vcmlnaW5hbERhdGEsIGtleSk7XG5cdH1cblxuXHQvKipcblx0ICogU3Rhc2hlcyBnaXZlbiBrZXkgdmFsdWUgcGFpciBpbnRvIGBvcmlnaW5hbERhdGFgIGlmIGl0IGRvZXNuJ3QgYWxyZWFkeVxuXHQgKiBleGlzdC4gQWxsb3dzIHVzIHRvIHN0YXNoIHZhbHVlcyB0aGUgcHJvZ3JhbSBpcyByZXF1ZXN0aW5nIGFueXdheSB0b1xuXHQgKiBwcmV2ZW50IG5lZWRsZXNzIGBnZXRgIHJlcXVlc3RzIGlmIHRoZSBwcm9ncmFtIG1vZGlmaWVzIHRoZSBkYXRhIGxhdGVyXG5cdCAqIG9uIGR1cmluZyB0aGUgdHJhbnNhY3Rpb24uXG5cdCAqL1xuXHRwcml2YXRlIHN0YXNoT2xkVmFsdWUoa2V5OiBzdHJpbmcsIHZhbHVlOiBCdWZmZXIgfCB1bmRlZmluZWQpIHtcblx0XHQvLyBLZWVwIG9ubHkgdGhlIGVhcmxpZXN0IHZhbHVlIGluIHRoZSB0cmFuc2FjdGlvbi5cblx0XHRpZiAoIXRoaXMuX2hhcyhrZXkpKSB7XG5cdFx0XHR0aGlzLm9yaWdpbmFsRGF0YVtrZXldID0gdmFsdWU7XG5cdFx0fVxuXHR9XG5cblx0LyoqXG5cdCAqIE1hcmtzIHRoZSBnaXZlbiBrZXkgYXMgbW9kaWZpZWQsIGFuZCBzdGFzaGVzIGl0cyB2YWx1ZSBpZiBpdCBoYXMgbm90IGJlZW5cblx0ICogc3Rhc2hlZCBhbHJlYWR5LlxuXHQgKi9cblx0cHJpdmF0ZSBtYXJrTW9kaWZpZWQoa2V5OiBzdHJpbmcpIHtcblx0XHRpZiAodGhpcy5tb2RpZmllZEtleXMuaW5kZXhPZihrZXkpID09PSAtMSkge1xuXHRcdFx0dGhpcy5tb2RpZmllZEtleXMucHVzaChrZXkpO1xuXHRcdFx0aWYgKCF0aGlzLl9oYXMoa2V5KSkge1xuXHRcdFx0XHR0aGlzLm9yaWdpbmFsRGF0YVtrZXldID0gdGhpcy5zdG9yZS5nZXQoa2V5KTtcblx0XHRcdH1cblx0XHR9XG5cdH1cbn1cblxuZXhwb3J0IGludGVyZmFjZSBTeW5jS2V5VmFsdWVGaWxlU3lzdGVtT3B0aW9ucyB7XG5cdC8qKlxuXHQgKiBUaGUgYWN0dWFsIGtleS12YWx1ZSBzdG9yZSB0byByZWFkIGZyb20vd3JpdGUgdG8uXG5cdCAqL1xuXHRzdG9yZTogU3luY0tleVZhbHVlU3RvcmU7XG5cdC8qKlxuXHQgKiBTaG91bGQgdGhlIGZpbGUgc3lzdGVtIHN1cHBvcnQgcHJvcGVydGllcyAobXRpbWUvYXRpbWUvY3RpbWUvY2htb2QvZXRjKT9cblx0ICogRW5hYmxpbmcgdGhpcyBzbGlnaHRseSBpbmNyZWFzZXMgdGhlIHN0b3JhZ2Ugc3BhY2UgcGVyIGZpbGUsIGFuZCBhZGRzXG5cdCAqIGF0aW1lIHVwZGF0ZXMgZXZlcnkgdGltZSBhIGZpbGUgaXMgYWNjZXNzZWQsIG10aW1lIHVwZGF0ZXMgZXZlcnkgdGltZVxuXHQgKiBhIGZpbGUgaXMgbW9kaWZpZWQsIGFuZCBwZXJtaXNzaW9uIGNoZWNrcyBvbiBldmVyeSBvcGVyYXRpb24uXG5cdCAqXG5cdCAqIERlZmF1bHRzIHRvICpmYWxzZSouXG5cdCAqL1xuXHRzdXBwb3J0UHJvcHM/OiBib29sZWFuO1xuXHQvKipcblx0ICogU2hvdWxkIHRoZSBmaWxlIHN5c3RlbSBzdXBwb3J0IGxpbmtzP1xuXHQgKi9cblx0c3VwcG9ydExpbmtzPzogYm9vbGVhbjtcbn1cblxuZXhwb3J0IGNsYXNzIFN5bmNLZXlWYWx1ZUZpbGUgZXh0ZW5kcyBQcmVsb2FkRmlsZTxTeW5jS2V5VmFsdWVGaWxlU3lzdGVtPiBpbXBsZW1lbnRzIEZpbGUge1xuXHRjb25zdHJ1Y3RvcihfZnM6IFN5bmNLZXlWYWx1ZUZpbGVTeXN0ZW0sIF9wYXRoOiBzdHJpbmcsIF9mbGFnOiBGaWxlRmxhZywgX3N0YXQ6IFN0YXRzLCBjb250ZW50cz86IEJ1ZmZlcikge1xuXHRcdHN1cGVyKF9mcywgX3BhdGgsIF9mbGFnLCBfc3RhdCwgY29udGVudHMpO1xuXHR9XG5cblx0cHVibGljIHN5bmNTeW5jKCk6IHZvaWQge1xuXHRcdGlmICh0aGlzLmlzRGlydHkoKSkge1xuXHRcdFx0dGhpcy5fZnMuX3N5bmNTeW5jKHRoaXMuZ2V0UGF0aCgpLCB0aGlzLmdldEJ1ZmZlcigpLCB0aGlzLmdldFN0YXRzKCkpO1xuXHRcdFx0dGhpcy5yZXNldERpcnR5KCk7XG5cdFx0fVxuXHR9XG5cblx0cHVibGljIGNsb3NlU3luYygpOiB2b2lkIHtcblx0XHR0aGlzLnN5bmNTeW5jKCk7XG5cdH1cbn1cblxuLyoqXG4gKiBBIFwiU3luY2hyb25vdXMga2V5LXZhbHVlIGZpbGUgc3lzdGVtXCIuIFN0b3JlcyBkYXRhIHRvL3JldHJpZXZlcyBkYXRhIGZyb20gYW5cbiAqIHVuZGVybHlpbmcga2V5LXZhbHVlIHN0b3JlLlxuICpcbiAqIFdlIHVzZSBhIHVuaXF1ZSBJRCBmb3IgZWFjaCBub2RlIGluIHRoZSBmaWxlIHN5c3RlbS4gVGhlIHJvb3Qgbm9kZSBoYXMgYVxuICogZml4ZWQgSUQuXG4gKiBAdG9kbyBJbnRyb2R1Y2UgTm9kZSBJRCBjYWNoaW5nLlxuICogQHRvZG8gQ2hlY2sgbW9kZXMuXG4gKi9cbmV4cG9ydCBjbGFzcyBTeW5jS2V5VmFsdWVGaWxlU3lzdGVtIGV4dGVuZHMgU3luY2hyb25vdXNGaWxlU3lzdGVtIHtcblx0cHVibGljIHN0YXRpYyBpc0F2YWlsYWJsZSgpOiBib29sZWFuIHtcblx0XHRyZXR1cm4gdHJ1ZTtcblx0fVxuXG5cdHByaXZhdGUgc3RvcmU6IFN5bmNLZXlWYWx1ZVN0b3JlO1xuXG5cdGNvbnN0cnVjdG9yKG9wdGlvbnM6IFN5bmNLZXlWYWx1ZUZpbGVTeXN0ZW1PcHRpb25zKSB7XG5cdFx0c3VwZXIoKTtcblx0XHR0aGlzLnN0b3JlID0gb3B0aW9ucy5zdG9yZTtcblx0XHQvLyBJTlZBUklBTlQ6IEVuc3VyZSB0aGF0IHRoZSByb290IGV4aXN0cy5cblx0XHR0aGlzLm1ha2VSb290RGlyZWN0b3J5KCk7XG5cdH1cblxuXHRwdWJsaWMgZ2V0TmFtZSgpOiBzdHJpbmcge1xuXHRcdHJldHVybiB0aGlzLnN0b3JlLm5hbWUoKTtcblx0fVxuXHRwdWJsaWMgaXNSZWFkT25seSgpOiBib29sZWFuIHtcblx0XHRyZXR1cm4gZmFsc2U7XG5cdH1cblx0cHVibGljIHN1cHBvcnRzU3ltbGlua3MoKTogYm9vbGVhbiB7XG5cdFx0cmV0dXJuIGZhbHNlO1xuXHR9XG5cdHB1YmxpYyBzdXBwb3J0c1Byb3BzKCk6IGJvb2xlYW4ge1xuXHRcdHJldHVybiB0cnVlO1xuXHR9XG5cdHB1YmxpYyBzdXBwb3J0c1N5bmNoKCk6IGJvb2xlYW4ge1xuXHRcdHJldHVybiB0cnVlO1xuXHR9XG5cblx0LyoqXG5cdCAqIERlbGV0ZSBhbGwgY29udGVudHMgc3RvcmVkIGluIHRoZSBmaWxlIHN5c3RlbS5cblx0ICovXG5cdHB1YmxpYyBlbXB0eSgpOiB2b2lkIHtcblx0XHR0aGlzLnN0b3JlLmNsZWFyKCk7XG5cdFx0Ly8gSU5WQVJJQU5UOiBSb290IGFsd2F5cyBleGlzdHMuXG5cdFx0dGhpcy5tYWtlUm9vdERpcmVjdG9yeSgpO1xuXHR9XG5cblx0cHVibGljIGFjY2Vzc1N5bmMocDogc3RyaW5nLCBtb2RlOiBudW1iZXIsIGNyZWQ6IENyZWQpOiB2b2lkIHtcblx0XHRjb25zdCB0eCA9IHRoaXMuc3RvcmUuYmVnaW5UcmFuc2FjdGlvbigncmVhZG9ubHknKSxcblx0XHRcdG5vZGUgPSB0aGlzLmZpbmRJTm9kZSh0eCwgcCk7XG5cdFx0aWYgKCFub2RlLnRvU3RhdHMoKS5oYXNBY2Nlc3MobW9kZSwgY3JlZCkpIHtcblx0XHRcdHRocm93IEFwaUVycm9yLkVBQ0NFUyhwKTtcblx0XHR9XG5cdH1cblxuXHRwdWJsaWMgcmVuYW1lU3luYyhvbGRQYXRoOiBzdHJpbmcsIG5ld1BhdGg6IHN0cmluZywgY3JlZDogQ3JlZCk6IHZvaWQge1xuXHRcdGNvbnN0IHR4ID0gdGhpcy5zdG9yZS5iZWdpblRyYW5zYWN0aW9uKCdyZWFkd3JpdGUnKSxcblx0XHRcdG9sZFBhcmVudCA9IHBhdGguZGlybmFtZShvbGRQYXRoKSxcblx0XHRcdG9sZE5hbWUgPSBwYXRoLmJhc2VuYW1lKG9sZFBhdGgpLFxuXHRcdFx0bmV3UGFyZW50ID0gcGF0aC5kaXJuYW1lKG5ld1BhdGgpLFxuXHRcdFx0bmV3TmFtZSA9IHBhdGguYmFzZW5hbWUobmV3UGF0aCksXG5cdFx0XHQvLyBSZW1vdmUgb2xkUGF0aCBmcm9tIHBhcmVudCdzIGRpcmVjdG9yeSBsaXN0aW5nLlxuXHRcdFx0b2xkRGlyTm9kZSA9IHRoaXMuZmluZElOb2RlKHR4LCBvbGRQYXJlbnQpLFxuXHRcdFx0b2xkRGlyTGlzdCA9IHRoaXMuZ2V0RGlyTGlzdGluZyh0eCwgb2xkUGFyZW50LCBvbGREaXJOb2RlKTtcblxuXHRcdGlmICghb2xkRGlyTm9kZS50b1N0YXRzKCkuaGFzQWNjZXNzKEZpbGVQZXJtLldSSVRFLCBjcmVkKSkge1xuXHRcdFx0dGhyb3cgQXBpRXJyb3IuRUFDQ0VTKG9sZFBhdGgpO1xuXHRcdH1cblxuXHRcdGlmICghb2xkRGlyTGlzdFtvbGROYW1lXSkge1xuXHRcdFx0dGhyb3cgQXBpRXJyb3IuRU5PRU5UKG9sZFBhdGgpO1xuXHRcdH1cblx0XHRjb25zdCBub2RlSWQ6IHN0cmluZyA9IG9sZERpckxpc3Rbb2xkTmFtZV07XG5cdFx0ZGVsZXRlIG9sZERpckxpc3Rbb2xkTmFtZV07XG5cblx0XHQvLyBJbnZhcmlhbnQ6IENhbid0IG1vdmUgYSBmb2xkZXIgaW5zaWRlIGl0c2VsZi5cblx0XHQvLyBUaGlzIGZ1bm55IGxpdHRsZSBoYWNrIGVuc3VyZXMgdGhhdCB0aGUgY2hlY2sgcGFzc2VzIG9ubHkgaWYgb2xkUGF0aFxuXHRcdC8vIGlzIGEgc3VicGF0aCBvZiBuZXdQYXJlbnQuIFdlIGFwcGVuZCAnLycgdG8gYXZvaWQgbWF0Y2hpbmcgZm9sZGVycyB0aGF0XG5cdFx0Ly8gYXJlIGEgc3Vic3RyaW5nIG9mIHRoZSBib3R0b20tbW9zdCBmb2xkZXIgaW4gdGhlIHBhdGguXG5cdFx0aWYgKChuZXdQYXJlbnQgKyAnLycpLmluZGV4T2Yob2xkUGF0aCArICcvJykgPT09IDApIHtcblx0XHRcdHRocm93IG5ldyBBcGlFcnJvcihFcnJvckNvZGUuRUJVU1ksIG9sZFBhcmVudCk7XG5cdFx0fVxuXG5cdFx0Ly8gQWRkIG5ld1BhdGggdG8gcGFyZW50J3MgZGlyZWN0b3J5IGxpc3RpbmcuXG5cdFx0bGV0IG5ld0Rpck5vZGU6IElub2RlLCBuZXdEaXJMaXN0OiB0eXBlb2Ygb2xkRGlyTGlzdDtcblx0XHRpZiAobmV3UGFyZW50ID09PSBvbGRQYXJlbnQpIHtcblx0XHRcdC8vIFByZXZlbnQgdXMgZnJvbSByZS1ncmFiYmluZyB0aGUgc2FtZSBkaXJlY3RvcnkgbGlzdGluZywgd2hpY2ggc3RpbGxcblx0XHRcdC8vIGNvbnRhaW5zIG9sZE5hbWUuXG5cdFx0XHRuZXdEaXJOb2RlID0gb2xkRGlyTm9kZTtcblx0XHRcdG5ld0Rpckxpc3QgPSBvbGREaXJMaXN0O1xuXHRcdH0gZWxzZSB7XG5cdFx0XHRuZXdEaXJOb2RlID0gdGhpcy5maW5kSU5vZGUodHgsIG5ld1BhcmVudCk7XG5cdFx0XHRuZXdEaXJMaXN0ID0gdGhpcy5nZXREaXJMaXN0aW5nKHR4LCBuZXdQYXJlbnQsIG5ld0Rpck5vZGUpO1xuXHRcdH1cblxuXHRcdGlmIChuZXdEaXJMaXN0W25ld05hbWVdKSB7XG5cdFx0XHQvLyBJZiBpdCdzIGEgZmlsZSwgZGVsZXRlIGl0LlxuXHRcdFx0Y29uc3QgbmV3TmFtZU5vZGUgPSB0aGlzLmdldElOb2RlKHR4LCBuZXdQYXRoLCBuZXdEaXJMaXN0W25ld05hbWVdKTtcblx0XHRcdGlmIChuZXdOYW1lTm9kZS5pc0ZpbGUoKSkge1xuXHRcdFx0XHR0cnkge1xuXHRcdFx0XHRcdHR4LmRlbChuZXdOYW1lTm9kZS5pZCk7XG5cdFx0XHRcdFx0dHguZGVsKG5ld0Rpckxpc3RbbmV3TmFtZV0pO1xuXHRcdFx0XHR9IGNhdGNoIChlKSB7XG5cdFx0XHRcdFx0dHguYWJvcnQoKTtcblx0XHRcdFx0XHR0aHJvdyBlO1xuXHRcdFx0XHR9XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHQvLyBJZiBpdCdzIGEgZGlyZWN0b3J5LCB0aHJvdyBhIHBlcm1pc3Npb25zIGVycm9yLlxuXHRcdFx0XHR0aHJvdyBBcGlFcnJvci5FUEVSTShuZXdQYXRoKTtcblx0XHRcdH1cblx0XHR9XG5cdFx0bmV3RGlyTGlzdFtuZXdOYW1lXSA9IG5vZGVJZDtcblxuXHRcdC8vIENvbW1pdCB0aGUgdHdvIGNoYW5nZWQgZGlyZWN0b3J5IGxpc3RpbmdzLlxuXHRcdHRyeSB7XG5cdFx0XHR0eC5wdXQob2xkRGlyTm9kZS5pZCwgQnVmZmVyLmZyb20oSlNPTi5zdHJpbmdpZnkob2xkRGlyTGlzdCkpLCB0cnVlKTtcblx0XHRcdHR4LnB1dChuZXdEaXJOb2RlLmlkLCBCdWZmZXIuZnJvbShKU09OLnN0cmluZ2lmeShuZXdEaXJMaXN0KSksIHRydWUpO1xuXHRcdH0gY2F0Y2ggKGUpIHtcblx0XHRcdHR4LmFib3J0KCk7XG5cdFx0XHR0aHJvdyBlO1xuXHRcdH1cblxuXHRcdHR4LmNvbW1pdCgpO1xuXHR9XG5cblx0cHVibGljIHN0YXRTeW5jKHA6IHN0cmluZywgaXNMc3RhdDogYm9vbGVhbiwgY3JlZDogQ3JlZCk6IFN0YXRzIHtcblx0XHQvLyBHZXQgdGhlIGlub2RlIHRvIHRoZSBpdGVtLCBjb252ZXJ0IGl0IGludG8gYSBTdGF0cyBvYmplY3QuXG5cdFx0Y29uc3Qgc3RhdHMgPSB0aGlzLmZpbmRJTm9kZSh0aGlzLnN0b3JlLmJlZ2luVHJhbnNhY3Rpb24oJ3JlYWRvbmx5JyksIHApLnRvU3RhdHMoKTtcblx0XHRpZiAoIXN0YXRzLmhhc0FjY2VzcyhGaWxlUGVybS5SRUFELCBjcmVkKSkge1xuXHRcdFx0dGhyb3cgQXBpRXJyb3IuRUFDQ0VTKHApO1xuXHRcdH1cblx0XHRyZXR1cm4gc3RhdHM7XG5cdH1cblxuXHRwdWJsaWMgY3JlYXRlRmlsZVN5bmMocDogc3RyaW5nLCBmbGFnOiBGaWxlRmxhZywgbW9kZTogbnVtYmVyLCBjcmVkOiBDcmVkKTogRmlsZSB7XG5cdFx0Y29uc3QgdHggPSB0aGlzLnN0b3JlLmJlZ2luVHJhbnNhY3Rpb24oJ3JlYWR3cml0ZScpLFxuXHRcdFx0ZGF0YSA9IGVtcHR5QnVmZmVyKCksXG5cdFx0XHRuZXdGaWxlID0gdGhpcy5jb21taXROZXdGaWxlKHR4LCBwLCBGaWxlVHlwZS5GSUxFLCBtb2RlLCBjcmVkLCBkYXRhKTtcblx0XHQvLyBPcGVuIHRoZSBmaWxlLlxuXHRcdHJldHVybiBuZXcgU3luY0tleVZhbHVlRmlsZSh0aGlzLCBwLCBmbGFnLCBuZXdGaWxlLnRvU3RhdHMoKSwgZGF0YSk7XG5cdH1cblxuXHRwdWJsaWMgb3BlbkZpbGVTeW5jKHA6IHN0cmluZywgZmxhZzogRmlsZUZsYWcsIGNyZWQ6IENyZWQpOiBGaWxlIHtcblx0XHRjb25zdCB0eCA9IHRoaXMuc3RvcmUuYmVnaW5UcmFuc2FjdGlvbigncmVhZG9ubHknKSxcblx0XHRcdG5vZGUgPSB0aGlzLmZpbmRJTm9kZSh0eCwgcCksXG5cdFx0XHRkYXRhID0gdHguZ2V0KG5vZGUuaWQpO1xuXHRcdGlmICghbm9kZS50b1N0YXRzKCkuaGFzQWNjZXNzKGZsYWcuZ2V0TW9kZSgpLCBjcmVkKSkge1xuXHRcdFx0dGhyb3cgQXBpRXJyb3IuRUFDQ0VTKHApO1xuXHRcdH1cblx0XHRpZiAoZGF0YSA9PT0gdW5kZWZpbmVkKSB7XG5cdFx0XHR0aHJvdyBBcGlFcnJvci5FTk9FTlQocCk7XG5cdFx0fVxuXHRcdHJldHVybiBuZXcgU3luY0tleVZhbHVlRmlsZSh0aGlzLCBwLCBmbGFnLCBub2RlLnRvU3RhdHMoKSwgZGF0YSk7XG5cdH1cblxuXHRwdWJsaWMgdW5saW5rU3luYyhwOiBzdHJpbmcsIGNyZWQ6IENyZWQpOiB2b2lkIHtcblx0XHR0aGlzLnJlbW92ZUVudHJ5KHAsIGZhbHNlLCBjcmVkKTtcblx0fVxuXG5cdHB1YmxpYyBybWRpclN5bmMocDogc3RyaW5nLCBjcmVkOiBDcmVkKTogdm9pZCB7XG5cdFx0Ly8gQ2hlY2sgZmlyc3QgaWYgZGlyZWN0b3J5IGlzIGVtcHR5LlxuXHRcdGlmICh0aGlzLnJlYWRkaXJTeW5jKHAsIGNyZWQpLmxlbmd0aCA+IDApIHtcblx0XHRcdHRocm93IEFwaUVycm9yLkVOT1RFTVBUWShwKTtcblx0XHR9IGVsc2Uge1xuXHRcdFx0dGhpcy5yZW1vdmVFbnRyeShwLCB0cnVlLCBjcmVkKTtcblx0XHR9XG5cdH1cblxuXHRwdWJsaWMgbWtkaXJTeW5jKHA6IHN0cmluZywgbW9kZTogbnVtYmVyLCBjcmVkOiBDcmVkKTogdm9pZCB7XG5cdFx0Y29uc3QgdHggPSB0aGlzLnN0b3JlLmJlZ2luVHJhbnNhY3Rpb24oJ3JlYWR3cml0ZScpLFxuXHRcdFx0ZGF0YSA9IEJ1ZmZlci5mcm9tKCd7fScpO1xuXHRcdHRoaXMuY29tbWl0TmV3RmlsZSh0eCwgcCwgRmlsZVR5cGUuRElSRUNUT1JZLCBtb2RlLCBjcmVkLCBkYXRhKTtcblx0fVxuXG5cdHB1YmxpYyByZWFkZGlyU3luYyhwOiBzdHJpbmcsIGNyZWQ6IENyZWQpOiBzdHJpbmdbXSB7XG5cdFx0Y29uc3QgdHggPSB0aGlzLnN0b3JlLmJlZ2luVHJhbnNhY3Rpb24oJ3JlYWRvbmx5Jyk7XG5cdFx0Y29uc3Qgbm9kZSA9IHRoaXMuZmluZElOb2RlKHR4LCBwKTtcblx0XHRpZiAoIW5vZGUudG9TdGF0cygpLmhhc0FjY2VzcyhGaWxlUGVybS5SRUFELCBjcmVkKSkge1xuXHRcdFx0dGhyb3cgQXBpRXJyb3IuRUFDQ0VTKHApO1xuXHRcdH1cblx0XHRyZXR1cm4gT2JqZWN0LmtleXModGhpcy5nZXREaXJMaXN0aW5nKHR4LCBwLCBub2RlKSk7XG5cdH1cblxuXHRwdWJsaWMgY2htb2RTeW5jKHA6IHN0cmluZywgaXNMY2htb2Q6IGJvb2xlYW4sIG1vZGU6IG51bWJlciwgY3JlZDogQ3JlZCk6IHZvaWQge1xuXHRcdGNvbnN0IHBhdGggPSBpc0xjaG1vZCA/IHAgOiB0aGlzLnJlYWxwYXRoU3luYyhwLCB7fSwgY3JlZCk7XG5cdFx0Y29uc3QgZmQgPSB0aGlzLm9wZW5GaWxlU3luYyhwYXRoLCBGaWxlRmxhZy5nZXRGaWxlRmxhZygncisnKSwgY3JlZCk7XG5cdFx0ZmQuY2htb2RTeW5jKG1vZGUpO1xuXHR9XG5cblx0cHVibGljIGNob3duU3luYyhwOiBzdHJpbmcsIGlzTGNob3duOiBib29sZWFuLCBuZXdfdWlkOiBudW1iZXIsIG5ld19naWQ6IG51bWJlciwgY3JlZDogQ3JlZCk6IHZvaWQge1xuXHRcdGNvbnN0IHBhdGggPSBpc0xjaG93biA/IHAgOiB0aGlzLnJlYWxwYXRoU3luYyhwLCB7fSwgY3JlZCk7XG5cdFx0Y29uc3QgZmQgPSB0aGlzLm9wZW5GaWxlU3luYyhwYXRoLCBGaWxlRmxhZy5nZXRGaWxlRmxhZygncisnKSwgY3JlZCk7XG5cdFx0ZmQuY2hvd25TeW5jKGNyZWQuZXVpZCwgY3JlZC5lZ2lkKTtcblx0fVxuXG5cdHB1YmxpYyBfc3luY1N5bmMocDogc3RyaW5nLCBkYXRhOiBCdWZmZXIsIHN0YXRzOiBTdGF0cyk6IHZvaWQge1xuXHRcdC8vIEB0b2RvIEVuc3VyZSBtdGltZSB1cGRhdGVzIHByb3Blcmx5LCBhbmQgdXNlIHRoYXQgdG8gZGV0ZXJtaW5lIGlmIGEgZGF0YVxuXHRcdC8vICAgICAgIHVwZGF0ZSBpcyByZXF1aXJlZC5cblx0XHRjb25zdCB0eCA9IHRoaXMuc3RvcmUuYmVnaW5UcmFuc2FjdGlvbigncmVhZHdyaXRlJyksXG5cdFx0XHQvLyBXZSB1c2UgdGhlIF9maW5kSW5vZGUgaGVscGVyIGJlY2F1c2Ugd2UgYWN0dWFsbHkgbmVlZCB0aGUgSU5vZGUgaWQuXG5cdFx0XHRmaWxlSW5vZGVJZCA9IHRoaXMuX2ZpbmRJTm9kZSh0eCwgcGF0aC5kaXJuYW1lKHApLCBwYXRoLmJhc2VuYW1lKHApKSxcblx0XHRcdGZpbGVJbm9kZSA9IHRoaXMuZ2V0SU5vZGUodHgsIHAsIGZpbGVJbm9kZUlkKSxcblx0XHRcdGlub2RlQ2hhbmdlZCA9IGZpbGVJbm9kZS51cGRhdGUoc3RhdHMpO1xuXG5cdFx0dHJ5IHtcblx0XHRcdC8vIFN5bmMgZGF0YS5cblx0XHRcdHR4LnB1dChmaWxlSW5vZGUuaWQsIGRhdGEsIHRydWUpO1xuXHRcdFx0Ly8gU3luYyBtZXRhZGF0YS5cblx0XHRcdGlmIChpbm9kZUNoYW5nZWQpIHtcblx0XHRcdFx0dHgucHV0KGZpbGVJbm9kZUlkLCBmaWxlSW5vZGUudG9CdWZmZXIoKSwgdHJ1ZSk7XG5cdFx0XHR9XG5cdFx0fSBjYXRjaCAoZSkge1xuXHRcdFx0dHguYWJvcnQoKTtcblx0XHRcdHRocm93IGU7XG5cdFx0fVxuXHRcdHR4LmNvbW1pdCgpO1xuXHR9XG5cblx0LyoqXG5cdCAqIENoZWNrcyBpZiB0aGUgcm9vdCBkaXJlY3RvcnkgZXhpc3RzLiBDcmVhdGVzIGl0IGlmIGl0IGRvZXNuJ3QuXG5cdCAqL1xuXHRwcml2YXRlIG1ha2VSb290RGlyZWN0b3J5KCkge1xuXHRcdGNvbnN0IHR4ID0gdGhpcy5zdG9yZS5iZWdpblRyYW5zYWN0aW9uKCdyZWFkd3JpdGUnKTtcblx0XHRpZiAodHguZ2V0KFJPT1RfTk9ERV9JRCkgPT09IHVuZGVmaW5lZCkge1xuXHRcdFx0Ly8gQ3JlYXRlIG5ldyBpbm9kZS5cblx0XHRcdGNvbnN0IGN1cnJUaW1lID0gbmV3IERhdGUoKS5nZXRUaW1lKCksXG5cdFx0XHRcdC8vIE1vZGUgMDY2Niwgb3duZWQgYnkgcm9vdDpyb290XG5cdFx0XHRcdGRpcklub2RlID0gbmV3IElub2RlKEdlbmVyYXRlUmFuZG9tSUQoKSwgNDA5NiwgNTExIHwgRmlsZVR5cGUuRElSRUNUT1JZLCBjdXJyVGltZSwgY3VyclRpbWUsIGN1cnJUaW1lLCAwLCAwKTtcblx0XHRcdC8vIElmIHRoZSByb290IGRvZXNuJ3QgZXhpc3QsIHRoZSBmaXJzdCByYW5kb20gSUQgc2hvdWxkbid0IGV4aXN0LFxuXHRcdFx0Ly8gZWl0aGVyLlxuXHRcdFx0dHgucHV0KGRpcklub2RlLmlkLCBnZXRFbXB0eURpck5vZGUoKSwgZmFsc2UpO1xuXHRcdFx0dHgucHV0KFJPT1RfTk9ERV9JRCwgZGlySW5vZGUudG9CdWZmZXIoKSwgZmFsc2UpO1xuXHRcdFx0dHguY29tbWl0KCk7XG5cdFx0fVxuXHR9XG5cblx0LyoqXG5cdCAqIEhlbHBlciBmdW5jdGlvbiBmb3IgZmluZElOb2RlLlxuXHQgKiBAcGFyYW0gcGFyZW50IFRoZSBwYXJlbnQgZGlyZWN0b3J5IG9mIHRoZSBmaWxlIHdlIGFyZSBhdHRlbXB0aW5nIHRvIGZpbmQuXG5cdCAqIEBwYXJhbSBmaWxlbmFtZSBUaGUgZmlsZW5hbWUgb2YgdGhlIGlub2RlIHdlIGFyZSBhdHRlbXB0aW5nIHRvIGZpbmQsIG1pbnVzXG5cdCAqICAgdGhlIHBhcmVudC5cblx0ICogQHJldHVybiBzdHJpbmcgVGhlIElEIG9mIHRoZSBmaWxlJ3MgaW5vZGUgaW4gdGhlIGZpbGUgc3lzdGVtLlxuXHQgKi9cblx0cHJpdmF0ZSBfZmluZElOb2RlKHR4OiBTeW5jS2V5VmFsdWVST1RyYW5zYWN0aW9uLCBwYXJlbnQ6IHN0cmluZywgZmlsZW5hbWU6IHN0cmluZyk6IHN0cmluZyB7XG5cdFx0Y29uc3QgcmVhZERpcmVjdG9yeSA9IChpbm9kZTogSW5vZGUpOiBzdHJpbmcgPT4ge1xuXHRcdFx0Ly8gR2V0IHRoZSByb290J3MgZGlyZWN0b3J5IGxpc3RpbmcuXG5cdFx0XHRjb25zdCBkaXJMaXN0ID0gdGhpcy5nZXREaXJMaXN0aW5nKHR4LCBwYXJlbnQsIGlub2RlKTtcblx0XHRcdC8vIEdldCB0aGUgZmlsZSdzIElELlxuXHRcdFx0aWYgKGRpckxpc3RbZmlsZW5hbWVdKSB7XG5cdFx0XHRcdHJldHVybiBkaXJMaXN0W2ZpbGVuYW1lXTtcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdHRocm93IEFwaUVycm9yLkVOT0VOVChwYXRoLnJlc29sdmUocGFyZW50LCBmaWxlbmFtZSkpO1xuXHRcdFx0fVxuXHRcdH07XG5cdFx0aWYgKHBhcmVudCA9PT0gJy4nKSB7XG5cdFx0XHRwYXJlbnQgPSBwcm9jZXNzLmN3ZCgpO1xuXHRcdH1cblx0XHRpZiAocGFyZW50ID09PSAnLycpIHtcblx0XHRcdGlmIChmaWxlbmFtZSA9PT0gJycpIHtcblx0XHRcdFx0Ly8gQkFTRSBDQVNFICMxOiBSZXR1cm4gdGhlIHJvb3QncyBJRC5cblx0XHRcdFx0cmV0dXJuIFJPT1RfTk9ERV9JRDtcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdC8vIEJBU0UgQ0FTRSAjMjogRmluZCB0aGUgaXRlbSBpbiB0aGUgcm9vdCBub2RlLlxuXHRcdFx0XHRyZXR1cm4gcmVhZERpcmVjdG9yeSh0aGlzLmdldElOb2RlKHR4LCBwYXJlbnQsIFJPT1RfTk9ERV9JRCkpO1xuXHRcdFx0fVxuXHRcdH0gZWxzZSB7XG5cdFx0XHRyZXR1cm4gcmVhZERpcmVjdG9yeSh0aGlzLmdldElOb2RlKHR4LCBwYXJlbnQgKyBwYXRoLnNlcCArIGZpbGVuYW1lLCB0aGlzLl9maW5kSU5vZGUodHgsIHBhdGguZGlybmFtZShwYXJlbnQpLCBwYXRoLmJhc2VuYW1lKHBhcmVudCkpKSk7XG5cdFx0fVxuXHR9XG5cblx0LyoqXG5cdCAqIEZpbmRzIHRoZSBJbm9kZSBvZiB0aGUgZ2l2ZW4gcGF0aC5cblx0ICogQHBhcmFtIHAgVGhlIHBhdGggdG8gbG9vayB1cC5cblx0ICogQHJldHVybiBUaGUgSW5vZGUgb2YgdGhlIHBhdGggcC5cblx0ICogQHRvZG8gbWVtb2l6ZS9jYWNoZVxuXHQgKi9cblx0cHJpdmF0ZSBmaW5kSU5vZGUodHg6IFN5bmNLZXlWYWx1ZVJPVHJhbnNhY3Rpb24sIHA6IHN0cmluZyk6IElub2RlIHtcblx0XHRyZXR1cm4gdGhpcy5nZXRJTm9kZSh0eCwgcCwgdGhpcy5fZmluZElOb2RlKHR4LCBwYXRoLmRpcm5hbWUocCksIHBhdGguYmFzZW5hbWUocCkpKTtcblx0fVxuXG5cdC8qKlxuXHQgKiBHaXZlbiB0aGUgSUQgb2YgYSBub2RlLCByZXRyaWV2ZXMgdGhlIGNvcnJlc3BvbmRpbmcgSW5vZGUuXG5cdCAqIEBwYXJhbSB0eCBUaGUgdHJhbnNhY3Rpb24gdG8gdXNlLlxuXHQgKiBAcGFyYW0gcCBUaGUgY29ycmVzcG9uZGluZyBwYXRoIHRvIHRoZSBmaWxlICh1c2VkIGZvciBlcnJvciBtZXNzYWdlcykuXG5cdCAqIEBwYXJhbSBpZCBUaGUgSUQgdG8gbG9vayB1cC5cblx0ICovXG5cdHByaXZhdGUgZ2V0SU5vZGUodHg6IFN5bmNLZXlWYWx1ZVJPVHJhbnNhY3Rpb24sIHA6IHN0cmluZywgaWQ6IHN0cmluZyk6IElub2RlIHtcblx0XHRjb25zdCBpbm9kZSA9IHR4LmdldChpZCk7XG5cdFx0aWYgKGlub2RlID09PSB1bmRlZmluZWQpIHtcblx0XHRcdHRocm93IEFwaUVycm9yLkVOT0VOVChwKTtcblx0XHR9XG5cdFx0cmV0dXJuIElub2RlLmZyb21CdWZmZXIoaW5vZGUpO1xuXHR9XG5cblx0LyoqXG5cdCAqIEdpdmVuIHRoZSBJbm9kZSBvZiBhIGRpcmVjdG9yeSwgcmV0cmlldmVzIHRoZSBjb3JyZXNwb25kaW5nIGRpcmVjdG9yeVxuXHQgKiBsaXN0aW5nLlxuXHQgKi9cblx0cHJpdmF0ZSBnZXREaXJMaXN0aW5nKHR4OiBTeW5jS2V5VmFsdWVST1RyYW5zYWN0aW9uLCBwOiBzdHJpbmcsIGlub2RlOiBJbm9kZSk6IHsgW2ZpbGVOYW1lOiBzdHJpbmddOiBzdHJpbmcgfSB7XG5cdFx0aWYgKCFpbm9kZS5pc0RpcmVjdG9yeSgpKSB7XG5cdFx0XHR0aHJvdyBBcGlFcnJvci5FTk9URElSKHApO1xuXHRcdH1cblx0XHRjb25zdCBkYXRhID0gdHguZ2V0KGlub2RlLmlkKTtcblx0XHRpZiAoZGF0YSA9PT0gdW5kZWZpbmVkKSB7XG5cdFx0XHR0aHJvdyBBcGlFcnJvci5FTk9FTlQocCk7XG5cdFx0fVxuXHRcdHJldHVybiBKU09OLnBhcnNlKGRhdGEudG9TdHJpbmcoKSk7XG5cdH1cblxuXHQvKipcblx0ICogQ3JlYXRlcyBhIG5ldyBub2RlIHVuZGVyIGEgcmFuZG9tIElELiBSZXRyaWVzIDUgdGltZXMgYmVmb3JlIGdpdmluZyB1cCBpblxuXHQgKiB0aGUgZXhjZWVkaW5nbHkgdW5saWtlbHkgY2hhbmNlIHRoYXQgd2UgdHJ5IHRvIHJldXNlIGEgcmFuZG9tIEdVSUQuXG5cdCAqIEByZXR1cm4gVGhlIEdVSUQgdGhhdCB0aGUgZGF0YSB3YXMgc3RvcmVkIHVuZGVyLlxuXHQgKi9cblx0cHJpdmF0ZSBhZGROZXdOb2RlKHR4OiBTeW5jS2V5VmFsdWVSV1RyYW5zYWN0aW9uLCBkYXRhOiBCdWZmZXIpOiBzdHJpbmcge1xuXHRcdGNvbnN0IHJldHJpZXMgPSAwO1xuXHRcdGxldCBjdXJySWQ6IHN0cmluZztcblx0XHR3aGlsZSAocmV0cmllcyA8IDUpIHtcblx0XHRcdHRyeSB7XG5cdFx0XHRcdGN1cnJJZCA9IEdlbmVyYXRlUmFuZG9tSUQoKTtcblx0XHRcdFx0dHgucHV0KGN1cnJJZCwgZGF0YSwgZmFsc2UpO1xuXHRcdFx0XHRyZXR1cm4gY3VycklkO1xuXHRcdFx0fSBjYXRjaCAoZSkge1xuXHRcdFx0XHQvLyBJZ25vcmUgYW5kIHJlcm9sbC5cblx0XHRcdH1cblx0XHR9XG5cdFx0dGhyb3cgbmV3IEFwaUVycm9yKEVycm9yQ29kZS5FSU8sICdVbmFibGUgdG8gY29tbWl0IGRhdGEgdG8ga2V5LXZhbHVlIHN0b3JlLicpO1xuXHR9XG5cblx0LyoqXG5cdCAqIENvbW1pdHMgYSBuZXcgZmlsZSAod2VsbCwgYSBGSUxFIG9yIGEgRElSRUNUT1JZKSB0byB0aGUgZmlsZSBzeXN0ZW0gd2l0aFxuXHQgKiB0aGUgZ2l2ZW4gbW9kZS5cblx0ICogTm90ZTogVGhpcyB3aWxsIGNvbW1pdCB0aGUgdHJhbnNhY3Rpb24uXG5cdCAqIEBwYXJhbSBwIFRoZSBwYXRoIHRvIHRoZSBuZXcgZmlsZS5cblx0ICogQHBhcmFtIHR5cGUgVGhlIHR5cGUgb2YgdGhlIG5ldyBmaWxlLlxuXHQgKiBAcGFyYW0gbW9kZSBUaGUgbW9kZSB0byBjcmVhdGUgdGhlIG5ldyBmaWxlIHdpdGguXG5cdCAqIEBwYXJhbSBkYXRhIFRoZSBkYXRhIHRvIHN0b3JlIGF0IHRoZSBmaWxlJ3MgZGF0YSBub2RlLlxuXHQgKiBAcmV0dXJuIFRoZSBJbm9kZSBmb3IgdGhlIG5ldyBmaWxlLlxuXHQgKi9cblx0cHJpdmF0ZSBjb21taXROZXdGaWxlKHR4OiBTeW5jS2V5VmFsdWVSV1RyYW5zYWN0aW9uLCBwOiBzdHJpbmcsIHR5cGU6IEZpbGVUeXBlLCBtb2RlOiBudW1iZXIsIGNyZWQ6IENyZWQsIGRhdGE6IEJ1ZmZlcik6IElub2RlIHtcblx0XHRjb25zdCBwYXJlbnREaXIgPSBwYXRoLmRpcm5hbWUocCksXG5cdFx0XHRmbmFtZSA9IHBhdGguYmFzZW5hbWUocCksXG5cdFx0XHRwYXJlbnROb2RlID0gdGhpcy5maW5kSU5vZGUodHgsIHBhcmVudERpciksXG5cdFx0XHRkaXJMaXN0aW5nID0gdGhpcy5nZXREaXJMaXN0aW5nKHR4LCBwYXJlbnREaXIsIHBhcmVudE5vZGUpLFxuXHRcdFx0Y3VyclRpbWUgPSBuZXcgRGF0ZSgpLmdldFRpbWUoKTtcblxuXHRcdC8vQ2hlY2sgdGhhdCB0aGUgY3JlYXRlciBoYXMgY29ycmVjdCBhY2Nlc3Ncblx0XHRpZiAoIXBhcmVudE5vZGUudG9TdGF0cygpLmhhc0FjY2VzcygwYjAxMDAgLyogV3JpdGUgKi8sIGNyZWQpKSB7XG5cdFx0XHR0aHJvdyBBcGlFcnJvci5FQUNDRVMocCk7XG5cdFx0fVxuXG5cdFx0Ly8gSW52YXJpYW50OiBUaGUgcm9vdCBhbHdheXMgZXhpc3RzLlxuXHRcdC8vIElmIHdlIGRvbid0IGNoZWNrIHRoaXMgcHJpb3IgdG8gdGFraW5nIHN0ZXBzIGJlbG93LCB3ZSB3aWxsIGNyZWF0ZSBhXG5cdFx0Ly8gZmlsZSB3aXRoIG5hbWUgJycgaW4gcm9vdCBzaG91bGQgcCA9PSAnLycuXG5cdFx0aWYgKHAgPT09ICcvJykge1xuXHRcdFx0dGhyb3cgQXBpRXJyb3IuRUVYSVNUKHApO1xuXHRcdH1cblxuXHRcdC8vIENoZWNrIGlmIGZpbGUgYWxyZWFkeSBleGlzdHMuXG5cdFx0aWYgKGRpckxpc3RpbmdbZm5hbWVdKSB7XG5cdFx0XHR0aHJvdyBBcGlFcnJvci5FRVhJU1QocCk7XG5cdFx0fVxuXG5cdFx0bGV0IGZpbGVOb2RlOiBJbm9kZTtcblx0XHR0cnkge1xuXHRcdFx0Ly8gQ29tbWl0IGRhdGEuXG5cdFx0XHRjb25zdCBkYXRhSWQgPSB0aGlzLmFkZE5ld05vZGUodHgsIGRhdGEpO1xuXHRcdFx0ZmlsZU5vZGUgPSBuZXcgSW5vZGUoZGF0YUlkLCBkYXRhLmxlbmd0aCwgbW9kZSB8IHR5cGUsIGN1cnJUaW1lLCBjdXJyVGltZSwgY3VyclRpbWUsIGNyZWQudWlkLCBjcmVkLmdpZCk7XG5cdFx0XHQvLyBDb21taXQgZmlsZSBub2RlLlxuXHRcdFx0Y29uc3QgZmlsZU5vZGVJZCA9IHRoaXMuYWRkTmV3Tm9kZSh0eCwgZmlsZU5vZGUudG9CdWZmZXIoKSk7XG5cdFx0XHQvLyBVcGRhdGUgYW5kIGNvbW1pdCBwYXJlbnQgZGlyZWN0b3J5IGxpc3RpbmcuXG5cdFx0XHRkaXJMaXN0aW5nW2ZuYW1lXSA9IGZpbGVOb2RlSWQ7XG5cdFx0XHR0eC5wdXQocGFyZW50Tm9kZS5pZCwgQnVmZmVyLmZyb20oSlNPTi5zdHJpbmdpZnkoZGlyTGlzdGluZykpLCB0cnVlKTtcblx0XHR9IGNhdGNoIChlKSB7XG5cdFx0XHR0eC5hYm9ydCgpO1xuXHRcdFx0dGhyb3cgZTtcblx0XHR9XG5cdFx0dHguY29tbWl0KCk7XG5cdFx0cmV0dXJuIGZpbGVOb2RlO1xuXHR9XG5cblx0LyoqXG5cdCAqIFJlbW92ZSBhbGwgdHJhY2VzIG9mIHRoZSBnaXZlbiBwYXRoIGZyb20gdGhlIGZpbGUgc3lzdGVtLlxuXHQgKiBAcGFyYW0gcCBUaGUgcGF0aCB0byByZW1vdmUgZnJvbSB0aGUgZmlsZSBzeXN0ZW0uXG5cdCAqIEBwYXJhbSBpc0RpciBEb2VzIHRoZSBwYXRoIGJlbG9uZyB0byBhIGRpcmVjdG9yeSwgb3IgYSBmaWxlP1xuXHQgKiBAdG9kbyBVcGRhdGUgbXRpbWUuXG5cdCAqL1xuXHRwcml2YXRlIHJlbW92ZUVudHJ5KHA6IHN0cmluZywgaXNEaXI6IGJvb2xlYW4sIGNyZWQ6IENyZWQpOiB2b2lkIHtcblx0XHRjb25zdCB0eCA9IHRoaXMuc3RvcmUuYmVnaW5UcmFuc2FjdGlvbigncmVhZHdyaXRlJyksXG5cdFx0XHRwYXJlbnQ6IHN0cmluZyA9IHBhdGguZGlybmFtZShwKSxcblx0XHRcdHBhcmVudE5vZGUgPSB0aGlzLmZpbmRJTm9kZSh0eCwgcGFyZW50KSxcblx0XHRcdHBhcmVudExpc3RpbmcgPSB0aGlzLmdldERpckxpc3RpbmcodHgsIHBhcmVudCwgcGFyZW50Tm9kZSksXG5cdFx0XHRmaWxlTmFtZTogc3RyaW5nID0gcGF0aC5iYXNlbmFtZShwKTtcblxuXHRcdGlmICghcGFyZW50TGlzdGluZ1tmaWxlTmFtZV0pIHtcblx0XHRcdHRocm93IEFwaUVycm9yLkVOT0VOVChwKTtcblx0XHR9XG5cblx0XHRjb25zdCBmaWxlTm9kZUlkID0gcGFyZW50TGlzdGluZ1tmaWxlTmFtZV07XG5cblx0XHQvLyBHZXQgZmlsZSBpbm9kZS5cblx0XHRjb25zdCBmaWxlTm9kZSA9IHRoaXMuZ2V0SU5vZGUodHgsIHAsIGZpbGVOb2RlSWQpO1xuXG5cdFx0aWYgKCFmaWxlTm9kZS50b1N0YXRzKCkuaGFzQWNjZXNzKEZpbGVQZXJtLldSSVRFLCBjcmVkKSkge1xuXHRcdFx0dGhyb3cgQXBpRXJyb3IuRUFDQ0VTKHApO1xuXHRcdH1cblxuXHRcdC8vIFJlbW92ZSBmcm9tIGRpcmVjdG9yeSBsaXN0aW5nIG9mIHBhcmVudC5cblx0XHRkZWxldGUgcGFyZW50TGlzdGluZ1tmaWxlTmFtZV07XG5cblx0XHRpZiAoIWlzRGlyICYmIGZpbGVOb2RlLmlzRGlyZWN0b3J5KCkpIHtcblx0XHRcdHRocm93IEFwaUVycm9yLkVJU0RJUihwKTtcblx0XHR9IGVsc2UgaWYgKGlzRGlyICYmICFmaWxlTm9kZS5pc0RpcmVjdG9yeSgpKSB7XG5cdFx0XHR0aHJvdyBBcGlFcnJvci5FTk9URElSKHApO1xuXHRcdH1cblxuXHRcdHRyeSB7XG5cdFx0XHQvLyBEZWxldGUgZGF0YS5cblx0XHRcdHR4LmRlbChmaWxlTm9kZS5pZCk7XG5cdFx0XHQvLyBEZWxldGUgbm9kZS5cblx0XHRcdHR4LmRlbChmaWxlTm9kZUlkKTtcblx0XHRcdC8vIFVwZGF0ZSBkaXJlY3RvcnkgbGlzdGluZy5cblx0XHRcdHR4LnB1dChwYXJlbnROb2RlLmlkLCBCdWZmZXIuZnJvbShKU09OLnN0cmluZ2lmeShwYXJlbnRMaXN0aW5nKSksIHRydWUpO1xuXHRcdH0gY2F0Y2ggKGUpIHtcblx0XHRcdHR4LmFib3J0KCk7XG5cdFx0XHR0aHJvdyBlO1xuXHRcdH1cblx0XHQvLyBTdWNjZXNzLlxuXHRcdHR4LmNvbW1pdCgpO1xuXHR9XG59XG5cbi8qKlxuICogUmVwcmVzZW50cyBhbiAqYXN5bmNocm9ub3VzKiBrZXktdmFsdWUgc3RvcmUuXG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgQXN5bmNLZXlWYWx1ZVN0b3JlIHtcblx0LyoqXG5cdCAqIFRoZSBuYW1lIG9mIHRoZSBrZXktdmFsdWUgc3RvcmUuXG5cdCAqL1xuXHRuYW1lKCk6IHN0cmluZztcblx0LyoqXG5cdCAqIEVtcHRpZXMgdGhlIGtleS12YWx1ZSBzdG9yZSBjb21wbGV0ZWx5LlxuXHQgKi9cblx0Y2xlYXIoY2I6IEJGU09uZUFyZ0NhbGxiYWNrKTogdm9pZDtcblx0LyoqXG5cdCAqIEJlZ2lucyBhIHJlYWQtd3JpdGUgdHJhbnNhY3Rpb24uXG5cdCAqL1xuXHRiZWdpblRyYW5zYWN0aW9uKHR5cGU6ICdyZWFkd3JpdGUnKTogQXN5bmNLZXlWYWx1ZVJXVHJhbnNhY3Rpb247XG5cdC8qKlxuXHQgKiBCZWdpbnMgYSByZWFkLW9ubHkgdHJhbnNhY3Rpb24uXG5cdCAqL1xuXHRiZWdpblRyYW5zYWN0aW9uKHR5cGU6ICdyZWFkb25seScpOiBBc3luY0tleVZhbHVlUk9UcmFuc2FjdGlvbjtcblx0YmVnaW5UcmFuc2FjdGlvbih0eXBlOiBzdHJpbmcpOiBBc3luY0tleVZhbHVlUk9UcmFuc2FjdGlvbjtcbn1cblxuLyoqXG4gKiBSZXByZXNlbnRzIGFuIGFzeW5jaHJvbm91cyByZWFkLW9ubHkgdHJhbnNhY3Rpb24uXG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgQXN5bmNLZXlWYWx1ZVJPVHJhbnNhY3Rpb24ge1xuXHQvKipcblx0ICogUmV0cmlldmVzIHRoZSBkYXRhIGF0IHRoZSBnaXZlbiBrZXkuXG5cdCAqIEBwYXJhbSBrZXkgVGhlIGtleSB0byBsb29rIHVuZGVyIGZvciBkYXRhLlxuXHQgKi9cblx0Z2V0KGtleTogc3RyaW5nLCBjYjogQkZTQ2FsbGJhY2s8QnVmZmVyPik6IHZvaWQ7XG59XG5cbi8qKlxuICogUmVwcmVzZW50cyBhbiBhc3luY2hyb25vdXMgcmVhZC13cml0ZSB0cmFuc2FjdGlvbi5cbiAqL1xuZXhwb3J0IGludGVyZmFjZSBBc3luY0tleVZhbHVlUldUcmFuc2FjdGlvbiBleHRlbmRzIEFzeW5jS2V5VmFsdWVST1RyYW5zYWN0aW9uIHtcblx0LyoqXG5cdCAqIEFkZHMgdGhlIGRhdGEgdG8gdGhlIHN0b3JlIHVuZGVyIHRoZSBnaXZlbiBrZXkuIE92ZXJ3cml0ZXMgYW55IGV4aXN0aW5nXG5cdCAqIGRhdGEuXG5cdCAqIEBwYXJhbSBrZXkgVGhlIGtleSB0byBhZGQgdGhlIGRhdGEgdW5kZXIuXG5cdCAqIEBwYXJhbSBkYXRhIFRoZSBkYXRhIHRvIGFkZCB0byB0aGUgc3RvcmUuXG5cdCAqIEBwYXJhbSBvdmVyd3JpdGUgSWYgJ3RydWUnLCBvdmVyd3JpdGUgYW55IGV4aXN0aW5nIGRhdGEuIElmICdmYWxzZScsXG5cdCAqICAgYXZvaWRzIHdyaXRpbmcgdGhlIGRhdGEgaWYgdGhlIGtleSBleGlzdHMuXG5cdCAqIEBwYXJhbSBjYiBUcmlnZ2VyZWQgd2l0aCBhbiBlcnJvciBhbmQgd2hldGhlciBvciBub3QgdGhlIHZhbHVlIHdhc1xuXHQgKiAgIGNvbW1pdHRlZC5cblx0ICovXG5cdHB1dChrZXk6IHN0cmluZywgZGF0YTogQnVmZmVyLCBvdmVyd3JpdGU6IGJvb2xlYW4sIGNiOiBCRlNDYWxsYmFjazxib29sZWFuPik6IHZvaWQ7XG5cdC8qKlxuXHQgKiBEZWxldGVzIHRoZSBkYXRhIGF0IHRoZSBnaXZlbiBrZXkuXG5cdCAqIEBwYXJhbSBrZXkgVGhlIGtleSB0byBkZWxldGUgZnJvbSB0aGUgc3RvcmUuXG5cdCAqL1xuXHRkZWwoa2V5OiBzdHJpbmcsIGNiOiBCRlNPbmVBcmdDYWxsYmFjayk6IHZvaWQ7XG5cdC8qKlxuXHQgKiBDb21taXRzIHRoZSB0cmFuc2FjdGlvbi5cblx0ICovXG5cdGNvbW1pdChjYjogQkZTT25lQXJnQ2FsbGJhY2spOiB2b2lkO1xuXHQvKipcblx0ICogQWJvcnRzIGFuZCByb2xscyBiYWNrIHRoZSB0cmFuc2FjdGlvbi5cblx0ICovXG5cdGFib3J0KGNiOiBCRlNPbmVBcmdDYWxsYmFjayk6IHZvaWQ7XG59XG5cbmV4cG9ydCBjbGFzcyBBc3luY0tleVZhbHVlRmlsZSBleHRlbmRzIFByZWxvYWRGaWxlPEFzeW5jS2V5VmFsdWVGaWxlU3lzdGVtPiBpbXBsZW1lbnRzIEZpbGUge1xuXHRjb25zdHJ1Y3RvcihfZnM6IEFzeW5jS2V5VmFsdWVGaWxlU3lzdGVtLCBfcGF0aDogc3RyaW5nLCBfZmxhZzogRmlsZUZsYWcsIF9zdGF0OiBTdGF0cywgY29udGVudHM/OiBCdWZmZXIpIHtcblx0XHRzdXBlcihfZnMsIF9wYXRoLCBfZmxhZywgX3N0YXQsIGNvbnRlbnRzKTtcblx0fVxuXG5cdHB1YmxpYyBzeW5jKGNiOiBCRlNPbmVBcmdDYWxsYmFjayk6IHZvaWQge1xuXHRcdGlmICh0aGlzLmlzRGlydHkoKSkge1xuXHRcdFx0dGhpcy5fZnMuX3N5bmModGhpcy5nZXRQYXRoKCksIHRoaXMuZ2V0QnVmZmVyKCksIHRoaXMuZ2V0U3RhdHMoKSwgKGU/OiBBcGlFcnJvcikgPT4ge1xuXHRcdFx0XHRpZiAoIWUpIHtcblx0XHRcdFx0XHR0aGlzLnJlc2V0RGlydHkoKTtcblx0XHRcdFx0fVxuXHRcdFx0XHRjYihlKTtcblx0XHRcdH0pO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHRjYigpO1xuXHRcdH1cblx0fVxuXG5cdHB1YmxpYyBjbG9zZShjYjogQkZTT25lQXJnQ2FsbGJhY2spOiB2b2lkIHtcblx0XHR0aGlzLnN5bmMoY2IpO1xuXHR9XG59XG5cbi8qKlxuICogQW4gXCJBc3luY2hyb25vdXMga2V5LXZhbHVlIGZpbGUgc3lzdGVtXCIuIFN0b3JlcyBkYXRhIHRvL3JldHJpZXZlcyBkYXRhIGZyb21cbiAqIGFuIHVuZGVybHlpbmcgYXN5bmNocm9ub3VzIGtleS12YWx1ZSBzdG9yZS5cbiAqL1xuZXhwb3J0IGNsYXNzIEFzeW5jS2V5VmFsdWVGaWxlU3lzdGVtIGV4dGVuZHMgQmFzZUZpbGVTeXN0ZW0ge1xuXHRwdWJsaWMgc3RhdGljIGlzQXZhaWxhYmxlKCk6IGJvb2xlYW4ge1xuXHRcdHJldHVybiB0cnVlO1xuXHR9XG5cblx0cHJvdGVjdGVkIHN0b3JlOiBBc3luY0tleVZhbHVlU3RvcmU7XG5cdHByaXZhdGUgX2NhY2hlOiBMUlVDYWNoZSB8IG51bGwgPSBudWxsO1xuXG5cdGNvbnN0cnVjdG9yKGNhY2hlU2l6ZTogbnVtYmVyKSB7XG5cdFx0c3VwZXIoKTtcblx0XHRpZiAoY2FjaGVTaXplID4gMCkge1xuXHRcdFx0dGhpcy5fY2FjaGUgPSBuZXcgTFJVQ2FjaGUoY2FjaGVTaXplKTtcblx0XHR9XG5cdH1cblxuXHQvKipcblx0ICogSW5pdGlhbGl6ZXMgdGhlIGZpbGUgc3lzdGVtLiBUeXBpY2FsbHkgY2FsbGVkIGJ5IHN1YmNsYXNzZXMnIGFzeW5jXG5cdCAqIGNvbnN0cnVjdG9ycy5cblx0ICovXG5cdHB1YmxpYyBpbml0KHN0b3JlOiBBc3luY0tleVZhbHVlU3RvcmUsIGNiOiBCRlNPbmVBcmdDYWxsYmFjaykge1xuXHRcdHRoaXMuc3RvcmUgPSBzdG9yZTtcblx0XHQvLyBJTlZBUklBTlQ6IEVuc3VyZSB0aGF0IHRoZSByb290IGV4aXN0cy5cblx0XHR0aGlzLm1ha2VSb290RGlyZWN0b3J5KGNiKTtcblx0fVxuXHRwdWJsaWMgZ2V0TmFtZSgpOiBzdHJpbmcge1xuXHRcdHJldHVybiB0aGlzLnN0b3JlLm5hbWUoKTtcblx0fVxuXHRwdWJsaWMgaXNSZWFkT25seSgpOiBib29sZWFuIHtcblx0XHRyZXR1cm4gZmFsc2U7XG5cdH1cblx0cHVibGljIHN1cHBvcnRzU3ltbGlua3MoKTogYm9vbGVhbiB7XG5cdFx0cmV0dXJuIGZhbHNlO1xuXHR9XG5cdHB1YmxpYyBzdXBwb3J0c1Byb3BzKCk6IGJvb2xlYW4ge1xuXHRcdHJldHVybiB0cnVlO1xuXHR9XG5cdHB1YmxpYyBzdXBwb3J0c1N5bmNoKCk6IGJvb2xlYW4ge1xuXHRcdHJldHVybiBmYWxzZTtcblx0fVxuXG5cdC8qKlxuXHQgKiBEZWxldGUgYWxsIGNvbnRlbnRzIHN0b3JlZCBpbiB0aGUgZmlsZSBzeXN0ZW0uXG5cdCAqL1xuXHRwdWJsaWMgZW1wdHkoY2I6IEJGU09uZUFyZ0NhbGxiYWNrKTogdm9pZCB7XG5cdFx0aWYgKHRoaXMuX2NhY2hlKSB7XG5cdFx0XHR0aGlzLl9jYWNoZS5yZW1vdmVBbGwoKTtcblx0XHR9XG5cdFx0dGhpcy5zdG9yZS5jbGVhcigoZT8pID0+IHtcblx0XHRcdGlmIChub0Vycm9yKGUsIGNiKSkge1xuXHRcdFx0XHQvLyBJTlZBUklBTlQ6IFJvb3QgYWx3YXlzIGV4aXN0cy5cblx0XHRcdFx0dGhpcy5tYWtlUm9vdERpcmVjdG9yeShjYik7XG5cdFx0XHR9XG5cdFx0fSk7XG5cdH1cblxuXHRwdWJsaWMgYWNjZXNzKHA6IHN0cmluZywgbW9kZTogbnVtYmVyLCBjcmVkOiBDcmVkLCBjYjogQkZTT25lQXJnQ2FsbGJhY2spOiB2b2lkIHtcblx0XHRjb25zdCB0eCA9IHRoaXMuc3RvcmUuYmVnaW5UcmFuc2FjdGlvbigncmVhZG9ubHknKTtcblx0XHR0aGlzLmZpbmRJTm9kZSh0eCwgcCwgaW5vZGUgPT4ge1xuXHRcdFx0aWYgKGlub2RlIGluc3RhbmNlb2YgSW5vZGUpIHtcblx0XHRcdFx0aWYgKCFpbm9kZSEudG9TdGF0cygpLmhhc0FjY2Vzcyhtb2RlLCBjcmVkKSkge1xuXHRcdFx0XHRcdGNiKEFwaUVycm9yLkVBQ0NFUyhwKSk7XG5cdFx0XHRcdH1cblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdGNiKGlub2RlKTtcblx0XHRcdH1cblx0XHR9KTtcblx0fVxuXG5cdHB1YmxpYyByZW5hbWUob2xkUGF0aDogc3RyaW5nLCBuZXdQYXRoOiBzdHJpbmcsIGNyZWQ6IENyZWQsIGNiOiBCRlNPbmVBcmdDYWxsYmFjayk6IHZvaWQge1xuXHRcdC8vIFRPRE86IE1ha2UgcmVuYW1lIGNvbXBhdGlibGUgd2l0aCB0aGUgY2FjaGUuXG5cdFx0aWYgKHRoaXMuX2NhY2hlKSB7XG5cdFx0XHQvLyBDbGVhciBhbmQgZGlzYWJsZSBjYWNoZSBkdXJpbmcgcmVuYW1pbmcgcHJvY2Vzcy5cblx0XHRcdGNvbnN0IGMgPSB0aGlzLl9jYWNoZTtcblx0XHRcdHRoaXMuX2NhY2hlID0gbnVsbDtcblx0XHRcdGMucmVtb3ZlQWxsKCk7XG5cdFx0XHRjb25zdCBvbGRDYiA9IGNiO1xuXHRcdFx0Y2IgPSAoZT86IEFwaUVycm9yIHwgbnVsbCkgPT4ge1xuXHRcdFx0XHQvLyBSZXN0b3JlIGVtcHR5IGNhY2hlLlxuXHRcdFx0XHR0aGlzLl9jYWNoZSA9IGM7XG5cdFx0XHRcdG9sZENiKGUpO1xuXHRcdFx0fTtcblx0XHR9XG5cblx0XHRjb25zdCB0eCA9IHRoaXMuc3RvcmUuYmVnaW5UcmFuc2FjdGlvbigncmVhZHdyaXRlJyk7XG5cdFx0Y29uc3Qgb2xkUGFyZW50ID0gcGF0aC5kaXJuYW1lKG9sZFBhdGgpLFxuXHRcdFx0b2xkTmFtZSA9IHBhdGguYmFzZW5hbWUob2xkUGF0aCk7XG5cdFx0Y29uc3QgbmV3UGFyZW50ID0gcGF0aC5kaXJuYW1lKG5ld1BhdGgpLFxuXHRcdFx0bmV3TmFtZSA9IHBhdGguYmFzZW5hbWUobmV3UGF0aCk7XG5cdFx0Y29uc3QgaW5vZGVzOiB7IFtwYXRoOiBzdHJpbmddOiBJbm9kZSB9ID0ge307XG5cdFx0Y29uc3QgbGlzdHM6IHtcblx0XHRcdFtwYXRoOiBzdHJpbmddOiB7IFtmaWxlOiBzdHJpbmddOiBzdHJpbmcgfTtcblx0XHR9ID0ge307XG5cdFx0bGV0IGVycm9yT2NjdXJyZWQ6IGJvb2xlYW4gPSBmYWxzZTtcblxuXHRcdC8vIEludmFyaWFudDogQ2FuJ3QgbW92ZSBhIGZvbGRlciBpbnNpZGUgaXRzZWxmLlxuXHRcdC8vIFRoaXMgZnVubnkgbGl0dGxlIGhhY2sgZW5zdXJlcyB0aGF0IHRoZSBjaGVjayBwYXNzZXMgb25seSBpZiBvbGRQYXRoXG5cdFx0Ly8gaXMgYSBzdWJwYXRoIG9mIG5ld1BhcmVudC4gV2UgYXBwZW5kICcvJyB0byBhdm9pZCBtYXRjaGluZyBmb2xkZXJzIHRoYXRcblx0XHQvLyBhcmUgYSBzdWJzdHJpbmcgb2YgdGhlIGJvdHRvbS1tb3N0IGZvbGRlciBpbiB0aGUgcGF0aC5cblx0XHRpZiAoKG5ld1BhcmVudCArICcvJykuaW5kZXhPZihvbGRQYXRoICsgJy8nKSA9PT0gMCkge1xuXHRcdFx0cmV0dXJuIGNiKG5ldyBBcGlFcnJvcihFcnJvckNvZGUuRUJVU1ksIG9sZFBhcmVudCkpO1xuXHRcdH1cblxuXHRcdC8qKlxuXHRcdCAqIFJlc3BvbnNpYmxlIGZvciBQaGFzZSAyIG9mIHRoZSByZW5hbWUgb3BlcmF0aW9uOiBNb2RpZnlpbmcgYW5kXG5cdFx0ICogY29tbWl0dGluZyB0aGUgZGlyZWN0b3J5IGxpc3RpbmdzLiBDYWxsZWQgb25jZSB3ZSBoYXZlIHN1Y2Nlc3NmdWxseVxuXHRcdCAqIHJldHJpZXZlZCBib3RoIHRoZSBvbGQgYW5kIG5ldyBwYXJlbnQncyBpbm9kZXMgYW5kIGxpc3RpbmdzLlxuXHRcdCAqL1xuXHRcdGNvbnN0IHRoZU9sZVN3aXRjaGFyb28gPSAoKTogdm9pZCA9PiB7XG5cdFx0XHQvLyBTYW5pdHkgY2hlY2s6IEVuc3VyZSBib3RoIHBhdGhzIGFyZSBwcmVzZW50LCBhbmQgbm8gZXJyb3IgaGFzIG9jY3VycmVkLlxuXHRcdFx0aWYgKGVycm9yT2NjdXJyZWQgfHwgIU9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChsaXN0cywgb2xkUGFyZW50KSB8fCAhT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGxpc3RzLCBuZXdQYXJlbnQpKSB7XG5cdFx0XHRcdHJldHVybjtcblx0XHRcdH1cblx0XHRcdGNvbnN0IG9sZFBhcmVudExpc3QgPSBsaXN0c1tvbGRQYXJlbnRdLFxuXHRcdFx0XHRvbGRQYXJlbnRJTm9kZSA9IGlub2Rlc1tvbGRQYXJlbnRdLFxuXHRcdFx0XHRuZXdQYXJlbnRMaXN0ID0gbGlzdHNbbmV3UGFyZW50XSxcblx0XHRcdFx0bmV3UGFyZW50SU5vZGUgPSBpbm9kZXNbbmV3UGFyZW50XTtcblxuXHRcdFx0Ly8gRGVsZXRlIGZpbGUgZnJvbSBvbGQgcGFyZW50LlxuXHRcdFx0aWYgKCFvbGRQYXJlbnRMaXN0W29sZE5hbWVdKSB7XG5cdFx0XHRcdGNiKEFwaUVycm9yLkVOT0VOVChvbGRQYXRoKSk7XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRjb25zdCBmaWxlSWQgPSBvbGRQYXJlbnRMaXN0W29sZE5hbWVdO1xuXHRcdFx0XHRkZWxldGUgb2xkUGFyZW50TGlzdFtvbGROYW1lXTtcblxuXHRcdFx0XHQvLyBGaW5pc2hlcyBvZmYgdGhlIHJlbmFtaW5nIHByb2Nlc3MgYnkgYWRkaW5nIHRoZSBmaWxlIHRvIHRoZSBuZXdcblx0XHRcdFx0Ly8gcGFyZW50LlxuXHRcdFx0XHRjb25zdCBjb21wbGV0ZVJlbmFtZSA9ICgpID0+IHtcblx0XHRcdFx0XHRuZXdQYXJlbnRMaXN0W25ld05hbWVdID0gZmlsZUlkO1xuXHRcdFx0XHRcdC8vIENvbW1pdCBvbGQgcGFyZW50J3MgbGlzdC5cblx0XHRcdFx0XHR0eC5wdXQob2xkUGFyZW50SU5vZGUuaWQsIEJ1ZmZlci5mcm9tKEpTT04uc3RyaW5naWZ5KG9sZFBhcmVudExpc3QpKSwgdHJ1ZSwgKGU6IEFwaUVycm9yKSA9PiB7XG5cdFx0XHRcdFx0XHRpZiAobm9FcnJvclR4KGUsIHR4LCBjYikpIHtcblx0XHRcdFx0XHRcdFx0aWYgKG9sZFBhcmVudCA9PT0gbmV3UGFyZW50KSB7XG5cdFx0XHRcdFx0XHRcdFx0Ly8gRE9ORSFcblx0XHRcdFx0XHRcdFx0XHR0eC5jb21taXQoY2IpO1xuXHRcdFx0XHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdFx0XHRcdC8vIENvbW1pdCBuZXcgcGFyZW50J3MgbGlzdC5cblx0XHRcdFx0XHRcdFx0XHR0eC5wdXQobmV3UGFyZW50SU5vZGUuaWQsIEJ1ZmZlci5mcm9tKEpTT04uc3RyaW5naWZ5KG5ld1BhcmVudExpc3QpKSwgdHJ1ZSwgKGU6IEFwaUVycm9yKSA9PiB7XG5cdFx0XHRcdFx0XHRcdFx0XHRpZiAobm9FcnJvclR4KGUsIHR4LCBjYikpIHtcblx0XHRcdFx0XHRcdFx0XHRcdFx0dHguY29tbWl0KGNiKTtcblx0XHRcdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdFx0XHR9KTtcblx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH0pO1xuXHRcdFx0XHR9O1xuXG5cdFx0XHRcdGlmIChuZXdQYXJlbnRMaXN0W25ld05hbWVdKSB7XG5cdFx0XHRcdFx0Ly8gJ25ld1BhdGgnIGFscmVhZHkgZXhpc3RzLiBDaGVjayBpZiBpdCdzIGEgZmlsZSBvciBhIGRpcmVjdG9yeSwgYW5kXG5cdFx0XHRcdFx0Ly8gYWN0IGFjY29yZGluZ2x5LlxuXHRcdFx0XHRcdHRoaXMuZ2V0SU5vZGUodHgsIG5ld1BhdGgsIG5ld1BhcmVudExpc3RbbmV3TmFtZV0sIChlOiBBcGlFcnJvciwgaW5vZGU/OiBJbm9kZSkgPT4ge1xuXHRcdFx0XHRcdFx0aWYgKG5vRXJyb3JUeChlLCB0eCwgY2IpKSB7XG5cdFx0XHRcdFx0XHRcdGlmIChpbm9kZSEuaXNGaWxlKCkpIHtcblx0XHRcdFx0XHRcdFx0XHQvLyBEZWxldGUgdGhlIGZpbGUgYW5kIGNvbnRpbnVlLlxuXHRcdFx0XHRcdFx0XHRcdHR4LmRlbChpbm9kZSEuaWQsIChlPzogQXBpRXJyb3IpID0+IHtcblx0XHRcdFx0XHRcdFx0XHRcdGlmIChub0Vycm9yVHgoZSwgdHgsIGNiKSkge1xuXHRcdFx0XHRcdFx0XHRcdFx0XHR0eC5kZWwobmV3UGFyZW50TGlzdFtuZXdOYW1lXSwgKGU/OiBBcGlFcnJvcikgPT4ge1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdGlmIChub0Vycm9yVHgoZSwgdHgsIGNiKSkge1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0Y29tcGxldGVSZW5hbWUoKTtcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRcdFx0XHRcdH0pO1xuXHRcdFx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0XHRcdH0pO1xuXHRcdFx0XHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdFx0XHRcdC8vIENhbid0IG92ZXJ3cml0ZSBhIGRpcmVjdG9yeSB1c2luZyByZW5hbWUuXG5cdFx0XHRcdFx0XHRcdFx0dHguYWJvcnQoKGU/KSA9PiB7XG5cdFx0XHRcdFx0XHRcdFx0XHRjYihBcGlFcnJvci5FUEVSTShuZXdQYXRoKSk7XG5cdFx0XHRcdFx0XHRcdFx0fSk7XG5cdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9KTtcblx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRjb21wbGV0ZVJlbmFtZSgpO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fTtcblxuXHRcdC8qKlxuXHRcdCAqIEdyYWJzIGEgcGF0aCdzIGlub2RlIGFuZCBkaXJlY3RvcnkgbGlzdGluZywgYW5kIHNob3ZlcyBpdCBpbnRvIHRoZVxuXHRcdCAqIGlub2RlcyBhbmQgbGlzdHMgaGFzaGVzLlxuXHRcdCAqL1xuXHRcdGNvbnN0IHByb2Nlc3NJbm9kZUFuZExpc3RpbmdzID0gKHA6IHN0cmluZyk6IHZvaWQgPT4ge1xuXHRcdFx0dGhpcy5maW5kSU5vZGVBbmREaXJMaXN0aW5nKHR4LCBwLCAoZT86IEFwaUVycm9yIHwgbnVsbCwgbm9kZT86IElub2RlLCBkaXJMaXN0PzogeyBbbmFtZTogc3RyaW5nXTogc3RyaW5nIH0pOiB2b2lkID0+IHtcblx0XHRcdFx0aWYgKCFub2RlIS50b1N0YXRzKCkuaGFzQWNjZXNzKEZpbGVQZXJtLldSSVRFLCBjcmVkKSkge1xuXHRcdFx0XHRcdHRocm93IEFwaUVycm9yLkVBQ0NFUyhwKTtcblx0XHRcdFx0fVxuXHRcdFx0XHRpZiAoZSkge1xuXHRcdFx0XHRcdGlmICghZXJyb3JPY2N1cnJlZCkge1xuXHRcdFx0XHRcdFx0ZXJyb3JPY2N1cnJlZCA9IHRydWU7XG5cdFx0XHRcdFx0XHR0eC5hYm9ydCgoKSA9PiB7XG5cdFx0XHRcdFx0XHRcdGNiKGUpO1xuXHRcdFx0XHRcdFx0fSk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdC8vIElmIGVycm9yIGhhcyBvY2N1cnJlZCBhbHJlYWR5LCBqdXN0IHN0b3AgaGVyZS5cblx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRpbm9kZXNbcF0gPSBub2RlITtcblx0XHRcdFx0XHRsaXN0c1twXSA9IGRpckxpc3QhO1xuXHRcdFx0XHRcdHRoZU9sZVN3aXRjaGFyb28oKTtcblx0XHRcdFx0fVxuXHRcdFx0fSk7XG5cdFx0fTtcblxuXHRcdHByb2Nlc3NJbm9kZUFuZExpc3RpbmdzKG9sZFBhcmVudCk7XG5cdFx0aWYgKG9sZFBhcmVudCAhPT0gbmV3UGFyZW50KSB7XG5cdFx0XHRwcm9jZXNzSW5vZGVBbmRMaXN0aW5ncyhuZXdQYXJlbnQpO1xuXHRcdH1cblx0fVxuXG5cdHB1YmxpYyBzdGF0KHA6IHN0cmluZywgaXNMc3RhdDogYm9vbGVhbiwgY3JlZDogQ3JlZCwgY2I6IEJGU0NhbGxiYWNrPFN0YXRzPik6IHZvaWQge1xuXHRcdGNvbnN0IHR4ID0gdGhpcy5zdG9yZS5iZWdpblRyYW5zYWN0aW9uKCdyZWFkb25seScpO1xuXHRcdHRoaXMuZmluZElOb2RlKHR4LCBwLCAoZTogQXBpRXJyb3IsIGlub2RlPzogSW5vZGUpOiB2b2lkID0+IHtcblx0XHRcdGlmIChub0Vycm9yKGUsIGNiKSkge1xuXHRcdFx0XHRjb25zdCBzdGF0cyA9IGlub2RlIS50b1N0YXRzKCk7XG5cdFx0XHRcdGlmICghc3RhdHMuaGFzQWNjZXNzKEZpbGVQZXJtLlJFQUQsIGNyZWQpKSB7XG5cdFx0XHRcdFx0Y2IoQXBpRXJyb3IuRUFDQ0VTKHApKTtcblx0XHRcdFx0fVxuXHRcdFx0XHRjYihudWxsLCBzdGF0cyk7XG5cdFx0XHR9XG5cdFx0fSk7XG5cdH1cblxuXHRwdWJsaWMgY3JlYXRlRmlsZShwOiBzdHJpbmcsIGZsYWc6IEZpbGVGbGFnLCBtb2RlOiBudW1iZXIsIGNyZWQ6IENyZWQsIGNiOiBCRlNDYWxsYmFjazxGaWxlPik6IHZvaWQge1xuXHRcdGNvbnN0IHR4ID0gdGhpcy5zdG9yZS5iZWdpblRyYW5zYWN0aW9uKCdyZWFkd3JpdGUnKSxcblx0XHRcdGRhdGEgPSBlbXB0eUJ1ZmZlcigpO1xuXG5cdFx0dGhpcy5jb21taXROZXdGaWxlKHR4LCBwLCBGaWxlVHlwZS5GSUxFLCBtb2RlLCBjcmVkLCBkYXRhLCAoZTogQXBpRXJyb3IsIG5ld0ZpbGU/OiBJbm9kZSk6IHZvaWQgPT4ge1xuXHRcdFx0aWYgKG5vRXJyb3IoZSwgY2IpKSB7XG5cdFx0XHRcdGNiKG51bGwsIG5ldyBBc3luY0tleVZhbHVlRmlsZSh0aGlzLCBwLCBmbGFnLCBuZXdGaWxlIS50b1N0YXRzKCksIGRhdGEpKTtcblx0XHRcdH1cblx0XHR9KTtcblx0fVxuXG5cdHB1YmxpYyBvcGVuRmlsZShwOiBzdHJpbmcsIGZsYWc6IEZpbGVGbGFnLCBjcmVkOiBDcmVkLCBjYjogQkZTQ2FsbGJhY2s8RmlsZT4pOiB2b2lkIHtcblx0XHRjb25zdCB0eCA9IHRoaXMuc3RvcmUuYmVnaW5UcmFuc2FjdGlvbigncmVhZG9ubHknKTtcblx0XHQvLyBTdGVwIDE6IEdyYWIgdGhlIGZpbGUncyBpbm9kZS5cblx0XHR0aGlzLmZpbmRJTm9kZSh0eCwgcCwgKGU6IEFwaUVycm9yLCBpbm9kZT86IElub2RlKSA9PiB7XG5cdFx0XHRpZiAobm9FcnJvcihlLCBjYikpIHtcblx0XHRcdFx0Y29uc3Qgc3RhdHMgPSBpbm9kZSEudG9TdGF0cygpO1xuXHRcdFx0XHRpZiAoIXN0YXRzLmhhc0FjY2VzcyhmbGFnLmdldE1vZGUoKSwgY3JlZCkpIHtcblx0XHRcdFx0XHRjYihBcGlFcnJvci5FQUNDRVMocCkpO1xuXHRcdFx0XHR9XG5cdFx0XHRcdC8vIFN0ZXAgMjogR3JhYiB0aGUgZmlsZSdzIGRhdGEuXG5cdFx0XHRcdHR4LmdldChpbm9kZSEuaWQsIChlOiBBcGlFcnJvciwgZGF0YT86IEJ1ZmZlcik6IHZvaWQgPT4ge1xuXHRcdFx0XHRcdGlmIChub0Vycm9yKGUsIGNiKSkge1xuXHRcdFx0XHRcdFx0aWYgKGRhdGEgPT09IHVuZGVmaW5lZCkge1xuXHRcdFx0XHRcdFx0XHRjYihBcGlFcnJvci5FTk9FTlQocCkpO1xuXHRcdFx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRcdFx0Y2IobnVsbCwgbmV3IEFzeW5jS2V5VmFsdWVGaWxlKHRoaXMsIHAsIGZsYWcsIHN0YXRzLCBkYXRhKSk7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9KTtcblx0XHRcdH1cblx0XHR9KTtcblx0fVxuXG5cdHB1YmxpYyB1bmxpbmsocDogc3RyaW5nLCBjcmVkOiBDcmVkLCBjYjogQkZTT25lQXJnQ2FsbGJhY2spOiB2b2lkIHtcblx0XHR0aGlzLnJlbW92ZUVudHJ5KHAsIGZhbHNlLCBjcmVkLCBjYik7XG5cdH1cblxuXHRwdWJsaWMgcm1kaXIocDogc3RyaW5nLCBjcmVkOiBDcmVkLCBjYjogQkZTT25lQXJnQ2FsbGJhY2spOiB2b2lkIHtcblx0XHQvLyBDaGVjayBmaXJzdCBpZiBkaXJlY3RvcnkgaXMgZW1wdHkuXG5cdFx0dGhpcy5yZWFkZGlyKHAsIGNyZWQsIChlcnIsIGZpbGVzPykgPT4ge1xuXHRcdFx0aWYgKGVycikge1xuXHRcdFx0XHRjYihlcnIpO1xuXHRcdFx0fSBlbHNlIGlmIChmaWxlcyEubGVuZ3RoID4gMCkge1xuXHRcdFx0XHRjYihBcGlFcnJvci5FTk9URU1QVFkocCkpO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0dGhpcy5yZW1vdmVFbnRyeShwLCB0cnVlLCBjcmVkLCBjYik7XG5cdFx0XHR9XG5cdFx0fSk7XG5cdH1cblxuXHRwdWJsaWMgbWtkaXIocDogc3RyaW5nLCBtb2RlOiBudW1iZXIsIGNyZWQ6IENyZWQsIGNiOiBCRlNPbmVBcmdDYWxsYmFjayk6IHZvaWQge1xuXHRcdGNvbnN0IHR4ID0gdGhpcy5zdG9yZS5iZWdpblRyYW5zYWN0aW9uKCdyZWFkd3JpdGUnKSxcblx0XHRcdGRhdGEgPSBCdWZmZXIuZnJvbSgne30nKTtcblx0XHR0aGlzLmNvbW1pdE5ld0ZpbGUodHgsIHAsIEZpbGVUeXBlLkRJUkVDVE9SWSwgbW9kZSwgY3JlZCwgZGF0YSwgY2IpO1xuXHR9XG5cblx0cHVibGljIHJlYWRkaXIocDogc3RyaW5nLCBjcmVkOiBDcmVkLCBjYjogQkZTQ2FsbGJhY2s8c3RyaW5nW10+KTogdm9pZCB7XG5cdFx0Y29uc3QgdHggPSB0aGlzLnN0b3JlLmJlZ2luVHJhbnNhY3Rpb24oJ3JlYWRvbmx5Jyk7XG5cdFx0dGhpcy5maW5kSU5vZGUodHgsIHAsIChlOiBBcGlFcnJvciwgaW5vZGU/OiBJbm9kZSkgPT4ge1xuXHRcdFx0aWYgKG5vRXJyb3IoZSwgY2IpKSB7XG5cdFx0XHRcdGlmICghaW5vZGUhLnRvU3RhdHMoKS5oYXNBY2Nlc3MoRmlsZVBlcm0uUkVBRCwgY3JlZCkpIHtcblx0XHRcdFx0XHRjYihBcGlFcnJvci5FQUNDRVMocCkpO1xuXHRcdFx0XHR9XG5cdFx0XHRcdHRoaXMuZ2V0RGlyTGlzdGluZyh0eCwgcCwgaW5vZGUhLCAoZTogQXBpRXJyb3IsIGRpckxpc3Rpbmc/OiB7IFtuYW1lOiBzdHJpbmddOiBzdHJpbmcgfSkgPT4ge1xuXHRcdFx0XHRcdGlmIChub0Vycm9yKGUsIGNiKSkge1xuXHRcdFx0XHRcdFx0Y2IobnVsbCwgT2JqZWN0LmtleXMoZGlyTGlzdGluZyEpKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH0pO1xuXHRcdFx0fVxuXHRcdH0pO1xuXHR9XG5cblx0cHVibGljIF9zeW5jKHA6IHN0cmluZywgZGF0YTogQnVmZmVyLCBzdGF0czogU3RhdHMsIGNiOiBCRlNPbmVBcmdDYWxsYmFjayk6IHZvaWQge1xuXHRcdC8vIEB0b2RvIEVuc3VyZSBtdGltZSB1cGRhdGVzIHByb3Blcmx5LCBhbmQgdXNlIHRoYXQgdG8gZGV0ZXJtaW5lIGlmIGEgZGF0YVxuXHRcdC8vICAgICAgIHVwZGF0ZSBpcyByZXF1aXJlZC5cblx0XHRjb25zdCB0eCA9IHRoaXMuc3RvcmUuYmVnaW5UcmFuc2FjdGlvbigncmVhZHdyaXRlJyk7XG5cdFx0Ly8gU3RlcCAxOiBHZXQgdGhlIGZpbGUgbm9kZSdzIElELlxuXHRcdHRoaXMuX2ZpbmRJTm9kZSh0eCwgcGF0aC5kaXJuYW1lKHApLCBwYXRoLmJhc2VuYW1lKHApLCAoZTogQXBpRXJyb3IsIGZpbGVJbm9kZUlkPzogc3RyaW5nKTogdm9pZCA9PiB7XG5cdFx0XHRpZiAobm9FcnJvclR4KGUsIHR4LCBjYikpIHtcblx0XHRcdFx0Ly8gU3RlcCAyOiBHZXQgdGhlIGZpbGUgaW5vZGUuXG5cdFx0XHRcdHRoaXMuZ2V0SU5vZGUodHgsIHAsIGZpbGVJbm9kZUlkISwgKGU6IEFwaUVycm9yLCBmaWxlSW5vZGU/OiBJbm9kZSk6IHZvaWQgPT4ge1xuXHRcdFx0XHRcdGlmIChub0Vycm9yVHgoZSwgdHgsIGNiKSkge1xuXHRcdFx0XHRcdFx0Y29uc3QgaW5vZGVDaGFuZ2VkOiBib29sZWFuID0gZmlsZUlub2RlIS51cGRhdGUoc3RhdHMpO1xuXHRcdFx0XHRcdFx0Ly8gU3RlcCAzOiBTeW5jIHRoZSBkYXRhLlxuXHRcdFx0XHRcdFx0dHgucHV0KGZpbGVJbm9kZSEuaWQsIGRhdGEsIHRydWUsIChlOiBBcGlFcnJvcik6IHZvaWQgPT4ge1xuXHRcdFx0XHRcdFx0XHRpZiAobm9FcnJvclR4KGUsIHR4LCBjYikpIHtcblx0XHRcdFx0XHRcdFx0XHQvLyBTdGVwIDQ6IFN5bmMgdGhlIG1ldGFkYXRhIChpZiBpdCBjaGFuZ2VkKSFcblx0XHRcdFx0XHRcdFx0XHRpZiAoaW5vZGVDaGFuZ2VkKSB7XG5cdFx0XHRcdFx0XHRcdFx0XHR0eC5wdXQoZmlsZUlub2RlSWQhLCBmaWxlSW5vZGUhLnRvQnVmZmVyKCksIHRydWUsIChlOiBBcGlFcnJvcik6IHZvaWQgPT4ge1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRpZiAobm9FcnJvclR4KGUsIHR4LCBjYikpIHtcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHR0eC5jb21taXQoY2IpO1xuXHRcdFx0XHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRcdFx0XHR9KTtcblx0XHRcdFx0XHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdFx0XHRcdFx0Ly8gTm8gbmVlZCB0byBzeW5jIG1ldGFkYXRhOyByZXR1cm4uXG5cdFx0XHRcdFx0XHRcdFx0XHR0eC5jb21taXQoY2IpO1xuXHRcdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0fSk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9KTtcblx0XHRcdH1cblx0XHR9KTtcblx0fVxuXG5cdC8qKlxuXHQgKiBDaGVja3MgaWYgdGhlIHJvb3QgZGlyZWN0b3J5IGV4aXN0cy4gQ3JlYXRlcyBpdCBpZiBpdCBkb2Vzbid0LlxuXHQgKi9cblx0cHJpdmF0ZSBtYWtlUm9vdERpcmVjdG9yeShjYjogQkZTT25lQXJnQ2FsbGJhY2spIHtcblx0XHRjb25zdCB0eCA9IHRoaXMuc3RvcmUuYmVnaW5UcmFuc2FjdGlvbigncmVhZHdyaXRlJyk7XG5cdFx0dHguZ2V0KFJPT1RfTk9ERV9JRCwgKGU6IEFwaUVycm9yLCBkYXRhPzogQnVmZmVyKSA9PiB7XG5cdFx0XHRpZiAoZSB8fCBkYXRhID09PSB1bmRlZmluZWQpIHtcblx0XHRcdFx0Ly8gQ3JlYXRlIG5ldyBpbm9kZS5cblx0XHRcdFx0Y29uc3QgY3VyclRpbWUgPSBuZXcgRGF0ZSgpLmdldFRpbWUoKSxcblx0XHRcdFx0XHQvLyBNb2RlIDA2NjYsIG93bmVkIGJ5IHJvb3Q6cm9vdFxuXHRcdFx0XHRcdGRpcklub2RlID0gbmV3IElub2RlKEdlbmVyYXRlUmFuZG9tSUQoKSwgNDA5NiwgNTExIHwgRmlsZVR5cGUuRElSRUNUT1JZLCBjdXJyVGltZSwgY3VyclRpbWUsIGN1cnJUaW1lLCAwLCAwKTtcblx0XHRcdFx0Ly8gSWYgdGhlIHJvb3QgZG9lc24ndCBleGlzdCwgdGhlIGZpcnN0IHJhbmRvbSBJRCBzaG91bGRuJ3QgZXhpc3QsXG5cdFx0XHRcdC8vIGVpdGhlci5cblx0XHRcdFx0dHgucHV0KGRpcklub2RlLmlkLCBnZXRFbXB0eURpck5vZGUoKSwgZmFsc2UsIChlPzogQXBpRXJyb3IpID0+IHtcblx0XHRcdFx0XHRpZiAobm9FcnJvclR4KGUsIHR4LCBjYikpIHtcblx0XHRcdFx0XHRcdHR4LnB1dChST09UX05PREVfSUQsIGRpcklub2RlLnRvQnVmZmVyKCksIGZhbHNlLCAoZT86IEFwaUVycm9yKSA9PiB7XG5cdFx0XHRcdFx0XHRcdGlmIChlKSB7XG5cdFx0XHRcdFx0XHRcdFx0dHguYWJvcnQoKCkgPT4ge1xuXHRcdFx0XHRcdFx0XHRcdFx0Y2IoZSk7XG5cdFx0XHRcdFx0XHRcdFx0fSk7XG5cdFx0XHRcdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0XHRcdFx0dHguY29tbWl0KGNiKTtcblx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0fSk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9KTtcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdC8vIFdlJ3JlIGdvb2QuXG5cdFx0XHRcdHR4LmNvbW1pdChjYik7XG5cdFx0XHR9XG5cdFx0fSk7XG5cdH1cblxuXHQvKipcblx0ICogSGVscGVyIGZ1bmN0aW9uIGZvciBmaW5kSU5vZGUuXG5cdCAqIEBwYXJhbSBwYXJlbnQgVGhlIHBhcmVudCBkaXJlY3Rvcnkgb2YgdGhlIGZpbGUgd2UgYXJlIGF0dGVtcHRpbmcgdG8gZmluZC5cblx0ICogQHBhcmFtIGZpbGVuYW1lIFRoZSBmaWxlbmFtZSBvZiB0aGUgaW5vZGUgd2UgYXJlIGF0dGVtcHRpbmcgdG8gZmluZCwgbWludXNcblx0ICogICB0aGUgcGFyZW50LlxuXHQgKiBAcGFyYW0gY2IgUGFzc2VkIGFuIGVycm9yIG9yIHRoZSBJRCBvZiB0aGUgZmlsZSdzIGlub2RlIGluIHRoZSBmaWxlIHN5c3RlbS5cblx0ICovXG5cdHByaXZhdGUgX2ZpbmRJTm9kZSh0eDogQXN5bmNLZXlWYWx1ZVJPVHJhbnNhY3Rpb24sIHBhcmVudDogc3RyaW5nLCBmaWxlbmFtZTogc3RyaW5nLCBjYjogQkZTQ2FsbGJhY2s8c3RyaW5nPik6IHZvaWQge1xuXHRcdGlmICh0aGlzLl9jYWNoZSkge1xuXHRcdFx0Y29uc3QgaWQgPSB0aGlzLl9jYWNoZS5nZXQocGF0aC5qb2luKHBhcmVudCwgZmlsZW5hbWUpKTtcblx0XHRcdGlmIChpZCkge1xuXHRcdFx0XHRyZXR1cm4gY2IobnVsbCwgaWQpO1xuXHRcdFx0fVxuXHRcdH1cblx0XHRjb25zdCBoYW5kbGVEaXJlY3RvcnlMaXN0aW5ncyA9IChlPzogQXBpRXJyb3IgfCBudWxsLCBpbm9kZT86IElub2RlLCBkaXJMaXN0PzogeyBbbmFtZTogc3RyaW5nXTogc3RyaW5nIH0pOiB2b2lkID0+IHtcblx0XHRcdGlmIChlKSB7XG5cdFx0XHRcdGNiKGUpO1xuXHRcdFx0fSBlbHNlIGlmIChkaXJMaXN0IVtmaWxlbmFtZV0pIHtcblx0XHRcdFx0Y29uc3QgaWQgPSBkaXJMaXN0IVtmaWxlbmFtZV07XG5cdFx0XHRcdGlmICh0aGlzLl9jYWNoZSkge1xuXHRcdFx0XHRcdHRoaXMuX2NhY2hlLnNldChwYXRoLmpvaW4ocGFyZW50LCBmaWxlbmFtZSksIGlkKTtcblx0XHRcdFx0fVxuXHRcdFx0XHRjYihudWxsLCBpZCk7XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRjYihBcGlFcnJvci5FTk9FTlQocGF0aC5yZXNvbHZlKHBhcmVudCwgZmlsZW5hbWUpKSk7XG5cdFx0XHR9XG5cdFx0fTtcblxuXHRcdGlmIChwYXJlbnQgPT09ICcvJykge1xuXHRcdFx0aWYgKGZpbGVuYW1lID09PSAnJykge1xuXHRcdFx0XHQvLyBCQVNFIENBU0UgIzE6IFJldHVybiB0aGUgcm9vdCdzIElELlxuXHRcdFx0XHRpZiAodGhpcy5fY2FjaGUpIHtcblx0XHRcdFx0XHR0aGlzLl9jYWNoZS5zZXQocGF0aC5qb2luKHBhcmVudCwgZmlsZW5hbWUpLCBST09UX05PREVfSUQpO1xuXHRcdFx0XHR9XG5cdFx0XHRcdGNiKG51bGwsIFJPT1RfTk9ERV9JRCk7XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHQvLyBCQVNFIENBU0UgIzI6IEZpbmQgdGhlIGl0ZW0gaW4gdGhlIHJvb3Qgbm9kZS5cblx0XHRcdFx0dGhpcy5nZXRJTm9kZSh0eCwgcGFyZW50LCBST09UX05PREVfSUQsIChlOiBBcGlFcnJvciwgaW5vZGU/OiBJbm9kZSk6IHZvaWQgPT4ge1xuXHRcdFx0XHRcdGlmIChub0Vycm9yKGUsIGNiKSkge1xuXHRcdFx0XHRcdFx0dGhpcy5nZXREaXJMaXN0aW5nKHR4LCBwYXJlbnQsIGlub2RlISwgKGU6IEFwaUVycm9yLCBkaXJMaXN0PzogeyBbbmFtZTogc3RyaW5nXTogc3RyaW5nIH0pOiB2b2lkID0+IHtcblx0XHRcdFx0XHRcdFx0Ly8gaGFuZGxlX2RpcmVjdG9yeV9saXN0aW5ncyB3aWxsIGhhbmRsZSBlIGZvciB1cy5cblx0XHRcdFx0XHRcdFx0aGFuZGxlRGlyZWN0b3J5TGlzdGluZ3MoZSwgaW5vZGUsIGRpckxpc3QpO1xuXHRcdFx0XHRcdFx0fSk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9KTtcblx0XHRcdH1cblx0XHR9IGVsc2Uge1xuXHRcdFx0Ly8gR2V0IHRoZSBwYXJlbnQgZGlyZWN0b3J5J3MgSU5vZGUsIGFuZCBmaW5kIHRoZSBmaWxlIGluIGl0cyBkaXJlY3Rvcnlcblx0XHRcdC8vIGxpc3RpbmcuXG5cdFx0XHR0aGlzLmZpbmRJTm9kZUFuZERpckxpc3RpbmcodHgsIHBhcmVudCwgaGFuZGxlRGlyZWN0b3J5TGlzdGluZ3MpO1xuXHRcdH1cblx0fVxuXG5cdC8qKlxuXHQgKiBGaW5kcyB0aGUgSW5vZGUgb2YgdGhlIGdpdmVuIHBhdGguXG5cdCAqIEBwYXJhbSBwIFRoZSBwYXRoIHRvIGxvb2sgdXAuXG5cdCAqIEBwYXJhbSBjYiBQYXNzZWQgYW4gZXJyb3Igb3IgdGhlIElub2RlIG9mIHRoZSBwYXRoIHAuXG5cdCAqIEB0b2RvIG1lbW9pemUvY2FjaGVcblx0ICovXG5cdHByaXZhdGUgZmluZElOb2RlKHR4OiBBc3luY0tleVZhbHVlUk9UcmFuc2FjdGlvbiwgcDogc3RyaW5nLCBjYjogQkZTQ2FsbGJhY2s8SW5vZGU+KTogdm9pZCB7XG5cdFx0dGhpcy5fZmluZElOb2RlKHR4LCBwYXRoLmRpcm5hbWUocCksIHBhdGguYmFzZW5hbWUocCksIChlOiBBcGlFcnJvciwgaWQ/OiBzdHJpbmcpOiB2b2lkID0+IHtcblx0XHRcdGlmIChub0Vycm9yKGUsIGNiKSkge1xuXHRcdFx0XHR0aGlzLmdldElOb2RlKHR4LCBwLCBpZCEsIGNiKTtcblx0XHRcdH1cblx0XHR9KTtcblx0fVxuXG5cdC8qKlxuXHQgKiBHaXZlbiB0aGUgSUQgb2YgYSBub2RlLCByZXRyaWV2ZXMgdGhlIGNvcnJlc3BvbmRpbmcgSW5vZGUuXG5cdCAqIEBwYXJhbSB0eCBUaGUgdHJhbnNhY3Rpb24gdG8gdXNlLlxuXHQgKiBAcGFyYW0gcCBUaGUgY29ycmVzcG9uZGluZyBwYXRoIHRvIHRoZSBmaWxlICh1c2VkIGZvciBlcnJvciBtZXNzYWdlcykuXG5cdCAqIEBwYXJhbSBpZCBUaGUgSUQgdG8gbG9vayB1cC5cblx0ICogQHBhcmFtIGNiIFBhc3NlZCBhbiBlcnJvciBvciB0aGUgaW5vZGUgdW5kZXIgdGhlIGdpdmVuIGlkLlxuXHQgKi9cblx0cHJpdmF0ZSBnZXRJTm9kZSh0eDogQXN5bmNLZXlWYWx1ZVJPVHJhbnNhY3Rpb24sIHA6IHN0cmluZywgaWQ6IHN0cmluZywgY2I6IEJGU0NhbGxiYWNrPElub2RlPik6IHZvaWQge1xuXHRcdHR4LmdldChpZCwgKGU6IEFwaUVycm9yLCBkYXRhPzogQnVmZmVyKTogdm9pZCA9PiB7XG5cdFx0XHRpZiAobm9FcnJvcihlLCBjYikpIHtcblx0XHRcdFx0aWYgKGRhdGEgPT09IHVuZGVmaW5lZCkge1xuXHRcdFx0XHRcdGNiKEFwaUVycm9yLkVOT0VOVChwKSk7XG5cdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0Y2IobnVsbCwgSW5vZGUuZnJvbUJ1ZmZlcihkYXRhKSk7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9KTtcblx0fVxuXG5cdC8qKlxuXHQgKiBHaXZlbiB0aGUgSW5vZGUgb2YgYSBkaXJlY3RvcnksIHJldHJpZXZlcyB0aGUgY29ycmVzcG9uZGluZyBkaXJlY3Rvcnlcblx0ICogbGlzdGluZy5cblx0ICovXG5cdHByaXZhdGUgZ2V0RGlyTGlzdGluZyh0eDogQXN5bmNLZXlWYWx1ZVJPVHJhbnNhY3Rpb24sIHA6IHN0cmluZywgaW5vZGU6IElub2RlLCBjYjogQkZTQ2FsbGJhY2s8eyBbZmlsZU5hbWU6IHN0cmluZ106IHN0cmluZyB9Pik6IHZvaWQge1xuXHRcdGlmICghaW5vZGUuaXNEaXJlY3RvcnkoKSkge1xuXHRcdFx0Y2IoQXBpRXJyb3IuRU5PVERJUihwKSk7XG5cdFx0fSBlbHNlIHtcblx0XHRcdHR4LmdldChpbm9kZS5pZCwgKGU6IEFwaUVycm9yLCBkYXRhPzogQnVmZmVyKTogdm9pZCA9PiB7XG5cdFx0XHRcdGlmIChub0Vycm9yKGUsIGNiKSkge1xuXHRcdFx0XHRcdHRyeSB7XG5cdFx0XHRcdFx0XHRjYihudWxsLCBKU09OLnBhcnNlKGRhdGEhLnRvU3RyaW5nKCkpKTtcblx0XHRcdFx0XHR9IGNhdGNoIChlKSB7XG5cdFx0XHRcdFx0XHQvLyBPY2N1cnMgd2hlbiBkYXRhIGlzIHVuZGVmaW5lZCwgb3IgY29ycmVzcG9uZHMgdG8gc29tZXRoaW5nIG90aGVyXG5cdFx0XHRcdFx0XHQvLyB0aGFuIGEgZGlyZWN0b3J5IGxpc3RpbmcuIFRoZSBsYXR0ZXIgc2hvdWxkIG5ldmVyIG9jY3VyIHVubGVzc1xuXHRcdFx0XHRcdFx0Ly8gdGhlIGZpbGUgc3lzdGVtIGlzIGNvcnJ1cHRlZC5cblx0XHRcdFx0XHRcdGNiKEFwaUVycm9yLkVOT0VOVChwKSk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHR9KTtcblx0XHR9XG5cdH1cblxuXHQvKipcblx0ICogR2l2ZW4gYSBwYXRoIHRvIGEgZGlyZWN0b3J5LCByZXRyaWV2ZXMgdGhlIGNvcnJlc3BvbmRpbmcgSU5vZGUgYW5kXG5cdCAqIGRpcmVjdG9yeSBsaXN0aW5nLlxuXHQgKi9cblx0cHJpdmF0ZSBmaW5kSU5vZGVBbmREaXJMaXN0aW5nKHR4OiBBc3luY0tleVZhbHVlUk9UcmFuc2FjdGlvbiwgcDogc3RyaW5nLCBjYjogQkZTVGhyZWVBcmdDYWxsYmFjazxJbm9kZSwgeyBbZmlsZU5hbWU6IHN0cmluZ106IHN0cmluZyB9Pik6IHZvaWQge1xuXHRcdHRoaXMuZmluZElOb2RlKHR4LCBwLCAoZTogQXBpRXJyb3IsIGlub2RlPzogSW5vZGUpOiB2b2lkID0+IHtcblx0XHRcdGlmIChub0Vycm9yKGUsIGNiKSkge1xuXHRcdFx0XHR0aGlzLmdldERpckxpc3RpbmcodHgsIHAsIGlub2RlISwgKGUsIGxpc3Rpbmc/KSA9PiB7XG5cdFx0XHRcdFx0aWYgKG5vRXJyb3IoZSwgY2IpKSB7XG5cdFx0XHRcdFx0XHRjYihudWxsLCBpbm9kZSEsIGxpc3RpbmchKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH0pO1xuXHRcdFx0fVxuXHRcdH0pO1xuXHR9XG5cblx0LyoqXG5cdCAqIEFkZHMgYSBuZXcgbm9kZSB1bmRlciBhIHJhbmRvbSBJRC4gUmV0cmllcyA1IHRpbWVzIGJlZm9yZSBnaXZpbmcgdXAgaW5cblx0ICogdGhlIGV4Y2VlZGluZ2x5IHVubGlrZWx5IGNoYW5jZSB0aGF0IHdlIHRyeSB0byByZXVzZSBhIHJhbmRvbSBHVUlELlxuXHQgKiBAcGFyYW0gY2IgUGFzc2VkIGFuIGVycm9yIG9yIHRoZSBHVUlEIHRoYXQgdGhlIGRhdGEgd2FzIHN0b3JlZCB1bmRlci5cblx0ICovXG5cdHByaXZhdGUgYWRkTmV3Tm9kZSh0eDogQXN5bmNLZXlWYWx1ZVJXVHJhbnNhY3Rpb24sIGRhdGE6IEJ1ZmZlciwgY2I6IEJGU0NhbGxiYWNrPHN0cmluZz4pOiB2b2lkIHtcblx0XHRsZXQgcmV0cmllcyA9IDAsXG5cdFx0XHRjdXJySWQ6IHN0cmluZztcblx0XHRjb25zdCByZXJvbGwgPSAoKSA9PiB7XG5cdFx0XHRpZiAoKytyZXRyaWVzID09PSA1KSB7XG5cdFx0XHRcdC8vIE1heCByZXRyaWVzIGhpdC4gUmV0dXJuIHdpdGggYW4gZXJyb3IuXG5cdFx0XHRcdGNiKG5ldyBBcGlFcnJvcihFcnJvckNvZGUuRUlPLCAnVW5hYmxlIHRvIGNvbW1pdCBkYXRhIHRvIGtleS12YWx1ZSBzdG9yZS4nKSk7XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHQvLyBUcnkgYWdhaW4uXG5cdFx0XHRcdGN1cnJJZCA9IEdlbmVyYXRlUmFuZG9tSUQoKTtcblx0XHRcdFx0dHgucHV0KGN1cnJJZCwgZGF0YSwgZmFsc2UsIChlOiBBcGlFcnJvciwgY29tbWl0dGVkPzogYm9vbGVhbikgPT4ge1xuXHRcdFx0XHRcdGlmIChlIHx8ICFjb21taXR0ZWQpIHtcblx0XHRcdFx0XHRcdHJlcm9sbCgpO1xuXHRcdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0XHQvLyBTdWNjZXNzZnVsbHkgc3RvcmVkIHVuZGVyICdjdXJySWQnLlxuXHRcdFx0XHRcdFx0Y2IobnVsbCwgY3VycklkKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH0pO1xuXHRcdFx0fVxuXHRcdH07XG5cdFx0cmVyb2xsKCk7XG5cdH1cblxuXHQvKipcblx0ICogQ29tbWl0cyBhIG5ldyBmaWxlICh3ZWxsLCBhIEZJTEUgb3IgYSBESVJFQ1RPUlkpIHRvIHRoZSBmaWxlIHN5c3RlbSB3aXRoXG5cdCAqIHRoZSBnaXZlbiBtb2RlLlxuXHQgKiBOb3RlOiBUaGlzIHdpbGwgY29tbWl0IHRoZSB0cmFuc2FjdGlvbi5cblx0ICogQHBhcmFtIHAgVGhlIHBhdGggdG8gdGhlIG5ldyBmaWxlLlxuXHQgKiBAcGFyYW0gdHlwZSBUaGUgdHlwZSBvZiB0aGUgbmV3IGZpbGUuXG5cdCAqIEBwYXJhbSBtb2RlIFRoZSBtb2RlIHRvIGNyZWF0ZSB0aGUgbmV3IGZpbGUgd2l0aC5cblx0ICogQHBhcmFtIHVpZCBUaGUgVUlEIHRvIGNyZWF0ZSB0aGUgZmlsZSB3aXRoXG5cdCAqIEBwYXJhbSBnaWQgVGhlIEdJRCB0byBjcmVhdGUgdGhlIGZpbGUgd2l0aFxuXHQgKiBAcGFyYW0gZGF0YSBUaGUgZGF0YSB0byBzdG9yZSBhdCB0aGUgZmlsZSdzIGRhdGEgbm9kZS5cblx0ICogQHBhcmFtIGNiIFBhc3NlZCBhbiBlcnJvciBvciB0aGUgSW5vZGUgZm9yIHRoZSBuZXcgZmlsZS5cblx0ICovXG5cdHByaXZhdGUgY29tbWl0TmV3RmlsZSh0eDogQXN5bmNLZXlWYWx1ZVJXVHJhbnNhY3Rpb24sIHA6IHN0cmluZywgdHlwZTogRmlsZVR5cGUsIG1vZGU6IG51bWJlciwgY3JlZDogQ3JlZCwgZGF0YTogQnVmZmVyLCBjYjogQkZTQ2FsbGJhY2s8SW5vZGU+KTogdm9pZCB7XG5cdFx0Y29uc3QgcGFyZW50RGlyID0gcGF0aC5kaXJuYW1lKHApLFxuXHRcdFx0Zm5hbWUgPSBwYXRoLmJhc2VuYW1lKHApLFxuXHRcdFx0Y3VyclRpbWUgPSBuZXcgRGF0ZSgpLmdldFRpbWUoKTtcblxuXHRcdC8vIEludmFyaWFudDogVGhlIHJvb3QgYWx3YXlzIGV4aXN0cy5cblx0XHQvLyBJZiB3ZSBkb24ndCBjaGVjayB0aGlzIHByaW9yIHRvIHRha2luZyBzdGVwcyBiZWxvdywgd2Ugd2lsbCBjcmVhdGUgYVxuXHRcdC8vIGZpbGUgd2l0aCBuYW1lICcnIGluIHJvb3Qgc2hvdWxkIHAgPT0gJy8nLlxuXHRcdGlmIChwID09PSAnLycpIHtcblx0XHRcdHJldHVybiBjYihBcGlFcnJvci5FRVhJU1QocCkpO1xuXHRcdH1cblxuXHRcdC8vIExldCdzIGJ1aWxkIGEgcHlyYW1pZCBvZiBjb2RlIVxuXG5cdFx0Ly8gU3RlcCAxOiBHZXQgdGhlIHBhcmVudCBkaXJlY3RvcnkncyBpbm9kZSBhbmQgZGlyZWN0b3J5IGxpc3Rpbmdcblx0XHR0aGlzLmZpbmRJTm9kZUFuZERpckxpc3RpbmcodHgsIHBhcmVudERpciwgKGU/OiBBcGlFcnJvciB8IG51bGwsIHBhcmVudE5vZGU/OiBJbm9kZSwgZGlyTGlzdGluZz86IHsgW25hbWU6IHN0cmluZ106IHN0cmluZyB9KTogdm9pZCA9PiB7XG5cdFx0XHRpZiAoIXBhcmVudE5vZGUhLnRvU3RhdHMoKS5oYXNBY2Nlc3MoRmlsZVBlcm0uV1JJVEUsIGNyZWQpKSB7XG5cdFx0XHRcdGNiKEFwaUVycm9yLkVBQ0NFUyhwKSk7XG5cdFx0XHR9XG5cdFx0XHRpZiAobm9FcnJvclR4KGUsIHR4LCBjYikpIHtcblx0XHRcdFx0aWYgKGRpckxpc3RpbmchW2ZuYW1lXSkge1xuXHRcdFx0XHRcdC8vIEZpbGUgYWxyZWFkeSBleGlzdHMuXG5cdFx0XHRcdFx0dHguYWJvcnQoKCkgPT4ge1xuXHRcdFx0XHRcdFx0Y2IoQXBpRXJyb3IuRUVYSVNUKHApKTtcblx0XHRcdFx0XHR9KTtcblx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHQvLyBTdGVwIDI6IENvbW1pdCBkYXRhIHRvIHN0b3JlLlxuXHRcdFx0XHRcdHRoaXMuYWRkTmV3Tm9kZSh0eCwgZGF0YSwgKGU6IEFwaUVycm9yLCBkYXRhSWQ/OiBzdHJpbmcpOiB2b2lkID0+IHtcblx0XHRcdFx0XHRcdGlmIChub0Vycm9yVHgoZSwgdHgsIGNiKSkge1xuXHRcdFx0XHRcdFx0XHQvLyBTdGVwIDM6IENvbW1pdCB0aGUgZmlsZSdzIGlub2RlIHRvIHRoZSBzdG9yZS5cblx0XHRcdFx0XHRcdFx0Y29uc3QgZmlsZUlub2RlID0gbmV3IElub2RlKGRhdGFJZCEsIGRhdGEubGVuZ3RoLCBtb2RlIHwgdHlwZSwgY3VyclRpbWUsIGN1cnJUaW1lLCBjdXJyVGltZSwgY3JlZC5ldWlkLCBjcmVkLmVnaWQpO1xuXHRcdFx0XHRcdFx0XHR0aGlzLmFkZE5ld05vZGUodHgsIGZpbGVJbm9kZS50b0J1ZmZlcigpLCAoZTogQXBpRXJyb3IsIGZpbGVJbm9kZUlkPzogc3RyaW5nKTogdm9pZCA9PiB7XG5cdFx0XHRcdFx0XHRcdFx0aWYgKG5vRXJyb3JUeChlLCB0eCwgY2IpKSB7XG5cdFx0XHRcdFx0XHRcdFx0XHQvLyBTdGVwIDQ6IFVwZGF0ZSBwYXJlbnQgZGlyZWN0b3J5J3MgbGlzdGluZy5cblx0XHRcdFx0XHRcdFx0XHRcdGRpckxpc3RpbmchW2ZuYW1lXSA9IGZpbGVJbm9kZUlkITtcblx0XHRcdFx0XHRcdFx0XHRcdHR4LnB1dChwYXJlbnROb2RlIS5pZCwgQnVmZmVyLmZyb20oSlNPTi5zdHJpbmdpZnkoZGlyTGlzdGluZykpLCB0cnVlLCAoZTogQXBpRXJyb3IpOiB2b2lkID0+IHtcblx0XHRcdFx0XHRcdFx0XHRcdFx0aWYgKG5vRXJyb3JUeChlLCB0eCwgY2IpKSB7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0Ly8gU3RlcCA1OiBDb21taXQgYW5kIHJldHVybiB0aGUgbmV3IGlub2RlLlxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdHR4LmNvbW1pdCgoZT86IEFwaUVycm9yKTogdm9pZCA9PiB7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRpZiAobm9FcnJvclR4KGUsIHR4LCBjYikpIHtcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0Y2IobnVsbCwgZmlsZUlub2RlKTtcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdFx0XHRcdFx0XHR9KTtcblx0XHRcdFx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0XHRcdFx0fSk7XG5cdFx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0XHR9KTtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9KTtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH0pO1xuXHR9XG5cblx0LyoqXG5cdCAqIFJlbW92ZSBhbGwgdHJhY2VzIG9mIHRoZSBnaXZlbiBwYXRoIGZyb20gdGhlIGZpbGUgc3lzdGVtLlxuXHQgKiBAcGFyYW0gcCBUaGUgcGF0aCB0byByZW1vdmUgZnJvbSB0aGUgZmlsZSBzeXN0ZW0uXG5cdCAqIEBwYXJhbSBpc0RpciBEb2VzIHRoZSBwYXRoIGJlbG9uZyB0byBhIGRpcmVjdG9yeSwgb3IgYSBmaWxlP1xuXHQgKiBAdG9kbyBVcGRhdGUgbXRpbWUuXG5cdCAqL1xuXHRwcml2YXRlIHJlbW92ZUVudHJ5KHA6IHN0cmluZywgaXNEaXI6IGJvb2xlYW4sIGNyZWQ6IENyZWQsIGNiOiBCRlNPbmVBcmdDYWxsYmFjayk6IHZvaWQge1xuXHRcdC8vIEVhZ2VybHkgZGVsZXRlIGZyb20gY2FjaGUgKGhhcm1sZXNzIGV2ZW4gaWYgcmVtb3ZhbCBmYWlscylcblx0XHRpZiAodGhpcy5fY2FjaGUpIHtcblx0XHRcdHRoaXMuX2NhY2hlLnJlbW92ZShwKTtcblx0XHR9XG5cdFx0Y29uc3QgdHggPSB0aGlzLnN0b3JlLmJlZ2luVHJhbnNhY3Rpb24oJ3JlYWR3cml0ZScpLFxuXHRcdFx0cGFyZW50OiBzdHJpbmcgPSBwYXRoLmRpcm5hbWUocCksXG5cdFx0XHRmaWxlTmFtZTogc3RyaW5nID0gcGF0aC5iYXNlbmFtZShwKTtcblx0XHQvLyBTdGVwIDE6IEdldCBwYXJlbnQgZGlyZWN0b3J5J3Mgbm9kZSBhbmQgZGlyZWN0b3J5IGxpc3RpbmcuXG5cdFx0dGhpcy5maW5kSU5vZGVBbmREaXJMaXN0aW5nKHR4LCBwYXJlbnQsIChlPzogQXBpRXJyb3IgfCBudWxsLCBwYXJlbnROb2RlPzogSW5vZGUsIHBhcmVudExpc3Rpbmc/OiB7IFtuYW1lOiBzdHJpbmddOiBzdHJpbmcgfSk6IHZvaWQgPT4ge1xuXHRcdFx0aWYgKCFwYXJlbnROb2RlIS50b1N0YXRzKCkuaGFzQWNjZXNzKEZpbGVQZXJtLldSSVRFLCBjcmVkKSkge1xuXHRcdFx0XHRjYihBcGlFcnJvci5FQUNDRVMocCkpO1xuXHRcdFx0fVxuXHRcdFx0aWYgKG5vRXJyb3JUeChlLCB0eCwgY2IpKSB7XG5cdFx0XHRcdGlmICghcGFyZW50TGlzdGluZyFbZmlsZU5hbWVdKSB7XG5cdFx0XHRcdFx0dHguYWJvcnQoKCkgPT4ge1xuXHRcdFx0XHRcdFx0Y2IoQXBpRXJyb3IuRU5PRU5UKHApKTtcblx0XHRcdFx0XHR9KTtcblx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHQvLyBSZW1vdmUgZnJvbSBkaXJlY3RvcnkgbGlzdGluZyBvZiBwYXJlbnQuXG5cdFx0XHRcdFx0Y29uc3QgZmlsZU5vZGVJZCA9IHBhcmVudExpc3RpbmchW2ZpbGVOYW1lXTtcblx0XHRcdFx0XHRkZWxldGUgcGFyZW50TGlzdGluZyFbZmlsZU5hbWVdO1xuXHRcdFx0XHRcdC8vIFN0ZXAgMjogR2V0IGZpbGUgaW5vZGUuXG5cdFx0XHRcdFx0dGhpcy5nZXRJTm9kZSh0eCwgcCwgZmlsZU5vZGVJZCwgKGU6IEFwaUVycm9yLCBmaWxlTm9kZT86IElub2RlKTogdm9pZCA9PiB7XG5cdFx0XHRcdFx0XHRpZiAobm9FcnJvclR4KGUsIHR4LCBjYikpIHtcblx0XHRcdFx0XHRcdFx0aWYgKCFpc0RpciAmJiBmaWxlTm9kZSEuaXNEaXJlY3RvcnkoKSkge1xuXHRcdFx0XHRcdFx0XHRcdHR4LmFib3J0KCgpID0+IHtcblx0XHRcdFx0XHRcdFx0XHRcdGNiKEFwaUVycm9yLkVJU0RJUihwKSk7XG5cdFx0XHRcdFx0XHRcdFx0fSk7XG5cdFx0XHRcdFx0XHRcdH0gZWxzZSBpZiAoaXNEaXIgJiYgIWZpbGVOb2RlIS5pc0RpcmVjdG9yeSgpKSB7XG5cdFx0XHRcdFx0XHRcdFx0dHguYWJvcnQoKCkgPT4ge1xuXHRcdFx0XHRcdFx0XHRcdFx0Y2IoQXBpRXJyb3IuRU5PVERJUihwKSk7XG5cdFx0XHRcdFx0XHRcdFx0fSk7XG5cdFx0XHRcdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0XHRcdFx0Ly8gU3RlcCAzOiBEZWxldGUgZGF0YS5cblx0XHRcdFx0XHRcdFx0XHR0eC5kZWwoZmlsZU5vZGUhLmlkLCAoZT86IEFwaUVycm9yKTogdm9pZCA9PiB7XG5cdFx0XHRcdFx0XHRcdFx0XHRpZiAobm9FcnJvclR4KGUsIHR4LCBjYikpIHtcblx0XHRcdFx0XHRcdFx0XHRcdFx0Ly8gU3RlcCA0OiBEZWxldGUgbm9kZS5cblx0XHRcdFx0XHRcdFx0XHRcdFx0dHguZGVsKGZpbGVOb2RlSWQsIChlPzogQXBpRXJyb3IpOiB2b2lkID0+IHtcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRpZiAobm9FcnJvclR4KGUsIHR4LCBjYikpIHtcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdC8vIFN0ZXAgNTogVXBkYXRlIGRpcmVjdG9yeSBsaXN0aW5nLlxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0dHgucHV0KHBhcmVudE5vZGUhLmlkLCBCdWZmZXIuZnJvbShKU09OLnN0cmluZ2lmeShwYXJlbnRMaXN0aW5nKSksIHRydWUsIChlOiBBcGlFcnJvcik6IHZvaWQgPT4ge1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRpZiAobm9FcnJvclR4KGUsIHR4LCBjYikpIHtcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHR0eC5jb21taXQoY2IpO1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHR9KTtcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRcdFx0XHRcdH0pO1xuXHRcdFx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0XHRcdH0pO1xuXHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fSk7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9KTtcblx0fVxufVxuIiwgImltcG9ydCB7IEJGU0NhbGxiYWNrLCBGaWxlU3lzdGVtT3B0aW9ucyB9IGZyb20gJy4uL2NvcmUvZmlsZV9zeXN0ZW0nO1xuaW1wb3J0IHsgU3luY0tleVZhbHVlU3RvcmUsIFNpbXBsZVN5bmNTdG9yZSwgU2ltcGxlU3luY1JXVHJhbnNhY3Rpb24sIFN5bmNLZXlWYWx1ZVJXVHJhbnNhY3Rpb24sIFN5bmNLZXlWYWx1ZUZpbGVTeXN0ZW0gfSBmcm9tICcuLi9nZW5lcmljL2tleV92YWx1ZV9maWxlc3lzdGVtJztcbmltcG9ydCB0eXBlIHsgQnVmZmVyIH0gZnJvbSAnYnVmZmVyJztcblxuLyoqXG4gKiBBIHNpbXBsZSBpbi1tZW1vcnkga2V5LXZhbHVlIHN0b3JlIGJhY2tlZCBieSBhIEphdmFTY3JpcHQgb2JqZWN0LlxuICovXG5leHBvcnQgY2xhc3MgSW5NZW1vcnlTdG9yZSBpbXBsZW1lbnRzIFN5bmNLZXlWYWx1ZVN0b3JlLCBTaW1wbGVTeW5jU3RvcmUge1xuXHRwcml2YXRlIHN0b3JlOiBNYXA8c3RyaW5nLCBCdWZmZXI+ID0gbmV3IE1hcDxzdHJpbmcsIEJ1ZmZlcj4oKTtcblxuXHRwdWJsaWMgbmFtZSgpIHtcblx0XHRyZXR1cm4gSW5NZW1vcnlGaWxlU3lzdGVtLk5hbWU7XG5cdH1cblx0cHVibGljIGNsZWFyKCkge1xuXHRcdHRoaXMuc3RvcmUuY2xlYXIoKTtcblx0fVxuXG5cdHB1YmxpYyBiZWdpblRyYW5zYWN0aW9uKHR5cGU6IHN0cmluZyk6IFN5bmNLZXlWYWx1ZVJXVHJhbnNhY3Rpb24ge1xuXHRcdHJldHVybiBuZXcgU2ltcGxlU3luY1JXVHJhbnNhY3Rpb24odGhpcyk7XG5cdH1cblxuXHRwdWJsaWMgZ2V0KGtleTogc3RyaW5nKTogQnVmZmVyIHtcblx0XHRyZXR1cm4gdGhpcy5zdG9yZS5nZXQoa2V5KTtcblx0fVxuXG5cdHB1YmxpYyBwdXQoa2V5OiBzdHJpbmcsIGRhdGE6IEJ1ZmZlciwgb3ZlcndyaXRlOiBib29sZWFuKTogYm9vbGVhbiB7XG5cdFx0aWYgKCFvdmVyd3JpdGUgJiYgdGhpcy5zdG9yZS5oYXMoa2V5KSkge1xuXHRcdFx0cmV0dXJuIGZhbHNlO1xuXHRcdH1cblx0XHR0aGlzLnN0b3JlLnNldChrZXksIGRhdGEpO1xuXHRcdHJldHVybiB0cnVlO1xuXHR9XG5cblx0cHVibGljIGRlbChrZXk6IHN0cmluZyk6IHZvaWQge1xuXHRcdHRoaXMuc3RvcmUuZGVsZXRlKGtleSk7XG5cdH1cbn1cblxuLyoqXG4gKiBBIHNpbXBsZSBpbi1tZW1vcnkgZmlsZSBzeXN0ZW0gYmFja2VkIGJ5IGFuIEluTWVtb3J5U3RvcmUuXG4gKiBGaWxlcyBhcmUgbm90IHBlcnNpc3RlZCBhY3Jvc3MgcGFnZSBsb2Fkcy5cbiAqL1xuZXhwb3J0IGRlZmF1bHQgY2xhc3MgSW5NZW1vcnlGaWxlU3lzdGVtIGV4dGVuZHMgU3luY0tleVZhbHVlRmlsZVN5c3RlbSB7XG5cdHB1YmxpYyBzdGF0aWMgcmVhZG9ubHkgTmFtZSA9ICdJbk1lbW9yeSc7XG5cblx0cHVibGljIHN0YXRpYyByZWFkb25seSBPcHRpb25zOiBGaWxlU3lzdGVtT3B0aW9ucyA9IHt9O1xuXG5cdC8qKlxuXHQgKiBDcmVhdGVzIGFuIEluTWVtb3J5RmlsZVN5c3RlbSBpbnN0YW5jZS5cblx0ICovXG5cdHB1YmxpYyBzdGF0aWMgQ3JlYXRlKG9wdGlvbnM6IGFueSwgY2I6IEJGU0NhbGxiYWNrPEluTWVtb3J5RmlsZVN5c3RlbT4pOiB2b2lkIHtcblx0XHRjYihudWxsLCBuZXcgSW5NZW1vcnlGaWxlU3lzdGVtKCkpO1xuXHR9XG5cblx0cHVibGljIHN0YXRpYyBDcmVhdGVBc3luYyhvcHRzOiBhbnkpOiBQcm9taXNlPEluTWVtb3J5RmlsZVN5c3RlbT4ge1xuXHRcdHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG5cdFx0XHR0aGlzLkNyZWF0ZShvcHRzLCAoZXJyb3IsIGZzKSA9PiB7XG5cdFx0XHRcdGlmIChlcnJvciB8fCAhZnMpIHtcblx0XHRcdFx0XHRyZWplY3QoZXJyb3IpO1xuXHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdHJlc29sdmUoZnMpO1xuXHRcdFx0XHR9XG5cdFx0XHR9KTtcblx0XHR9KTtcblx0fVxuXG5cdHByaXZhdGUgY29uc3RydWN0b3IoKSB7XG5cdFx0c3VwZXIoeyBzdG9yZTogbmV3IEluTWVtb3J5U3RvcmUoKSB9KTtcblx0fVxufVxuIiwgImltcG9ydCB7IEJGU09uZUFyZ0NhbGxiYWNrLCBCRlNDYWxsYmFjaywgRmlsZVN5c3RlbU9wdGlvbnMgfSBmcm9tICcuLi9jb3JlL2ZpbGVfc3lzdGVtJztcbmltcG9ydCB7IEFzeW5jS2V5VmFsdWVST1RyYW5zYWN0aW9uLCBBc3luY0tleVZhbHVlUldUcmFuc2FjdGlvbiwgQXN5bmNLZXlWYWx1ZVN0b3JlLCBBc3luY0tleVZhbHVlRmlsZVN5c3RlbSB9IGZyb20gJy4uL2dlbmVyaWMva2V5X3ZhbHVlX2ZpbGVzeXN0ZW0nO1xuaW1wb3J0IHsgQXBpRXJyb3IsIEVycm9yQ29kZSB9IGZyb20gJy4uL2NvcmUvYXBpX2Vycm9yJztcbmltcG9ydCB7IGFycmF5QnVmZmVyMkJ1ZmZlciwgYnVmZmVyMkFycmF5QnVmZmVyIH0gZnJvbSAnLi4vY29yZS91dGlsJztcbmltcG9ydCB0eXBlIHsgQnVmZmVyIH0gZnJvbSAnYnVmZmVyJztcbi8qKlxuICogR2V0IHRoZSBpbmRleGVkREIgY29uc3RydWN0b3IgZm9yIHRoZSBjdXJyZW50IGJyb3dzZXIuXG4gKiBAaGlkZGVuXG4gKi9cbmNvbnN0IGluZGV4ZWREQjogSURCRmFjdG9yeSA9ICgoKSA9PiB7XG5cdHRyeSB7XG5cdFx0cmV0dXJuIGdsb2JhbFRoaXMuaW5kZXhlZERCIHx8ICg8YW55Pmdsb2JhbFRoaXMpLm1vekluZGV4ZWREQiB8fCAoPGFueT5nbG9iYWxUaGlzKS53ZWJraXRJbmRleGVkREIgfHwgZ2xvYmFsVGhpcy5tc0luZGV4ZWREQjtcblx0fSBjYXRjaCB7XG5cdFx0cmV0dXJuIG51bGw7XG5cdH1cbn0pKCk7XG5cbi8qKlxuICogQ29udmVydHMgYSBET01FeGNlcHRpb24gb3IgYSBET01FcnJvciBmcm9tIGFuIEluZGV4ZWREQiBldmVudCBpbnRvIGFcbiAqIHN0YW5kYXJkaXplZCBCcm93c2VyRlMgQVBJIGVycm9yLlxuICogQGhpZGRlblxuICovXG5mdW5jdGlvbiBjb252ZXJ0RXJyb3IoZTogeyBuYW1lOiBzdHJpbmcgfSwgbWVzc2FnZTogc3RyaW5nID0gZS50b1N0cmluZygpKTogQXBpRXJyb3Ige1xuXHRzd2l0Y2ggKGUubmFtZSkge1xuXHRcdGNhc2UgJ05vdEZvdW5kRXJyb3InOlxuXHRcdFx0cmV0dXJuIG5ldyBBcGlFcnJvcihFcnJvckNvZGUuRU5PRU5ULCBtZXNzYWdlKTtcblx0XHRjYXNlICdRdW90YUV4Y2VlZGVkRXJyb3InOlxuXHRcdFx0cmV0dXJuIG5ldyBBcGlFcnJvcihFcnJvckNvZGUuRU5PU1BDLCBtZXNzYWdlKTtcblx0XHRkZWZhdWx0OlxuXHRcdFx0Ly8gVGhlIHJlc3QgZG8gbm90IHNlZW0gdG8gbWFwIGNsZWFubHkgdG8gc3RhbmRhcmQgZXJyb3IgY29kZXMuXG5cdFx0XHRyZXR1cm4gbmV3IEFwaUVycm9yKEVycm9yQ29kZS5FSU8sIG1lc3NhZ2UpO1xuXHR9XG59XG5cbi8qKlxuICogUHJvZHVjZXMgYSBuZXcgb25lcnJvciBoYW5kbGVyIGZvciBJREIuIE91ciBlcnJvcnMgYXJlIGFsd2F5cyBmYXRhbCwgc28gd2VcbiAqIGhhbmRsZSB0aGVtIGdlbmVyaWNhbGx5OiBDYWxsIHRoZSB1c2VyLXN1cHBsaWVkIGNhbGxiYWNrIHdpdGggYSB0cmFuc2xhdGVkXG4gKiB2ZXJzaW9uIG9mIHRoZSBlcnJvciwgYW5kIGxldCB0aGUgZXJyb3IgYnViYmxlIHVwLlxuICogQGhpZGRlblxuICovXG5mdW5jdGlvbiBvbkVycm9ySGFuZGxlcihjYjogKGU6IEFwaUVycm9yKSA9PiB2b2lkLCBjb2RlOiBFcnJvckNvZGUgPSBFcnJvckNvZGUuRUlPLCBtZXNzYWdlOiBzdHJpbmcgfCBudWxsID0gbnVsbCk6IChlPzogYW55KSA9PiB2b2lkIHtcblx0cmV0dXJuIGZ1bmN0aW9uIChlPzogYW55KTogdm9pZCB7XG5cdFx0Ly8gUHJldmVudCB0aGUgZXJyb3IgZnJvbSBjYW5jZWxpbmcgdGhlIHRyYW5zYWN0aW9uLlxuXHRcdGUucHJldmVudERlZmF1bHQoKTtcblx0XHRjYihuZXcgQXBpRXJyb3IoY29kZSwgbWVzc2FnZSAhPT0gbnVsbCA/IG1lc3NhZ2UgOiB1bmRlZmluZWQpKTtcblx0fTtcbn1cblxuLyoqXG4gKiBAaGlkZGVuXG4gKi9cbmV4cG9ydCBjbGFzcyBJbmRleGVkREJST1RyYW5zYWN0aW9uIGltcGxlbWVudHMgQXN5bmNLZXlWYWx1ZVJPVHJhbnNhY3Rpb24ge1xuXHRjb25zdHJ1Y3RvcihwdWJsaWMgdHg6IElEQlRyYW5zYWN0aW9uLCBwdWJsaWMgc3RvcmU6IElEQk9iamVjdFN0b3JlKSB7fVxuXG5cdHB1YmxpYyBnZXQoa2V5OiBzdHJpbmcsIGNiOiBCRlNDYWxsYmFjazxCdWZmZXI+KTogdm9pZCB7XG5cdFx0dHJ5IHtcblx0XHRcdGNvbnN0IHI6IElEQlJlcXVlc3QgPSB0aGlzLnN0b3JlLmdldChrZXkpO1xuXHRcdFx0ci5vbmVycm9yID0gb25FcnJvckhhbmRsZXIoY2IpO1xuXHRcdFx0ci5vbnN1Y2Nlc3MgPSBldmVudCA9PiB7XG5cdFx0XHRcdC8vIElEQiByZXR1cm5zIHRoZSB2YWx1ZSAndW5kZWZpbmVkJyB3aGVuIHlvdSB0cnkgdG8gZ2V0IGtleXMgdGhhdFxuXHRcdFx0XHQvLyBkb24ndCBleGlzdC4gVGhlIGNhbGxlciBleHBlY3RzIHRoaXMgYmVoYXZpb3IuXG5cdFx0XHRcdGNvbnN0IHJlc3VsdDogYW55ID0gKDxhbnk+ZXZlbnQudGFyZ2V0KS5yZXN1bHQ7XG5cdFx0XHRcdGlmIChyZXN1bHQgPT09IHVuZGVmaW5lZCkge1xuXHRcdFx0XHRcdGNiKG51bGwsIHJlc3VsdCk7XG5cdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0Ly8gSURCIGRhdGEgaXMgc3RvcmVkIGFzIGFuIEFycmF5QnVmZmVyXG5cdFx0XHRcdFx0Y2IobnVsbCwgYXJyYXlCdWZmZXIyQnVmZmVyKHJlc3VsdCkpO1xuXHRcdFx0XHR9XG5cdFx0XHR9O1xuXHRcdH0gY2F0Y2ggKGUpIHtcblx0XHRcdGNiKGNvbnZlcnRFcnJvcihlKSk7XG5cdFx0fVxuXHR9XG59XG5cbi8qKlxuICogQGhpZGRlblxuICovXG5leHBvcnQgY2xhc3MgSW5kZXhlZERCUldUcmFuc2FjdGlvbiBleHRlbmRzIEluZGV4ZWREQlJPVHJhbnNhY3Rpb24gaW1wbGVtZW50cyBBc3luY0tleVZhbHVlUldUcmFuc2FjdGlvbiwgQXN5bmNLZXlWYWx1ZVJPVHJhbnNhY3Rpb24ge1xuXHRjb25zdHJ1Y3Rvcih0eDogSURCVHJhbnNhY3Rpb24sIHN0b3JlOiBJREJPYmplY3RTdG9yZSkge1xuXHRcdHN1cGVyKHR4LCBzdG9yZSk7XG5cdH1cblxuXHRwdWJsaWMgcHV0KGtleTogc3RyaW5nLCBkYXRhOiBCdWZmZXIsIG92ZXJ3cml0ZTogYm9vbGVhbiwgY2I6IEJGU0NhbGxiYWNrPGJvb2xlYW4+KTogdm9pZCB7XG5cdFx0dHJ5IHtcblx0XHRcdGNvbnN0IGFycmF5YnVmZmVyID0gYnVmZmVyMkFycmF5QnVmZmVyKGRhdGEpO1xuXHRcdFx0bGV0IHI6IElEQlJlcXVlc3Q7XG5cdFx0XHQvLyBOb3RlOiAnYWRkJyB3aWxsIG5ldmVyIG92ZXJ3cml0ZSBhbiBleGlzdGluZyBrZXkuXG5cdFx0XHRyID0gb3ZlcndyaXRlID8gdGhpcy5zdG9yZS5wdXQoYXJyYXlidWZmZXIsIGtleSkgOiB0aGlzLnN0b3JlLmFkZChhcnJheWJ1ZmZlciwga2V5KTtcblx0XHRcdC8vIFhYWDogTkVFRCBUTyBSRVRVUk4gRkFMU0UgV0hFTiBBREQgSEFTIEEgS0VZIENPTkZMSUNULiBOTyBFUlJPUi5cblx0XHRcdHIub25lcnJvciA9IG9uRXJyb3JIYW5kbGVyKGNiKTtcblx0XHRcdHIub25zdWNjZXNzID0gZXZlbnQgPT4ge1xuXHRcdFx0XHRjYihudWxsLCB0cnVlKTtcblx0XHRcdH07XG5cdFx0fSBjYXRjaCAoZSkge1xuXHRcdFx0Y2IoY29udmVydEVycm9yKGUpKTtcblx0XHR9XG5cdH1cblxuXHRwdWJsaWMgZGVsKGtleTogc3RyaW5nLCBjYjogQkZTT25lQXJnQ2FsbGJhY2spOiB2b2lkIHtcblx0XHR0cnkge1xuXHRcdFx0Ly8gTk9URTogSUU4IGhhcyBhIGJ1ZyB3aXRoIGlkZW50aWZpZXJzIG5hbWVkICdkZWxldGUnIHVubGVzcyB1c2VkIGFzIGEgc3RyaW5nXG5cdFx0XHQvLyBsaWtlIHRoaXMuXG5cdFx0XHQvLyBodHRwOi8vc3RhY2tvdmVyZmxvdy5jb20vYS8yNjQ3OTE1MlxuXHRcdFx0Y29uc3QgcjogSURCUmVxdWVzdCA9IHRoaXMuc3RvcmVbJ2RlbGV0ZSddKGtleSk7XG5cdFx0XHRyLm9uZXJyb3IgPSBvbkVycm9ySGFuZGxlcihjYik7XG5cdFx0XHRyLm9uc3VjY2VzcyA9IGV2ZW50ID0+IHtcblx0XHRcdFx0Y2IoKTtcblx0XHRcdH07XG5cdFx0fSBjYXRjaCAoZSkge1xuXHRcdFx0Y2IoY29udmVydEVycm9yKGUpKTtcblx0XHR9XG5cdH1cblxuXHRwdWJsaWMgY29tbWl0KGNiOiBCRlNPbmVBcmdDYWxsYmFjayk6IHZvaWQge1xuXHRcdC8vIFJldHVybiB0byB0aGUgZXZlbnQgbG9vcCB0byBjb21taXQgdGhlIHRyYW5zYWN0aW9uLlxuXHRcdHNldFRpbWVvdXQoY2IsIDApO1xuXHR9XG5cblx0cHVibGljIGFib3J0KGNiOiBCRlNPbmVBcmdDYWxsYmFjayk6IHZvaWQge1xuXHRcdGxldCBfZTogQXBpRXJyb3IgfCBudWxsID0gbnVsbDtcblx0XHR0cnkge1xuXHRcdFx0dGhpcy50eC5hYm9ydCgpO1xuXHRcdH0gY2F0Y2ggKGUpIHtcblx0XHRcdF9lID0gY29udmVydEVycm9yKGUpO1xuXHRcdH0gZmluYWxseSB7XG5cdFx0XHRjYihfZSk7XG5cdFx0fVxuXHR9XG59XG5cbmV4cG9ydCBjbGFzcyBJbmRleGVkREJTdG9yZSBpbXBsZW1lbnRzIEFzeW5jS2V5VmFsdWVTdG9yZSB7XG5cdHB1YmxpYyBzdGF0aWMgQ3JlYXRlKHN0b3JlTmFtZTogc3RyaW5nLCBjYjogQkZTQ2FsbGJhY2s8SW5kZXhlZERCU3RvcmU+KTogdm9pZCB7XG5cdFx0Y29uc3Qgb3BlblJlcTogSURCT3BlbkRCUmVxdWVzdCA9IGluZGV4ZWREQi5vcGVuKHN0b3JlTmFtZSwgMSk7XG5cblx0XHRvcGVuUmVxLm9udXBncmFkZW5lZWRlZCA9IGV2ZW50ID0+IHtcblx0XHRcdGNvbnN0IGRiOiBJREJEYXRhYmFzZSA9ICg8YW55PmV2ZW50LnRhcmdldCkucmVzdWx0O1xuXHRcdFx0Ly8gSHVoLiBUaGlzIHNob3VsZCBuZXZlciBoYXBwZW47IHdlJ3JlIGF0IHZlcnNpb24gMS4gV2h5IGRvZXMgYW5vdGhlclxuXHRcdFx0Ly8gZGF0YWJhc2UgZXhpc3Q/XG5cdFx0XHRpZiAoZGIub2JqZWN0U3RvcmVOYW1lcy5jb250YWlucyhzdG9yZU5hbWUpKSB7XG5cdFx0XHRcdGRiLmRlbGV0ZU9iamVjdFN0b3JlKHN0b3JlTmFtZSk7XG5cdFx0XHR9XG5cdFx0XHRkYi5jcmVhdGVPYmplY3RTdG9yZShzdG9yZU5hbWUpO1xuXHRcdH07XG5cblx0XHRvcGVuUmVxLm9uc3VjY2VzcyA9IGV2ZW50ID0+IHtcblx0XHRcdGNiKG51bGwsIG5ldyBJbmRleGVkREJTdG9yZSgoPGFueT5ldmVudC50YXJnZXQpLnJlc3VsdCwgc3RvcmVOYW1lKSk7XG5cdFx0fTtcblxuXHRcdG9wZW5SZXEub25lcnJvciA9IG9uRXJyb3JIYW5kbGVyKGNiLCBFcnJvckNvZGUuRUFDQ0VTKTtcblx0fVxuXG5cdGNvbnN0cnVjdG9yKHByaXZhdGUgZGI6IElEQkRhdGFiYXNlLCBwcml2YXRlIHN0b3JlTmFtZTogc3RyaW5nKSB7fVxuXG5cdHB1YmxpYyBuYW1lKCk6IHN0cmluZyB7XG5cdFx0cmV0dXJuIEluZGV4ZWREQkZpbGVTeXN0ZW0uTmFtZSArICcgLSAnICsgdGhpcy5zdG9yZU5hbWU7XG5cdH1cblxuXHRwdWJsaWMgY2xlYXIoY2I6IEJGU09uZUFyZ0NhbGxiYWNrKTogdm9pZCB7XG5cdFx0dHJ5IHtcblx0XHRcdGNvbnN0IHR4ID0gdGhpcy5kYi50cmFuc2FjdGlvbih0aGlzLnN0b3JlTmFtZSwgJ3JlYWR3cml0ZScpLFxuXHRcdFx0XHRvYmplY3RTdG9yZSA9IHR4Lm9iamVjdFN0b3JlKHRoaXMuc3RvcmVOYW1lKSxcblx0XHRcdFx0cjogSURCUmVxdWVzdCA9IG9iamVjdFN0b3JlLmNsZWFyKCk7XG5cdFx0XHRyLm9uc3VjY2VzcyA9IGV2ZW50ID0+IHtcblx0XHRcdFx0Ly8gVXNlIHNldFRpbWVvdXQgdG8gY29tbWl0IHRyYW5zYWN0aW9uLlxuXHRcdFx0XHRzZXRUaW1lb3V0KGNiLCAwKTtcblx0XHRcdH07XG5cdFx0XHRyLm9uZXJyb3IgPSBvbkVycm9ySGFuZGxlcihjYik7XG5cdFx0fSBjYXRjaCAoZSkge1xuXHRcdFx0Y2IoY29udmVydEVycm9yKGUpKTtcblx0XHR9XG5cdH1cblxuXHRwdWJsaWMgYmVnaW5UcmFuc2FjdGlvbih0eXBlOiAncmVhZG9ubHknKTogQXN5bmNLZXlWYWx1ZVJPVHJhbnNhY3Rpb247XG5cdHB1YmxpYyBiZWdpblRyYW5zYWN0aW9uKHR5cGU6ICdyZWFkd3JpdGUnKTogQXN5bmNLZXlWYWx1ZVJXVHJhbnNhY3Rpb247XG5cdHB1YmxpYyBiZWdpblRyYW5zYWN0aW9uKHR5cGU6ICdyZWFkb25seScgfCAncmVhZHdyaXRlJyA9ICdyZWFkb25seScpOiBBc3luY0tleVZhbHVlUk9UcmFuc2FjdGlvbiB7XG5cdFx0Y29uc3QgdHggPSB0aGlzLmRiLnRyYW5zYWN0aW9uKHRoaXMuc3RvcmVOYW1lLCB0eXBlKSxcblx0XHRcdG9iamVjdFN0b3JlID0gdHgub2JqZWN0U3RvcmUodGhpcy5zdG9yZU5hbWUpO1xuXHRcdGlmICh0eXBlID09PSAncmVhZHdyaXRlJykge1xuXHRcdFx0cmV0dXJuIG5ldyBJbmRleGVkREJSV1RyYW5zYWN0aW9uKHR4LCBvYmplY3RTdG9yZSk7XG5cdFx0fSBlbHNlIGlmICh0eXBlID09PSAncmVhZG9ubHknKSB7XG5cdFx0XHRyZXR1cm4gbmV3IEluZGV4ZWREQlJPVHJhbnNhY3Rpb24odHgsIG9iamVjdFN0b3JlKTtcblx0XHR9IGVsc2Uge1xuXHRcdFx0dGhyb3cgbmV3IEFwaUVycm9yKEVycm9yQ29kZS5FSU5WQUwsICdJbnZhbGlkIHRyYW5zYWN0aW9uIHR5cGUuJyk7XG5cdFx0fVxuXHR9XG59XG5cbi8qKlxuICogQ29uZmlndXJhdGlvbiBvcHRpb25zIGZvciB0aGUgSW5kZXhlZERCIGZpbGUgc3lzdGVtLlxuICovXG5leHBvcnQgaW50ZXJmYWNlIEluZGV4ZWREQkZpbGVTeXN0ZW1PcHRpb25zIHtcblx0Ly8gVGhlIG5hbWUgb2YgdGhpcyBmaWxlIHN5c3RlbS4gWW91IGNhbiBoYXZlIG11bHRpcGxlIEluZGV4ZWREQiBmaWxlIHN5c3RlbXMgb3BlcmF0aW5nXG5cdC8vIGF0IG9uY2UsIGJ1dCBlYWNoIG11c3QgaGF2ZSBhIGRpZmZlcmVudCBuYW1lLlxuXHRzdG9yZU5hbWU/OiBzdHJpbmc7XG5cdC8vIFRoZSBzaXplIG9mIHRoZSBpbm9kZSBjYWNoZS4gRGVmYXVsdHMgdG8gMTAwLiBBIHNpemUgb2YgMCBvciBiZWxvdyBkaXNhYmxlcyBjYWNoaW5nLlxuXHRjYWNoZVNpemU/OiBudW1iZXI7XG59XG5cbi8qKlxuICogQSBmaWxlIHN5c3RlbSB0aGF0IHVzZXMgdGhlIEluZGV4ZWREQiBrZXkgdmFsdWUgZmlsZSBzeXN0ZW0uXG4gKi9cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEluZGV4ZWREQkZpbGVTeXN0ZW0gZXh0ZW5kcyBBc3luY0tleVZhbHVlRmlsZVN5c3RlbSB7XG5cdHB1YmxpYyBzdGF0aWMgcmVhZG9ubHkgTmFtZSA9ICdJbmRleGVkREInO1xuXG5cdHB1YmxpYyBzdGF0aWMgcmVhZG9ubHkgT3B0aW9uczogRmlsZVN5c3RlbU9wdGlvbnMgPSB7XG5cdFx0c3RvcmVOYW1lOiB7XG5cdFx0XHR0eXBlOiAnc3RyaW5nJyxcblx0XHRcdG9wdGlvbmFsOiB0cnVlLFxuXHRcdFx0ZGVzY3JpcHRpb246ICdUaGUgbmFtZSBvZiB0aGlzIGZpbGUgc3lzdGVtLiBZb3UgY2FuIGhhdmUgbXVsdGlwbGUgSW5kZXhlZERCIGZpbGUgc3lzdGVtcyBvcGVyYXRpbmcgYXQgb25jZSwgYnV0IGVhY2ggbXVzdCBoYXZlIGEgZGlmZmVyZW50IG5hbWUuJyxcblx0XHR9LFxuXHRcdGNhY2hlU2l6ZToge1xuXHRcdFx0dHlwZTogJ251bWJlcicsXG5cdFx0XHRvcHRpb25hbDogdHJ1ZSxcblx0XHRcdGRlc2NyaXB0aW9uOiAnVGhlIHNpemUgb2YgdGhlIGlub2RlIGNhY2hlLiBEZWZhdWx0cyB0byAxMDAuIEEgc2l6ZSBvZiAwIG9yIGJlbG93IGRpc2FibGVzIGNhY2hpbmcuJyxcblx0XHR9LFxuXHR9O1xuXG5cdC8qKlxuXHQgKiBDb25zdHJ1Y3RzIGFuIEluZGV4ZWREQiBmaWxlIHN5c3RlbSB3aXRoIHRoZSBnaXZlbiBvcHRpb25zLlxuXHQgKi9cblx0cHVibGljIHN0YXRpYyBDcmVhdGUob3B0aW9uczogSW5kZXhlZERCRmlsZVN5c3RlbU9wdGlvbnMsIGNiOiBCRlNDYWxsYmFjazxJbmRleGVkREJGaWxlU3lzdGVtPik6IHZvaWQge1xuXHRcdGlmICghb3B0aW9ucykge1xuXHRcdFx0b3B0aW9ucyA9IHtcblx0XHRcdFx0c3RvcmVOYW1lOiAnYnJvd3NlcmZzJyxcblx0XHRcdFx0Y2FjaGVTaXplOiAxMDAsXG5cdFx0XHR9O1xuXHRcdH1cblx0XHRJbmRleGVkREJTdG9yZS5DcmVhdGUob3B0aW9ucy5zdG9yZU5hbWUgfHwgJ2Jyb3dzZXJmcycsIChlLCBzdG9yZT8pID0+IHtcblx0XHRcdGlmIChzdG9yZSkge1xuXHRcdFx0XHRjb25zdCBpZGJmcyA9IG5ldyBJbmRleGVkREJGaWxlU3lzdGVtKG9wdGlvbnMuY2FjaGVTaXplIHx8IDEwMCk7XG5cdFx0XHRcdGlkYmZzLmluaXQoc3RvcmUsIGUgPT4ge1xuXHRcdFx0XHRcdGlmIChlKSB7XG5cdFx0XHRcdFx0XHRjYihlKTtcblx0XHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdFx0Y2IobnVsbCwgaWRiZnMpO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fSk7XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRjYihlKTtcblx0XHRcdH1cblx0XHR9KTtcblx0fVxuXG5cdHB1YmxpYyBzdGF0aWMgQ3JlYXRlQXN5bmMob3B0czogSW5kZXhlZERCRmlsZVN5c3RlbU9wdGlvbnMpOiBQcm9taXNlPEluZGV4ZWREQkZpbGVTeXN0ZW0+IHtcblx0XHRyZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuXHRcdFx0dGhpcy5DcmVhdGUob3B0cywgKGVycm9yLCBmcykgPT4ge1xuXHRcdFx0XHRpZiAoZXJyb3IgfHwgIWZzKSB7XG5cdFx0XHRcdFx0cmVqZWN0KGVycm9yKTtcblx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRyZXNvbHZlKGZzKTtcblx0XHRcdFx0fVxuXHRcdFx0fSk7XG5cdFx0fSk7XG5cdH1cblxuXHRwdWJsaWMgc3RhdGljIGlzQXZhaWxhYmxlKCk6IGJvb2xlYW4ge1xuXHRcdC8vIEluIFNhZmFyaSdzIHByaXZhdGUgYnJvd3NpbmcgbW9kZSwgaW5kZXhlZERCLm9wZW4gcmV0dXJucyBOVUxMLlxuXHRcdC8vIEluIEZpcmVmb3gsIGl0IHRocm93cyBhbiBleGNlcHRpb24uXG5cdFx0Ly8gSW4gQ2hyb21lLCBpdCBcImp1c3Qgd29ya3NcIiwgYW5kIGNsZWFycyB0aGUgZGF0YWJhc2Ugd2hlbiB5b3UgbGVhdmUgdGhlIHBhZ2UuXG5cdFx0Ly8gVW50ZXN0ZWQ6IE9wZXJhLCBJRS5cblx0XHR0cnkge1xuXHRcdFx0cmV0dXJuIHR5cGVvZiBpbmRleGVkREIgIT09ICd1bmRlZmluZWQnICYmIG51bGwgIT09IGluZGV4ZWREQi5vcGVuKCdfX2Jyb3dzZXJmc190ZXN0X18nKTtcblx0XHR9IGNhdGNoIChlKSB7XG5cdFx0XHRyZXR1cm4gZmFsc2U7XG5cdFx0fVxuXHR9XG5cdHByaXZhdGUgY29uc3RydWN0b3IoY2FjaGVTaXplOiBudW1iZXIpIHtcblx0XHRzdXBlcihjYWNoZVNpemUpO1xuXHR9XG59XG4iLCAiaW1wb3J0IHsgQkZTQ2FsbGJhY2ssIEZpbGVTeXN0ZW1PcHRpb25zIH0gZnJvbSAnLi4vY29yZS9maWxlX3N5c3RlbSc7XG5pbXBvcnQgeyBTeW5jS2V5VmFsdWVTdG9yZSwgU2ltcGxlU3luY1N0b3JlLCBTeW5jS2V5VmFsdWVGaWxlU3lzdGVtLCBTaW1wbGVTeW5jUldUcmFuc2FjdGlvbiwgU3luY0tleVZhbHVlUldUcmFuc2FjdGlvbiB9IGZyb20gJy4uL2dlbmVyaWMva2V5X3ZhbHVlX2ZpbGVzeXN0ZW0nO1xuaW1wb3J0IHsgQXBpRXJyb3IsIEVycm9yQ29kZSB9IGZyb20gJy4uL2NvcmUvYXBpX2Vycm9yJztcbmltcG9ydCB7IEJ1ZmZlciB9IGZyb20gJ2J1ZmZlcic7XG5cbi8qKlxuICogU29tZSB2ZXJzaW9ucyBvZiBGRiBhbmQgYWxsIHZlcnNpb25zIG9mIElFIGRvIG5vdCBzdXBwb3J0IHRoZSBmdWxsIHJhbmdlIG9mXG4gKiAxNi1iaXQgbnVtYmVycyBlbmNvZGVkIGFzIGNoYXJhY3RlcnMsIGFzIHRoZXkgZW5mb3JjZSBVVEYtMTYgcmVzdHJpY3Rpb25zLlxuICogQHVybCBodHRwOi8vc3RhY2tvdmVyZmxvdy5jb20vcXVlc3Rpb25zLzExMTcwNzE2L2FyZS10aGVyZS1hbnktY2hhcmFjdGVycy10aGF0LWFyZS1ub3QtYWxsb3dlZC1pbi1sb2NhbHN0b3JhZ2UvMTExNzM2NzMjMTExNzM2NzNcbiAqIEBoaWRkZW5cbiAqL1xubGV0IHN1cHBvcnRzQmluYXJ5U3RyaW5nOiBib29sZWFuID0gZmFsc2UsXG5cdGJpbmFyeUVuY29kaW5nOiBCdWZmZXJFbmNvZGluZztcbnRyeSB7XG5cdGdsb2JhbFRoaXMubG9jYWxTdG9yYWdlLnNldEl0ZW0oJ19fdGVzdF9fJywgU3RyaW5nLmZyb21DaGFyQ29kZSgweGQ4MDApKTtcblx0c3VwcG9ydHNCaW5hcnlTdHJpbmcgPSBnbG9iYWxUaGlzLmxvY2FsU3RvcmFnZS5nZXRJdGVtKCdfX3Rlc3RfXycpID09PSBTdHJpbmcuZnJvbUNoYXJDb2RlKDB4ZDgwMCk7XG59IGNhdGNoIChlKSB7XG5cdC8vIElFIHRocm93cyBhbiBleGNlcHRpb24uXG5cdHN1cHBvcnRzQmluYXJ5U3RyaW5nID0gZmFsc2U7XG59XG5iaW5hcnlFbmNvZGluZyA9IChzdXBwb3J0c0JpbmFyeVN0cmluZyA/ICdiaW5hcnlfc3RyaW5nJyA6ICdiaW5hcnlfc3RyaW5nX2llJykgYXMgQnVmZmVyRW5jb2Rpbmc7XG5pZiAoIUJ1ZmZlci5pc0VuY29kaW5nKGJpbmFyeUVuY29kaW5nKSkge1xuXHQvLyBGYWxsYmFjayBmb3Igbm9uIEJyb3dzZXJGUyBpbXBsZW1lbnRhdGlvbnMgb2YgYnVmZmVyIHRoYXQgbGFjayBhXG5cdC8vIGJpbmFyeV9zdHJpbmcgZm9ybWF0LlxuXHRiaW5hcnlFbmNvZGluZyA9ICdiYXNlNjQnO1xufVxuXG4vKipcbiAqIEEgc3luY2hyb25vdXMga2V5LXZhbHVlIHN0b3JlIGJhY2tlZCBieSBsb2NhbFN0b3JhZ2UuXG4gKi9cbmV4cG9ydCBjbGFzcyBMb2NhbFN0b3JhZ2VTdG9yZSBpbXBsZW1lbnRzIFN5bmNLZXlWYWx1ZVN0b3JlLCBTaW1wbGVTeW5jU3RvcmUge1xuXHRwdWJsaWMgbmFtZSgpOiBzdHJpbmcge1xuXHRcdHJldHVybiBMb2NhbFN0b3JhZ2VGaWxlU3lzdGVtLk5hbWU7XG5cdH1cblxuXHRwdWJsaWMgY2xlYXIoKTogdm9pZCB7XG5cdFx0Z2xvYmFsVGhpcy5sb2NhbFN0b3JhZ2UuY2xlYXIoKTtcblx0fVxuXG5cdHB1YmxpYyBiZWdpblRyYW5zYWN0aW9uKHR5cGU6IHN0cmluZyk6IFN5bmNLZXlWYWx1ZVJXVHJhbnNhY3Rpb24ge1xuXHRcdC8vIE5vIG5lZWQgdG8gZGlmZmVyZW50aWF0ZS5cblx0XHRyZXR1cm4gbmV3IFNpbXBsZVN5bmNSV1RyYW5zYWN0aW9uKHRoaXMpO1xuXHR9XG5cblx0cHVibGljIGdldChrZXk6IHN0cmluZyk6IEJ1ZmZlciB8IHVuZGVmaW5lZCB7XG5cdFx0dHJ5IHtcblx0XHRcdGNvbnN0IGRhdGEgPSBnbG9iYWxUaGlzLmxvY2FsU3RvcmFnZS5nZXRJdGVtKGtleSk7XG5cdFx0XHRpZiAoZGF0YSAhPT0gbnVsbCkge1xuXHRcdFx0XHRyZXR1cm4gQnVmZmVyLmZyb20oZGF0YSwgYmluYXJ5RW5jb2RpbmcpO1xuXHRcdFx0fVxuXHRcdH0gY2F0Y2ggKGUpIHtcblx0XHRcdC8vIERvIG5vdGhpbmcuXG5cdFx0fVxuXHRcdC8vIEtleSBkb2Vzbid0IGV4aXN0LCBvciBhIGZhaWx1cmUgb2NjdXJyZWQuXG5cdFx0cmV0dXJuIHVuZGVmaW5lZDtcblx0fVxuXG5cdHB1YmxpYyBwdXQoa2V5OiBzdHJpbmcsIGRhdGE6IEJ1ZmZlciwgb3ZlcndyaXRlOiBib29sZWFuKTogYm9vbGVhbiB7XG5cdFx0dHJ5IHtcblx0XHRcdGlmICghb3ZlcndyaXRlICYmIGdsb2JhbFRoaXMubG9jYWxTdG9yYWdlLmdldEl0ZW0oa2V5KSAhPT0gbnVsbCkge1xuXHRcdFx0XHQvLyBEb24ndCB3YW50IHRvIG92ZXJ3cml0ZSB0aGUga2V5IVxuXHRcdFx0XHRyZXR1cm4gZmFsc2U7XG5cdFx0XHR9XG5cdFx0XHRnbG9iYWxUaGlzLmxvY2FsU3RvcmFnZS5zZXRJdGVtKGtleSwgZGF0YS50b1N0cmluZyhiaW5hcnlFbmNvZGluZykpO1xuXHRcdFx0cmV0dXJuIHRydWU7XG5cdFx0fSBjYXRjaCAoZSkge1xuXHRcdFx0dGhyb3cgbmV3IEFwaUVycm9yKEVycm9yQ29kZS5FTk9TUEMsICdMb2NhbFN0b3JhZ2UgaXMgZnVsbC4nKTtcblx0XHR9XG5cdH1cblxuXHRwdWJsaWMgZGVsKGtleTogc3RyaW5nKTogdm9pZCB7XG5cdFx0dHJ5IHtcblx0XHRcdGdsb2JhbFRoaXMubG9jYWxTdG9yYWdlLnJlbW92ZUl0ZW0oa2V5KTtcblx0XHR9IGNhdGNoIChlKSB7XG5cdFx0XHR0aHJvdyBuZXcgQXBpRXJyb3IoRXJyb3JDb2RlLkVJTywgJ1VuYWJsZSB0byBkZWxldGUga2V5ICcgKyBrZXkgKyAnOiAnICsgZSk7XG5cdFx0fVxuXHR9XG59XG5cbi8qKlxuICogQSBzeW5jaHJvbm91cyBmaWxlIHN5c3RlbSBiYWNrZWQgYnkgbG9jYWxTdG9yYWdlLiBDb25uZWN0cyBvdXJcbiAqIExvY2FsU3RvcmFnZVN0b3JlIHRvIG91ciBTeW5jS2V5VmFsdWVGaWxlU3lzdGVtLlxuICovXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBMb2NhbFN0b3JhZ2VGaWxlU3lzdGVtIGV4dGVuZHMgU3luY0tleVZhbHVlRmlsZVN5c3RlbSB7XG5cdHB1YmxpYyBzdGF0aWMgcmVhZG9ubHkgTmFtZSA9ICdMb2NhbFN0b3JhZ2UnO1xuXG5cdHB1YmxpYyBzdGF0aWMgcmVhZG9ubHkgT3B0aW9uczogRmlsZVN5c3RlbU9wdGlvbnMgPSB7fTtcblxuXHQvKipcblx0ICogQ3JlYXRlcyBhIExvY2FsU3RvcmFnZUZpbGVTeXN0ZW0gaW5zdGFuY2UuXG5cdCAqL1xuXHRwdWJsaWMgc3RhdGljIENyZWF0ZShvcHRpb25zOiBhbnksIGNiOiBCRlNDYWxsYmFjazxMb2NhbFN0b3JhZ2VGaWxlU3lzdGVtPik6IHZvaWQge1xuXHRcdGNiKG51bGwsIG5ldyBMb2NhbFN0b3JhZ2VGaWxlU3lzdGVtKCkpO1xuXHR9XG5cblx0cHVibGljIHN0YXRpYyBDcmVhdGVBc3luYyhvcHRzOiBhbnkpOiBQcm9taXNlPExvY2FsU3RvcmFnZUZpbGVTeXN0ZW0+IHtcblx0XHRyZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuXHRcdFx0dGhpcy5DcmVhdGUob3B0cywgKGVycm9yLCBmcykgPT4ge1xuXHRcdFx0XHRpZiAoZXJyb3IgfHwgIWZzKSB7XG5cdFx0XHRcdFx0cmVqZWN0KGVycm9yKTtcblx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRyZXNvbHZlKGZzKTtcblx0XHRcdFx0fVxuXHRcdFx0fSk7XG5cdFx0fSk7XG5cdH1cblxuXHRwdWJsaWMgc3RhdGljIGlzQXZhaWxhYmxlKCk6IGJvb2xlYW4ge1xuXHRcdHJldHVybiB0eXBlb2YgZ2xvYmFsVGhpcy5sb2NhbFN0b3JhZ2UgIT09ICd1bmRlZmluZWQnO1xuXHR9XG5cdC8qKlxuXHQgKiBDcmVhdGVzIGEgbmV3IExvY2FsU3RvcmFnZSBmaWxlIHN5c3RlbSB1c2luZyB0aGUgY29udGVudHMgb2YgYGxvY2FsU3RvcmFnZWAuXG5cdCAqL1xuXHRwcml2YXRlIGNvbnN0cnVjdG9yKCkge1xuXHRcdHN1cGVyKHsgc3RvcmU6IG5ldyBMb2NhbFN0b3JhZ2VTdG9yZSgpIH0pO1xuXHR9XG59XG4iLCAiaW1wb3J0IHsgRmlsZVN5c3RlbSwgQmFzZUZpbGVTeXN0ZW0sIEJGU09uZUFyZ0NhbGxiYWNrLCBCRlNDYWxsYmFjaywgRmlsZVN5c3RlbU9wdGlvbnMgfSBmcm9tICcuLi9jb3JlL2ZpbGVfc3lzdGVtJztcbmltcG9ydCBJbk1lbW9yeUZpbGVTeXN0ZW0gZnJvbSAnLi9Jbk1lbW9yeSc7XG5pbXBvcnQgeyBBcGlFcnJvciwgRXJyb3JDb2RlIH0gZnJvbSAnLi4vY29yZS9hcGlfZXJyb3InO1xuaW1wb3J0IGZzIGZyb20gJy4uL2NvcmUvbm9kZV9mcyc7XG5pbXBvcnQgKiBhcyBwYXRoIGZyb20gJ3BhdGgnO1xuaW1wb3J0IHsgbWtkaXJwU3luYyB9IGZyb20gJy4uL2NvcmUvdXRpbCc7XG5pbXBvcnQgQ3JlZCBmcm9tICcuLi9jb3JlL2NyZWQnO1xuLyoqXG4gKiBDb25maWd1cmF0aW9uIG9wdGlvbnMgZm9yIHRoZSBNb3VudGFibGVGaWxlU3lzdGVtIGJhY2tlbmQuXG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgTW91bnRhYmxlRmlsZVN5c3RlbU9wdGlvbnMge1xuXHQvLyBMb2NhdGlvbnMgb2YgbW91bnQgcG9pbnRzLiBDYW4gYmUgZW1wdHkuXG5cdFttb3VudFBvaW50OiBzdHJpbmddOiBGaWxlU3lzdGVtO1xufVxuXG4vKipcbiAqIFRoZSBNb3VudGFibGVGaWxlU3lzdGVtIGFsbG93cyB5b3UgdG8gbW91bnQgbXVsdGlwbGUgYmFja2VuZCB0eXBlcyBvclxuICogbXVsdGlwbGUgaW5zdGFudGlhdGlvbnMgb2YgdGhlIHNhbWUgYmFja2VuZCBpbnRvIGEgc2luZ2xlIGZpbGUgc3lzdGVtIHRyZWUuXG4gKiBUaGUgZmlsZSBzeXN0ZW1zIGRvIG5vdCBuZWVkIHRvIGtub3cgYWJvdXQgZWFjaCBvdGhlcjsgYWxsIGludGVyYWN0aW9ucyBhcmVcbiAqIGF1dG9tYXRpY2FsbHkgZmFjaWxpdGF0ZWQgdGhyb3VnaCB0aGlzIGludGVyZmFjZS5cbiAqXG4gKiBGb3IgZXhhbXBsZSwgaWYgYSBmaWxlIHN5c3RlbSBpcyBtb3VudGVkIGF0IC9tbnQvYmxhaCwgYW5kIGEgcmVxdWVzdCBjYW1lIGluXG4gKiBmb3IgL21udC9ibGFoL2Zvby50eHQsIHRoZSBmaWxlIHN5c3RlbSB3b3VsZCBzZWUgYSByZXF1ZXN0IGZvciAvZm9vLnR4dC5cbiAqXG4gKiBZb3UgY2FuIG1vdW50IGZpbGUgc3lzdGVtcyB3aGVuIHlvdSBjb25maWd1cmUgdGhlIGZpbGUgc3lzdGVtOlxuICogYGBgamF2YXNjcmlwdFxuICogQnJvd3NlckZTLmNvbmZpZ3VyZSh7XG4gKiAgIGZzOiBcIk1vdW50YWJsZUZpbGVTeXN0ZW1cIixcbiAqICAgb3B0aW9uczoge1xuICogICAgICcvZGF0YSc6IHsgZnM6ICdIVFRQUmVxdWVzdCcsIG9wdGlvbnM6IHsgaW5kZXg6IFwiaHR0cDovL215c2l0ZS5jb20vZmlsZXMvaW5kZXguanNvblwiIH0gfSxcbiAqICAgICAnL2hvbWUnOiB7IGZzOiAnTG9jYWxTdG9yYWdlJyB9XG4gKiAgIH1cbiAqIH0sIGZ1bmN0aW9uKGUpIHtcbiAqXG4gKiB9KTtcbiAqIGBgYFxuICpcbiAqIEZvciBhZHZhbmNlZCB1c2VycywgeW91IGNhbiBhbHNvIG1vdW50IGZpbGUgc3lzdGVtcyAqYWZ0ZXIqIE1GUyBpcyBjb25zdHJ1Y3RlZDpcbiAqIGBgYGphdmFzY3JpcHRcbiAqIEJyb3dzZXJGUy5GaWxlU3lzdGVtLkhUVFBSZXF1ZXN0LkNyZWF0ZSh7XG4gKiAgIGluZGV4OiBcImh0dHA6Ly9teXNpdGUuY29tL2ZpbGVzL2luZGV4Lmpzb25cIlxuICogfSwgZnVuY3Rpb24oZSwgeGhyZnMpIHtcbiAqICAgQnJvd3NlckZTLkZpbGVTeXN0ZW0uTW91bnRhYmxlRmlsZVN5c3RlbS5DcmVhdGUoe1xuICogICAgICcvZGF0YSc6IHhocmZzXG4gKiAgIH0sIGZ1bmN0aW9uKGUsIG1mcykge1xuICogICAgIEJyb3dzZXJGUy5pbml0aWFsaXplKG1mcyk7XG4gKlxuICogICAgIC8vIEFkZGVkIGFmdGVyLXRoZS1mYWN0Li4uXG4gKiAgICAgQnJvd3NlckZTLkZpbGVTeXN0ZW0uTG9jYWxTdG9yYWdlLkNyZWF0ZShmdW5jdGlvbihlLCBsc2ZzKSB7XG4gKiAgICAgICBtZnMubW91bnQoJy9ob21lJywgbHNmcyk7XG4gKiAgICAgfSk7XG4gKiAgIH0pO1xuICogfSk7XG4gKiBgYGBcbiAqXG4gKiBTaW5jZSBNb3VudGFibGVGaWxlU3lzdGVtIHNpbXBseSBwcm94aWVzIHJlcXVlc3RzIHRvIG1vdW50ZWQgZmlsZSBzeXN0ZW1zLCBpdCBzdXBwb3J0cyBhbGwgb2YgdGhlIG9wZXJhdGlvbnMgdGhhdCB0aGUgbW91bnRlZCBmaWxlIHN5c3RlbXMgc3VwcG9ydC5cbiAqXG4gKiBXaXRoIG5vIG1vdW50ZWQgZmlsZSBzeXN0ZW1zLCBgTW91bnRhYmxlRmlsZVN5c3RlbWAgYWN0cyBhcyBhIHNpbXBsZSBgSW5NZW1vcnlgIGZpbGVzeXN0ZW0uXG4gKi9cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIE1vdW50YWJsZUZpbGVTeXN0ZW0gZXh0ZW5kcyBCYXNlRmlsZVN5c3RlbSBpbXBsZW1lbnRzIEZpbGVTeXN0ZW0ge1xuXHRwdWJsaWMgc3RhdGljIHJlYWRvbmx5IE5hbWUgPSAnTW91bnRhYmxlRmlsZVN5c3RlbSc7XG5cblx0cHVibGljIHN0YXRpYyByZWFkb25seSBPcHRpb25zOiBGaWxlU3lzdGVtT3B0aW9ucyA9IHt9O1xuXG5cdC8qKlxuXHQgKiBDcmVhdGVzIGEgTW91bnRhYmxlRmlsZVN5c3RlbSBpbnN0YW5jZSB3aXRoIHRoZSBnaXZlbiBvcHRpb25zLlxuXHQgKi9cblx0cHVibGljIHN0YXRpYyBDcmVhdGUob3B0czogTW91bnRhYmxlRmlsZVN5c3RlbU9wdGlvbnMsIGNiOiBCRlNDYWxsYmFjazxNb3VudGFibGVGaWxlU3lzdGVtPik6IHZvaWQge1xuXHRcdEluTWVtb3J5RmlsZVN5c3RlbS5DcmVhdGUoe30sIChlLCBpbWZzPykgPT4ge1xuXHRcdFx0aWYgKGltZnMpIHtcblx0XHRcdFx0Y29uc3QgZnMgPSBuZXcgTW91bnRhYmxlRmlsZVN5c3RlbShpbWZzKTtcblx0XHRcdFx0dHJ5IHtcblx0XHRcdFx0XHRmb3IgKGNvbnN0IG1vdW50UG9pbnQgb2YgT2JqZWN0LmtleXMob3B0cykpIHtcblx0XHRcdFx0XHRcdGZzLm1vdW50KG1vdW50UG9pbnQsIG9wdHNbbW91bnRQb2ludF0sIENyZWQuUm9vdCk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9IGNhdGNoIChlKSB7XG5cdFx0XHRcdFx0cmV0dXJuIGNiKGUpO1xuXHRcdFx0XHR9XG5cdFx0XHRcdGNiKG51bGwsIGZzKTtcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdGNiKGUpO1xuXHRcdFx0fVxuXHRcdH0pO1xuXHR9XG5cblx0cHVibGljIHN0YXRpYyBDcmVhdGVBc3luYyhvcHRzOiBNb3VudGFibGVGaWxlU3lzdGVtT3B0aW9ucyk6IFByb21pc2U8TW91bnRhYmxlRmlsZVN5c3RlbT4ge1xuXHRcdHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG5cdFx0XHR0aGlzLkNyZWF0ZShvcHRzLCAoZXJyb3IsIGZzKSA9PiB7XG5cdFx0XHRcdGlmIChlcnJvciB8fCAhZnMpIHtcblx0XHRcdFx0XHRyZWplY3QoZXJyb3IpO1xuXHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdHJlc29sdmUoZnMpO1xuXHRcdFx0XHR9XG5cdFx0XHR9KTtcblx0XHR9KTtcblx0fVxuXG5cdHB1YmxpYyBzdGF0aWMgaXNBdmFpbGFibGUoKTogYm9vbGVhbiB7XG5cdFx0cmV0dXJuIHRydWU7XG5cdH1cblxuXHRwcml2YXRlIG1udE1hcDogeyBbcGF0aDogc3RyaW5nXTogRmlsZVN5c3RlbSB9O1xuXHQvLyBDb250YWlucyB0aGUgbGlzdCBvZiBtb3VudCBwb2ludHMgaW4gbW50TWFwLCBzb3J0ZWQgYnkgc3RyaW5nIGxlbmd0aCBpbiBkZWNyZWFzaW5nIG9yZGVyLlxuXHQvLyBFbnN1cmVzIHRoYXQgd2Ugc2NhbiB0aGUgbW9zdCBzcGVjaWZpYyBtb3VudCBwb2ludHMgZm9yIGEgbWF0Y2ggZmlyc3QsIHdoaWNoIGxldHMgdXNcblx0Ly8gbmVzdCBtb3VudCBwb2ludHMuXG5cdHByaXZhdGUgbW91bnRMaXN0OiBzdHJpbmdbXSA9IFtdO1xuXHRwcml2YXRlIHJvb3RGczogRmlsZVN5c3RlbTtcblxuXHQvKipcblx0ICogQ3JlYXRlcyBhIG5ldywgZW1wdHkgTW91bnRhYmxlRmlsZVN5c3RlbS5cblx0ICovXG5cdHByaXZhdGUgY29uc3RydWN0b3Iocm9vdEZzOiBGaWxlU3lzdGVtKSB7XG5cdFx0c3VwZXIoKTtcblx0XHR0aGlzLm1udE1hcCA9IHt9O1xuXHRcdHRoaXMucm9vdEZzID0gcm9vdEZzO1xuXHR9XG5cblx0LyoqXG5cdCAqIE1vdW50cyB0aGUgZmlsZSBzeXN0ZW0gYXQgdGhlIGdpdmVuIG1vdW50IHBvaW50LlxuXHQgKi9cblx0cHVibGljIG1vdW50KG1vdW50UG9pbnQ6IHN0cmluZywgZnM6IEZpbGVTeXN0ZW0sIGNyZWQ6IENyZWQpOiB2b2lkIHtcblx0XHRpZiAobW91bnRQb2ludFswXSAhPT0gJy8nKSB7XG5cdFx0XHRtb3VudFBvaW50ID0gYC8ke21vdW50UG9pbnR9YDtcblx0XHR9XG5cdFx0bW91bnRQb2ludCA9IHBhdGgucmVzb2x2ZShtb3VudFBvaW50KTtcblx0XHRpZiAodGhpcy5tbnRNYXBbbW91bnRQb2ludF0pIHtcblx0XHRcdHRocm93IG5ldyBBcGlFcnJvcihFcnJvckNvZGUuRUlOVkFMLCAnTW91bnQgcG9pbnQgJyArIG1vdW50UG9pbnQgKyAnIGlzIGFscmVhZHkgaW4gdXNlLicpO1xuXHRcdH1cblx0XHRta2RpcnBTeW5jKG1vdW50UG9pbnQsIDB4MWZmLCBjcmVkLCB0aGlzLnJvb3RGcyk7XG5cdFx0dGhpcy5tbnRNYXBbbW91bnRQb2ludF0gPSBmcztcblx0XHR0aGlzLm1vdW50TGlzdC5wdXNoKG1vdW50UG9pbnQpO1xuXHRcdHRoaXMubW91bnRMaXN0ID0gdGhpcy5tb3VudExpc3Quc29ydCgoYSwgYikgPT4gYi5sZW5ndGggLSBhLmxlbmd0aCk7XG5cdH1cblxuXHRwdWJsaWMgdW1vdW50KG1vdW50UG9pbnQ6IHN0cmluZywgY3JlZDogQ3JlZCk6IHZvaWQge1xuXHRcdGlmIChtb3VudFBvaW50WzBdICE9PSAnLycpIHtcblx0XHRcdG1vdW50UG9pbnQgPSBgLyR7bW91bnRQb2ludH1gO1xuXHRcdH1cblx0XHRtb3VudFBvaW50ID0gcGF0aC5yZXNvbHZlKG1vdW50UG9pbnQpO1xuXHRcdGlmICghdGhpcy5tbnRNYXBbbW91bnRQb2ludF0pIHtcblx0XHRcdHRocm93IG5ldyBBcGlFcnJvcihFcnJvckNvZGUuRUlOVkFMLCAnTW91bnQgcG9pbnQgJyArIG1vdW50UG9pbnQgKyAnIGlzIGFscmVhZHkgdW5tb3VudGVkLicpO1xuXHRcdH1cblx0XHRkZWxldGUgdGhpcy5tbnRNYXBbbW91bnRQb2ludF07XG5cdFx0dGhpcy5tb3VudExpc3Quc3BsaWNlKHRoaXMubW91bnRMaXN0LmluZGV4T2YobW91bnRQb2ludCksIDEpO1xuXG5cdFx0d2hpbGUgKG1vdW50UG9pbnQgIT09ICcvJykge1xuXHRcdFx0aWYgKHRoaXMucm9vdEZzLnJlYWRkaXJTeW5jKG1vdW50UG9pbnQsIGNyZWQpLmxlbmd0aCA9PT0gMCkge1xuXHRcdFx0XHR0aGlzLnJvb3RGcy5ybWRpclN5bmMobW91bnRQb2ludCwgY3JlZCk7XG5cdFx0XHRcdG1vdW50UG9pbnQgPSBwYXRoLmRpcm5hbWUobW91bnRQb2ludCk7XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRicmVhaztcblx0XHRcdH1cblx0XHR9XG5cdH1cblxuXHQvKipcblx0ICogUmV0dXJucyB0aGUgZmlsZSBzeXN0ZW0gdGhhdCB0aGUgcGF0aCBwb2ludHMgdG8uXG5cdCAqL1xuXHRwdWJsaWMgX2dldEZzKHBhdGg6IHN0cmluZyk6IHsgZnM6IEZpbGVTeXN0ZW07IHBhdGg6IHN0cmluZzsgbW91bnRQb2ludDogc3RyaW5nIH0ge1xuXHRcdGNvbnN0IG1vdW50TGlzdCA9IHRoaXMubW91bnRMaXN0LFxuXHRcdFx0bGVuID0gbW91bnRMaXN0Lmxlbmd0aDtcblx0XHRmb3IgKGxldCBpID0gMDsgaSA8IGxlbjsgaSsrKSB7XG5cdFx0XHRjb25zdCBtb3VudFBvaW50ID0gbW91bnRMaXN0W2ldO1xuXHRcdFx0Ly8gV2Uga25vdyBwYXRoIGlzIG5vcm1hbGl6ZWQsIHNvIGl0IGlzIGEgc3Vic3RyaW5nIG9mIHRoZSBtb3VudCBwb2ludC5cblx0XHRcdGlmIChtb3VudFBvaW50Lmxlbmd0aCA8PSBwYXRoLmxlbmd0aCAmJiBwYXRoLmluZGV4T2YobW91bnRQb2ludCkgPT09IDApIHtcblx0XHRcdFx0cGF0aCA9IHBhdGguc3Vic3RyKG1vdW50UG9pbnQubGVuZ3RoID4gMSA/IG1vdW50UG9pbnQubGVuZ3RoIDogMCk7XG5cdFx0XHRcdGlmIChwYXRoID09PSAnJykge1xuXHRcdFx0XHRcdHBhdGggPSAnLyc7XG5cdFx0XHRcdH1cblx0XHRcdFx0cmV0dXJuIHsgZnM6IHRoaXMubW50TWFwW21vdW50UG9pbnRdLCBwYXRoOiBwYXRoLCBtb3VudFBvaW50OiBtb3VudFBvaW50IH07XG5cdFx0XHR9XG5cdFx0fVxuXHRcdC8vIFF1ZXJ5IG91ciByb290IGZpbGUgc3lzdGVtLlxuXHRcdHJldHVybiB7IGZzOiB0aGlzLnJvb3RGcywgcGF0aDogcGF0aCwgbW91bnRQb2ludDogJy8nIH07XG5cdH1cblxuXHQvLyBHbG9iYWwgaW5mb3JtYXRpb24gbWV0aG9kc1xuXG5cdHB1YmxpYyBnZXROYW1lKCk6IHN0cmluZyB7XG5cdFx0cmV0dXJuIE1vdW50YWJsZUZpbGVTeXN0ZW0uTmFtZTtcblx0fVxuXG5cdHB1YmxpYyBkaXNrU3BhY2UocGF0aDogc3RyaW5nLCBjYjogKHRvdGFsOiBudW1iZXIsIGZyZWU6IG51bWJlcikgPT4gdm9pZCk6IHZvaWQge1xuXHRcdGNiKDAsIDApO1xuXHR9XG5cblx0cHVibGljIGlzUmVhZE9ubHkoKTogYm9vbGVhbiB7XG5cdFx0cmV0dXJuIGZhbHNlO1xuXHR9XG5cblx0cHVibGljIHN1cHBvcnRzTGlua3MoKTogYm9vbGVhbiB7XG5cdFx0Ly8gSSdtIG5vdCByZWFkeSBmb3IgY3Jvc3MtRlMgbGlua3MgeWV0LlxuXHRcdHJldHVybiBmYWxzZTtcblx0fVxuXG5cdHB1YmxpYyBzdXBwb3J0c1Byb3BzKCk6IGJvb2xlYW4ge1xuXHRcdHJldHVybiBmYWxzZTtcblx0fVxuXG5cdHB1YmxpYyBzdXBwb3J0c1N5bmNoKCk6IGJvb2xlYW4ge1xuXHRcdHJldHVybiB0cnVlO1xuXHR9XG5cblx0LyoqXG5cdCAqIEZpeGVzIHVwIGVycm9yIG1lc3NhZ2VzIHNvIHRoZXkgbWVudGlvbiB0aGUgbW91bnRlZCBmaWxlIGxvY2F0aW9uIHJlbGF0aXZlXG5cdCAqIHRvIHRoZSBNRlMgcm9vdCwgbm90IHRvIHRoZSBwYXJ0aWN1bGFyIEZTJ3Mgcm9vdC5cblx0ICogTXV0YXRlcyB0aGUgaW5wdXQgZXJyb3IsIGFuZCByZXR1cm5zIGl0LlxuXHQgKi9cblx0cHVibGljIHN0YW5kYXJkaXplRXJyb3IoZXJyOiBBcGlFcnJvciwgcGF0aDogc3RyaW5nLCByZWFsUGF0aDogc3RyaW5nKTogQXBpRXJyb3Ige1xuXHRcdGNvbnN0IGluZGV4ID0gZXJyLm1lc3NhZ2UuaW5kZXhPZihwYXRoKTtcblx0XHRpZiAoaW5kZXggIT09IC0xKSB7XG5cdFx0XHRlcnIubWVzc2FnZSA9IGVyci5tZXNzYWdlLnN1YnN0cigwLCBpbmRleCkgKyByZWFsUGF0aCArIGVyci5tZXNzYWdlLnN1YnN0cihpbmRleCArIHBhdGgubGVuZ3RoKTtcblx0XHRcdGVyci5wYXRoID0gcmVhbFBhdGg7XG5cdFx0fVxuXHRcdHJldHVybiBlcnI7XG5cdH1cblxuXHQvLyBUaGUgZm9sbG93aW5nIG1ldGhvZHMgaW52b2x2ZSBtdWx0aXBsZSBmaWxlIHN5c3RlbXMsIGFuZCB0aHVzIGhhdmUgY3VzdG9tXG5cdC8vIGxvZ2ljLlxuXHQvLyBOb3RlIHRoYXQgd2UgZ28gdGhyb3VnaCB0aGUgTm9kZSBBUEkgdG8gdXNlIGl0cyByb2J1c3QgZGVmYXVsdCBhcmd1bWVudFxuXHQvLyBwcm9jZXNzaW5nLlxuXG5cdHB1YmxpYyByZW5hbWUob2xkUGF0aDogc3RyaW5nLCBuZXdQYXRoOiBzdHJpbmcsIGNyZWQ6IENyZWQsIGNiOiBCRlNPbmVBcmdDYWxsYmFjayk6IHZvaWQge1xuXHRcdC8vIFNjZW5hcmlvIDE6IG9sZCBhbmQgbmV3IGFyZSBvbiBzYW1lIEZTLlxuXHRcdGNvbnN0IGZzMXJ2ID0gdGhpcy5fZ2V0RnMob2xkUGF0aCk7XG5cdFx0Y29uc3QgZnMycnYgPSB0aGlzLl9nZXRGcyhuZXdQYXRoKTtcblx0XHRpZiAoZnMxcnYuZnMgPT09IGZzMnJ2LmZzKSB7XG5cdFx0XHRyZXR1cm4gZnMxcnYuZnMucmVuYW1lKGZzMXJ2LnBhdGgsIGZzMnJ2LnBhdGgsIGNyZWQsIChlPzogQXBpRXJyb3IpID0+IHtcblx0XHRcdFx0aWYgKGUpIHtcblx0XHRcdFx0XHR0aGlzLnN0YW5kYXJkaXplRXJyb3IodGhpcy5zdGFuZGFyZGl6ZUVycm9yKGUsIGZzMXJ2LnBhdGgsIG9sZFBhdGgpLCBmczJydi5wYXRoLCBuZXdQYXRoKTtcblx0XHRcdFx0fVxuXHRcdFx0XHRjYihlKTtcblx0XHRcdH0pO1xuXHRcdH1cblxuXHRcdC8vIFNjZW5hcmlvIDI6IERpZmZlcmVudCBmaWxlIHN5c3RlbXMuXG5cdFx0Ly8gUmVhZCBvbGQgZmlsZSwgd3JpdGUgbmV3IGZpbGUsIGRlbGV0ZSBvbGQgZmlsZS5cblx0XHRyZXR1cm4gZnMucmVhZEZpbGUob2xkUGF0aCwgZnVuY3Rpb24gKGVycjogQXBpRXJyb3IsIGRhdGE/OiBhbnkpIHtcblx0XHRcdGlmIChlcnIpIHtcblx0XHRcdFx0cmV0dXJuIGNiKGVycik7XG5cdFx0XHR9XG5cdFx0XHRmcy53cml0ZUZpbGUobmV3UGF0aCwgZGF0YSwgZnVuY3Rpb24gKGVycjogQXBpRXJyb3IpIHtcblx0XHRcdFx0aWYgKGVycikge1xuXHRcdFx0XHRcdHJldHVybiBjYihlcnIpO1xuXHRcdFx0XHR9XG5cdFx0XHRcdGZzLnVubGluayhvbGRQYXRoLCBjYik7XG5cdFx0XHR9KTtcblx0XHR9KTtcblx0fVxuXG5cdHB1YmxpYyByZW5hbWVTeW5jKG9sZFBhdGg6IHN0cmluZywgbmV3UGF0aDogc3RyaW5nLCBjcmVkOiBDcmVkKTogdm9pZCB7XG5cdFx0Ly8gU2NlbmFyaW8gMTogb2xkIGFuZCBuZXcgYXJlIG9uIHNhbWUgRlMuXG5cdFx0Y29uc3QgZnMxcnYgPSB0aGlzLl9nZXRGcyhvbGRQYXRoKTtcblx0XHRjb25zdCBmczJydiA9IHRoaXMuX2dldEZzKG5ld1BhdGgpO1xuXHRcdGlmIChmczFydi5mcyA9PT0gZnMycnYuZnMpIHtcblx0XHRcdHRyeSB7XG5cdFx0XHRcdHJldHVybiBmczFydi5mcy5yZW5hbWVTeW5jKGZzMXJ2LnBhdGgsIGZzMnJ2LnBhdGgsIGNyZWQpO1xuXHRcdFx0fSBjYXRjaCAoZSkge1xuXHRcdFx0XHR0aGlzLnN0YW5kYXJkaXplRXJyb3IodGhpcy5zdGFuZGFyZGl6ZUVycm9yKGUsIGZzMXJ2LnBhdGgsIG9sZFBhdGgpLCBmczJydi5wYXRoLCBuZXdQYXRoKTtcblx0XHRcdFx0dGhyb3cgZTtcblx0XHRcdH1cblx0XHR9XG5cdFx0Ly8gU2NlbmFyaW8gMjogRGlmZmVyZW50IGZpbGUgc3lzdGVtcy5cblx0XHRjb25zdCBkYXRhID0gZnMucmVhZEZpbGVTeW5jKG9sZFBhdGgpO1xuXHRcdGZzLndyaXRlRmlsZVN5bmMobmV3UGF0aCwgZGF0YSk7XG5cdFx0cmV0dXJuIGZzLnVubGlua1N5bmMob2xkUGF0aCk7XG5cdH1cblxuXHRwdWJsaWMgcmVhZGRpclN5bmMocDogc3RyaW5nLCBjcmVkOiBDcmVkKTogc3RyaW5nW10ge1xuXHRcdGNvbnN0IGZzSW5mbyA9IHRoaXMuX2dldEZzKHApO1xuXG5cdFx0Ly8gSWYgbnVsbCwgcm9vdGZzIGRpZCBub3QgaGF2ZSB0aGUgZGlyZWN0b3J5XG5cdFx0Ly8gKG9yIHRoZSB0YXJnZXQgRlMgaXMgdGhlIHJvb3QgZnMpLlxuXHRcdGxldCBydjogc3RyaW5nW10gfCBudWxsID0gbnVsbDtcblx0XHQvLyBNb3VudCBwb2ludHMgYXJlIGFsbCBkZWZpbmVkIGluIHRoZSByb290IEZTLlxuXHRcdC8vIEVuc3VyZSB0aGF0IHdlIGxpc3QgdGhvc2UsIHRvby5cblx0XHRpZiAoZnNJbmZvLmZzICE9PSB0aGlzLnJvb3RGcykge1xuXHRcdFx0dHJ5IHtcblx0XHRcdFx0cnYgPSB0aGlzLnJvb3RGcy5yZWFkZGlyU3luYyhwLCBjcmVkKTtcblx0XHRcdH0gY2F0Y2ggKGUpIHtcblx0XHRcdFx0Ly8gSWdub3JlLlxuXHRcdFx0fVxuXHRcdH1cblxuXHRcdHRyeSB7XG5cdFx0XHRjb25zdCBydjIgPSBmc0luZm8uZnMucmVhZGRpclN5bmMoZnNJbmZvLnBhdGgsIGNyZWQpO1xuXHRcdFx0aWYgKHJ2ID09PSBudWxsKSB7XG5cdFx0XHRcdHJldHVybiBydjI7XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHQvLyBGaWx0ZXIgb3V0IGR1cGxpY2F0ZXMuXG5cdFx0XHRcdHJldHVybiBydjIuY29uY2F0KHJ2LmZpbHRlcih2YWwgPT4gcnYyLmluZGV4T2YodmFsKSA9PT0gLTEpKTtcblx0XHRcdH1cblx0XHR9IGNhdGNoIChlKSB7XG5cdFx0XHRpZiAocnYgPT09IG51bGwpIHtcblx0XHRcdFx0dGhyb3cgdGhpcy5zdGFuZGFyZGl6ZUVycm9yKGUsIGZzSW5mby5wYXRoLCBwKTtcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdC8vIFRoZSByb290IEZTIGhhZCBzb21ldGhpbmcuXG5cdFx0XHRcdHJldHVybiBydjtcblx0XHRcdH1cblx0XHR9XG5cdH1cblxuXHRwdWJsaWMgcmVhZGRpcihwOiBzdHJpbmcsIGNyZWQ6IENyZWQsIGNiOiBCRlNDYWxsYmFjazxzdHJpbmdbXT4pOiB2b2lkIHtcblx0XHRjb25zdCBmc0luZm8gPSB0aGlzLl9nZXRGcyhwKTtcblx0XHRmc0luZm8uZnMucmVhZGRpcihmc0luZm8ucGF0aCwgY3JlZCwgKGVyciwgZmlsZXMpID0+IHtcblx0XHRcdGlmIChmc0luZm8uZnMgIT09IHRoaXMucm9vdEZzKSB7XG5cdFx0XHRcdHRyeSB7XG5cdFx0XHRcdFx0Y29uc3QgcnYgPSB0aGlzLnJvb3RGcy5yZWFkZGlyU3luYyhwLCBjcmVkKTtcblx0XHRcdFx0XHRpZiAoZmlsZXMpIHtcblx0XHRcdFx0XHRcdC8vIEZpbHRlciBvdXQgZHVwbGljYXRlcy5cblx0XHRcdFx0XHRcdGZpbGVzID0gZmlsZXMuY29uY2F0KHJ2LmZpbHRlcih2YWwgPT4gZmlsZXMhLmluZGV4T2YodmFsKSA9PT0gLTEpKTtcblx0XHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdFx0ZmlsZXMgPSBydjtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH0gY2F0Y2ggKGUpIHtcblx0XHRcdFx0XHQvLyBSb290IEZTIGFuZCB0YXJnZXQgRlMgZGlkIG5vdCBoYXZlIGRpcmVjdG9yeS5cblx0XHRcdFx0XHRpZiAoZXJyKSB7XG5cdFx0XHRcdFx0XHRyZXR1cm4gY2IodGhpcy5zdGFuZGFyZGl6ZUVycm9yKGVyciwgZnNJbmZvLnBhdGgsIHApKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdH0gZWxzZSBpZiAoZXJyKSB7XG5cdFx0XHRcdC8vIFJvb3QgRlMgYW5kIHRhcmdldCBGUyBhcmUgdGhlIHNhbWUsIGFuZCBkaWQgbm90IGhhdmUgZGlyZWN0b3J5LlxuXHRcdFx0XHRyZXR1cm4gY2IodGhpcy5zdGFuZGFyZGl6ZUVycm9yKGVyciwgZnNJbmZvLnBhdGgsIHApKTtcblx0XHRcdH1cblxuXHRcdFx0Y2IobnVsbCwgZmlsZXMpO1xuXHRcdH0pO1xuXHR9XG5cblx0cHVibGljIHJlYWxwYXRoU3luYyhwOiBzdHJpbmcsIGNhY2hlOiB7IFtwYXRoOiBzdHJpbmddOiBzdHJpbmcgfSwgY3JlZDogQ3JlZCk6IHN0cmluZyB7XG5cdFx0Y29uc3QgZnNJbmZvID0gdGhpcy5fZ2V0RnMocCk7XG5cblx0XHR0cnkge1xuXHRcdFx0Y29uc3QgbW91bnRlZFBhdGggPSBmc0luZm8uZnMucmVhbHBhdGhTeW5jKGZzSW5mby5wYXRoLCB7fSwgY3JlZCk7XG5cdFx0XHQvLyByZXNvbHZlIGlzIHRoZXJlIHRvIHJlbW92ZSBhbnkgdHJhaWxpbmcgc2xhc2ggdGhhdCBtYXkgYmUgcHJlc2VudFxuXHRcdFx0cmV0dXJuIHBhdGgucmVzb2x2ZShwYXRoLmpvaW4oZnNJbmZvLm1vdW50UG9pbnQsIG1vdW50ZWRQYXRoKSk7XG5cdFx0fSBjYXRjaCAoZSkge1xuXHRcdFx0dGhyb3cgdGhpcy5zdGFuZGFyZGl6ZUVycm9yKGUsIGZzSW5mby5wYXRoLCBwKTtcblx0XHR9XG5cdH1cblxuXHRwdWJsaWMgcmVhbHBhdGgocDogc3RyaW5nLCBjYWNoZTogeyBbcGF0aDogc3RyaW5nXTogc3RyaW5nIH0sIGNyZWQ6IENyZWQsIGNiOiBCRlNDYWxsYmFjazxzdHJpbmc+KTogdm9pZCB7XG5cdFx0Y29uc3QgZnNJbmZvID0gdGhpcy5fZ2V0RnMocCk7XG5cblx0XHRmc0luZm8uZnMucmVhbHBhdGgoZnNJbmZvLnBhdGgsIHt9LCBjcmVkLCAoZXJyLCBydikgPT4ge1xuXHRcdFx0aWYgKGVycikge1xuXHRcdFx0XHRjYih0aGlzLnN0YW5kYXJkaXplRXJyb3IoZXJyLCBmc0luZm8ucGF0aCwgcCkpO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0Ly8gcmVzb2x2ZSBpcyB0aGVyZSB0byByZW1vdmUgYW55IHRyYWlsaW5nIHNsYXNoIHRoYXQgbWF5IGJlIHByZXNlbnRcblx0XHRcdFx0Y2IobnVsbCwgcGF0aC5yZXNvbHZlKHBhdGguam9pbihmc0luZm8ubW91bnRQb2ludCwgcnYhKSkpO1xuXHRcdFx0fVxuXHRcdH0pO1xuXHR9XG5cblx0cHVibGljIHJtZGlyU3luYyhwOiBzdHJpbmcsIGNyZWQ6IENyZWQpOiB2b2lkIHtcblx0XHRjb25zdCBmc0luZm8gPSB0aGlzLl9nZXRGcyhwKTtcblx0XHRpZiAodGhpcy5fY29udGFpbnNNb3VudFB0KHApKSB7XG5cdFx0XHR0aHJvdyBBcGlFcnJvci5FTk9URU1QVFkocCk7XG5cdFx0fSBlbHNlIHtcblx0XHRcdHRyeSB7XG5cdFx0XHRcdGZzSW5mby5mcy5ybWRpclN5bmMoZnNJbmZvLnBhdGgsIGNyZWQpO1xuXHRcdFx0fSBjYXRjaCAoZSkge1xuXHRcdFx0XHR0aHJvdyB0aGlzLnN0YW5kYXJkaXplRXJyb3IoZSwgZnNJbmZvLnBhdGgsIHApO1xuXHRcdFx0fVxuXHRcdH1cblx0fVxuXG5cdHB1YmxpYyBybWRpcihwOiBzdHJpbmcsIGNyZWQ6IENyZWQsIGNiOiBCRlNPbmVBcmdDYWxsYmFjayk6IHZvaWQge1xuXHRcdGNvbnN0IGZzSW5mbyA9IHRoaXMuX2dldEZzKHApO1xuXHRcdGlmICh0aGlzLl9jb250YWluc01vdW50UHQocCkpIHtcblx0XHRcdGNiKEFwaUVycm9yLkVOT1RFTVBUWShwKSk7XG5cdFx0fSBlbHNlIHtcblx0XHRcdGZzSW5mby5mcy5ybWRpcihmc0luZm8ucGF0aCwgY3JlZCwgKGVycj8pID0+IHtcblx0XHRcdFx0Y2IoZXJyID8gdGhpcy5zdGFuZGFyZGl6ZUVycm9yKGVyciwgZnNJbmZvLnBhdGgsIHApIDogbnVsbCk7XG5cdFx0XHR9KTtcblx0XHR9XG5cdH1cblxuXHQvKipcblx0ICogUmV0dXJucyB0cnVlIGlmIHRoZSBnaXZlbiBwYXRoIGNvbnRhaW5zIGEgbW91bnQgcG9pbnQuXG5cdCAqL1xuXHRwcml2YXRlIF9jb250YWluc01vdW50UHQocDogc3RyaW5nKTogYm9vbGVhbiB7XG5cdFx0Y29uc3QgbW91bnRQb2ludHMgPSB0aGlzLm1vdW50TGlzdCxcblx0XHRcdGxlbiA9IG1vdW50UG9pbnRzLmxlbmd0aDtcblx0XHRmb3IgKGxldCBpID0gMDsgaSA8IGxlbjsgaSsrKSB7XG5cdFx0XHRjb25zdCBwdCA9IG1vdW50UG9pbnRzW2ldO1xuXHRcdFx0aWYgKHB0Lmxlbmd0aCA+PSBwLmxlbmd0aCAmJiBwdC5zbGljZSgwLCBwLmxlbmd0aCkgPT09IHApIHtcblx0XHRcdFx0cmV0dXJuIHRydWU7XG5cdFx0XHR9XG5cdFx0fVxuXHRcdHJldHVybiBmYWxzZTtcblx0fVxufVxuXG4vKipcbiAqIFRyaWNreTogRGVmaW5lIGFsbCBvZiB0aGUgZnVuY3Rpb25zIHRoYXQgbWVyZWx5IGZvcndhcmQgYXJndW1lbnRzIHRvIHRoZVxuICogcmVsZXZhbnQgZmlsZSBzeXN0ZW0sIG9yIHJldHVybi90aHJvdyBhbiBlcnJvci5cbiAqIFRha2UgYWR2YW50YWdlIG9mIHRoZSBmYWN0IHRoYXQgdGhlICpmaXJzdCogYXJndW1lbnQgaXMgYWx3YXlzIHRoZSBwYXRoLCBhbmRcbiAqIHRoZSAqbGFzdCogaXMgdGhlIGNhbGxiYWNrIGZ1bmN0aW9uIChpZiBhc3luYykuXG4gKiBAdG9kbyBDYW4gdXNlIG51bUFyZ3MgdG8gbWFrZSBwcm94eWluZyBtb3JlIGVmZmljaWVudC5cbiAqIEBoaWRkZW5cbiAqL1xuZnVuY3Rpb24gZGVmaW5lRmNuKG5hbWU6IHN0cmluZywgaXNTeW5jOiBib29sZWFuLCBudW1BcmdzOiBudW1iZXIpOiAoLi4uYXJnczogYW55W10pID0+IGFueSB7XG5cdGlmIChpc1N5bmMpIHtcblx0XHRyZXR1cm4gZnVuY3Rpb24gKHRoaXM6IE1vdW50YWJsZUZpbGVTeXN0ZW0sIC4uLmFyZ3M6IGFueVtdKSB7XG5cdFx0XHRjb25zdCBwYXRoID0gYXJnc1swXTtcblx0XHRcdGNvbnN0IHJ2ID0gdGhpcy5fZ2V0RnMocGF0aCk7XG5cdFx0XHRhcmdzWzBdID0gcnYucGF0aDtcblx0XHRcdHRyeSB7XG5cdFx0XHRcdHJldHVybiAoPGFueT5ydi5mcylbbmFtZV0uYXBwbHkocnYuZnMsIGFyZ3MpO1xuXHRcdFx0fSBjYXRjaCAoZSkge1xuXHRcdFx0XHR0aGlzLnN0YW5kYXJkaXplRXJyb3IoZSwgcnYucGF0aCwgcGF0aCk7XG5cdFx0XHRcdHRocm93IGU7XG5cdFx0XHR9XG5cdFx0fTtcblx0fSBlbHNlIHtcblx0XHRyZXR1cm4gZnVuY3Rpb24gKHRoaXM6IE1vdW50YWJsZUZpbGVTeXN0ZW0sIC4uLmFyZ3M6IGFueVtdKSB7XG5cdFx0XHRjb25zdCBwYXRoID0gYXJnc1swXTtcblx0XHRcdGNvbnN0IHJ2ID0gdGhpcy5fZ2V0RnMocGF0aCk7XG5cdFx0XHRhcmdzWzBdID0gcnYucGF0aDtcblx0XHRcdGlmICh0eXBlb2YgYXJnc1thcmdzLmxlbmd0aCAtIDFdID09PSAnZnVuY3Rpb24nKSB7XG5cdFx0XHRcdGNvbnN0IGNiID0gYXJnc1thcmdzLmxlbmd0aCAtIDFdO1xuXHRcdFx0XHRhcmdzW2FyZ3MubGVuZ3RoIC0gMV0gPSAoLi4uYXJnczogYW55W10pID0+IHtcblx0XHRcdFx0XHRpZiAoYXJncy5sZW5ndGggPiAwICYmIGFyZ3NbMF0gaW5zdGFuY2VvZiBBcGlFcnJvcikge1xuXHRcdFx0XHRcdFx0dGhpcy5zdGFuZGFyZGl6ZUVycm9yKGFyZ3NbMF0sIHJ2LnBhdGgsIHBhdGgpO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHRjYi5hcHBseShudWxsLCBhcmdzKTtcblx0XHRcdFx0fTtcblx0XHRcdH1cblx0XHRcdHJldHVybiAoPGFueT5ydi5mcylbbmFtZV0uYXBwbHkocnYuZnMsIGFyZ3MpO1xuXHRcdH07XG5cdH1cbn1cblxuLyoqXG4gKiBAaGlkZGVuXG4gKi9cbmNvbnN0IGZzQ21kTWFwID0gW1xuXHQvLyAxIGFyZyBmdW5jdGlvbnNcblx0WydleGlzdHMnLCAndW5saW5rJywgJ3JlYWRsaW5rJ10sXG5cdC8vIDIgYXJnIGZ1bmN0aW9uc1xuXHRbJ3N0YXQnLCAnbWtkaXInLCAndHJ1bmNhdGUnXSxcblx0Ly8gMyBhcmcgZnVuY3Rpb25zXG5cdFsnb3BlbicsICdyZWFkRmlsZScsICdjaG1vZCcsICd1dGltZXMnXSxcblx0Ly8gNCBhcmcgZnVuY3Rpb25zXG5cdFsnY2hvd24nXSxcblx0Ly8gNSBhcmcgZnVuY3Rpb25zXG5cdFsnd3JpdGVGaWxlJywgJ2FwcGVuZEZpbGUnXSxcbl07XG5cbmZvciAobGV0IGkgPSAwOyBpIDwgZnNDbWRNYXAubGVuZ3RoOyBpKyspIHtcblx0Y29uc3QgY21kcyA9IGZzQ21kTWFwW2ldO1xuXHRmb3IgKGNvbnN0IGZuTmFtZSBvZiBjbWRzKSB7XG5cdFx0KDxhbnk+TW91bnRhYmxlRmlsZVN5c3RlbS5wcm90b3R5cGUpW2ZuTmFtZV0gPSBkZWZpbmVGY24oZm5OYW1lLCBmYWxzZSwgaSArIDEpO1xuXHRcdCg8YW55Pk1vdW50YWJsZUZpbGVTeXN0ZW0ucHJvdG90eXBlKVtmbk5hbWUgKyAnU3luYyddID0gZGVmaW5lRmNuKGZuTmFtZSArICdTeW5jJywgdHJ1ZSwgaSArIDEpO1xuXHR9XG59XG4iLCAiaW1wb3J0IHNldEltbWVkaWF0ZSBmcm9tICcuLi9nZW5lcmljL3NldEltbWVkaWF0ZSc7XG5cbmV4cG9ydCB0eXBlIE11dGV4Q2FsbGJhY2sgPSAoKSA9PiB2b2lkO1xuLyoqXG4gKiBOb24tcmVjdXJzaXZlIG11dGV4XG4gKiBAaGlkZGVuXG4gKi9cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIE11dGV4IHtcblx0cHJpdmF0ZSBfbG9ja2VkOiBib29sZWFuID0gZmFsc2U7XG5cdHByaXZhdGUgX3dhaXRlcnM6IE11dGV4Q2FsbGJhY2tbXSA9IFtdO1xuXG5cdHB1YmxpYyBsb2NrKGNiOiBNdXRleENhbGxiYWNrKTogdm9pZCB7XG5cdFx0aWYgKHRoaXMuX2xvY2tlZCkge1xuXHRcdFx0dGhpcy5fd2FpdGVycy5wdXNoKGNiKTtcblx0XHRcdHJldHVybjtcblx0XHR9XG5cdFx0dGhpcy5fbG9ja2VkID0gdHJ1ZTtcblx0XHRjYigpO1xuXHR9XG5cblx0cHVibGljIHVubG9jaygpOiB2b2lkIHtcblx0XHRpZiAoIXRoaXMuX2xvY2tlZCkge1xuXHRcdFx0dGhyb3cgbmV3IEVycm9yKCd1bmxvY2sgb2YgYSBub24tbG9ja2VkIG11dGV4Jyk7XG5cdFx0fVxuXG5cdFx0Y29uc3QgbmV4dCA9IHRoaXMuX3dhaXRlcnMuc2hpZnQoKTtcblx0XHQvLyBkb24ndCB1bmxvY2sgLSB3ZSB3YW50IHRvIHF1ZXVlIHVwIG5leHQgZm9yIHRoZVxuXHRcdC8vIF9lbmRfIG9mIHRoZSBjdXJyZW50IHRhc2sgZXhlY3V0aW9uLCBidXQgd2UgZG9uJ3Rcblx0XHQvLyB3YW50IGl0IHRvIGJlIGNhbGxlZCBpbmxpbmUgd2l0aCB3aGF0ZXZlciB0aGVcblx0XHQvLyBjdXJyZW50IHN0YWNrIGlzLiAgVGhpcyB3YXkgd2Ugc3RpbGwgZ2V0IHRoZSBuaWNlXG5cdFx0Ly8gYmVoYXZpb3IgdGhhdCBhbiB1bmxvY2sgaW1tZWRpYXRlbHkgZm9sbG93ZWQgYnkgYVxuXHRcdC8vIGxvY2sgd29uJ3QgY2F1c2Ugc3RhcnZhdGlvbi5cblx0XHRpZiAobmV4dCkge1xuXHRcdFx0c2V0SW1tZWRpYXRlKG5leHQpO1xuXHRcdFx0cmV0dXJuO1xuXHRcdH1cblxuXHRcdHRoaXMuX2xvY2tlZCA9IGZhbHNlO1xuXHR9XG5cblx0cHVibGljIHRyeUxvY2soKTogYm9vbGVhbiB7XG5cdFx0aWYgKHRoaXMuX2xvY2tlZCkge1xuXHRcdFx0cmV0dXJuIGZhbHNlO1xuXHRcdH1cblxuXHRcdHRoaXMuX2xvY2tlZCA9IHRydWU7XG5cdFx0cmV0dXJuIHRydWU7XG5cdH1cblxuXHRwdWJsaWMgaXNMb2NrZWQoKTogYm9vbGVhbiB7XG5cdFx0cmV0dXJuIHRoaXMuX2xvY2tlZDtcblx0fVxufVxuIiwgImltcG9ydCBNdXRleCBmcm9tICcuL211dGV4JztcbmltcG9ydCB7IEZpbGVTeXN0ZW0sIEJGU09uZUFyZ0NhbGxiYWNrLCBCRlNDYWxsYmFjayB9IGZyb20gJy4uL2NvcmUvZmlsZV9zeXN0ZW0nO1xuaW1wb3J0IHsgQXBpRXJyb3IgfSBmcm9tICcuLi9jb3JlL2FwaV9lcnJvcic7XG5pbXBvcnQgeyBGaWxlRmxhZyB9IGZyb20gJy4uL2NvcmUvZmlsZV9mbGFnJztcbmltcG9ydCB7IGRlZmF1bHQgYXMgU3RhdHMgfSBmcm9tICcuLi9jb3JlL3N0YXRzJztcbmltcG9ydCB7IEZpbGUgfSBmcm9tICcuLi9jb3JlL2ZpbGUnO1xuaW1wb3J0IENyZWQgZnJvbSAnLi4vY29yZS9jcmVkJztcbmltcG9ydCB0eXBlIHsgQnVmZmVyIH0gZnJvbSAnYnVmZmVyJztcblxuLyoqXG4gKiBUaGlzIGNsYXNzIHNlcmlhbGl6ZXMgYWNjZXNzIHRvIGFuIHVuZGVybHlpbmcgYXN5bmMgZmlsZXN5c3RlbS5cbiAqIEZvciBleGFtcGxlLCBvbiBhbiBPdmVybGF5RlMgaW5zdGFuY2Ugd2l0aCBhbiBhc3luYyBsb3dlclxuICogZGlyZWN0b3J5IG9wZXJhdGlvbnMgbGlrZSByZW5hbWUgYW5kIHJtZGlyIG1heSBpbnZvbHZlIG11bHRpcGxlXG4gKiByZXF1ZXN0cyBpbnZvbHZpbmcgYm90aCB0aGUgdXBwZXIgYW5kIGxvd2VyIGZpbGVzeXN0ZW1zIC0tIHRoZXlcbiAqIGFyZSBub3QgZXhlY3V0ZWQgaW4gYSBzaW5nbGUgYXRvbWljIHN0ZXAuICBPdmVybGF5RlMgdXNlcyB0aGlzXG4gKiBMb2NrZWRGUyB0byBhdm9pZCBoYXZpbmcgdG8gcmVhc29uIGFib3V0IHRoZSBjb3JyZWN0bmVzcyBvZlxuICogbXVsdGlwbGUgcmVxdWVzdHMgaW50ZXJsZWF2aW5nLlxuICovXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBMb2NrZWRGUzxUIGV4dGVuZHMgRmlsZVN5c3RlbT4gaW1wbGVtZW50cyBGaWxlU3lzdGVtIHtcblx0cHJpdmF0ZSBfZnM6IFQ7XG5cdHByaXZhdGUgX211OiBNdXRleDtcblxuXHRjb25zdHJ1Y3RvcihmczogVCkge1xuXHRcdHRoaXMuX2ZzID0gZnM7XG5cdFx0dGhpcy5fbXUgPSBuZXcgTXV0ZXgoKTtcblx0fVxuXG5cdHB1YmxpYyBnZXROYW1lKCk6IHN0cmluZyB7XG5cdFx0cmV0dXJuICdMb2NrZWRGUzwnICsgdGhpcy5fZnMuZ2V0TmFtZSgpICsgJz4nO1xuXHR9XG5cblx0cHVibGljIGdldEZTVW5sb2NrZWQoKTogVCB7XG5cdFx0cmV0dXJuIHRoaXMuX2ZzO1xuXHR9XG5cblx0cHVibGljIGRpc2tTcGFjZShwOiBzdHJpbmcsIGNiOiAodG90YWw6IG51bWJlciwgZnJlZTogbnVtYmVyKSA9PiBhbnkpOiB2b2lkIHtcblx0XHQvLyBGSVhNRTogc2hvdWxkIHRoaXMgbG9jaz9cblx0XHR0aGlzLl9mcy5kaXNrU3BhY2UocCwgY2IpO1xuXHR9XG5cblx0cHVibGljIGlzUmVhZE9ubHkoKTogYm9vbGVhbiB7XG5cdFx0cmV0dXJuIHRoaXMuX2ZzLmlzUmVhZE9ubHkoKTtcblx0fVxuXG5cdHB1YmxpYyBzdXBwb3J0c0xpbmtzKCk6IGJvb2xlYW4ge1xuXHRcdHJldHVybiB0aGlzLl9mcy5zdXBwb3J0c0xpbmtzKCk7XG5cdH1cblxuXHRwdWJsaWMgc3VwcG9ydHNQcm9wcygpOiBib29sZWFuIHtcblx0XHRyZXR1cm4gdGhpcy5fZnMuc3VwcG9ydHNQcm9wcygpO1xuXHR9XG5cblx0cHVibGljIHN1cHBvcnRzU3luY2goKTogYm9vbGVhbiB7XG5cdFx0cmV0dXJuIHRoaXMuX2ZzLnN1cHBvcnRzU3luY2goKTtcblx0fVxuXG5cdHB1YmxpYyByZW5hbWUob2xkUGF0aDogc3RyaW5nLCBuZXdQYXRoOiBzdHJpbmcsIGNyZWQ6IENyZWQsIGNiOiBCRlNPbmVBcmdDYWxsYmFjayk6IHZvaWQge1xuXHRcdHRoaXMuX211LmxvY2soKCkgPT4ge1xuXHRcdFx0dGhpcy5fZnMucmVuYW1lKG9sZFBhdGgsIG5ld1BhdGgsIGNyZWQsIChlcnI/OiBBcGlFcnJvcikgPT4ge1xuXHRcdFx0XHR0aGlzLl9tdS51bmxvY2soKTtcblx0XHRcdFx0Y2IoZXJyKTtcblx0XHRcdH0pO1xuXHRcdH0pO1xuXHR9XG5cblx0cHVibGljIHJlbmFtZVN5bmMob2xkUGF0aDogc3RyaW5nLCBuZXdQYXRoOiBzdHJpbmcsIGNyZWQ6IENyZWQpOiB2b2lkIHtcblx0XHRpZiAodGhpcy5fbXUuaXNMb2NrZWQoKSkge1xuXHRcdFx0dGhyb3cgbmV3IEVycm9yKCdpbnZhbGlkIHN5bmMgY2FsbCcpO1xuXHRcdH1cblx0XHRyZXR1cm4gdGhpcy5fZnMucmVuYW1lU3luYyhvbGRQYXRoLCBuZXdQYXRoLCBjcmVkKTtcblx0fVxuXG5cdHB1YmxpYyBzdGF0KHA6IHN0cmluZywgaXNMc3RhdDogYm9vbGVhbiwgY3JlZDogQ3JlZCwgY2I6IEJGU0NhbGxiYWNrPFN0YXRzPik6IHZvaWQge1xuXHRcdHRoaXMuX211LmxvY2soKCkgPT4ge1xuXHRcdFx0dGhpcy5fZnMuc3RhdChwLCBpc0xzdGF0LCBjcmVkLCAoZXJyPzogQXBpRXJyb3IsIHN0YXQ/OiBTdGF0cykgPT4ge1xuXHRcdFx0XHR0aGlzLl9tdS51bmxvY2soKTtcblx0XHRcdFx0Y2IoZXJyLCBzdGF0KTtcblx0XHRcdH0pO1xuXHRcdH0pO1xuXHR9XG5cblx0cHVibGljIHN0YXRTeW5jKHA6IHN0cmluZywgaXNMc3RhdDogYm9vbGVhbiwgY3JlZDogQ3JlZCk6IFN0YXRzIHtcblx0XHRpZiAodGhpcy5fbXUuaXNMb2NrZWQoKSkge1xuXHRcdFx0dGhyb3cgbmV3IEVycm9yKCdpbnZhbGlkIHN5bmMgY2FsbCcpO1xuXHRcdH1cblx0XHRyZXR1cm4gdGhpcy5fZnMuc3RhdFN5bmMocCwgaXNMc3RhdCwgY3JlZCk7XG5cdH1cblxuXHRwdWJsaWMgYWNjZXNzKHA6IHN0cmluZywgbW9kZTogbnVtYmVyLCBjcmVkOiBDcmVkLCBjYjogQkZTT25lQXJnQ2FsbGJhY2spOiB2b2lkIHtcblx0XHR0aGlzLl9tdS5sb2NrKCgpID0+IHtcblx0XHRcdHRoaXMuX2ZzLmFjY2VzcyhwLCBtb2RlLCBjcmVkLCAoZXJyPzogQXBpRXJyb3IpID0+IHtcblx0XHRcdFx0dGhpcy5fbXUudW5sb2NrKCk7XG5cdFx0XHRcdGNiKGVycik7XG5cdFx0XHR9KTtcblx0XHR9KTtcblx0fVxuXG5cdHB1YmxpYyBhY2Nlc3NTeW5jKHA6IHN0cmluZywgbW9kZTogbnVtYmVyLCBjcmVkOiBDcmVkKTogdm9pZCB7XG5cdFx0aWYgKHRoaXMuX211LmlzTG9ja2VkKCkpIHtcblx0XHRcdHRocm93IG5ldyBFcnJvcignaW52YWxpZCBzeW5jIGNhbGwnKTtcblx0XHR9XG5cdFx0cmV0dXJuIHRoaXMuX2ZzLmFjY2Vzc1N5bmMocCwgbW9kZSwgY3JlZCk7XG5cdH1cblxuXHRwdWJsaWMgb3BlbihwOiBzdHJpbmcsIGZsYWc6IEZpbGVGbGFnLCBtb2RlOiBudW1iZXIsIGNyZWQ6IENyZWQsIGNiOiBCRlNDYWxsYmFjazxGaWxlPik6IHZvaWQge1xuXHRcdHRoaXMuX211LmxvY2soKCkgPT4ge1xuXHRcdFx0dGhpcy5fZnMub3BlbihwLCBmbGFnLCBtb2RlLCBjcmVkLCAoZXJyPzogQXBpRXJyb3IsIGZkPzogRmlsZSkgPT4ge1xuXHRcdFx0XHR0aGlzLl9tdS51bmxvY2soKTtcblx0XHRcdFx0Y2IoZXJyLCBmZCk7XG5cdFx0XHR9KTtcblx0XHR9KTtcblx0fVxuXG5cdHB1YmxpYyBvcGVuU3luYyhwOiBzdHJpbmcsIGZsYWc6IEZpbGVGbGFnLCBtb2RlOiBudW1iZXIsIGNyZWQ6IENyZWQpOiBGaWxlIHtcblx0XHRpZiAodGhpcy5fbXUuaXNMb2NrZWQoKSkge1xuXHRcdFx0dGhyb3cgbmV3IEVycm9yKCdpbnZhbGlkIHN5bmMgY2FsbCcpO1xuXHRcdH1cblx0XHRyZXR1cm4gdGhpcy5fZnMub3BlblN5bmMocCwgZmxhZywgbW9kZSwgY3JlZCk7XG5cdH1cblxuXHRwdWJsaWMgdW5saW5rKHA6IHN0cmluZywgY3JlZDogQ3JlZCwgY2I6IEJGU09uZUFyZ0NhbGxiYWNrKTogdm9pZCB7XG5cdFx0dGhpcy5fbXUubG9jaygoKSA9PiB7XG5cdFx0XHR0aGlzLl9mcy51bmxpbmsocCwgY3JlZCwgKGVycj86IEFwaUVycm9yKSA9PiB7XG5cdFx0XHRcdHRoaXMuX211LnVubG9jaygpO1xuXHRcdFx0XHRjYihlcnIpO1xuXHRcdFx0fSk7XG5cdFx0fSk7XG5cdH1cblxuXHRwdWJsaWMgdW5saW5rU3luYyhwOiBzdHJpbmcsIGNyZWQ6IENyZWQpOiB2b2lkIHtcblx0XHRpZiAodGhpcy5fbXUuaXNMb2NrZWQoKSkge1xuXHRcdFx0dGhyb3cgbmV3IEVycm9yKCdpbnZhbGlkIHN5bmMgY2FsbCcpO1xuXHRcdH1cblx0XHRyZXR1cm4gdGhpcy5fZnMudW5saW5rU3luYyhwLCBjcmVkKTtcblx0fVxuXG5cdHB1YmxpYyBybWRpcihwOiBzdHJpbmcsIGNyZWQ6IENyZWQsIGNiOiBCRlNPbmVBcmdDYWxsYmFjayk6IHZvaWQge1xuXHRcdHRoaXMuX211LmxvY2soKCkgPT4ge1xuXHRcdFx0dGhpcy5fZnMucm1kaXIocCwgY3JlZCwgKGVycj86IEFwaUVycm9yKSA9PiB7XG5cdFx0XHRcdHRoaXMuX211LnVubG9jaygpO1xuXHRcdFx0XHRjYihlcnIpO1xuXHRcdFx0fSk7XG5cdFx0fSk7XG5cdH1cblxuXHRwdWJsaWMgcm1kaXJTeW5jKHA6IHN0cmluZywgY3JlZDogQ3JlZCk6IHZvaWQge1xuXHRcdGlmICh0aGlzLl9tdS5pc0xvY2tlZCgpKSB7XG5cdFx0XHR0aHJvdyBuZXcgRXJyb3IoJ2ludmFsaWQgc3luYyBjYWxsJyk7XG5cdFx0fVxuXHRcdHJldHVybiB0aGlzLl9mcy5ybWRpclN5bmMocCwgY3JlZCk7XG5cdH1cblxuXHRwdWJsaWMgbWtkaXIocDogc3RyaW5nLCBtb2RlOiBudW1iZXIsIGNyZWQ6IENyZWQsIGNiOiBCRlNPbmVBcmdDYWxsYmFjayk6IHZvaWQge1xuXHRcdHRoaXMuX211LmxvY2soKCkgPT4ge1xuXHRcdFx0dGhpcy5fZnMubWtkaXIocCwgbW9kZSwgY3JlZCwgKGVycj86IEFwaUVycm9yKSA9PiB7XG5cdFx0XHRcdHRoaXMuX211LnVubG9jaygpO1xuXHRcdFx0XHRjYihlcnIpO1xuXHRcdFx0fSk7XG5cdFx0fSk7XG5cdH1cblxuXHRwdWJsaWMgbWtkaXJTeW5jKHA6IHN0cmluZywgbW9kZTogbnVtYmVyLCBjcmVkOiBDcmVkKTogdm9pZCB7XG5cdFx0aWYgKHRoaXMuX211LmlzTG9ja2VkKCkpIHtcblx0XHRcdHRocm93IG5ldyBFcnJvcignaW52YWxpZCBzeW5jIGNhbGwnKTtcblx0XHR9XG5cdFx0cmV0dXJuIHRoaXMuX2ZzLm1rZGlyU3luYyhwLCBtb2RlLCBjcmVkKTtcblx0fVxuXG5cdHB1YmxpYyByZWFkZGlyKHA6IHN0cmluZywgY3JlZDogQ3JlZCwgY2I6IEJGU0NhbGxiYWNrPHN0cmluZ1tdPik6IHZvaWQge1xuXHRcdHRoaXMuX211LmxvY2soKCkgPT4ge1xuXHRcdFx0dGhpcy5fZnMucmVhZGRpcihwLCBjcmVkLCAoZXJyPzogQXBpRXJyb3IsIGZpbGVzPzogc3RyaW5nW10pID0+IHtcblx0XHRcdFx0dGhpcy5fbXUudW5sb2NrKCk7XG5cdFx0XHRcdGNiKGVyciwgZmlsZXMpO1xuXHRcdFx0fSk7XG5cdFx0fSk7XG5cdH1cblxuXHRwdWJsaWMgcmVhZGRpclN5bmMocDogc3RyaW5nLCBjcmVkOiBDcmVkKTogc3RyaW5nW10ge1xuXHRcdGlmICh0aGlzLl9tdS5pc0xvY2tlZCgpKSB7XG5cdFx0XHR0aHJvdyBuZXcgRXJyb3IoJ2ludmFsaWQgc3luYyBjYWxsJyk7XG5cdFx0fVxuXHRcdHJldHVybiB0aGlzLl9mcy5yZWFkZGlyU3luYyhwLCBjcmVkKTtcblx0fVxuXG5cdHB1YmxpYyBleGlzdHMocDogc3RyaW5nLCBjcmVkOiBDcmVkLCBjYjogKGV4aXN0czogYm9vbGVhbikgPT4gdm9pZCk6IHZvaWQge1xuXHRcdHRoaXMuX211LmxvY2soKCkgPT4ge1xuXHRcdFx0dGhpcy5fZnMuZXhpc3RzKHAsIGNyZWQsIChleGlzdHM6IGJvb2xlYW4pID0+IHtcblx0XHRcdFx0dGhpcy5fbXUudW5sb2NrKCk7XG5cdFx0XHRcdGNiKGV4aXN0cyk7XG5cdFx0XHR9KTtcblx0XHR9KTtcblx0fVxuXG5cdHB1YmxpYyBleGlzdHNTeW5jKHA6IHN0cmluZywgY3JlZDogQ3JlZCk6IGJvb2xlYW4ge1xuXHRcdGlmICh0aGlzLl9tdS5pc0xvY2tlZCgpKSB7XG5cdFx0XHR0aHJvdyBuZXcgRXJyb3IoJ2ludmFsaWQgc3luYyBjYWxsJyk7XG5cdFx0fVxuXHRcdHJldHVybiB0aGlzLl9mcy5leGlzdHNTeW5jKHAsIGNyZWQpO1xuXHR9XG5cblx0cHVibGljIHJlYWxwYXRoKHA6IHN0cmluZywgY2FjaGU6IHsgW3BhdGg6IHN0cmluZ106IHN0cmluZyB9LCBjcmVkOiBDcmVkLCBjYjogQkZTQ2FsbGJhY2s8c3RyaW5nPik6IHZvaWQge1xuXHRcdHRoaXMuX211LmxvY2soKCkgPT4ge1xuXHRcdFx0dGhpcy5fZnMucmVhbHBhdGgocCwgY2FjaGUsIGNyZWQsIChlcnI/OiBBcGlFcnJvciwgcmVzb2x2ZWRQYXRoPzogc3RyaW5nKSA9PiB7XG5cdFx0XHRcdHRoaXMuX211LnVubG9jaygpO1xuXHRcdFx0XHRjYihlcnIsIHJlc29sdmVkUGF0aCk7XG5cdFx0XHR9KTtcblx0XHR9KTtcblx0fVxuXG5cdHB1YmxpYyByZWFscGF0aFN5bmMocDogc3RyaW5nLCBjYWNoZTogeyBbcGF0aDogc3RyaW5nXTogc3RyaW5nIH0sIGNyZWQ6IENyZWQpOiBzdHJpbmcge1xuXHRcdGlmICh0aGlzLl9tdS5pc0xvY2tlZCgpKSB7XG5cdFx0XHR0aHJvdyBuZXcgRXJyb3IoJ2ludmFsaWQgc3luYyBjYWxsJyk7XG5cdFx0fVxuXHRcdHJldHVybiB0aGlzLl9mcy5yZWFscGF0aFN5bmMocCwgY2FjaGUsIGNyZWQpO1xuXHR9XG5cblx0cHVibGljIHRydW5jYXRlKHA6IHN0cmluZywgbGVuOiBudW1iZXIsIGNyZWQ6IENyZWQsIGNiOiBCRlNPbmVBcmdDYWxsYmFjayk6IHZvaWQge1xuXHRcdHRoaXMuX211LmxvY2soKCkgPT4ge1xuXHRcdFx0dGhpcy5fZnMudHJ1bmNhdGUocCwgbGVuLCBjcmVkLCAoZXJyPzogQXBpRXJyb3IpID0+IHtcblx0XHRcdFx0dGhpcy5fbXUudW5sb2NrKCk7XG5cdFx0XHRcdGNiKGVycik7XG5cdFx0XHR9KTtcblx0XHR9KTtcblx0fVxuXG5cdHB1YmxpYyB0cnVuY2F0ZVN5bmMocDogc3RyaW5nLCBsZW46IG51bWJlciwgY3JlZDogQ3JlZCk6IHZvaWQge1xuXHRcdGlmICh0aGlzLl9tdS5pc0xvY2tlZCgpKSB7XG5cdFx0XHR0aHJvdyBuZXcgRXJyb3IoJ2ludmFsaWQgc3luYyBjYWxsJyk7XG5cdFx0fVxuXHRcdHJldHVybiB0aGlzLl9mcy50cnVuY2F0ZVN5bmMocCwgbGVuLCBjcmVkKTtcblx0fVxuXG5cdHB1YmxpYyByZWFkRmlsZShmbmFtZTogc3RyaW5nLCBlbmNvZGluZzogc3RyaW5nLCBmbGFnOiBGaWxlRmxhZywgY3JlZDogQ3JlZCwgY2I6IEJGU0NhbGxiYWNrPHN0cmluZyB8IEJ1ZmZlcj4pOiB2b2lkIHtcblx0XHR0aGlzLl9tdS5sb2NrKCgpID0+IHtcblx0XHRcdHRoaXMuX2ZzLnJlYWRGaWxlKGZuYW1lLCBlbmNvZGluZywgZmxhZywgY3JlZCwgKGVycj86IEFwaUVycm9yLCBkYXRhPzogYW55KSA9PiB7XG5cdFx0XHRcdHRoaXMuX211LnVubG9jaygpO1xuXHRcdFx0XHRjYihlcnIsIGRhdGEpO1xuXHRcdFx0fSk7XG5cdFx0fSk7XG5cdH1cblxuXHRwdWJsaWMgcmVhZEZpbGVTeW5jKGZuYW1lOiBzdHJpbmcsIGVuY29kaW5nOiBzdHJpbmcsIGZsYWc6IEZpbGVGbGFnLCBjcmVkOiBDcmVkKTogYW55IHtcblx0XHRpZiAodGhpcy5fbXUuaXNMb2NrZWQoKSkge1xuXHRcdFx0dGhyb3cgbmV3IEVycm9yKCdpbnZhbGlkIHN5bmMgY2FsbCcpO1xuXHRcdH1cblx0XHRyZXR1cm4gdGhpcy5fZnMucmVhZEZpbGVTeW5jKGZuYW1lLCBlbmNvZGluZywgZmxhZywgY3JlZCk7XG5cdH1cblxuXHRwdWJsaWMgd3JpdGVGaWxlKGZuYW1lOiBzdHJpbmcsIGRhdGE6IGFueSwgZW5jb2Rpbmc6IHN0cmluZywgZmxhZzogRmlsZUZsYWcsIG1vZGU6IG51bWJlciwgY3JlZDogQ3JlZCwgY2I6IEJGU09uZUFyZ0NhbGxiYWNrKTogdm9pZCB7XG5cdFx0dGhpcy5fbXUubG9jaygoKSA9PiB7XG5cdFx0XHR0aGlzLl9mcy53cml0ZUZpbGUoZm5hbWUsIGRhdGEsIGVuY29kaW5nLCBmbGFnLCBtb2RlLCBjcmVkLCAoZXJyPzogQXBpRXJyb3IpID0+IHtcblx0XHRcdFx0dGhpcy5fbXUudW5sb2NrKCk7XG5cdFx0XHRcdGNiKGVycik7XG5cdFx0XHR9KTtcblx0XHR9KTtcblx0fVxuXG5cdHB1YmxpYyB3cml0ZUZpbGVTeW5jKGZuYW1lOiBzdHJpbmcsIGRhdGE6IGFueSwgZW5jb2Rpbmc6IHN0cmluZywgZmxhZzogRmlsZUZsYWcsIG1vZGU6IG51bWJlciwgY3JlZDogQ3JlZCk6IHZvaWQge1xuXHRcdGlmICh0aGlzLl9tdS5pc0xvY2tlZCgpKSB7XG5cdFx0XHR0aHJvdyBuZXcgRXJyb3IoJ2ludmFsaWQgc3luYyBjYWxsJyk7XG5cdFx0fVxuXHRcdHJldHVybiB0aGlzLl9mcy53cml0ZUZpbGVTeW5jKGZuYW1lLCBkYXRhLCBlbmNvZGluZywgZmxhZywgbW9kZSwgY3JlZCk7XG5cdH1cblxuXHRwdWJsaWMgYXBwZW5kRmlsZShmbmFtZTogc3RyaW5nLCBkYXRhOiBhbnksIGVuY29kaW5nOiBzdHJpbmcsIGZsYWc6IEZpbGVGbGFnLCBtb2RlOiBudW1iZXIsIGNyZWQ6IENyZWQsIGNiOiBCRlNPbmVBcmdDYWxsYmFjayk6IHZvaWQge1xuXHRcdHRoaXMuX211LmxvY2soKCkgPT4ge1xuXHRcdFx0dGhpcy5fZnMuYXBwZW5kRmlsZShmbmFtZSwgZGF0YSwgZW5jb2RpbmcsIGZsYWcsIG1vZGUsIGNyZWQsIChlcnI/OiBBcGlFcnJvcikgPT4ge1xuXHRcdFx0XHR0aGlzLl9tdS51bmxvY2soKTtcblx0XHRcdFx0Y2IoZXJyKTtcblx0XHRcdH0pO1xuXHRcdH0pO1xuXHR9XG5cblx0cHVibGljIGFwcGVuZEZpbGVTeW5jKGZuYW1lOiBzdHJpbmcsIGRhdGE6IGFueSwgZW5jb2Rpbmc6IHN0cmluZywgZmxhZzogRmlsZUZsYWcsIG1vZGU6IG51bWJlciwgY3JlZDogQ3JlZCk6IHZvaWQge1xuXHRcdGlmICh0aGlzLl9tdS5pc0xvY2tlZCgpKSB7XG5cdFx0XHR0aHJvdyBuZXcgRXJyb3IoJ2ludmFsaWQgc3luYyBjYWxsJyk7XG5cdFx0fVxuXHRcdHJldHVybiB0aGlzLl9mcy5hcHBlbmRGaWxlU3luYyhmbmFtZSwgZGF0YSwgZW5jb2RpbmcsIGZsYWcsIG1vZGUsIGNyZWQpO1xuXHR9XG5cblx0cHVibGljIGNobW9kKHA6IHN0cmluZywgaXNMY2htb2Q6IGJvb2xlYW4sIG1vZGU6IG51bWJlciwgY3JlZDogQ3JlZCwgY2I6IEJGU09uZUFyZ0NhbGxiYWNrKTogdm9pZCB7XG5cdFx0dGhpcy5fbXUubG9jaygoKSA9PiB7XG5cdFx0XHR0aGlzLl9mcy5jaG1vZChwLCBpc0xjaG1vZCwgbW9kZSwgY3JlZCwgKGVycj86IEFwaUVycm9yKSA9PiB7XG5cdFx0XHRcdHRoaXMuX211LnVubG9jaygpO1xuXHRcdFx0XHRjYihlcnIpO1xuXHRcdFx0fSk7XG5cdFx0fSk7XG5cdH1cblxuXHRwdWJsaWMgY2htb2RTeW5jKHA6IHN0cmluZywgaXNMY2htb2Q6IGJvb2xlYW4sIG1vZGU6IG51bWJlciwgY3JlZDogQ3JlZCk6IHZvaWQge1xuXHRcdGlmICh0aGlzLl9tdS5pc0xvY2tlZCgpKSB7XG5cdFx0XHR0aHJvdyBuZXcgRXJyb3IoJ2ludmFsaWQgc3luYyBjYWxsJyk7XG5cdFx0fVxuXHRcdHJldHVybiB0aGlzLl9mcy5jaG1vZFN5bmMocCwgaXNMY2htb2QsIG1vZGUsIGNyZWQpO1xuXHR9XG5cblx0cHVibGljIGNob3duKHA6IHN0cmluZywgaXNMY2hvd246IGJvb2xlYW4sIG5ld191aWQ6IG51bWJlciwgbmV3X2dpZDogbnVtYmVyLCBjcmVkOiBDcmVkLCBjYjogQkZTT25lQXJnQ2FsbGJhY2spOiB2b2lkIHtcblx0XHR0aGlzLl9tdS5sb2NrKCgpID0+IHtcblx0XHRcdHRoaXMuX2ZzLmNob3duKHAsIGlzTGNob3duLCBuZXdfdWlkLCBuZXdfZ2lkLCBjcmVkLCAoZXJyPzogQXBpRXJyb3IpID0+IHtcblx0XHRcdFx0dGhpcy5fbXUudW5sb2NrKCk7XG5cdFx0XHRcdGNiKGVycik7XG5cdFx0XHR9KTtcblx0XHR9KTtcblx0fVxuXG5cdHB1YmxpYyBjaG93blN5bmMocDogc3RyaW5nLCBpc0xjaG93bjogYm9vbGVhbiwgbmV3X3VpZDogbnVtYmVyLCBuZXdfZ2lkOiBudW1iZXIsIGNyZWQ6IENyZWQpOiB2b2lkIHtcblx0XHRpZiAodGhpcy5fbXUuaXNMb2NrZWQoKSkge1xuXHRcdFx0dGhyb3cgbmV3IEVycm9yKCdpbnZhbGlkIHN5bmMgY2FsbCcpO1xuXHRcdH1cblx0XHRyZXR1cm4gdGhpcy5fZnMuY2hvd25TeW5jKHAsIGlzTGNob3duLCBuZXdfdWlkLCBuZXdfZ2lkLCBjcmVkKTtcblx0fVxuXG5cdHB1YmxpYyB1dGltZXMocDogc3RyaW5nLCBhdGltZTogRGF0ZSwgbXRpbWU6IERhdGUsIGNyZWQ6IENyZWQsIGNiOiBCRlNPbmVBcmdDYWxsYmFjayk6IHZvaWQge1xuXHRcdHRoaXMuX211LmxvY2soKCkgPT4ge1xuXHRcdFx0dGhpcy5fZnMudXRpbWVzKHAsIGF0aW1lLCBtdGltZSwgY3JlZCwgKGVycj86IEFwaUVycm9yKSA9PiB7XG5cdFx0XHRcdHRoaXMuX211LnVubG9jaygpO1xuXHRcdFx0XHRjYihlcnIpO1xuXHRcdFx0fSk7XG5cdFx0fSk7XG5cdH1cblxuXHRwdWJsaWMgdXRpbWVzU3luYyhwOiBzdHJpbmcsIGF0aW1lOiBEYXRlLCBtdGltZTogRGF0ZSwgY3JlZDogQ3JlZCk6IHZvaWQge1xuXHRcdGlmICh0aGlzLl9tdS5pc0xvY2tlZCgpKSB7XG5cdFx0XHR0aHJvdyBuZXcgRXJyb3IoJ2ludmFsaWQgc3luYyBjYWxsJyk7XG5cdFx0fVxuXHRcdHJldHVybiB0aGlzLl9mcy51dGltZXNTeW5jKHAsIGF0aW1lLCBtdGltZSwgY3JlZCk7XG5cdH1cblxuXHRwdWJsaWMgbGluayhzcmNwYXRoOiBzdHJpbmcsIGRzdHBhdGg6IHN0cmluZywgY3JlZDogQ3JlZCwgY2I6IEJGU09uZUFyZ0NhbGxiYWNrKTogdm9pZCB7XG5cdFx0dGhpcy5fbXUubG9jaygoKSA9PiB7XG5cdFx0XHR0aGlzLl9mcy5saW5rKHNyY3BhdGgsIGRzdHBhdGgsIGNyZWQsIChlcnI/OiBBcGlFcnJvcikgPT4ge1xuXHRcdFx0XHR0aGlzLl9tdS51bmxvY2soKTtcblx0XHRcdFx0Y2IoZXJyKTtcblx0XHRcdH0pO1xuXHRcdH0pO1xuXHR9XG5cblx0cHVibGljIGxpbmtTeW5jKHNyY3BhdGg6IHN0cmluZywgZHN0cGF0aDogc3RyaW5nLCBjcmVkOiBDcmVkKTogdm9pZCB7XG5cdFx0aWYgKHRoaXMuX211LmlzTG9ja2VkKCkpIHtcblx0XHRcdHRocm93IG5ldyBFcnJvcignaW52YWxpZCBzeW5jIGNhbGwnKTtcblx0XHR9XG5cdFx0cmV0dXJuIHRoaXMuX2ZzLmxpbmtTeW5jKHNyY3BhdGgsIGRzdHBhdGgsIGNyZWQpO1xuXHR9XG5cblx0cHVibGljIHN5bWxpbmsoc3JjcGF0aDogc3RyaW5nLCBkc3RwYXRoOiBzdHJpbmcsIHR5cGU6IHN0cmluZywgY3JlZDogQ3JlZCwgY2I6IEJGU09uZUFyZ0NhbGxiYWNrKTogdm9pZCB7XG5cdFx0dGhpcy5fbXUubG9jaygoKSA9PiB7XG5cdFx0XHR0aGlzLl9mcy5zeW1saW5rKHNyY3BhdGgsIGRzdHBhdGgsIHR5cGUsIGNyZWQsIChlcnI/OiBBcGlFcnJvcikgPT4ge1xuXHRcdFx0XHR0aGlzLl9tdS51bmxvY2soKTtcblx0XHRcdFx0Y2IoZXJyKTtcblx0XHRcdH0pO1xuXHRcdH0pO1xuXHR9XG5cblx0cHVibGljIHN5bWxpbmtTeW5jKHNyY3BhdGg6IHN0cmluZywgZHN0cGF0aDogc3RyaW5nLCB0eXBlOiBzdHJpbmcsIGNyZWQ6IENyZWQpOiB2b2lkIHtcblx0XHRpZiAodGhpcy5fbXUuaXNMb2NrZWQoKSkge1xuXHRcdFx0dGhyb3cgbmV3IEVycm9yKCdpbnZhbGlkIHN5bmMgY2FsbCcpO1xuXHRcdH1cblx0XHRyZXR1cm4gdGhpcy5fZnMuc3ltbGlua1N5bmMoc3JjcGF0aCwgZHN0cGF0aCwgdHlwZSwgY3JlZCk7XG5cdH1cblxuXHRwdWJsaWMgcmVhZGxpbmsocDogc3RyaW5nLCBjcmVkOiBDcmVkLCBjYjogQkZTQ2FsbGJhY2s8c3RyaW5nPik6IHZvaWQge1xuXHRcdHRoaXMuX211LmxvY2soKCkgPT4ge1xuXHRcdFx0dGhpcy5fZnMucmVhZGxpbmsocCwgY3JlZCwgKGVycj86IEFwaUVycm9yLCBsaW5rU3RyaW5nPzogc3RyaW5nKSA9PiB7XG5cdFx0XHRcdHRoaXMuX211LnVubG9jaygpO1xuXHRcdFx0XHRjYihlcnIsIGxpbmtTdHJpbmcpO1xuXHRcdFx0fSk7XG5cdFx0fSk7XG5cdH1cblxuXHRwdWJsaWMgcmVhZGxpbmtTeW5jKHA6IHN0cmluZywgY3JlZDogQ3JlZCk6IHN0cmluZyB7XG5cdFx0aWYgKHRoaXMuX211LmlzTG9ja2VkKCkpIHtcblx0XHRcdHRocm93IG5ldyBFcnJvcignaW52YWxpZCBzeW5jIGNhbGwnKTtcblx0XHR9XG5cdFx0cmV0dXJuIHRoaXMuX2ZzLnJlYWRsaW5rU3luYyhwLCBjcmVkKTtcblx0fVxufVxuIiwgImltcG9ydCB7IEZpbGVTeXN0ZW0sIEJhc2VGaWxlU3lzdGVtLCBCRlNPbmVBcmdDYWxsYmFjaywgQkZTQ2FsbGJhY2ssIEZpbGVTeXN0ZW1PcHRpb25zIH0gZnJvbSAnLi4vY29yZS9maWxlX3N5c3RlbSc7XG5pbXBvcnQgeyBBcGlFcnJvciwgRXJyb3JDb2RlIH0gZnJvbSAnLi4vY29yZS9hcGlfZXJyb3InO1xuaW1wb3J0IHsgRmlsZUZsYWcsIEFjdGlvblR5cGUgfSBmcm9tICcuLi9jb3JlL2ZpbGVfZmxhZyc7XG5pbXBvcnQgeyBGaWxlIH0gZnJvbSAnLi4vY29yZS9maWxlJztcbmltcG9ydCB7IGRlZmF1bHQgYXMgU3RhdHMgfSBmcm9tICcuLi9jb3JlL3N0YXRzJztcbmltcG9ydCBQcmVsb2FkRmlsZSBmcm9tICcuLi9nZW5lcmljL3ByZWxvYWRfZmlsZSc7XG5pbXBvcnQgTG9ja2VkRlMgZnJvbSAnLi4vZ2VuZXJpYy9sb2NrZWRfZnMnO1xuaW1wb3J0ICogYXMgcGF0aCBmcm9tICdwYXRoJztcbmltcG9ydCBDcmVkIGZyb20gJy4uL2NvcmUvY3JlZCc7XG5pbXBvcnQgdHlwZSB7IEJ1ZmZlciB9IGZyb20gJ2J1ZmZlcic7XG4vKipcbiAqIEBoaWRkZW5cbiAqL1xuY29uc3QgZGVsZXRpb25Mb2dQYXRoID0gJy8uZGVsZXRlZEZpbGVzLmxvZyc7XG5cbi8qKlxuICogR2l2ZW4gYSByZWFkLW9ubHkgbW9kZSwgbWFrZXMgaXQgd3JpdGFibGUuXG4gKiBAaGlkZGVuXG4gKi9cbmZ1bmN0aW9uIG1ha2VNb2RlV3JpdGFibGUobW9kZTogbnVtYmVyKTogbnVtYmVyIHtcblx0cmV0dXJuIDBvMjIyIHwgbW9kZTtcbn1cblxuLyoqXG4gKiBAaGlkZGVuXG4gKi9cbmZ1bmN0aW9uIGdldEZsYWcoZjogc3RyaW5nKTogRmlsZUZsYWcge1xuXHRyZXR1cm4gRmlsZUZsYWcuZ2V0RmlsZUZsYWcoZik7XG59XG5cbi8qKlxuICogT3ZlcmxheXMgYSBSTyBmaWxlIHRvIG1ha2UgaXQgd3JpdGFibGUuXG4gKi9cbmNsYXNzIE92ZXJsYXlGaWxlIGV4dGVuZHMgUHJlbG9hZEZpbGU8VW5sb2NrZWRPdmVybGF5RlM+IGltcGxlbWVudHMgRmlsZSB7XG5cdGNvbnN0cnVjdG9yKGZzOiBVbmxvY2tlZE92ZXJsYXlGUywgcGF0aDogc3RyaW5nLCBmbGFnOiBGaWxlRmxhZywgc3RhdHM6IFN0YXRzLCBkYXRhOiBCdWZmZXIpIHtcblx0XHRzdXBlcihmcywgcGF0aCwgZmxhZywgc3RhdHMsIGRhdGEpO1xuXHR9XG5cblx0cHVibGljIHN5bmMoY2I6IEJGU09uZUFyZ0NhbGxiYWNrKTogdm9pZCB7XG5cdFx0aWYgKCF0aGlzLmlzRGlydHkoKSkge1xuXHRcdFx0Y2IobnVsbCk7XG5cdFx0XHRyZXR1cm47XG5cdFx0fVxuXG5cdFx0dGhpcy5fZnMuX3N5bmNBc3luYyh0aGlzLCAoZXJyOiBBcGlFcnJvcikgPT4ge1xuXHRcdFx0dGhpcy5yZXNldERpcnR5KCk7XG5cdFx0XHRjYihlcnIpO1xuXHRcdH0pO1xuXHR9XG5cblx0cHVibGljIHN5bmNTeW5jKCk6IHZvaWQge1xuXHRcdGlmICh0aGlzLmlzRGlydHkoKSkge1xuXHRcdFx0dGhpcy5fZnMuX3N5bmNTeW5jKHRoaXMpO1xuXHRcdFx0dGhpcy5yZXNldERpcnR5KCk7XG5cdFx0fVxuXHR9XG5cblx0cHVibGljIGNsb3NlKGNiOiBCRlNPbmVBcmdDYWxsYmFjayk6IHZvaWQge1xuXHRcdHRoaXMuc3luYyhjYik7XG5cdH1cblxuXHRwdWJsaWMgY2xvc2VTeW5jKCk6IHZvaWQge1xuXHRcdHRoaXMuc3luY1N5bmMoKTtcblx0fVxufVxuXG4vKipcbiAqICpJTlRFUk5BTCwgRE8gTk9UIFVTRSBESVJFQ1RMWSEqXG4gKlxuICogQ29yZSBPdmVybGF5RlMgY2xhc3MgdGhhdCBjb250YWlucyBubyBsb2NraW5nIHdoYXRzb2V2ZXIuIFdlIHdyYXAgdGhlc2Ugb2JqZWN0c1xuICogaW4gYSBMb2NrZWRGUyB0byBwcmV2ZW50IHJhY2VzLlxuICovXG5leHBvcnQgY2xhc3MgVW5sb2NrZWRPdmVybGF5RlMgZXh0ZW5kcyBCYXNlRmlsZVN5c3RlbSBpbXBsZW1lbnRzIEZpbGVTeXN0ZW0ge1xuXHRwdWJsaWMgc3RhdGljIGlzQXZhaWxhYmxlKCk6IGJvb2xlYW4ge1xuXHRcdHJldHVybiB0cnVlO1xuXHR9XG5cblx0cHJpdmF0ZSBfd3JpdGFibGU6IEZpbGVTeXN0ZW07XG5cdHByaXZhdGUgX3JlYWRhYmxlOiBGaWxlU3lzdGVtO1xuXHRwcml2YXRlIF9pc0luaXRpYWxpemVkOiBib29sZWFuID0gZmFsc2U7XG5cdHByaXZhdGUgX2luaXRpYWxpemVDYWxsYmFja3M6IEJGU09uZUFyZ0NhbGxiYWNrW10gPSBbXTtcblx0cHJpdmF0ZSBfZGVsZXRlZEZpbGVzOiB7IFtwYXRoOiBzdHJpbmddOiBib29sZWFuIH0gPSB7fTtcblx0cHJpdmF0ZSBfZGVsZXRlTG9nOiBzdHJpbmcgPSAnJztcblx0Ly8gSWYgJ3RydWUnLCB3ZSBoYXZlIHNjaGVkdWxlZCBhIGRlbGV0ZSBsb2cgdXBkYXRlLlxuXHRwcml2YXRlIF9kZWxldGVMb2dVcGRhdGVQZW5kaW5nOiBib29sZWFuID0gZmFsc2U7XG5cdC8vIElmICd0cnVlJywgYSBkZWxldGUgbG9nIHVwZGF0ZSBpcyBuZWVkZWQgYWZ0ZXIgdGhlIHNjaGVkdWxlZCBkZWxldGUgbG9nXG5cdC8vIHVwZGF0ZSBmaW5pc2hlcy5cblx0cHJpdmF0ZSBfZGVsZXRlTG9nVXBkYXRlTmVlZGVkOiBib29sZWFuID0gZmFsc2U7XG5cdC8vIElmIHRoZXJlIHdhcyBhbiBlcnJvciB1cGRhdGluZyB0aGUgZGVsZXRlIGxvZy4uLlxuXHRwcml2YXRlIF9kZWxldGVMb2dFcnJvcjogQXBpRXJyb3IgfCBudWxsID0gbnVsbDtcblxuXHRjb25zdHJ1Y3Rvcih3cml0YWJsZTogRmlsZVN5c3RlbSwgcmVhZGFibGU6IEZpbGVTeXN0ZW0pIHtcblx0XHRzdXBlcigpO1xuXHRcdHRoaXMuX3dyaXRhYmxlID0gd3JpdGFibGU7XG5cdFx0dGhpcy5fcmVhZGFibGUgPSByZWFkYWJsZTtcblx0XHRpZiAodGhpcy5fd3JpdGFibGUuaXNSZWFkT25seSgpKSB7XG5cdFx0XHR0aHJvdyBuZXcgQXBpRXJyb3IoRXJyb3JDb2RlLkVJTlZBTCwgJ1dyaXRhYmxlIGZpbGUgc3lzdGVtIG11c3QgYmUgd3JpdGFibGUuJyk7XG5cdFx0fVxuXHR9XG5cblx0cHVibGljIGdldE92ZXJsYXllZEZpbGVTeXN0ZW1zKCk6IHsgcmVhZGFibGU6IEZpbGVTeXN0ZW07IHdyaXRhYmxlOiBGaWxlU3lzdGVtIH0ge1xuXHRcdHJldHVybiB7XG5cdFx0XHRyZWFkYWJsZTogdGhpcy5fcmVhZGFibGUsXG5cdFx0XHR3cml0YWJsZTogdGhpcy5fd3JpdGFibGUsXG5cdFx0fTtcblx0fVxuXG5cdHB1YmxpYyBfc3luY0FzeW5jKGZpbGU6IFByZWxvYWRGaWxlPFVubG9ja2VkT3ZlcmxheUZTPiwgY2I6IEJGU09uZUFyZ0NhbGxiYWNrKTogdm9pZCB7XG5cdFx0Y29uc3Qgc3RhdHMgPSBmaWxlLmdldFN0YXRzKCk7XG5cdFx0dGhpcy5jcmVhdGVQYXJlbnREaXJlY3Rvcmllc0FzeW5jKGZpbGUuZ2V0UGF0aCgpLCBzdGF0cy5nZXRDcmVkKDAsIDApLCAoZXJyPzogQXBpRXJyb3IpID0+IHtcblx0XHRcdGlmIChlcnIpIHtcblx0XHRcdFx0cmV0dXJuIGNiKGVycik7XG5cdFx0XHR9XG5cdFx0XHR0aGlzLl93cml0YWJsZS53cml0ZUZpbGUoZmlsZS5nZXRQYXRoKCksIGZpbGUuZ2V0QnVmZmVyKCksIG51bGwsIGdldEZsYWcoJ3cnKSwgc3RhdHMubW9kZSwgc3RhdHMuZ2V0Q3JlZCgwLCAwKSwgY2IpO1xuXHRcdH0pO1xuXHR9XG5cblx0cHVibGljIF9zeW5jU3luYyhmaWxlOiBQcmVsb2FkRmlsZTxVbmxvY2tlZE92ZXJsYXlGUz4pOiB2b2lkIHtcblx0XHRjb25zdCBzdGF0cyA9IGZpbGUuZ2V0U3RhdHMoKTtcblx0XHR0aGlzLmNyZWF0ZVBhcmVudERpcmVjdG9yaWVzKGZpbGUuZ2V0UGF0aCgpLCBzdGF0cy5nZXRDcmVkKDAsIDApKTtcblx0XHR0aGlzLl93cml0YWJsZS53cml0ZUZpbGVTeW5jKGZpbGUuZ2V0UGF0aCgpLCBmaWxlLmdldEJ1ZmZlcigpLCBudWxsLCBnZXRGbGFnKCd3JyksIHN0YXRzLm1vZGUsIHN0YXRzLmdldENyZWQoMCwgMCkpO1xuXHR9XG5cblx0cHVibGljIGdldE5hbWUoKSB7XG5cdFx0cmV0dXJuIE92ZXJsYXlGUy5OYW1lO1xuXHR9XG5cblx0LyoqXG5cdCAqICoqSU5URVJOQUwgTUVUSE9EKipcblx0ICpcblx0ICogQ2FsbGVkIG9uY2UgdG8gbG9hZCB1cCBtZXRhZGF0YSBzdG9yZWQgb24gdGhlIHdyaXRhYmxlIGZpbGUgc3lzdGVtLlxuXHQgKi9cblx0cHVibGljIF9pbml0aWFsaXplKGNiOiBCRlNPbmVBcmdDYWxsYmFjayk6IHZvaWQge1xuXHRcdGNvbnN0IGNhbGxiYWNrQXJyYXkgPSB0aGlzLl9pbml0aWFsaXplQ2FsbGJhY2tzO1xuXG5cdFx0Y29uc3QgZW5kID0gKGU/OiBBcGlFcnJvcik6IHZvaWQgPT4ge1xuXHRcdFx0dGhpcy5faXNJbml0aWFsaXplZCA9ICFlO1xuXHRcdFx0dGhpcy5faW5pdGlhbGl6ZUNhbGxiYWNrcyA9IFtdO1xuXHRcdFx0Y2FsbGJhY2tBcnJheS5mb3JFYWNoKGNiID0+IGNiKGUpKTtcblx0XHR9O1xuXG5cdFx0Ly8gaWYgd2UncmUgYWxyZWFkeSBpbml0aWFsaXplZCwgaW1tZWRpYXRlbHkgaW52b2tlIHRoZSBjYWxsYmFja1xuXHRcdGlmICh0aGlzLl9pc0luaXRpYWxpemVkKSB7XG5cdFx0XHRyZXR1cm4gY2IoKTtcblx0XHR9XG5cblx0XHRjYWxsYmFja0FycmF5LnB1c2goY2IpO1xuXHRcdC8vIFRoZSBmaXJzdCBjYWxsIHRvIGluaXRpYWxpemUgaW5pdGlhbGl6ZXMsIHRoZSByZXN0IHdhaXQgZm9yIGl0IHRvIGNvbXBsZXRlLlxuXHRcdGlmIChjYWxsYmFja0FycmF5Lmxlbmd0aCAhPT0gMSkge1xuXHRcdFx0cmV0dXJuO1xuXHRcdH1cblxuXHRcdC8vIFJlYWQgZGVsZXRpb24gbG9nLCBwcm9jZXNzIGludG8gbWV0YWRhdGEuXG5cdFx0dGhpcy5fd3JpdGFibGUucmVhZEZpbGUoZGVsZXRpb25Mb2dQYXRoLCAndXRmOCcsIGdldEZsYWcoJ3InKSwgQ3JlZC5Sb290LCAoZXJyOiBBcGlFcnJvciwgZGF0YT86IHN0cmluZykgPT4ge1xuXHRcdFx0aWYgKGVycikge1xuXHRcdFx0XHQvLyBFTk9FTlQgPT09IE5ld2x5LWluc3RhbnRpYXRlZCBmaWxlIHN5c3RlbSwgYW5kIHRodXMgZW1wdHkgbG9nLlxuXHRcdFx0XHRpZiAoZXJyLmVycm5vICE9PSBFcnJvckNvZGUuRU5PRU5UKSB7XG5cdFx0XHRcdFx0cmV0dXJuIGVuZChlcnIpO1xuXHRcdFx0XHR9XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHR0aGlzLl9kZWxldGVMb2cgPSBkYXRhITtcblx0XHRcdH1cblx0XHRcdHRoaXMuX3JlcGFyc2VEZWxldGlvbkxvZygpO1xuXHRcdFx0ZW5kKCk7XG5cdFx0fSk7XG5cdH1cblxuXHRwdWJsaWMgaXNSZWFkT25seSgpOiBib29sZWFuIHtcblx0XHRyZXR1cm4gZmFsc2U7XG5cdH1cblx0cHVibGljIHN1cHBvcnRzU3luY2goKTogYm9vbGVhbiB7XG5cdFx0cmV0dXJuIHRoaXMuX3JlYWRhYmxlLnN1cHBvcnRzU3luY2goKSAmJiB0aGlzLl93cml0YWJsZS5zdXBwb3J0c1N5bmNoKCk7XG5cdH1cblx0cHVibGljIHN1cHBvcnRzTGlua3MoKTogYm9vbGVhbiB7XG5cdFx0cmV0dXJuIGZhbHNlO1xuXHR9XG5cdHB1YmxpYyBzdXBwb3J0c1Byb3BzKCk6IGJvb2xlYW4ge1xuXHRcdHJldHVybiB0aGlzLl9yZWFkYWJsZS5zdXBwb3J0c1Byb3BzKCkgJiYgdGhpcy5fd3JpdGFibGUuc3VwcG9ydHNQcm9wcygpO1xuXHR9XG5cblx0cHVibGljIGdldERlbGV0aW9uTG9nKCk6IHN0cmluZyB7XG5cdFx0cmV0dXJuIHRoaXMuX2RlbGV0ZUxvZztcblx0fVxuXG5cdHB1YmxpYyByZXN0b3JlRGVsZXRpb25Mb2cobG9nOiBzdHJpbmcsIGNyZWQ6IENyZWQpOiB2b2lkIHtcblx0XHR0aGlzLl9kZWxldGVMb2cgPSBsb2c7XG5cdFx0dGhpcy5fcmVwYXJzZURlbGV0aW9uTG9nKCk7XG5cdFx0dGhpcy51cGRhdGVMb2coJycsIGNyZWQpO1xuXHR9XG5cblx0cHVibGljIHJlbmFtZShvbGRQYXRoOiBzdHJpbmcsIG5ld1BhdGg6IHN0cmluZywgY3JlZDogQ3JlZCwgY2I6IEJGU09uZUFyZ0NhbGxiYWNrKTogdm9pZCB7XG5cdFx0aWYgKCF0aGlzLmNoZWNrSW5pdEFzeW5jKGNiKSB8fCB0aGlzLmNoZWNrUGF0aEFzeW5jKG9sZFBhdGgsIGNiKSB8fCB0aGlzLmNoZWNrUGF0aEFzeW5jKG5ld1BhdGgsIGNiKSkge1xuXHRcdFx0cmV0dXJuO1xuXHRcdH1cblxuXHRcdGlmIChvbGRQYXRoID09PSBkZWxldGlvbkxvZ1BhdGggfHwgbmV3UGF0aCA9PT0gZGVsZXRpb25Mb2dQYXRoKSB7XG5cdFx0XHRyZXR1cm4gY2IoQXBpRXJyb3IuRVBFUk0oJ0Nhbm5vdCByZW5hbWUgZGVsZXRpb24gbG9nLicpKTtcblx0XHR9XG5cblx0XHQvLyBub3RoaW5nIHRvIGRvIGlmIHBhdGhzIG1hdGNoXG5cdFx0aWYgKG9sZFBhdGggPT09IG5ld1BhdGgpIHtcblx0XHRcdHJldHVybiBjYigpO1xuXHRcdH1cblxuXHRcdHRoaXMuc3RhdChvbGRQYXRoLCBmYWxzZSwgY3JlZCwgKG9sZEVycjogQXBpRXJyb3IsIG9sZFN0YXRzPzogU3RhdHMpID0+IHtcblx0XHRcdGlmIChvbGRFcnIpIHtcblx0XHRcdFx0cmV0dXJuIGNiKG9sZEVycik7XG5cdFx0XHR9XG5cblx0XHRcdHJldHVybiB0aGlzLnN0YXQobmV3UGF0aCwgZmFsc2UsIGNyZWQsIChuZXdFcnI6IEFwaUVycm9yLCBuZXdTdGF0cz86IFN0YXRzKSA9PiB7XG5cdFx0XHRcdGNvbnN0IHNlbGYgPSB0aGlzO1xuXHRcdFx0XHQvLyBwcmVjb25kaXRpb246IGJvdGggb2xkUGF0aCBhbmQgbmV3UGF0aCBleGlzdCBhbmQgYXJlIGRpcnMuXG5cdFx0XHRcdC8vIGRlY3JlYXNlczogfGZpbGVzfFxuXHRcdFx0XHQvLyBOZWVkIHRvIG1vdmUgKmV2ZXJ5IGZpbGUvZm9sZGVyKiBjdXJyZW50bHkgc3RvcmVkIG9uXG5cdFx0XHRcdC8vIHJlYWRhYmxlIHRvIGl0cyBuZXcgbG9jYXRpb24gb24gd3JpdGFibGUuXG5cdFx0XHRcdGZ1bmN0aW9uIGNvcHlEaXJDb250ZW50cyhmaWxlczogc3RyaW5nW10pOiB2b2lkIHtcblx0XHRcdFx0XHRjb25zdCBmaWxlID0gZmlsZXMuc2hpZnQoKTtcblx0XHRcdFx0XHRpZiAoIWZpbGUpIHtcblx0XHRcdFx0XHRcdHJldHVybiBjYigpO1xuXHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdGNvbnN0IG9sZEZpbGUgPSBwYXRoLnJlc29sdmUob2xkUGF0aCwgZmlsZSk7XG5cdFx0XHRcdFx0Y29uc3QgbmV3RmlsZSA9IHBhdGgucmVzb2x2ZShuZXdQYXRoLCBmaWxlKTtcblxuXHRcdFx0XHRcdC8vIFJlY3Vyc2lvbiEgU2hvdWxkIHdvcmsgZm9yIGFueSBuZXN0ZWQgZmlsZXMgLyBmb2xkZXJzLlxuXHRcdFx0XHRcdHNlbGYucmVuYW1lKG9sZEZpbGUsIG5ld0ZpbGUsIGNyZWQsIChlcnI/OiBBcGlFcnJvcikgPT4ge1xuXHRcdFx0XHRcdFx0aWYgKGVycikge1xuXHRcdFx0XHRcdFx0XHRyZXR1cm4gY2IoZXJyKTtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdGNvcHlEaXJDb250ZW50cyhmaWxlcyk7XG5cdFx0XHRcdFx0fSk7XG5cdFx0XHRcdH1cblxuXHRcdFx0XHRsZXQgbW9kZSA9IDBvNzc3O1xuXG5cdFx0XHRcdC8vIGZyb20gbGludXgncyByZW5hbWUoMikgbWFucGFnZTogb2xkcGF0aCBjYW4gc3BlY2lmeSBhXG5cdFx0XHRcdC8vIGRpcmVjdG9yeS4gIEluIHRoaXMgY2FzZSwgbmV3cGF0aCBtdXN0IGVpdGhlciBub3QgZXhpc3QsIG9yXG5cdFx0XHRcdC8vIGl0IG11c3Qgc3BlY2lmeSBhbiBlbXB0eSBkaXJlY3RvcnkuXG5cdFx0XHRcdGlmIChvbGRTdGF0cyEuaXNEaXJlY3RvcnkoKSkge1xuXHRcdFx0XHRcdGlmIChuZXdFcnIpIHtcblx0XHRcdFx0XHRcdGlmIChuZXdFcnIuZXJybm8gIT09IEVycm9yQ29kZS5FTk9FTlQpIHtcblx0XHRcdFx0XHRcdFx0cmV0dXJuIGNiKG5ld0Vycik7XG5cdFx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHRcdHJldHVybiB0aGlzLl93cml0YWJsZS5leGlzdHMob2xkUGF0aCwgY3JlZCwgKGV4aXN0czogYm9vbGVhbikgPT4ge1xuXHRcdFx0XHRcdFx0XHQvLyBzaW1wbGUgY2FzZSAtIGJvdGggb2xkIGFuZCBuZXcgYXJlIG9uIHRoZSB3cml0YWJsZSBsYXllclxuXHRcdFx0XHRcdFx0XHRpZiAoZXhpc3RzKSB7XG5cdFx0XHRcdFx0XHRcdFx0cmV0dXJuIHRoaXMuX3dyaXRhYmxlLnJlbmFtZShvbGRQYXRoLCBuZXdQYXRoLCBjcmVkLCBjYik7XG5cdFx0XHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdFx0XHR0aGlzLl93cml0YWJsZS5ta2RpcihuZXdQYXRoLCBtb2RlLCBjcmVkLCAobWtkaXJFcnI/OiBBcGlFcnJvcikgPT4ge1xuXHRcdFx0XHRcdFx0XHRcdGlmIChta2RpckVycikge1xuXHRcdFx0XHRcdFx0XHRcdFx0cmV0dXJuIGNiKG1rZGlyRXJyKTtcblx0XHRcdFx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHRcdFx0XHR0aGlzLl9yZWFkYWJsZS5yZWFkZGlyKG9sZFBhdGgsIGNyZWQsIChlcnI6IEFwaUVycm9yLCBmaWxlcz86IHN0cmluZ1tdKSA9PiB7XG5cdFx0XHRcdFx0XHRcdFx0XHRpZiAoZXJyKSB7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdHJldHVybiBjYigpO1xuXHRcdFx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0XHRcdFx0Y29weURpckNvbnRlbnRzKGZpbGVzISk7XG5cdFx0XHRcdFx0XHRcdFx0fSk7XG5cdFx0XHRcdFx0XHRcdH0pO1xuXHRcdFx0XHRcdFx0fSk7XG5cdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0bW9kZSA9IG5ld1N0YXRzIS5tb2RlO1xuXHRcdFx0XHRcdGlmICghbmV3U3RhdHMhLmlzRGlyZWN0b3J5KCkpIHtcblx0XHRcdFx0XHRcdHJldHVybiBjYihBcGlFcnJvci5FTk9URElSKG5ld1BhdGgpKTtcblx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHR0aGlzLnJlYWRkaXIobmV3UGF0aCwgY3JlZCwgKHJlYWRkaXJFcnI6IEFwaUVycm9yLCBmaWxlcz86IHN0cmluZ1tdKSA9PiB7XG5cdFx0XHRcdFx0XHRpZiAoZmlsZXMgJiYgZmlsZXMubGVuZ3RoKSB7XG5cdFx0XHRcdFx0XHRcdHJldHVybiBjYihBcGlFcnJvci5FTk9URU1QVFkobmV3UGF0aCkpO1xuXHRcdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0XHR0aGlzLl9yZWFkYWJsZS5yZWFkZGlyKG9sZFBhdGgsIGNyZWQsIChlcnI6IEFwaUVycm9yLCBmaWxlcz86IHN0cmluZ1tdKSA9PiB7XG5cdFx0XHRcdFx0XHRcdGlmIChlcnIpIHtcblx0XHRcdFx0XHRcdFx0XHRyZXR1cm4gY2IoKTtcblx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0XHRjb3B5RGlyQ29udGVudHMoZmlsZXMhKTtcblx0XHRcdFx0XHRcdH0pO1xuXHRcdFx0XHRcdH0pO1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0aWYgKG5ld1N0YXRzICYmIG5ld1N0YXRzLmlzRGlyZWN0b3J5KCkpIHtcblx0XHRcdFx0XHRyZXR1cm4gY2IoQXBpRXJyb3IuRUlTRElSKG5ld1BhdGgpKTtcblx0XHRcdFx0fVxuXG5cdFx0XHRcdHRoaXMucmVhZEZpbGUob2xkUGF0aCwgbnVsbCwgZ2V0RmxhZygncicpLCBjcmVkLCAoZXJyOiBBcGlFcnJvciwgZGF0YT86IGFueSkgPT4ge1xuXHRcdFx0XHRcdGlmIChlcnIpIHtcblx0XHRcdFx0XHRcdHJldHVybiBjYihlcnIpO1xuXHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdHJldHVybiB0aGlzLndyaXRlRmlsZShuZXdQYXRoLCBkYXRhLCBudWxsLCBnZXRGbGFnKCd3JyksIG9sZFN0YXRzIS5tb2RlLCBjcmVkLCAoZXJyOiBBcGlFcnJvcikgPT4ge1xuXHRcdFx0XHRcdFx0aWYgKGVycikge1xuXHRcdFx0XHRcdFx0XHRyZXR1cm4gY2IoZXJyKTtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdHJldHVybiB0aGlzLnVubGluayhvbGRQYXRoLCBjcmVkLCBjYik7XG5cdFx0XHRcdFx0fSk7XG5cdFx0XHRcdH0pO1xuXHRcdFx0fSk7XG5cdFx0fSk7XG5cdH1cblxuXHRwdWJsaWMgcmVuYW1lU3luYyhvbGRQYXRoOiBzdHJpbmcsIG5ld1BhdGg6IHN0cmluZywgY3JlZDogQ3JlZCk6IHZvaWQge1xuXHRcdHRoaXMuY2hlY2tJbml0aWFsaXplZCgpO1xuXHRcdHRoaXMuY2hlY2tQYXRoKG9sZFBhdGgpO1xuXHRcdHRoaXMuY2hlY2tQYXRoKG5ld1BhdGgpO1xuXHRcdGlmIChvbGRQYXRoID09PSBkZWxldGlvbkxvZ1BhdGggfHwgbmV3UGF0aCA9PT0gZGVsZXRpb25Mb2dQYXRoKSB7XG5cdFx0XHR0aHJvdyBBcGlFcnJvci5FUEVSTSgnQ2Fubm90IHJlbmFtZSBkZWxldGlvbiBsb2cuJyk7XG5cdFx0fVxuXHRcdC8vIFdyaXRlIG5ld1BhdGggdXNpbmcgb2xkUGF0aCdzIGNvbnRlbnRzLCBkZWxldGUgb2xkUGF0aC5cblx0XHRjb25zdCBvbGRTdGF0cyA9IHRoaXMuc3RhdFN5bmMob2xkUGF0aCwgZmFsc2UsIGNyZWQpO1xuXHRcdGlmIChvbGRTdGF0cy5pc0RpcmVjdG9yeSgpKSB7XG5cdFx0XHQvLyBPcHRpbWl6YXRpb246IERvbid0IGJvdGhlciBtb3ZpbmcgaWYgb2xkID09PSBuZXcuXG5cdFx0XHRpZiAob2xkUGF0aCA9PT0gbmV3UGF0aCkge1xuXHRcdFx0XHRyZXR1cm47XG5cdFx0XHR9XG5cblx0XHRcdGxldCBtb2RlID0gMG83Nzc7XG5cdFx0XHRpZiAodGhpcy5leGlzdHNTeW5jKG5ld1BhdGgsIGNyZWQpKSB7XG5cdFx0XHRcdGNvbnN0IHN0YXRzID0gdGhpcy5zdGF0U3luYyhuZXdQYXRoLCBmYWxzZSwgY3JlZCk7XG5cdFx0XHRcdG1vZGUgPSBzdGF0cy5tb2RlO1xuXHRcdFx0XHRpZiAoc3RhdHMuaXNEaXJlY3RvcnkoKSkge1xuXHRcdFx0XHRcdGlmICh0aGlzLnJlYWRkaXJTeW5jKG5ld1BhdGgsIGNyZWQpLmxlbmd0aCA+IDApIHtcblx0XHRcdFx0XHRcdHRocm93IEFwaUVycm9yLkVOT1RFTVBUWShuZXdQYXRoKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0dGhyb3cgQXBpRXJyb3IuRU5PVERJUihuZXdQYXRoKTtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXG5cdFx0XHQvLyBUYWtlIGNhcmUgb2Ygd3JpdGFibGUgZmlyc3QuIE1vdmUgYW55IGZpbGVzIHRoZXJlLCBvciBjcmVhdGUgYW4gZW1wdHkgZGlyZWN0b3J5XG5cdFx0XHQvLyBpZiBpdCBkb2Vzbid0IGV4aXN0LlxuXHRcdFx0aWYgKHRoaXMuX3dyaXRhYmxlLmV4aXN0c1N5bmMob2xkUGF0aCwgY3JlZCkpIHtcblx0XHRcdFx0dGhpcy5fd3JpdGFibGUucmVuYW1lU3luYyhvbGRQYXRoLCBuZXdQYXRoLCBjcmVkKTtcblx0XHRcdH0gZWxzZSBpZiAoIXRoaXMuX3dyaXRhYmxlLmV4aXN0c1N5bmMobmV3UGF0aCwgY3JlZCkpIHtcblx0XHRcdFx0dGhpcy5fd3JpdGFibGUubWtkaXJTeW5jKG5ld1BhdGgsIG1vZGUsIGNyZWQpO1xuXHRcdFx0fVxuXG5cdFx0XHQvLyBOZWVkIHRvIG1vdmUgKmV2ZXJ5IGZpbGUvZm9sZGVyKiBjdXJyZW50bHkgc3RvcmVkIG9uIHJlYWRhYmxlIHRvIGl0cyBuZXcgbG9jYXRpb25cblx0XHRcdC8vIG9uIHdyaXRhYmxlLlxuXHRcdFx0aWYgKHRoaXMuX3JlYWRhYmxlLmV4aXN0c1N5bmMob2xkUGF0aCwgY3JlZCkpIHtcblx0XHRcdFx0dGhpcy5fcmVhZGFibGUucmVhZGRpclN5bmMob2xkUGF0aCwgY3JlZCkuZm9yRWFjaChuYW1lID0+IHtcblx0XHRcdFx0XHQvLyBSZWN1cnNpb24hIFNob3VsZCB3b3JrIGZvciBhbnkgbmVzdGVkIGZpbGVzIC8gZm9sZGVycy5cblx0XHRcdFx0XHR0aGlzLnJlbmFtZVN5bmMocGF0aC5yZXNvbHZlKG9sZFBhdGgsIG5hbWUpLCBwYXRoLnJlc29sdmUobmV3UGF0aCwgbmFtZSksIGNyZWQpO1xuXHRcdFx0XHR9KTtcblx0XHRcdH1cblx0XHR9IGVsc2Uge1xuXHRcdFx0aWYgKHRoaXMuZXhpc3RzU3luYyhuZXdQYXRoLCBjcmVkKSAmJiB0aGlzLnN0YXRTeW5jKG5ld1BhdGgsIGZhbHNlLCBjcmVkKS5pc0RpcmVjdG9yeSgpKSB7XG5cdFx0XHRcdHRocm93IEFwaUVycm9yLkVJU0RJUihuZXdQYXRoKTtcblx0XHRcdH1cblxuXHRcdFx0dGhpcy53cml0ZUZpbGVTeW5jKG5ld1BhdGgsIHRoaXMucmVhZEZpbGVTeW5jKG9sZFBhdGgsIG51bGwsIGdldEZsYWcoJ3InKSwgY3JlZCksIG51bGwsIGdldEZsYWcoJ3cnKSwgb2xkU3RhdHMubW9kZSwgY3JlZCk7XG5cdFx0fVxuXG5cdFx0aWYgKG9sZFBhdGggIT09IG5ld1BhdGggJiYgdGhpcy5leGlzdHNTeW5jKG9sZFBhdGgsIGNyZWQpKSB7XG5cdFx0XHR0aGlzLnVubGlua1N5bmMob2xkUGF0aCwgY3JlZCk7XG5cdFx0fVxuXHR9XG5cblx0cHVibGljIHN0YXQocDogc3RyaW5nLCBpc0xzdGF0OiBib29sZWFuLCBjcmVkOiBDcmVkLCBjYjogQkZTQ2FsbGJhY2s8U3RhdHM+KTogdm9pZCB7XG5cdFx0aWYgKCF0aGlzLmNoZWNrSW5pdEFzeW5jKGNiKSkge1xuXHRcdFx0cmV0dXJuO1xuXHRcdH1cblx0XHR0aGlzLl93cml0YWJsZS5zdGF0KHAsIGlzTHN0YXQsIGNyZWQsIChlcnI6IEFwaUVycm9yLCBzdGF0PzogU3RhdHMpID0+IHtcblx0XHRcdGlmIChlcnIgJiYgZXJyLmVycm5vID09PSBFcnJvckNvZGUuRU5PRU5UKSB7XG5cdFx0XHRcdGlmICh0aGlzLl9kZWxldGVkRmlsZXNbcF0pIHtcblx0XHRcdFx0XHRjYihBcGlFcnJvci5FTk9FTlQocCkpO1xuXHRcdFx0XHR9XG5cdFx0XHRcdHRoaXMuX3JlYWRhYmxlLnN0YXQocCwgaXNMc3RhdCwgY3JlZCwgKGVycjogQXBpRXJyb3IsIHN0YXQ/OiBTdGF0cykgPT4ge1xuXHRcdFx0XHRcdGlmIChzdGF0KSB7XG5cdFx0XHRcdFx0XHQvLyBNYWtlIHRoZSBvbGRTdGF0J3MgbW9kZSB3cml0YWJsZS4gUHJlc2VydmUgdGhlIHRvcG1vc3Rcblx0XHRcdFx0XHRcdC8vIHBhcnQgb2YgdGhlIG1vZGUsIHdoaWNoIHNwZWNpZmllcyBpZiBpdCBpcyBhIGZpbGUgb3IgYVxuXHRcdFx0XHRcdFx0Ly8gZGlyZWN0b3J5LlxuXHRcdFx0XHRcdFx0c3RhdCA9IFN0YXRzLmNsb25lKHN0YXQpO1xuXHRcdFx0XHRcdFx0c3RhdC5tb2RlID0gbWFrZU1vZGVXcml0YWJsZShzdGF0Lm1vZGUpO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHRjYihlcnIsIHN0YXQpO1xuXHRcdFx0XHR9KTtcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdGNiKGVyciwgc3RhdCk7XG5cdFx0XHR9XG5cdFx0fSk7XG5cdH1cblxuXHRwdWJsaWMgc3RhdFN5bmMocDogc3RyaW5nLCBpc0xzdGF0OiBib29sZWFuLCBjcmVkOiBDcmVkKTogU3RhdHMge1xuXHRcdHRoaXMuY2hlY2tJbml0aWFsaXplZCgpO1xuXHRcdHRyeSB7XG5cdFx0XHRyZXR1cm4gdGhpcy5fd3JpdGFibGUuc3RhdFN5bmMocCwgaXNMc3RhdCwgY3JlZCk7XG5cdFx0fSBjYXRjaCAoZSkge1xuXHRcdFx0aWYgKHRoaXMuX2RlbGV0ZWRGaWxlc1twXSkge1xuXHRcdFx0XHR0aHJvdyBBcGlFcnJvci5FTk9FTlQocCk7XG5cdFx0XHR9XG5cdFx0XHRjb25zdCBvbGRTdGF0ID0gU3RhdHMuY2xvbmUodGhpcy5fcmVhZGFibGUuc3RhdFN5bmMocCwgaXNMc3RhdCwgY3JlZCkpO1xuXHRcdFx0Ly8gTWFrZSB0aGUgb2xkU3RhdCdzIG1vZGUgd3JpdGFibGUuIFByZXNlcnZlIHRoZSB0b3Btb3N0IHBhcnQgb2YgdGhlXG5cdFx0XHQvLyBtb2RlLCB3aGljaCBzcGVjaWZpZXMgaWYgaXQgaXMgYSBmaWxlIG9yIGEgZGlyZWN0b3J5LlxuXHRcdFx0b2xkU3RhdC5tb2RlID0gbWFrZU1vZGVXcml0YWJsZShvbGRTdGF0Lm1vZGUpO1xuXHRcdFx0cmV0dXJuIG9sZFN0YXQ7XG5cdFx0fVxuXHR9XG5cblx0cHVibGljIG9wZW4ocDogc3RyaW5nLCBmbGFnOiBGaWxlRmxhZywgbW9kZTogbnVtYmVyLCBjcmVkOiBDcmVkLCBjYjogQkZTQ2FsbGJhY2s8RmlsZT4pOiB2b2lkIHtcblx0XHRpZiAoIXRoaXMuY2hlY2tJbml0QXN5bmMoY2IpIHx8IHRoaXMuY2hlY2tQYXRoQXN5bmMocCwgY2IpKSB7XG5cdFx0XHRyZXR1cm47XG5cdFx0fVxuXHRcdHRoaXMuc3RhdChwLCBmYWxzZSwgY3JlZCwgKGVycjogQXBpRXJyb3IsIHN0YXRzPzogU3RhdHMpID0+IHtcblx0XHRcdGlmIChzdGF0cykge1xuXHRcdFx0XHRzd2l0Y2ggKGZsYWcucGF0aEV4aXN0c0FjdGlvbigpKSB7XG5cdFx0XHRcdFx0Y2FzZSBBY3Rpb25UeXBlLlRSVU5DQVRFX0ZJTEU6XG5cdFx0XHRcdFx0XHRyZXR1cm4gdGhpcy5jcmVhdGVQYXJlbnREaXJlY3Rvcmllc0FzeW5jKHAsIGNyZWQsIChlcnI/OiBBcGlFcnJvcikgPT4ge1xuXHRcdFx0XHRcdFx0XHRpZiAoZXJyKSB7XG5cdFx0XHRcdFx0XHRcdFx0cmV0dXJuIGNiKGVycik7XG5cdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdFx0dGhpcy5fd3JpdGFibGUub3BlbihwLCBmbGFnLCBtb2RlLCBjcmVkLCBjYik7XG5cdFx0XHRcdFx0XHR9KTtcblx0XHRcdFx0XHRjYXNlIEFjdGlvblR5cGUuTk9QOlxuXHRcdFx0XHRcdFx0cmV0dXJuIHRoaXMuX3dyaXRhYmxlLmV4aXN0cyhwLCBjcmVkLCAoZXhpc3RzOiBib29sZWFuKSA9PiB7XG5cdFx0XHRcdFx0XHRcdGlmIChleGlzdHMpIHtcblx0XHRcdFx0XHRcdFx0XHR0aGlzLl93cml0YWJsZS5vcGVuKHAsIGZsYWcsIG1vZGUsIGNyZWQsIGNiKTtcblx0XHRcdFx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRcdFx0XHQvLyBhdCB0aGlzIHBvaW50IHdlIGtub3cgdGhlIHN0YXRzIG9iamVjdCB3ZSBnb3QgaXMgZnJvbVxuXHRcdFx0XHRcdFx0XHRcdC8vIHRoZSByZWFkYWJsZSBGUy5cblx0XHRcdFx0XHRcdFx0XHRzdGF0cyA9IFN0YXRzLmNsb25lKHN0YXRzISk7XG5cdFx0XHRcdFx0XHRcdFx0c3RhdHMubW9kZSA9IG1vZGU7XG5cdFx0XHRcdFx0XHRcdFx0dGhpcy5fcmVhZGFibGUucmVhZEZpbGUocCwgbnVsbCwgZ2V0RmxhZygncicpLCBjcmVkLCAocmVhZEZpbGVFcnI6IEFwaUVycm9yLCBkYXRhPzogYW55KSA9PiB7XG5cdFx0XHRcdFx0XHRcdFx0XHRpZiAocmVhZEZpbGVFcnIpIHtcblx0XHRcdFx0XHRcdFx0XHRcdFx0cmV0dXJuIGNiKHJlYWRGaWxlRXJyKTtcblx0XHRcdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdFx0XHRcdGlmIChzdGF0cyEuc2l6ZSA9PT0gLTEpIHtcblx0XHRcdFx0XHRcdFx0XHRcdFx0c3RhdHMhLnNpemUgPSBkYXRhLmxlbmd0aDtcblx0XHRcdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdFx0XHRcdGNvbnN0IGYgPSBuZXcgT3ZlcmxheUZpbGUodGhpcywgcCwgZmxhZywgc3RhdHMhLCBkYXRhKTtcblx0XHRcdFx0XHRcdFx0XHRcdGNiKG51bGwsIGYpO1xuXHRcdFx0XHRcdFx0XHRcdH0pO1xuXHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHR9KTtcblx0XHRcdFx0XHRkZWZhdWx0OlxuXHRcdFx0XHRcdFx0cmV0dXJuIGNiKEFwaUVycm9yLkVFWElTVChwKSk7XG5cdFx0XHRcdH1cblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdHN3aXRjaCAoZmxhZy5wYXRoTm90RXhpc3RzQWN0aW9uKCkpIHtcblx0XHRcdFx0XHRjYXNlIEFjdGlvblR5cGUuQ1JFQVRFX0ZJTEU6XG5cdFx0XHRcdFx0XHRyZXR1cm4gdGhpcy5jcmVhdGVQYXJlbnREaXJlY3Rvcmllc0FzeW5jKHAsIGNyZWQsIChlcnI/OiBBcGlFcnJvcikgPT4ge1xuXHRcdFx0XHRcdFx0XHRpZiAoZXJyKSB7XG5cdFx0XHRcdFx0XHRcdFx0cmV0dXJuIGNiKGVycik7XG5cdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdFx0cmV0dXJuIHRoaXMuX3dyaXRhYmxlLm9wZW4ocCwgZmxhZywgbW9kZSwgY3JlZCwgY2IpO1xuXHRcdFx0XHRcdFx0fSk7XG5cdFx0XHRcdFx0ZGVmYXVsdDpcblx0XHRcdFx0XHRcdHJldHVybiBjYihBcGlFcnJvci5FTk9FTlQocCkpO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fSk7XG5cdH1cblxuXHRwdWJsaWMgb3BlblN5bmMocDogc3RyaW5nLCBmbGFnOiBGaWxlRmxhZywgbW9kZTogbnVtYmVyLCBjcmVkOiBDcmVkKTogRmlsZSB7XG5cdFx0dGhpcy5jaGVja0luaXRpYWxpemVkKCk7XG5cdFx0dGhpcy5jaGVja1BhdGgocCk7XG5cdFx0aWYgKHAgPT09IGRlbGV0aW9uTG9nUGF0aCkge1xuXHRcdFx0dGhyb3cgQXBpRXJyb3IuRVBFUk0oJ0Nhbm5vdCBvcGVuIGRlbGV0aW9uIGxvZy4nKTtcblx0XHR9XG5cdFx0aWYgKHRoaXMuZXhpc3RzU3luYyhwLCBjcmVkKSkge1xuXHRcdFx0c3dpdGNoIChmbGFnLnBhdGhFeGlzdHNBY3Rpb24oKSkge1xuXHRcdFx0XHRjYXNlIEFjdGlvblR5cGUuVFJVTkNBVEVfRklMRTpcblx0XHRcdFx0XHR0aGlzLmNyZWF0ZVBhcmVudERpcmVjdG9yaWVzKHAsIGNyZWQpO1xuXHRcdFx0XHRcdHJldHVybiB0aGlzLl93cml0YWJsZS5vcGVuU3luYyhwLCBmbGFnLCBtb2RlLCBjcmVkKTtcblx0XHRcdFx0Y2FzZSBBY3Rpb25UeXBlLk5PUDpcblx0XHRcdFx0XHRpZiAodGhpcy5fd3JpdGFibGUuZXhpc3RzU3luYyhwLCBjcmVkKSkge1xuXHRcdFx0XHRcdFx0cmV0dXJuIHRoaXMuX3dyaXRhYmxlLm9wZW5TeW5jKHAsIGZsYWcsIG1vZGUsIGNyZWQpO1xuXHRcdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0XHQvLyBDcmVhdGUgYW4gT3ZlcmxheUZpbGUuXG5cdFx0XHRcdFx0XHRjb25zdCBidWYgPSB0aGlzLl9yZWFkYWJsZS5yZWFkRmlsZVN5bmMocCwgbnVsbCwgZ2V0RmxhZygncicpLCBjcmVkKTtcblx0XHRcdFx0XHRcdGNvbnN0IHN0YXRzID0gU3RhdHMuY2xvbmUodGhpcy5fcmVhZGFibGUuc3RhdFN5bmMocCwgZmFsc2UsIGNyZWQpKTtcblx0XHRcdFx0XHRcdHN0YXRzLm1vZGUgPSBtb2RlO1xuXHRcdFx0XHRcdFx0cmV0dXJuIG5ldyBPdmVybGF5RmlsZSh0aGlzLCBwLCBmbGFnLCBzdGF0cywgYnVmKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdGRlZmF1bHQ6XG5cdFx0XHRcdFx0dGhyb3cgQXBpRXJyb3IuRUVYSVNUKHApO1xuXHRcdFx0fVxuXHRcdH0gZWxzZSB7XG5cdFx0XHRzd2l0Y2ggKGZsYWcucGF0aE5vdEV4aXN0c0FjdGlvbigpKSB7XG5cdFx0XHRcdGNhc2UgQWN0aW9uVHlwZS5DUkVBVEVfRklMRTpcblx0XHRcdFx0XHR0aGlzLmNyZWF0ZVBhcmVudERpcmVjdG9yaWVzKHAsIGNyZWQpO1xuXHRcdFx0XHRcdHJldHVybiB0aGlzLl93cml0YWJsZS5vcGVuU3luYyhwLCBmbGFnLCBtb2RlLCBjcmVkKTtcblx0XHRcdFx0ZGVmYXVsdDpcblx0XHRcdFx0XHR0aHJvdyBBcGlFcnJvci5FTk9FTlQocCk7XG5cdFx0XHR9XG5cdFx0fVxuXHR9XG5cblx0cHVibGljIHVubGluayhwOiBzdHJpbmcsIGNyZWQ6IENyZWQsIGNiOiBCRlNPbmVBcmdDYWxsYmFjayk6IHZvaWQge1xuXHRcdGlmICghdGhpcy5jaGVja0luaXRBc3luYyhjYikgfHwgdGhpcy5jaGVja1BhdGhBc3luYyhwLCBjYikpIHtcblx0XHRcdHJldHVybjtcblx0XHR9XG5cdFx0dGhpcy5leGlzdHMocCwgY3JlZCwgKGV4aXN0czogYm9vbGVhbikgPT4ge1xuXHRcdFx0aWYgKCFleGlzdHMpIHtcblx0XHRcdFx0cmV0dXJuIGNiKEFwaUVycm9yLkVOT0VOVChwKSk7XG5cdFx0XHR9XG5cblx0XHRcdHRoaXMuX3dyaXRhYmxlLmV4aXN0cyhwLCBjcmVkLCAod3JpdGFibGVFeGlzdHM6IGJvb2xlYW4pID0+IHtcblx0XHRcdFx0aWYgKHdyaXRhYmxlRXhpc3RzKSB7XG5cdFx0XHRcdFx0cmV0dXJuIHRoaXMuX3dyaXRhYmxlLnVubGluayhwLCBjcmVkLCAoZXJyOiBBcGlFcnJvcikgPT4ge1xuXHRcdFx0XHRcdFx0aWYgKGVycikge1xuXHRcdFx0XHRcdFx0XHRyZXR1cm4gY2IoZXJyKTtcblx0XHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdFx0dGhpcy5leGlzdHMocCwgY3JlZCwgKHJlYWRhYmxlRXhpc3RzOiBib29sZWFuKSA9PiB7XG5cdFx0XHRcdFx0XHRcdGlmIChyZWFkYWJsZUV4aXN0cykge1xuXHRcdFx0XHRcdFx0XHRcdHRoaXMuZGVsZXRlUGF0aChwLCBjcmVkKTtcblx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0XHRjYihudWxsKTtcblx0XHRcdFx0XHRcdH0pO1xuXHRcdFx0XHRcdH0pO1xuXHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdC8vIGlmIHRoaXMgb25seSBleGlzdHMgb24gdGhlIHJlYWRhYmxlIEZTLCBhZGQgaXQgdG8gdGhlXG5cdFx0XHRcdFx0Ly8gZGVsZXRlIG1hcC5cblx0XHRcdFx0XHR0aGlzLmRlbGV0ZVBhdGgocCwgY3JlZCk7XG5cdFx0XHRcdFx0Y2IobnVsbCk7XG5cdFx0XHRcdH1cblx0XHRcdH0pO1xuXHRcdH0pO1xuXHR9XG5cblx0cHVibGljIHVubGlua1N5bmMocDogc3RyaW5nLCBjcmVkOiBDcmVkKTogdm9pZCB7XG5cdFx0dGhpcy5jaGVja0luaXRpYWxpemVkKCk7XG5cdFx0dGhpcy5jaGVja1BhdGgocCk7XG5cdFx0aWYgKHRoaXMuZXhpc3RzU3luYyhwLCBjcmVkKSkge1xuXHRcdFx0aWYgKHRoaXMuX3dyaXRhYmxlLmV4aXN0c1N5bmMocCwgY3JlZCkpIHtcblx0XHRcdFx0dGhpcy5fd3JpdGFibGUudW5saW5rU3luYyhwLCBjcmVkKTtcblx0XHRcdH1cblxuXHRcdFx0Ly8gaWYgaXQgc3RpbGwgZXhpc3RzIGFkZCB0byB0aGUgZGVsZXRlIGxvZ1xuXHRcdFx0aWYgKHRoaXMuZXhpc3RzU3luYyhwLCBjcmVkKSkge1xuXHRcdFx0XHR0aGlzLmRlbGV0ZVBhdGgocCwgY3JlZCk7XG5cdFx0XHR9XG5cdFx0fSBlbHNlIHtcblx0XHRcdHRocm93IEFwaUVycm9yLkVOT0VOVChwKTtcblx0XHR9XG5cdH1cblxuXHRwdWJsaWMgcm1kaXIocDogc3RyaW5nLCBjcmVkOiBDcmVkLCBjYjogQkZTT25lQXJnQ2FsbGJhY2spOiB2b2lkIHtcblx0XHRpZiAoIXRoaXMuY2hlY2tJbml0QXN5bmMoY2IpKSB7XG5cdFx0XHRyZXR1cm47XG5cdFx0fVxuXG5cdFx0Y29uc3Qgcm1kaXJMb3dlciA9ICgpOiB2b2lkID0+IHtcblx0XHRcdHRoaXMucmVhZGRpcihwLCBjcmVkLCAoZXJyOiBBcGlFcnJvciwgZmlsZXM6IHN0cmluZ1tdKTogdm9pZCA9PiB7XG5cdFx0XHRcdGlmIChlcnIpIHtcblx0XHRcdFx0XHRyZXR1cm4gY2IoZXJyKTtcblx0XHRcdFx0fVxuXG5cdFx0XHRcdGlmIChmaWxlcy5sZW5ndGgpIHtcblx0XHRcdFx0XHRyZXR1cm4gY2IoQXBpRXJyb3IuRU5PVEVNUFRZKHApKTtcblx0XHRcdFx0fVxuXG5cdFx0XHRcdHRoaXMuZGVsZXRlUGF0aChwLCBjcmVkKTtcblx0XHRcdFx0Y2IobnVsbCk7XG5cdFx0XHR9KTtcblx0XHR9O1xuXG5cdFx0dGhpcy5leGlzdHMocCwgY3JlZCwgKGV4aXN0czogYm9vbGVhbikgPT4ge1xuXHRcdFx0aWYgKCFleGlzdHMpIHtcblx0XHRcdFx0cmV0dXJuIGNiKEFwaUVycm9yLkVOT0VOVChwKSk7XG5cdFx0XHR9XG5cblx0XHRcdHRoaXMuX3dyaXRhYmxlLmV4aXN0cyhwLCBjcmVkLCAod3JpdGFibGVFeGlzdHM6IGJvb2xlYW4pID0+IHtcblx0XHRcdFx0aWYgKHdyaXRhYmxlRXhpc3RzKSB7XG5cdFx0XHRcdFx0dGhpcy5fd3JpdGFibGUucm1kaXIocCwgY3JlZCwgKGVycjogQXBpRXJyb3IpID0+IHtcblx0XHRcdFx0XHRcdGlmIChlcnIpIHtcblx0XHRcdFx0XHRcdFx0cmV0dXJuIGNiKGVycik7XG5cdFx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHRcdHRoaXMuX3JlYWRhYmxlLmV4aXN0cyhwLCBjcmVkLCAocmVhZGFibGVFeGlzdHM6IGJvb2xlYW4pID0+IHtcblx0XHRcdFx0XHRcdFx0aWYgKHJlYWRhYmxlRXhpc3RzKSB7XG5cdFx0XHRcdFx0XHRcdFx0cm1kaXJMb3dlcigpO1xuXHRcdFx0XHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdFx0XHRcdGNiKCk7XG5cdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdH0pO1xuXHRcdFx0XHRcdH0pO1xuXHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdHJtZGlyTG93ZXIoKTtcblx0XHRcdFx0fVxuXHRcdFx0fSk7XG5cdFx0fSk7XG5cdH1cblxuXHRwdWJsaWMgcm1kaXJTeW5jKHA6IHN0cmluZywgY3JlZDogQ3JlZCk6IHZvaWQge1xuXHRcdHRoaXMuY2hlY2tJbml0aWFsaXplZCgpO1xuXHRcdGlmICh0aGlzLmV4aXN0c1N5bmMocCwgY3JlZCkpIHtcblx0XHRcdGlmICh0aGlzLl93cml0YWJsZS5leGlzdHNTeW5jKHAsIGNyZWQpKSB7XG5cdFx0XHRcdHRoaXMuX3dyaXRhYmxlLnJtZGlyU3luYyhwLCBjcmVkKTtcblx0XHRcdH1cblx0XHRcdGlmICh0aGlzLmV4aXN0c1N5bmMocCwgY3JlZCkpIHtcblx0XHRcdFx0Ly8gQ2hlY2sgaWYgZGlyZWN0b3J5IGlzIGVtcHR5LlxuXHRcdFx0XHRpZiAodGhpcy5yZWFkZGlyU3luYyhwLCBjcmVkKS5sZW5ndGggPiAwKSB7XG5cdFx0XHRcdFx0dGhyb3cgQXBpRXJyb3IuRU5PVEVNUFRZKHApO1xuXHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdHRoaXMuZGVsZXRlUGF0aChwLCBjcmVkKTtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH0gZWxzZSB7XG5cdFx0XHR0aHJvdyBBcGlFcnJvci5FTk9FTlQocCk7XG5cdFx0fVxuXHR9XG5cblx0cHVibGljIG1rZGlyKHA6IHN0cmluZywgbW9kZTogbnVtYmVyLCBjcmVkOiBDcmVkLCBjYjogQkZTQ2FsbGJhY2s8U3RhdHM+KTogdm9pZCB7XG5cdFx0aWYgKCF0aGlzLmNoZWNrSW5pdEFzeW5jKGNiKSkge1xuXHRcdFx0cmV0dXJuO1xuXHRcdH1cblx0XHR0aGlzLmV4aXN0cyhwLCBjcmVkLCAoZXhpc3RzOiBib29sZWFuKSA9PiB7XG5cdFx0XHRpZiAoZXhpc3RzKSB7XG5cdFx0XHRcdHJldHVybiBjYihBcGlFcnJvci5FRVhJU1QocCkpO1xuXHRcdFx0fVxuXG5cdFx0XHQvLyBUaGUgYmVsb3cgd2lsbCB0aHJvdyBzaG91bGQgYW55IG9mIHRoZSBwYXJlbnQgZGlyZWN0b3JpZXNcblx0XHRcdC8vIGZhaWwgdG8gZXhpc3Qgb24gX3dyaXRhYmxlLlxuXHRcdFx0dGhpcy5jcmVhdGVQYXJlbnREaXJlY3Rvcmllc0FzeW5jKHAsIGNyZWQsIChlcnI6IEFwaUVycm9yKSA9PiB7XG5cdFx0XHRcdGlmIChlcnIpIHtcblx0XHRcdFx0XHRyZXR1cm4gY2IoZXJyKTtcblx0XHRcdFx0fVxuXHRcdFx0XHR0aGlzLl93cml0YWJsZS5ta2RpcihwLCBtb2RlLCBjcmVkLCBjYik7XG5cdFx0XHR9KTtcblx0XHR9KTtcblx0fVxuXG5cdHB1YmxpYyBta2RpclN5bmMocDogc3RyaW5nLCBtb2RlOiBudW1iZXIsIGNyZWQ6IENyZWQpOiB2b2lkIHtcblx0XHR0aGlzLmNoZWNrSW5pdGlhbGl6ZWQoKTtcblx0XHRpZiAodGhpcy5leGlzdHNTeW5jKHAsIGNyZWQpKSB7XG5cdFx0XHR0aHJvdyBBcGlFcnJvci5FRVhJU1QocCk7XG5cdFx0fSBlbHNlIHtcblx0XHRcdC8vIFRoZSBiZWxvdyB3aWxsIHRocm93IHNob3VsZCBhbnkgb2YgdGhlIHBhcmVudCBkaXJlY3RvcmllcyBmYWlsIHRvIGV4aXN0XG5cdFx0XHQvLyBvbiBfd3JpdGFibGUuXG5cdFx0XHR0aGlzLmNyZWF0ZVBhcmVudERpcmVjdG9yaWVzKHAsIGNyZWQpO1xuXHRcdFx0dGhpcy5fd3JpdGFibGUubWtkaXJTeW5jKHAsIG1vZGUsIGNyZWQpO1xuXHRcdH1cblx0fVxuXG5cdHB1YmxpYyByZWFkZGlyKHA6IHN0cmluZywgY3JlZDogQ3JlZCwgY2I6IEJGU0NhbGxiYWNrPHN0cmluZ1tdPik6IHZvaWQge1xuXHRcdGlmICghdGhpcy5jaGVja0luaXRBc3luYyhjYikpIHtcblx0XHRcdHJldHVybjtcblx0XHR9XG5cdFx0dGhpcy5zdGF0KHAsIGZhbHNlLCBjcmVkLCAoZXJyOiBBcGlFcnJvciwgZGlyU3RhdHM/OiBTdGF0cykgPT4ge1xuXHRcdFx0aWYgKGVycikge1xuXHRcdFx0XHRyZXR1cm4gY2IoZXJyKTtcblx0XHRcdH1cblxuXHRcdFx0aWYgKCFkaXJTdGF0cyEuaXNEaXJlY3RvcnkoKSkge1xuXHRcdFx0XHRyZXR1cm4gY2IoQXBpRXJyb3IuRU5PVERJUihwKSk7XG5cdFx0XHR9XG5cblx0XHRcdHRoaXMuX3dyaXRhYmxlLnJlYWRkaXIocCwgY3JlZCwgKGVycjogQXBpRXJyb3IsIHdGaWxlczogc3RyaW5nW10pID0+IHtcblx0XHRcdFx0aWYgKGVyciAmJiBlcnIuY29kZSAhPT0gJ0VOT0VOVCcpIHtcblx0XHRcdFx0XHRyZXR1cm4gY2IoZXJyKTtcblx0XHRcdFx0fSBlbHNlIGlmIChlcnIgfHwgIXdGaWxlcykge1xuXHRcdFx0XHRcdHdGaWxlcyA9IFtdO1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0dGhpcy5fcmVhZGFibGUucmVhZGRpcihwLCBjcmVkLCAoZXJyOiBBcGlFcnJvciwgckZpbGVzOiBzdHJpbmdbXSkgPT4ge1xuXHRcdFx0XHRcdC8vIGlmIHRoZSBkaXJlY3RvcnkgZG9lc24ndCBleGlzdCBvbiB0aGUgbG93ZXIgRlMgc2V0IHJGaWxlc1xuXHRcdFx0XHRcdC8vIGhlcmUgdG8gc2ltcGxpZnkgdGhlIGZvbGxvd2luZyBjb2RlLlxuXHRcdFx0XHRcdGlmIChlcnIgfHwgIXJGaWxlcykge1xuXHRcdFx0XHRcdFx0ckZpbGVzID0gW107XG5cdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0Ly8gUmVhZGRpciBpbiBib3RoLCBjaGVjayBkZWxldGUgbG9nIG9uIHJlYWQtb25seSBmaWxlIHN5c3RlbSdzIGZpbGVzLCBtZXJnZSwgcmV0dXJuLlxuXHRcdFx0XHRcdGNvbnN0IHNlZW5NYXA6IHsgW25hbWU6IHN0cmluZ106IGJvb2xlYW4gfSA9IHt9O1xuXHRcdFx0XHRcdGNvbnN0IGZpbHRlcmVkOiBzdHJpbmdbXSA9IHdGaWxlcy5jb25jYXQockZpbGVzLmZpbHRlcigoZlBhdGg6IHN0cmluZykgPT4gIXRoaXMuX2RlbGV0ZWRGaWxlc1tgJHtwfS8ke2ZQYXRofWBdKSkuZmlsdGVyKChmUGF0aDogc3RyaW5nKSA9PiB7XG5cdFx0XHRcdFx0XHQvLyBSZW1vdmUgZHVwbGljYXRlcy5cblx0XHRcdFx0XHRcdGNvbnN0IHJlc3VsdCA9ICFzZWVuTWFwW2ZQYXRoXTtcblx0XHRcdFx0XHRcdHNlZW5NYXBbZlBhdGhdID0gdHJ1ZTtcblx0XHRcdFx0XHRcdHJldHVybiByZXN1bHQ7XG5cdFx0XHRcdFx0fSk7XG5cdFx0XHRcdFx0Y2IobnVsbCwgZmlsdGVyZWQpO1xuXHRcdFx0XHR9KTtcblx0XHRcdH0pO1xuXHRcdH0pO1xuXHR9XG5cblx0cHVibGljIHJlYWRkaXJTeW5jKHA6IHN0cmluZywgY3JlZDogQ3JlZCk6IHN0cmluZ1tdIHtcblx0XHR0aGlzLmNoZWNrSW5pdGlhbGl6ZWQoKTtcblx0XHRjb25zdCBkaXJTdGF0cyA9IHRoaXMuc3RhdFN5bmMocCwgZmFsc2UsIGNyZWQpO1xuXHRcdGlmICghZGlyU3RhdHMuaXNEaXJlY3RvcnkoKSkge1xuXHRcdFx0dGhyb3cgQXBpRXJyb3IuRU5PVERJUihwKTtcblx0XHR9XG5cblx0XHQvLyBSZWFkZGlyIGluIGJvdGgsIGNoZWNrIGRlbGV0ZSBsb2cgb24gUk8gZmlsZSBzeXN0ZW0ncyBsaXN0aW5nLCBtZXJnZSwgcmV0dXJuLlxuXHRcdGxldCBjb250ZW50czogc3RyaW5nW10gPSBbXTtcblx0XHR0cnkge1xuXHRcdFx0Y29udGVudHMgPSBjb250ZW50cy5jb25jYXQodGhpcy5fd3JpdGFibGUucmVhZGRpclN5bmMocCwgY3JlZCkpO1xuXHRcdH0gY2F0Y2ggKGUpIHtcblx0XHRcdC8vIE5PUC5cblx0XHR9XG5cdFx0dHJ5IHtcblx0XHRcdGNvbnRlbnRzID0gY29udGVudHMuY29uY2F0KHRoaXMuX3JlYWRhYmxlLnJlYWRkaXJTeW5jKHAsIGNyZWQpLmZpbHRlcigoZlBhdGg6IHN0cmluZykgPT4gIXRoaXMuX2RlbGV0ZWRGaWxlc1tgJHtwfS8ke2ZQYXRofWBdKSk7XG5cdFx0fSBjYXRjaCAoZSkge1xuXHRcdFx0Ly8gTk9QLlxuXHRcdH1cblx0XHRjb25zdCBzZWVuTWFwOiB7IFtuYW1lOiBzdHJpbmddOiBib29sZWFuIH0gPSB7fTtcblx0XHRyZXR1cm4gY29udGVudHMuZmlsdGVyKChmaWxlUDogc3RyaW5nKSA9PiB7XG5cdFx0XHRjb25zdCByZXN1bHQgPSAhc2Vlbk1hcFtmaWxlUF07XG5cdFx0XHRzZWVuTWFwW2ZpbGVQXSA9IHRydWU7XG5cdFx0XHRyZXR1cm4gcmVzdWx0O1xuXHRcdH0pO1xuXHR9XG5cblx0cHVibGljIGV4aXN0cyhwOiBzdHJpbmcsIGNyZWQ6IENyZWQsIGNiOiAoZXhpc3RzOiBib29sZWFuKSA9PiB2b2lkKTogdm9pZCB7XG5cdFx0Ly8gQ2Fubm90IHBhc3MgYW4gZXJyb3IgYmFjayB0byBjYWxsYmFjaywgc28gdGhyb3cgYW4gZXhjZXB0aW9uIGluc3RlYWRcblx0XHQvLyBpZiBub3QgaW5pdGlhbGl6ZWQuXG5cdFx0dGhpcy5jaGVja0luaXRpYWxpemVkKCk7XG5cdFx0dGhpcy5fd3JpdGFibGUuZXhpc3RzKHAsIGNyZWQsIChleGlzdHNXcml0YWJsZTogYm9vbGVhbikgPT4ge1xuXHRcdFx0aWYgKGV4aXN0c1dyaXRhYmxlKSB7XG5cdFx0XHRcdHJldHVybiBjYih0cnVlKTtcblx0XHRcdH1cblxuXHRcdFx0dGhpcy5fcmVhZGFibGUuZXhpc3RzKHAsIGNyZWQsIChleGlzdHNSZWFkYWJsZTogYm9vbGVhbikgPT4ge1xuXHRcdFx0XHRjYihleGlzdHNSZWFkYWJsZSAmJiB0aGlzLl9kZWxldGVkRmlsZXNbcF0gIT09IHRydWUpO1xuXHRcdFx0fSk7XG5cdFx0fSk7XG5cdH1cblxuXHRwdWJsaWMgZXhpc3RzU3luYyhwOiBzdHJpbmcsIGNyZWQ6IENyZWQpOiBib29sZWFuIHtcblx0XHR0aGlzLmNoZWNrSW5pdGlhbGl6ZWQoKTtcblx0XHRyZXR1cm4gdGhpcy5fd3JpdGFibGUuZXhpc3RzU3luYyhwLCBjcmVkKSB8fCAodGhpcy5fcmVhZGFibGUuZXhpc3RzU3luYyhwLCBjcmVkKSAmJiB0aGlzLl9kZWxldGVkRmlsZXNbcF0gIT09IHRydWUpO1xuXHR9XG5cblx0cHVibGljIGNobW9kKHA6IHN0cmluZywgaXNMY2htb2Q6IGJvb2xlYW4sIG1vZGU6IG51bWJlciwgY3JlZDogQ3JlZCwgY2I6IEJGU09uZUFyZ0NhbGxiYWNrKTogdm9pZCB7XG5cdFx0aWYgKCF0aGlzLmNoZWNrSW5pdEFzeW5jKGNiKSkge1xuXHRcdFx0cmV0dXJuO1xuXHRcdH1cblx0XHR0aGlzLm9wZXJhdGVPbldyaXRhYmxlQXN5bmMocCwgY3JlZCwgKGVycj86IEFwaUVycm9yKSA9PiB7XG5cdFx0XHRpZiAoZXJyKSB7XG5cdFx0XHRcdHJldHVybiBjYihlcnIpO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0dGhpcy5fd3JpdGFibGUuY2htb2QocCwgaXNMY2htb2QsIG1vZGUsIGNyZWQsIGNiKTtcblx0XHRcdH1cblx0XHR9KTtcblx0fVxuXG5cdHB1YmxpYyBjaG1vZFN5bmMocDogc3RyaW5nLCBpc0xjaG1vZDogYm9vbGVhbiwgbW9kZTogbnVtYmVyLCBjcmVkOiBDcmVkKTogdm9pZCB7XG5cdFx0dGhpcy5jaGVja0luaXRpYWxpemVkKCk7XG5cdFx0dGhpcy5vcGVyYXRlT25Xcml0YWJsZShwLCBjcmVkLCAoKSA9PiB7XG5cdFx0XHR0aGlzLl93cml0YWJsZS5jaG1vZFN5bmMocCwgaXNMY2htb2QsIG1vZGUsIGNyZWQpO1xuXHRcdH0pO1xuXHR9XG5cblx0cHVibGljIGNob3duKHA6IHN0cmluZywgaXNMY2htb2Q6IGJvb2xlYW4sIG5ld191aWQ6IG51bWJlciwgbmV3X2dpZDogbnVtYmVyLCBjcmVkOiBDcmVkLCBjYjogQkZTT25lQXJnQ2FsbGJhY2spOiB2b2lkIHtcblx0XHRpZiAoIXRoaXMuY2hlY2tJbml0QXN5bmMoY2IpKSB7XG5cdFx0XHRyZXR1cm47XG5cdFx0fVxuXHRcdHRoaXMub3BlcmF0ZU9uV3JpdGFibGVBc3luYyhwLCBjcmVkLCAoZXJyPzogQXBpRXJyb3IpID0+IHtcblx0XHRcdGlmIChlcnIpIHtcblx0XHRcdFx0cmV0dXJuIGNiKGVycik7XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHR0aGlzLl93cml0YWJsZS5jaG93bihwLCBpc0xjaG1vZCwgbmV3X3VpZCwgbmV3X2dpZCwgY3JlZCwgY2IpO1xuXHRcdFx0fVxuXHRcdH0pO1xuXHR9XG5cblx0cHVibGljIGNob3duU3luYyhwOiBzdHJpbmcsIGlzTGNob3duOiBib29sZWFuLCBuZXdfdWlkOiBudW1iZXIsIG5ld19naWQ6IG51bWJlciwgY3JlZDogQ3JlZCk6IHZvaWQge1xuXHRcdHRoaXMuY2hlY2tJbml0aWFsaXplZCgpO1xuXHRcdHRoaXMub3BlcmF0ZU9uV3JpdGFibGUocCwgY3JlZCwgKCkgPT4ge1xuXHRcdFx0dGhpcy5fd3JpdGFibGUuY2hvd25TeW5jKHAsIGlzTGNob3duLCBuZXdfdWlkLCBuZXdfZ2lkLCBjcmVkKTtcblx0XHR9KTtcblx0fVxuXG5cdHB1YmxpYyB1dGltZXMocDogc3RyaW5nLCBhdGltZTogRGF0ZSwgbXRpbWU6IERhdGUsIGNyZWQ6IENyZWQsIGNiOiBCRlNPbmVBcmdDYWxsYmFjayk6IHZvaWQge1xuXHRcdGlmICghdGhpcy5jaGVja0luaXRBc3luYyhjYikpIHtcblx0XHRcdHJldHVybjtcblx0XHR9XG5cdFx0dGhpcy5vcGVyYXRlT25Xcml0YWJsZUFzeW5jKHAsIGNyZWQsIChlcnI/OiBBcGlFcnJvcikgPT4ge1xuXHRcdFx0aWYgKGVycikge1xuXHRcdFx0XHRyZXR1cm4gY2IoZXJyKTtcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdHRoaXMuX3dyaXRhYmxlLnV0aW1lcyhwLCBhdGltZSwgbXRpbWUsIGNyZWQsIGNiKTtcblx0XHRcdH1cblx0XHR9KTtcblx0fVxuXG5cdHB1YmxpYyB1dGltZXNTeW5jKHA6IHN0cmluZywgYXRpbWU6IERhdGUsIG10aW1lOiBEYXRlLCBjcmVkOiBDcmVkKTogdm9pZCB7XG5cdFx0dGhpcy5jaGVja0luaXRpYWxpemVkKCk7XG5cdFx0dGhpcy5vcGVyYXRlT25Xcml0YWJsZShwLCBjcmVkLCAoKSA9PiB7XG5cdFx0XHR0aGlzLl93cml0YWJsZS51dGltZXNTeW5jKHAsIGF0aW1lLCBtdGltZSwgY3JlZCk7XG5cdFx0fSk7XG5cdH1cblxuXHRwcml2YXRlIGRlbGV0ZVBhdGgocDogc3RyaW5nLCBjcmVkOiBDcmVkKTogdm9pZCB7XG5cdFx0dGhpcy5fZGVsZXRlZEZpbGVzW3BdID0gdHJ1ZTtcblx0XHR0aGlzLnVwZGF0ZUxvZyhgZCR7cH1cXG5gLCBjcmVkKTtcblx0fVxuXG5cdHByaXZhdGUgdXBkYXRlTG9nKGFkZGl0aW9uOiBzdHJpbmcsIGNyZWQ6IENyZWQpIHtcblx0XHR0aGlzLl9kZWxldGVMb2cgKz0gYWRkaXRpb247XG5cdFx0aWYgKHRoaXMuX2RlbGV0ZUxvZ1VwZGF0ZVBlbmRpbmcpIHtcblx0XHRcdHRoaXMuX2RlbGV0ZUxvZ1VwZGF0ZU5lZWRlZCA9IHRydWU7XG5cdFx0fSBlbHNlIHtcblx0XHRcdHRoaXMuX2RlbGV0ZUxvZ1VwZGF0ZVBlbmRpbmcgPSB0cnVlO1xuXHRcdFx0dGhpcy5fd3JpdGFibGUud3JpdGVGaWxlKGRlbGV0aW9uTG9nUGF0aCwgdGhpcy5fZGVsZXRlTG9nLCAndXRmOCcsIEZpbGVGbGFnLmdldEZpbGVGbGFnKCd3JyksIDBvNjQ0LCBjcmVkLCBlID0+IHtcblx0XHRcdFx0dGhpcy5fZGVsZXRlTG9nVXBkYXRlUGVuZGluZyA9IGZhbHNlO1xuXHRcdFx0XHRpZiAoZSkge1xuXHRcdFx0XHRcdHRoaXMuX2RlbGV0ZUxvZ0Vycm9yID0gZTtcblx0XHRcdFx0fSBlbHNlIGlmICh0aGlzLl9kZWxldGVMb2dVcGRhdGVOZWVkZWQpIHtcblx0XHRcdFx0XHR0aGlzLl9kZWxldGVMb2dVcGRhdGVOZWVkZWQgPSBmYWxzZTtcblx0XHRcdFx0XHR0aGlzLnVwZGF0ZUxvZygnJywgY3JlZCk7XG5cdFx0XHRcdH1cblx0XHRcdH0pO1xuXHRcdH1cblx0fVxuXG5cdHByaXZhdGUgX3JlcGFyc2VEZWxldGlvbkxvZygpOiB2b2lkIHtcblx0XHR0aGlzLl9kZWxldGVkRmlsZXMgPSB7fTtcblx0XHR0aGlzLl9kZWxldGVMb2cuc3BsaXQoJ1xcbicpLmZvckVhY2goKHBhdGg6IHN0cmluZykgPT4ge1xuXHRcdFx0Ly8gSWYgdGhlIGxvZyBlbnRyeSBiZWdpbnMgdy8gJ2QnLCBpdCdzIGEgZGVsZXRpb24uXG5cdFx0XHR0aGlzLl9kZWxldGVkRmlsZXNbcGF0aC5zbGljZSgxKV0gPSBwYXRoLnNsaWNlKDAsIDEpID09PSAnZCc7XG5cdFx0fSk7XG5cdH1cblxuXHRwcml2YXRlIGNoZWNrSW5pdGlhbGl6ZWQoKTogdm9pZCB7XG5cdFx0aWYgKCF0aGlzLl9pc0luaXRpYWxpemVkKSB7XG5cdFx0XHR0aHJvdyBuZXcgQXBpRXJyb3IoRXJyb3JDb2RlLkVQRVJNLCAnT3ZlcmxheUZTIGlzIG5vdCBpbml0aWFsaXplZC4gUGxlYXNlIGluaXRpYWxpemUgT3ZlcmxheUZTIHVzaW5nIGl0cyBpbml0aWFsaXplKCkgbWV0aG9kIGJlZm9yZSB1c2luZyBpdC4nKTtcblx0XHR9IGVsc2UgaWYgKHRoaXMuX2RlbGV0ZUxvZ0Vycm9yICE9PSBudWxsKSB7XG5cdFx0XHRjb25zdCBlID0gdGhpcy5fZGVsZXRlTG9nRXJyb3I7XG5cdFx0XHR0aGlzLl9kZWxldGVMb2dFcnJvciA9IG51bGw7XG5cdFx0XHR0aHJvdyBlO1xuXHRcdH1cblx0fVxuXG5cdHByaXZhdGUgY2hlY2tJbml0QXN5bmMoY2I6IEJGU09uZUFyZ0NhbGxiYWNrKTogYm9vbGVhbiB7XG5cdFx0aWYgKCF0aGlzLl9pc0luaXRpYWxpemVkKSB7XG5cdFx0XHRjYihuZXcgQXBpRXJyb3IoRXJyb3JDb2RlLkVQRVJNLCAnT3ZlcmxheUZTIGlzIG5vdCBpbml0aWFsaXplZC4gUGxlYXNlIGluaXRpYWxpemUgT3ZlcmxheUZTIHVzaW5nIGl0cyBpbml0aWFsaXplKCkgbWV0aG9kIGJlZm9yZSB1c2luZyBpdC4nKSk7XG5cdFx0XHRyZXR1cm4gZmFsc2U7XG5cdFx0fSBlbHNlIGlmICh0aGlzLl9kZWxldGVMb2dFcnJvciAhPT0gbnVsbCkge1xuXHRcdFx0Y29uc3QgZSA9IHRoaXMuX2RlbGV0ZUxvZ0Vycm9yO1xuXHRcdFx0dGhpcy5fZGVsZXRlTG9nRXJyb3IgPSBudWxsO1xuXHRcdFx0Y2IoZSk7XG5cdFx0XHRyZXR1cm4gZmFsc2U7XG5cdFx0fVxuXHRcdHJldHVybiB0cnVlO1xuXHR9XG5cblx0cHJpdmF0ZSBjaGVja1BhdGgocDogc3RyaW5nKTogdm9pZCB7XG5cdFx0aWYgKHAgPT09IGRlbGV0aW9uTG9nUGF0aCkge1xuXHRcdFx0dGhyb3cgQXBpRXJyb3IuRVBFUk0ocCk7XG5cdFx0fVxuXHR9XG5cblx0cHJpdmF0ZSBjaGVja1BhdGhBc3luYyhwOiBzdHJpbmcsIGNiOiBCRlNPbmVBcmdDYWxsYmFjayk6IGJvb2xlYW4ge1xuXHRcdGlmIChwID09PSBkZWxldGlvbkxvZ1BhdGgpIHtcblx0XHRcdGNiKEFwaUVycm9yLkVQRVJNKHApKTtcblx0XHRcdHJldHVybiB0cnVlO1xuXHRcdH1cblx0XHRyZXR1cm4gZmFsc2U7XG5cdH1cblxuXHRwcml2YXRlIGNyZWF0ZVBhcmVudERpcmVjdG9yaWVzQXN5bmMocDogc3RyaW5nLCBjcmVkOiBDcmVkLCBjYjogQkZTT25lQXJnQ2FsbGJhY2spOiB2b2lkIHtcblx0XHRsZXQgcGFyZW50ID0gcGF0aC5kaXJuYW1lKHApO1xuXHRcdGNvbnN0IHRvQ3JlYXRlOiBzdHJpbmdbXSA9IFtdO1xuXHRcdGNvbnN0IHNlbGYgPSB0aGlzO1xuXG5cdFx0dGhpcy5fd3JpdGFibGUuc3RhdChwYXJlbnQsIGZhbHNlLCBjcmVkLCBzdGF0RG9uZSk7XG5cdFx0ZnVuY3Rpb24gc3RhdERvbmUoZXJyOiBBcGlFcnJvciwgc3RhdD86IFN0YXRzKTogdm9pZCB7XG5cdFx0XHRpZiAoZXJyKSB7XG5cdFx0XHRcdGlmIChwYXJlbnQgPT09ICcvJykge1xuXHRcdFx0XHRcdGNiKG5ldyBBcGlFcnJvcihFcnJvckNvZGUuRUJVU1ksICdJbnZhcmlhbnQgZmFpbGVkOiByb290IGRvZXMgbm90IGV4aXN0IScpKTtcblx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHR0b0NyZWF0ZS5wdXNoKHBhcmVudCk7XG5cdFx0XHRcdFx0cGFyZW50ID0gcGF0aC5kaXJuYW1lKHBhcmVudCk7XG5cdFx0XHRcdFx0c2VsZi5fd3JpdGFibGUuc3RhdChwYXJlbnQsIGZhbHNlLCBjcmVkLCBzdGF0RG9uZSk7XG5cdFx0XHRcdH1cblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdGNyZWF0ZVBhcmVudHMoKTtcblx0XHRcdH1cblx0XHR9XG5cblx0XHRmdW5jdGlvbiBjcmVhdGVQYXJlbnRzKCk6IHZvaWQge1xuXHRcdFx0aWYgKCF0b0NyZWF0ZS5sZW5ndGgpIHtcblx0XHRcdFx0cmV0dXJuIGNiKCk7XG5cdFx0XHR9XG5cblx0XHRcdGNvbnN0IGRpciA9IHRvQ3JlYXRlLnBvcCgpO1xuXHRcdFx0c2VsZi5fcmVhZGFibGUuc3RhdChkaXIhLCBmYWxzZSwgY3JlZCwgKGVycjogQXBpRXJyb3IsIHN0YXRzPzogU3RhdHMpID0+IHtcblx0XHRcdFx0Ly8gc3RvcCBpZiB3ZSBjb3VsZG4ndCByZWFkIHRoZSBkaXJcblx0XHRcdFx0aWYgKCFzdGF0cykge1xuXHRcdFx0XHRcdHJldHVybiBjYigpO1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0c2VsZi5fd3JpdGFibGUubWtkaXIoZGlyISwgc3RhdHMubW9kZSwgY3JlZCwgKGVycj86IEFwaUVycm9yKSA9PiB7XG5cdFx0XHRcdFx0aWYgKGVycikge1xuXHRcdFx0XHRcdFx0cmV0dXJuIGNiKGVycik7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdGNyZWF0ZVBhcmVudHMoKTtcblx0XHRcdFx0fSk7XG5cdFx0XHR9KTtcblx0XHR9XG5cdH1cblxuXHQvKipcblx0ICogV2l0aCB0aGUgZ2l2ZW4gcGF0aCwgY3JlYXRlIHRoZSBuZWVkZWQgcGFyZW50IGRpcmVjdG9yaWVzIG9uIHRoZSB3cml0YWJsZSBzdG9yYWdlXG5cdCAqIHNob3VsZCB0aGV5IG5vdCBleGlzdC4gVXNlIG1vZGVzIGZyb20gdGhlIHJlYWQtb25seSBzdG9yYWdlLlxuXHQgKi9cblx0cHJpdmF0ZSBjcmVhdGVQYXJlbnREaXJlY3RvcmllcyhwOiBzdHJpbmcsIGNyZWQ6IENyZWQpOiB2b2lkIHtcblx0XHRsZXQgcGFyZW50ID0gcGF0aC5kaXJuYW1lKHApLFxuXHRcdFx0dG9DcmVhdGU6IHN0cmluZ1tdID0gW107XG5cdFx0d2hpbGUgKCF0aGlzLl93cml0YWJsZS5leGlzdHNTeW5jKHBhcmVudCwgY3JlZCkpIHtcblx0XHRcdHRvQ3JlYXRlLnB1c2gocGFyZW50KTtcblx0XHRcdHBhcmVudCA9IHBhdGguZGlybmFtZShwYXJlbnQpO1xuXHRcdH1cblx0XHR0b0NyZWF0ZSA9IHRvQ3JlYXRlLnJldmVyc2UoKTtcblxuXHRcdHRvQ3JlYXRlLmZvckVhY2goKHA6IHN0cmluZykgPT4ge1xuXHRcdFx0dGhpcy5fd3JpdGFibGUubWtkaXJTeW5jKHAsIHRoaXMuc3RhdFN5bmMocCwgZmFsc2UsIGNyZWQpLm1vZGUsIGNyZWQpO1xuXHRcdH0pO1xuXHR9XG5cblx0LyoqXG5cdCAqIEhlbHBlciBmdW5jdGlvbjpcblx0ICogLSBFbnN1cmVzIHAgaXMgb24gd3JpdGFibGUgYmVmb3JlIHByb2NlZWRpbmcuIFRocm93cyBhbiBlcnJvciBpZiBpdCBkb2Vzbid0IGV4aXN0LlxuXHQgKiAtIENhbGxzIGYgdG8gcGVyZm9ybSBvcGVyYXRpb24gb24gd3JpdGFibGUuXG5cdCAqL1xuXHRwcml2YXRlIG9wZXJhdGVPbldyaXRhYmxlKHA6IHN0cmluZywgY3JlZDogQ3JlZCwgZjogKCkgPT4gdm9pZCk6IHZvaWQge1xuXHRcdGlmICh0aGlzLmV4aXN0c1N5bmMocCwgY3JlZCkpIHtcblx0XHRcdGlmICghdGhpcy5fd3JpdGFibGUuZXhpc3RzU3luYyhwLCBjcmVkKSkge1xuXHRcdFx0XHQvLyBGaWxlIGlzIG9uIHJlYWRhYmxlIHN0b3JhZ2UuIENvcHkgdG8gd3JpdGFibGUgc3RvcmFnZSBiZWZvcmVcblx0XHRcdFx0Ly8gY2hhbmdpbmcgaXRzIG1vZGUuXG5cdFx0XHRcdHRoaXMuY29weVRvV3JpdGFibGUocCwgY3JlZCk7XG5cdFx0XHR9XG5cdFx0XHRmKCk7XG5cdFx0fSBlbHNlIHtcblx0XHRcdHRocm93IEFwaUVycm9yLkVOT0VOVChwKTtcblx0XHR9XG5cdH1cblxuXHRwcml2YXRlIG9wZXJhdGVPbldyaXRhYmxlQXN5bmMocDogc3RyaW5nLCBjcmVkOiBDcmVkLCBjYjogQkZTT25lQXJnQ2FsbGJhY2spOiB2b2lkIHtcblx0XHR0aGlzLmV4aXN0cyhwLCBjcmVkLCAoZXhpc3RzOiBib29sZWFuKSA9PiB7XG5cdFx0XHRpZiAoIWV4aXN0cykge1xuXHRcdFx0XHRyZXR1cm4gY2IoQXBpRXJyb3IuRU5PRU5UKHApKTtcblx0XHRcdH1cblxuXHRcdFx0dGhpcy5fd3JpdGFibGUuZXhpc3RzKHAsIGNyZWQsIChleGlzdHNXcml0YWJsZTogYm9vbGVhbikgPT4ge1xuXHRcdFx0XHRpZiAoZXhpc3RzV3JpdGFibGUpIHtcblx0XHRcdFx0XHRjYigpO1xuXHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdHJldHVybiB0aGlzLmNvcHlUb1dyaXRhYmxlQXN5bmMocCwgY3JlZCwgY2IpO1xuXHRcdFx0XHR9XG5cdFx0XHR9KTtcblx0XHR9KTtcblx0fVxuXG5cdC8qKlxuXHQgKiBDb3B5IGZyb20gcmVhZGFibGUgdG8gd3JpdGFibGUgc3RvcmFnZS5cblx0ICogUFJFQ09ORElUSU9OOiBGaWxlIGRvZXMgbm90IGV4aXN0IG9uIHdyaXRhYmxlIHN0b3JhZ2UuXG5cdCAqL1xuXHRwcml2YXRlIGNvcHlUb1dyaXRhYmxlKHA6IHN0cmluZywgY3JlZDogQ3JlZCk6IHZvaWQge1xuXHRcdGNvbnN0IHBTdGF0cyA9IHRoaXMuc3RhdFN5bmMocCwgZmFsc2UsIGNyZWQpO1xuXHRcdGlmIChwU3RhdHMuaXNEaXJlY3RvcnkoKSkge1xuXHRcdFx0dGhpcy5fd3JpdGFibGUubWtkaXJTeW5jKHAsIHBTdGF0cy5tb2RlLCBjcmVkKTtcblx0XHR9IGVsc2Uge1xuXHRcdFx0dGhpcy53cml0ZUZpbGVTeW5jKHAsIHRoaXMuX3JlYWRhYmxlLnJlYWRGaWxlU3luYyhwLCBudWxsLCBnZXRGbGFnKCdyJyksIGNyZWQpLCBudWxsLCBnZXRGbGFnKCd3JyksIHRoaXMuc3RhdFN5bmMocCwgZmFsc2UsIGNyZWQpLm1vZGUsIGNyZWQpO1xuXHRcdH1cblx0fVxuXG5cdHByaXZhdGUgY29weVRvV3JpdGFibGVBc3luYyhwOiBzdHJpbmcsIGNyZWQ6IENyZWQsIGNiOiBCRlNPbmVBcmdDYWxsYmFjayk6IHZvaWQge1xuXHRcdHRoaXMuc3RhdChwLCBmYWxzZSwgY3JlZCwgKGVycjogQXBpRXJyb3IsIHBTdGF0cz86IFN0YXRzKSA9PiB7XG5cdFx0XHRpZiAoZXJyKSB7XG5cdFx0XHRcdHJldHVybiBjYihlcnIpO1xuXHRcdFx0fVxuXG5cdFx0XHRpZiAocFN0YXRzIS5pc0RpcmVjdG9yeSgpKSB7XG5cdFx0XHRcdHJldHVybiB0aGlzLl93cml0YWJsZS5ta2RpcihwLCBwU3RhdHMhLm1vZGUsIGNyZWQsIGNiKTtcblx0XHRcdH1cblxuXHRcdFx0Ly8gbmVlZCB0byBjb3B5IGZpbGUuXG5cdFx0XHR0aGlzLl9yZWFkYWJsZS5yZWFkRmlsZShwLCBudWxsLCBnZXRGbGFnKCdyJyksIGNyZWQsIChlcnI6IEFwaUVycm9yLCBkYXRhPzogQnVmZmVyKSA9PiB7XG5cdFx0XHRcdGlmIChlcnIpIHtcblx0XHRcdFx0XHRyZXR1cm4gY2IoZXJyKTtcblx0XHRcdFx0fVxuXG5cdFx0XHRcdHRoaXMud3JpdGVGaWxlKHAsIGRhdGEsIG51bGwsIGdldEZsYWcoJ3cnKSwgcFN0YXRzIS5tb2RlLCBjcmVkLCBjYik7XG5cdFx0XHR9KTtcblx0XHR9KTtcblx0fVxufVxuXG4vKipcbiAqIENvbmZpZ3VyYXRpb24gb3B0aW9ucyBmb3IgT3ZlcmxheUZTIGluc3RhbmNlcy5cbiAqL1xuZXhwb3J0IGludGVyZmFjZSBPdmVybGF5RlNPcHRpb25zIHtcblx0Ly8gVGhlIGZpbGUgc3lzdGVtIHRvIHdyaXRlIG1vZGlmaWVkIGZpbGVzIHRvLlxuXHR3cml0YWJsZTogRmlsZVN5c3RlbTtcblx0Ly8gVGhlIGZpbGUgc3lzdGVtIHRoYXQgaW5pdGlhbGx5IHBvcHVsYXRlcyB0aGlzIGZpbGUgc3lzdGVtLlxuXHRyZWFkYWJsZTogRmlsZVN5c3RlbTtcbn1cblxuLyoqXG4gKiBPdmVybGF5RlMgbWFrZXMgYSByZWFkLW9ubHkgZmlsZXN5c3RlbSB3cml0YWJsZSBieSBzdG9yaW5nIHdyaXRlcyBvbiBhIHNlY29uZCxcbiAqIHdyaXRhYmxlIGZpbGUgc3lzdGVtLiBEZWxldGVzIGFyZSBwZXJzaXN0ZWQgdmlhIG1ldGFkYXRhIHN0b3JlZCBvbiB0aGUgd3JpdGFibGVcbiAqIGZpbGUgc3lzdGVtLlxuICovXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBPdmVybGF5RlMgZXh0ZW5kcyBMb2NrZWRGUzxVbmxvY2tlZE92ZXJsYXlGUz4ge1xuXHRwdWJsaWMgc3RhdGljIHJlYWRvbmx5IE5hbWUgPSAnT3ZlcmxheUZTJztcblxuXHRwdWJsaWMgc3RhdGljIHJlYWRvbmx5IE9wdGlvbnM6IEZpbGVTeXN0ZW1PcHRpb25zID0ge1xuXHRcdHdyaXRhYmxlOiB7XG5cdFx0XHR0eXBlOiAnb2JqZWN0Jyxcblx0XHRcdGRlc2NyaXB0aW9uOiAnVGhlIGZpbGUgc3lzdGVtIHRvIHdyaXRlIG1vZGlmaWVkIGZpbGVzIHRvLicsXG5cdFx0fSxcblx0XHRyZWFkYWJsZToge1xuXHRcdFx0dHlwZTogJ29iamVjdCcsXG5cdFx0XHRkZXNjcmlwdGlvbjogJ1RoZSBmaWxlIHN5c3RlbSB0aGF0IGluaXRpYWxseSBwb3B1bGF0ZXMgdGhpcyBmaWxlIHN5c3RlbS4nLFxuXHRcdH0sXG5cdH07XG5cblx0LyoqXG5cdCAqIENvbnN0cnVjdHMgYW5kIGluaXRpYWxpemVzIGFuIE92ZXJsYXlGUyBpbnN0YW5jZSB3aXRoIHRoZSBnaXZlbiBvcHRpb25zLlxuXHQgKi9cblx0cHVibGljIHN0YXRpYyBDcmVhdGUob3B0czogT3ZlcmxheUZTT3B0aW9ucywgY2I6IEJGU0NhbGxiYWNrPE92ZXJsYXlGUz4pOiB2b2lkIHtcblx0XHR0cnkge1xuXHRcdFx0Y29uc3QgZnMgPSBuZXcgT3ZlcmxheUZTKG9wdHMud3JpdGFibGUsIG9wdHMucmVhZGFibGUpO1xuXHRcdFx0ZnMuX2luaXRpYWxpemUoKGU/KSA9PiB7XG5cdFx0XHRcdGNiKGUsIGZzKTtcblx0XHRcdH0pO1xuXHRcdH0gY2F0Y2ggKGUpIHtcblx0XHRcdGNiKGUpO1xuXHRcdH1cblx0fVxuXG5cdHB1YmxpYyBzdGF0aWMgQ3JlYXRlQXN5bmMob3B0czogT3ZlcmxheUZTT3B0aW9ucyk6IFByb21pc2U8T3ZlcmxheUZTPiB7XG5cdFx0cmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcblx0XHRcdHRoaXMuQ3JlYXRlKG9wdHMsIChlcnJvciwgZnMpID0+IHtcblx0XHRcdFx0aWYgKGVycm9yIHx8ICFmcykge1xuXHRcdFx0XHRcdHJlamVjdChlcnJvcik7XG5cdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0cmVzb2x2ZShmcyk7XG5cdFx0XHRcdH1cblx0XHRcdH0pO1xuXHRcdH0pO1xuXHR9XG5cblx0cHVibGljIHN0YXRpYyBpc0F2YWlsYWJsZSgpOiBib29sZWFuIHtcblx0XHRyZXR1cm4gVW5sb2NrZWRPdmVybGF5RlMuaXNBdmFpbGFibGUoKTtcblx0fVxuXG5cdC8qKlxuXHQgKiBAcGFyYW0gd3JpdGFibGUgVGhlIGZpbGUgc3lzdGVtIHRvIHdyaXRlIG1vZGlmaWVkIGZpbGVzIHRvLlxuXHQgKiBAcGFyYW0gcmVhZGFibGUgVGhlIGZpbGUgc3lzdGVtIHRoYXQgaW5pdGlhbGx5IHBvcHVsYXRlcyB0aGlzIGZpbGUgc3lzdGVtLlxuXHQgKi9cblx0Y29uc3RydWN0b3Iod3JpdGFibGU6IEZpbGVTeXN0ZW0sIHJlYWRhYmxlOiBGaWxlU3lzdGVtKSB7XG5cdFx0c3VwZXIobmV3IFVubG9ja2VkT3ZlcmxheUZTKHdyaXRhYmxlLCByZWFkYWJsZSkpO1xuXHR9XG5cblx0cHVibGljIGdldE92ZXJsYXllZEZpbGVTeXN0ZW1zKCk6IHsgcmVhZGFibGU6IEZpbGVTeXN0ZW07IHdyaXRhYmxlOiBGaWxlU3lzdGVtIH0ge1xuXHRcdHJldHVybiBzdXBlci5nZXRGU1VubG9ja2VkKCkuZ2V0T3ZlcmxheWVkRmlsZVN5c3RlbXMoKTtcblx0fVxuXG5cdHB1YmxpYyB1bndyYXAoKTogVW5sb2NrZWRPdmVybGF5RlMge1xuXHRcdHJldHVybiBzdXBlci5nZXRGU1VubG9ja2VkKCk7XG5cdH1cblxuXHRwcml2YXRlIF9pbml0aWFsaXplKGNiOiBCRlNPbmVBcmdDYWxsYmFjayk6IHZvaWQge1xuXHRcdHN1cGVyLmdldEZTVW5sb2NrZWQoKS5faW5pdGlhbGl6ZShjYik7XG5cdH1cbn1cbiIsICJpbXBvcnQgeyBCYXNlRmlsZVN5c3RlbSwgRmlsZVN5c3RlbSwgQkZTT25lQXJnQ2FsbGJhY2ssIEJGU0NhbGxiYWNrLCBGaWxlU3lzdGVtT3B0aW9ucyB9IGZyb20gJy4uL2NvcmUvZmlsZV9zeXN0ZW0nO1xuaW1wb3J0IHsgQXBpRXJyb3IsIEVycm9yQ29kZSB9IGZyb20gJy4uL2NvcmUvYXBpX2Vycm9yJztcbmltcG9ydCB7IEZpbGVGbGFnIH0gZnJvbSAnLi4vY29yZS9maWxlX2ZsYWcnO1xuaW1wb3J0IHsgYnVmZmVyMkFycmF5QnVmZmVyLCBhcnJheUJ1ZmZlcjJCdWZmZXIsIGVtcHR5QnVmZmVyIH0gZnJvbSAnLi4vY29yZS91dGlsJztcbmltcG9ydCB7IEZpbGUsIEJhc2VGaWxlIH0gZnJvbSAnLi4vY29yZS9maWxlJztcbmltcG9ydCB7IGRlZmF1bHQgYXMgU3RhdHMgfSBmcm9tICcuLi9jb3JlL3N0YXRzJztcbmltcG9ydCBQcmVsb2FkRmlsZSBmcm9tICcuLi9nZW5lcmljL3ByZWxvYWRfZmlsZSc7XG5pbXBvcnQgZnMgZnJvbSAnLi4vY29yZS9ub2RlX2ZzJztcbmltcG9ydCBDcmVkIGZyb20gJy4uL2NvcmUvY3JlZCc7XG5pbXBvcnQgeyBCdWZmZXIgfSBmcm9tICdidWZmZXInO1xuXG4vKipcbiAqIEBoaWRkZW5cbiAqL1xuZGVjbGFyZSBjb25zdCBpbXBvcnRTY3JpcHRzOiBGdW5jdGlvbjtcblxuLyoqXG4gKiBAaGlkZGVuXG4gKi9cbmludGVyZmFjZSBJQnJvd3NlckZTTWVzc2FnZSB7XG5cdGJyb3dzZXJmc01lc3NhZ2U6IGJvb2xlYW47XG59XG5cbi8qKlxuICogQGhpZGRlblxuICovXG5lbnVtIFNwZWNpYWxBcmdUeXBlIHtcblx0Ly8gQ2FsbGJhY2tcblx0Q0IsXG5cdC8vIEZpbGUgZGVzY3JpcHRvclxuXHRGRCxcblx0Ly8gQVBJIGVycm9yXG5cdEFQSV9FUlJPUixcblx0Ly8gU3RhdHMgb2JqZWN0XG5cdFNUQVRTLFxuXHQvLyBJbml0aWFsIHByb2JlIGZvciBmaWxlIHN5c3RlbSBpbmZvcm1hdGlvbi5cblx0UFJPQkUsXG5cdC8vIEZpbGVGbGFnIG9iamVjdC5cblx0RklMRUZMQUcsXG5cdC8vIEJ1ZmZlciBvYmplY3QuXG5cdEJVRkZFUixcblx0Ly8gR2VuZXJpYyBFcnJvciBvYmplY3QuXG5cdEVSUk9SLFxufVxuXG4vKipcbiAqIEBoaWRkZW5cbiAqL1xuaW50ZXJmYWNlIElTcGVjaWFsQXJndW1lbnQge1xuXHR0eXBlOiBTcGVjaWFsQXJnVHlwZTtcbn1cblxuLyoqXG4gKiBAaGlkZGVuXG4gKi9cbmludGVyZmFjZSBJUHJvYmVSZXNwb25zZSBleHRlbmRzIElTcGVjaWFsQXJndW1lbnQge1xuXHRpc1JlYWRPbmx5OiBib29sZWFuO1xuXHRzdXBwb3J0c0xpbmtzOiBib29sZWFuO1xuXHRzdXBwb3J0c1Byb3BzOiBib29sZWFuO1xufVxuXG4vKipcbiAqIEBoaWRkZW5cbiAqL1xuaW50ZXJmYWNlIElDYWxsYmFja0FyZ3VtZW50IGV4dGVuZHMgSVNwZWNpYWxBcmd1bWVudCB7XG5cdC8vIFRoZSBjYWxsYmFjayBJRC5cblx0aWQ6IG51bWJlcjtcbn1cblxuLyoqXG4gKiBDb252ZXJ0cyBjYWxsYmFjayBhcmd1bWVudHMgaW50byBJQ2FsbGJhY2tBcmd1bWVudCBvYmplY3RzLCBhbmQgYmFja1xuICogYWdhaW4uXG4gKiBAaGlkZGVuXG4gKi9cbmNsYXNzIENhbGxiYWNrQXJndW1lbnRDb252ZXJ0ZXIge1xuXHRwcml2YXRlIF9jYWxsYmFja3M6IHsgW2lkOiBudW1iZXJdOiBGdW5jdGlvbiB9ID0ge307XG5cdHByaXZhdGUgX25leHRJZDogbnVtYmVyID0gMDtcblxuXHRwdWJsaWMgdG9SZW1vdGVBcmcoY2I6IEZ1bmN0aW9uKTogSUNhbGxiYWNrQXJndW1lbnQge1xuXHRcdGNvbnN0IGlkID0gdGhpcy5fbmV4dElkKys7XG5cdFx0dGhpcy5fY2FsbGJhY2tzW2lkXSA9IGNiO1xuXHRcdHJldHVybiB7XG5cdFx0XHR0eXBlOiBTcGVjaWFsQXJnVHlwZS5DQixcblx0XHRcdGlkOiBpZCxcblx0XHR9O1xuXHR9XG5cblx0cHVibGljIHRvTG9jYWxBcmcoaWQ6IG51bWJlcik6IEZ1bmN0aW9uIHtcblx0XHRjb25zdCBjYiA9IHRoaXMuX2NhbGxiYWNrc1tpZF07XG5cdFx0ZGVsZXRlIHRoaXMuX2NhbGxiYWNrc1tpZF07XG5cdFx0cmV0dXJuIGNiO1xuXHR9XG59XG5cbi8qKlxuICogQGhpZGRlblxuICovXG5pbnRlcmZhY2UgSUZpbGVEZXNjcmlwdG9yQXJndW1lbnQgZXh0ZW5kcyBJU3BlY2lhbEFyZ3VtZW50IHtcblx0Ly8gVGhlIGZpbGUgZGVzY3JpcHRvcidzIGlkIG9uIHRoZSByZW1vdGUgc2lkZS5cblx0aWQ6IG51bWJlcjtcblx0Ly8gVGhlIGVudGlyZSBmaWxlJ3MgZGF0YSwgYXMgYW4gYXJyYXkgYnVmZmVyLlxuXHRkYXRhOiBBcnJheUJ1ZmZlciB8IFNoYXJlZEFycmF5QnVmZmVyO1xuXHQvLyBUaGUgZmlsZSdzIHN0YXQgb2JqZWN0LCBhcyBhbiBhcnJheSBidWZmZXIuXG5cdHN0YXQ6IEFycmF5QnVmZmVyIHwgU2hhcmVkQXJyYXlCdWZmZXI7XG5cdC8vIFRoZSBwYXRoIHRvIHRoZSBmaWxlLlxuXHRwYXRoOiBzdHJpbmc7XG5cdC8vIFRoZSBmbGFnIG9mIHRoZSBvcGVuIGZpbGUgZGVzY3JpcHRvci5cblx0ZmxhZzogc3RyaW5nO1xufVxuXG4vKipcbiAqIEBoaWRkZW5cbiAqL1xuY2xhc3MgRmlsZURlc2NyaXB0b3JBcmd1bWVudENvbnZlcnRlciB7XG5cdHByaXZhdGUgX2ZpbGVEZXNjcmlwdG9yczogeyBbaWQ6IG51bWJlcl06IEZpbGUgfSA9IHt9O1xuXHRwcml2YXRlIF9uZXh0SWQ6IG51bWJlciA9IDA7XG5cblx0cHVibGljIHRvUmVtb3RlQXJnKGZkOiBGaWxlLCBwOiBzdHJpbmcsIGZsYWc6IEZpbGVGbGFnLCBjYjogQkZTQ2FsbGJhY2s8SUZpbGVEZXNjcmlwdG9yQXJndW1lbnQ+KTogdm9pZCB7XG5cdFx0Y29uc3QgaWQgPSB0aGlzLl9uZXh0SWQrKztcblx0XHRsZXQgZGF0YTogQXJyYXlCdWZmZXIgfCBTaGFyZWRBcnJheUJ1ZmZlcjtcblx0XHRsZXQgc3RhdDogQXJyYXlCdWZmZXIgfCBTaGFyZWRBcnJheUJ1ZmZlcjtcblx0XHR0aGlzLl9maWxlRGVzY3JpcHRvcnNbaWRdID0gZmQ7XG5cblx0XHQvLyBFeHRyYWN0IG5lZWRlZCBpbmZvcm1hdGlvbiBhc3luY2hyb25vdXNseS5cblx0XHRmZC5zdGF0KChlcnIsIHN0YXRzKSA9PiB7XG5cdFx0XHRpZiAoZXJyKSB7XG5cdFx0XHRcdGNiKGVycik7XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRzdGF0ID0gYnVmZmVyVG9UcmFuc2ZlcnJhYmxlT2JqZWN0KHN0YXRzIS50b0J1ZmZlcigpKTtcblx0XHRcdFx0Ly8gSWYgaXQncyBhIHJlYWRhYmxlIGZsYWcsIHdlIG5lZWQgdG8gZ3JhYiBjb250ZW50cy5cblx0XHRcdFx0aWYgKGZsYWcuaXNSZWFkYWJsZSgpKSB7XG5cdFx0XHRcdFx0ZmQucmVhZChCdWZmZXIuYWxsb2Moc3RhdHMhLnNpemUpLCAwLCBzdGF0cyEuc2l6ZSwgMCwgKGVycj86IEFwaUVycm9yIHwgbnVsbCwgYnl0ZXNSZWFkPzogbnVtYmVyLCBidWZmPzogQnVmZmVyKSA9PiB7XG5cdFx0XHRcdFx0XHRpZiAoZXJyKSB7XG5cdFx0XHRcdFx0XHRcdGNiKGVycik7XG5cdFx0XHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdFx0XHRkYXRhID0gYnVmZmVyVG9UcmFuc2ZlcnJhYmxlT2JqZWN0KGJ1ZmYhKTtcblx0XHRcdFx0XHRcdFx0Y2IobnVsbCwge1xuXHRcdFx0XHRcdFx0XHRcdHR5cGU6IFNwZWNpYWxBcmdUeXBlLkZELFxuXHRcdFx0XHRcdFx0XHRcdGlkOiBpZCxcblx0XHRcdFx0XHRcdFx0XHRkYXRhOiBkYXRhLFxuXHRcdFx0XHRcdFx0XHRcdHN0YXQ6IHN0YXQsXG5cdFx0XHRcdFx0XHRcdFx0cGF0aDogcCxcblx0XHRcdFx0XHRcdFx0XHRmbGFnOiBmbGFnLmdldEZsYWdTdHJpbmcoKSxcblx0XHRcdFx0XHRcdFx0fSk7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fSk7XG5cdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0Ly8gRmlsZSBpcyBub3QgcmVhZGFibGUsIHdoaWNoIG1lYW5zIHdyaXRpbmcgdG8gaXQgd2lsbCBhcHBlbmQgb3Jcblx0XHRcdFx0XHQvLyB0cnVuY2F0ZS9yZXBsYWNlIGV4aXN0aW5nIGNvbnRlbnRzLiBSZXR1cm4gYW4gZW1wdHkgYXJyYXlidWZmZXIuXG5cdFx0XHRcdFx0Y2IobnVsbCwge1xuXHRcdFx0XHRcdFx0dHlwZTogU3BlY2lhbEFyZ1R5cGUuRkQsXG5cdFx0XHRcdFx0XHRpZDogaWQsXG5cdFx0XHRcdFx0XHRkYXRhOiBuZXcgQXJyYXlCdWZmZXIoMCksXG5cdFx0XHRcdFx0XHRzdGF0OiBzdGF0LFxuXHRcdFx0XHRcdFx0cGF0aDogcCxcblx0XHRcdFx0XHRcdGZsYWc6IGZsYWcuZ2V0RmxhZ1N0cmluZygpLFxuXHRcdFx0XHRcdH0pO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fSk7XG5cdH1cblxuXHRwdWJsaWMgYXBwbHlGZEFQSVJlcXVlc3QocmVxdWVzdDogSUFQSVJlcXVlc3QsIGNiOiBCRlNPbmVBcmdDYWxsYmFjayk6IHZvaWQge1xuXHRcdGNvbnN0IGZkQXJnID0gPElGaWxlRGVzY3JpcHRvckFyZ3VtZW50PnJlcXVlc3QuYXJnc1swXTtcblx0XHR0aGlzLl9hcHBseUZkQ2hhbmdlcyhmZEFyZywgKGVyciwgZmQ/KSA9PiB7XG5cdFx0XHRpZiAoZXJyKSB7XG5cdFx0XHRcdGNiKGVycik7XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHQvLyBBcHBseSBtZXRob2Qgb24gbm93LWNoYW5nZWQgZmlsZSBkZXNjcmlwdG9yLlxuXHRcdFx0XHQoPGFueT5mZClbcmVxdWVzdC5tZXRob2RdKChlPzogQXBpRXJyb3IpID0+IHtcblx0XHRcdFx0XHRpZiAocmVxdWVzdC5tZXRob2QgPT09ICdjbG9zZScpIHtcblx0XHRcdFx0XHRcdGRlbGV0ZSB0aGlzLl9maWxlRGVzY3JpcHRvcnNbZmRBcmcuaWRdO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHRjYihlKTtcblx0XHRcdFx0fSk7XG5cdFx0XHR9XG5cdFx0fSk7XG5cdH1cblxuXHRwcml2YXRlIF9hcHBseUZkQ2hhbmdlcyhyZW1vdGVGZDogSUZpbGVEZXNjcmlwdG9yQXJndW1lbnQsIGNiOiBCRlNDYWxsYmFjazxGaWxlPik6IHZvaWQge1xuXHRcdGNvbnN0IGZkID0gdGhpcy5fZmlsZURlc2NyaXB0b3JzW3JlbW90ZUZkLmlkXSxcblx0XHRcdGRhdGEgPSB0cmFuc2ZlcnJhYmxlT2JqZWN0VG9CdWZmZXIocmVtb3RlRmQuZGF0YSksXG5cdFx0XHRyZW1vdGVTdGF0cyA9IFN0YXRzLmZyb21CdWZmZXIodHJhbnNmZXJyYWJsZU9iamVjdFRvQnVmZmVyKHJlbW90ZUZkLnN0YXQpKTtcblxuXHRcdC8vIFdyaXRlIGRhdGEgaWYgdGhlIGZpbGUgaXMgd3JpdGFibGUuXG5cdFx0Y29uc3QgZmxhZyA9IEZpbGVGbGFnLmdldEZpbGVGbGFnKHJlbW90ZUZkLmZsYWcpO1xuXHRcdGlmIChmbGFnLmlzV3JpdGVhYmxlKCkpIHtcblx0XHRcdC8vIEFwcGVuZGFibGU6IFdyaXRlIHRvIGVuZCBvZiBmaWxlLlxuXHRcdFx0Ly8gV3JpdGVhYmxlOiBSZXBsYWNlIGVudGlyZSBjb250ZW50cyBvZiBmaWxlLlxuXHRcdFx0ZmQud3JpdGUoZGF0YSwgMCwgZGF0YS5sZW5ndGgsIGZsYWcuaXNBcHBlbmRhYmxlKCkgPyBmZC5nZXRQb3MoKSEgOiAwLCAoZT86IEFwaUVycm9yIHwgbnVsbCkgPT4ge1xuXHRcdFx0XHRmdW5jdGlvbiBhcHBseVN0YXRDaGFuZ2VzKCkge1xuXHRcdFx0XHRcdC8vIENoZWNrIGlmIG1vZGUgY2hhbmdlZC5cblx0XHRcdFx0XHRmZC5zdGF0KChlLCBzdGF0cz8pID0+IHtcblx0XHRcdFx0XHRcdGlmIChlKSB7XG5cdFx0XHRcdFx0XHRcdGNiKGUpO1xuXHRcdFx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRcdFx0aWYgKHN0YXRzIS5tb2RlICE9PSByZW1vdGVTdGF0cy5tb2RlKSB7XG5cdFx0XHRcdFx0XHRcdFx0ZmQuY2htb2QocmVtb3RlU3RhdHMubW9kZSwgKGU6IGFueSkgPT4ge1xuXHRcdFx0XHRcdFx0XHRcdFx0Y2IoZSwgZmQpO1xuXHRcdFx0XHRcdFx0XHRcdH0pO1xuXHRcdFx0XHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdFx0XHRcdGNiKGUsIGZkKTtcblx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH0pO1xuXHRcdFx0XHR9XG5cdFx0XHRcdGlmIChlKSB7XG5cdFx0XHRcdFx0Y2IoZSk7XG5cdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0Ly8gSWYgd3JpdGVhYmxlICYgbm90IGFwcGVuZGFibGUsIHdlIG5lZWQgdG8gZW5zdXJlIGZpbGUgY29udGVudHMgYXJlXG5cdFx0XHRcdFx0Ly8gaWRlbnRpY2FsIHRvIHRob3NlIGZyb20gdGhlIHJlbW90ZSBGRC4gVGh1cywgd2UgdHJ1bmNhdGUgdG8gdGhlXG5cdFx0XHRcdFx0Ly8gbGVuZ3RoIG9mIHRoZSByZW1vdGUgZmlsZS5cblx0XHRcdFx0XHRpZiAoIWZsYWcuaXNBcHBlbmRhYmxlKCkpIHtcblx0XHRcdFx0XHRcdGZkLnRydW5jYXRlKGRhdGEubGVuZ3RoLCAoKSA9PiB7XG5cdFx0XHRcdFx0XHRcdGFwcGx5U3RhdENoYW5nZXMoKTtcblx0XHRcdFx0XHRcdH0pO1xuXHRcdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0XHRhcHBseVN0YXRDaGFuZ2VzKCk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHR9KTtcblx0XHR9IGVsc2Uge1xuXHRcdFx0Y2IobnVsbCwgZmQpO1xuXHRcdH1cblx0fVxufVxuXG4vKipcbiAqIEBoaWRkZW5cbiAqL1xuaW50ZXJmYWNlIElBUElFcnJvckFyZ3VtZW50IGV4dGVuZHMgSVNwZWNpYWxBcmd1bWVudCB7XG5cdC8vIFRoZSBlcnJvciBvYmplY3QsIGFzIGFuIGFycmF5IGJ1ZmZlci5cblx0ZXJyb3JEYXRhOiBBcnJheUJ1ZmZlciB8IFNoYXJlZEFycmF5QnVmZmVyO1xufVxuXG4vKipcbiAqIEBoaWRkZW5cbiAqL1xuZnVuY3Rpb24gYXBpRXJyb3JMb2NhbDJSZW1vdGUoZTogQXBpRXJyb3IpOiBJQVBJRXJyb3JBcmd1bWVudCB7XG5cdHJldHVybiB7XG5cdFx0dHlwZTogU3BlY2lhbEFyZ1R5cGUuQVBJX0VSUk9SLFxuXHRcdGVycm9yRGF0YTogYnVmZmVyVG9UcmFuc2ZlcnJhYmxlT2JqZWN0KGUud3JpdGVUb0J1ZmZlcigpKSxcblx0fTtcbn1cblxuLyoqXG4gKiBAaGlkZGVuXG4gKi9cbmZ1bmN0aW9uIGFwaUVycm9yUmVtb3RlMkxvY2FsKGU6IElBUElFcnJvckFyZ3VtZW50KTogQXBpRXJyb3Ige1xuXHRyZXR1cm4gQXBpRXJyb3IuZnJvbUJ1ZmZlcih0cmFuc2ZlcnJhYmxlT2JqZWN0VG9CdWZmZXIoZS5lcnJvckRhdGEpKTtcbn1cblxuLyoqXG4gKiBAaGlkZGVuXG4gKi9cbmludGVyZmFjZSBJRXJyb3JBcmd1bWVudCBleHRlbmRzIElTcGVjaWFsQXJndW1lbnQge1xuXHQvLyBUaGUgbmFtZSBvZiB0aGUgZXJyb3IgKGUuZy4gJ1R5cGVFcnJvcicpLlxuXHRuYW1lOiBzdHJpbmc7XG5cdC8vIFRoZSBtZXNzYWdlIGFzc29jaWF0ZWQgd2l0aCB0aGUgZXJyb3IuXG5cdG1lc3NhZ2U6IHN0cmluZztcblx0Ly8gVGhlIHN0YWNrIGFzc29jaWF0ZWQgd2l0aCB0aGUgZXJyb3IuXG5cdHN0YWNrOiBzdHJpbmc7XG59XG5cbi8qKlxuICogQGhpZGRlblxuICovXG5mdW5jdGlvbiBlcnJvckxvY2FsMlJlbW90ZShlOiBFcnJvcik6IElFcnJvckFyZ3VtZW50IHtcblx0cmV0dXJuIHtcblx0XHR0eXBlOiBTcGVjaWFsQXJnVHlwZS5FUlJPUixcblx0XHRuYW1lOiBlLm5hbWUsXG5cdFx0bWVzc2FnZTogZS5tZXNzYWdlLFxuXHRcdHN0YWNrOiBlLnN0YWNrISxcblx0fTtcbn1cblxuLyoqXG4gKiBAaGlkZGVuXG4gKi9cbmZ1bmN0aW9uIGVycm9yUmVtb3RlMkxvY2FsKGU6IElFcnJvckFyZ3VtZW50KTogRXJyb3Ige1xuXHRsZXQgY25zdHI6IHtcblx0XHRuZXcgKG1zZzogc3RyaW5nKTogRXJyb3I7XG5cdH0gPSBnbG9iYWxUaGlzW2UubmFtZV07XG5cdGlmICh0eXBlb2YgY25zdHIgIT09ICdmdW5jdGlvbicpIHtcblx0XHRjbnN0ciA9IEVycm9yO1xuXHR9XG5cdGNvbnN0IGVyciA9IG5ldyBjbnN0cihlLm1lc3NhZ2UpO1xuXHRlcnIuc3RhY2sgPSBlLnN0YWNrO1xuXHRyZXR1cm4gZXJyO1xufVxuXG4vKipcbiAqIEBoaWRkZW5cbiAqL1xuaW50ZXJmYWNlIElTdGF0c0FyZ3VtZW50IGV4dGVuZHMgSVNwZWNpYWxBcmd1bWVudCB7XG5cdC8vIFRoZSBzdGF0cyBvYmplY3QgYXMgYW4gYXJyYXkgYnVmZmVyLlxuXHRzdGF0c0RhdGE6IEFycmF5QnVmZmVyIHwgU2hhcmVkQXJyYXlCdWZmZXI7XG59XG5cbi8qKlxuICogQGhpZGRlblxuICovXG5mdW5jdGlvbiBzdGF0c0xvY2FsMlJlbW90ZShzdGF0czogU3RhdHMpOiBJU3RhdHNBcmd1bWVudCB7XG5cdHJldHVybiB7XG5cdFx0dHlwZTogU3BlY2lhbEFyZ1R5cGUuU1RBVFMsXG5cdFx0c3RhdHNEYXRhOiBidWZmZXJUb1RyYW5zZmVycmFibGVPYmplY3Qoc3RhdHMudG9CdWZmZXIoKSksXG5cdH07XG59XG5cbi8qKlxuICogQGhpZGRlblxuICovXG5mdW5jdGlvbiBzdGF0c1JlbW90ZTJMb2NhbChzdGF0czogSVN0YXRzQXJndW1lbnQpOiBTdGF0cyB7XG5cdHJldHVybiBTdGF0cy5mcm9tQnVmZmVyKHRyYW5zZmVycmFibGVPYmplY3RUb0J1ZmZlcihzdGF0cy5zdGF0c0RhdGEpKTtcbn1cblxuLyoqXG4gKiBAaGlkZGVuXG4gKi9cbmludGVyZmFjZSBJRmlsZUZsYWdBcmd1bWVudCBleHRlbmRzIElTcGVjaWFsQXJndW1lbnQge1xuXHRmbGFnU3RyOiBzdHJpbmc7XG59XG5cbi8qKlxuICogQGhpZGRlblxuICovXG5mdW5jdGlvbiBmaWxlRmxhZ0xvY2FsMlJlbW90ZShmbGFnOiBGaWxlRmxhZyk6IElGaWxlRmxhZ0FyZ3VtZW50IHtcblx0cmV0dXJuIHtcblx0XHR0eXBlOiBTcGVjaWFsQXJnVHlwZS5GSUxFRkxBRyxcblx0XHRmbGFnU3RyOiBmbGFnLmdldEZsYWdTdHJpbmcoKSxcblx0fTtcbn1cblxuLyoqXG4gKiBAaGlkZGVuXG4gKi9cbmZ1bmN0aW9uIGZpbGVGbGFnUmVtb3RlMkxvY2FsKHJlbW90ZUZsYWc6IElGaWxlRmxhZ0FyZ3VtZW50KTogRmlsZUZsYWcge1xuXHRyZXR1cm4gRmlsZUZsYWcuZ2V0RmlsZUZsYWcocmVtb3RlRmxhZy5mbGFnU3RyKTtcbn1cblxuLyoqXG4gKiBAaGlkZGVuXG4gKi9cbmludGVyZmFjZSBJQnVmZmVyQXJndW1lbnQgZXh0ZW5kcyBJU3BlY2lhbEFyZ3VtZW50IHtcblx0ZGF0YTogQXJyYXlCdWZmZXIgfCBTaGFyZWRBcnJheUJ1ZmZlcjtcbn1cblxuLyoqXG4gKiBAaGlkZGVuXG4gKi9cbmZ1bmN0aW9uIGJ1ZmZlclRvVHJhbnNmZXJyYWJsZU9iamVjdChidWZmOiBCdWZmZXIpOiBBcnJheUJ1ZmZlciB8IFNoYXJlZEFycmF5QnVmZmVyIHtcblx0cmV0dXJuIGJ1ZmZlcjJBcnJheUJ1ZmZlcihidWZmKTtcbn1cblxuLyoqXG4gKiBAaGlkZGVuXG4gKi9cbmZ1bmN0aW9uIHRyYW5zZmVycmFibGVPYmplY3RUb0J1ZmZlcihidWZmOiBBcnJheUJ1ZmZlciB8IFNoYXJlZEFycmF5QnVmZmVyKTogQnVmZmVyIHtcblx0cmV0dXJuIGFycmF5QnVmZmVyMkJ1ZmZlcihidWZmKTtcbn1cblxuLyoqXG4gKiBAaGlkZGVuXG4gKi9cbmZ1bmN0aW9uIGJ1ZmZlckxvY2FsMlJlbW90ZShidWZmOiBCdWZmZXIpOiBJQnVmZmVyQXJndW1lbnQge1xuXHRyZXR1cm4ge1xuXHRcdHR5cGU6IFNwZWNpYWxBcmdUeXBlLkJVRkZFUixcblx0XHRkYXRhOiBidWZmZXJUb1RyYW5zZmVycmFibGVPYmplY3QoYnVmZiksXG5cdH07XG59XG5cbi8qKlxuICogQGhpZGRlblxuICovXG5mdW5jdGlvbiBidWZmZXJSZW1vdGUyTG9jYWwoYnVmZkFyZzogSUJ1ZmZlckFyZ3VtZW50KTogQnVmZmVyIHtcblx0cmV0dXJuIHRyYW5zZmVycmFibGVPYmplY3RUb0J1ZmZlcihidWZmQXJnLmRhdGEpO1xufVxuXG4vKipcbiAqIEBoaWRkZW5cbiAqL1xuaW50ZXJmYWNlIElBUElSZXF1ZXN0IGV4dGVuZHMgSUJyb3dzZXJGU01lc3NhZ2Uge1xuXHRtZXRob2Q6IHN0cmluZztcblx0YXJnczogQXJyYXk8bnVtYmVyIHwgc3RyaW5nIHwgSVNwZWNpYWxBcmd1bWVudD47XG59XG5cbi8qKlxuICogQGhpZGRlblxuICovXG5mdW5jdGlvbiBpc0FQSVJlcXVlc3QoZGF0YTogYW55KTogZGF0YSBpcyBJQVBJUmVxdWVzdCB7XG5cdHJldHVybiBkYXRhICYmIHR5cGVvZiBkYXRhID09PSAnb2JqZWN0JyAmJiBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoZGF0YSwgJ2Jyb3dzZXJmc01lc3NhZ2UnKSAmJiBkYXRhWydicm93c2VyZnNNZXNzYWdlJ107XG59XG5cbi8qKlxuICogQGhpZGRlblxuICovXG5pbnRlcmZhY2UgSUFQSVJlc3BvbnNlIGV4dGVuZHMgSUJyb3dzZXJGU01lc3NhZ2Uge1xuXHRjYklkOiBudW1iZXI7XG5cdGFyZ3M6IEFycmF5PG51bWJlciB8IHN0cmluZyB8IElTcGVjaWFsQXJndW1lbnQ+O1xufVxuXG4vKipcbiAqIEBoaWRkZW5cbiAqL1xuZnVuY3Rpb24gaXNBUElSZXNwb25zZShkYXRhOiBhbnkpOiBkYXRhIGlzIElBUElSZXNwb25zZSB7XG5cdHJldHVybiBkYXRhICYmIHR5cGVvZiBkYXRhID09PSAnb2JqZWN0JyAmJiBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoZGF0YSwgJ2Jyb3dzZXJmc01lc3NhZ2UnKSAmJiBkYXRhWydicm93c2VyZnNNZXNzYWdlJ107XG59XG5cbi8qKlxuICogUmVwcmVzZW50cyBhIHJlbW90ZSBmaWxlIGluIGEgZGlmZmVyZW50IHdvcmtlci90aHJlYWQuXG4gKi9cbmNsYXNzIFdvcmtlckZpbGUgZXh0ZW5kcyBQcmVsb2FkRmlsZTxXb3JrZXJGUz4ge1xuXHRwcml2YXRlIF9yZW1vdGVGZElkOiBudW1iZXI7XG5cblx0Y29uc3RydWN0b3IoX2ZzOiBXb3JrZXJGUywgX3BhdGg6IHN0cmluZywgX2ZsYWc6IEZpbGVGbGFnLCBfc3RhdDogU3RhdHMsIHJlbW90ZUZkSWQ6IG51bWJlciwgY29udGVudHM/OiBCdWZmZXIpIHtcblx0XHRzdXBlcihfZnMsIF9wYXRoLCBfZmxhZywgX3N0YXQsIGNvbnRlbnRzKTtcblx0XHR0aGlzLl9yZW1vdGVGZElkID0gcmVtb3RlRmRJZDtcblx0fVxuXG5cdHB1YmxpYyBnZXRSZW1vdGVGZElkKCkge1xuXHRcdHJldHVybiB0aGlzLl9yZW1vdGVGZElkO1xuXHR9XG5cblx0LyoqXG5cdCAqIEBoaWRkZW5cblx0ICovXG5cdHB1YmxpYyB0b1JlbW90ZUFyZygpOiBJRmlsZURlc2NyaXB0b3JBcmd1bWVudCB7XG5cdFx0cmV0dXJuIHtcblx0XHRcdHR5cGU6IFNwZWNpYWxBcmdUeXBlLkZELFxuXHRcdFx0aWQ6IHRoaXMuX3JlbW90ZUZkSWQsXG5cdFx0XHRkYXRhOiBidWZmZXJUb1RyYW5zZmVycmFibGVPYmplY3QodGhpcy5nZXRCdWZmZXIoKSksXG5cdFx0XHRzdGF0OiBidWZmZXJUb1RyYW5zZmVycmFibGVPYmplY3QodGhpcy5nZXRTdGF0cygpLnRvQnVmZmVyKCkpLFxuXHRcdFx0cGF0aDogdGhpcy5nZXRQYXRoKCksXG5cdFx0XHRmbGFnOiB0aGlzLmdldEZsYWcoKS5nZXRGbGFnU3RyaW5nKCksXG5cdFx0fTtcblx0fVxuXG5cdHB1YmxpYyBzeW5jKGNiOiBCRlNPbmVBcmdDYWxsYmFjayk6IHZvaWQge1xuXHRcdHRoaXMuX3N5bmNDbG9zZSgnc3luYycsIGNiKTtcblx0fVxuXG5cdHB1YmxpYyBjbG9zZShjYjogQkZTT25lQXJnQ2FsbGJhY2spOiB2b2lkIHtcblx0XHR0aGlzLl9zeW5jQ2xvc2UoJ2Nsb3NlJywgY2IpO1xuXHR9XG5cblx0cHJpdmF0ZSBfc3luY0Nsb3NlKHR5cGU6IHN0cmluZywgY2I6IEJGU09uZUFyZ0NhbGxiYWNrKTogdm9pZCB7XG5cdFx0aWYgKHRoaXMuaXNEaXJ0eSgpKSB7XG5cdFx0XHQoPFdvcmtlckZTPnRoaXMuX2ZzKS5zeW5jQ2xvc2UodHlwZSwgdGhpcywgKGU/OiBBcGlFcnJvcikgPT4ge1xuXHRcdFx0XHRpZiAoIWUpIHtcblx0XHRcdFx0XHR0aGlzLnJlc2V0RGlydHkoKTtcblx0XHRcdFx0fVxuXHRcdFx0XHRjYihlKTtcblx0XHRcdH0pO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHRjYigpO1xuXHRcdH1cblx0fVxufVxuXG5leHBvcnQgaW50ZXJmYWNlIFdvcmtlckZTT3B0aW9ucyB7XG5cdC8vIFRoZSB0YXJnZXQgd29ya2VyIHRoYXQgeW91IHdhbnQgdG8gY29ubmVjdCB0bywgb3IgdGhlIGN1cnJlbnQgd29ya2VyIGlmIGluIGEgd29ya2VyIGNvbnRleHQuXG5cdHdvcmtlcjogV29ya2VyO1xufVxuXG4vKipcbiAqIFdvcmtlckZTIGxldHMgeW91IGFjY2VzcyBhIEJyb3dzZXJGUyBpbnN0YW5jZSB0aGF0IGlzIHJ1bm5pbmcgaW4gYSBkaWZmZXJlbnRcbiAqIEphdmFTY3JpcHQgY29udGV4dCAoZS5nLiBhY2Nlc3MgQnJvd3NlckZTIGluIG9uZSBvZiB5b3VyIFdlYldvcmtlcnMsIG9yXG4gKiBhY2Nlc3MgQnJvd3NlckZTIHJ1bm5pbmcgb24gdGhlIG1haW4gcGFnZSBmcm9tIGEgV2ViV29ya2VyKS5cbiAqXG4gKiBGb3IgZXhhbXBsZSwgdG8gaGF2ZSBhIFdlYldvcmtlciBhY2Nlc3MgZmlsZXMgaW4gdGhlIG1haW4gYnJvd3NlciB0aHJlYWQsXG4gKiBkbyB0aGUgZm9sbG93aW5nOlxuICpcbiAqIE1BSU4gQlJPV1NFUiBUSFJFQUQ6XG4gKlxuICogYGBgamF2YXNjcmlwdFxuICogICAvLyBMaXN0ZW4gZm9yIHJlbW90ZSBmaWxlIHN5c3RlbSByZXF1ZXN0cy5cbiAqICAgQnJvd3NlckZTLkZpbGVTeXN0ZW0uV29ya2VyRlMuYXR0YWNoUmVtb3RlTGlzdGVuZXIod2ViV29ya2VyT2JqZWN0KTtcbiAqIGBgYFxuICpcbiAqIFdFQldPUktFUiBUSFJFQUQ6XG4gKlxuICogYGBgamF2YXNjcmlwdFxuICogICAvLyBTZXQgdGhlIHJlbW90ZSBmaWxlIHN5c3RlbSBhcyB0aGUgcm9vdCBmaWxlIHN5c3RlbS5cbiAqICAgQnJvd3NlckZTLmNvbmZpZ3VyZSh7IGZzOiBcIldvcmtlckZTXCIsIG9wdGlvbnM6IHsgd29ya2VyOiBzZWxmIH19LCBmdW5jdGlvbihlKSB7XG4gKiAgICAgLy8gUmVhZHkhXG4gKiAgIH0pO1xuICogYGBgXG4gKlxuICogTm90ZSB0aGF0IHN5bmNocm9ub3VzIG9wZXJhdGlvbnMgYXJlIG5vdCBwZXJtaXR0ZWQgb24gdGhlIFdvcmtlckZTLCByZWdhcmRsZXNzXG4gKiBvZiB0aGUgY29uZmlndXJhdGlvbiBvcHRpb24gb2YgdGhlIHJlbW90ZSBGUy5cbiAqL1xuZXhwb3J0IGRlZmF1bHQgY2xhc3MgV29ya2VyRlMgZXh0ZW5kcyBCYXNlRmlsZVN5c3RlbSBpbXBsZW1lbnRzIEZpbGVTeXN0ZW0ge1xuXHRwdWJsaWMgc3RhdGljIHJlYWRvbmx5IE5hbWUgPSAnV29ya2VyRlMnO1xuXG5cdHB1YmxpYyBzdGF0aWMgcmVhZG9ubHkgT3B0aW9uczogRmlsZVN5c3RlbU9wdGlvbnMgPSB7XG5cdFx0d29ya2VyOiB7XG5cdFx0XHR0eXBlOiAnb2JqZWN0Jyxcblx0XHRcdGRlc2NyaXB0aW9uOiAnVGhlIHRhcmdldCB3b3JrZXIgdGhhdCB5b3Ugd2FudCB0byBjb25uZWN0IHRvLCBvciB0aGUgY3VycmVudCB3b3JrZXIgaWYgaW4gYSB3b3JrZXIgY29udGV4dC4nLFxuXHRcdFx0dmFsaWRhdG9yOiBmdW5jdGlvbiAodjogb2JqZWN0LCBjYjogQkZTT25lQXJnQ2FsbGJhY2spOiB2b2lkIHtcblx0XHRcdFx0Ly8gQ2hlY2sgZm9yIGEgYHBvc3RNZXNzYWdlYCBmdW5jdGlvbi5cblx0XHRcdFx0aWYgKCg8YW55PnYpWydwb3N0TWVzc2FnZSddKSB7XG5cdFx0XHRcdFx0Y2IoKTtcblx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRjYihuZXcgQXBpRXJyb3IoRXJyb3JDb2RlLkVJTlZBTCwgYG9wdGlvbiBtdXN0IGJlIGEgV2ViIFdvcmtlciBpbnN0YW5jZS5gKSk7XG5cdFx0XHRcdH1cblx0XHRcdH0sXG5cdFx0fSxcblx0fTtcblxuXHRwdWJsaWMgc3RhdGljIENyZWF0ZShvcHRzOiBXb3JrZXJGU09wdGlvbnMsIGNiOiBCRlNDYWxsYmFjazxXb3JrZXJGUz4pOiB2b2lkIHtcblx0XHRjb25zdCBmcyA9IG5ldyBXb3JrZXJGUyhvcHRzLndvcmtlcik7XG5cdFx0ZnMuX2luaXRpYWxpemUoKCkgPT4ge1xuXHRcdFx0Y2IobnVsbCwgZnMpO1xuXHRcdH0pO1xuXHR9XG5cblx0cHVibGljIHN0YXRpYyBDcmVhdGVBc3luYyhvcHRzOiBXb3JrZXJGU09wdGlvbnMpOiBQcm9taXNlPFdvcmtlckZTPiB7XG5cdFx0cmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcblx0XHRcdHRoaXMuQ3JlYXRlKG9wdHMsIChlcnJvciwgZnMpID0+IHtcblx0XHRcdFx0aWYgKGVycm9yIHx8ICFmcykge1xuXHRcdFx0XHRcdHJlamVjdChlcnJvcik7XG5cdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0cmVzb2x2ZShmcyk7XG5cdFx0XHRcdH1cblx0XHRcdH0pO1xuXHRcdH0pO1xuXHR9XG5cblx0cHVibGljIHN0YXRpYyBpc0F2YWlsYWJsZSgpOiBib29sZWFuIHtcblx0XHRyZXR1cm4gdHlwZW9mIGltcG9ydFNjcmlwdHMgIT09ICd1bmRlZmluZWQnIHx8IHR5cGVvZiBXb3JrZXIgIT09ICd1bmRlZmluZWQnO1xuXHR9XG5cblx0LyoqXG5cdCAqIEF0dGFjaGVzIGEgbGlzdGVuZXIgdG8gdGhlIHJlbW90ZSB3b3JrZXIgZm9yIGZpbGUgc3lzdGVtIHJlcXVlc3RzLlxuXHQgKi9cblx0cHVibGljIHN0YXRpYyBhdHRhY2hSZW1vdGVMaXN0ZW5lcih3b3JrZXI6IFdvcmtlcikge1xuXHRcdGNvbnN0IGZkQ29udmVydGVyID0gbmV3IEZpbGVEZXNjcmlwdG9yQXJndW1lbnRDb252ZXJ0ZXIoKTtcblxuXHRcdGZ1bmN0aW9uIGFyZ0xvY2FsMlJlbW90ZShhcmc6IGFueSwgcmVxdWVzdEFyZ3M6IGFueVtdLCBjYjogQkZTQ2FsbGJhY2s8YW55Pik6IHZvaWQge1xuXHRcdFx0c3dpdGNoICh0eXBlb2YgYXJnKSB7XG5cdFx0XHRcdGNhc2UgJ29iamVjdCc6XG5cdFx0XHRcdFx0aWYgKGFyZyBpbnN0YW5jZW9mIFN0YXRzKSB7XG5cdFx0XHRcdFx0XHRjYihudWxsLCBzdGF0c0xvY2FsMlJlbW90ZShhcmcpKTtcblx0XHRcdFx0XHR9IGVsc2UgaWYgKGFyZyBpbnN0YW5jZW9mIEFwaUVycm9yKSB7XG5cdFx0XHRcdFx0XHRjYihudWxsLCBhcGlFcnJvckxvY2FsMlJlbW90ZShhcmcpKTtcblx0XHRcdFx0XHR9IGVsc2UgaWYgKGFyZyBpbnN0YW5jZW9mIEJhc2VGaWxlKSB7XG5cdFx0XHRcdFx0XHQvLyBQYXNzIGluIHAgYW5kIGZsYWdzIGZyb20gb3JpZ2luYWwgcmVxdWVzdC5cblx0XHRcdFx0XHRcdGNiKG51bGwsIGZkQ29udmVydGVyLnRvUmVtb3RlQXJnKDxGaWxlPmFyZywgcmVxdWVzdEFyZ3NbMF0sIHJlcXVlc3RBcmdzWzFdLCBjYikpO1xuXHRcdFx0XHRcdH0gZWxzZSBpZiAoYXJnIGluc3RhbmNlb2YgRmlsZUZsYWcpIHtcblx0XHRcdFx0XHRcdGNiKG51bGwsIGZpbGVGbGFnTG9jYWwyUmVtb3RlKGFyZykpO1xuXHRcdFx0XHRcdH0gZWxzZSBpZiAoYXJnIGluc3RhbmNlb2YgQnVmZmVyKSB7XG5cdFx0XHRcdFx0XHRjYihudWxsLCBidWZmZXJMb2NhbDJSZW1vdGUoYXJnKSk7XG5cdFx0XHRcdFx0fSBlbHNlIGlmIChhcmcgaW5zdGFuY2VvZiBFcnJvcikge1xuXHRcdFx0XHRcdFx0Y2IobnVsbCwgZXJyb3JMb2NhbDJSZW1vdGUoYXJnKSk7XG5cdFx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRcdGNiKG51bGwsIGFyZyk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdGJyZWFrO1xuXHRcdFx0XHRkZWZhdWx0OlxuXHRcdFx0XHRcdGNiKG51bGwsIGFyZyk7XG5cdFx0XHRcdFx0YnJlYWs7XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0ZnVuY3Rpb24gYXJnUmVtb3RlMkxvY2FsKGFyZzogYW55LCBmaXhlZFJlcXVlc3RBcmdzOiBhbnlbXSk6IGFueSB7XG5cdFx0XHRpZiAoIWFyZykge1xuXHRcdFx0XHRyZXR1cm4gYXJnO1xuXHRcdFx0fVxuXHRcdFx0c3dpdGNoICh0eXBlb2YgYXJnKSB7XG5cdFx0XHRcdGNhc2UgJ29iamVjdCc6XG5cdFx0XHRcdFx0aWYgKHR5cGVvZiBhcmdbJ3R5cGUnXSA9PT0gJ251bWJlcicpIHtcblx0XHRcdFx0XHRcdGNvbnN0IHNwZWNpYWxBcmcgPSA8SVNwZWNpYWxBcmd1bWVudD5hcmc7XG5cdFx0XHRcdFx0XHRzd2l0Y2ggKHNwZWNpYWxBcmcudHlwZSkge1xuXHRcdFx0XHRcdFx0XHRjYXNlIFNwZWNpYWxBcmdUeXBlLkNCOlxuXHRcdFx0XHRcdFx0XHRcdGNvbnN0IGNiSWQgPSAoPElDYWxsYmFja0FyZ3VtZW50PmFyZykuaWQ7XG5cdFx0XHRcdFx0XHRcdFx0cmV0dXJuIGZ1bmN0aW9uICgpIHtcblx0XHRcdFx0XHRcdFx0XHRcdGxldCBpOiBudW1iZXI7XG5cdFx0XHRcdFx0XHRcdFx0XHRjb25zdCBmaXhlZEFyZ3MgPSBuZXcgQXJyYXkoYXJndW1lbnRzLmxlbmd0aCk7XG5cdFx0XHRcdFx0XHRcdFx0XHRsZXQgbWVzc2FnZTogSUFQSVJlc3BvbnNlLFxuXHRcdFx0XHRcdFx0XHRcdFx0XHRjb3VudGRvd24gPSBhcmd1bWVudHMubGVuZ3RoO1xuXG5cdFx0XHRcdFx0XHRcdFx0XHRmdW5jdGlvbiBhYm9ydEFuZFNlbmRFcnJvcihlcnI6IEFwaUVycm9yKSB7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdGlmIChjb3VudGRvd24gPiAwKSB7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0Y291bnRkb3duID0gLTE7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0bWVzc2FnZSA9IHtcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdGJyb3dzZXJmc01lc3NhZ2U6IHRydWUsXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRjYklkOiBjYklkLFxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0YXJnczogW2FwaUVycm9yTG9jYWwyUmVtb3RlKGVycildLFxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdH07XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0d29ya2VyLnBvc3RNZXNzYWdlKG1lc3NhZ2UpO1xuXHRcdFx0XHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHRcdFx0XHRcdGZvciAoaSA9IDA7IGkgPCBhcmd1bWVudHMubGVuZ3RoOyBpKyspIHtcblx0XHRcdFx0XHRcdFx0XHRcdFx0Ly8gQ2FwdHVyZSBpIGFuZCBhcmd1bWVudC5cblx0XHRcdFx0XHRcdFx0XHRcdFx0KChpOiBudW1iZXIsIGFyZzogYW55KSA9PiB7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0YXJnTG9jYWwyUmVtb3RlKGFyZywgZml4ZWRSZXF1ZXN0QXJncywgKGVyciwgZml4ZWRBcmc/KSA9PiB7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRmaXhlZEFyZ3NbaV0gPSBmaXhlZEFyZztcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdGlmIChlcnIpIHtcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0YWJvcnRBbmRTZW5kRXJyb3IoZXJyKTtcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdH0gZWxzZSBpZiAoLS1jb3VudGRvd24gPT09IDApIHtcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0bWVzc2FnZSA9IHtcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRicm93c2VyZnNNZXNzYWdlOiB0cnVlLFxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdGNiSWQ6IGNiSWQsXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0YXJnczogZml4ZWRBcmdzLFxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHR9O1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHR3b3JrZXIucG9zdE1lc3NhZ2UobWVzc2FnZSk7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0fSk7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdH0pKGksIGFyZ3VtZW50c1tpXSk7XG5cdFx0XHRcdFx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHRcdFx0XHRcdGlmIChhcmd1bWVudHMubGVuZ3RoID09PSAwKSB7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdG1lc3NhZ2UgPSB7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0YnJvd3NlcmZzTWVzc2FnZTogdHJ1ZSxcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRjYklkOiBjYklkLFxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdGFyZ3M6IGZpeGVkQXJncyxcblx0XHRcdFx0XHRcdFx0XHRcdFx0fTtcblx0XHRcdFx0XHRcdFx0XHRcdFx0d29ya2VyLnBvc3RNZXNzYWdlKG1lc3NhZ2UpO1xuXHRcdFx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0XHRcdH07XG5cdFx0XHRcdFx0XHRcdGNhc2UgU3BlY2lhbEFyZ1R5cGUuQVBJX0VSUk9SOlxuXHRcdFx0XHRcdFx0XHRcdHJldHVybiBhcGlFcnJvclJlbW90ZTJMb2NhbCg8SUFQSUVycm9yQXJndW1lbnQ+c3BlY2lhbEFyZyk7XG5cdFx0XHRcdFx0XHRcdGNhc2UgU3BlY2lhbEFyZ1R5cGUuU1RBVFM6XG5cdFx0XHRcdFx0XHRcdFx0cmV0dXJuIHN0YXRzUmVtb3RlMkxvY2FsKDxJU3RhdHNBcmd1bWVudD5zcGVjaWFsQXJnKTtcblx0XHRcdFx0XHRcdFx0Y2FzZSBTcGVjaWFsQXJnVHlwZS5GSUxFRkxBRzpcblx0XHRcdFx0XHRcdFx0XHRyZXR1cm4gZmlsZUZsYWdSZW1vdGUyTG9jYWwoPElGaWxlRmxhZ0FyZ3VtZW50PnNwZWNpYWxBcmcpO1xuXHRcdFx0XHRcdFx0XHRjYXNlIFNwZWNpYWxBcmdUeXBlLkJVRkZFUjpcblx0XHRcdFx0XHRcdFx0XHRyZXR1cm4gYnVmZmVyUmVtb3RlMkxvY2FsKDxJQnVmZmVyQXJndW1lbnQ+c3BlY2lhbEFyZyk7XG5cdFx0XHRcdFx0XHRcdGNhc2UgU3BlY2lhbEFyZ1R5cGUuRVJST1I6XG5cdFx0XHRcdFx0XHRcdFx0cmV0dXJuIGVycm9yUmVtb3RlMkxvY2FsKDxJRXJyb3JBcmd1bWVudD5zcGVjaWFsQXJnKTtcblx0XHRcdFx0XHRcdFx0ZGVmYXVsdDpcblx0XHRcdFx0XHRcdFx0XHQvLyBObyBpZGVhIHdoYXQgdGhpcyBpcy5cblx0XHRcdFx0XHRcdFx0XHRyZXR1cm4gYXJnO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0XHRyZXR1cm4gYXJnO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0ZGVmYXVsdDpcblx0XHRcdFx0XHRyZXR1cm4gYXJnO1xuXHRcdFx0fVxuXHRcdH1cblxuXHRcdHdvcmtlci5hZGRFdmVudExpc3RlbmVyKCdtZXNzYWdlJywgKGU6IE1lc3NhZ2VFdmVudCkgPT4ge1xuXHRcdFx0Y29uc3QgcmVxdWVzdDogb2JqZWN0ID0gZS5kYXRhO1xuXHRcdFx0aWYgKGlzQVBJUmVxdWVzdChyZXF1ZXN0KSkge1xuXHRcdFx0XHRjb25zdCBhcmdzID0gcmVxdWVzdC5hcmdzLFxuXHRcdFx0XHRcdGZpeGVkQXJncyA9IG5ldyBBcnJheTxhbnk+KGFyZ3MubGVuZ3RoKTtcblxuXHRcdFx0XHRzd2l0Y2ggKHJlcXVlc3QubWV0aG9kKSB7XG5cdFx0XHRcdFx0Y2FzZSAnY2xvc2UnOlxuXHRcdFx0XHRcdGNhc2UgJ3N5bmMnOlxuXHRcdFx0XHRcdFx0KCgpID0+IHtcblx0XHRcdFx0XHRcdFx0Ly8gRmlsZSBkZXNjcmlwdG9yLXJlbGF0aXZlIG1ldGhvZHMuXG5cdFx0XHRcdFx0XHRcdGNvbnN0IHJlbW90ZUNiID0gPElDYWxsYmFja0FyZ3VtZW50PmFyZ3NbMV07XG5cdFx0XHRcdFx0XHRcdGZkQ29udmVydGVyLmFwcGx5RmRBUElSZXF1ZXN0KHJlcXVlc3QsIChlcnI/OiBBcGlFcnJvcikgPT4ge1xuXHRcdFx0XHRcdFx0XHRcdC8vIFNlbmQgcmVzcG9uc2UuXG5cdFx0XHRcdFx0XHRcdFx0Y29uc3QgcmVzcG9uc2U6IElBUElSZXNwb25zZSA9IHtcblx0XHRcdFx0XHRcdFx0XHRcdGJyb3dzZXJmc01lc3NhZ2U6IHRydWUsXG5cdFx0XHRcdFx0XHRcdFx0XHRjYklkOiByZW1vdGVDYi5pZCxcblx0XHRcdFx0XHRcdFx0XHRcdGFyZ3M6IGVyciA/IFthcGlFcnJvckxvY2FsMlJlbW90ZShlcnIpXSA6IFtdLFxuXHRcdFx0XHRcdFx0XHRcdH07XG5cdFx0XHRcdFx0XHRcdFx0d29ya2VyLnBvc3RNZXNzYWdlKHJlc3BvbnNlKTtcblx0XHRcdFx0XHRcdFx0fSk7XG5cdFx0XHRcdFx0XHR9KSgpO1xuXHRcdFx0XHRcdFx0YnJlYWs7XG5cdFx0XHRcdFx0Y2FzZSAncHJvYmUnOlxuXHRcdFx0XHRcdFx0KCgpID0+IHtcblx0XHRcdFx0XHRcdFx0Y29uc3Qgcm9vdEZzID0gPEZpbGVTeXN0ZW0+ZnMuZ2V0Um9vdEZTKCksXG5cdFx0XHRcdFx0XHRcdFx0cmVtb3RlQ2IgPSA8SUNhbGxiYWNrQXJndW1lbnQ+YXJnc1sxXSxcblx0XHRcdFx0XHRcdFx0XHRwcm9iZVJlc3BvbnNlOiBJUHJvYmVSZXNwb25zZSA9IHtcblx0XHRcdFx0XHRcdFx0XHRcdHR5cGU6IFNwZWNpYWxBcmdUeXBlLlBST0JFLFxuXHRcdFx0XHRcdFx0XHRcdFx0aXNSZWFkT25seTogcm9vdEZzLmlzUmVhZE9ubHkoKSxcblx0XHRcdFx0XHRcdFx0XHRcdHN1cHBvcnRzTGlua3M6IHJvb3RGcy5zdXBwb3J0c0xpbmtzKCksXG5cdFx0XHRcdFx0XHRcdFx0XHRzdXBwb3J0c1Byb3BzOiByb290RnMuc3VwcG9ydHNQcm9wcygpLFxuXHRcdFx0XHRcdFx0XHRcdH0sXG5cdFx0XHRcdFx0XHRcdFx0cmVzcG9uc2U6IElBUElSZXNwb25zZSA9IHtcblx0XHRcdFx0XHRcdFx0XHRcdGJyb3dzZXJmc01lc3NhZ2U6IHRydWUsXG5cdFx0XHRcdFx0XHRcdFx0XHRjYklkOiByZW1vdGVDYi5pZCxcblx0XHRcdFx0XHRcdFx0XHRcdGFyZ3M6IFtwcm9iZVJlc3BvbnNlXSxcblx0XHRcdFx0XHRcdFx0XHR9O1xuXG5cdFx0XHRcdFx0XHRcdHdvcmtlci5wb3N0TWVzc2FnZShyZXNwb25zZSk7XG5cdFx0XHRcdFx0XHR9KSgpO1xuXHRcdFx0XHRcdFx0YnJlYWs7XG5cdFx0XHRcdFx0ZGVmYXVsdDpcblx0XHRcdFx0XHRcdC8vIEZpbGUgc3lzdGVtIG1ldGhvZHMuXG5cdFx0XHRcdFx0XHRmb3IgKGxldCBpID0gMDsgaSA8IGFyZ3MubGVuZ3RoOyBpKyspIHtcblx0XHRcdFx0XHRcdFx0Zml4ZWRBcmdzW2ldID0gYXJnUmVtb3RlMkxvY2FsKGFyZ3NbaV0sIGZpeGVkQXJncyk7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRjb25zdCByb290RlMgPSBmcy5nZXRSb290RlMoKTtcblx0XHRcdFx0XHRcdCg8RnVuY3Rpb24+KDxhbnk+cm9vdEZTKVtyZXF1ZXN0Lm1ldGhvZF0pLmFwcGx5KHJvb3RGUywgZml4ZWRBcmdzKTtcblx0XHRcdFx0XHRcdGJyZWFrO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fSk7XG5cdH1cblxuXHRwcml2YXRlIF93b3JrZXI6IFdvcmtlcjtcblx0cHJpdmF0ZSBfY2FsbGJhY2tDb252ZXJ0ZXIgPSBuZXcgQ2FsbGJhY2tBcmd1bWVudENvbnZlcnRlcigpO1xuXG5cdHByaXZhdGUgX2lzSW5pdGlhbGl6ZWQ6IGJvb2xlYW4gPSBmYWxzZTtcblx0cHJpdmF0ZSBfaXNSZWFkT25seTogYm9vbGVhbiA9IGZhbHNlO1xuXHRwcml2YXRlIF9zdXBwb3J0TGlua3M6IGJvb2xlYW4gPSBmYWxzZTtcblx0cHJpdmF0ZSBfc3VwcG9ydFByb3BzOiBib29sZWFuID0gZmFsc2U7XG5cblx0LyoqXG5cdCAqIENvbnN0cnVjdHMgYSBuZXcgV29ya2VyRlMgaW5zdGFuY2UgdGhhdCBjb25uZWN0cyB3aXRoIEJyb3dzZXJGUyBydW5uaW5nIG9uXG5cdCAqIHRoZSBzcGVjaWZpZWQgd29ya2VyLlxuXHQgKi9cblx0cHJpdmF0ZSBjb25zdHJ1Y3Rvcih3b3JrZXI6IFdvcmtlcikge1xuXHRcdHN1cGVyKCk7XG5cdFx0dGhpcy5fd29ya2VyID0gd29ya2VyO1xuXHRcdHRoaXMuX3dvcmtlci5hZGRFdmVudExpc3RlbmVyKCdtZXNzYWdlJywgKGU6IE1lc3NhZ2VFdmVudCkgPT4ge1xuXHRcdFx0Y29uc3QgcmVzcDogb2JqZWN0ID0gZS5kYXRhO1xuXHRcdFx0aWYgKGlzQVBJUmVzcG9uc2UocmVzcCkpIHtcblx0XHRcdFx0bGV0IGk6IG51bWJlcjtcblx0XHRcdFx0Y29uc3QgYXJncyA9IHJlc3AuYXJncztcblx0XHRcdFx0Y29uc3QgZml4ZWRBcmdzID0gbmV3IEFycmF5KGFyZ3MubGVuZ3RoKTtcblx0XHRcdFx0Ly8gRGlzcGF0Y2ggZXZlbnQgdG8gY29ycmVjdCBpZC5cblx0XHRcdFx0Zm9yIChpID0gMDsgaSA8IGZpeGVkQXJncy5sZW5ndGg7IGkrKykge1xuXHRcdFx0XHRcdGZpeGVkQXJnc1tpXSA9IHRoaXMuX2FyZ1JlbW90ZTJMb2NhbChhcmdzW2ldKTtcblx0XHRcdFx0fVxuXHRcdFx0XHR0aGlzLl9jYWxsYmFja0NvbnZlcnRlci50b0xvY2FsQXJnKHJlc3AuY2JJZCkuYXBwbHkobnVsbCwgZml4ZWRBcmdzKTtcblx0XHRcdH1cblx0XHR9KTtcblx0fVxuXG5cdHB1YmxpYyBnZXROYW1lKCk6IHN0cmluZyB7XG5cdFx0cmV0dXJuIFdvcmtlckZTLk5hbWU7XG5cdH1cblxuXHRwdWJsaWMgaXNSZWFkT25seSgpOiBib29sZWFuIHtcblx0XHRyZXR1cm4gdGhpcy5faXNSZWFkT25seTtcblx0fVxuXHRwdWJsaWMgc3VwcG9ydHNTeW5jaCgpOiBib29sZWFuIHtcblx0XHRyZXR1cm4gZmFsc2U7XG5cdH1cblx0cHVibGljIHN1cHBvcnRzTGlua3MoKTogYm9vbGVhbiB7XG5cdFx0cmV0dXJuIHRoaXMuX3N1cHBvcnRMaW5rcztcblx0fVxuXHRwdWJsaWMgc3VwcG9ydHNQcm9wcygpOiBib29sZWFuIHtcblx0XHRyZXR1cm4gdGhpcy5fc3VwcG9ydFByb3BzO1xuXHR9XG5cblx0cHVibGljIHJlbmFtZShvbGRQYXRoOiBzdHJpbmcsIG5ld1BhdGg6IHN0cmluZywgY3JlZDogQ3JlZCwgY2I6IEJGU09uZUFyZ0NhbGxiYWNrKTogdm9pZCB7XG5cdFx0dGhpcy5fcnBjKCdyZW5hbWUnLCBhcmd1bWVudHMpO1xuXHR9XG5cdHB1YmxpYyBzdGF0KHA6IHN0cmluZywgaXNMc3RhdDogYm9vbGVhbiwgY3JlZDogQ3JlZCwgY2I6IEJGU0NhbGxiYWNrPFN0YXRzPik6IHZvaWQge1xuXHRcdHRoaXMuX3JwYygnc3RhdCcsIGFyZ3VtZW50cyk7XG5cdH1cblx0cHVibGljIG9wZW4ocDogc3RyaW5nLCBmbGFnOiBGaWxlRmxhZywgbW9kZTogbnVtYmVyLCBjcmVkOiBDcmVkLCBjYjogQkZTQ2FsbGJhY2s8RmlsZT4pOiB2b2lkIHtcblx0XHR0aGlzLl9ycGMoJ29wZW4nLCBhcmd1bWVudHMpO1xuXHR9XG5cdHB1YmxpYyB1bmxpbmsocDogc3RyaW5nLCBjcmVkOiBDcmVkLCBjYjogRnVuY3Rpb24pOiB2b2lkIHtcblx0XHR0aGlzLl9ycGMoJ3VubGluaycsIGFyZ3VtZW50cyk7XG5cdH1cblx0cHVibGljIHJtZGlyKHA6IHN0cmluZywgY3JlZDogQ3JlZCwgY2I6IEZ1bmN0aW9uKTogdm9pZCB7XG5cdFx0dGhpcy5fcnBjKCdybWRpcicsIGFyZ3VtZW50cyk7XG5cdH1cblx0cHVibGljIG1rZGlyKHA6IHN0cmluZywgbW9kZTogbnVtYmVyLCBjcmVkOiBDcmVkLCBjYjogRnVuY3Rpb24pOiB2b2lkIHtcblx0XHR0aGlzLl9ycGMoJ21rZGlyJywgYXJndW1lbnRzKTtcblx0fVxuXHRwdWJsaWMgcmVhZGRpcihwOiBzdHJpbmcsIGNyZWQ6IENyZWQsIGNiOiBCRlNDYWxsYmFjazxzdHJpbmdbXT4pOiB2b2lkIHtcblx0XHR0aGlzLl9ycGMoJ3JlYWRkaXInLCBhcmd1bWVudHMpO1xuXHR9XG5cdHB1YmxpYyBleGlzdHMocDogc3RyaW5nLCBjcmVkOiBDcmVkLCBjYjogKGV4aXN0czogYm9vbGVhbikgPT4gdm9pZCk6IHZvaWQge1xuXHRcdHRoaXMuX3JwYygnZXhpc3RzJywgYXJndW1lbnRzKTtcblx0fVxuXHRwdWJsaWMgcmVhbHBhdGgocDogc3RyaW5nLCBjYWNoZTogeyBbcGF0aDogc3RyaW5nXTogc3RyaW5nIH0sIGNyZWQ6IENyZWQsIGNiOiBCRlNDYWxsYmFjazxzdHJpbmc+KTogdm9pZCB7XG5cdFx0dGhpcy5fcnBjKCdyZWFscGF0aCcsIGFyZ3VtZW50cyk7XG5cdH1cblx0cHVibGljIHRydW5jYXRlKHA6IHN0cmluZywgbGVuOiBudW1iZXIsIGNyZWQ6IENyZWQsIGNiOiBGdW5jdGlvbik6IHZvaWQge1xuXHRcdHRoaXMuX3JwYygndHJ1bmNhdGUnLCBhcmd1bWVudHMpO1xuXHR9XG5cdHB1YmxpYyByZWFkRmlsZShmbmFtZTogc3RyaW5nLCBlbmNvZGluZzogc3RyaW5nLCBmbGFnOiBGaWxlRmxhZywgY3JlZDogQ3JlZCwgY2I6IEJGU0NhbGxiYWNrPGFueT4pOiB2b2lkIHtcblx0XHR0aGlzLl9ycGMoJ3JlYWRGaWxlJywgYXJndW1lbnRzKTtcblx0fVxuXHRwdWJsaWMgd3JpdGVGaWxlKGZuYW1lOiBzdHJpbmcsIGRhdGE6IGFueSwgZW5jb2Rpbmc6IHN0cmluZywgZmxhZzogRmlsZUZsYWcsIG1vZGU6IG51bWJlciwgY3JlZDogQ3JlZCwgY2I6IEJGU09uZUFyZ0NhbGxiYWNrKTogdm9pZCB7XG5cdFx0dGhpcy5fcnBjKCd3cml0ZUZpbGUnLCBhcmd1bWVudHMpO1xuXHR9XG5cdHB1YmxpYyBhcHBlbmRGaWxlKGZuYW1lOiBzdHJpbmcsIGRhdGE6IGFueSwgZW5jb2Rpbmc6IHN0cmluZywgZmxhZzogRmlsZUZsYWcsIG1vZGU6IG51bWJlciwgY3JlZDogQ3JlZCwgY2I6IEJGU09uZUFyZ0NhbGxiYWNrKTogdm9pZCB7XG5cdFx0dGhpcy5fcnBjKCdhcHBlbmRGaWxlJywgYXJndW1lbnRzKTtcblx0fVxuXHRwdWJsaWMgY2htb2QocDogc3RyaW5nLCBpc0xjaG1vZDogYm9vbGVhbiwgbW9kZTogbnVtYmVyLCBjcmVkOiBDcmVkLCBjYjogRnVuY3Rpb24pOiB2b2lkIHtcblx0XHR0aGlzLl9ycGMoJ2NobW9kJywgYXJndW1lbnRzKTtcblx0fVxuXHRwdWJsaWMgY2hvd24ocDogc3RyaW5nLCBpc0xjaG93bjogYm9vbGVhbiwgbmV3X3VpZDogbnVtYmVyLCBuZXdfZ2lkOiBudW1iZXIsIGNyZWQ6IENyZWQsIGNiOiBGdW5jdGlvbik6IHZvaWQge1xuXHRcdHRoaXMuX3JwYygnY2hvd24nLCBhcmd1bWVudHMpO1xuXHR9XG5cdHB1YmxpYyB1dGltZXMocDogc3RyaW5nLCBhdGltZTogRGF0ZSwgbXRpbWU6IERhdGUsIGNyZWQ6IENyZWQsIGNiOiBGdW5jdGlvbik6IHZvaWQge1xuXHRcdHRoaXMuX3JwYygndXRpbWVzJywgYXJndW1lbnRzKTtcblx0fVxuXHRwdWJsaWMgbGluayhzcmNwYXRoOiBzdHJpbmcsIGRzdHBhdGg6IHN0cmluZywgY3JlZDogQ3JlZCwgY2I6IEZ1bmN0aW9uKTogdm9pZCB7XG5cdFx0dGhpcy5fcnBjKCdsaW5rJywgYXJndW1lbnRzKTtcblx0fVxuXHRwdWJsaWMgc3ltbGluayhzcmNwYXRoOiBzdHJpbmcsIGRzdHBhdGg6IHN0cmluZywgdHlwZTogc3RyaW5nLCBjcmVkOiBDcmVkLCBjYjogRnVuY3Rpb24pOiB2b2lkIHtcblx0XHR0aGlzLl9ycGMoJ3N5bWxpbmsnLCBhcmd1bWVudHMpO1xuXHR9XG5cdHB1YmxpYyByZWFkbGluayhwOiBzdHJpbmcsIGNyZWQ6IENyZWQsIGNiOiBGdW5jdGlvbik6IHZvaWQge1xuXHRcdHRoaXMuX3JwYygncmVhZGxpbmsnLCBhcmd1bWVudHMpO1xuXHR9XG5cblx0cHVibGljIHN5bmNDbG9zZShtZXRob2Q6IHN0cmluZywgZmQ6IEZpbGUsIGNiOiBCRlNPbmVBcmdDYWxsYmFjayk6IHZvaWQge1xuXHRcdHRoaXMuX3dvcmtlci5wb3N0TWVzc2FnZSh7XG5cdFx0XHRicm93c2VyZnNNZXNzYWdlOiB0cnVlLFxuXHRcdFx0bWV0aG9kOiBtZXRob2QsXG5cdFx0XHRhcmdzOiBbKDxXb3JrZXJGaWxlPmZkKS50b1JlbW90ZUFyZygpLCB0aGlzLl9jYWxsYmFja0NvbnZlcnRlci50b1JlbW90ZUFyZyhjYildLFxuXHRcdH0pO1xuXHR9XG5cblx0LyoqXG5cdCAqIENhbGxlZCBvbmNlIGJvdGggbG9jYWwgYW5kIHJlbW90ZSBzaWRlcyBhcmUgc2V0IHVwLlxuXHQgKi9cblx0cHJpdmF0ZSBfaW5pdGlhbGl6ZShjYjogKCkgPT4gdm9pZCk6IHZvaWQge1xuXHRcdGlmICghdGhpcy5faXNJbml0aWFsaXplZCkge1xuXHRcdFx0Y29uc3QgbWVzc2FnZTogSUFQSVJlcXVlc3QgPSB7XG5cdFx0XHRcdGJyb3dzZXJmc01lc3NhZ2U6IHRydWUsXG5cdFx0XHRcdG1ldGhvZDogJ3Byb2JlJyxcblx0XHRcdFx0YXJnczogW1xuXHRcdFx0XHRcdHRoaXMuX2FyZ0xvY2FsMlJlbW90ZShlbXB0eUJ1ZmZlcigpKSxcblx0XHRcdFx0XHR0aGlzLl9jYWxsYmFja0NvbnZlcnRlci50b1JlbW90ZUFyZygocHJvYmVSZXNwb25zZTogSVByb2JlUmVzcG9uc2UpID0+IHtcblx0XHRcdFx0XHRcdHRoaXMuX2lzSW5pdGlhbGl6ZWQgPSB0cnVlO1xuXHRcdFx0XHRcdFx0dGhpcy5faXNSZWFkT25seSA9IHByb2JlUmVzcG9uc2UuaXNSZWFkT25seTtcblx0XHRcdFx0XHRcdHRoaXMuX3N1cHBvcnRMaW5rcyA9IHByb2JlUmVzcG9uc2Uuc3VwcG9ydHNMaW5rcztcblx0XHRcdFx0XHRcdHRoaXMuX3N1cHBvcnRQcm9wcyA9IHByb2JlUmVzcG9uc2Uuc3VwcG9ydHNQcm9wcztcblx0XHRcdFx0XHRcdGNiKCk7XG5cdFx0XHRcdFx0fSksXG5cdFx0XHRcdF0sXG5cdFx0XHR9O1xuXHRcdFx0dGhpcy5fd29ya2VyLnBvc3RNZXNzYWdlKG1lc3NhZ2UpO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHRjYigpO1xuXHRcdH1cblx0fVxuXG5cdHByaXZhdGUgX2FyZ1JlbW90ZTJMb2NhbChhcmc6IGFueSk6IGFueSB7XG5cdFx0aWYgKCFhcmcpIHtcblx0XHRcdHJldHVybiBhcmc7XG5cdFx0fVxuXHRcdHN3aXRjaCAodHlwZW9mIGFyZykge1xuXHRcdFx0Y2FzZSAnb2JqZWN0Jzpcblx0XHRcdFx0aWYgKHR5cGVvZiBhcmdbJ3R5cGUnXSA9PT0gJ251bWJlcicpIHtcblx0XHRcdFx0XHRjb25zdCBzcGVjaWFsQXJnID0gPElTcGVjaWFsQXJndW1lbnQ+YXJnO1xuXHRcdFx0XHRcdHN3aXRjaCAoc3BlY2lhbEFyZy50eXBlKSB7XG5cdFx0XHRcdFx0XHRjYXNlIFNwZWNpYWxBcmdUeXBlLkFQSV9FUlJPUjpcblx0XHRcdFx0XHRcdFx0cmV0dXJuIGFwaUVycm9yUmVtb3RlMkxvY2FsKDxJQVBJRXJyb3JBcmd1bWVudD5zcGVjaWFsQXJnKTtcblx0XHRcdFx0XHRcdGNhc2UgU3BlY2lhbEFyZ1R5cGUuRkQ6XG5cdFx0XHRcdFx0XHRcdGNvbnN0IGZkQXJnID0gPElGaWxlRGVzY3JpcHRvckFyZ3VtZW50PnNwZWNpYWxBcmc7XG5cdFx0XHRcdFx0XHRcdHJldHVybiBuZXcgV29ya2VyRmlsZShcblx0XHRcdFx0XHRcdFx0XHR0aGlzLFxuXHRcdFx0XHRcdFx0XHRcdGZkQXJnLnBhdGgsXG5cdFx0XHRcdFx0XHRcdFx0RmlsZUZsYWcuZ2V0RmlsZUZsYWcoZmRBcmcuZmxhZyksXG5cdFx0XHRcdFx0XHRcdFx0U3RhdHMuZnJvbUJ1ZmZlcih0cmFuc2ZlcnJhYmxlT2JqZWN0VG9CdWZmZXIoZmRBcmcuc3RhdCkpLFxuXHRcdFx0XHRcdFx0XHRcdGZkQXJnLmlkLFxuXHRcdFx0XHRcdFx0XHRcdHRyYW5zZmVycmFibGVPYmplY3RUb0J1ZmZlcihmZEFyZy5kYXRhKVxuXHRcdFx0XHRcdFx0XHQpO1xuXHRcdFx0XHRcdFx0Y2FzZSBTcGVjaWFsQXJnVHlwZS5TVEFUUzpcblx0XHRcdFx0XHRcdFx0cmV0dXJuIHN0YXRzUmVtb3RlMkxvY2FsKDxJU3RhdHNBcmd1bWVudD5zcGVjaWFsQXJnKTtcblx0XHRcdFx0XHRcdGNhc2UgU3BlY2lhbEFyZ1R5cGUuRklMRUZMQUc6XG5cdFx0XHRcdFx0XHRcdHJldHVybiBmaWxlRmxhZ1JlbW90ZTJMb2NhbCg8SUZpbGVGbGFnQXJndW1lbnQ+c3BlY2lhbEFyZyk7XG5cdFx0XHRcdFx0XHRjYXNlIFNwZWNpYWxBcmdUeXBlLkJVRkZFUjpcblx0XHRcdFx0XHRcdFx0cmV0dXJuIGJ1ZmZlclJlbW90ZTJMb2NhbCg8SUJ1ZmZlckFyZ3VtZW50PnNwZWNpYWxBcmcpO1xuXHRcdFx0XHRcdFx0Y2FzZSBTcGVjaWFsQXJnVHlwZS5FUlJPUjpcblx0XHRcdFx0XHRcdFx0cmV0dXJuIGVycm9yUmVtb3RlMkxvY2FsKDxJRXJyb3JBcmd1bWVudD5zcGVjaWFsQXJnKTtcblx0XHRcdFx0XHRcdGRlZmF1bHQ6XG5cdFx0XHRcdFx0XHRcdHJldHVybiBhcmc7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdHJldHVybiBhcmc7XG5cdFx0XHRcdH1cblx0XHRcdGRlZmF1bHQ6XG5cdFx0XHRcdHJldHVybiBhcmc7XG5cdFx0fVxuXHR9XG5cblx0cHJpdmF0ZSBfcnBjKG1ldGhvZE5hbWU6IHN0cmluZywgYXJnczogSUFyZ3VtZW50cykge1xuXHRcdGNvbnN0IGZpeGVkQXJncyA9IG5ldyBBcnJheShhcmdzLmxlbmd0aCk7XG5cdFx0Zm9yIChsZXQgaSA9IDA7IGkgPCBhcmdzLmxlbmd0aDsgaSsrKSB7XG5cdFx0XHRmaXhlZEFyZ3NbaV0gPSB0aGlzLl9hcmdMb2NhbDJSZW1vdGUoYXJnc1tpXSk7XG5cdFx0fVxuXHRcdGNvbnN0IG1lc3NhZ2U6IElBUElSZXF1ZXN0ID0ge1xuXHRcdFx0YnJvd3NlcmZzTWVzc2FnZTogdHJ1ZSxcblx0XHRcdG1ldGhvZDogbWV0aG9kTmFtZSxcblx0XHRcdGFyZ3M6IGZpeGVkQXJncyxcblx0XHR9O1xuXHRcdHRoaXMuX3dvcmtlci5wb3N0TWVzc2FnZShtZXNzYWdlKTtcblx0fVxuXG5cdC8qKlxuXHQgKiBDb252ZXJ0cyBhIGxvY2FsIGFyZ3VtZW50IGludG8gYSByZW1vdGUgYXJndW1lbnQuIFB1YmxpYyBzbyBXb3JrZXJGaWxlIG9iamVjdHMgY2FuIGNhbGwgaXQuXG5cdCAqL1xuXHRwcml2YXRlIF9hcmdMb2NhbDJSZW1vdGUoYXJnOiBhbnkpOiBhbnkge1xuXHRcdGlmICghYXJnKSB7XG5cdFx0XHRyZXR1cm4gYXJnO1xuXHRcdH1cblx0XHRzd2l0Y2ggKHR5cGVvZiBhcmcpIHtcblx0XHRcdGNhc2UgJ29iamVjdCc6XG5cdFx0XHRcdGlmIChhcmcgaW5zdGFuY2VvZiBTdGF0cykge1xuXHRcdFx0XHRcdHJldHVybiBzdGF0c0xvY2FsMlJlbW90ZShhcmcpO1xuXHRcdFx0XHR9IGVsc2UgaWYgKGFyZyBpbnN0YW5jZW9mIEFwaUVycm9yKSB7XG5cdFx0XHRcdFx0cmV0dXJuIGFwaUVycm9yTG9jYWwyUmVtb3RlKGFyZyk7XG5cdFx0XHRcdH0gZWxzZSBpZiAoYXJnIGluc3RhbmNlb2YgV29ya2VyRmlsZSkge1xuXHRcdFx0XHRcdHJldHVybiAoPFdvcmtlckZpbGU+YXJnKS50b1JlbW90ZUFyZygpO1xuXHRcdFx0XHR9IGVsc2UgaWYgKGFyZyBpbnN0YW5jZW9mIEZpbGVGbGFnKSB7XG5cdFx0XHRcdFx0cmV0dXJuIGZpbGVGbGFnTG9jYWwyUmVtb3RlKGFyZyk7XG5cdFx0XHRcdH0gZWxzZSBpZiAoYXJnIGluc3RhbmNlb2YgQnVmZmVyKSB7XG5cdFx0XHRcdFx0cmV0dXJuIGJ1ZmZlckxvY2FsMlJlbW90ZShhcmcpO1xuXHRcdFx0XHR9IGVsc2UgaWYgKGFyZyBpbnN0YW5jZW9mIEVycm9yKSB7XG5cdFx0XHRcdFx0cmV0dXJuIGVycm9yTG9jYWwyUmVtb3RlKGFyZyk7XG5cdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0cmV0dXJuICdVbmtub3duIGFyZ3VtZW50Jztcblx0XHRcdFx0fVxuXHRcdFx0Y2FzZSAnZnVuY3Rpb24nOlxuXHRcdFx0XHRyZXR1cm4gdGhpcy5fY2FsbGJhY2tDb252ZXJ0ZXIudG9SZW1vdGVBcmcoYXJnKTtcblx0XHRcdGRlZmF1bHQ6XG5cdFx0XHRcdHJldHVybiBhcmc7XG5cdFx0fVxuXHR9XG59XG4iLCAiLyoqXG4gKiBDb250YWlucyB1dGlsaXR5IG1ldGhvZHMgZm9yIHBlcmZvcm1pbmcgYSB2YXJpZXR5IG9mIHRhc2tzIHdpdGhcbiAqIFhtbEh0dHBSZXF1ZXN0IGFjcm9zcyBicm93c2Vycy5cbiAqL1xuXG5pbXBvcnQgeyBpc0lFLCBlbXB0eUJ1ZmZlciB9IGZyb20gJy4uL2NvcmUvdXRpbCc7XG5pbXBvcnQgeyBBcGlFcnJvciwgRXJyb3JDb2RlIH0gZnJvbSAnLi4vY29yZS9hcGlfZXJyb3InO1xuaW1wb3J0IHsgQkZTQ2FsbGJhY2sgfSBmcm9tICcuLi9jb3JlL2ZpbGVfc3lzdGVtJztcbmltcG9ydCB7IEJ1ZmZlciB9IGZyb20gJ2J1ZmZlcic7XG5cbmV4cG9ydCBjb25zdCB4aHJJc0F2YWlsYWJsZSA9IHR5cGVvZiBYTUxIdHRwUmVxdWVzdCAhPT0gJ3VuZGVmaW5lZCcgJiYgWE1MSHR0cFJlcXVlc3QgIT09IG51bGw7XG5cbi8qKlxuICogQGhpZGRlblxuICovXG5mdW5jdGlvbiBhc3luY0Rvd25sb2FkRmlsZU1vZGVybihwOiBzdHJpbmcsIHR5cGU6ICdidWZmZXInLCBjYjogQkZTQ2FsbGJhY2s8QnVmZmVyPik6IHZvaWQ7XG5mdW5jdGlvbiBhc3luY0Rvd25sb2FkRmlsZU1vZGVybihwOiBzdHJpbmcsIHR5cGU6ICdqc29uJywgY2I6IEJGU0NhbGxiYWNrPGFueT4pOiB2b2lkO1xuZnVuY3Rpb24gYXN5bmNEb3dubG9hZEZpbGVNb2Rlcm4ocDogc3RyaW5nLCB0eXBlOiBzdHJpbmcsIGNiOiBCRlNDYWxsYmFjazxhbnk+KTogdm9pZDtcbmZ1bmN0aW9uIGFzeW5jRG93bmxvYWRGaWxlTW9kZXJuKHA6IHN0cmluZywgdHlwZTogc3RyaW5nLCBjYjogQkZTQ2FsbGJhY2s8YW55Pik6IHZvaWQge1xuXHRjb25zdCByZXEgPSBuZXcgWE1MSHR0cFJlcXVlc3QoKTtcblx0cmVxLm9wZW4oJ0dFVCcsIHAsIHRydWUpO1xuXHRsZXQganNvblN1cHBvcnRlZCA9IHRydWU7XG5cdHN3aXRjaCAodHlwZSkge1xuXHRcdGNhc2UgJ2J1ZmZlcic6XG5cdFx0XHRyZXEucmVzcG9uc2VUeXBlID0gJ2FycmF5YnVmZmVyJztcblx0XHRcdGJyZWFrO1xuXHRcdGNhc2UgJ2pzb24nOlxuXHRcdFx0Ly8gU29tZSBicm93c2VycyBkb24ndCBzdXBwb3J0IHRoZSBKU09OIHJlc3BvbnNlIHR5cGUuXG5cdFx0XHQvLyBUaGV5IGVpdGhlciByZXNldCByZXNwb25zZVR5cGUsIG9yIHRocm93IGFuIGV4Y2VwdGlvbi5cblx0XHRcdC8vIEBzZWUgaHR0cHM6Ly9naXRodWIuY29tL01vZGVybml6ci9Nb2Rlcm5penIvYmxvYi9tYXN0ZXIvc3JjL3Rlc3RYaHJUeXBlLmpzXG5cdFx0XHR0cnkge1xuXHRcdFx0XHRyZXEucmVzcG9uc2VUeXBlID0gJ2pzb24nO1xuXHRcdFx0XHRqc29uU3VwcG9ydGVkID0gcmVxLnJlc3BvbnNlVHlwZSA9PT0gJ2pzb24nO1xuXHRcdFx0fSBjYXRjaCAoZSkge1xuXHRcdFx0XHRqc29uU3VwcG9ydGVkID0gZmFsc2U7XG5cdFx0XHR9XG5cdFx0XHRicmVhaztcblx0XHRkZWZhdWx0OlxuXHRcdFx0cmV0dXJuIGNiKG5ldyBBcGlFcnJvcihFcnJvckNvZGUuRUlOVkFMLCAnSW52YWxpZCBkb3dubG9hZCB0eXBlOiAnICsgdHlwZSkpO1xuXHR9XG5cdHJlcS5vbnJlYWR5c3RhdGVjaGFuZ2UgPSBmdW5jdGlvbiAoZSkge1xuXHRcdGlmIChyZXEucmVhZHlTdGF0ZSA9PT0gNCkge1xuXHRcdFx0aWYgKHJlcS5zdGF0dXMgPT09IDIwMCkge1xuXHRcdFx0XHRzd2l0Y2ggKHR5cGUpIHtcblx0XHRcdFx0XHRjYXNlICdidWZmZXInOlxuXHRcdFx0XHRcdFx0Ly8gWFhYOiBXZWJLaXQtYmFzZWQgYnJvd3NlcnMgcmV0dXJuICpudWxsKiB3aGVuIFhIUmluZyBhbiBlbXB0eSBmaWxlLlxuXHRcdFx0XHRcdFx0cmV0dXJuIGNiKG51bGwsIHJlcS5yZXNwb25zZSA/IEJ1ZmZlci5mcm9tKHJlcS5yZXNwb25zZSkgOiBlbXB0eUJ1ZmZlcigpKTtcblx0XHRcdFx0XHRjYXNlICdqc29uJzpcblx0XHRcdFx0XHRcdGlmIChqc29uU3VwcG9ydGVkKSB7XG5cdFx0XHRcdFx0XHRcdHJldHVybiBjYihudWxsLCByZXEucmVzcG9uc2UpO1xuXHRcdFx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRcdFx0cmV0dXJuIGNiKG51bGwsIEpTT04ucGFyc2UocmVxLnJlc3BvbnNlVGV4dCkpO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRyZXR1cm4gY2IobmV3IEFwaUVycm9yKEVycm9yQ29kZS5FSU8sIGBYSFIgZXJyb3I6IHJlc3BvbnNlIHJldHVybmVkIGNvZGUgJHtyZXEuc3RhdHVzfWApKTtcblx0XHRcdH1cblx0XHR9XG5cdH07XG5cdHJlcS5zZW5kKCk7XG59XG5cbi8qKlxuICogQGhpZGRlblxuICovXG5mdW5jdGlvbiBzeW5jRG93bmxvYWRGaWxlTW9kZXJuKHA6IHN0cmluZywgdHlwZTogJ2J1ZmZlcicpOiBCdWZmZXI7XG5mdW5jdGlvbiBzeW5jRG93bmxvYWRGaWxlTW9kZXJuKHA6IHN0cmluZywgdHlwZTogJ2pzb24nKTogYW55O1xuZnVuY3Rpb24gc3luY0Rvd25sb2FkRmlsZU1vZGVybihwOiBzdHJpbmcsIHR5cGU6IHN0cmluZyk6IGFueTtcbmZ1bmN0aW9uIHN5bmNEb3dubG9hZEZpbGVNb2Rlcm4ocDogc3RyaW5nLCB0eXBlOiBzdHJpbmcpOiBhbnkge1xuXHRjb25zdCByZXEgPSBuZXcgWE1MSHR0cFJlcXVlc3QoKTtcblx0cmVxLm9wZW4oJ0dFVCcsIHAsIGZhbHNlKTtcblxuXHQvLyBPbiBtb3N0IHBsYXRmb3Jtcywgd2UgY2Fubm90IHNldCB0aGUgcmVzcG9uc2VUeXBlIG9mIHN5bmNocm9ub3VzIGRvd25sb2Fkcy5cblx0Ly8gQHRvZG8gVGVzdCBmb3IgdGhpczsgSUUxMCBhbGxvd3MgdGhpcywgYXMgZG8gb2xkZXIgdmVyc2lvbnMgb2YgQ2hyb21lL0ZGLlxuXHRsZXQgZGF0YTogYW55ID0gbnVsbDtcblx0bGV0IGVycjogYW55ID0gbnVsbDtcblx0Ly8gQ2xhc3NpYyBoYWNrIHRvIGRvd25sb2FkIGJpbmFyeSBkYXRhIGFzIGEgc3RyaW5nLlxuXHRyZXEub3ZlcnJpZGVNaW1lVHlwZSgndGV4dC9wbGFpbjsgY2hhcnNldD14LXVzZXItZGVmaW5lZCcpO1xuXHRyZXEub25yZWFkeXN0YXRlY2hhbmdlID0gZnVuY3Rpb24gKGUpIHtcblx0XHRpZiAocmVxLnJlYWR5U3RhdGUgPT09IDQpIHtcblx0XHRcdGlmIChyZXEuc3RhdHVzID09PSAyMDApIHtcblx0XHRcdFx0c3dpdGNoICh0eXBlKSB7XG5cdFx0XHRcdFx0Y2FzZSAnYnVmZmVyJzpcblx0XHRcdFx0XHRcdC8vIENvbnZlcnQgdGhlIHRleHQgaW50byBhIGJ1ZmZlci5cblx0XHRcdFx0XHRcdGNvbnN0IHRleHQgPSByZXEucmVzcG9uc2VUZXh0O1xuXHRcdFx0XHRcdFx0ZGF0YSA9IEJ1ZmZlci5hbGxvYyh0ZXh0Lmxlbmd0aCk7XG5cdFx0XHRcdFx0XHQvLyBUaHJvdyBhd2F5IHRoZSB1cHBlciBiaXRzIG9mIGVhY2ggY2hhcmFjdGVyLlxuXHRcdFx0XHRcdFx0Zm9yIChsZXQgaSA9IDA7IGkgPCB0ZXh0Lmxlbmd0aDsgaSsrKSB7XG5cdFx0XHRcdFx0XHRcdC8vIFRoaXMgd2lsbCBhdXRvbWF0aWNhbGx5IHRocm93IGF3YXkgdGhlIHVwcGVyIGJpdCBvZiBlYWNoXG5cdFx0XHRcdFx0XHRcdC8vIGNoYXJhY3RlciBmb3IgdXMuXG5cdFx0XHRcdFx0XHRcdGRhdGFbaV0gPSB0ZXh0LmNoYXJDb2RlQXQoaSk7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRyZXR1cm47XG5cdFx0XHRcdFx0Y2FzZSAnanNvbic6XG5cdFx0XHRcdFx0XHRkYXRhID0gSlNPTi5wYXJzZShyZXEucmVzcG9uc2VUZXh0KTtcblx0XHRcdFx0XHRcdHJldHVybjtcblx0XHRcdFx0fVxuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0ZXJyID0gbmV3IEFwaUVycm9yKEVycm9yQ29kZS5FSU8sIGBYSFIgZXJyb3I6IHJlc3BvbnNlIHJldHVybmVkIGNvZGUgJHtyZXEuc3RhdHVzfWApO1xuXHRcdFx0XHRyZXR1cm47XG5cdFx0XHR9XG5cdFx0fVxuXHR9O1xuXHRyZXEuc2VuZCgpO1xuXHRpZiAoZXJyKSB7XG5cdFx0dGhyb3cgZXJyO1xuXHR9XG5cdHJldHVybiBkYXRhO1xufVxuXG4vKipcbiAqIElFMTAgYWxsb3dzIHVzIHRvIHBlcmZvcm0gc3luY2hyb25vdXMgYmluYXJ5IGZpbGUgZG93bmxvYWRzLlxuICogQHRvZG8gRmVhdHVyZSBkZXRlY3QgdGhpcywgYXMgb2xkZXIgdmVyc2lvbnMgb2YgRkYvQ2hyb21lIGRvIHRvbyFcbiAqIEBoaWRkZW5cbiAqL1xuZnVuY3Rpb24gc3luY0Rvd25sb2FkRmlsZUlFMTAocDogc3RyaW5nLCB0eXBlOiAnYnVmZmVyJyk6IEJ1ZmZlcjtcbmZ1bmN0aW9uIHN5bmNEb3dubG9hZEZpbGVJRTEwKHA6IHN0cmluZywgdHlwZTogJ2pzb24nKTogYW55O1xuZnVuY3Rpb24gc3luY0Rvd25sb2FkRmlsZUlFMTAocDogc3RyaW5nLCB0eXBlOiBzdHJpbmcpOiBhbnk7XG5mdW5jdGlvbiBzeW5jRG93bmxvYWRGaWxlSUUxMChwOiBzdHJpbmcsIHR5cGU6IHN0cmluZyk6IGFueSB7XG5cdGNvbnN0IHJlcSA9IG5ldyBYTUxIdHRwUmVxdWVzdCgpO1xuXHRyZXEub3BlbignR0VUJywgcCwgZmFsc2UpO1xuXHRzd2l0Y2ggKHR5cGUpIHtcblx0XHRjYXNlICdidWZmZXInOlxuXHRcdFx0cmVxLnJlc3BvbnNlVHlwZSA9ICdhcnJheWJ1ZmZlcic7XG5cdFx0XHRicmVhaztcblx0XHRjYXNlICdqc29uJzpcblx0XHRcdC8vIElFMTAgZG9lcyBub3Qgc3VwcG9ydCB0aGUgSlNPTiB0eXBlLlxuXHRcdFx0YnJlYWs7XG5cdFx0ZGVmYXVsdDpcblx0XHRcdHRocm93IG5ldyBBcGlFcnJvcihFcnJvckNvZGUuRUlOVkFMLCAnSW52YWxpZCBkb3dubG9hZCB0eXBlOiAnICsgdHlwZSk7XG5cdH1cblx0bGV0IGRhdGE6IGFueTtcblx0bGV0IGVycjogYW55O1xuXHRyZXEub25yZWFkeXN0YXRlY2hhbmdlID0gZnVuY3Rpb24gKGUpIHtcblx0XHRpZiAocmVxLnJlYWR5U3RhdGUgPT09IDQpIHtcblx0XHRcdGlmIChyZXEuc3RhdHVzID09PSAyMDApIHtcblx0XHRcdFx0c3dpdGNoICh0eXBlKSB7XG5cdFx0XHRcdFx0Y2FzZSAnYnVmZmVyJzpcblx0XHRcdFx0XHRcdGRhdGEgPSBCdWZmZXIuZnJvbShyZXEucmVzcG9uc2UpO1xuXHRcdFx0XHRcdFx0YnJlYWs7XG5cdFx0XHRcdFx0Y2FzZSAnanNvbic6XG5cdFx0XHRcdFx0XHRkYXRhID0gSlNPTi5wYXJzZShyZXEucmVzcG9uc2UpO1xuXHRcdFx0XHRcdFx0YnJlYWs7XG5cdFx0XHRcdH1cblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdGVyciA9IG5ldyBBcGlFcnJvcihFcnJvckNvZGUuRUlPLCBgWEhSIGVycm9yOiByZXNwb25zZSByZXR1cm5lZCBjb2RlICR7cmVxLnN0YXR1c31gKTtcblx0XHRcdH1cblx0XHR9XG5cdH07XG5cdHJlcS5zZW5kKCk7XG5cdGlmIChlcnIpIHtcblx0XHR0aHJvdyBlcnI7XG5cdH1cblx0cmV0dXJuIGRhdGE7XG59XG5cbi8qKlxuICogQGhpZGRlblxuICovXG5mdW5jdGlvbiBnZXRGaWxlU2l6ZShhc3luYzogYm9vbGVhbiwgcDogc3RyaW5nLCBjYjogQkZTQ2FsbGJhY2s8bnVtYmVyPik6IHZvaWQge1xuXHRjb25zdCByZXEgPSBuZXcgWE1MSHR0cFJlcXVlc3QoKTtcblx0cmVxLm9wZW4oJ0hFQUQnLCBwLCBhc3luYyk7XG5cdHJlcS5vbnJlYWR5c3RhdGVjaGFuZ2UgPSBmdW5jdGlvbiAoZSkge1xuXHRcdGlmIChyZXEucmVhZHlTdGF0ZSA9PT0gNCkge1xuXHRcdFx0aWYgKHJlcS5zdGF0dXMgPT09IDIwMCkge1xuXHRcdFx0XHR0cnkge1xuXHRcdFx0XHRcdHJldHVybiBjYihudWxsLCBwYXJzZUludChyZXEuZ2V0UmVzcG9uc2VIZWFkZXIoJ0NvbnRlbnQtTGVuZ3RoJykgfHwgJy0xJywgMTApKTtcblx0XHRcdFx0fSBjYXRjaCAoZSkge1xuXHRcdFx0XHRcdC8vIEluIHRoZSBldmVudCB0aGF0IHRoZSBoZWFkZXIgaXNuJ3QgcHJlc2VudCBvciB0aGVyZSBpcyBhbiBlcnJvci4uLlxuXHRcdFx0XHRcdHJldHVybiBjYihuZXcgQXBpRXJyb3IoRXJyb3JDb2RlLkVJTywgJ1hIUiBIRUFEIGVycm9yOiBDb3VsZCBub3QgcmVhZCBjb250ZW50LWxlbmd0aC4nKSk7XG5cdFx0XHRcdH1cblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdHJldHVybiBjYihuZXcgQXBpRXJyb3IoRXJyb3JDb2RlLkVJTywgYFhIUiBIRUFEIGVycm9yOiByZXNwb25zZSByZXR1cm5lZCBjb2RlICR7cmVxLnN0YXR1c31gKSk7XG5cdFx0XHR9XG5cdFx0fVxuXHR9O1xuXHRyZXEuc2VuZCgpO1xufVxuXG4vKipcbiAqIEFzeW5jaHJvbm91c2x5IGRvd25sb2FkIGEgZmlsZSBhcyBhIGJ1ZmZlciBvciBhIEpTT04gb2JqZWN0LlxuICogTm90ZSB0aGF0IHRoZSB0aGlyZCBmdW5jdGlvbiBzaWduYXR1cmUgd2l0aCBhIG5vbi1zcGVjaWFsaXplZCB0eXBlIGlzXG4gKiBpbnZhbGlkLCBidXQgVHlwZVNjcmlwdCByZXF1aXJlcyBpdCB3aGVuIHlvdSBzcGVjaWFsaXplIHN0cmluZyBhcmd1bWVudHMgdG9cbiAqIGNvbnN0YW50cy5cbiAqIEBoaWRkZW5cbiAqL1xuZXhwb3J0IGxldCBhc3luY0Rvd25sb2FkRmlsZToge1xuXHQocDogc3RyaW5nLCB0eXBlOiAnYnVmZmVyJywgY2I6IEJGU0NhbGxiYWNrPEJ1ZmZlcj4pOiB2b2lkO1xuXHQocDogc3RyaW5nLCB0eXBlOiAnanNvbicsIGNiOiBCRlNDYWxsYmFjazxhbnk+KTogdm9pZDtcblx0KHA6IHN0cmluZywgdHlwZTogc3RyaW5nLCBjYjogQkZTQ2FsbGJhY2s8YW55Pik6IHZvaWQ7XG59ID0gYXN5bmNEb3dubG9hZEZpbGVNb2Rlcm47XG5cbi8qKlxuICogU3luY2hyb25vdXNseSBkb3dubG9hZCBhIGZpbGUgYXMgYSBidWZmZXIgb3IgYSBKU09OIG9iamVjdC5cbiAqIE5vdGUgdGhhdCB0aGUgdGhpcmQgZnVuY3Rpb24gc2lnbmF0dXJlIHdpdGggYSBub24tc3BlY2lhbGl6ZWQgdHlwZSBpc1xuICogaW52YWxpZCwgYnV0IFR5cGVTY3JpcHQgcmVxdWlyZXMgaXQgd2hlbiB5b3Ugc3BlY2lhbGl6ZSBzdHJpbmcgYXJndW1lbnRzIHRvXG4gKiBjb25zdGFudHMuXG4gKiBAaGlkZGVuXG4gKi9cbmV4cG9ydCBsZXQgc3luY0Rvd25sb2FkRmlsZToge1xuXHQocDogc3RyaW5nLCB0eXBlOiAnYnVmZmVyJyk6IEJ1ZmZlcjtcblx0KHA6IHN0cmluZywgdHlwZTogJ2pzb24nKTogYW55O1xuXHQocDogc3RyaW5nLCB0eXBlOiBzdHJpbmcpOiBhbnk7XG59ID0gaXNJRSAmJiB0eXBlb2YgQmxvYiAhPT0gJ3VuZGVmaW5lZCcgPyBzeW5jRG93bmxvYWRGaWxlSUUxMCA6IHN5bmNEb3dubG9hZEZpbGVNb2Rlcm47XG5cbi8qKlxuICogU3luY2hyb25vdXNseSByZXRyaWV2ZXMgdGhlIHNpemUgb2YgdGhlIGdpdmVuIGZpbGUgaW4gYnl0ZXMuXG4gKiBAaGlkZGVuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXRGaWxlU2l6ZVN5bmMocDogc3RyaW5nKTogbnVtYmVyIHtcblx0bGV0IHJ2OiBudW1iZXIgPSAtMTtcblx0Z2V0RmlsZVNpemUoZmFsc2UsIHAsIGZ1bmN0aW9uIChlcnI6IEFwaUVycm9yLCBzaXplPzogbnVtYmVyKSB7XG5cdFx0aWYgKGVycikge1xuXHRcdFx0dGhyb3cgZXJyO1xuXHRcdH1cblx0XHRydiA9IHNpemUhO1xuXHR9KTtcblx0cmV0dXJuIHJ2O1xufVxuXG4vKipcbiAqIEFzeW5jaHJvbm91c2x5IHJldHJpZXZlcyB0aGUgc2l6ZSBvZiB0aGUgZ2l2ZW4gZmlsZSBpbiBieXRlcy5cbiAqIEBoaWRkZW5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldEZpbGVTaXplQXN5bmMocDogc3RyaW5nLCBjYjogKGVycjogQXBpRXJyb3IsIHNpemU/OiBudW1iZXIpID0+IHZvaWQpOiB2b2lkIHtcblx0Z2V0RmlsZVNpemUodHJ1ZSwgcCwgY2IpO1xufVxuIiwgImltcG9ydCB7IEJ1ZmZlciB9IGZyb20gJ2J1ZmZlcic7XG4vKipcbiAqIENvbnRhaW5zIHV0aWxpdHkgbWV0aG9kcyB1c2luZyAnZmV0Y2gnLlxuICovXG5cbmltcG9ydCB7IEFwaUVycm9yLCBFcnJvckNvZGUgfSBmcm9tICcuLi9jb3JlL2FwaV9lcnJvcic7XG5pbXBvcnQgeyBCRlNDYWxsYmFjayB9IGZyb20gJy4uL2NvcmUvZmlsZV9zeXN0ZW0nO1xuXG5leHBvcnQgY29uc3QgZmV0Y2hJc0F2YWlsYWJsZSA9IHR5cGVvZiBmZXRjaCAhPT0gJ3VuZGVmaW5lZCcgJiYgZmV0Y2ggIT09IG51bGw7XG5cbi8qKlxuICogQXN5bmNocm9ub3VzbHkgZG93bmxvYWQgYSBmaWxlIGFzIGEgYnVmZmVyIG9yIGEgSlNPTiBvYmplY3QuXG4gKiBOb3RlIHRoYXQgdGhlIHRoaXJkIGZ1bmN0aW9uIHNpZ25hdHVyZSB3aXRoIGEgbm9uLXNwZWNpYWxpemVkIHR5cGUgaXNcbiAqIGludmFsaWQsIGJ1dCBUeXBlU2NyaXB0IHJlcXVpcmVzIGl0IHdoZW4geW91IHNwZWNpYWxpemUgc3RyaW5nIGFyZ3VtZW50cyB0b1xuICogY29uc3RhbnRzLlxuICogQGhpZGRlblxuICovXG5leHBvcnQgZnVuY3Rpb24gZmV0Y2hGaWxlQXN5bmMocDogc3RyaW5nLCB0eXBlOiAnYnVmZmVyJywgY2I6IEJGU0NhbGxiYWNrPEJ1ZmZlcj4pOiB2b2lkO1xuZXhwb3J0IGZ1bmN0aW9uIGZldGNoRmlsZUFzeW5jKHA6IHN0cmluZywgdHlwZTogJ2pzb24nLCBjYjogQkZTQ2FsbGJhY2s8YW55Pik6IHZvaWQ7XG5leHBvcnQgZnVuY3Rpb24gZmV0Y2hGaWxlQXN5bmMocDogc3RyaW5nLCB0eXBlOiBzdHJpbmcsIGNiOiBCRlNDYWxsYmFjazxhbnk+KTogdm9pZDtcbmV4cG9ydCBmdW5jdGlvbiBmZXRjaEZpbGVBc3luYyhwOiBzdHJpbmcsIHR5cGU6IHN0cmluZywgY2I6IEJGU0NhbGxiYWNrPGFueT4pOiB2b2lkIHtcblx0bGV0IHJlcXVlc3Q7XG5cdHRyeSB7XG5cdFx0cmVxdWVzdCA9IGZldGNoKHApO1xuXHR9IGNhdGNoIChlKSB7XG5cdFx0Ly8gWFhYOiBmZXRjaCB3aWxsIHRocm93IGEgVHlwZUVycm9yIGlmIHRoZSBVUkwgaGFzIGNyZWRlbnRpYWxzIGluIGl0XG5cdFx0cmV0dXJuIGNiKG5ldyBBcGlFcnJvcihFcnJvckNvZGUuRUlOVkFMLCBlLm1lc3NhZ2UpKTtcblx0fVxuXHRyZXF1ZXN0XG5cdFx0LnRoZW4ocmVzID0+IHtcblx0XHRcdGlmICghcmVzLm9rKSB7XG5cdFx0XHRcdHJldHVybiBjYihuZXcgQXBpRXJyb3IoRXJyb3JDb2RlLkVJTywgYGZldGNoIGVycm9yOiByZXNwb25zZSByZXR1cm5lZCBjb2RlICR7cmVzLnN0YXR1c31gKSk7XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRzd2l0Y2ggKHR5cGUpIHtcblx0XHRcdFx0XHRjYXNlICdidWZmZXInOlxuXHRcdFx0XHRcdFx0cmVzLmFycmF5QnVmZmVyKClcblx0XHRcdFx0XHRcdFx0LnRoZW4oYnVmID0+IGNiKG51bGwsIEJ1ZmZlci5mcm9tKGJ1ZikpKVxuXHRcdFx0XHRcdFx0XHQuY2F0Y2goZXJyID0+IGNiKG5ldyBBcGlFcnJvcihFcnJvckNvZGUuRUlPLCBlcnIubWVzc2FnZSkpKTtcblx0XHRcdFx0XHRcdGJyZWFrO1xuXHRcdFx0XHRcdGNhc2UgJ2pzb24nOlxuXHRcdFx0XHRcdFx0cmVzLmpzb24oKVxuXHRcdFx0XHRcdFx0XHQudGhlbihqc29uID0+IGNiKG51bGwsIGpzb24pKVxuXHRcdFx0XHRcdFx0XHQuY2F0Y2goZXJyID0+IGNiKG5ldyBBcGlFcnJvcihFcnJvckNvZGUuRUlPLCBlcnIubWVzc2FnZSkpKTtcblx0XHRcdFx0XHRcdGJyZWFrO1xuXHRcdFx0XHRcdGRlZmF1bHQ6XG5cdFx0XHRcdFx0XHRjYihuZXcgQXBpRXJyb3IoRXJyb3JDb2RlLkVJTlZBTCwgJ0ludmFsaWQgZG93bmxvYWQgdHlwZTogJyArIHR5cGUpKTtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH0pXG5cdFx0LmNhdGNoKGVyciA9PiBjYihuZXcgQXBpRXJyb3IoRXJyb3JDb2RlLkVJTywgZXJyLm1lc3NhZ2UpKSk7XG59XG5cbi8qKlxuICogQXN5bmNocm9ub3VzbHkgcmV0cmlldmVzIHRoZSBzaXplIG9mIHRoZSBnaXZlbiBmaWxlIGluIGJ5dGVzLlxuICogQGhpZGRlblxuICovXG5leHBvcnQgZnVuY3Rpb24gZmV0Y2hGaWxlU2l6ZUFzeW5jKHA6IHN0cmluZywgY2I6IEJGU0NhbGxiYWNrPG51bWJlcj4pOiB2b2lkIHtcblx0ZmV0Y2gocCwgeyBtZXRob2Q6ICdIRUFEJyB9KVxuXHRcdC50aGVuKHJlcyA9PiB7XG5cdFx0XHRpZiAoIXJlcy5vaykge1xuXHRcdFx0XHRyZXR1cm4gY2IobmV3IEFwaUVycm9yKEVycm9yQ29kZS5FSU8sIGBmZXRjaCBIRUFEIGVycm9yOiByZXNwb25zZSByZXR1cm5lZCBjb2RlICR7cmVzLnN0YXR1c31gKSk7XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRyZXR1cm4gY2IobnVsbCwgcGFyc2VJbnQocmVzLmhlYWRlcnMuZ2V0KCdDb250ZW50LUxlbmd0aCcpIHx8ICctMScsIDEwKSk7XG5cdFx0XHR9XG5cdFx0fSlcblx0XHQuY2F0Y2goZXJyID0+IGNiKG5ldyBBcGlFcnJvcihFcnJvckNvZGUuRUlPLCBlcnIubWVzc2FnZSkpKTtcbn1cbiIsICJpbXBvcnQgeyBkZWZhdWx0IGFzIFN0YXRzLCBGaWxlVHlwZSB9IGZyb20gJy4uL2NvcmUvc3RhdHMnO1xuaW1wb3J0ICogYXMgcGF0aCBmcm9tICdwYXRoJztcblxuLyoqXG4gKiBBIHNpbXBsZSBjbGFzcyBmb3Igc3RvcmluZyBhIGZpbGVzeXN0ZW0gaW5kZXguIEFzc3VtZXMgdGhhdCBhbGwgcGF0aHMgcGFzc2VkXG4gKiB0byBpdCBhcmUgKmFic29sdXRlKiBwYXRocy5cbiAqXG4gKiBDYW4gYmUgdXNlZCBhcyBhIHBhcnRpYWwgb3IgYSBmdWxsIGluZGV4LCBhbHRob3VnaCBjYXJlIG11c3QgYmUgdGFrZW4gaWYgdXNlZFxuICogZm9yIHRoZSBmb3JtZXIgcHVycG9zZSwgZXNwZWNpYWxseSB3aGVuIGRpcmVjdG9yaWVzIGFyZSBjb25jZXJuZWQuXG4gKi9cbmV4cG9ydCBjbGFzcyBGaWxlSW5kZXg8VD4ge1xuXHQvKipcblx0ICogU3RhdGljIG1ldGhvZCBmb3IgY29uc3RydWN0aW5nIGluZGljZXMgZnJvbSBhIEpTT04gbGlzdGluZy5cblx0ICogQHBhcmFtIGxpc3RpbmcgRGlyZWN0b3J5IGxpc3RpbmcgZ2VuZXJhdGVkIGJ5IHRvb2xzL1hIUkluZGV4ZXIuY29mZmVlXG5cdCAqIEByZXR1cm4gQSBuZXcgRmlsZUluZGV4IG9iamVjdC5cblx0ICovXG5cdHB1YmxpYyBzdGF0aWMgZnJvbUxpc3Rpbmc8VD4obGlzdGluZzogYW55KTogRmlsZUluZGV4PFQ+IHtcblx0XHRjb25zdCBpZHggPSBuZXcgRmlsZUluZGV4PFQ+KCk7XG5cdFx0Ly8gQWRkIGEgcm9vdCBEaXJOb2RlLlxuXHRcdGNvbnN0IHJvb3RJbm9kZSA9IG5ldyBEaXJJbm9kZTxUPigpO1xuXHRcdGlkeC5faW5kZXhbJy8nXSA9IHJvb3RJbm9kZTtcblx0XHRjb25zdCBxdWV1ZSA9IFtbJycsIGxpc3RpbmcsIHJvb3RJbm9kZV1dO1xuXHRcdHdoaWxlIChxdWV1ZS5sZW5ndGggPiAwKSB7XG5cdFx0XHRsZXQgaW5vZGU6IElub2RlO1xuXHRcdFx0Y29uc3QgbmV4dCA9IHF1ZXVlLnBvcCgpO1xuXHRcdFx0Y29uc3QgcHdkID0gbmV4dCFbMF07XG5cdFx0XHRjb25zdCB0cmVlID0gbmV4dCFbMV07XG5cdFx0XHRjb25zdCBwYXJlbnQgPSBuZXh0IVsyXTtcblx0XHRcdGZvciAoY29uc3Qgbm9kZSBpbiB0cmVlKSB7XG5cdFx0XHRcdGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwodHJlZSwgbm9kZSkpIHtcblx0XHRcdFx0XHRjb25zdCBjaGlsZHJlbiA9IHRyZWVbbm9kZV07XG5cdFx0XHRcdFx0Y29uc3QgbmFtZSA9IGAke3B3ZH0vJHtub2RlfWA7XG5cdFx0XHRcdFx0aWYgKGNoaWxkcmVuKSB7XG5cdFx0XHRcdFx0XHRpZHguX2luZGV4W25hbWVdID0gaW5vZGUgPSBuZXcgRGlySW5vZGU8VD4oKTtcblx0XHRcdFx0XHRcdHF1ZXVlLnB1c2goW25hbWUsIGNoaWxkcmVuLCBpbm9kZV0pO1xuXHRcdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0XHQvLyBUaGlzIGlub2RlIGRvZXNuJ3QgaGF2ZSBjb3JyZWN0IHNpemUgaW5mb3JtYXRpb24sIG5vdGVkIHdpdGggLTEuXG5cdFx0XHRcdFx0XHRpbm9kZSA9IG5ldyBGaWxlSW5vZGU8U3RhdHM+KG5ldyBTdGF0cyhGaWxlVHlwZS5GSUxFLCAtMSwgMHgxNmQpKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0aWYgKHBhcmVudCkge1xuXHRcdFx0XHRcdFx0cGFyZW50Ll9sc1tub2RlXSA9IGlub2RlO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH1cblx0XHRyZXR1cm4gaWR4O1xuXHR9XG5cblx0Ly8gTWFwcyBkaXJlY3RvcnkgcGF0aHMgdG8gZGlyZWN0b3J5IGlub2Rlcywgd2hpY2ggY29udGFpbiBmaWxlcy5cblx0cHJpdmF0ZSBfaW5kZXg6IHsgW3BhdGg6IHN0cmluZ106IERpcklub2RlPFQ+IH07XG5cblx0LyoqXG5cdCAqIENvbnN0cnVjdHMgYSBuZXcgRmlsZUluZGV4LlxuXHQgKi9cblx0Y29uc3RydWN0b3IoKSB7XG5cdFx0Ly8gX2luZGV4IGlzIGEgc2luZ2xlLWxldmVsIGtleSx2YWx1ZSBzdG9yZSB0aGF0IG1hcHMgKmRpcmVjdG9yeSogcGF0aHMgdG9cblx0XHQvLyBEaXJJbm9kZXMuIEZpbGUgaW5mb3JtYXRpb24gaXMgb25seSBjb250YWluZWQgaW4gRGlySW5vZGVzIHRoZW1zZWx2ZXMuXG5cdFx0dGhpcy5faW5kZXggPSB7fTtcblx0XHQvLyBDcmVhdGUgdGhlIHJvb3QgZGlyZWN0b3J5LlxuXHRcdHRoaXMuYWRkUGF0aCgnLycsIG5ldyBEaXJJbm9kZSgpKTtcblx0fVxuXG5cdC8qKlxuXHQgKiBSdW5zIHRoZSBnaXZlbiBmdW5jdGlvbiBvdmVyIGFsbCBmaWxlcyBpbiB0aGUgaW5kZXguXG5cdCAqL1xuXHRwdWJsaWMgZmlsZUl0ZXJhdG9yPFQ+KGNiOiAoZmlsZTogVCB8IG51bGwpID0+IHZvaWQpOiB2b2lkIHtcblx0XHRmb3IgKGNvbnN0IHBhdGggaW4gdGhpcy5faW5kZXgpIHtcblx0XHRcdGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwodGhpcy5faW5kZXgsIHBhdGgpKSB7XG5cdFx0XHRcdGNvbnN0IGRpciA9IHRoaXMuX2luZGV4W3BhdGhdO1xuXHRcdFx0XHRjb25zdCBmaWxlcyA9IGRpci5nZXRMaXN0aW5nKCk7XG5cdFx0XHRcdGZvciAoY29uc3QgZmlsZSBvZiBmaWxlcykge1xuXHRcdFx0XHRcdGNvbnN0IGl0ZW0gPSBkaXIuZ2V0SXRlbShmaWxlKTtcblx0XHRcdFx0XHRpZiAoaXNGaWxlSW5vZGU8VD4oaXRlbSkpIHtcblx0XHRcdFx0XHRcdGNiKGl0ZW0uZ2V0RGF0YSgpKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9XG5cdH1cblxuXHQvKipcblx0ICogQWRkcyB0aGUgZ2l2ZW4gYWJzb2x1dGUgcGF0aCB0byB0aGUgaW5kZXggaWYgaXQgaXMgbm90IGFscmVhZHkgaW4gdGhlIGluZGV4LlxuXHQgKiBDcmVhdGVzIGFueSBuZWVkZWQgcGFyZW50IGRpcmVjdG9yaWVzLlxuXHQgKiBAcGFyYW0gcGF0aCBUaGUgcGF0aCB0byBhZGQgdG8gdGhlIGluZGV4LlxuXHQgKiBAcGFyYW0gaW5vZGUgVGhlIGlub2RlIGZvciB0aGVcblx0ICogICBwYXRoIHRvIGFkZC5cblx0ICogQHJldHVybiAnVHJ1ZScgaWYgaXQgd2FzIGFkZGVkIG9yIGFscmVhZHkgZXhpc3RzLCAnZmFsc2UnIGlmIHRoZXJlXG5cdCAqICAgd2FzIGFuIGlzc3VlIGFkZGluZyBpdCAoZS5nLiBpdGVtIGluIHBhdGggaXMgYSBmaWxlLCBpdGVtIGV4aXN0cyBidXQgaXNcblx0ICogICBkaWZmZXJlbnQpLlxuXHQgKiBAdG9kbyBJZiBhZGRpbmcgZmFpbHMgYW5kIGltcGxpY2l0bHkgY3JlYXRlcyBkaXJlY3Rvcmllcywgd2UgZG8gbm90IGNsZWFuIHVwXG5cdCAqICAgdGhlIG5ldyBlbXB0eSBkaXJlY3Rvcmllcy5cblx0ICovXG5cdHB1YmxpYyBhZGRQYXRoKHBhdGg6IHN0cmluZywgaW5vZGU6IElub2RlKTogYm9vbGVhbiB7XG5cdFx0aWYgKCFpbm9kZSkge1xuXHRcdFx0dGhyb3cgbmV3IEVycm9yKCdJbm9kZSBtdXN0IGJlIHNwZWNpZmllZCcpO1xuXHRcdH1cblx0XHRpZiAocGF0aFswXSAhPT0gJy8nKSB7XG5cdFx0XHR0aHJvdyBuZXcgRXJyb3IoJ1BhdGggbXVzdCBiZSBhYnNvbHV0ZSwgZ290OiAnICsgcGF0aCk7XG5cdFx0fVxuXG5cdFx0Ly8gQ2hlY2sgaWYgaXQgYWxyZWFkeSBleGlzdHMuXG5cdFx0aWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbCh0aGlzLl9pbmRleCwgcGF0aCkpIHtcblx0XHRcdHJldHVybiB0aGlzLl9pbmRleFtwYXRoXSA9PT0gaW5vZGU7XG5cdFx0fVxuXG5cdFx0Y29uc3Qgc3BsaXRQYXRoID0gdGhpcy5fc3BsaXRfcGF0aChwYXRoKTtcblx0XHRjb25zdCBkaXJwYXRoID0gc3BsaXRQYXRoWzBdO1xuXHRcdGNvbnN0IGl0ZW1uYW1lID0gc3BsaXRQYXRoWzFdO1xuXHRcdC8vIFRyeSB0byBhZGQgdG8gaXRzIHBhcmVudCBkaXJlY3RvcnkgZmlyc3QuXG5cdFx0bGV0IHBhcmVudCA9IHRoaXMuX2luZGV4W2RpcnBhdGhdO1xuXHRcdGlmIChwYXJlbnQgPT09IHVuZGVmaW5lZCAmJiBwYXRoICE9PSAnLycpIHtcblx0XHRcdC8vIENyZWF0ZSBwYXJlbnQuXG5cdFx0XHRwYXJlbnQgPSBuZXcgRGlySW5vZGU8VD4oKTtcblx0XHRcdGlmICghdGhpcy5hZGRQYXRoKGRpcnBhdGgsIHBhcmVudCkpIHtcblx0XHRcdFx0cmV0dXJuIGZhbHNlO1xuXHRcdFx0fVxuXHRcdH1cblx0XHQvLyBBZGQgbXlzZWxmIHRvIG15IHBhcmVudC5cblx0XHRpZiAocGF0aCAhPT0gJy8nKSB7XG5cdFx0XHRpZiAoIXBhcmVudC5hZGRJdGVtKGl0ZW1uYW1lLCBpbm9kZSkpIHtcblx0XHRcdFx0cmV0dXJuIGZhbHNlO1xuXHRcdFx0fVxuXHRcdH1cblx0XHQvLyBJZiBJJ20gYSBkaXJlY3RvcnksIGFkZCBteXNlbGYgdG8gdGhlIGluZGV4LlxuXHRcdGlmIChpc0Rpcklub2RlPFQ+KGlub2RlKSkge1xuXHRcdFx0dGhpcy5faW5kZXhbcGF0aF0gPSBpbm9kZTtcblx0XHR9XG5cdFx0cmV0dXJuIHRydWU7XG5cdH1cblxuXHQvKipcblx0ICogQWRkcyB0aGUgZ2l2ZW4gYWJzb2x1dGUgcGF0aCB0byB0aGUgaW5kZXggaWYgaXQgaXMgbm90IGFscmVhZHkgaW4gdGhlIGluZGV4LlxuXHQgKiBUaGUgcGF0aCBpcyBhZGRlZCB3aXRob3V0IHNwZWNpYWwgdHJlYXRtZW50IChubyBqb2luaW5nIG9mIGFkamFjZW50IHNlcGFyYXRvcnMsIGV0YykuXG5cdCAqIENyZWF0ZXMgYW55IG5lZWRlZCBwYXJlbnQgZGlyZWN0b3JpZXMuXG5cdCAqIEBwYXJhbSBwYXRoIFRoZSBwYXRoIHRvIGFkZCB0byB0aGUgaW5kZXguXG5cdCAqIEBwYXJhbSBpbm9kZSBUaGUgaW5vZGUgZm9yIHRoZVxuXHQgKiAgIHBhdGggdG8gYWRkLlxuXHQgKiBAcmV0dXJuICdUcnVlJyBpZiBpdCB3YXMgYWRkZWQgb3IgYWxyZWFkeSBleGlzdHMsICdmYWxzZScgaWYgdGhlcmVcblx0ICogICB3YXMgYW4gaXNzdWUgYWRkaW5nIGl0IChlLmcuIGl0ZW0gaW4gcGF0aCBpcyBhIGZpbGUsIGl0ZW0gZXhpc3RzIGJ1dCBpc1xuXHQgKiAgIGRpZmZlcmVudCkuXG5cdCAqIEB0b2RvIElmIGFkZGluZyBmYWlscyBhbmQgaW1wbGljaXRseSBjcmVhdGVzIGRpcmVjdG9yaWVzLCB3ZSBkbyBub3QgY2xlYW4gdXBcblx0ICogICB0aGUgbmV3IGVtcHR5IGRpcmVjdG9yaWVzLlxuXHQgKi9cblx0cHVibGljIGFkZFBhdGhGYXN0KHBhdGg6IHN0cmluZywgaW5vZGU6IElub2RlKTogYm9vbGVhbiB7XG5cdFx0Y29uc3QgaXRlbU5hbWVNYXJrID0gcGF0aC5sYXN0SW5kZXhPZignLycpO1xuXHRcdGNvbnN0IHBhcmVudFBhdGggPSBpdGVtTmFtZU1hcmsgPT09IDAgPyAnLycgOiBwYXRoLnN1YnN0cmluZygwLCBpdGVtTmFtZU1hcmspO1xuXHRcdGNvbnN0IGl0ZW1OYW1lID0gcGF0aC5zdWJzdHJpbmcoaXRlbU5hbWVNYXJrICsgMSk7XG5cblx0XHQvLyBUcnkgdG8gYWRkIHRvIGl0cyBwYXJlbnQgZGlyZWN0b3J5IGZpcnN0LlxuXHRcdGxldCBwYXJlbnQgPSB0aGlzLl9pbmRleFtwYXJlbnRQYXRoXTtcblx0XHRpZiAocGFyZW50ID09PSB1bmRlZmluZWQpIHtcblx0XHRcdC8vIENyZWF0ZSBwYXJlbnQuXG5cdFx0XHRwYXJlbnQgPSBuZXcgRGlySW5vZGU8VD4oKTtcblx0XHRcdHRoaXMuYWRkUGF0aEZhc3QocGFyZW50UGF0aCwgcGFyZW50KTtcblx0XHR9XG5cblx0XHRpZiAoIXBhcmVudC5hZGRJdGVtKGl0ZW1OYW1lLCBpbm9kZSkpIHtcblx0XHRcdHJldHVybiBmYWxzZTtcblx0XHR9XG5cblx0XHQvLyBJZiBhZGRpbmcgYSBkaXJlY3RvcnksIGFkZCB0byB0aGUgaW5kZXggYXMgd2VsbC5cblx0XHRpZiAoaW5vZGUuaXNEaXIoKSkge1xuXHRcdFx0dGhpcy5faW5kZXhbcGF0aF0gPSA8RGlySW5vZGU8VD4+aW5vZGU7XG5cdFx0fVxuXHRcdHJldHVybiB0cnVlO1xuXHR9XG5cblx0LyoqXG5cdCAqIFJlbW92ZXMgdGhlIGdpdmVuIHBhdGguIENhbiBiZSBhIGZpbGUgb3IgYSBkaXJlY3RvcnkuXG5cdCAqIEByZXR1cm4gVGhlIHJlbW92ZWQgaXRlbSxcblx0ICogICBvciBudWxsIGlmIGl0IGRpZCBub3QgZXhpc3QuXG5cdCAqL1xuXHRwdWJsaWMgcmVtb3ZlUGF0aChwYXRoOiBzdHJpbmcpOiBJbm9kZSB8IG51bGwge1xuXHRcdGNvbnN0IHNwbGl0UGF0aCA9IHRoaXMuX3NwbGl0X3BhdGgocGF0aCk7XG5cdFx0Y29uc3QgZGlycGF0aCA9IHNwbGl0UGF0aFswXTtcblx0XHRjb25zdCBpdGVtbmFtZSA9IHNwbGl0UGF0aFsxXTtcblxuXHRcdC8vIFRyeSB0byByZW1vdmUgaXQgZnJvbSBpdHMgcGFyZW50IGRpcmVjdG9yeSBmaXJzdC5cblx0XHRjb25zdCBwYXJlbnQgPSB0aGlzLl9pbmRleFtkaXJwYXRoXTtcblx0XHRpZiAocGFyZW50ID09PSB1bmRlZmluZWQpIHtcblx0XHRcdHJldHVybiBudWxsO1xuXHRcdH1cblx0XHQvLyBSZW1vdmUgbXlzZWxmIGZyb20gbXkgcGFyZW50LlxuXHRcdGNvbnN0IGlub2RlID0gcGFyZW50LnJlbUl0ZW0oaXRlbW5hbWUpO1xuXHRcdGlmIChpbm9kZSA9PT0gbnVsbCkge1xuXHRcdFx0cmV0dXJuIG51bGw7XG5cdFx0fVxuXHRcdC8vIElmIEknbSBhIGRpcmVjdG9yeSwgcmVtb3ZlIG15c2VsZiBmcm9tIHRoZSBpbmRleCwgYW5kIHJlbW92ZSBteSBjaGlsZHJlbi5cblx0XHRpZiAoaXNEaXJJbm9kZShpbm9kZSkpIHtcblx0XHRcdGNvbnN0IGNoaWxkcmVuID0gaW5vZGUuZ2V0TGlzdGluZygpO1xuXHRcdFx0Zm9yIChjb25zdCBjaGlsZCBvZiBjaGlsZHJlbikge1xuXHRcdFx0XHR0aGlzLnJlbW92ZVBhdGgocGF0aCArICcvJyArIGNoaWxkKTtcblx0XHRcdH1cblxuXHRcdFx0Ly8gUmVtb3ZlIHRoZSBkaXJlY3RvcnkgZnJvbSB0aGUgaW5kZXgsIHVubGVzcyBpdCdzIHRoZSByb290LlxuXHRcdFx0aWYgKHBhdGggIT09ICcvJykge1xuXHRcdFx0XHRkZWxldGUgdGhpcy5faW5kZXhbcGF0aF07XG5cdFx0XHR9XG5cdFx0fVxuXHRcdHJldHVybiBpbm9kZTtcblx0fVxuXG5cdC8qKlxuXHQgKiBSZXRyaWV2ZXMgdGhlIGRpcmVjdG9yeSBsaXN0aW5nIG9mIHRoZSBnaXZlbiBwYXRoLlxuXHQgKiBAcmV0dXJuIEFuIGFycmF5IG9mIGZpbGVzIGluIHRoZSBnaXZlbiBwYXRoLCBvciAnbnVsbCcgaWYgaXQgZG9lcyBub3QgZXhpc3QuXG5cdCAqL1xuXHRwdWJsaWMgbHMocGF0aDogc3RyaW5nKTogc3RyaW5nW10gfCBudWxsIHtcblx0XHRjb25zdCBpdGVtID0gdGhpcy5faW5kZXhbcGF0aF07XG5cdFx0aWYgKGl0ZW0gPT09IHVuZGVmaW5lZCkge1xuXHRcdFx0cmV0dXJuIG51bGw7XG5cdFx0fVxuXHRcdHJldHVybiBpdGVtLmdldExpc3RpbmcoKTtcblx0fVxuXG5cdC8qKlxuXHQgKiBSZXR1cm5zIHRoZSBpbm9kZSBvZiB0aGUgZ2l2ZW4gaXRlbS5cblx0ICogQHJldHVybiBSZXR1cm5zIG51bGwgaWYgdGhlIGl0ZW0gZG9lcyBub3QgZXhpc3QuXG5cdCAqL1xuXHRwdWJsaWMgZ2V0SW5vZGUocGF0aDogc3RyaW5nKTogSW5vZGUgfCBudWxsIHtcblx0XHRjb25zdCBzcGxpdFBhdGggPSB0aGlzLl9zcGxpdF9wYXRoKHBhdGgpO1xuXHRcdGNvbnN0IGRpcnBhdGggPSBzcGxpdFBhdGhbMF07XG5cdFx0Y29uc3QgaXRlbW5hbWUgPSBzcGxpdFBhdGhbMV07XG5cdFx0Ly8gUmV0cmlldmUgZnJvbSBpdHMgcGFyZW50IGRpcmVjdG9yeS5cblx0XHRjb25zdCBwYXJlbnQgPSB0aGlzLl9pbmRleFtkaXJwYXRoXTtcblx0XHRpZiAocGFyZW50ID09PSB1bmRlZmluZWQpIHtcblx0XHRcdHJldHVybiBudWxsO1xuXHRcdH1cblx0XHQvLyBSb290IGNhc2Vcblx0XHRpZiAoZGlycGF0aCA9PT0gcGF0aCkge1xuXHRcdFx0cmV0dXJuIHBhcmVudDtcblx0XHR9XG5cdFx0cmV0dXJuIHBhcmVudC5nZXRJdGVtKGl0ZW1uYW1lKTtcblx0fVxuXG5cdC8qKlxuXHQgKiBTcGxpdCBpbnRvIGEgKGRpcmVjdG9yeSBwYXRoLCBpdGVtIG5hbWUpIHBhaXJcblx0ICovXG5cdHByaXZhdGUgX3NwbGl0X3BhdGgocDogc3RyaW5nKTogc3RyaW5nW10ge1xuXHRcdGNvbnN0IGRpcnBhdGggPSBwYXRoLmRpcm5hbWUocCk7XG5cdFx0Y29uc3QgaXRlbW5hbWUgPSBwLnN1YnN0cihkaXJwYXRoLmxlbmd0aCArIChkaXJwYXRoID09PSAnLycgPyAwIDogMSkpO1xuXHRcdHJldHVybiBbZGlycGF0aCwgaXRlbW5hbWVdO1xuXHR9XG59XG5cbi8qKlxuICogR2VuZXJpYyBpbnRlcmZhY2UgZm9yIGZpbGUvZGlyZWN0b3J5IGlub2Rlcy5cbiAqIE5vdGUgdGhhdCBTdGF0cyBvYmplY3RzIGFyZSB3aGF0IHdlIHVzZSBmb3IgZmlsZSBpbm9kZXMuXG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgSW5vZGUge1xuXHQvLyBJcyB0aGlzIGFuIGlub2RlIGZvciBhIGZpbGU/XG5cdGlzRmlsZSgpOiBib29sZWFuO1xuXHQvLyBJcyB0aGlzIGFuIGlub2RlIGZvciBhIGRpcmVjdG9yeT9cblx0aXNEaXIoKTogYm9vbGVhbjtcblx0Ly9jb21wYXRpYmlsaXR5IHdpdGggb3RoZXIgSW5vZGUgdHlwZXNcblx0dG9TdGF0cygpOiBTdGF0cztcbn1cblxuLyoqXG4gKiBJbm9kZSBmb3IgYSBmaWxlLiBTdG9yZXMgYW4gYXJiaXRyYXJ5IChmaWxlc3lzdGVtLXNwZWNpZmljKSBkYXRhIHBheWxvYWQuXG4gKi9cbmV4cG9ydCBjbGFzcyBGaWxlSW5vZGU8VD4gaW1wbGVtZW50cyBJbm9kZSB7XG5cdGNvbnN0cnVjdG9yKHByaXZhdGUgZGF0YTogVCkge31cblx0cHVibGljIGlzRmlsZSgpOiBib29sZWFuIHtcblx0XHRyZXR1cm4gdHJ1ZTtcblx0fVxuXHRwdWJsaWMgaXNEaXIoKTogYm9vbGVhbiB7XG5cdFx0cmV0dXJuIGZhbHNlO1xuXHR9XG5cdHB1YmxpYyBnZXREYXRhKCk6IFQge1xuXHRcdHJldHVybiB0aGlzLmRhdGE7XG5cdH1cblx0cHVibGljIHNldERhdGEoZGF0YTogVCk6IHZvaWQge1xuXHRcdHRoaXMuZGF0YSA9IGRhdGE7XG5cdH1cblx0cHVibGljIHRvU3RhdHMoKTogU3RhdHMge1xuXHRcdHJldHVybiBuZXcgU3RhdHMoRmlsZVR5cGUuRklMRSwgNDA5NiwgMG82NjYpO1xuXHR9XG59XG5cbi8qKlxuICogSW5vZGUgZm9yIGEgZGlyZWN0b3J5LiBDdXJyZW50bHkgb25seSBjb250YWlucyB0aGUgZGlyZWN0b3J5IGxpc3RpbmcuXG4gKi9cbmV4cG9ydCBjbGFzcyBEaXJJbm9kZTxUPiBpbXBsZW1lbnRzIElub2RlIHtcblx0cHJpdmF0ZSBfbHM6IHsgW3BhdGg6IHN0cmluZ106IElub2RlIH0gPSB7fTtcblx0LyoqXG5cdCAqIENvbnN0cnVjdHMgYW4gaW5vZGUgZm9yIGEgZGlyZWN0b3J5LlxuXHQgKi9cblx0Y29uc3RydWN0b3IocHJpdmF0ZSBkYXRhOiBUIHwgbnVsbCA9IG51bGwpIHt9XG5cdHB1YmxpYyBpc0ZpbGUoKTogYm9vbGVhbiB7XG5cdFx0cmV0dXJuIGZhbHNlO1xuXHR9XG5cdHB1YmxpYyBpc0RpcigpOiBib29sZWFuIHtcblx0XHRyZXR1cm4gdHJ1ZTtcblx0fVxuXHRwdWJsaWMgZ2V0RGF0YSgpOiBUIHwgbnVsbCB7XG5cdFx0cmV0dXJuIHRoaXMuZGF0YTtcblx0fVxuXG5cdC8qKlxuXHQgKiBSZXR1cm4gYSBTdGF0cyBvYmplY3QgZm9yIHRoaXMgaW5vZGUuXG5cdCAqIEB0b2RvIFNob3VsZCBwcm9iYWJseSByZW1vdmUgdGhpcyBhdCBzb21lIHBvaW50LiBUaGlzIGlzbid0IHRoZVxuXHQgKiAgICAgICByZXNwb25zaWJpbGl0eSBvZiB0aGUgRmlsZUluZGV4LlxuXHQgKi9cblx0cHVibGljIGdldFN0YXRzKCk6IFN0YXRzIHtcblx0XHRyZXR1cm4gbmV3IFN0YXRzKEZpbGVUeXBlLkRJUkVDVE9SWSwgNDA5NiwgMG81NTUpO1xuXHR9XG5cdC8qKlxuXHQgKiBBbGlhcyBvZiBnZXRTdGF0cygpXG5cdCAqIEB0b2RvIFJlbW92ZSB0aGlzIGF0IHNvbWUgcG9pbnQuIFRoaXMgaXNuJ3QgdGhlXG5cdCAqICAgICAgIHJlc3BvbnNpYmlsaXR5IG9mIHRoZSBGaWxlSW5kZXguXG5cdCAqL1xuXHRwdWJsaWMgdG9TdGF0cygpOiBTdGF0cyB7XG5cdFx0cmV0dXJuIHRoaXMuZ2V0U3RhdHMoKTtcblx0fVxuXHQvKipcblx0ICogUmV0dXJucyB0aGUgZGlyZWN0b3J5IGxpc3RpbmcgZm9yIHRoaXMgZGlyZWN0b3J5LiBQYXRocyBpbiB0aGUgZGlyZWN0b3J5IGFyZVxuXHQgKiByZWxhdGl2ZSB0byB0aGUgZGlyZWN0b3J5J3MgcGF0aC5cblx0ICogQHJldHVybiBUaGUgZGlyZWN0b3J5IGxpc3RpbmcgZm9yIHRoaXMgZGlyZWN0b3J5LlxuXHQgKi9cblx0cHVibGljIGdldExpc3RpbmcoKTogc3RyaW5nW10ge1xuXHRcdHJldHVybiBPYmplY3Qua2V5cyh0aGlzLl9scyk7XG5cdH1cblx0LyoqXG5cdCAqIFJldHVybnMgdGhlIGlub2RlIGZvciB0aGUgaW5kaWNhdGVkIGl0ZW0sIG9yIG51bGwgaWYgaXQgZG9lcyBub3QgZXhpc3QuXG5cdCAqIEBwYXJhbSBwIE5hbWUgb2YgaXRlbSBpbiB0aGlzIGRpcmVjdG9yeS5cblx0ICovXG5cdHB1YmxpYyBnZXRJdGVtKHA6IHN0cmluZyk6IElub2RlIHwgbnVsbCB7XG5cdFx0Y29uc3QgaXRlbSA9IHRoaXMuX2xzW3BdO1xuXHRcdHJldHVybiBpdGVtID8gaXRlbSA6IG51bGw7XG5cdH1cblx0LyoqXG5cdCAqIEFkZCB0aGUgZ2l2ZW4gaXRlbSB0byB0aGUgZGlyZWN0b3J5IGxpc3RpbmcuIE5vdGUgdGhhdCB0aGUgZ2l2ZW4gaW5vZGUgaXNcblx0ICogbm90IGNvcGllZCwgYW5kIHdpbGwgYmUgbXV0YXRlZCBieSB0aGUgRGlySW5vZGUgaWYgaXQgaXMgYSBEaXJJbm9kZS5cblx0ICogQHBhcmFtIHAgSXRlbSBuYW1lIHRvIGFkZCB0byB0aGUgZGlyZWN0b3J5IGxpc3RpbmcuXG5cdCAqIEBwYXJhbSBpbm9kZSBUaGUgaW5vZGUgZm9yIHRoZVxuXHQgKiAgIGl0ZW0gdG8gYWRkIHRvIHRoZSBkaXJlY3RvcnkgaW5vZGUuXG5cdCAqIEByZXR1cm4gVHJ1ZSBpZiBpdCB3YXMgYWRkZWQsIGZhbHNlIGlmIGl0IGFscmVhZHkgZXhpc3RlZC5cblx0ICovXG5cdHB1YmxpYyBhZGRJdGVtKHA6IHN0cmluZywgaW5vZGU6IElub2RlKTogYm9vbGVhbiB7XG5cdFx0aWYgKHAgaW4gdGhpcy5fbHMpIHtcblx0XHRcdHJldHVybiBmYWxzZTtcblx0XHR9XG5cdFx0dGhpcy5fbHNbcF0gPSBpbm9kZTtcblx0XHRyZXR1cm4gdHJ1ZTtcblx0fVxuXHQvKipcblx0ICogUmVtb3ZlcyB0aGUgZ2l2ZW4gaXRlbSBmcm9tIHRoZSBkaXJlY3RvcnkgbGlzdGluZy5cblx0ICogQHBhcmFtIHAgTmFtZSBvZiBpdGVtIHRvIHJlbW92ZSBmcm9tIHRoZSBkaXJlY3RvcnkgbGlzdGluZy5cblx0ICogQHJldHVybiBSZXR1cm5zIHRoZSBpdGVtXG5cdCAqICAgcmVtb3ZlZCwgb3IgbnVsbCBpZiB0aGUgaXRlbSBkaWQgbm90IGV4aXN0LlxuXHQgKi9cblx0cHVibGljIHJlbUl0ZW0ocDogc3RyaW5nKTogSW5vZGUgfCBudWxsIHtcblx0XHRjb25zdCBpdGVtID0gdGhpcy5fbHNbcF07XG5cdFx0aWYgKGl0ZW0gPT09IHVuZGVmaW5lZCkge1xuXHRcdFx0cmV0dXJuIG51bGw7XG5cdFx0fVxuXHRcdGRlbGV0ZSB0aGlzLl9sc1twXTtcblx0XHRyZXR1cm4gaXRlbTtcblx0fVxufVxuXG4vKipcbiAqIEBoaWRkZW5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGlzRmlsZUlub2RlPFQ+KGlub2RlOiBJbm9kZSB8IG51bGwpOiBpbm9kZSBpcyBGaWxlSW5vZGU8VD4ge1xuXHRyZXR1cm4gISFpbm9kZSAmJiBpbm9kZS5pc0ZpbGUoKTtcbn1cblxuLyoqXG4gKiBAaGlkZGVuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBpc0Rpcklub2RlPFQ+KGlub2RlOiBJbm9kZSB8IG51bGwpOiBpbm9kZSBpcyBEaXJJbm9kZTxUPiB7XG5cdHJldHVybiAhIWlub2RlICYmIGlub2RlLmlzRGlyKCk7XG59XG4iLCAiaW1wb3J0IHsgQmFzZUZpbGVTeXN0ZW0sIEZpbGVTeXN0ZW0sIEJGU0NhbGxiYWNrLCBGaWxlU3lzdGVtT3B0aW9ucyB9IGZyb20gJy4uL2NvcmUvZmlsZV9zeXN0ZW0nO1xuaW1wb3J0IHsgQXBpRXJyb3IsIEVycm9yQ29kZSB9IGZyb20gJy4uL2NvcmUvYXBpX2Vycm9yJztcbmltcG9ydCB7IEZpbGVGbGFnLCBBY3Rpb25UeXBlIH0gZnJvbSAnLi4vY29yZS9maWxlX2ZsYWcnO1xuaW1wb3J0IHsgY29weWluZ1NsaWNlIH0gZnJvbSAnLi4vY29yZS91dGlsJztcbmltcG9ydCB7IEZpbGUgfSBmcm9tICcuLi9jb3JlL2ZpbGUnO1xuaW1wb3J0IHsgZGVmYXVsdCBhcyBTdGF0cywgRmlsZVBlcm0gfSBmcm9tICcuLi9jb3JlL3N0YXRzJztcbmltcG9ydCB7IE5vU3luY0ZpbGUgfSBmcm9tICcuLi9nZW5lcmljL3ByZWxvYWRfZmlsZSc7XG5pbXBvcnQgeyB4aHJJc0F2YWlsYWJsZSwgYXN5bmNEb3dubG9hZEZpbGUsIHN5bmNEb3dubG9hZEZpbGUsIGdldEZpbGVTaXplQXN5bmMsIGdldEZpbGVTaXplU3luYyB9IGZyb20gJy4uL2dlbmVyaWMveGhyJztcbmltcG9ydCB7IGZldGNoSXNBdmFpbGFibGUsIGZldGNoRmlsZUFzeW5jLCBmZXRjaEZpbGVTaXplQXN5bmMgfSBmcm9tICcuLi9nZW5lcmljL2ZldGNoJztcbmltcG9ydCB7IEZpbGVJbmRleCwgaXNGaWxlSW5vZGUsIGlzRGlySW5vZGUgfSBmcm9tICcuLi9nZW5lcmljL2ZpbGVfaW5kZXgnO1xuaW1wb3J0IENyZWQgZnJvbSAnLi4vY29yZS9jcmVkJztcbmltcG9ydCB0eXBlIHsgQnVmZmVyIH0gZnJvbSAnYnVmZmVyJztcblxuLyoqXG4gKiBUcnkgdG8gY29udmVydCB0aGUgZ2l2ZW4gYnVmZmVyIGludG8gYSBzdHJpbmcsIGFuZCBwYXNzIGl0IHRvIHRoZSBjYWxsYmFjay5cbiAqIE9wdGltaXphdGlvbiB0aGF0IHJlbW92ZXMgdGhlIG5lZWRlZCB0cnkvY2F0Y2ggaW50byBhIGhlbHBlciBmdW5jdGlvbiwgYXNcbiAqIHRoaXMgaXMgYW4gdW5jb21tb24gY2FzZS5cbiAqIEBoaWRkZW5cbiAqL1xuZnVuY3Rpb24gdHJ5VG9TdHJpbmcoYnVmZjogQnVmZmVyLCBlbmNvZGluZzogQnVmZmVyRW5jb2RpbmcsIGNiOiBCRlNDYWxsYmFjazxzdHJpbmc+KSB7XG5cdHRyeSB7XG5cdFx0Y2IobnVsbCwgYnVmZi50b1N0cmluZyhlbmNvZGluZykpO1xuXHR9IGNhdGNoIChlKSB7XG5cdFx0Y2IoZSk7XG5cdH1cbn1cblxuLyoqXG4gKiBDb25maWd1cmF0aW9uIG9wdGlvbnMgZm9yIGEgSFRUUFJlcXVlc3QgZmlsZSBzeXN0ZW0uXG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgSFRUUFJlcXVlc3RPcHRpb25zIHtcblx0Ly8gVVJMIHRvIGEgZmlsZSBpbmRleCBhcyBhIEpTT04gZmlsZSBvciB0aGUgZmlsZSBpbmRleCBvYmplY3QgaXRzZWxmLCBnZW5lcmF0ZWQgd2l0aCB0aGUgbWFrZV9odHRwX2luZGV4IHNjcmlwdC5cblx0Ly8gRGVmYXVsdHMgdG8gYGluZGV4Lmpzb25gLlxuXHRpbmRleD86IHN0cmluZyB8IG9iamVjdDtcblx0Ly8gVXNlZCBhcyB0aGUgVVJMIHByZWZpeCBmb3IgZmV0Y2hlZCBmaWxlcy5cblx0Ly8gRGVmYXVsdDogRmV0Y2ggZmlsZXMgcmVsYXRpdmUgdG8gdGhlIGluZGV4LlxuXHRiYXNlVXJsPzogc3RyaW5nO1xuXHQvLyBXaGV0aGVyIHRvIHByZWZlciBYbWxIdHRwUmVxdWVzdCBvciBmZXRjaCBmb3IgYXN5bmMgb3BlcmF0aW9ucyBpZiBib3RoIGFyZSBhdmFpbGFibGUuXG5cdC8vIERlZmF1bHQ6IGZhbHNlXG5cdHByZWZlclhIUj86IGJvb2xlYW47XG59XG5cbmludGVyZmFjZSBBc3luY0Rvd25sb2FkRmlsZU1ldGhvZCB7XG5cdChwOiBzdHJpbmcsIHR5cGU6ICdidWZmZXInLCBjYjogQkZTQ2FsbGJhY2s8QnVmZmVyPik6IHZvaWQ7XG5cdChwOiBzdHJpbmcsIHR5cGU6ICdqc29uJywgY2I6IEJGU0NhbGxiYWNrPGFueT4pOiB2b2lkO1xuXHQocDogc3RyaW5nLCB0eXBlOiBzdHJpbmcsIGNiOiBCRlNDYWxsYmFjazxhbnk+KTogdm9pZDtcbn1cblxuaW50ZXJmYWNlIFN5bmNEb3dubG9hZEZpbGVNZXRob2Qge1xuXHQocDogc3RyaW5nLCB0eXBlOiAnYnVmZmVyJyk6IEJ1ZmZlcjtcblx0KHA6IHN0cmluZywgdHlwZTogJ2pzb24nKTogYW55O1xuXHQocDogc3RyaW5nLCB0eXBlOiBzdHJpbmcpOiBhbnk7XG59XG5cbmZ1bmN0aW9uIHN5bmNOb3RBdmFpbGFibGVFcnJvcigpOiBuZXZlciB7XG5cdHRocm93IG5ldyBBcGlFcnJvcihFcnJvckNvZGUuRU5PVFNVUCwgYFN5bmNocm9ub3VzIEhUVFAgZG93bmxvYWQgbWV0aG9kcyBhcmUgbm90IGF2YWlsYWJsZSBpbiB0aGlzIGVudmlyb25tZW50LmApO1xufVxuXG4vKipcbiAqIEEgc2ltcGxlIGZpbGVzeXN0ZW0gYmFja2VkIGJ5IEhUVFAgZG93bmxvYWRzLiBZb3UgbXVzdCBjcmVhdGUgYSBkaXJlY3RvcnkgbGlzdGluZyB1c2luZyB0aGVcbiAqIGBtYWtlX2h0dHBfaW5kZXhgIHRvb2wgcHJvdmlkZWQgYnkgQnJvd3NlckZTLlxuICpcbiAqIElmIHlvdSBpbnN0YWxsIEJyb3dzZXJGUyBnbG9iYWxseSB3aXRoIGBucG0gaSAtZyBicm93c2VyZnNgLCB5b3UgY2FuIGdlbmVyYXRlIGEgbGlzdGluZyBieVxuICogcnVubmluZyBgbWFrZV9odHRwX2luZGV4YCBpbiB5b3VyIHRlcm1pbmFsIGluIHRoZSBkaXJlY3RvcnkgeW91IHdvdWxkIGxpa2UgdG8gaW5kZXg6XG4gKlxuICogYGBgXG4gKiBtYWtlX2h0dHBfaW5kZXggPiBpbmRleC5qc29uXG4gKiBgYGBcbiAqXG4gKiBMaXN0aW5ncyBvYmplY3RzIGxvb2sgbGlrZSB0aGUgZm9sbG93aW5nOlxuICpcbiAqIGBgYGpzb25cbiAqIHtcbiAqICAgXCJob21lXCI6IHtcbiAqICAgICBcImp2aWxrXCI6IHtcbiAqICAgICAgIFwic29tZUZpbGUudHh0XCI6IG51bGwsXG4gKiAgICAgICBcInNvbWVEaXJcIjoge1xuICogICAgICAgICAvLyBFbXB0eSBkaXJlY3RvcnlcbiAqICAgICAgIH1cbiAqICAgICB9XG4gKiAgIH1cbiAqIH1cbiAqIGBgYFxuICpcbiAqICpUaGlzIGV4YW1wbGUgaGFzIHRoZSBmb2xkZXIgYC9ob21lL2p2aWxrYCB3aXRoIHN1YmZpbGUgYHNvbWVGaWxlLnR4dGAgYW5kIHN1YmZvbGRlciBgc29tZURpcmAuKlxuICovXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBIVFRQUmVxdWVzdCBleHRlbmRzIEJhc2VGaWxlU3lzdGVtIGltcGxlbWVudHMgRmlsZVN5c3RlbSB7XG5cdHB1YmxpYyBzdGF0aWMgcmVhZG9ubHkgTmFtZSA9ICdIVFRQUmVxdWVzdCc7XG5cblx0cHVibGljIHN0YXRpYyByZWFkb25seSBPcHRpb25zOiBGaWxlU3lzdGVtT3B0aW9ucyA9IHtcblx0XHRpbmRleDoge1xuXHRcdFx0dHlwZTogWydzdHJpbmcnLCAnb2JqZWN0J10sXG5cdFx0XHRvcHRpb25hbDogdHJ1ZSxcblx0XHRcdGRlc2NyaXB0aW9uOiAnVVJMIHRvIGEgZmlsZSBpbmRleCBhcyBhIEpTT04gZmlsZSBvciB0aGUgZmlsZSBpbmRleCBvYmplY3QgaXRzZWxmLCBnZW5lcmF0ZWQgd2l0aCB0aGUgbWFrZV9odHRwX2luZGV4IHNjcmlwdC4gRGVmYXVsdHMgdG8gYGluZGV4Lmpzb25gLicsXG5cdFx0fSxcblx0XHRiYXNlVXJsOiB7XG5cdFx0XHR0eXBlOiAnc3RyaW5nJyxcblx0XHRcdG9wdGlvbmFsOiB0cnVlLFxuXHRcdFx0ZGVzY3JpcHRpb246ICdVc2VkIGFzIHRoZSBVUkwgcHJlZml4IGZvciBmZXRjaGVkIGZpbGVzLiBEZWZhdWx0OiBGZXRjaCBmaWxlcyByZWxhdGl2ZSB0byB0aGUgaW5kZXguJyxcblx0XHR9LFxuXHRcdHByZWZlclhIUjoge1xuXHRcdFx0dHlwZTogJ2Jvb2xlYW4nLFxuXHRcdFx0b3B0aW9uYWw6IHRydWUsXG5cdFx0XHRkZXNjcmlwdGlvbjogJ1doZXRoZXIgdG8gcHJlZmVyIFhtbEh0dHBSZXF1ZXN0IG9yIGZldGNoIGZvciBhc3luYyBvcGVyYXRpb25zIGlmIGJvdGggYXJlIGF2YWlsYWJsZS4gRGVmYXVsdDogZmFsc2UnLFxuXHRcdH0sXG5cdH07XG5cblx0LyoqXG5cdCAqIENvbnN0cnVjdCBhbiBIVFRQUmVxdWVzdCBmaWxlIHN5c3RlbSBiYWNrZW5kIHdpdGggdGhlIGdpdmVuIG9wdGlvbnMuXG5cdCAqL1xuXHRwdWJsaWMgc3RhdGljIENyZWF0ZShvcHRzOiBIVFRQUmVxdWVzdE9wdGlvbnMsIGNiOiBCRlNDYWxsYmFjazxIVFRQUmVxdWVzdD4pOiB2b2lkIHtcblx0XHRpZiAob3B0cy5pbmRleCA9PT0gdW5kZWZpbmVkKSB7XG5cdFx0XHRvcHRzLmluZGV4ID0gYGluZGV4Lmpzb25gO1xuXHRcdH1cblx0XHRpZiAodHlwZW9mIG9wdHMuaW5kZXggPT09ICdzdHJpbmcnKSB7XG5cdFx0XHRhc3luY0Rvd25sb2FkRmlsZShvcHRzLmluZGV4LCAnanNvbicsIChlLCBkYXRhPykgPT4ge1xuXHRcdFx0XHRpZiAoZSkge1xuXHRcdFx0XHRcdGNiKGUpO1xuXHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdGNiKG51bGwsIG5ldyBIVFRQUmVxdWVzdChkYXRhLCBvcHRzLmJhc2VVcmwpKTtcblx0XHRcdFx0fVxuXHRcdFx0fSk7XG5cdFx0fSBlbHNlIHtcblx0XHRcdGNiKG51bGwsIG5ldyBIVFRQUmVxdWVzdChvcHRzLmluZGV4LCBvcHRzLmJhc2VVcmwpKTtcblx0XHR9XG5cdH1cblxuXHRwdWJsaWMgc3RhdGljIENyZWF0ZUFzeW5jKG9wdHM6IEhUVFBSZXF1ZXN0T3B0aW9ucyk6IFByb21pc2U8SFRUUFJlcXVlc3Q+IHtcblx0XHRyZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuXHRcdFx0dGhpcy5DcmVhdGUob3B0cywgKGVycm9yLCBmcykgPT4ge1xuXHRcdFx0XHRpZiAoZXJyb3IgfHwgIWZzKSB7XG5cdFx0XHRcdFx0cmVqZWN0KGVycm9yKTtcblx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRyZXNvbHZlKGZzKTtcblx0XHRcdFx0fVxuXHRcdFx0fSk7XG5cdFx0fSk7XG5cdH1cblxuXHRwdWJsaWMgc3RhdGljIGlzQXZhaWxhYmxlKCk6IGJvb2xlYW4ge1xuXHRcdHJldHVybiB4aHJJc0F2YWlsYWJsZSB8fCBmZXRjaElzQXZhaWxhYmxlO1xuXHR9XG5cblx0cHVibGljIHJlYWRvbmx5IHByZWZpeFVybDogc3RyaW5nO1xuXHRwcml2YXRlIF9pbmRleDogRmlsZUluZGV4PHt9Pjtcblx0cHJpdmF0ZSBfcmVxdWVzdEZpbGVBc3luY0ludGVybmFsOiBBc3luY0Rvd25sb2FkRmlsZU1ldGhvZDtcblx0cHJpdmF0ZSBfcmVxdWVzdEZpbGVTaXplQXN5bmNJbnRlcm5hbDogKHA6IHN0cmluZywgY2I6IEJGU0NhbGxiYWNrPG51bWJlcj4pID0+IHZvaWQ7XG5cdHByaXZhdGUgX3JlcXVlc3RGaWxlU3luY0ludGVybmFsOiBTeW5jRG93bmxvYWRGaWxlTWV0aG9kO1xuXHRwcml2YXRlIF9yZXF1ZXN0RmlsZVNpemVTeW5jSW50ZXJuYWw6IChwOiBzdHJpbmcpID0+IG51bWJlcjtcblxuXHRwcml2YXRlIGNvbnN0cnVjdG9yKGluZGV4OiBvYmplY3QsIHByZWZpeFVybDogc3RyaW5nID0gJycsIHByZWZlclhIUjogYm9vbGVhbiA9IGZhbHNlKSB7XG5cdFx0c3VwZXIoKTtcblx0XHQvLyBwcmVmaXhfdXJsIG11c3QgZW5kIGluIGEgZGlyZWN0b3J5IHNlcGFyYXRvci5cblx0XHRpZiAocHJlZml4VXJsLmxlbmd0aCA+IDAgJiYgcHJlZml4VXJsLmNoYXJBdChwcmVmaXhVcmwubGVuZ3RoIC0gMSkgIT09ICcvJykge1xuXHRcdFx0cHJlZml4VXJsID0gcHJlZml4VXJsICsgJy8nO1xuXHRcdH1cblx0XHR0aGlzLnByZWZpeFVybCA9IHByZWZpeFVybDtcblx0XHR0aGlzLl9pbmRleCA9IEZpbGVJbmRleC5mcm9tTGlzdGluZyhpbmRleCk7XG5cblx0XHRpZiAoZmV0Y2hJc0F2YWlsYWJsZSAmJiAoIXByZWZlclhIUiB8fCAheGhySXNBdmFpbGFibGUpKSB7XG5cdFx0XHR0aGlzLl9yZXF1ZXN0RmlsZUFzeW5jSW50ZXJuYWwgPSBmZXRjaEZpbGVBc3luYztcblx0XHRcdHRoaXMuX3JlcXVlc3RGaWxlU2l6ZUFzeW5jSW50ZXJuYWwgPSBmZXRjaEZpbGVTaXplQXN5bmM7XG5cdFx0fSBlbHNlIHtcblx0XHRcdHRoaXMuX3JlcXVlc3RGaWxlQXN5bmNJbnRlcm5hbCA9IGFzeW5jRG93bmxvYWRGaWxlO1xuXHRcdFx0dGhpcy5fcmVxdWVzdEZpbGVTaXplQXN5bmNJbnRlcm5hbCA9IGdldEZpbGVTaXplQXN5bmM7XG5cdFx0fVxuXG5cdFx0aWYgKHhocklzQXZhaWxhYmxlKSB7XG5cdFx0XHR0aGlzLl9yZXF1ZXN0RmlsZVN5bmNJbnRlcm5hbCA9IHN5bmNEb3dubG9hZEZpbGU7XG5cdFx0XHR0aGlzLl9yZXF1ZXN0RmlsZVNpemVTeW5jSW50ZXJuYWwgPSBnZXRGaWxlU2l6ZVN5bmM7XG5cdFx0fSBlbHNlIHtcblx0XHRcdHRoaXMuX3JlcXVlc3RGaWxlU3luY0ludGVybmFsID0gc3luY05vdEF2YWlsYWJsZUVycm9yO1xuXHRcdFx0dGhpcy5fcmVxdWVzdEZpbGVTaXplU3luY0ludGVybmFsID0gc3luY05vdEF2YWlsYWJsZUVycm9yO1xuXHRcdH1cblx0fVxuXG5cdHB1YmxpYyBlbXB0eSgpOiB2b2lkIHtcblx0XHR0aGlzLl9pbmRleC5maWxlSXRlcmF0b3IoZnVuY3Rpb24gKGZpbGU6IFN0YXRzKSB7XG5cdFx0XHRmaWxlLmZpbGVEYXRhID0gbnVsbDtcblx0XHR9KTtcblx0fVxuXG5cdHB1YmxpYyBnZXROYW1lKCk6IHN0cmluZyB7XG5cdFx0cmV0dXJuIEhUVFBSZXF1ZXN0Lk5hbWU7XG5cdH1cblxuXHRwdWJsaWMgZGlza1NwYWNlKHBhdGg6IHN0cmluZywgY2I6ICh0b3RhbDogbnVtYmVyLCBmcmVlOiBudW1iZXIpID0+IHZvaWQpOiB2b2lkIHtcblx0XHQvLyBSZWFkLW9ubHkgZmlsZSBzeXN0ZW0uIFdlIGNvdWxkIGNhbGN1bGF0ZSB0aGUgdG90YWwgc3BhY2UsIGJ1dCB0aGF0J3Mgbm90XG5cdFx0Ly8gaW1wb3J0YW50IHJpZ2h0IG5vdy5cblx0XHRjYigwLCAwKTtcblx0fVxuXG5cdHB1YmxpYyBpc1JlYWRPbmx5KCk6IGJvb2xlYW4ge1xuXHRcdHJldHVybiB0cnVlO1xuXHR9XG5cblx0cHVibGljIHN1cHBvcnRzTGlua3MoKTogYm9vbGVhbiB7XG5cdFx0cmV0dXJuIGZhbHNlO1xuXHR9XG5cblx0cHVibGljIHN1cHBvcnRzUHJvcHMoKTogYm9vbGVhbiB7XG5cdFx0cmV0dXJuIGZhbHNlO1xuXHR9XG5cblx0cHVibGljIHN1cHBvcnRzU3luY2goKTogYm9vbGVhbiB7XG5cdFx0Ly8gU3luY2hyb25vdXMgb3BlcmF0aW9ucyBhcmUgb25seSBhdmFpbGFibGUgdmlhIHRoZSBYSFIgaW50ZXJmYWNlIGZvciBub3cuXG5cdFx0cmV0dXJuIHhocklzQXZhaWxhYmxlO1xuXHR9XG5cblx0LyoqXG5cdCAqIFNwZWNpYWwgSFRUUEZTIGZ1bmN0aW9uOiBQcmVsb2FkIHRoZSBnaXZlbiBmaWxlIGludG8gdGhlIGluZGV4LlxuXHQgKiBAcGFyYW0gW1N0cmluZ10gcGF0aFxuXHQgKiBAcGFyYW0gW0Jyb3dzZXJGUy5CdWZmZXJdIGJ1ZmZlclxuXHQgKi9cblx0cHVibGljIHByZWxvYWRGaWxlKHBhdGg6IHN0cmluZywgYnVmZmVyOiBCdWZmZXIpOiB2b2lkIHtcblx0XHRjb25zdCBpbm9kZSA9IHRoaXMuX2luZGV4LmdldElub2RlKHBhdGgpO1xuXHRcdGlmIChpc0ZpbGVJbm9kZTxTdGF0cz4oaW5vZGUpKSB7XG5cdFx0XHRpZiAoaW5vZGUgPT09IG51bGwpIHtcblx0XHRcdFx0dGhyb3cgQXBpRXJyb3IuRU5PRU5UKHBhdGgpO1xuXHRcdFx0fVxuXHRcdFx0Y29uc3Qgc3RhdHMgPSBpbm9kZS5nZXREYXRhKCk7XG5cdFx0XHRzdGF0cy5zaXplID0gYnVmZmVyLmxlbmd0aDtcblx0XHRcdHN0YXRzLmZpbGVEYXRhID0gYnVmZmVyO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHR0aHJvdyBBcGlFcnJvci5FSVNESVIocGF0aCk7XG5cdFx0fVxuXHR9XG5cblx0cHVibGljIHN0YXQocGF0aDogc3RyaW5nLCBpc0xzdGF0OiBib29sZWFuLCBjcmVkOiBDcmVkLCBjYjogQkZTQ2FsbGJhY2s8U3RhdHM+KTogdm9pZCB7XG5cdFx0Y29uc3QgaW5vZGUgPSB0aGlzLl9pbmRleC5nZXRJbm9kZShwYXRoKTtcblx0XHRpZiAoaW5vZGUgPT09IG51bGwpIHtcblx0XHRcdHJldHVybiBjYihBcGlFcnJvci5FTk9FTlQocGF0aCkpO1xuXHRcdH1cblx0XHRsZXQgc3RhdHM6IFN0YXRzO1xuXHRcdGlmICghaW5vZGUhLnRvU3RhdHMoKS5oYXNBY2Nlc3MoRmlsZVBlcm0uUkVBRCwgY3JlZCkpIHtcblx0XHRcdHJldHVybiBjYihBcGlFcnJvci5FQUNDRVMocGF0aCkpO1xuXHRcdH1cblx0XHRpZiAoaXNGaWxlSW5vZGU8U3RhdHM+KGlub2RlKSkge1xuXHRcdFx0c3RhdHMgPSBpbm9kZS5nZXREYXRhKCk7XG5cdFx0XHQvLyBBdCB0aGlzIHBvaW50LCBhIG5vbi1vcGVuZWQgZmlsZSB3aWxsIHN0aWxsIGhhdmUgZGVmYXVsdCBzdGF0cyBmcm9tIHRoZSBsaXN0aW5nLlxuXHRcdFx0aWYgKHN0YXRzLnNpemUgPCAwKSB7XG5cdFx0XHRcdHRoaXMuX3JlcXVlc3RGaWxlU2l6ZUFzeW5jKHBhdGgsIGZ1bmN0aW9uIChlOiBBcGlFcnJvciwgc2l6ZT86IG51bWJlcikge1xuXHRcdFx0XHRcdGlmIChlKSB7XG5cdFx0XHRcdFx0XHRyZXR1cm4gY2IoZSk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdHN0YXRzLnNpemUgPSBzaXplITtcblx0XHRcdFx0XHRjYihudWxsLCBTdGF0cy5jbG9uZShzdGF0cykpO1xuXHRcdFx0XHR9KTtcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdGNiKG51bGwsIFN0YXRzLmNsb25lKHN0YXRzKSk7XG5cdFx0XHR9XG5cdFx0fSBlbHNlIGlmIChpc0Rpcklub2RlKGlub2RlKSkge1xuXHRcdFx0c3RhdHMgPSBpbm9kZS5nZXRTdGF0cygpO1xuXHRcdFx0Y2IobnVsbCwgc3RhdHMpO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHRjYihBcGlFcnJvci5GaWxlRXJyb3IoRXJyb3JDb2RlLkVJTlZBTCwgcGF0aCkpO1xuXHRcdH1cblx0fVxuXG5cdHB1YmxpYyBzdGF0U3luYyhwYXRoOiBzdHJpbmcsIGlzTHN0YXQ6IGJvb2xlYW4sIGNyZWQ6IENyZWQpOiBTdGF0cyB7XG5cdFx0Y29uc3QgaW5vZGUgPSB0aGlzLl9pbmRleC5nZXRJbm9kZShwYXRoKTtcblx0XHRpZiAoaW5vZGUgPT09IG51bGwpIHtcblx0XHRcdHRocm93IEFwaUVycm9yLkVOT0VOVChwYXRoKTtcblx0XHR9XG5cdFx0aWYgKCFpbm9kZS50b1N0YXRzKCkuaGFzQWNjZXNzKEZpbGVQZXJtLlJFQUQsIGNyZWQpKSB7XG5cdFx0XHR0aHJvdyBBcGlFcnJvci5FQUNDRVMocGF0aCk7XG5cdFx0fVxuXHRcdGxldCBzdGF0czogU3RhdHM7XG5cdFx0aWYgKGlzRmlsZUlub2RlPFN0YXRzPihpbm9kZSkpIHtcblx0XHRcdHN0YXRzID0gaW5vZGUuZ2V0RGF0YSgpO1xuXHRcdFx0Ly8gQXQgdGhpcyBwb2ludCwgYSBub24tb3BlbmVkIGZpbGUgd2lsbCBzdGlsbCBoYXZlIGRlZmF1bHQgc3RhdHMgZnJvbSB0aGUgbGlzdGluZy5cblx0XHRcdGlmIChzdGF0cy5zaXplIDwgMCkge1xuXHRcdFx0XHRzdGF0cy5zaXplID0gdGhpcy5fcmVxdWVzdEZpbGVTaXplU3luYyhwYXRoKTtcblx0XHRcdH1cblx0XHR9IGVsc2UgaWYgKGlzRGlySW5vZGUoaW5vZGUpKSB7XG5cdFx0XHRzdGF0cyA9IGlub2RlLmdldFN0YXRzKCk7XG5cdFx0fSBlbHNlIHtcblx0XHRcdHRocm93IEFwaUVycm9yLkZpbGVFcnJvcihFcnJvckNvZGUuRUlOVkFMLCBwYXRoKTtcblx0XHR9XG5cdFx0cmV0dXJuIHN0YXRzO1xuXHR9XG5cblx0cHVibGljIG9wZW4ocGF0aDogc3RyaW5nLCBmbGFnczogRmlsZUZsYWcsIG1vZGU6IG51bWJlciwgY3JlZDogQ3JlZCwgY2I6IEJGU0NhbGxiYWNrPEZpbGU+KTogdm9pZCB7XG5cdFx0Ly8gSU5WQVJJQU5UOiBZb3UgY2FuJ3Qgd3JpdGUgdG8gZmlsZXMgb24gdGhpcyBmaWxlIHN5c3RlbS5cblx0XHRpZiAoZmxhZ3MuaXNXcml0ZWFibGUoKSkge1xuXHRcdFx0cmV0dXJuIGNiKG5ldyBBcGlFcnJvcihFcnJvckNvZGUuRVBFUk0sIHBhdGgpKTtcblx0XHR9XG5cdFx0Y29uc3Qgc2VsZiA9IHRoaXM7XG5cdFx0Ly8gQ2hlY2sgaWYgdGhlIHBhdGggZXhpc3RzLCBhbmQgaXMgYSBmaWxlLlxuXHRcdGNvbnN0IGlub2RlID0gdGhpcy5faW5kZXguZ2V0SW5vZGUocGF0aCk7XG5cdFx0aWYgKGlub2RlID09PSBudWxsKSB7XG5cdFx0XHRyZXR1cm4gY2IoQXBpRXJyb3IuRU5PRU5UKHBhdGgpKTtcblx0XHR9XG5cdFx0aWYgKCFpbm9kZS50b1N0YXRzKCkuaGFzQWNjZXNzKGZsYWdzLmdldE1vZGUoKSwgY3JlZCkpIHtcblx0XHRcdHJldHVybiBjYihBcGlFcnJvci5FQUNDRVMocGF0aCkpO1xuXHRcdH1cblx0XHRpZiAoaXNGaWxlSW5vZGU8U3RhdHM+KGlub2RlKSB8fCBpc0Rpcklub2RlPFN0YXRzPihpbm9kZSkpIHtcblx0XHRcdHN3aXRjaCAoZmxhZ3MucGF0aEV4aXN0c0FjdGlvbigpKSB7XG5cdFx0XHRcdGNhc2UgQWN0aW9uVHlwZS5USFJPV19FWENFUFRJT046XG5cdFx0XHRcdGNhc2UgQWN0aW9uVHlwZS5UUlVOQ0FURV9GSUxFOlxuXHRcdFx0XHRcdHJldHVybiBjYihBcGlFcnJvci5FRVhJU1QocGF0aCkpO1xuXHRcdFx0XHRjYXNlIEFjdGlvblR5cGUuTk9QOlxuXHRcdFx0XHRcdGlmIChpc0Rpcklub2RlPFN0YXRzPihpbm9kZSkpIHtcblx0XHRcdFx0XHRcdGNvbnN0IHN0YXRzID0gaW5vZGUuZ2V0U3RhdHMoKTtcblx0XHRcdFx0XHRcdHJldHVybiBjYihudWxsLCBuZXcgTm9TeW5jRmlsZShzZWxmLCBwYXRoLCBmbGFncywgc3RhdHMsIHN0YXRzLmZpbGVEYXRhIHx8IHVuZGVmaW5lZCkpO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHRjb25zdCBzdGF0cyA9IGlub2RlLmdldERhdGEoKTtcblx0XHRcdFx0XHQvLyBVc2UgZXhpc3RpbmcgZmlsZSBjb250ZW50cy5cblx0XHRcdFx0XHQvLyBYWFg6IFVoLCB0aGlzIG1haW50YWlucyB0aGUgcHJldmlvdXNseS11c2VkIGZsYWcuXG5cdFx0XHRcdFx0aWYgKHN0YXRzLmZpbGVEYXRhKSB7XG5cdFx0XHRcdFx0XHRyZXR1cm4gY2IobnVsbCwgbmV3IE5vU3luY0ZpbGUoc2VsZiwgcGF0aCwgZmxhZ3MsIFN0YXRzLmNsb25lKHN0YXRzKSwgc3RhdHMuZmlsZURhdGEpKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0Ly8gQHRvZG8gYmUgbGF6aWVyIGFib3V0IGFjdHVhbGx5IHJlcXVlc3RpbmcgdGhlIGZpbGVcblx0XHRcdFx0XHR0aGlzLl9yZXF1ZXN0RmlsZUFzeW5jKHBhdGgsICdidWZmZXInLCBmdW5jdGlvbiAoZXJyOiBBcGlFcnJvciwgYnVmZmVyPzogQnVmZmVyKSB7XG5cdFx0XHRcdFx0XHRpZiAoZXJyKSB7XG5cdFx0XHRcdFx0XHRcdHJldHVybiBjYihlcnIpO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0Ly8gd2UgZG9uJ3QgaW5pdGlhbGx5IGhhdmUgZmlsZSBzaXplc1xuXHRcdFx0XHRcdFx0c3RhdHMuc2l6ZSA9IGJ1ZmZlciEubGVuZ3RoO1xuXHRcdFx0XHRcdFx0c3RhdHMuZmlsZURhdGEgPSBidWZmZXIhO1xuXHRcdFx0XHRcdFx0cmV0dXJuIGNiKG51bGwsIG5ldyBOb1N5bmNGaWxlKHNlbGYsIHBhdGgsIGZsYWdzLCBTdGF0cy5jbG9uZShzdGF0cyksIGJ1ZmZlcikpO1xuXHRcdFx0XHRcdH0pO1xuXHRcdFx0XHRcdGJyZWFrO1xuXHRcdFx0XHRkZWZhdWx0OlxuXHRcdFx0XHRcdHJldHVybiBjYihuZXcgQXBpRXJyb3IoRXJyb3JDb2RlLkVJTlZBTCwgJ0ludmFsaWQgRmlsZU1vZGUgb2JqZWN0LicpKTtcblx0XHRcdH1cblx0XHR9IGVsc2Uge1xuXHRcdFx0cmV0dXJuIGNiKEFwaUVycm9yLkVQRVJNKHBhdGgpKTtcblx0XHR9XG5cdH1cblxuXHRwdWJsaWMgb3BlblN5bmMocGF0aDogc3RyaW5nLCBmbGFnczogRmlsZUZsYWcsIG1vZGU6IG51bWJlciwgY3JlZDogQ3JlZCk6IEZpbGUge1xuXHRcdC8vIElOVkFSSUFOVDogWW91IGNhbid0IHdyaXRlIHRvIGZpbGVzIG9uIHRoaXMgZmlsZSBzeXN0ZW0uXG5cdFx0aWYgKGZsYWdzLmlzV3JpdGVhYmxlKCkpIHtcblx0XHRcdHRocm93IG5ldyBBcGlFcnJvcihFcnJvckNvZGUuRVBFUk0sIHBhdGgpO1xuXHRcdH1cblx0XHQvLyBDaGVjayBpZiB0aGUgcGF0aCBleGlzdHMsIGFuZCBpcyBhIGZpbGUuXG5cdFx0Y29uc3QgaW5vZGUgPSB0aGlzLl9pbmRleC5nZXRJbm9kZShwYXRoKTtcblx0XHRpZiAoaW5vZGUgPT09IG51bGwpIHtcblx0XHRcdHRocm93IEFwaUVycm9yLkVOT0VOVChwYXRoKTtcblx0XHR9XG5cdFx0aWYgKCFpbm9kZS50b1N0YXRzKCkuaGFzQWNjZXNzKGZsYWdzLmdldE1vZGUoKSwgY3JlZCkpIHtcblx0XHRcdHRocm93IEFwaUVycm9yLkVBQ0NFUyhwYXRoKTtcblx0XHR9XG5cdFx0aWYgKGlzRmlsZUlub2RlPFN0YXRzPihpbm9kZSkgfHwgaXNEaXJJbm9kZTxTdGF0cz4oaW5vZGUpKSB7XG5cdFx0XHRzd2l0Y2ggKGZsYWdzLnBhdGhFeGlzdHNBY3Rpb24oKSkge1xuXHRcdFx0XHRjYXNlIEFjdGlvblR5cGUuVEhST1dfRVhDRVBUSU9OOlxuXHRcdFx0XHRjYXNlIEFjdGlvblR5cGUuVFJVTkNBVEVfRklMRTpcblx0XHRcdFx0XHR0aHJvdyBBcGlFcnJvci5FRVhJU1QocGF0aCk7XG5cdFx0XHRcdGNhc2UgQWN0aW9uVHlwZS5OT1A6XG5cdFx0XHRcdFx0aWYgKGlzRGlySW5vZGU8U3RhdHM+KGlub2RlKSkge1xuXHRcdFx0XHRcdFx0Y29uc3Qgc3RhdHMgPSBpbm9kZS5nZXRTdGF0cygpO1xuXHRcdFx0XHRcdFx0cmV0dXJuIG5ldyBOb1N5bmNGaWxlKHRoaXMsIHBhdGgsIGZsYWdzLCBzdGF0cywgc3RhdHMuZmlsZURhdGEgfHwgdW5kZWZpbmVkKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0Y29uc3Qgc3RhdHMgPSBpbm9kZS5nZXREYXRhKCk7XG5cdFx0XHRcdFx0Ly8gVXNlIGV4aXN0aW5nIGZpbGUgY29udGVudHMuXG5cdFx0XHRcdFx0Ly8gWFhYOiBVaCwgdGhpcyBtYWludGFpbnMgdGhlIHByZXZpb3VzbHktdXNlZCBmbGFnLlxuXHRcdFx0XHRcdGlmIChzdGF0cy5maWxlRGF0YSkge1xuXHRcdFx0XHRcdFx0cmV0dXJuIG5ldyBOb1N5bmNGaWxlKHRoaXMsIHBhdGgsIGZsYWdzLCBTdGF0cy5jbG9uZShzdGF0cyksIHN0YXRzLmZpbGVEYXRhKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0Ly8gQHRvZG8gYmUgbGF6aWVyIGFib3V0IGFjdHVhbGx5IHJlcXVlc3RpbmcgdGhlIGZpbGVcblx0XHRcdFx0XHRjb25zdCBidWZmZXIgPSB0aGlzLl9yZXF1ZXN0RmlsZVN5bmMocGF0aCwgJ2J1ZmZlcicpO1xuXHRcdFx0XHRcdC8vIHdlIGRvbid0IGluaXRpYWxseSBoYXZlIGZpbGUgc2l6ZXNcblx0XHRcdFx0XHRzdGF0cy5zaXplID0gYnVmZmVyLmxlbmd0aDtcblx0XHRcdFx0XHRzdGF0cy5maWxlRGF0YSA9IGJ1ZmZlcjtcblx0XHRcdFx0XHRyZXR1cm4gbmV3IE5vU3luY0ZpbGUodGhpcywgcGF0aCwgZmxhZ3MsIFN0YXRzLmNsb25lKHN0YXRzKSwgYnVmZmVyKTtcblx0XHRcdFx0ZGVmYXVsdDpcblx0XHRcdFx0XHR0aHJvdyBuZXcgQXBpRXJyb3IoRXJyb3JDb2RlLkVJTlZBTCwgJ0ludmFsaWQgRmlsZU1vZGUgb2JqZWN0LicpO1xuXHRcdFx0fVxuXHRcdH0gZWxzZSB7XG5cdFx0XHR0aHJvdyBBcGlFcnJvci5FUEVSTShwYXRoKTtcblx0XHR9XG5cdH1cblxuXHRwdWJsaWMgcmVhZGRpcihwYXRoOiBzdHJpbmcsIGNyZWQ6IENyZWQsIGNiOiBCRlNDYWxsYmFjazxzdHJpbmdbXT4pOiB2b2lkIHtcblx0XHR0cnkge1xuXHRcdFx0Y2IobnVsbCwgdGhpcy5yZWFkZGlyU3luYyhwYXRoLCBjcmVkKSk7XG5cdFx0fSBjYXRjaCAoZSkge1xuXHRcdFx0Y2IoZSk7XG5cdFx0fVxuXHR9XG5cblx0cHVibGljIHJlYWRkaXJTeW5jKHBhdGg6IHN0cmluZywgY3JlZDogQ3JlZCk6IHN0cmluZ1tdIHtcblx0XHQvLyBDaGVjayBpZiBpdCBleGlzdHMuXG5cdFx0Y29uc3QgaW5vZGUgPSB0aGlzLl9pbmRleC5nZXRJbm9kZShwYXRoKTtcblx0XHRpZiAoaW5vZGUgPT09IG51bGwpIHtcblx0XHRcdHRocm93IEFwaUVycm9yLkVOT0VOVChwYXRoKTtcblx0XHR9IGVsc2UgaWYgKCFpbm9kZS50b1N0YXRzKCkuaGFzQWNjZXNzKEZpbGVQZXJtLlJFQUQsIGNyZWQpKSB7XG5cdFx0XHR0aHJvdyBBcGlFcnJvci5FQUNDRVMocGF0aCk7XG5cdFx0fSBlbHNlIGlmIChpc0Rpcklub2RlKGlub2RlKSkge1xuXHRcdFx0cmV0dXJuIGlub2RlLmdldExpc3RpbmcoKTtcblx0XHR9IGVsc2Uge1xuXHRcdFx0dGhyb3cgQXBpRXJyb3IuRU5PVERJUihwYXRoKTtcblx0XHR9XG5cdH1cblxuXHQvKipcblx0ICogV2UgaGF2ZSB0aGUgZW50aXJlIGZpbGUgYXMgYSBidWZmZXI7IG9wdGltaXplIHJlYWRGaWxlLlxuXHQgKi9cblx0cHVibGljIHJlYWRGaWxlKGZuYW1lOiBzdHJpbmcsIGVuY29kaW5nOiBCdWZmZXJFbmNvZGluZywgZmxhZzogRmlsZUZsYWcsIGNyZWQ6IENyZWQsIGNiOiBCRlNDYWxsYmFjazxzdHJpbmcgfCBCdWZmZXI+KTogdm9pZCB7XG5cdFx0Ly8gV3JhcCBjYiBpbiBmaWxlIGNsb3NpbmcgY29kZS5cblx0XHRjb25zdCBvbGRDYiA9IGNiO1xuXHRcdC8vIEdldCBmaWxlLlxuXHRcdHRoaXMub3BlbihmbmFtZSwgZmxhZywgMHgxYTQsIGNyZWQsIGZ1bmN0aW9uIChlcnI6IEFwaUVycm9yLCBmZD86IEZpbGUpIHtcblx0XHRcdGlmIChlcnIpIHtcblx0XHRcdFx0cmV0dXJuIGNiKGVycik7XG5cdFx0XHR9XG5cdFx0XHRjYiA9IGZ1bmN0aW9uIChlcnI6IEFwaUVycm9yLCBhcmc/OiBCdWZmZXIpIHtcblx0XHRcdFx0ZmQhLmNsb3NlKGZ1bmN0aW9uIChlcnIyOiBhbnkpIHtcblx0XHRcdFx0XHRpZiAoIWVycikge1xuXHRcdFx0XHRcdFx0ZXJyID0gZXJyMjtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0cmV0dXJuIG9sZENiKGVyciwgYXJnKTtcblx0XHRcdFx0fSk7XG5cdFx0XHR9O1xuXHRcdFx0Y29uc3QgZmRDYXN0ID0gPE5vU3luY0ZpbGU8SFRUUFJlcXVlc3Q+PmZkO1xuXHRcdFx0Y29uc3QgZmRCdWZmID0gPEJ1ZmZlcj5mZENhc3QuZ2V0QnVmZmVyKCk7XG5cdFx0XHRpZiAoZW5jb2RpbmcgPT09IG51bGwpIHtcblx0XHRcdFx0Y2IoZXJyLCBjb3B5aW5nU2xpY2UoZmRCdWZmKSk7XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHR0cnlUb1N0cmluZyhmZEJ1ZmYsIGVuY29kaW5nLCBjYik7XG5cdFx0XHR9XG5cdFx0fSk7XG5cdH1cblxuXHQvKipcblx0ICogU3BlY2lhbGx5LW9wdGltaXplZCByZWFkZmlsZS5cblx0ICovXG5cdHB1YmxpYyByZWFkRmlsZVN5bmMoZm5hbWU6IHN0cmluZywgZW5jb2Rpbmc6IEJ1ZmZlckVuY29kaW5nLCBmbGFnOiBGaWxlRmxhZywgY3JlZDogQ3JlZCk6IGFueSB7XG5cdFx0Ly8gR2V0IGZpbGUuXG5cdFx0Y29uc3QgZmQgPSB0aGlzLm9wZW5TeW5jKGZuYW1lLCBmbGFnLCAweDFhNCwgY3JlZCk7XG5cdFx0dHJ5IHtcblx0XHRcdGNvbnN0IGZkQ2FzdCA9IDxOb1N5bmNGaWxlPEhUVFBSZXF1ZXN0Pj5mZDtcblx0XHRcdGNvbnN0IGZkQnVmZiA9IDxCdWZmZXI+ZmRDYXN0LmdldEJ1ZmZlcigpO1xuXHRcdFx0aWYgKGVuY29kaW5nID09PSBudWxsKSB7XG5cdFx0XHRcdHJldHVybiBjb3B5aW5nU2xpY2UoZmRCdWZmKTtcblx0XHRcdH1cblx0XHRcdHJldHVybiBmZEJ1ZmYudG9TdHJpbmcoZW5jb2RpbmcpO1xuXHRcdH0gZmluYWxseSB7XG5cdFx0XHRmZC5jbG9zZVN5bmMoKTtcblx0XHR9XG5cdH1cblxuXHRwcml2YXRlIF9nZXRIVFRQUGF0aChmaWxlUGF0aDogc3RyaW5nKTogc3RyaW5nIHtcblx0XHRpZiAoZmlsZVBhdGguY2hhckF0KDApID09PSAnLycpIHtcblx0XHRcdGZpbGVQYXRoID0gZmlsZVBhdGguc2xpY2UoMSk7XG5cdFx0fVxuXHRcdHJldHVybiB0aGlzLnByZWZpeFVybCArIGZpbGVQYXRoO1xuXHR9XG5cblx0LyoqXG5cdCAqIEFzeW5jaHJvbm91c2x5IGRvd25sb2FkIHRoZSBnaXZlbiBmaWxlLlxuXHQgKi9cblx0cHJpdmF0ZSBfcmVxdWVzdEZpbGVBc3luYyhwOiBzdHJpbmcsIHR5cGU6ICdidWZmZXInLCBjYjogQkZTQ2FsbGJhY2s8QnVmZmVyPik6IHZvaWQ7XG5cdHByaXZhdGUgX3JlcXVlc3RGaWxlQXN5bmMocDogc3RyaW5nLCB0eXBlOiAnanNvbicsIGNiOiBCRlNDYWxsYmFjazxhbnk+KTogdm9pZDtcblx0cHJpdmF0ZSBfcmVxdWVzdEZpbGVBc3luYyhwOiBzdHJpbmcsIHR5cGU6IHN0cmluZywgY2I6IEJGU0NhbGxiYWNrPGFueT4pOiB2b2lkO1xuXHRwcml2YXRlIF9yZXF1ZXN0RmlsZUFzeW5jKHA6IHN0cmluZywgdHlwZTogc3RyaW5nLCBjYjogQkZTQ2FsbGJhY2s8YW55Pik6IHZvaWQge1xuXHRcdHRoaXMuX3JlcXVlc3RGaWxlQXN5bmNJbnRlcm5hbCh0aGlzLl9nZXRIVFRQUGF0aChwKSwgdHlwZSwgY2IpO1xuXHR9XG5cblx0LyoqXG5cdCAqIFN5bmNocm9ub3VzbHkgZG93bmxvYWQgdGhlIGdpdmVuIGZpbGUuXG5cdCAqL1xuXHRwcml2YXRlIF9yZXF1ZXN0RmlsZVN5bmMocDogc3RyaW5nLCB0eXBlOiAnYnVmZmVyJyk6IEJ1ZmZlcjtcblx0cHJpdmF0ZSBfcmVxdWVzdEZpbGVTeW5jKHA6IHN0cmluZywgdHlwZTogJ2pzb24nKTogYW55O1xuXHRwcml2YXRlIF9yZXF1ZXN0RmlsZVN5bmMocDogc3RyaW5nLCB0eXBlOiBzdHJpbmcpOiBhbnk7XG5cdHByaXZhdGUgX3JlcXVlc3RGaWxlU3luYyhwOiBzdHJpbmcsIHR5cGU6IHN0cmluZyk6IGFueSB7XG5cdFx0cmV0dXJuIHRoaXMuX3JlcXVlc3RGaWxlU3luY0ludGVybmFsKHRoaXMuX2dldEhUVFBQYXRoKHApLCB0eXBlKTtcblx0fVxuXG5cdC8qKlxuXHQgKiBPbmx5IHJlcXVlc3RzIHRoZSBIRUFEIGNvbnRlbnQsIGZvciB0aGUgZmlsZSBzaXplLlxuXHQgKi9cblx0cHJpdmF0ZSBfcmVxdWVzdEZpbGVTaXplQXN5bmMocGF0aDogc3RyaW5nLCBjYjogQkZTQ2FsbGJhY2s8bnVtYmVyPik6IHZvaWQge1xuXHRcdHRoaXMuX3JlcXVlc3RGaWxlU2l6ZUFzeW5jSW50ZXJuYWwodGhpcy5fZ2V0SFRUUFBhdGgocGF0aCksIGNiKTtcblx0fVxuXG5cdHByaXZhdGUgX3JlcXVlc3RGaWxlU2l6ZVN5bmMocGF0aDogc3RyaW5nKTogbnVtYmVyIHtcblx0XHRyZXR1cm4gdGhpcy5fcmVxdWVzdEZpbGVTaXplU3luY0ludGVybmFsKHRoaXMuX2dldEhUVFBQYXRoKHBhdGgpKTtcblx0fVxufVxuIiwgImltcG9ydCB0eXBlIHsgQnVmZmVyIH0gZnJvbSAnYnVmZmVyJztcbi8qKlxuICogKE5vbnN0YW5kYXJkKSBTdHJpbmcgdXRpbGl0eSBmdW5jdGlvbiBmb3IgOC1iaXQgQVNDSUkgd2l0aCB0aGUgZXh0ZW5kZWRcbiAqIGNoYXJhY3RlciBzZXQuIFVubGlrZSB0aGUgQVNDSUkgYWJvdmUsIHdlIGRvIG5vdCBtYXNrIHRoZSBoaWdoIGJpdHMuXG4gKlxuICogUGxhY2VkIGludG8gYSBzZXBhcmF0ZSBmaWxlIHNvIGl0IGNhbiBiZSB1c2VkIHdpdGggb3RoZXIgQnVmZmVyIGltcGxlbWVudGF0aW9ucy5cbiAqIEBzZWUgaHR0cDovL2VuLndpa2lwZWRpYS5vcmcvd2lraS9FeHRlbmRlZF9BU0NJSVxuICovXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBFeHRlbmRlZEFTQ0lJIHtcblx0cHJpdmF0ZSBzdGF0aWMgZXh0ZW5kZWRDaGFycyA9IFtcblx0XHQnXFx1MDBDNycsXG5cdFx0J1xcdTAwRkMnLFxuXHRcdCdcXHUwMEU5Jyxcblx0XHQnXFx1MDBFMicsXG5cdFx0J1xcdTAwRTQnLFxuXHRcdCdcXHUwMEUwJyxcblx0XHQnXFx1MDBFNScsXG5cdFx0J1xcdTAwRTcnLFxuXHRcdCdcXHUwMEVBJyxcblx0XHQnXFx1MDBFQicsXG5cdFx0J1xcdTAwRTgnLFxuXHRcdCdcXHUwMEVGJyxcblx0XHQnXFx1MDBFRScsXG5cdFx0J1xcdTAwRUMnLFxuXHRcdCdcXHUwMEM0Jyxcblx0XHQnXFx1MDBDNScsXG5cdFx0J1xcdTAwQzknLFxuXHRcdCdcXHUwMEU2Jyxcblx0XHQnXFx1MDBDNicsXG5cdFx0J1xcdTAwRjQnLFxuXHRcdCdcXHUwMEY2Jyxcblx0XHQnXFx1MDBGMicsXG5cdFx0J1xcdTAwRkInLFxuXHRcdCdcXHUwMEY5Jyxcblx0XHQnXFx1MDBGRicsXG5cdFx0J1xcdTAwRDYnLFxuXHRcdCdcXHUwMERDJyxcblx0XHQnXFx1MDBGOCcsXG5cdFx0J1xcdTAwQTMnLFxuXHRcdCdcXHUwMEQ4Jyxcblx0XHQnXFx1MDBENycsXG5cdFx0J1xcdTAxOTInLFxuXHRcdCdcXHUwMEUxJyxcblx0XHQnXFx1MDBFRCcsXG5cdFx0J1xcdTAwRjMnLFxuXHRcdCdcXHUwMEZBJyxcblx0XHQnXFx1MDBGMScsXG5cdFx0J1xcdTAwRDEnLFxuXHRcdCdcXHUwMEFBJyxcblx0XHQnXFx1MDBCQScsXG5cdFx0J1xcdTAwQkYnLFxuXHRcdCdcXHUwMEFFJyxcblx0XHQnXFx1MDBBQycsXG5cdFx0J1xcdTAwQkQnLFxuXHRcdCdcXHUwMEJDJyxcblx0XHQnXFx1MDBBMScsXG5cdFx0J1xcdTAwQUInLFxuXHRcdCdcXHUwMEJCJyxcblx0XHQnXycsXG5cdFx0J18nLFxuXHRcdCdfJyxcblx0XHQnXFx1MDBBNicsXG5cdFx0J1xcdTAwQTYnLFxuXHRcdCdcXHUwMEMxJyxcblx0XHQnXFx1MDBDMicsXG5cdFx0J1xcdTAwQzAnLFxuXHRcdCdcXHUwMEE5Jyxcblx0XHQnXFx1MDBBNicsXG5cdFx0J1xcdTAwQTYnLFxuXHRcdCcrJyxcblx0XHQnKycsXG5cdFx0J1xcdTAwQTInLFxuXHRcdCdcXHUwMEE1Jyxcblx0XHQnKycsXG5cdFx0JysnLFxuXHRcdCctJyxcblx0XHQnLScsXG5cdFx0JysnLFxuXHRcdCctJyxcblx0XHQnKycsXG5cdFx0J1xcdTAwRTMnLFxuXHRcdCdcXHUwMEMzJyxcblx0XHQnKycsXG5cdFx0JysnLFxuXHRcdCctJyxcblx0XHQnLScsXG5cdFx0J1xcdTAwQTYnLFxuXHRcdCctJyxcblx0XHQnKycsXG5cdFx0J1xcdTAwQTQnLFxuXHRcdCdcXHUwMEYwJyxcblx0XHQnXFx1MDBEMCcsXG5cdFx0J1xcdTAwQ0EnLFxuXHRcdCdcXHUwMENCJyxcblx0XHQnXFx1MDBDOCcsXG5cdFx0J2knLFxuXHRcdCdcXHUwMENEJyxcblx0XHQnXFx1MDBDRScsXG5cdFx0J1xcdTAwQ0YnLFxuXHRcdCcrJyxcblx0XHQnKycsXG5cdFx0J18nLFxuXHRcdCdfJyxcblx0XHQnXFx1MDBBNicsXG5cdFx0J1xcdTAwQ0MnLFxuXHRcdCdfJyxcblx0XHQnXFx1MDBEMycsXG5cdFx0J1xcdTAwREYnLFxuXHRcdCdcXHUwMEQ0Jyxcblx0XHQnXFx1MDBEMicsXG5cdFx0J1xcdTAwRjUnLFxuXHRcdCdcXHUwMEQ1Jyxcblx0XHQnXFx1MDBCNScsXG5cdFx0J1xcdTAwRkUnLFxuXHRcdCdcXHUwMERFJyxcblx0XHQnXFx1MDBEQScsXG5cdFx0J1xcdTAwREInLFxuXHRcdCdcXHUwMEQ5Jyxcblx0XHQnXFx1MDBGRCcsXG5cdFx0J1xcdTAwREQnLFxuXHRcdCdcXHUwMEFGJyxcblx0XHQnXFx1MDBCNCcsXG5cdFx0J1xcdTAwQUQnLFxuXHRcdCdcXHUwMEIxJyxcblx0XHQnXycsXG5cdFx0J1xcdTAwQkUnLFxuXHRcdCdcXHUwMEI2Jyxcblx0XHQnXFx1MDBBNycsXG5cdFx0J1xcdTAwRjcnLFxuXHRcdCdcXHUwMEI4Jyxcblx0XHQnXFx1MDBCMCcsXG5cdFx0J1xcdTAwQTgnLFxuXHRcdCdcXHUwMEI3Jyxcblx0XHQnXFx1MDBCOScsXG5cdFx0J1xcdTAwQjMnLFxuXHRcdCdcXHUwMEIyJyxcblx0XHQnXycsXG5cdFx0JyAnLFxuXHRdO1xuXG5cdHB1YmxpYyBzdGF0aWMgc3RyMmJ5dGUoc3RyOiBzdHJpbmcsIGJ1ZjogQnVmZmVyKTogbnVtYmVyIHtcblx0XHRjb25zdCBsZW5ndGggPSBzdHIubGVuZ3RoID4gYnVmLmxlbmd0aCA/IGJ1Zi5sZW5ndGggOiBzdHIubGVuZ3RoO1xuXHRcdGZvciAobGV0IGkgPSAwOyBpIDwgbGVuZ3RoOyBpKyspIHtcblx0XHRcdGxldCBjaGFyQ29kZSA9IHN0ci5jaGFyQ29kZUF0KGkpO1xuXHRcdFx0aWYgKGNoYXJDb2RlID4gMHg3Zikge1xuXHRcdFx0XHQvLyBDaGVjayBpZiBleHRlbmRlZCBBU0NJSS5cblx0XHRcdFx0Y29uc3QgY2hhcklkeCA9IEV4dGVuZGVkQVNDSUkuZXh0ZW5kZWRDaGFycy5pbmRleE9mKHN0ci5jaGFyQXQoaSkpO1xuXHRcdFx0XHRpZiAoY2hhcklkeCA+IC0xKSB7XG5cdFx0XHRcdFx0Y2hhckNvZGUgPSBjaGFySWR4ICsgMHg4MDtcblx0XHRcdFx0fVxuXHRcdFx0XHQvLyBPdGhlcndpc2UsIGtlZXAgaXQgYXMtaXMuXG5cdFx0XHR9XG5cdFx0XHRidWZbY2hhckNvZGVdID0gaTtcblx0XHR9XG5cdFx0cmV0dXJuIGxlbmd0aDtcblx0fVxuXG5cdHB1YmxpYyBzdGF0aWMgYnl0ZTJzdHIoYnVmZjogQnVmZmVyKTogc3RyaW5nIHtcblx0XHRjb25zdCBjaGFycyA9IG5ldyBBcnJheShidWZmLmxlbmd0aCk7XG5cdFx0Zm9yIChsZXQgaSA9IDA7IGkgPCBidWZmLmxlbmd0aDsgaSsrKSB7XG5cdFx0XHRjb25zdCBjaGFyQ29kZSA9IGJ1ZmZbaV07XG5cdFx0XHRpZiAoY2hhckNvZGUgPiAweDdmKSB7XG5cdFx0XHRcdGNoYXJzW2ldID0gRXh0ZW5kZWRBU0NJSS5leHRlbmRlZENoYXJzW2NoYXJDb2RlIC0gMTI4XTtcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdGNoYXJzW2ldID0gU3RyaW5nLmZyb21DaGFyQ29kZShjaGFyQ29kZSk7XG5cdFx0XHR9XG5cdFx0fVxuXHRcdHJldHVybiBjaGFycy5qb2luKCcnKTtcblx0fVxuXG5cdHB1YmxpYyBzdGF0aWMgYnl0ZUxlbmd0aChzdHI6IHN0cmluZyk6IG51bWJlciB7XG5cdFx0cmV0dXJuIHN0ci5sZW5ndGg7XG5cdH1cbn1cbiIsICIndXNlIHN0cmljdCc7XG5cbnZhciBkb21haW47XG5cbi8vIFRoaXMgY29uc3RydWN0b3IgaXMgdXNlZCB0byBzdG9yZSBldmVudCBoYW5kbGVycy4gSW5zdGFudGlhdGluZyB0aGlzIGlzXG4vLyBmYXN0ZXIgdGhhbiBleHBsaWNpdGx5IGNhbGxpbmcgYE9iamVjdC5jcmVhdGUobnVsbClgIHRvIGdldCBhIFwiY2xlYW5cIiBlbXB0eVxuLy8gb2JqZWN0ICh0ZXN0ZWQgd2l0aCB2OCB2NC45KS5cbmZ1bmN0aW9uIEV2ZW50SGFuZGxlcnMoKSB7fVxuRXZlbnRIYW5kbGVycy5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuXG5mdW5jdGlvbiBFdmVudEVtaXR0ZXIoKSB7XG4gIEV2ZW50RW1pdHRlci5pbml0LmNhbGwodGhpcyk7XG59XG5leHBvcnQgZGVmYXVsdCBFdmVudEVtaXR0ZXI7XG5leHBvcnQge0V2ZW50RW1pdHRlcn07XG5cbi8vIG5vZGVqcyBvZGRpdHlcbi8vIHJlcXVpcmUoJ2V2ZW50cycpID09PSByZXF1aXJlKCdldmVudHMnKS5FdmVudEVtaXR0ZXJcbkV2ZW50RW1pdHRlci5FdmVudEVtaXR0ZXIgPSBFdmVudEVtaXR0ZXJcblxuRXZlbnRFbWl0dGVyLnVzaW5nRG9tYWlucyA9IGZhbHNlO1xuXG5FdmVudEVtaXR0ZXIucHJvdG90eXBlLmRvbWFpbiA9IHVuZGVmaW5lZDtcbkV2ZW50RW1pdHRlci5wcm90b3R5cGUuX2V2ZW50cyA9IHVuZGVmaW5lZDtcbkV2ZW50RW1pdHRlci5wcm90b3R5cGUuX21heExpc3RlbmVycyA9IHVuZGVmaW5lZDtcblxuLy8gQnkgZGVmYXVsdCBFdmVudEVtaXR0ZXJzIHdpbGwgcHJpbnQgYSB3YXJuaW5nIGlmIG1vcmUgdGhhbiAxMCBsaXN0ZW5lcnMgYXJlXG4vLyBhZGRlZCB0byBpdC4gVGhpcyBpcyBhIHVzZWZ1bCBkZWZhdWx0IHdoaWNoIGhlbHBzIGZpbmRpbmcgbWVtb3J5IGxlYWtzLlxuRXZlbnRFbWl0dGVyLmRlZmF1bHRNYXhMaXN0ZW5lcnMgPSAxMDtcblxuRXZlbnRFbWl0dGVyLmluaXQgPSBmdW5jdGlvbigpIHtcbiAgdGhpcy5kb21haW4gPSBudWxsO1xuICBpZiAoRXZlbnRFbWl0dGVyLnVzaW5nRG9tYWlucykge1xuICAgIC8vIGlmIHRoZXJlIGlzIGFuIGFjdGl2ZSBkb21haW4sIHRoZW4gYXR0YWNoIHRvIGl0LlxuICAgIGlmIChkb21haW4uYWN0aXZlICYmICEodGhpcyBpbnN0YW5jZW9mIGRvbWFpbi5Eb21haW4pKSB7XG4gICAgICB0aGlzLmRvbWFpbiA9IGRvbWFpbi5hY3RpdmU7XG4gICAgfVxuICB9XG5cbiAgaWYgKCF0aGlzLl9ldmVudHMgfHwgdGhpcy5fZXZlbnRzID09PSBPYmplY3QuZ2V0UHJvdG90eXBlT2YodGhpcykuX2V2ZW50cykge1xuICAgIHRoaXMuX2V2ZW50cyA9IG5ldyBFdmVudEhhbmRsZXJzKCk7XG4gICAgdGhpcy5fZXZlbnRzQ291bnQgPSAwO1xuICB9XG5cbiAgdGhpcy5fbWF4TGlzdGVuZXJzID0gdGhpcy5fbWF4TGlzdGVuZXJzIHx8IHVuZGVmaW5lZDtcbn07XG5cbi8vIE9idmlvdXNseSBub3QgYWxsIEVtaXR0ZXJzIHNob3VsZCBiZSBsaW1pdGVkIHRvIDEwLiBUaGlzIGZ1bmN0aW9uIGFsbG93c1xuLy8gdGhhdCB0byBiZSBpbmNyZWFzZWQuIFNldCB0byB6ZXJvIGZvciB1bmxpbWl0ZWQuXG5FdmVudEVtaXR0ZXIucHJvdG90eXBlLnNldE1heExpc3RlbmVycyA9IGZ1bmN0aW9uIHNldE1heExpc3RlbmVycyhuKSB7XG4gIGlmICh0eXBlb2YgbiAhPT0gJ251bWJlcicgfHwgbiA8IDAgfHwgaXNOYU4obikpXG4gICAgdGhyb3cgbmV3IFR5cGVFcnJvcignXCJuXCIgYXJndW1lbnQgbXVzdCBiZSBhIHBvc2l0aXZlIG51bWJlcicpO1xuICB0aGlzLl9tYXhMaXN0ZW5lcnMgPSBuO1xuICByZXR1cm4gdGhpcztcbn07XG5cbmZ1bmN0aW9uICRnZXRNYXhMaXN0ZW5lcnModGhhdCkge1xuICBpZiAodGhhdC5fbWF4TGlzdGVuZXJzID09PSB1bmRlZmluZWQpXG4gICAgcmV0dXJuIEV2ZW50RW1pdHRlci5kZWZhdWx0TWF4TGlzdGVuZXJzO1xuICByZXR1cm4gdGhhdC5fbWF4TGlzdGVuZXJzO1xufVxuXG5FdmVudEVtaXR0ZXIucHJvdG90eXBlLmdldE1heExpc3RlbmVycyA9IGZ1bmN0aW9uIGdldE1heExpc3RlbmVycygpIHtcbiAgcmV0dXJuICRnZXRNYXhMaXN0ZW5lcnModGhpcyk7XG59O1xuXG4vLyBUaGVzZSBzdGFuZGFsb25lIGVtaXQqIGZ1bmN0aW9ucyBhcmUgdXNlZCB0byBvcHRpbWl6ZSBjYWxsaW5nIG9mIGV2ZW50XG4vLyBoYW5kbGVycyBmb3IgZmFzdCBjYXNlcyBiZWNhdXNlIGVtaXQoKSBpdHNlbGYgb2Z0ZW4gaGFzIGEgdmFyaWFibGUgbnVtYmVyIG9mXG4vLyBhcmd1bWVudHMgYW5kIGNhbiBiZSBkZW9wdGltaXplZCBiZWNhdXNlIG9mIHRoYXQuIFRoZXNlIGZ1bmN0aW9ucyBhbHdheXMgaGF2ZVxuLy8gdGhlIHNhbWUgbnVtYmVyIG9mIGFyZ3VtZW50cyBhbmQgdGh1cyBkbyBub3QgZ2V0IGRlb3B0aW1pemVkLCBzbyB0aGUgY29kZVxuLy8gaW5zaWRlIHRoZW0gY2FuIGV4ZWN1dGUgZmFzdGVyLlxuZnVuY3Rpb24gZW1pdE5vbmUoaGFuZGxlciwgaXNGbiwgc2VsZikge1xuICBpZiAoaXNGbilcbiAgICBoYW5kbGVyLmNhbGwoc2VsZik7XG4gIGVsc2Uge1xuICAgIHZhciBsZW4gPSBoYW5kbGVyLmxlbmd0aDtcbiAgICB2YXIgbGlzdGVuZXJzID0gYXJyYXlDbG9uZShoYW5kbGVyLCBsZW4pO1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuOyArK2kpXG4gICAgICBsaXN0ZW5lcnNbaV0uY2FsbChzZWxmKTtcbiAgfVxufVxuZnVuY3Rpb24gZW1pdE9uZShoYW5kbGVyLCBpc0ZuLCBzZWxmLCBhcmcxKSB7XG4gIGlmIChpc0ZuKVxuICAgIGhhbmRsZXIuY2FsbChzZWxmLCBhcmcxKTtcbiAgZWxzZSB7XG4gICAgdmFyIGxlbiA9IGhhbmRsZXIubGVuZ3RoO1xuICAgIHZhciBsaXN0ZW5lcnMgPSBhcnJheUNsb25lKGhhbmRsZXIsIGxlbik7XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW47ICsraSlcbiAgICAgIGxpc3RlbmVyc1tpXS5jYWxsKHNlbGYsIGFyZzEpO1xuICB9XG59XG5mdW5jdGlvbiBlbWl0VHdvKGhhbmRsZXIsIGlzRm4sIHNlbGYsIGFyZzEsIGFyZzIpIHtcbiAgaWYgKGlzRm4pXG4gICAgaGFuZGxlci5jYWxsKHNlbGYsIGFyZzEsIGFyZzIpO1xuICBlbHNlIHtcbiAgICB2YXIgbGVuID0gaGFuZGxlci5sZW5ndGg7XG4gICAgdmFyIGxpc3RlbmVycyA9IGFycmF5Q2xvbmUoaGFuZGxlciwgbGVuKTtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbjsgKytpKVxuICAgICAgbGlzdGVuZXJzW2ldLmNhbGwoc2VsZiwgYXJnMSwgYXJnMik7XG4gIH1cbn1cbmZ1bmN0aW9uIGVtaXRUaHJlZShoYW5kbGVyLCBpc0ZuLCBzZWxmLCBhcmcxLCBhcmcyLCBhcmczKSB7XG4gIGlmIChpc0ZuKVxuICAgIGhhbmRsZXIuY2FsbChzZWxmLCBhcmcxLCBhcmcyLCBhcmczKTtcbiAgZWxzZSB7XG4gICAgdmFyIGxlbiA9IGhhbmRsZXIubGVuZ3RoO1xuICAgIHZhciBsaXN0ZW5lcnMgPSBhcnJheUNsb25lKGhhbmRsZXIsIGxlbik7XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW47ICsraSlcbiAgICAgIGxpc3RlbmVyc1tpXS5jYWxsKHNlbGYsIGFyZzEsIGFyZzIsIGFyZzMpO1xuICB9XG59XG5cbmZ1bmN0aW9uIGVtaXRNYW55KGhhbmRsZXIsIGlzRm4sIHNlbGYsIGFyZ3MpIHtcbiAgaWYgKGlzRm4pXG4gICAgaGFuZGxlci5hcHBseShzZWxmLCBhcmdzKTtcbiAgZWxzZSB7XG4gICAgdmFyIGxlbiA9IGhhbmRsZXIubGVuZ3RoO1xuICAgIHZhciBsaXN0ZW5lcnMgPSBhcnJheUNsb25lKGhhbmRsZXIsIGxlbik7XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW47ICsraSlcbiAgICAgIGxpc3RlbmVyc1tpXS5hcHBseShzZWxmLCBhcmdzKTtcbiAgfVxufVxuXG5FdmVudEVtaXR0ZXIucHJvdG90eXBlLmVtaXQgPSBmdW5jdGlvbiBlbWl0KHR5cGUpIHtcbiAgdmFyIGVyLCBoYW5kbGVyLCBsZW4sIGFyZ3MsIGksIGV2ZW50cywgZG9tYWluO1xuICB2YXIgbmVlZERvbWFpbkV4aXQgPSBmYWxzZTtcbiAgdmFyIGRvRXJyb3IgPSAodHlwZSA9PT0gJ2Vycm9yJyk7XG5cbiAgZXZlbnRzID0gdGhpcy5fZXZlbnRzO1xuICBpZiAoZXZlbnRzKVxuICAgIGRvRXJyb3IgPSAoZG9FcnJvciAmJiBldmVudHMuZXJyb3IgPT0gbnVsbCk7XG4gIGVsc2UgaWYgKCFkb0Vycm9yKVxuICAgIHJldHVybiBmYWxzZTtcblxuICBkb21haW4gPSB0aGlzLmRvbWFpbjtcblxuICAvLyBJZiB0aGVyZSBpcyBubyAnZXJyb3InIGV2ZW50IGxpc3RlbmVyIHRoZW4gdGhyb3cuXG4gIGlmIChkb0Vycm9yKSB7XG4gICAgZXIgPSBhcmd1bWVudHNbMV07XG4gICAgaWYgKGRvbWFpbikge1xuICAgICAgaWYgKCFlcilcbiAgICAgICAgZXIgPSBuZXcgRXJyb3IoJ1VuY2F1Z2h0LCB1bnNwZWNpZmllZCBcImVycm9yXCIgZXZlbnQnKTtcbiAgICAgIGVyLmRvbWFpbkVtaXR0ZXIgPSB0aGlzO1xuICAgICAgZXIuZG9tYWluID0gZG9tYWluO1xuICAgICAgZXIuZG9tYWluVGhyb3duID0gZmFsc2U7XG4gICAgICBkb21haW4uZW1pdCgnZXJyb3InLCBlcik7XG4gICAgfSBlbHNlIGlmIChlciBpbnN0YW5jZW9mIEVycm9yKSB7XG4gICAgICB0aHJvdyBlcjsgLy8gVW5oYW5kbGVkICdlcnJvcicgZXZlbnRcbiAgICB9IGVsc2Uge1xuICAgICAgLy8gQXQgbGVhc3QgZ2l2ZSBzb21lIGtpbmQgb2YgY29udGV4dCB0byB0aGUgdXNlclxuICAgICAgdmFyIGVyciA9IG5ldyBFcnJvcignVW5jYXVnaHQsIHVuc3BlY2lmaWVkIFwiZXJyb3JcIiBldmVudC4gKCcgKyBlciArICcpJyk7XG4gICAgICBlcnIuY29udGV4dCA9IGVyO1xuICAgICAgdGhyb3cgZXJyO1xuICAgIH1cbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cblxuICBoYW5kbGVyID0gZXZlbnRzW3R5cGVdO1xuXG4gIGlmICghaGFuZGxlcilcbiAgICByZXR1cm4gZmFsc2U7XG5cbiAgdmFyIGlzRm4gPSB0eXBlb2YgaGFuZGxlciA9PT0gJ2Z1bmN0aW9uJztcbiAgbGVuID0gYXJndW1lbnRzLmxlbmd0aDtcbiAgc3dpdGNoIChsZW4pIHtcbiAgICAvLyBmYXN0IGNhc2VzXG4gICAgY2FzZSAxOlxuICAgICAgZW1pdE5vbmUoaGFuZGxlciwgaXNGbiwgdGhpcyk7XG4gICAgICBicmVhaztcbiAgICBjYXNlIDI6XG4gICAgICBlbWl0T25lKGhhbmRsZXIsIGlzRm4sIHRoaXMsIGFyZ3VtZW50c1sxXSk7XG4gICAgICBicmVhaztcbiAgICBjYXNlIDM6XG4gICAgICBlbWl0VHdvKGhhbmRsZXIsIGlzRm4sIHRoaXMsIGFyZ3VtZW50c1sxXSwgYXJndW1lbnRzWzJdKTtcbiAgICAgIGJyZWFrO1xuICAgIGNhc2UgNDpcbiAgICAgIGVtaXRUaHJlZShoYW5kbGVyLCBpc0ZuLCB0aGlzLCBhcmd1bWVudHNbMV0sIGFyZ3VtZW50c1syXSwgYXJndW1lbnRzWzNdKTtcbiAgICAgIGJyZWFrO1xuICAgIC8vIHNsb3dlclxuICAgIGRlZmF1bHQ6XG4gICAgICBhcmdzID0gbmV3IEFycmF5KGxlbiAtIDEpO1xuICAgICAgZm9yIChpID0gMTsgaSA8IGxlbjsgaSsrKVxuICAgICAgICBhcmdzW2kgLSAxXSA9IGFyZ3VtZW50c1tpXTtcbiAgICAgIGVtaXRNYW55KGhhbmRsZXIsIGlzRm4sIHRoaXMsIGFyZ3MpO1xuICB9XG5cbiAgaWYgKG5lZWREb21haW5FeGl0KVxuICAgIGRvbWFpbi5leGl0KCk7XG5cbiAgcmV0dXJuIHRydWU7XG59O1xuXG5mdW5jdGlvbiBfYWRkTGlzdGVuZXIodGFyZ2V0LCB0eXBlLCBsaXN0ZW5lciwgcHJlcGVuZCkge1xuICB2YXIgbTtcbiAgdmFyIGV2ZW50cztcbiAgdmFyIGV4aXN0aW5nO1xuXG4gIGlmICh0eXBlb2YgbGlzdGVuZXIgIT09ICdmdW5jdGlvbicpXG4gICAgdGhyb3cgbmV3IFR5cGVFcnJvcignXCJsaXN0ZW5lclwiIGFyZ3VtZW50IG11c3QgYmUgYSBmdW5jdGlvbicpO1xuXG4gIGV2ZW50cyA9IHRhcmdldC5fZXZlbnRzO1xuICBpZiAoIWV2ZW50cykge1xuICAgIGV2ZW50cyA9IHRhcmdldC5fZXZlbnRzID0gbmV3IEV2ZW50SGFuZGxlcnMoKTtcbiAgICB0YXJnZXQuX2V2ZW50c0NvdW50ID0gMDtcbiAgfSBlbHNlIHtcbiAgICAvLyBUbyBhdm9pZCByZWN1cnNpb24gaW4gdGhlIGNhc2UgdGhhdCB0eXBlID09PSBcIm5ld0xpc3RlbmVyXCIhIEJlZm9yZVxuICAgIC8vIGFkZGluZyBpdCB0byB0aGUgbGlzdGVuZXJzLCBmaXJzdCBlbWl0IFwibmV3TGlzdGVuZXJcIi5cbiAgICBpZiAoZXZlbnRzLm5ld0xpc3RlbmVyKSB7XG4gICAgICB0YXJnZXQuZW1pdCgnbmV3TGlzdGVuZXInLCB0eXBlLFxuICAgICAgICAgICAgICAgICAgbGlzdGVuZXIubGlzdGVuZXIgPyBsaXN0ZW5lci5saXN0ZW5lciA6IGxpc3RlbmVyKTtcblxuICAgICAgLy8gUmUtYXNzaWduIGBldmVudHNgIGJlY2F1c2UgYSBuZXdMaXN0ZW5lciBoYW5kbGVyIGNvdWxkIGhhdmUgY2F1c2VkIHRoZVxuICAgICAgLy8gdGhpcy5fZXZlbnRzIHRvIGJlIGFzc2lnbmVkIHRvIGEgbmV3IG9iamVjdFxuICAgICAgZXZlbnRzID0gdGFyZ2V0Ll9ldmVudHM7XG4gICAgfVxuICAgIGV4aXN0aW5nID0gZXZlbnRzW3R5cGVdO1xuICB9XG5cbiAgaWYgKCFleGlzdGluZykge1xuICAgIC8vIE9wdGltaXplIHRoZSBjYXNlIG9mIG9uZSBsaXN0ZW5lci4gRG9uJ3QgbmVlZCB0aGUgZXh0cmEgYXJyYXkgb2JqZWN0LlxuICAgIGV4aXN0aW5nID0gZXZlbnRzW3R5cGVdID0gbGlzdGVuZXI7XG4gICAgKyt0YXJnZXQuX2V2ZW50c0NvdW50O1xuICB9IGVsc2Uge1xuICAgIGlmICh0eXBlb2YgZXhpc3RpbmcgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgIC8vIEFkZGluZyB0aGUgc2Vjb25kIGVsZW1lbnQsIG5lZWQgdG8gY2hhbmdlIHRvIGFycmF5LlxuICAgICAgZXhpc3RpbmcgPSBldmVudHNbdHlwZV0gPSBwcmVwZW5kID8gW2xpc3RlbmVyLCBleGlzdGluZ10gOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgW2V4aXN0aW5nLCBsaXN0ZW5lcl07XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIElmIHdlJ3ZlIGFscmVhZHkgZ290IGFuIGFycmF5LCBqdXN0IGFwcGVuZC5cbiAgICAgIGlmIChwcmVwZW5kKSB7XG4gICAgICAgIGV4aXN0aW5nLnVuc2hpZnQobGlzdGVuZXIpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgZXhpc3RpbmcucHVzaChsaXN0ZW5lcik7XG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gQ2hlY2sgZm9yIGxpc3RlbmVyIGxlYWtcbiAgICBpZiAoIWV4aXN0aW5nLndhcm5lZCkge1xuICAgICAgbSA9ICRnZXRNYXhMaXN0ZW5lcnModGFyZ2V0KTtcbiAgICAgIGlmIChtICYmIG0gPiAwICYmIGV4aXN0aW5nLmxlbmd0aCA+IG0pIHtcbiAgICAgICAgZXhpc3Rpbmcud2FybmVkID0gdHJ1ZTtcbiAgICAgICAgdmFyIHcgPSBuZXcgRXJyb3IoJ1Bvc3NpYmxlIEV2ZW50RW1pdHRlciBtZW1vcnkgbGVhayBkZXRlY3RlZC4gJyArXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZXhpc3RpbmcubGVuZ3RoICsgJyAnICsgdHlwZSArICcgbGlzdGVuZXJzIGFkZGVkLiAnICtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnVXNlIGVtaXR0ZXIuc2V0TWF4TGlzdGVuZXJzKCkgdG8gaW5jcmVhc2UgbGltaXQnKTtcbiAgICAgICAgdy5uYW1lID0gJ01heExpc3RlbmVyc0V4Y2VlZGVkV2FybmluZyc7XG4gICAgICAgIHcuZW1pdHRlciA9IHRhcmdldDtcbiAgICAgICAgdy50eXBlID0gdHlwZTtcbiAgICAgICAgdy5jb3VudCA9IGV4aXN0aW5nLmxlbmd0aDtcbiAgICAgICAgZW1pdFdhcm5pbmcodyk7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIHRhcmdldDtcbn1cbmZ1bmN0aW9uIGVtaXRXYXJuaW5nKGUpIHtcbiAgdHlwZW9mIGNvbnNvbGUud2FybiA9PT0gJ2Z1bmN0aW9uJyA/IGNvbnNvbGUud2FybihlKSA6IGNvbnNvbGUubG9nKGUpO1xufVxuRXZlbnRFbWl0dGVyLnByb3RvdHlwZS5hZGRMaXN0ZW5lciA9IGZ1bmN0aW9uIGFkZExpc3RlbmVyKHR5cGUsIGxpc3RlbmVyKSB7XG4gIHJldHVybiBfYWRkTGlzdGVuZXIodGhpcywgdHlwZSwgbGlzdGVuZXIsIGZhbHNlKTtcbn07XG5cbkV2ZW50RW1pdHRlci5wcm90b3R5cGUub24gPSBFdmVudEVtaXR0ZXIucHJvdG90eXBlLmFkZExpc3RlbmVyO1xuXG5FdmVudEVtaXR0ZXIucHJvdG90eXBlLnByZXBlbmRMaXN0ZW5lciA9XG4gICAgZnVuY3Rpb24gcHJlcGVuZExpc3RlbmVyKHR5cGUsIGxpc3RlbmVyKSB7XG4gICAgICByZXR1cm4gX2FkZExpc3RlbmVyKHRoaXMsIHR5cGUsIGxpc3RlbmVyLCB0cnVlKTtcbiAgICB9O1xuXG5mdW5jdGlvbiBfb25jZVdyYXAodGFyZ2V0LCB0eXBlLCBsaXN0ZW5lcikge1xuICB2YXIgZmlyZWQgPSBmYWxzZTtcbiAgZnVuY3Rpb24gZygpIHtcbiAgICB0YXJnZXQucmVtb3ZlTGlzdGVuZXIodHlwZSwgZyk7XG4gICAgaWYgKCFmaXJlZCkge1xuICAgICAgZmlyZWQgPSB0cnVlO1xuICAgICAgbGlzdGVuZXIuYXBwbHkodGFyZ2V0LCBhcmd1bWVudHMpO1xuICAgIH1cbiAgfVxuICBnLmxpc3RlbmVyID0gbGlzdGVuZXI7XG4gIHJldHVybiBnO1xufVxuXG5FdmVudEVtaXR0ZXIucHJvdG90eXBlLm9uY2UgPSBmdW5jdGlvbiBvbmNlKHR5cGUsIGxpc3RlbmVyKSB7XG4gIGlmICh0eXBlb2YgbGlzdGVuZXIgIT09ICdmdW5jdGlvbicpXG4gICAgdGhyb3cgbmV3IFR5cGVFcnJvcignXCJsaXN0ZW5lclwiIGFyZ3VtZW50IG11c3QgYmUgYSBmdW5jdGlvbicpO1xuICB0aGlzLm9uKHR5cGUsIF9vbmNlV3JhcCh0aGlzLCB0eXBlLCBsaXN0ZW5lcikpO1xuICByZXR1cm4gdGhpcztcbn07XG5cbkV2ZW50RW1pdHRlci5wcm90b3R5cGUucHJlcGVuZE9uY2VMaXN0ZW5lciA9XG4gICAgZnVuY3Rpb24gcHJlcGVuZE9uY2VMaXN0ZW5lcih0eXBlLCBsaXN0ZW5lcikge1xuICAgICAgaWYgKHR5cGVvZiBsaXN0ZW5lciAhPT0gJ2Z1bmN0aW9uJylcbiAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignXCJsaXN0ZW5lclwiIGFyZ3VtZW50IG11c3QgYmUgYSBmdW5jdGlvbicpO1xuICAgICAgdGhpcy5wcmVwZW5kTGlzdGVuZXIodHlwZSwgX29uY2VXcmFwKHRoaXMsIHR5cGUsIGxpc3RlbmVyKSk7XG4gICAgICByZXR1cm4gdGhpcztcbiAgICB9O1xuXG4vLyBlbWl0cyBhICdyZW1vdmVMaXN0ZW5lcicgZXZlbnQgaWZmIHRoZSBsaXN0ZW5lciB3YXMgcmVtb3ZlZFxuRXZlbnRFbWl0dGVyLnByb3RvdHlwZS5yZW1vdmVMaXN0ZW5lciA9XG4gICAgZnVuY3Rpb24gcmVtb3ZlTGlzdGVuZXIodHlwZSwgbGlzdGVuZXIpIHtcbiAgICAgIHZhciBsaXN0LCBldmVudHMsIHBvc2l0aW9uLCBpLCBvcmlnaW5hbExpc3RlbmVyO1xuXG4gICAgICBpZiAodHlwZW9mIGxpc3RlbmVyICE9PSAnZnVuY3Rpb24nKVxuICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdcImxpc3RlbmVyXCIgYXJndW1lbnQgbXVzdCBiZSBhIGZ1bmN0aW9uJyk7XG5cbiAgICAgIGV2ZW50cyA9IHRoaXMuX2V2ZW50cztcbiAgICAgIGlmICghZXZlbnRzKVxuICAgICAgICByZXR1cm4gdGhpcztcblxuICAgICAgbGlzdCA9IGV2ZW50c1t0eXBlXTtcbiAgICAgIGlmICghbGlzdClcbiAgICAgICAgcmV0dXJuIHRoaXM7XG5cbiAgICAgIGlmIChsaXN0ID09PSBsaXN0ZW5lciB8fCAobGlzdC5saXN0ZW5lciAmJiBsaXN0Lmxpc3RlbmVyID09PSBsaXN0ZW5lcikpIHtcbiAgICAgICAgaWYgKC0tdGhpcy5fZXZlbnRzQ291bnQgPT09IDApXG4gICAgICAgICAgdGhpcy5fZXZlbnRzID0gbmV3IEV2ZW50SGFuZGxlcnMoKTtcbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgZGVsZXRlIGV2ZW50c1t0eXBlXTtcbiAgICAgICAgICBpZiAoZXZlbnRzLnJlbW92ZUxpc3RlbmVyKVxuICAgICAgICAgICAgdGhpcy5lbWl0KCdyZW1vdmVMaXN0ZW5lcicsIHR5cGUsIGxpc3QubGlzdGVuZXIgfHwgbGlzdGVuZXIpO1xuICAgICAgICB9XG4gICAgICB9IGVsc2UgaWYgKHR5cGVvZiBsaXN0ICE9PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgIHBvc2l0aW9uID0gLTE7XG5cbiAgICAgICAgZm9yIChpID0gbGlzdC5sZW5ndGg7IGktLSA+IDA7KSB7XG4gICAgICAgICAgaWYgKGxpc3RbaV0gPT09IGxpc3RlbmVyIHx8XG4gICAgICAgICAgICAgIChsaXN0W2ldLmxpc3RlbmVyICYmIGxpc3RbaV0ubGlzdGVuZXIgPT09IGxpc3RlbmVyKSkge1xuICAgICAgICAgICAgb3JpZ2luYWxMaXN0ZW5lciA9IGxpc3RbaV0ubGlzdGVuZXI7XG4gICAgICAgICAgICBwb3NpdGlvbiA9IGk7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBpZiAocG9zaXRpb24gPCAwKVxuICAgICAgICAgIHJldHVybiB0aGlzO1xuXG4gICAgICAgIGlmIChsaXN0Lmxlbmd0aCA9PT0gMSkge1xuICAgICAgICAgIGxpc3RbMF0gPSB1bmRlZmluZWQ7XG4gICAgICAgICAgaWYgKC0tdGhpcy5fZXZlbnRzQ291bnQgPT09IDApIHtcbiAgICAgICAgICAgIHRoaXMuX2V2ZW50cyA9IG5ldyBFdmVudEhhbmRsZXJzKCk7XG4gICAgICAgICAgICByZXR1cm4gdGhpcztcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgZGVsZXRlIGV2ZW50c1t0eXBlXTtcbiAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgc3BsaWNlT25lKGxpc3QsIHBvc2l0aW9uKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChldmVudHMucmVtb3ZlTGlzdGVuZXIpXG4gICAgICAgICAgdGhpcy5lbWl0KCdyZW1vdmVMaXN0ZW5lcicsIHR5cGUsIG9yaWdpbmFsTGlzdGVuZXIgfHwgbGlzdGVuZXIpO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gdGhpcztcbiAgICB9O1xuXG5FdmVudEVtaXR0ZXIucHJvdG90eXBlLnJlbW92ZUFsbExpc3RlbmVycyA9XG4gICAgZnVuY3Rpb24gcmVtb3ZlQWxsTGlzdGVuZXJzKHR5cGUpIHtcbiAgICAgIHZhciBsaXN0ZW5lcnMsIGV2ZW50cztcblxuICAgICAgZXZlbnRzID0gdGhpcy5fZXZlbnRzO1xuICAgICAgaWYgKCFldmVudHMpXG4gICAgICAgIHJldHVybiB0aGlzO1xuXG4gICAgICAvLyBub3QgbGlzdGVuaW5nIGZvciByZW1vdmVMaXN0ZW5lciwgbm8gbmVlZCB0byBlbWl0XG4gICAgICBpZiAoIWV2ZW50cy5yZW1vdmVMaXN0ZW5lcikge1xuICAgICAgICBpZiAoYXJndW1lbnRzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgIHRoaXMuX2V2ZW50cyA9IG5ldyBFdmVudEhhbmRsZXJzKCk7XG4gICAgICAgICAgdGhpcy5fZXZlbnRzQ291bnQgPSAwO1xuICAgICAgICB9IGVsc2UgaWYgKGV2ZW50c1t0eXBlXSkge1xuICAgICAgICAgIGlmICgtLXRoaXMuX2V2ZW50c0NvdW50ID09PSAwKVxuICAgICAgICAgICAgdGhpcy5fZXZlbnRzID0gbmV3IEV2ZW50SGFuZGxlcnMoKTtcbiAgICAgICAgICBlbHNlXG4gICAgICAgICAgICBkZWxldGUgZXZlbnRzW3R5cGVdO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgICAgfVxuXG4gICAgICAvLyBlbWl0IHJlbW92ZUxpc3RlbmVyIGZvciBhbGwgbGlzdGVuZXJzIG9uIGFsbCBldmVudHNcbiAgICAgIGlmIChhcmd1bWVudHMubGVuZ3RoID09PSAwKSB7XG4gICAgICAgIHZhciBrZXlzID0gT2JqZWN0LmtleXMoZXZlbnRzKTtcbiAgICAgICAgZm9yICh2YXIgaSA9IDAsIGtleTsgaSA8IGtleXMubGVuZ3RoOyArK2kpIHtcbiAgICAgICAgICBrZXkgPSBrZXlzW2ldO1xuICAgICAgICAgIGlmIChrZXkgPT09ICdyZW1vdmVMaXN0ZW5lcicpIGNvbnRpbnVlO1xuICAgICAgICAgIHRoaXMucmVtb3ZlQWxsTGlzdGVuZXJzKGtleSk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5yZW1vdmVBbGxMaXN0ZW5lcnMoJ3JlbW92ZUxpc3RlbmVyJyk7XG4gICAgICAgIHRoaXMuX2V2ZW50cyA9IG5ldyBFdmVudEhhbmRsZXJzKCk7XG4gICAgICAgIHRoaXMuX2V2ZW50c0NvdW50ID0gMDtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgICB9XG5cbiAgICAgIGxpc3RlbmVycyA9IGV2ZW50c1t0eXBlXTtcblxuICAgICAgaWYgKHR5cGVvZiBsaXN0ZW5lcnMgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgdGhpcy5yZW1vdmVMaXN0ZW5lcih0eXBlLCBsaXN0ZW5lcnMpO1xuICAgICAgfSBlbHNlIGlmIChsaXN0ZW5lcnMpIHtcbiAgICAgICAgLy8gTElGTyBvcmRlclxuICAgICAgICBkbyB7XG4gICAgICAgICAgdGhpcy5yZW1vdmVMaXN0ZW5lcih0eXBlLCBsaXN0ZW5lcnNbbGlzdGVuZXJzLmxlbmd0aCAtIDFdKTtcbiAgICAgICAgfSB3aGlsZSAobGlzdGVuZXJzWzBdKTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfTtcblxuRXZlbnRFbWl0dGVyLnByb3RvdHlwZS5saXN0ZW5lcnMgPSBmdW5jdGlvbiBsaXN0ZW5lcnModHlwZSkge1xuICB2YXIgZXZsaXN0ZW5lcjtcbiAgdmFyIHJldDtcbiAgdmFyIGV2ZW50cyA9IHRoaXMuX2V2ZW50cztcblxuICBpZiAoIWV2ZW50cylcbiAgICByZXQgPSBbXTtcbiAgZWxzZSB7XG4gICAgZXZsaXN0ZW5lciA9IGV2ZW50c1t0eXBlXTtcbiAgICBpZiAoIWV2bGlzdGVuZXIpXG4gICAgICByZXQgPSBbXTtcbiAgICBlbHNlIGlmICh0eXBlb2YgZXZsaXN0ZW5lciA9PT0gJ2Z1bmN0aW9uJylcbiAgICAgIHJldCA9IFtldmxpc3RlbmVyLmxpc3RlbmVyIHx8IGV2bGlzdGVuZXJdO1xuICAgIGVsc2VcbiAgICAgIHJldCA9IHVud3JhcExpc3RlbmVycyhldmxpc3RlbmVyKTtcbiAgfVxuXG4gIHJldHVybiByZXQ7XG59O1xuXG5FdmVudEVtaXR0ZXIubGlzdGVuZXJDb3VudCA9IGZ1bmN0aW9uKGVtaXR0ZXIsIHR5cGUpIHtcbiAgaWYgKHR5cGVvZiBlbWl0dGVyLmxpc3RlbmVyQ291bnQgPT09ICdmdW5jdGlvbicpIHtcbiAgICByZXR1cm4gZW1pdHRlci5saXN0ZW5lckNvdW50KHR5cGUpO1xuICB9IGVsc2Uge1xuICAgIHJldHVybiBsaXN0ZW5lckNvdW50LmNhbGwoZW1pdHRlciwgdHlwZSk7XG4gIH1cbn07XG5cbkV2ZW50RW1pdHRlci5wcm90b3R5cGUubGlzdGVuZXJDb3VudCA9IGxpc3RlbmVyQ291bnQ7XG5mdW5jdGlvbiBsaXN0ZW5lckNvdW50KHR5cGUpIHtcbiAgdmFyIGV2ZW50cyA9IHRoaXMuX2V2ZW50cztcblxuICBpZiAoZXZlbnRzKSB7XG4gICAgdmFyIGV2bGlzdGVuZXIgPSBldmVudHNbdHlwZV07XG5cbiAgICBpZiAodHlwZW9mIGV2bGlzdGVuZXIgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgIHJldHVybiAxO1xuICAgIH0gZWxzZSBpZiAoZXZsaXN0ZW5lcikge1xuICAgICAgcmV0dXJuIGV2bGlzdGVuZXIubGVuZ3RoO1xuICAgIH1cbiAgfVxuXG4gIHJldHVybiAwO1xufVxuXG5FdmVudEVtaXR0ZXIucHJvdG90eXBlLmV2ZW50TmFtZXMgPSBmdW5jdGlvbiBldmVudE5hbWVzKCkge1xuICByZXR1cm4gdGhpcy5fZXZlbnRzQ291bnQgPiAwID8gUmVmbGVjdC5vd25LZXlzKHRoaXMuX2V2ZW50cykgOiBbXTtcbn07XG5cbi8vIEFib3V0IDEuNXggZmFzdGVyIHRoYW4gdGhlIHR3by1hcmcgdmVyc2lvbiBvZiBBcnJheSNzcGxpY2UoKS5cbmZ1bmN0aW9uIHNwbGljZU9uZShsaXN0LCBpbmRleCkge1xuICBmb3IgKHZhciBpID0gaW5kZXgsIGsgPSBpICsgMSwgbiA9IGxpc3QubGVuZ3RoOyBrIDwgbjsgaSArPSAxLCBrICs9IDEpXG4gICAgbGlzdFtpXSA9IGxpc3Rba107XG4gIGxpc3QucG9wKCk7XG59XG5cbmZ1bmN0aW9uIGFycmF5Q2xvbmUoYXJyLCBpKSB7XG4gIHZhciBjb3B5ID0gbmV3IEFycmF5KGkpO1xuICB3aGlsZSAoaS0tKVxuICAgIGNvcHlbaV0gPSBhcnJbaV07XG4gIHJldHVybiBjb3B5O1xufVxuXG5mdW5jdGlvbiB1bndyYXBMaXN0ZW5lcnMoYXJyKSB7XG4gIHZhciByZXQgPSBuZXcgQXJyYXkoYXJyLmxlbmd0aCk7XG4gIGZvciAodmFyIGkgPSAwOyBpIDwgcmV0Lmxlbmd0aDsgKytpKSB7XG4gICAgcmV0W2ldID0gYXJyW2ldLmxpc3RlbmVyIHx8IGFycltpXTtcbiAgfVxuICByZXR1cm4gcmV0O1xufVxuIiwgIlxudmFyIGluaGVyaXRzO1xuaWYgKHR5cGVvZiBPYmplY3QuY3JlYXRlID09PSAnZnVuY3Rpb24nKXtcbiAgaW5oZXJpdHMgPSBmdW5jdGlvbiBpbmhlcml0cyhjdG9yLCBzdXBlckN0b3IpIHtcbiAgICAvLyBpbXBsZW1lbnRhdGlvbiBmcm9tIHN0YW5kYXJkIG5vZGUuanMgJ3V0aWwnIG1vZHVsZVxuICAgIGN0b3Iuc3VwZXJfID0gc3VwZXJDdG9yXG4gICAgY3Rvci5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKHN1cGVyQ3Rvci5wcm90b3R5cGUsIHtcbiAgICAgIGNvbnN0cnVjdG9yOiB7XG4gICAgICAgIHZhbHVlOiBjdG9yLFxuICAgICAgICBlbnVtZXJhYmxlOiBmYWxzZSxcbiAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgICAgfVxuICAgIH0pO1xuICB9O1xufSBlbHNlIHtcbiAgaW5oZXJpdHMgPSBmdW5jdGlvbiBpbmhlcml0cyhjdG9yLCBzdXBlckN0b3IpIHtcbiAgICBjdG9yLnN1cGVyXyA9IHN1cGVyQ3RvclxuICAgIHZhciBUZW1wQ3RvciA9IGZ1bmN0aW9uICgpIHt9XG4gICAgVGVtcEN0b3IucHJvdG90eXBlID0gc3VwZXJDdG9yLnByb3RvdHlwZVxuICAgIGN0b3IucHJvdG90eXBlID0gbmV3IFRlbXBDdG9yKClcbiAgICBjdG9yLnByb3RvdHlwZS5jb25zdHJ1Y3RvciA9IGN0b3JcbiAgfVxufVxuZXhwb3J0IGRlZmF1bHQgaW5oZXJpdHM7XG4iLCAiLy8gQ29weXJpZ2h0IEpveWVudCwgSW5jLiBhbmQgb3RoZXIgTm9kZSBjb250cmlidXRvcnMuXG4vL1xuLy8gUGVybWlzc2lvbiBpcyBoZXJlYnkgZ3JhbnRlZCwgZnJlZSBvZiBjaGFyZ2UsIHRvIGFueSBwZXJzb24gb2J0YWluaW5nIGFcbi8vIGNvcHkgb2YgdGhpcyBzb2Z0d2FyZSBhbmQgYXNzb2NpYXRlZCBkb2N1bWVudGF0aW9uIGZpbGVzICh0aGVcbi8vIFwiU29mdHdhcmVcIiksIHRvIGRlYWwgaW4gdGhlIFNvZnR3YXJlIHdpdGhvdXQgcmVzdHJpY3Rpb24sIGluY2x1ZGluZ1xuLy8gd2l0aG91dCBsaW1pdGF0aW9uIHRoZSByaWdodHMgdG8gdXNlLCBjb3B5LCBtb2RpZnksIG1lcmdlLCBwdWJsaXNoLFxuLy8gZGlzdHJpYnV0ZSwgc3VibGljZW5zZSwgYW5kL29yIHNlbGwgY29waWVzIG9mIHRoZSBTb2Z0d2FyZSwgYW5kIHRvIHBlcm1pdFxuLy8gcGVyc29ucyB0byB3aG9tIHRoZSBTb2Z0d2FyZSBpcyBmdXJuaXNoZWQgdG8gZG8gc28sIHN1YmplY3QgdG8gdGhlXG4vLyBmb2xsb3dpbmcgY29uZGl0aW9uczpcbi8vXG4vLyBUaGUgYWJvdmUgY29weXJpZ2h0IG5vdGljZSBhbmQgdGhpcyBwZXJtaXNzaW9uIG5vdGljZSBzaGFsbCBiZSBpbmNsdWRlZFxuLy8gaW4gYWxsIGNvcGllcyBvciBzdWJzdGFudGlhbCBwb3J0aW9ucyBvZiB0aGUgU29mdHdhcmUuXG4vL1xuLy8gVEhFIFNPRlRXQVJFIElTIFBST1ZJREVEIFwiQVMgSVNcIiwgV0lUSE9VVCBXQVJSQU5UWSBPRiBBTlkgS0lORCwgRVhQUkVTU1xuLy8gT1IgSU1QTElFRCwgSU5DTFVESU5HIEJVVCBOT1QgTElNSVRFRCBUTyBUSEUgV0FSUkFOVElFUyBPRlxuLy8gTUVSQ0hBTlRBQklMSVRZLCBGSVRORVNTIEZPUiBBIFBBUlRJQ1VMQVIgUFVSUE9TRSBBTkQgTk9OSU5GUklOR0VNRU5ULiBJTlxuLy8gTk8gRVZFTlQgU0hBTEwgVEhFIEFVVEhPUlMgT1IgQ09QWVJJR0hUIEhPTERFUlMgQkUgTElBQkxFIEZPUiBBTlkgQ0xBSU0sXG4vLyBEQU1BR0VTIE9SIE9USEVSIExJQUJJTElUWSwgV0hFVEhFUiBJTiBBTiBBQ1RJT04gT0YgQ09OVFJBQ1QsIFRPUlQgT1Jcbi8vIE9USEVSV0lTRSwgQVJJU0lORyBGUk9NLCBPVVQgT0YgT1IgSU4gQ09OTkVDVElPTiBXSVRIIFRIRSBTT0ZUV0FSRSBPUiBUSEVcbi8vIFVTRSBPUiBPVEhFUiBERUFMSU5HUyBJTiBUSEUgU09GVFdBUkUuXG5pbXBvcnQgcHJvY2VzcyBmcm9tICdwcm9jZXNzJztcbnZhciBmb3JtYXRSZWdFeHAgPSAvJVtzZGolXS9nO1xuZXhwb3J0IGZ1bmN0aW9uIGZvcm1hdChmKSB7XG4gIGlmICghaXNTdHJpbmcoZikpIHtcbiAgICB2YXIgb2JqZWN0cyA9IFtdO1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgYXJndW1lbnRzLmxlbmd0aDsgaSsrKSB7XG4gICAgICBvYmplY3RzLnB1c2goaW5zcGVjdChhcmd1bWVudHNbaV0pKTtcbiAgICB9XG4gICAgcmV0dXJuIG9iamVjdHMuam9pbignICcpO1xuICB9XG5cbiAgdmFyIGkgPSAxO1xuICB2YXIgYXJncyA9IGFyZ3VtZW50cztcbiAgdmFyIGxlbiA9IGFyZ3MubGVuZ3RoO1xuICB2YXIgc3RyID0gU3RyaW5nKGYpLnJlcGxhY2UoZm9ybWF0UmVnRXhwLCBmdW5jdGlvbih4KSB7XG4gICAgaWYgKHggPT09ICclJScpIHJldHVybiAnJSc7XG4gICAgaWYgKGkgPj0gbGVuKSByZXR1cm4geDtcbiAgICBzd2l0Y2ggKHgpIHtcbiAgICAgIGNhc2UgJyVzJzogcmV0dXJuIFN0cmluZyhhcmdzW2krK10pO1xuICAgICAgY2FzZSAnJWQnOiByZXR1cm4gTnVtYmVyKGFyZ3NbaSsrXSk7XG4gICAgICBjYXNlICclaic6XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgcmV0dXJuIEpTT04uc3RyaW5naWZ5KGFyZ3NbaSsrXSk7XG4gICAgICAgIH0gY2F0Y2ggKF8pIHtcbiAgICAgICAgICByZXR1cm4gJ1tDaXJjdWxhcl0nO1xuICAgICAgICB9XG4gICAgICBkZWZhdWx0OlxuICAgICAgICByZXR1cm4geDtcbiAgICB9XG4gIH0pO1xuICBmb3IgKHZhciB4ID0gYXJnc1tpXTsgaSA8IGxlbjsgeCA9IGFyZ3NbKytpXSkge1xuICAgIGlmIChpc051bGwoeCkgfHwgIWlzT2JqZWN0KHgpKSB7XG4gICAgICBzdHIgKz0gJyAnICsgeDtcbiAgICB9IGVsc2Uge1xuICAgICAgc3RyICs9ICcgJyArIGluc3BlY3QoeCk7XG4gICAgfVxuICB9XG4gIHJldHVybiBzdHI7XG59O1xuXG5cbi8vIE1hcmsgdGhhdCBhIG1ldGhvZCBzaG91bGQgbm90IGJlIHVzZWQuXG4vLyBSZXR1cm5zIGEgbW9kaWZpZWQgZnVuY3Rpb24gd2hpY2ggd2FybnMgb25jZSBieSBkZWZhdWx0LlxuLy8gSWYgLS1uby1kZXByZWNhdGlvbiBpcyBzZXQsIHRoZW4gaXQgaXMgYSBuby1vcC5cbmV4cG9ydCBmdW5jdGlvbiBkZXByZWNhdGUoZm4sIG1zZykge1xuICAvLyBBbGxvdyBmb3IgZGVwcmVjYXRpbmcgdGhpbmdzIGluIHRoZSBwcm9jZXNzIG9mIHN0YXJ0aW5nIHVwLlxuICBpZiAoaXNVbmRlZmluZWQoZ2xvYmFsLnByb2Nlc3MpKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uKCkge1xuICAgICAgcmV0dXJuIGRlcHJlY2F0ZShmbiwgbXNnKS5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICAgIH07XG4gIH1cblxuICBpZiAocHJvY2Vzcy5ub0RlcHJlY2F0aW9uID09PSB0cnVlKSB7XG4gICAgcmV0dXJuIGZuO1xuICB9XG5cbiAgdmFyIHdhcm5lZCA9IGZhbHNlO1xuICBmdW5jdGlvbiBkZXByZWNhdGVkKCkge1xuICAgIGlmICghd2FybmVkKSB7XG4gICAgICBpZiAocHJvY2Vzcy50aHJvd0RlcHJlY2F0aW9uKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihtc2cpO1xuICAgICAgfSBlbHNlIGlmIChwcm9jZXNzLnRyYWNlRGVwcmVjYXRpb24pIHtcbiAgICAgICAgY29uc29sZS50cmFjZShtc2cpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgY29uc29sZS5lcnJvcihtc2cpO1xuICAgICAgfVxuICAgICAgd2FybmVkID0gdHJ1ZTtcbiAgICB9XG4gICAgcmV0dXJuIGZuLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gIH1cblxuICByZXR1cm4gZGVwcmVjYXRlZDtcbn07XG5cblxudmFyIGRlYnVncyA9IHt9O1xudmFyIGRlYnVnRW52aXJvbjtcbmV4cG9ydCBmdW5jdGlvbiBkZWJ1Z2xvZyhzZXQpIHtcbiAgaWYgKGlzVW5kZWZpbmVkKGRlYnVnRW52aXJvbikpXG4gICAgZGVidWdFbnZpcm9uID0gcHJvY2Vzcy5lbnYuTk9ERV9ERUJVRyB8fCAnJztcbiAgc2V0ID0gc2V0LnRvVXBwZXJDYXNlKCk7XG4gIGlmICghZGVidWdzW3NldF0pIHtcbiAgICBpZiAobmV3IFJlZ0V4cCgnXFxcXGInICsgc2V0ICsgJ1xcXFxiJywgJ2knKS50ZXN0KGRlYnVnRW52aXJvbikpIHtcbiAgICAgIHZhciBwaWQgPSAwO1xuICAgICAgZGVidWdzW3NldF0gPSBmdW5jdGlvbigpIHtcbiAgICAgICAgdmFyIG1zZyA9IGZvcm1hdC5hcHBseShudWxsLCBhcmd1bWVudHMpO1xuICAgICAgICBjb25zb2xlLmVycm9yKCclcyAlZDogJXMnLCBzZXQsIHBpZCwgbXNnKTtcbiAgICAgIH07XG4gICAgfSBlbHNlIHtcbiAgICAgIGRlYnVnc1tzZXRdID0gZnVuY3Rpb24oKSB7fTtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIGRlYnVnc1tzZXRdO1xufTtcblxuXG4vKipcbiAqIEVjaG9zIHRoZSB2YWx1ZSBvZiBhIHZhbHVlLiBUcnlzIHRvIHByaW50IHRoZSB2YWx1ZSBvdXRcbiAqIGluIHRoZSBiZXN0IHdheSBwb3NzaWJsZSBnaXZlbiB0aGUgZGlmZmVyZW50IHR5cGVzLlxuICpcbiAqIEBwYXJhbSB7T2JqZWN0fSBvYmogVGhlIG9iamVjdCB0byBwcmludCBvdXQuXG4gKiBAcGFyYW0ge09iamVjdH0gb3B0cyBPcHRpb25hbCBvcHRpb25zIG9iamVjdCB0aGF0IGFsdGVycyB0aGUgb3V0cHV0LlxuICovXG4vKiBsZWdhY3k6IG9iaiwgc2hvd0hpZGRlbiwgZGVwdGgsIGNvbG9ycyovXG5leHBvcnQgZnVuY3Rpb24gaW5zcGVjdChvYmosIG9wdHMpIHtcbiAgLy8gZGVmYXVsdCBvcHRpb25zXG4gIHZhciBjdHggPSB7XG4gICAgc2VlbjogW10sXG4gICAgc3R5bGl6ZTogc3R5bGl6ZU5vQ29sb3JcbiAgfTtcbiAgLy8gbGVnYWN5Li4uXG4gIGlmIChhcmd1bWVudHMubGVuZ3RoID49IDMpIGN0eC5kZXB0aCA9IGFyZ3VtZW50c1syXTtcbiAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPj0gNCkgY3R4LmNvbG9ycyA9IGFyZ3VtZW50c1szXTtcbiAgaWYgKGlzQm9vbGVhbihvcHRzKSkge1xuICAgIC8vIGxlZ2FjeS4uLlxuICAgIGN0eC5zaG93SGlkZGVuID0gb3B0cztcbiAgfSBlbHNlIGlmIChvcHRzKSB7XG4gICAgLy8gZ290IGFuIFwib3B0aW9uc1wiIG9iamVjdFxuICAgIF9leHRlbmQoY3R4LCBvcHRzKTtcbiAgfVxuICAvLyBzZXQgZGVmYXVsdCBvcHRpb25zXG4gIGlmIChpc1VuZGVmaW5lZChjdHguc2hvd0hpZGRlbikpIGN0eC5zaG93SGlkZGVuID0gZmFsc2U7XG4gIGlmIChpc1VuZGVmaW5lZChjdHguZGVwdGgpKSBjdHguZGVwdGggPSAyO1xuICBpZiAoaXNVbmRlZmluZWQoY3R4LmNvbG9ycykpIGN0eC5jb2xvcnMgPSBmYWxzZTtcbiAgaWYgKGlzVW5kZWZpbmVkKGN0eC5jdXN0b21JbnNwZWN0KSkgY3R4LmN1c3RvbUluc3BlY3QgPSB0cnVlO1xuICBpZiAoY3R4LmNvbG9ycykgY3R4LnN0eWxpemUgPSBzdHlsaXplV2l0aENvbG9yO1xuICByZXR1cm4gZm9ybWF0VmFsdWUoY3R4LCBvYmosIGN0eC5kZXB0aCk7XG59XG5cbi8vIGh0dHA6Ly9lbi53aWtpcGVkaWEub3JnL3dpa2kvQU5TSV9lc2NhcGVfY29kZSNncmFwaGljc1xuaW5zcGVjdC5jb2xvcnMgPSB7XG4gICdib2xkJyA6IFsxLCAyMl0sXG4gICdpdGFsaWMnIDogWzMsIDIzXSxcbiAgJ3VuZGVybGluZScgOiBbNCwgMjRdLFxuICAnaW52ZXJzZScgOiBbNywgMjddLFxuICAnd2hpdGUnIDogWzM3LCAzOV0sXG4gICdncmV5JyA6IFs5MCwgMzldLFxuICAnYmxhY2snIDogWzMwLCAzOV0sXG4gICdibHVlJyA6IFszNCwgMzldLFxuICAnY3lhbicgOiBbMzYsIDM5XSxcbiAgJ2dyZWVuJyA6IFszMiwgMzldLFxuICAnbWFnZW50YScgOiBbMzUsIDM5XSxcbiAgJ3JlZCcgOiBbMzEsIDM5XSxcbiAgJ3llbGxvdycgOiBbMzMsIDM5XVxufTtcblxuLy8gRG9uJ3QgdXNlICdibHVlJyBub3QgdmlzaWJsZSBvbiBjbWQuZXhlXG5pbnNwZWN0LnN0eWxlcyA9IHtcbiAgJ3NwZWNpYWwnOiAnY3lhbicsXG4gICdudW1iZXInOiAneWVsbG93JyxcbiAgJ2Jvb2xlYW4nOiAneWVsbG93JyxcbiAgJ3VuZGVmaW5lZCc6ICdncmV5JyxcbiAgJ251bGwnOiAnYm9sZCcsXG4gICdzdHJpbmcnOiAnZ3JlZW4nLFxuICAnZGF0ZSc6ICdtYWdlbnRhJyxcbiAgLy8gXCJuYW1lXCI6IGludGVudGlvbmFsbHkgbm90IHN0eWxpbmdcbiAgJ3JlZ2V4cCc6ICdyZWQnXG59O1xuXG5cbmZ1bmN0aW9uIHN0eWxpemVXaXRoQ29sb3Ioc3RyLCBzdHlsZVR5cGUpIHtcbiAgdmFyIHN0eWxlID0gaW5zcGVjdC5zdHlsZXNbc3R5bGVUeXBlXTtcblxuICBpZiAoc3R5bGUpIHtcbiAgICByZXR1cm4gJ1xcdTAwMWJbJyArIGluc3BlY3QuY29sb3JzW3N0eWxlXVswXSArICdtJyArIHN0ciArXG4gICAgICAgICAgICdcXHUwMDFiWycgKyBpbnNwZWN0LmNvbG9yc1tzdHlsZV1bMV0gKyAnbSc7XG4gIH0gZWxzZSB7XG4gICAgcmV0dXJuIHN0cjtcbiAgfVxufVxuXG5cbmZ1bmN0aW9uIHN0eWxpemVOb0NvbG9yKHN0ciwgc3R5bGVUeXBlKSB7XG4gIHJldHVybiBzdHI7XG59XG5cblxuZnVuY3Rpb24gYXJyYXlUb0hhc2goYXJyYXkpIHtcbiAgdmFyIGhhc2ggPSB7fTtcblxuICBhcnJheS5mb3JFYWNoKGZ1bmN0aW9uKHZhbCwgaWR4KSB7XG4gICAgaGFzaFt2YWxdID0gdHJ1ZTtcbiAgfSk7XG5cbiAgcmV0dXJuIGhhc2g7XG59XG5cblxuZnVuY3Rpb24gZm9ybWF0VmFsdWUoY3R4LCB2YWx1ZSwgcmVjdXJzZVRpbWVzKSB7XG4gIC8vIFByb3ZpZGUgYSBob29rIGZvciB1c2VyLXNwZWNpZmllZCBpbnNwZWN0IGZ1bmN0aW9ucy5cbiAgLy8gQ2hlY2sgdGhhdCB2YWx1ZSBpcyBhbiBvYmplY3Qgd2l0aCBhbiBpbnNwZWN0IGZ1bmN0aW9uIG9uIGl0XG4gIGlmIChjdHguY3VzdG9tSW5zcGVjdCAmJlxuICAgICAgdmFsdWUgJiZcbiAgICAgIGlzRnVuY3Rpb24odmFsdWUuaW5zcGVjdCkgJiZcbiAgICAgIC8vIEZpbHRlciBvdXQgdGhlIHV0aWwgbW9kdWxlLCBpdCdzIGluc3BlY3QgZnVuY3Rpb24gaXMgc3BlY2lhbFxuICAgICAgdmFsdWUuaW5zcGVjdCAhPT0gaW5zcGVjdCAmJlxuICAgICAgLy8gQWxzbyBmaWx0ZXIgb3V0IGFueSBwcm90b3R5cGUgb2JqZWN0cyB1c2luZyB0aGUgY2lyY3VsYXIgY2hlY2suXG4gICAgICAhKHZhbHVlLmNvbnN0cnVjdG9yICYmIHZhbHVlLmNvbnN0cnVjdG9yLnByb3RvdHlwZSA9PT0gdmFsdWUpKSB7XG4gICAgdmFyIHJldCA9IHZhbHVlLmluc3BlY3QocmVjdXJzZVRpbWVzLCBjdHgpO1xuICAgIGlmICghaXNTdHJpbmcocmV0KSkge1xuICAgICAgcmV0ID0gZm9ybWF0VmFsdWUoY3R4LCByZXQsIHJlY3Vyc2VUaW1lcyk7XG4gICAgfVxuICAgIHJldHVybiByZXQ7XG4gIH1cblxuICAvLyBQcmltaXRpdmUgdHlwZXMgY2Fubm90IGhhdmUgcHJvcGVydGllc1xuICB2YXIgcHJpbWl0aXZlID0gZm9ybWF0UHJpbWl0aXZlKGN0eCwgdmFsdWUpO1xuICBpZiAocHJpbWl0aXZlKSB7XG4gICAgcmV0dXJuIHByaW1pdGl2ZTtcbiAgfVxuXG4gIC8vIExvb2sgdXAgdGhlIGtleXMgb2YgdGhlIG9iamVjdC5cbiAgdmFyIGtleXMgPSBPYmplY3Qua2V5cyh2YWx1ZSk7XG4gIHZhciB2aXNpYmxlS2V5cyA9IGFycmF5VG9IYXNoKGtleXMpO1xuXG4gIGlmIChjdHguc2hvd0hpZGRlbikge1xuICAgIGtleXMgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlOYW1lcyh2YWx1ZSk7XG4gIH1cblxuICAvLyBJRSBkb2Vzbid0IG1ha2UgZXJyb3IgZmllbGRzIG5vbi1lbnVtZXJhYmxlXG4gIC8vIGh0dHA6Ly9tc2RuLm1pY3Jvc29mdC5jb20vZW4tdXMvbGlicmFyeS9pZS9kd3c1MnNidCh2PXZzLjk0KS5hc3B4XG4gIGlmIChpc0Vycm9yKHZhbHVlKVxuICAgICAgJiYgKGtleXMuaW5kZXhPZignbWVzc2FnZScpID49IDAgfHwga2V5cy5pbmRleE9mKCdkZXNjcmlwdGlvbicpID49IDApKSB7XG4gICAgcmV0dXJuIGZvcm1hdEVycm9yKHZhbHVlKTtcbiAgfVxuXG4gIC8vIFNvbWUgdHlwZSBvZiBvYmplY3Qgd2l0aG91dCBwcm9wZXJ0aWVzIGNhbiBiZSBzaG9ydGN1dHRlZC5cbiAgaWYgKGtleXMubGVuZ3RoID09PSAwKSB7XG4gICAgaWYgKGlzRnVuY3Rpb24odmFsdWUpKSB7XG4gICAgICB2YXIgbmFtZSA9IHZhbHVlLm5hbWUgPyAnOiAnICsgdmFsdWUubmFtZSA6ICcnO1xuICAgICAgcmV0dXJuIGN0eC5zdHlsaXplKCdbRnVuY3Rpb24nICsgbmFtZSArICddJywgJ3NwZWNpYWwnKTtcbiAgICB9XG4gICAgaWYgKGlzUmVnRXhwKHZhbHVlKSkge1xuICAgICAgcmV0dXJuIGN0eC5zdHlsaXplKFJlZ0V4cC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbCh2YWx1ZSksICdyZWdleHAnKTtcbiAgICB9XG4gICAgaWYgKGlzRGF0ZSh2YWx1ZSkpIHtcbiAgICAgIHJldHVybiBjdHguc3R5bGl6ZShEYXRlLnByb3RvdHlwZS50b1N0cmluZy5jYWxsKHZhbHVlKSwgJ2RhdGUnKTtcbiAgICB9XG4gICAgaWYgKGlzRXJyb3IodmFsdWUpKSB7XG4gICAgICByZXR1cm4gZm9ybWF0RXJyb3IodmFsdWUpO1xuICAgIH1cbiAgfVxuXG4gIHZhciBiYXNlID0gJycsIGFycmF5ID0gZmFsc2UsIGJyYWNlcyA9IFsneycsICd9J107XG5cbiAgLy8gTWFrZSBBcnJheSBzYXkgdGhhdCB0aGV5IGFyZSBBcnJheVxuICBpZiAoaXNBcnJheSh2YWx1ZSkpIHtcbiAgICBhcnJheSA9IHRydWU7XG4gICAgYnJhY2VzID0gWydbJywgJ10nXTtcbiAgfVxuXG4gIC8vIE1ha2UgZnVuY3Rpb25zIHNheSB0aGF0IHRoZXkgYXJlIGZ1bmN0aW9uc1xuICBpZiAoaXNGdW5jdGlvbih2YWx1ZSkpIHtcbiAgICB2YXIgbiA9IHZhbHVlLm5hbWUgPyAnOiAnICsgdmFsdWUubmFtZSA6ICcnO1xuICAgIGJhc2UgPSAnIFtGdW5jdGlvbicgKyBuICsgJ10nO1xuICB9XG5cbiAgLy8gTWFrZSBSZWdFeHBzIHNheSB0aGF0IHRoZXkgYXJlIFJlZ0V4cHNcbiAgaWYgKGlzUmVnRXhwKHZhbHVlKSkge1xuICAgIGJhc2UgPSAnICcgKyBSZWdFeHAucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwodmFsdWUpO1xuICB9XG5cbiAgLy8gTWFrZSBkYXRlcyB3aXRoIHByb3BlcnRpZXMgZmlyc3Qgc2F5IHRoZSBkYXRlXG4gIGlmIChpc0RhdGUodmFsdWUpKSB7XG4gICAgYmFzZSA9ICcgJyArIERhdGUucHJvdG90eXBlLnRvVVRDU3RyaW5nLmNhbGwodmFsdWUpO1xuICB9XG5cbiAgLy8gTWFrZSBlcnJvciB3aXRoIG1lc3NhZ2UgZmlyc3Qgc2F5IHRoZSBlcnJvclxuICBpZiAoaXNFcnJvcih2YWx1ZSkpIHtcbiAgICBiYXNlID0gJyAnICsgZm9ybWF0RXJyb3IodmFsdWUpO1xuICB9XG5cbiAgaWYgKGtleXMubGVuZ3RoID09PSAwICYmICghYXJyYXkgfHwgdmFsdWUubGVuZ3RoID09IDApKSB7XG4gICAgcmV0dXJuIGJyYWNlc1swXSArIGJhc2UgKyBicmFjZXNbMV07XG4gIH1cblxuICBpZiAocmVjdXJzZVRpbWVzIDwgMCkge1xuICAgIGlmIChpc1JlZ0V4cCh2YWx1ZSkpIHtcbiAgICAgIHJldHVybiBjdHguc3R5bGl6ZShSZWdFeHAucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwodmFsdWUpLCAncmVnZXhwJyk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiBjdHguc3R5bGl6ZSgnW09iamVjdF0nLCAnc3BlY2lhbCcpO1xuICAgIH1cbiAgfVxuXG4gIGN0eC5zZWVuLnB1c2godmFsdWUpO1xuXG4gIHZhciBvdXRwdXQ7XG4gIGlmIChhcnJheSkge1xuICAgIG91dHB1dCA9IGZvcm1hdEFycmF5KGN0eCwgdmFsdWUsIHJlY3Vyc2VUaW1lcywgdmlzaWJsZUtleXMsIGtleXMpO1xuICB9IGVsc2Uge1xuICAgIG91dHB1dCA9IGtleXMubWFwKGZ1bmN0aW9uKGtleSkge1xuICAgICAgcmV0dXJuIGZvcm1hdFByb3BlcnR5KGN0eCwgdmFsdWUsIHJlY3Vyc2VUaW1lcywgdmlzaWJsZUtleXMsIGtleSwgYXJyYXkpO1xuICAgIH0pO1xuICB9XG5cbiAgY3R4LnNlZW4ucG9wKCk7XG5cbiAgcmV0dXJuIHJlZHVjZVRvU2luZ2xlU3RyaW5nKG91dHB1dCwgYmFzZSwgYnJhY2VzKTtcbn1cblxuXG5mdW5jdGlvbiBmb3JtYXRQcmltaXRpdmUoY3R4LCB2YWx1ZSkge1xuICBpZiAoaXNVbmRlZmluZWQodmFsdWUpKVxuICAgIHJldHVybiBjdHguc3R5bGl6ZSgndW5kZWZpbmVkJywgJ3VuZGVmaW5lZCcpO1xuICBpZiAoaXNTdHJpbmcodmFsdWUpKSB7XG4gICAgdmFyIHNpbXBsZSA9ICdcXCcnICsgSlNPTi5zdHJpbmdpZnkodmFsdWUpLnJlcGxhY2UoL15cInxcIiQvZywgJycpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAucmVwbGFjZSgvJy9nLCBcIlxcXFwnXCIpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAucmVwbGFjZSgvXFxcXFwiL2csICdcIicpICsgJ1xcJyc7XG4gICAgcmV0dXJuIGN0eC5zdHlsaXplKHNpbXBsZSwgJ3N0cmluZycpO1xuICB9XG4gIGlmIChpc051bWJlcih2YWx1ZSkpXG4gICAgcmV0dXJuIGN0eC5zdHlsaXplKCcnICsgdmFsdWUsICdudW1iZXInKTtcbiAgaWYgKGlzQm9vbGVhbih2YWx1ZSkpXG4gICAgcmV0dXJuIGN0eC5zdHlsaXplKCcnICsgdmFsdWUsICdib29sZWFuJyk7XG4gIC8vIEZvciBzb21lIHJlYXNvbiB0eXBlb2YgbnVsbCBpcyBcIm9iamVjdFwiLCBzbyBzcGVjaWFsIGNhc2UgaGVyZS5cbiAgaWYgKGlzTnVsbCh2YWx1ZSkpXG4gICAgcmV0dXJuIGN0eC5zdHlsaXplKCdudWxsJywgJ251bGwnKTtcbn1cblxuXG5mdW5jdGlvbiBmb3JtYXRFcnJvcih2YWx1ZSkge1xuICByZXR1cm4gJ1snICsgRXJyb3IucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwodmFsdWUpICsgJ10nO1xufVxuXG5cbmZ1bmN0aW9uIGZvcm1hdEFycmF5KGN0eCwgdmFsdWUsIHJlY3Vyc2VUaW1lcywgdmlzaWJsZUtleXMsIGtleXMpIHtcbiAgdmFyIG91dHB1dCA9IFtdO1xuICBmb3IgKHZhciBpID0gMCwgbCA9IHZhbHVlLmxlbmd0aDsgaSA8IGw7ICsraSkge1xuICAgIGlmIChoYXNPd25Qcm9wZXJ0eSh2YWx1ZSwgU3RyaW5nKGkpKSkge1xuICAgICAgb3V0cHV0LnB1c2goZm9ybWF0UHJvcGVydHkoY3R4LCB2YWx1ZSwgcmVjdXJzZVRpbWVzLCB2aXNpYmxlS2V5cyxcbiAgICAgICAgICBTdHJpbmcoaSksIHRydWUpKTtcbiAgICB9IGVsc2Uge1xuICAgICAgb3V0cHV0LnB1c2goJycpO1xuICAgIH1cbiAgfVxuICBrZXlzLmZvckVhY2goZnVuY3Rpb24oa2V5KSB7XG4gICAgaWYgKCFrZXkubWF0Y2goL15cXGQrJC8pKSB7XG4gICAgICBvdXRwdXQucHVzaChmb3JtYXRQcm9wZXJ0eShjdHgsIHZhbHVlLCByZWN1cnNlVGltZXMsIHZpc2libGVLZXlzLFxuICAgICAgICAgIGtleSwgdHJ1ZSkpO1xuICAgIH1cbiAgfSk7XG4gIHJldHVybiBvdXRwdXQ7XG59XG5cblxuZnVuY3Rpb24gZm9ybWF0UHJvcGVydHkoY3R4LCB2YWx1ZSwgcmVjdXJzZVRpbWVzLCB2aXNpYmxlS2V5cywga2V5LCBhcnJheSkge1xuICB2YXIgbmFtZSwgc3RyLCBkZXNjO1xuICBkZXNjID0gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcih2YWx1ZSwga2V5KSB8fCB7IHZhbHVlOiB2YWx1ZVtrZXldIH07XG4gIGlmIChkZXNjLmdldCkge1xuICAgIGlmIChkZXNjLnNldCkge1xuICAgICAgc3RyID0gY3R4LnN0eWxpemUoJ1tHZXR0ZXIvU2V0dGVyXScsICdzcGVjaWFsJyk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHN0ciA9IGN0eC5zdHlsaXplKCdbR2V0dGVyXScsICdzcGVjaWFsJyk7XG4gICAgfVxuICB9IGVsc2Uge1xuICAgIGlmIChkZXNjLnNldCkge1xuICAgICAgc3RyID0gY3R4LnN0eWxpemUoJ1tTZXR0ZXJdJywgJ3NwZWNpYWwnKTtcbiAgICB9XG4gIH1cbiAgaWYgKCFoYXNPd25Qcm9wZXJ0eSh2aXNpYmxlS2V5cywga2V5KSkge1xuICAgIG5hbWUgPSAnWycgKyBrZXkgKyAnXSc7XG4gIH1cbiAgaWYgKCFzdHIpIHtcbiAgICBpZiAoY3R4LnNlZW4uaW5kZXhPZihkZXNjLnZhbHVlKSA8IDApIHtcbiAgICAgIGlmIChpc051bGwocmVjdXJzZVRpbWVzKSkge1xuICAgICAgICBzdHIgPSBmb3JtYXRWYWx1ZShjdHgsIGRlc2MudmFsdWUsIG51bGwpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgc3RyID0gZm9ybWF0VmFsdWUoY3R4LCBkZXNjLnZhbHVlLCByZWN1cnNlVGltZXMgLSAxKTtcbiAgICAgIH1cbiAgICAgIGlmIChzdHIuaW5kZXhPZignXFxuJykgPiAtMSkge1xuICAgICAgICBpZiAoYXJyYXkpIHtcbiAgICAgICAgICBzdHIgPSBzdHIuc3BsaXQoJ1xcbicpLm1hcChmdW5jdGlvbihsaW5lKSB7XG4gICAgICAgICAgICByZXR1cm4gJyAgJyArIGxpbmU7XG4gICAgICAgICAgfSkuam9pbignXFxuJykuc3Vic3RyKDIpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHN0ciA9ICdcXG4nICsgc3RyLnNwbGl0KCdcXG4nKS5tYXAoZnVuY3Rpb24obGluZSkge1xuICAgICAgICAgICAgcmV0dXJuICcgICAnICsgbGluZTtcbiAgICAgICAgICB9KS5qb2luKCdcXG4nKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICBzdHIgPSBjdHguc3R5bGl6ZSgnW0NpcmN1bGFyXScsICdzcGVjaWFsJyk7XG4gICAgfVxuICB9XG4gIGlmIChpc1VuZGVmaW5lZChuYW1lKSkge1xuICAgIGlmIChhcnJheSAmJiBrZXkubWF0Y2goL15cXGQrJC8pKSB7XG4gICAgICByZXR1cm4gc3RyO1xuICAgIH1cbiAgICBuYW1lID0gSlNPTi5zdHJpbmdpZnkoJycgKyBrZXkpO1xuICAgIGlmIChuYW1lLm1hdGNoKC9eXCIoW2EtekEtWl9dW2EtekEtWl8wLTldKilcIiQvKSkge1xuICAgICAgbmFtZSA9IG5hbWUuc3Vic3RyKDEsIG5hbWUubGVuZ3RoIC0gMik7XG4gICAgICBuYW1lID0gY3R4LnN0eWxpemUobmFtZSwgJ25hbWUnKTtcbiAgICB9IGVsc2Uge1xuICAgICAgbmFtZSA9IG5hbWUucmVwbGFjZSgvJy9nLCBcIlxcXFwnXCIpXG4gICAgICAgICAgICAgICAgIC5yZXBsYWNlKC9cXFxcXCIvZywgJ1wiJylcbiAgICAgICAgICAgICAgICAgLnJlcGxhY2UoLyheXCJ8XCIkKS9nLCBcIidcIik7XG4gICAgICBuYW1lID0gY3R4LnN0eWxpemUobmFtZSwgJ3N0cmluZycpO1xuICAgIH1cbiAgfVxuXG4gIHJldHVybiBuYW1lICsgJzogJyArIHN0cjtcbn1cblxuXG5mdW5jdGlvbiByZWR1Y2VUb1NpbmdsZVN0cmluZyhvdXRwdXQsIGJhc2UsIGJyYWNlcykge1xuICB2YXIgbnVtTGluZXNFc3QgPSAwO1xuICB2YXIgbGVuZ3RoID0gb3V0cHV0LnJlZHVjZShmdW5jdGlvbihwcmV2LCBjdXIpIHtcbiAgICBudW1MaW5lc0VzdCsrO1xuICAgIGlmIChjdXIuaW5kZXhPZignXFxuJykgPj0gMCkgbnVtTGluZXNFc3QrKztcbiAgICByZXR1cm4gcHJldiArIGN1ci5yZXBsYWNlKC9cXHUwMDFiXFxbXFxkXFxkP20vZywgJycpLmxlbmd0aCArIDE7XG4gIH0sIDApO1xuXG4gIGlmIChsZW5ndGggPiA2MCkge1xuICAgIHJldHVybiBicmFjZXNbMF0gK1xuICAgICAgICAgICAoYmFzZSA9PT0gJycgPyAnJyA6IGJhc2UgKyAnXFxuICcpICtcbiAgICAgICAgICAgJyAnICtcbiAgICAgICAgICAgb3V0cHV0LmpvaW4oJyxcXG4gICcpICtcbiAgICAgICAgICAgJyAnICtcbiAgICAgICAgICAgYnJhY2VzWzFdO1xuICB9XG5cbiAgcmV0dXJuIGJyYWNlc1swXSArIGJhc2UgKyAnICcgKyBvdXRwdXQuam9pbignLCAnKSArICcgJyArIGJyYWNlc1sxXTtcbn1cblxuXG4vLyBOT1RFOiBUaGVzZSB0eXBlIGNoZWNraW5nIGZ1bmN0aW9ucyBpbnRlbnRpb25hbGx5IGRvbid0IHVzZSBgaW5zdGFuY2VvZmBcbi8vIGJlY2F1c2UgaXQgaXMgZnJhZ2lsZSBhbmQgY2FuIGJlIGVhc2lseSBmYWtlZCB3aXRoIGBPYmplY3QuY3JlYXRlKClgLlxuZXhwb3J0IGZ1bmN0aW9uIGlzQXJyYXkoYXIpIHtcbiAgcmV0dXJuIEFycmF5LmlzQXJyYXkoYXIpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gaXNCb29sZWFuKGFyZykge1xuICByZXR1cm4gdHlwZW9mIGFyZyA9PT0gJ2Jvb2xlYW4nO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gaXNOdWxsKGFyZykge1xuICByZXR1cm4gYXJnID09PSBudWxsO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gaXNOdWxsT3JVbmRlZmluZWQoYXJnKSB7XG4gIHJldHVybiBhcmcgPT0gbnVsbDtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGlzTnVtYmVyKGFyZykge1xuICByZXR1cm4gdHlwZW9mIGFyZyA9PT0gJ251bWJlcic7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBpc1N0cmluZyhhcmcpIHtcbiAgcmV0dXJuIHR5cGVvZiBhcmcgPT09ICdzdHJpbmcnO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gaXNTeW1ib2woYXJnKSB7XG4gIHJldHVybiB0eXBlb2YgYXJnID09PSAnc3ltYm9sJztcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGlzVW5kZWZpbmVkKGFyZykge1xuICByZXR1cm4gYXJnID09PSB2b2lkIDA7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBpc1JlZ0V4cChyZSkge1xuICByZXR1cm4gaXNPYmplY3QocmUpICYmIG9iamVjdFRvU3RyaW5nKHJlKSA9PT0gJ1tvYmplY3QgUmVnRXhwXSc7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBpc09iamVjdChhcmcpIHtcbiAgcmV0dXJuIHR5cGVvZiBhcmcgPT09ICdvYmplY3QnICYmIGFyZyAhPT0gbnVsbDtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGlzRGF0ZShkKSB7XG4gIHJldHVybiBpc09iamVjdChkKSAmJiBvYmplY3RUb1N0cmluZyhkKSA9PT0gJ1tvYmplY3QgRGF0ZV0nO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gaXNFcnJvcihlKSB7XG4gIHJldHVybiBpc09iamVjdChlKSAmJlxuICAgICAgKG9iamVjdFRvU3RyaW5nKGUpID09PSAnW29iamVjdCBFcnJvcl0nIHx8IGUgaW5zdGFuY2VvZiBFcnJvcik7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBpc0Z1bmN0aW9uKGFyZykge1xuICByZXR1cm4gdHlwZW9mIGFyZyA9PT0gJ2Z1bmN0aW9uJztcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGlzUHJpbWl0aXZlKGFyZykge1xuICByZXR1cm4gYXJnID09PSBudWxsIHx8XG4gICAgICAgICB0eXBlb2YgYXJnID09PSAnYm9vbGVhbicgfHxcbiAgICAgICAgIHR5cGVvZiBhcmcgPT09ICdudW1iZXInIHx8XG4gICAgICAgICB0eXBlb2YgYXJnID09PSAnc3RyaW5nJyB8fFxuICAgICAgICAgdHlwZW9mIGFyZyA9PT0gJ3N5bWJvbCcgfHwgIC8vIEVTNiBzeW1ib2xcbiAgICAgICAgIHR5cGVvZiBhcmcgPT09ICd1bmRlZmluZWQnO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gaXNCdWZmZXIobWF5YmVCdWYpIHtcbiAgcmV0dXJuIEJ1ZmZlci5pc0J1ZmZlcihtYXliZUJ1Zik7XG59XG5cbmZ1bmN0aW9uIG9iamVjdFRvU3RyaW5nKG8pIHtcbiAgcmV0dXJuIE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChvKTtcbn1cblxuXG5mdW5jdGlvbiBwYWQobikge1xuICByZXR1cm4gbiA8IDEwID8gJzAnICsgbi50b1N0cmluZygxMCkgOiBuLnRvU3RyaW5nKDEwKTtcbn1cblxuXG52YXIgbW9udGhzID0gWydKYW4nLCAnRmViJywgJ01hcicsICdBcHInLCAnTWF5JywgJ0p1bicsICdKdWwnLCAnQXVnJywgJ1NlcCcsXG4gICAgICAgICAgICAgICdPY3QnLCAnTm92JywgJ0RlYyddO1xuXG4vLyAyNiBGZWIgMTY6MTk6MzRcbmZ1bmN0aW9uIHRpbWVzdGFtcCgpIHtcbiAgdmFyIGQgPSBuZXcgRGF0ZSgpO1xuICB2YXIgdGltZSA9IFtwYWQoZC5nZXRIb3VycygpKSxcbiAgICAgICAgICAgICAgcGFkKGQuZ2V0TWludXRlcygpKSxcbiAgICAgICAgICAgICAgcGFkKGQuZ2V0U2Vjb25kcygpKV0uam9pbignOicpO1xuICByZXR1cm4gW2QuZ2V0RGF0ZSgpLCBtb250aHNbZC5nZXRNb250aCgpXSwgdGltZV0uam9pbignICcpO1xufVxuXG5cbi8vIGxvZyBpcyBqdXN0IGEgdGhpbiB3cmFwcGVyIHRvIGNvbnNvbGUubG9nIHRoYXQgcHJlcGVuZHMgYSB0aW1lc3RhbXBcbmV4cG9ydCBmdW5jdGlvbiBsb2coKSB7XG4gIGNvbnNvbGUubG9nKCclcyAtICVzJywgdGltZXN0YW1wKCksIGZvcm1hdC5hcHBseShudWxsLCBhcmd1bWVudHMpKTtcbn1cblxuXG4vKipcbiAqIEluaGVyaXQgdGhlIHByb3RvdHlwZSBtZXRob2RzIGZyb20gb25lIGNvbnN0cnVjdG9yIGludG8gYW5vdGhlci5cbiAqXG4gKiBUaGUgRnVuY3Rpb24ucHJvdG90eXBlLmluaGVyaXRzIGZyb20gbGFuZy5qcyByZXdyaXR0ZW4gYXMgYSBzdGFuZGFsb25lXG4gKiBmdW5jdGlvbiAobm90IG9uIEZ1bmN0aW9uLnByb3RvdHlwZSkuIE5PVEU6IElmIHRoaXMgZmlsZSBpcyB0byBiZSBsb2FkZWRcbiAqIGR1cmluZyBib290c3RyYXBwaW5nIHRoaXMgZnVuY3Rpb24gbmVlZHMgdG8gYmUgcmV3cml0dGVuIHVzaW5nIHNvbWUgbmF0aXZlXG4gKiBmdW5jdGlvbnMgYXMgcHJvdG90eXBlIHNldHVwIHVzaW5nIG5vcm1hbCBKYXZhU2NyaXB0IGRvZXMgbm90IHdvcmsgYXNcbiAqIGV4cGVjdGVkIGR1cmluZyBib290c3RyYXBwaW5nIChzZWUgbWlycm9yLmpzIGluIHIxMTQ5MDMpLlxuICpcbiAqIEBwYXJhbSB7ZnVuY3Rpb259IGN0b3IgQ29uc3RydWN0b3IgZnVuY3Rpb24gd2hpY2ggbmVlZHMgdG8gaW5oZXJpdCB0aGVcbiAqICAgICBwcm90b3R5cGUuXG4gKiBAcGFyYW0ge2Z1bmN0aW9ufSBzdXBlckN0b3IgQ29uc3RydWN0b3IgZnVuY3Rpb24gdG8gaW5oZXJpdCBwcm90b3R5cGUgZnJvbS5cbiAqL1xuaW1wb3J0IGluaGVyaXRzIGZyb20gJy4vaW5oZXJpdHMnO1xuZXhwb3J0IHtpbmhlcml0c31cblxuZXhwb3J0IGZ1bmN0aW9uIF9leHRlbmQob3JpZ2luLCBhZGQpIHtcbiAgLy8gRG9uJ3QgZG8gYW55dGhpbmcgaWYgYWRkIGlzbid0IGFuIG9iamVjdFxuICBpZiAoIWFkZCB8fCAhaXNPYmplY3QoYWRkKSkgcmV0dXJuIG9yaWdpbjtcblxuICB2YXIga2V5cyA9IE9iamVjdC5rZXlzKGFkZCk7XG4gIHZhciBpID0ga2V5cy5sZW5ndGg7XG4gIHdoaWxlIChpLS0pIHtcbiAgICBvcmlnaW5ba2V5c1tpXV0gPSBhZGRba2V5c1tpXV07XG4gIH1cbiAgcmV0dXJuIG9yaWdpbjtcbn07XG5cbmZ1bmN0aW9uIGhhc093blByb3BlcnR5KG9iaiwgcHJvcCkge1xuICByZXR1cm4gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iaiwgcHJvcCk7XG59XG5cbmV4cG9ydCBkZWZhdWx0IHtcbiAgaW5oZXJpdHM6IGluaGVyaXRzLFxuICBfZXh0ZW5kOiBfZXh0ZW5kLFxuICBsb2c6IGxvZyxcbiAgaXNCdWZmZXI6IGlzQnVmZmVyLFxuICBpc1ByaW1pdGl2ZTogaXNQcmltaXRpdmUsXG4gIGlzRnVuY3Rpb246IGlzRnVuY3Rpb24sXG4gIGlzRXJyb3I6IGlzRXJyb3IsXG4gIGlzRGF0ZTogaXNEYXRlLFxuICBpc09iamVjdDogaXNPYmplY3QsXG4gIGlzUmVnRXhwOiBpc1JlZ0V4cCxcbiAgaXNVbmRlZmluZWQ6IGlzVW5kZWZpbmVkLFxuICBpc1N5bWJvbDogaXNTeW1ib2wsXG4gIGlzU3RyaW5nOiBpc1N0cmluZyxcbiAgaXNOdW1iZXI6IGlzTnVtYmVyLFxuICBpc051bGxPclVuZGVmaW5lZDogaXNOdWxsT3JVbmRlZmluZWQsXG4gIGlzTnVsbDogaXNOdWxsLFxuICBpc0Jvb2xlYW46IGlzQm9vbGVhbixcbiAgaXNBcnJheTogaXNBcnJheSxcbiAgaW5zcGVjdDogaW5zcGVjdCxcbiAgZGVwcmVjYXRlOiBkZXByZWNhdGUsXG4gIGZvcm1hdDogZm9ybWF0LFxuICBkZWJ1Z2xvZzogZGVidWdsb2dcbn1cbiIsICJpbXBvcnQge0J1ZmZlcn0gZnJvbSAnYnVmZmVyJztcblxuZXhwb3J0IGRlZmF1bHQgQnVmZmVyTGlzdDtcblxuZnVuY3Rpb24gQnVmZmVyTGlzdCgpIHtcbiAgdGhpcy5oZWFkID0gbnVsbDtcbiAgdGhpcy50YWlsID0gbnVsbDtcbiAgdGhpcy5sZW5ndGggPSAwO1xufVxuXG5CdWZmZXJMaXN0LnByb3RvdHlwZS5wdXNoID0gZnVuY3Rpb24gKHYpIHtcbiAgdmFyIGVudHJ5ID0geyBkYXRhOiB2LCBuZXh0OiBudWxsIH07XG4gIGlmICh0aGlzLmxlbmd0aCA+IDApIHRoaXMudGFpbC5uZXh0ID0gZW50cnk7ZWxzZSB0aGlzLmhlYWQgPSBlbnRyeTtcbiAgdGhpcy50YWlsID0gZW50cnk7XG4gICsrdGhpcy5sZW5ndGg7XG59O1xuXG5CdWZmZXJMaXN0LnByb3RvdHlwZS51bnNoaWZ0ID0gZnVuY3Rpb24gKHYpIHtcbiAgdmFyIGVudHJ5ID0geyBkYXRhOiB2LCBuZXh0OiB0aGlzLmhlYWQgfTtcbiAgaWYgKHRoaXMubGVuZ3RoID09PSAwKSB0aGlzLnRhaWwgPSBlbnRyeTtcbiAgdGhpcy5oZWFkID0gZW50cnk7XG4gICsrdGhpcy5sZW5ndGg7XG59O1xuXG5CdWZmZXJMaXN0LnByb3RvdHlwZS5zaGlmdCA9IGZ1bmN0aW9uICgpIHtcbiAgaWYgKHRoaXMubGVuZ3RoID09PSAwKSByZXR1cm47XG4gIHZhciByZXQgPSB0aGlzLmhlYWQuZGF0YTtcbiAgaWYgKHRoaXMubGVuZ3RoID09PSAxKSB0aGlzLmhlYWQgPSB0aGlzLnRhaWwgPSBudWxsO2Vsc2UgdGhpcy5oZWFkID0gdGhpcy5oZWFkLm5leHQ7XG4gIC0tdGhpcy5sZW5ndGg7XG4gIHJldHVybiByZXQ7XG59O1xuXG5CdWZmZXJMaXN0LnByb3RvdHlwZS5jbGVhciA9IGZ1bmN0aW9uICgpIHtcbiAgdGhpcy5oZWFkID0gdGhpcy50YWlsID0gbnVsbDtcbiAgdGhpcy5sZW5ndGggPSAwO1xufTtcblxuQnVmZmVyTGlzdC5wcm90b3R5cGUuam9pbiA9IGZ1bmN0aW9uIChzKSB7XG4gIGlmICh0aGlzLmxlbmd0aCA9PT0gMCkgcmV0dXJuICcnO1xuICB2YXIgcCA9IHRoaXMuaGVhZDtcbiAgdmFyIHJldCA9ICcnICsgcC5kYXRhO1xuICB3aGlsZSAocCA9IHAubmV4dCkge1xuICAgIHJldCArPSBzICsgcC5kYXRhO1xuICB9cmV0dXJuIHJldDtcbn07XG5cbkJ1ZmZlckxpc3QucHJvdG90eXBlLmNvbmNhdCA9IGZ1bmN0aW9uIChuKSB7XG4gIGlmICh0aGlzLmxlbmd0aCA9PT0gMCkgcmV0dXJuIEJ1ZmZlci5hbGxvYygwKTtcbiAgaWYgKHRoaXMubGVuZ3RoID09PSAxKSByZXR1cm4gdGhpcy5oZWFkLmRhdGE7XG4gIHZhciByZXQgPSBCdWZmZXIuYWxsb2NVbnNhZmUobiA+Pj4gMCk7XG4gIHZhciBwID0gdGhpcy5oZWFkO1xuICB2YXIgaSA9IDA7XG4gIHdoaWxlIChwKSB7XG4gICAgcC5kYXRhLmNvcHkocmV0LCBpKTtcbiAgICBpICs9IHAuZGF0YS5sZW5ndGg7XG4gICAgcCA9IHAubmV4dDtcbiAgfVxuICByZXR1cm4gcmV0O1xufTtcbiIsICIvLyBDb3B5cmlnaHQgSm95ZW50LCBJbmMuIGFuZCBvdGhlciBOb2RlIGNvbnRyaWJ1dG9ycy5cbi8vXG4vLyBQZXJtaXNzaW9uIGlzIGhlcmVieSBncmFudGVkLCBmcmVlIG9mIGNoYXJnZSwgdG8gYW55IHBlcnNvbiBvYnRhaW5pbmcgYVxuLy8gY29weSBvZiB0aGlzIHNvZnR3YXJlIGFuZCBhc3NvY2lhdGVkIGRvY3VtZW50YXRpb24gZmlsZXMgKHRoZVxuLy8gXCJTb2Z0d2FyZVwiKSwgdG8gZGVhbCBpbiB0aGUgU29mdHdhcmUgd2l0aG91dCByZXN0cmljdGlvbiwgaW5jbHVkaW5nXG4vLyB3aXRob3V0IGxpbWl0YXRpb24gdGhlIHJpZ2h0cyB0byB1c2UsIGNvcHksIG1vZGlmeSwgbWVyZ2UsIHB1Ymxpc2gsXG4vLyBkaXN0cmlidXRlLCBzdWJsaWNlbnNlLCBhbmQvb3Igc2VsbCBjb3BpZXMgb2YgdGhlIFNvZnR3YXJlLCBhbmQgdG8gcGVybWl0XG4vLyBwZXJzb25zIHRvIHdob20gdGhlIFNvZnR3YXJlIGlzIGZ1cm5pc2hlZCB0byBkbyBzbywgc3ViamVjdCB0byB0aGVcbi8vIGZvbGxvd2luZyBjb25kaXRpb25zOlxuLy9cbi8vIFRoZSBhYm92ZSBjb3B5cmlnaHQgbm90aWNlIGFuZCB0aGlzIHBlcm1pc3Npb24gbm90aWNlIHNoYWxsIGJlIGluY2x1ZGVkXG4vLyBpbiBhbGwgY29waWVzIG9yIHN1YnN0YW50aWFsIHBvcnRpb25zIG9mIHRoZSBTb2Z0d2FyZS5cbi8vXG4vLyBUSEUgU09GVFdBUkUgSVMgUFJPVklERUQgXCJBUyBJU1wiLCBXSVRIT1VUIFdBUlJBTlRZIE9GIEFOWSBLSU5ELCBFWFBSRVNTXG4vLyBPUiBJTVBMSUVELCBJTkNMVURJTkcgQlVUIE5PVCBMSU1JVEVEIFRPIFRIRSBXQVJSQU5USUVTIE9GXG4vLyBNRVJDSEFOVEFCSUxJVFksIEZJVE5FU1MgRk9SIEEgUEFSVElDVUxBUiBQVVJQT1NFIEFORCBOT05JTkZSSU5HRU1FTlQuIElOXG4vLyBOTyBFVkVOVCBTSEFMTCBUSEUgQVVUSE9SUyBPUiBDT1BZUklHSFQgSE9MREVSUyBCRSBMSUFCTEUgRk9SIEFOWSBDTEFJTSxcbi8vIERBTUFHRVMgT1IgT1RIRVIgTElBQklMSVRZLCBXSEVUSEVSIElOIEFOIEFDVElPTiBPRiBDT05UUkFDVCwgVE9SVCBPUlxuLy8gT1RIRVJXSVNFLCBBUklTSU5HIEZST00sIE9VVCBPRiBPUiBJTiBDT05ORUNUSU9OIFdJVEggVEhFIFNPRlRXQVJFIE9SIFRIRVxuLy8gVVNFIE9SIE9USEVSIERFQUxJTkdTIElOIFRIRSBTT0ZUV0FSRS5cblxuaW1wb3J0IHtCdWZmZXJ9IGZyb20gJ2J1ZmZlcic7XG52YXIgaXNCdWZmZXJFbmNvZGluZyA9IEJ1ZmZlci5pc0VuY29kaW5nXG4gIHx8IGZ1bmN0aW9uKGVuY29kaW5nKSB7XG4gICAgICAgc3dpdGNoIChlbmNvZGluZyAmJiBlbmNvZGluZy50b0xvd2VyQ2FzZSgpKSB7XG4gICAgICAgICBjYXNlICdoZXgnOiBjYXNlICd1dGY4JzogY2FzZSAndXRmLTgnOiBjYXNlICdhc2NpaSc6IGNhc2UgJ2JpbmFyeSc6IGNhc2UgJ2Jhc2U2NCc6IGNhc2UgJ3VjczInOiBjYXNlICd1Y3MtMic6IGNhc2UgJ3V0ZjE2bGUnOiBjYXNlICd1dGYtMTZsZSc6IGNhc2UgJ3Jhdyc6IHJldHVybiB0cnVlO1xuICAgICAgICAgZGVmYXVsdDogcmV0dXJuIGZhbHNlO1xuICAgICAgIH1cbiAgICAgfVxuXG5cbmZ1bmN0aW9uIGFzc2VydEVuY29kaW5nKGVuY29kaW5nKSB7XG4gIGlmIChlbmNvZGluZyAmJiAhaXNCdWZmZXJFbmNvZGluZyhlbmNvZGluZykpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ1Vua25vd24gZW5jb2Rpbmc6ICcgKyBlbmNvZGluZyk7XG4gIH1cbn1cblxuLy8gU3RyaW5nRGVjb2RlciBwcm92aWRlcyBhbiBpbnRlcmZhY2UgZm9yIGVmZmljaWVudGx5IHNwbGl0dGluZyBhIHNlcmllcyBvZlxuLy8gYnVmZmVycyBpbnRvIGEgc2VyaWVzIG9mIEpTIHN0cmluZ3Mgd2l0aG91dCBicmVha2luZyBhcGFydCBtdWx0aS1ieXRlXG4vLyBjaGFyYWN0ZXJzLiBDRVNVLTggaXMgaGFuZGxlZCBhcyBwYXJ0IG9mIHRoZSBVVEYtOCBlbmNvZGluZy5cbi8vXG4vLyBAVE9ETyBIYW5kbGluZyBhbGwgZW5jb2RpbmdzIGluc2lkZSBhIHNpbmdsZSBvYmplY3QgbWFrZXMgaXQgdmVyeSBkaWZmaWN1bHRcbi8vIHRvIHJlYXNvbiBhYm91dCB0aGlzIGNvZGUsIHNvIGl0IHNob3VsZCBiZSBzcGxpdCB1cCBpbiB0aGUgZnV0dXJlLlxuLy8gQFRPRE8gVGhlcmUgc2hvdWxkIGJlIGEgdXRmOC1zdHJpY3QgZW5jb2RpbmcgdGhhdCByZWplY3RzIGludmFsaWQgVVRGLTggY29kZVxuLy8gcG9pbnRzIGFzIHVzZWQgYnkgQ0VTVS04LlxuZXhwb3J0IGZ1bmN0aW9uIFN0cmluZ0RlY29kZXIoZW5jb2RpbmcpIHtcbiAgdGhpcy5lbmNvZGluZyA9IChlbmNvZGluZyB8fCAndXRmOCcpLnRvTG93ZXJDYXNlKCkucmVwbGFjZSgvWy1fXS8sICcnKTtcbiAgYXNzZXJ0RW5jb2RpbmcoZW5jb2RpbmcpO1xuICBzd2l0Y2ggKHRoaXMuZW5jb2RpbmcpIHtcbiAgICBjYXNlICd1dGY4JzpcbiAgICAgIC8vIENFU1UtOCByZXByZXNlbnRzIGVhY2ggb2YgU3Vycm9nYXRlIFBhaXIgYnkgMy1ieXRlc1xuICAgICAgdGhpcy5zdXJyb2dhdGVTaXplID0gMztcbiAgICAgIGJyZWFrO1xuICAgIGNhc2UgJ3VjczInOlxuICAgIGNhc2UgJ3V0ZjE2bGUnOlxuICAgICAgLy8gVVRGLTE2IHJlcHJlc2VudHMgZWFjaCBvZiBTdXJyb2dhdGUgUGFpciBieSAyLWJ5dGVzXG4gICAgICB0aGlzLnN1cnJvZ2F0ZVNpemUgPSAyO1xuICAgICAgdGhpcy5kZXRlY3RJbmNvbXBsZXRlQ2hhciA9IHV0ZjE2RGV0ZWN0SW5jb21wbGV0ZUNoYXI7XG4gICAgICBicmVhaztcbiAgICBjYXNlICdiYXNlNjQnOlxuICAgICAgLy8gQmFzZS02NCBzdG9yZXMgMyBieXRlcyBpbiA0IGNoYXJzLCBhbmQgcGFkcyB0aGUgcmVtYWluZGVyLlxuICAgICAgdGhpcy5zdXJyb2dhdGVTaXplID0gMztcbiAgICAgIHRoaXMuZGV0ZWN0SW5jb21wbGV0ZUNoYXIgPSBiYXNlNjREZXRlY3RJbmNvbXBsZXRlQ2hhcjtcbiAgICAgIGJyZWFrO1xuICAgIGRlZmF1bHQ6XG4gICAgICB0aGlzLndyaXRlID0gcGFzc1Rocm91Z2hXcml0ZTtcbiAgICAgIHJldHVybjtcbiAgfVxuXG4gIC8vIEVub3VnaCBzcGFjZSB0byBzdG9yZSBhbGwgYnl0ZXMgb2YgYSBzaW5nbGUgY2hhcmFjdGVyLiBVVEYtOCBuZWVkcyA0XG4gIC8vIGJ5dGVzLCBidXQgQ0VTVS04IG1heSByZXF1aXJlIHVwIHRvIDYgKDMgYnl0ZXMgcGVyIHN1cnJvZ2F0ZSkuXG4gIHRoaXMuY2hhckJ1ZmZlciA9IG5ldyBCdWZmZXIoNik7XG4gIC8vIE51bWJlciBvZiBieXRlcyByZWNlaXZlZCBmb3IgdGhlIGN1cnJlbnQgaW5jb21wbGV0ZSBtdWx0aS1ieXRlIGNoYXJhY3Rlci5cbiAgdGhpcy5jaGFyUmVjZWl2ZWQgPSAwO1xuICAvLyBOdW1iZXIgb2YgYnl0ZXMgZXhwZWN0ZWQgZm9yIHRoZSBjdXJyZW50IGluY29tcGxldGUgbXVsdGktYnl0ZSBjaGFyYWN0ZXIuXG4gIHRoaXMuY2hhckxlbmd0aCA9IDA7XG59O1xuXG5cbi8vIHdyaXRlIGRlY29kZXMgdGhlIGdpdmVuIGJ1ZmZlciBhbmQgcmV0dXJucyBpdCBhcyBKUyBzdHJpbmcgdGhhdCBpc1xuLy8gZ3VhcmFudGVlZCB0byBub3QgY29udGFpbiBhbnkgcGFydGlhbCBtdWx0aS1ieXRlIGNoYXJhY3RlcnMuIEFueSBwYXJ0aWFsXG4vLyBjaGFyYWN0ZXIgZm91bmQgYXQgdGhlIGVuZCBvZiB0aGUgYnVmZmVyIGlzIGJ1ZmZlcmVkIHVwLCBhbmQgd2lsbCBiZVxuLy8gcmV0dXJuZWQgd2hlbiBjYWxsaW5nIHdyaXRlIGFnYWluIHdpdGggdGhlIHJlbWFpbmluZyBieXRlcy5cbi8vXG4vLyBOb3RlOiBDb252ZXJ0aW5nIGEgQnVmZmVyIGNvbnRhaW5pbmcgYW4gb3JwaGFuIHN1cnJvZ2F0ZSB0byBhIFN0cmluZ1xuLy8gY3VycmVudGx5IHdvcmtzLCBidXQgY29udmVydGluZyBhIFN0cmluZyB0byBhIEJ1ZmZlciAodmlhIGBuZXcgQnVmZmVyYCwgb3Jcbi8vIEJ1ZmZlciN3cml0ZSkgd2lsbCByZXBsYWNlIGluY29tcGxldGUgc3Vycm9nYXRlcyB3aXRoIHRoZSB1bmljb2RlXG4vLyByZXBsYWNlbWVudCBjaGFyYWN0ZXIuIFNlZSBodHRwczovL2NvZGVyZXZpZXcuY2hyb21pdW0ub3JnLzEyMTE3MzAwOS8gLlxuU3RyaW5nRGVjb2Rlci5wcm90b3R5cGUud3JpdGUgPSBmdW5jdGlvbihidWZmZXIpIHtcbiAgdmFyIGNoYXJTdHIgPSAnJztcbiAgLy8gaWYgb3VyIGxhc3Qgd3JpdGUgZW5kZWQgd2l0aCBhbiBpbmNvbXBsZXRlIG11bHRpYnl0ZSBjaGFyYWN0ZXJcbiAgd2hpbGUgKHRoaXMuY2hhckxlbmd0aCkge1xuICAgIC8vIGRldGVybWluZSBob3cgbWFueSByZW1haW5pbmcgYnl0ZXMgdGhpcyBidWZmZXIgaGFzIHRvIG9mZmVyIGZvciB0aGlzIGNoYXJcbiAgICB2YXIgYXZhaWxhYmxlID0gKGJ1ZmZlci5sZW5ndGggPj0gdGhpcy5jaGFyTGVuZ3RoIC0gdGhpcy5jaGFyUmVjZWl2ZWQpID9cbiAgICAgICAgdGhpcy5jaGFyTGVuZ3RoIC0gdGhpcy5jaGFyUmVjZWl2ZWQgOlxuICAgICAgICBidWZmZXIubGVuZ3RoO1xuXG4gICAgLy8gYWRkIHRoZSBuZXcgYnl0ZXMgdG8gdGhlIGNoYXIgYnVmZmVyXG4gICAgYnVmZmVyLmNvcHkodGhpcy5jaGFyQnVmZmVyLCB0aGlzLmNoYXJSZWNlaXZlZCwgMCwgYXZhaWxhYmxlKTtcbiAgICB0aGlzLmNoYXJSZWNlaXZlZCArPSBhdmFpbGFibGU7XG5cbiAgICBpZiAodGhpcy5jaGFyUmVjZWl2ZWQgPCB0aGlzLmNoYXJMZW5ndGgpIHtcbiAgICAgIC8vIHN0aWxsIG5vdCBlbm91Z2ggY2hhcnMgaW4gdGhpcyBidWZmZXI/IHdhaXQgZm9yIG1vcmUgLi4uXG4gICAgICByZXR1cm4gJyc7XG4gICAgfVxuXG4gICAgLy8gcmVtb3ZlIGJ5dGVzIGJlbG9uZ2luZyB0byB0aGUgY3VycmVudCBjaGFyYWN0ZXIgZnJvbSB0aGUgYnVmZmVyXG4gICAgYnVmZmVyID0gYnVmZmVyLnNsaWNlKGF2YWlsYWJsZSwgYnVmZmVyLmxlbmd0aCk7XG5cbiAgICAvLyBnZXQgdGhlIGNoYXJhY3RlciB0aGF0IHdhcyBzcGxpdFxuICAgIGNoYXJTdHIgPSB0aGlzLmNoYXJCdWZmZXIuc2xpY2UoMCwgdGhpcy5jaGFyTGVuZ3RoKS50b1N0cmluZyh0aGlzLmVuY29kaW5nKTtcblxuICAgIC8vIENFU1UtODogbGVhZCBzdXJyb2dhdGUgKEQ4MDAtREJGRikgaXMgYWxzbyB0aGUgaW5jb21wbGV0ZSBjaGFyYWN0ZXJcbiAgICB2YXIgY2hhckNvZGUgPSBjaGFyU3RyLmNoYXJDb2RlQXQoY2hhclN0ci5sZW5ndGggLSAxKTtcbiAgICBpZiAoY2hhckNvZGUgPj0gMHhEODAwICYmIGNoYXJDb2RlIDw9IDB4REJGRikge1xuICAgICAgdGhpcy5jaGFyTGVuZ3RoICs9IHRoaXMuc3Vycm9nYXRlU2l6ZTtcbiAgICAgIGNoYXJTdHIgPSAnJztcbiAgICAgIGNvbnRpbnVlO1xuICAgIH1cbiAgICB0aGlzLmNoYXJSZWNlaXZlZCA9IHRoaXMuY2hhckxlbmd0aCA9IDA7XG5cbiAgICAvLyBpZiB0aGVyZSBhcmUgbm8gbW9yZSBieXRlcyBpbiB0aGlzIGJ1ZmZlciwganVzdCBlbWl0IG91ciBjaGFyXG4gICAgaWYgKGJ1ZmZlci5sZW5ndGggPT09IDApIHtcbiAgICAgIHJldHVybiBjaGFyU3RyO1xuICAgIH1cbiAgICBicmVhaztcbiAgfVxuXG4gIC8vIGRldGVybWluZSBhbmQgc2V0IGNoYXJMZW5ndGggLyBjaGFyUmVjZWl2ZWRcbiAgdGhpcy5kZXRlY3RJbmNvbXBsZXRlQ2hhcihidWZmZXIpO1xuXG4gIHZhciBlbmQgPSBidWZmZXIubGVuZ3RoO1xuICBpZiAodGhpcy5jaGFyTGVuZ3RoKSB7XG4gICAgLy8gYnVmZmVyIHRoZSBpbmNvbXBsZXRlIGNoYXJhY3RlciBieXRlcyB3ZSBnb3RcbiAgICBidWZmZXIuY29weSh0aGlzLmNoYXJCdWZmZXIsIDAsIGJ1ZmZlci5sZW5ndGggLSB0aGlzLmNoYXJSZWNlaXZlZCwgZW5kKTtcbiAgICBlbmQgLT0gdGhpcy5jaGFyUmVjZWl2ZWQ7XG4gIH1cblxuICBjaGFyU3RyICs9IGJ1ZmZlci50b1N0cmluZyh0aGlzLmVuY29kaW5nLCAwLCBlbmQpO1xuXG4gIHZhciBlbmQgPSBjaGFyU3RyLmxlbmd0aCAtIDE7XG4gIHZhciBjaGFyQ29kZSA9IGNoYXJTdHIuY2hhckNvZGVBdChlbmQpO1xuICAvLyBDRVNVLTg6IGxlYWQgc3Vycm9nYXRlIChEODAwLURCRkYpIGlzIGFsc28gdGhlIGluY29tcGxldGUgY2hhcmFjdGVyXG4gIGlmIChjaGFyQ29kZSA+PSAweEQ4MDAgJiYgY2hhckNvZGUgPD0gMHhEQkZGKSB7XG4gICAgdmFyIHNpemUgPSB0aGlzLnN1cnJvZ2F0ZVNpemU7XG4gICAgdGhpcy5jaGFyTGVuZ3RoICs9IHNpemU7XG4gICAgdGhpcy5jaGFyUmVjZWl2ZWQgKz0gc2l6ZTtcbiAgICB0aGlzLmNoYXJCdWZmZXIuY29weSh0aGlzLmNoYXJCdWZmZXIsIHNpemUsIDAsIHNpemUpO1xuICAgIGJ1ZmZlci5jb3B5KHRoaXMuY2hhckJ1ZmZlciwgMCwgMCwgc2l6ZSk7XG4gICAgcmV0dXJuIGNoYXJTdHIuc3Vic3RyaW5nKDAsIGVuZCk7XG4gIH1cblxuICAvLyBvciBqdXN0IGVtaXQgdGhlIGNoYXJTdHJcbiAgcmV0dXJuIGNoYXJTdHI7XG59O1xuXG4vLyBkZXRlY3RJbmNvbXBsZXRlQ2hhciBkZXRlcm1pbmVzIGlmIHRoZXJlIGlzIGFuIGluY29tcGxldGUgVVRGLTggY2hhcmFjdGVyIGF0XG4vLyB0aGUgZW5kIG9mIHRoZSBnaXZlbiBidWZmZXIuIElmIHNvLCBpdCBzZXRzIHRoaXMuY2hhckxlbmd0aCB0byB0aGUgYnl0ZVxuLy8gbGVuZ3RoIHRoYXQgY2hhcmFjdGVyLCBhbmQgc2V0cyB0aGlzLmNoYXJSZWNlaXZlZCB0byB0aGUgbnVtYmVyIG9mIGJ5dGVzXG4vLyB0aGF0IGFyZSBhdmFpbGFibGUgZm9yIHRoaXMgY2hhcmFjdGVyLlxuU3RyaW5nRGVjb2Rlci5wcm90b3R5cGUuZGV0ZWN0SW5jb21wbGV0ZUNoYXIgPSBmdW5jdGlvbihidWZmZXIpIHtcbiAgLy8gZGV0ZXJtaW5lIGhvdyBtYW55IGJ5dGVzIHdlIGhhdmUgdG8gY2hlY2sgYXQgdGhlIGVuZCBvZiB0aGlzIGJ1ZmZlclxuICB2YXIgaSA9IChidWZmZXIubGVuZ3RoID49IDMpID8gMyA6IGJ1ZmZlci5sZW5ndGg7XG5cbiAgLy8gRmlndXJlIG91dCBpZiBvbmUgb2YgdGhlIGxhc3QgaSBieXRlcyBvZiBvdXIgYnVmZmVyIGFubm91bmNlcyBhblxuICAvLyBpbmNvbXBsZXRlIGNoYXIuXG4gIGZvciAoOyBpID4gMDsgaS0tKSB7XG4gICAgdmFyIGMgPSBidWZmZXJbYnVmZmVyLmxlbmd0aCAtIGldO1xuXG4gICAgLy8gU2VlIGh0dHA6Ly9lbi53aWtpcGVkaWEub3JnL3dpa2kvVVRGLTgjRGVzY3JpcHRpb25cblxuICAgIC8vIDExMFhYWFhYXG4gICAgaWYgKGkgPT0gMSAmJiBjID4+IDUgPT0gMHgwNikge1xuICAgICAgdGhpcy5jaGFyTGVuZ3RoID0gMjtcbiAgICAgIGJyZWFrO1xuICAgIH1cblxuICAgIC8vIDExMTBYWFhYXG4gICAgaWYgKGkgPD0gMiAmJiBjID4+IDQgPT0gMHgwRSkge1xuICAgICAgdGhpcy5jaGFyTGVuZ3RoID0gMztcbiAgICAgIGJyZWFrO1xuICAgIH1cblxuICAgIC8vIDExMTEwWFhYXG4gICAgaWYgKGkgPD0gMyAmJiBjID4+IDMgPT0gMHgxRSkge1xuICAgICAgdGhpcy5jaGFyTGVuZ3RoID0gNDtcbiAgICAgIGJyZWFrO1xuICAgIH1cbiAgfVxuICB0aGlzLmNoYXJSZWNlaXZlZCA9IGk7XG59O1xuXG5TdHJpbmdEZWNvZGVyLnByb3RvdHlwZS5lbmQgPSBmdW5jdGlvbihidWZmZXIpIHtcbiAgdmFyIHJlcyA9ICcnO1xuICBpZiAoYnVmZmVyICYmIGJ1ZmZlci5sZW5ndGgpXG4gICAgcmVzID0gdGhpcy53cml0ZShidWZmZXIpO1xuXG4gIGlmICh0aGlzLmNoYXJSZWNlaXZlZCkge1xuICAgIHZhciBjciA9IHRoaXMuY2hhclJlY2VpdmVkO1xuICAgIHZhciBidWYgPSB0aGlzLmNoYXJCdWZmZXI7XG4gICAgdmFyIGVuYyA9IHRoaXMuZW5jb2Rpbmc7XG4gICAgcmVzICs9IGJ1Zi5zbGljZSgwLCBjcikudG9TdHJpbmcoZW5jKTtcbiAgfVxuXG4gIHJldHVybiByZXM7XG59O1xuXG5mdW5jdGlvbiBwYXNzVGhyb3VnaFdyaXRlKGJ1ZmZlcikge1xuICByZXR1cm4gYnVmZmVyLnRvU3RyaW5nKHRoaXMuZW5jb2RpbmcpO1xufVxuXG5mdW5jdGlvbiB1dGYxNkRldGVjdEluY29tcGxldGVDaGFyKGJ1ZmZlcikge1xuICB0aGlzLmNoYXJSZWNlaXZlZCA9IGJ1ZmZlci5sZW5ndGggJSAyO1xuICB0aGlzLmNoYXJMZW5ndGggPSB0aGlzLmNoYXJSZWNlaXZlZCA/IDIgOiAwO1xufVxuXG5mdW5jdGlvbiBiYXNlNjREZXRlY3RJbmNvbXBsZXRlQ2hhcihidWZmZXIpIHtcbiAgdGhpcy5jaGFyUmVjZWl2ZWQgPSBidWZmZXIubGVuZ3RoICUgMztcbiAgdGhpcy5jaGFyTGVuZ3RoID0gdGhpcy5jaGFyUmVjZWl2ZWQgPyAzIDogMDtcbn1cbiIsICIndXNlIHN0cmljdCc7XG5cblxuUmVhZGFibGUuUmVhZGFibGVTdGF0ZSA9IFJlYWRhYmxlU3RhdGU7XG5pbXBvcnQgRXZlbnRFbWl0dGVyIGZyb20gJ2V2ZW50cyc7XG5pbXBvcnQge2luaGVyaXRzLCBkZWJ1Z2xvZ30gZnJvbSAndXRpbCc7XG5pbXBvcnQgQnVmZmVyTGlzdCBmcm9tICcuL2J1ZmZlci1saXN0JztcbmltcG9ydCB7U3RyaW5nRGVjb2Rlcn0gZnJvbSAnc3RyaW5nX2RlY29kZXInO1xuaW1wb3J0IHtEdXBsZXh9IGZyb20gJy4vZHVwbGV4JztcbmltcG9ydCB7bmV4dFRpY2t9IGZyb20gJ3Byb2Nlc3MnO1xuXG52YXIgZGVidWcgPSBkZWJ1Z2xvZygnc3RyZWFtJyk7XG5pbmhlcml0cyhSZWFkYWJsZSwgRXZlbnRFbWl0dGVyKTtcblxuZnVuY3Rpb24gcHJlcGVuZExpc3RlbmVyKGVtaXR0ZXIsIGV2ZW50LCBmbikge1xuICAvLyBTYWRseSB0aGlzIGlzIG5vdCBjYWNoZWFibGUgYXMgc29tZSBsaWJyYXJpZXMgYnVuZGxlIHRoZWlyIG93blxuICAvLyBldmVudCBlbWl0dGVyIGltcGxlbWVudGF0aW9uIHdpdGggdGhlbS5cbiAgaWYgKHR5cGVvZiBlbWl0dGVyLnByZXBlbmRMaXN0ZW5lciA9PT0gJ2Z1bmN0aW9uJykge1xuICAgIHJldHVybiBlbWl0dGVyLnByZXBlbmRMaXN0ZW5lcihldmVudCwgZm4pO1xuICB9IGVsc2Uge1xuICAgIC8vIFRoaXMgaXMgYSBoYWNrIHRvIG1ha2Ugc3VyZSB0aGF0IG91ciBlcnJvciBoYW5kbGVyIGlzIGF0dGFjaGVkIGJlZm9yZSBhbnlcbiAgICAvLyB1c2VybGFuZCBvbmVzLiAgTkVWRVIgRE8gVEhJUy4gVGhpcyBpcyBoZXJlIG9ubHkgYmVjYXVzZSB0aGlzIGNvZGUgbmVlZHNcbiAgICAvLyB0byBjb250aW51ZSB0byB3b3JrIHdpdGggb2xkZXIgdmVyc2lvbnMgb2YgTm9kZS5qcyB0aGF0IGRvIG5vdCBpbmNsdWRlXG4gICAgLy8gdGhlIHByZXBlbmRMaXN0ZW5lcigpIG1ldGhvZC4gVGhlIGdvYWwgaXMgdG8gZXZlbnR1YWxseSByZW1vdmUgdGhpcyBoYWNrLlxuICAgIGlmICghZW1pdHRlci5fZXZlbnRzIHx8ICFlbWl0dGVyLl9ldmVudHNbZXZlbnRdKVxuICAgICAgZW1pdHRlci5vbihldmVudCwgZm4pO1xuICAgIGVsc2UgaWYgKEFycmF5LmlzQXJyYXkoZW1pdHRlci5fZXZlbnRzW2V2ZW50XSkpXG4gICAgICBlbWl0dGVyLl9ldmVudHNbZXZlbnRdLnVuc2hpZnQoZm4pO1xuICAgIGVsc2VcbiAgICAgIGVtaXR0ZXIuX2V2ZW50c1tldmVudF0gPSBbZm4sIGVtaXR0ZXIuX2V2ZW50c1tldmVudF1dO1xuICB9XG59XG5mdW5jdGlvbiBsaXN0ZW5lckNvdW50IChlbWl0dGVyLCB0eXBlKSB7XG4gIHJldHVybiBlbWl0dGVyLmxpc3RlbmVycyh0eXBlKS5sZW5ndGg7XG59XG5mdW5jdGlvbiBSZWFkYWJsZVN0YXRlKG9wdGlvbnMsIHN0cmVhbSkge1xuXG4gIG9wdGlvbnMgPSBvcHRpb25zIHx8IHt9O1xuXG4gIC8vIG9iamVjdCBzdHJlYW0gZmxhZy4gVXNlZCB0byBtYWtlIHJlYWQobikgaWdub3JlIG4gYW5kIHRvXG4gIC8vIG1ha2UgYWxsIHRoZSBidWZmZXIgbWVyZ2luZyBhbmQgbGVuZ3RoIGNoZWNrcyBnbyBhd2F5XG4gIHRoaXMub2JqZWN0TW9kZSA9ICEhb3B0aW9ucy5vYmplY3RNb2RlO1xuXG4gIGlmIChzdHJlYW0gaW5zdGFuY2VvZiBEdXBsZXgpIHRoaXMub2JqZWN0TW9kZSA9IHRoaXMub2JqZWN0TW9kZSB8fCAhIW9wdGlvbnMucmVhZGFibGVPYmplY3RNb2RlO1xuXG4gIC8vIHRoZSBwb2ludCBhdCB3aGljaCBpdCBzdG9wcyBjYWxsaW5nIF9yZWFkKCkgdG8gZmlsbCB0aGUgYnVmZmVyXG4gIC8vIE5vdGU6IDAgaXMgYSB2YWxpZCB2YWx1ZSwgbWVhbnMgXCJkb24ndCBjYWxsIF9yZWFkIHByZWVtcHRpdmVseSBldmVyXCJcbiAgdmFyIGh3bSA9IG9wdGlvbnMuaGlnaFdhdGVyTWFyaztcbiAgdmFyIGRlZmF1bHRId20gPSB0aGlzLm9iamVjdE1vZGUgPyAxNiA6IDE2ICogMTAyNDtcbiAgdGhpcy5oaWdoV2F0ZXJNYXJrID0gaHdtIHx8IGh3bSA9PT0gMCA/IGh3bSA6IGRlZmF1bHRId207XG5cbiAgLy8gY2FzdCB0byBpbnRzLlxuICB0aGlzLmhpZ2hXYXRlck1hcmsgPSB+IH50aGlzLmhpZ2hXYXRlck1hcms7XG5cbiAgLy8gQSBsaW5rZWQgbGlzdCBpcyB1c2VkIHRvIHN0b3JlIGRhdGEgY2h1bmtzIGluc3RlYWQgb2YgYW4gYXJyYXkgYmVjYXVzZSB0aGVcbiAgLy8gbGlua2VkIGxpc3QgY2FuIHJlbW92ZSBlbGVtZW50cyBmcm9tIHRoZSBiZWdpbm5pbmcgZmFzdGVyIHRoYW5cbiAgLy8gYXJyYXkuc2hpZnQoKVxuICB0aGlzLmJ1ZmZlciA9IG5ldyBCdWZmZXJMaXN0KCk7XG4gIHRoaXMubGVuZ3RoID0gMDtcbiAgdGhpcy5waXBlcyA9IG51bGw7XG4gIHRoaXMucGlwZXNDb3VudCA9IDA7XG4gIHRoaXMuZmxvd2luZyA9IG51bGw7XG4gIHRoaXMuZW5kZWQgPSBmYWxzZTtcbiAgdGhpcy5lbmRFbWl0dGVkID0gZmFsc2U7XG4gIHRoaXMucmVhZGluZyA9IGZhbHNlO1xuXG4gIC8vIGEgZmxhZyB0byBiZSBhYmxlIHRvIHRlbGwgaWYgdGhlIG9ud3JpdGUgY2IgaXMgY2FsbGVkIGltbWVkaWF0ZWx5LFxuICAvLyBvciBvbiBhIGxhdGVyIHRpY2suICBXZSBzZXQgdGhpcyB0byB0cnVlIGF0IGZpcnN0LCBiZWNhdXNlIGFueVxuICAvLyBhY3Rpb25zIHRoYXQgc2hvdWxkbid0IGhhcHBlbiB1bnRpbCBcImxhdGVyXCIgc2hvdWxkIGdlbmVyYWxseSBhbHNvXG4gIC8vIG5vdCBoYXBwZW4gYmVmb3JlIHRoZSBmaXJzdCB3cml0ZSBjYWxsLlxuICB0aGlzLnN5bmMgPSB0cnVlO1xuXG4gIC8vIHdoZW5ldmVyIHdlIHJldHVybiBudWxsLCB0aGVuIHdlIHNldCBhIGZsYWcgdG8gc2F5XG4gIC8vIHRoYXQgd2UncmUgYXdhaXRpbmcgYSAncmVhZGFibGUnIGV2ZW50IGVtaXNzaW9uLlxuICB0aGlzLm5lZWRSZWFkYWJsZSA9IGZhbHNlO1xuICB0aGlzLmVtaXR0ZWRSZWFkYWJsZSA9IGZhbHNlO1xuICB0aGlzLnJlYWRhYmxlTGlzdGVuaW5nID0gZmFsc2U7XG4gIHRoaXMucmVzdW1lU2NoZWR1bGVkID0gZmFsc2U7XG5cbiAgLy8gQ3J5cHRvIGlzIGtpbmQgb2Ygb2xkIGFuZCBjcnVzdHkuICBIaXN0b3JpY2FsbHksIGl0cyBkZWZhdWx0IHN0cmluZ1xuICAvLyBlbmNvZGluZyBpcyAnYmluYXJ5JyBzbyB3ZSBoYXZlIHRvIG1ha2UgdGhpcyBjb25maWd1cmFibGUuXG4gIC8vIEV2ZXJ5dGhpbmcgZWxzZSBpbiB0aGUgdW5pdmVyc2UgdXNlcyAndXRmOCcsIHRob3VnaC5cbiAgdGhpcy5kZWZhdWx0RW5jb2RpbmcgPSBvcHRpb25zLmRlZmF1bHRFbmNvZGluZyB8fCAndXRmOCc7XG5cbiAgLy8gd2hlbiBwaXBpbmcsIHdlIG9ubHkgY2FyZSBhYm91dCAncmVhZGFibGUnIGV2ZW50cyB0aGF0IGhhcHBlblxuICAvLyBhZnRlciByZWFkKClpbmcgYWxsIHRoZSBieXRlcyBhbmQgbm90IGdldHRpbmcgYW55IHB1c2hiYWNrLlxuICB0aGlzLnJhbk91dCA9IGZhbHNlO1xuXG4gIC8vIHRoZSBudW1iZXIgb2Ygd3JpdGVycyB0aGF0IGFyZSBhd2FpdGluZyBhIGRyYWluIGV2ZW50IGluIC5waXBlKClzXG4gIHRoaXMuYXdhaXREcmFpbiA9IDA7XG5cbiAgLy8gaWYgdHJ1ZSwgYSBtYXliZVJlYWRNb3JlIGhhcyBiZWVuIHNjaGVkdWxlZFxuICB0aGlzLnJlYWRpbmdNb3JlID0gZmFsc2U7XG5cbiAgdGhpcy5kZWNvZGVyID0gbnVsbDtcbiAgdGhpcy5lbmNvZGluZyA9IG51bGw7XG4gIGlmIChvcHRpb25zLmVuY29kaW5nKSB7XG4gICAgdGhpcy5kZWNvZGVyID0gbmV3IFN0cmluZ0RlY29kZXIob3B0aW9ucy5lbmNvZGluZyk7XG4gICAgdGhpcy5lbmNvZGluZyA9IG9wdGlvbnMuZW5jb2Rpbmc7XG4gIH1cbn1cbmV4cG9ydCBkZWZhdWx0IFJlYWRhYmxlO1xuZXhwb3J0IGZ1bmN0aW9uIFJlYWRhYmxlKG9wdGlvbnMpIHtcblxuICBpZiAoISh0aGlzIGluc3RhbmNlb2YgUmVhZGFibGUpKSByZXR1cm4gbmV3IFJlYWRhYmxlKG9wdGlvbnMpO1xuXG4gIHRoaXMuX3JlYWRhYmxlU3RhdGUgPSBuZXcgUmVhZGFibGVTdGF0ZShvcHRpb25zLCB0aGlzKTtcblxuICAvLyBsZWdhY3lcbiAgdGhpcy5yZWFkYWJsZSA9IHRydWU7XG5cbiAgaWYgKG9wdGlvbnMgJiYgdHlwZW9mIG9wdGlvbnMucmVhZCA9PT0gJ2Z1bmN0aW9uJykgdGhpcy5fcmVhZCA9IG9wdGlvbnMucmVhZDtcblxuICBFdmVudEVtaXR0ZXIuY2FsbCh0aGlzKTtcbn1cblxuLy8gTWFudWFsbHkgc2hvdmUgc29tZXRoaW5nIGludG8gdGhlIHJlYWQoKSBidWZmZXIuXG4vLyBUaGlzIHJldHVybnMgdHJ1ZSBpZiB0aGUgaGlnaFdhdGVyTWFyayBoYXMgbm90IGJlZW4gaGl0IHlldCxcbi8vIHNpbWlsYXIgdG8gaG93IFdyaXRhYmxlLndyaXRlKCkgcmV0dXJucyB0cnVlIGlmIHlvdSBzaG91bGRcbi8vIHdyaXRlKCkgc29tZSBtb3JlLlxuUmVhZGFibGUucHJvdG90eXBlLnB1c2ggPSBmdW5jdGlvbiAoY2h1bmssIGVuY29kaW5nKSB7XG4gIHZhciBzdGF0ZSA9IHRoaXMuX3JlYWRhYmxlU3RhdGU7XG5cbiAgaWYgKCFzdGF0ZS5vYmplY3RNb2RlICYmIHR5cGVvZiBjaHVuayA9PT0gJ3N0cmluZycpIHtcbiAgICBlbmNvZGluZyA9IGVuY29kaW5nIHx8IHN0YXRlLmRlZmF1bHRFbmNvZGluZztcbiAgICBpZiAoZW5jb2RpbmcgIT09IHN0YXRlLmVuY29kaW5nKSB7XG4gICAgICBjaHVuayA9IEJ1ZmZlci5mcm9tKGNodW5rLCBlbmNvZGluZyk7XG4gICAgICBlbmNvZGluZyA9ICcnO1xuICAgIH1cbiAgfVxuXG4gIHJldHVybiByZWFkYWJsZUFkZENodW5rKHRoaXMsIHN0YXRlLCBjaHVuaywgZW5jb2RpbmcsIGZhbHNlKTtcbn07XG5cbi8vIFVuc2hpZnQgc2hvdWxkICphbHdheXMqIGJlIHNvbWV0aGluZyBkaXJlY3RseSBvdXQgb2YgcmVhZCgpXG5SZWFkYWJsZS5wcm90b3R5cGUudW5zaGlmdCA9IGZ1bmN0aW9uIChjaHVuaykge1xuICB2YXIgc3RhdGUgPSB0aGlzLl9yZWFkYWJsZVN0YXRlO1xuICByZXR1cm4gcmVhZGFibGVBZGRDaHVuayh0aGlzLCBzdGF0ZSwgY2h1bmssICcnLCB0cnVlKTtcbn07XG5cblJlYWRhYmxlLnByb3RvdHlwZS5pc1BhdXNlZCA9IGZ1bmN0aW9uICgpIHtcbiAgcmV0dXJuIHRoaXMuX3JlYWRhYmxlU3RhdGUuZmxvd2luZyA9PT0gZmFsc2U7XG59O1xuXG5mdW5jdGlvbiByZWFkYWJsZUFkZENodW5rKHN0cmVhbSwgc3RhdGUsIGNodW5rLCBlbmNvZGluZywgYWRkVG9Gcm9udCkge1xuICB2YXIgZXIgPSBjaHVua0ludmFsaWQoc3RhdGUsIGNodW5rKTtcbiAgaWYgKGVyKSB7XG4gICAgc3RyZWFtLmVtaXQoJ2Vycm9yJywgZXIpO1xuICB9IGVsc2UgaWYgKGNodW5rID09PSBudWxsKSB7XG4gICAgc3RhdGUucmVhZGluZyA9IGZhbHNlO1xuICAgIG9uRW9mQ2h1bmsoc3RyZWFtLCBzdGF0ZSk7XG4gIH0gZWxzZSBpZiAoc3RhdGUub2JqZWN0TW9kZSB8fCBjaHVuayAmJiBjaHVuay5sZW5ndGggPiAwKSB7XG4gICAgaWYgKHN0YXRlLmVuZGVkICYmICFhZGRUb0Zyb250KSB7XG4gICAgICB2YXIgZSA9IG5ldyBFcnJvcignc3RyZWFtLnB1c2goKSBhZnRlciBFT0YnKTtcbiAgICAgIHN0cmVhbS5lbWl0KCdlcnJvcicsIGUpO1xuICAgIH0gZWxzZSBpZiAoc3RhdGUuZW5kRW1pdHRlZCAmJiBhZGRUb0Zyb250KSB7XG4gICAgICB2YXIgX2UgPSBuZXcgRXJyb3IoJ3N0cmVhbS51bnNoaWZ0KCkgYWZ0ZXIgZW5kIGV2ZW50Jyk7XG4gICAgICBzdHJlYW0uZW1pdCgnZXJyb3InLCBfZSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHZhciBza2lwQWRkO1xuICAgICAgaWYgKHN0YXRlLmRlY29kZXIgJiYgIWFkZFRvRnJvbnQgJiYgIWVuY29kaW5nKSB7XG4gICAgICAgIGNodW5rID0gc3RhdGUuZGVjb2Rlci53cml0ZShjaHVuayk7XG4gICAgICAgIHNraXBBZGQgPSAhc3RhdGUub2JqZWN0TW9kZSAmJiBjaHVuay5sZW5ndGggPT09IDA7XG4gICAgICB9XG5cbiAgICAgIGlmICghYWRkVG9Gcm9udCkgc3RhdGUucmVhZGluZyA9IGZhbHNlO1xuXG4gICAgICAvLyBEb24ndCBhZGQgdG8gdGhlIGJ1ZmZlciBpZiB3ZSd2ZSBkZWNvZGVkIHRvIGFuIGVtcHR5IHN0cmluZyBjaHVuayBhbmRcbiAgICAgIC8vIHdlJ3JlIG5vdCBpbiBvYmplY3QgbW9kZVxuICAgICAgaWYgKCFza2lwQWRkKSB7XG4gICAgICAgIC8vIGlmIHdlIHdhbnQgdGhlIGRhdGEgbm93LCBqdXN0IGVtaXQgaXQuXG4gICAgICAgIGlmIChzdGF0ZS5mbG93aW5nICYmIHN0YXRlLmxlbmd0aCA9PT0gMCAmJiAhc3RhdGUuc3luYykge1xuICAgICAgICAgIHN0cmVhbS5lbWl0KCdkYXRhJywgY2h1bmspO1xuICAgICAgICAgIHN0cmVhbS5yZWFkKDApO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIC8vIHVwZGF0ZSB0aGUgYnVmZmVyIGluZm8uXG4gICAgICAgICAgc3RhdGUubGVuZ3RoICs9IHN0YXRlLm9iamVjdE1vZGUgPyAxIDogY2h1bmsubGVuZ3RoO1xuICAgICAgICAgIGlmIChhZGRUb0Zyb250KSBzdGF0ZS5idWZmZXIudW5zaGlmdChjaHVuayk7ZWxzZSBzdGF0ZS5idWZmZXIucHVzaChjaHVuayk7XG5cbiAgICAgICAgICBpZiAoc3RhdGUubmVlZFJlYWRhYmxlKSBlbWl0UmVhZGFibGUoc3RyZWFtKTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBtYXliZVJlYWRNb3JlKHN0cmVhbSwgc3RhdGUpO1xuICAgIH1cbiAgfSBlbHNlIGlmICghYWRkVG9Gcm9udCkge1xuICAgIHN0YXRlLnJlYWRpbmcgPSBmYWxzZTtcbiAgfVxuXG4gIHJldHVybiBuZWVkTW9yZURhdGEoc3RhdGUpO1xufVxuXG4vLyBpZiBpdCdzIHBhc3QgdGhlIGhpZ2ggd2F0ZXIgbWFyaywgd2UgY2FuIHB1c2ggaW4gc29tZSBtb3JlLlxuLy8gQWxzbywgaWYgd2UgaGF2ZSBubyBkYXRhIHlldCwgd2UgY2FuIHN0YW5kIHNvbWVcbi8vIG1vcmUgYnl0ZXMuICBUaGlzIGlzIHRvIHdvcmsgYXJvdW5kIGNhc2VzIHdoZXJlIGh3bT0wLFxuLy8gc3VjaCBhcyB0aGUgcmVwbC4gIEFsc28sIGlmIHRoZSBwdXNoKCkgdHJpZ2dlcmVkIGFcbi8vIHJlYWRhYmxlIGV2ZW50LCBhbmQgdGhlIHVzZXIgY2FsbGVkIHJlYWQobGFyZ2VOdW1iZXIpIHN1Y2ggdGhhdFxuLy8gbmVlZFJlYWRhYmxlIHdhcyBzZXQsIHRoZW4gd2Ugb3VnaHQgdG8gcHVzaCBtb3JlLCBzbyB0aGF0IGFub3RoZXJcbi8vICdyZWFkYWJsZScgZXZlbnQgd2lsbCBiZSB0cmlnZ2VyZWQuXG5mdW5jdGlvbiBuZWVkTW9yZURhdGEoc3RhdGUpIHtcbiAgcmV0dXJuICFzdGF0ZS5lbmRlZCAmJiAoc3RhdGUubmVlZFJlYWRhYmxlIHx8IHN0YXRlLmxlbmd0aCA8IHN0YXRlLmhpZ2hXYXRlck1hcmsgfHwgc3RhdGUubGVuZ3RoID09PSAwKTtcbn1cblxuLy8gYmFja3dhcmRzIGNvbXBhdGliaWxpdHkuXG5SZWFkYWJsZS5wcm90b3R5cGUuc2V0RW5jb2RpbmcgPSBmdW5jdGlvbiAoZW5jKSB7XG4gIHRoaXMuX3JlYWRhYmxlU3RhdGUuZGVjb2RlciA9IG5ldyBTdHJpbmdEZWNvZGVyKGVuYyk7XG4gIHRoaXMuX3JlYWRhYmxlU3RhdGUuZW5jb2RpbmcgPSBlbmM7XG4gIHJldHVybiB0aGlzO1xufTtcblxuLy8gRG9uJ3QgcmFpc2UgdGhlIGh3bSA+IDhNQlxudmFyIE1BWF9IV00gPSAweDgwMDAwMDtcbmZ1bmN0aW9uIGNvbXB1dGVOZXdIaWdoV2F0ZXJNYXJrKG4pIHtcbiAgaWYgKG4gPj0gTUFYX0hXTSkge1xuICAgIG4gPSBNQVhfSFdNO1xuICB9IGVsc2Uge1xuICAgIC8vIEdldCB0aGUgbmV4dCBoaWdoZXN0IHBvd2VyIG9mIDIgdG8gcHJldmVudCBpbmNyZWFzaW5nIGh3bSBleGNlc3NpdmVseSBpblxuICAgIC8vIHRpbnkgYW1vdW50c1xuICAgIG4tLTtcbiAgICBuIHw9IG4gPj4+IDE7XG4gICAgbiB8PSBuID4+PiAyO1xuICAgIG4gfD0gbiA+Pj4gNDtcbiAgICBuIHw9IG4gPj4+IDg7XG4gICAgbiB8PSBuID4+PiAxNjtcbiAgICBuKys7XG4gIH1cbiAgcmV0dXJuIG47XG59XG5cbi8vIFRoaXMgZnVuY3Rpb24gaXMgZGVzaWduZWQgdG8gYmUgaW5saW5hYmxlLCBzbyBwbGVhc2UgdGFrZSBjYXJlIHdoZW4gbWFraW5nXG4vLyBjaGFuZ2VzIHRvIHRoZSBmdW5jdGlvbiBib2R5LlxuZnVuY3Rpb24gaG93TXVjaFRvUmVhZChuLCBzdGF0ZSkge1xuICBpZiAobiA8PSAwIHx8IHN0YXRlLmxlbmd0aCA9PT0gMCAmJiBzdGF0ZS5lbmRlZCkgcmV0dXJuIDA7XG4gIGlmIChzdGF0ZS5vYmplY3RNb2RlKSByZXR1cm4gMTtcbiAgaWYgKG4gIT09IG4pIHtcbiAgICAvLyBPbmx5IGZsb3cgb25lIGJ1ZmZlciBhdCBhIHRpbWVcbiAgICBpZiAoc3RhdGUuZmxvd2luZyAmJiBzdGF0ZS5sZW5ndGgpIHJldHVybiBzdGF0ZS5idWZmZXIuaGVhZC5kYXRhLmxlbmd0aDtlbHNlIHJldHVybiBzdGF0ZS5sZW5ndGg7XG4gIH1cbiAgLy8gSWYgd2UncmUgYXNraW5nIGZvciBtb3JlIHRoYW4gdGhlIGN1cnJlbnQgaHdtLCB0aGVuIHJhaXNlIHRoZSBod20uXG4gIGlmIChuID4gc3RhdGUuaGlnaFdhdGVyTWFyaykgc3RhdGUuaGlnaFdhdGVyTWFyayA9IGNvbXB1dGVOZXdIaWdoV2F0ZXJNYXJrKG4pO1xuICBpZiAobiA8PSBzdGF0ZS5sZW5ndGgpIHJldHVybiBuO1xuICAvLyBEb24ndCBoYXZlIGVub3VnaFxuICBpZiAoIXN0YXRlLmVuZGVkKSB7XG4gICAgc3RhdGUubmVlZFJlYWRhYmxlID0gdHJ1ZTtcbiAgICByZXR1cm4gMDtcbiAgfVxuICByZXR1cm4gc3RhdGUubGVuZ3RoO1xufVxuXG4vLyB5b3UgY2FuIG92ZXJyaWRlIGVpdGhlciB0aGlzIG1ldGhvZCwgb3IgdGhlIGFzeW5jIF9yZWFkKG4pIGJlbG93LlxuUmVhZGFibGUucHJvdG90eXBlLnJlYWQgPSBmdW5jdGlvbiAobikge1xuICBkZWJ1ZygncmVhZCcsIG4pO1xuICBuID0gcGFyc2VJbnQobiwgMTApO1xuICB2YXIgc3RhdGUgPSB0aGlzLl9yZWFkYWJsZVN0YXRlO1xuICB2YXIgbk9yaWcgPSBuO1xuXG4gIGlmIChuICE9PSAwKSBzdGF0ZS5lbWl0dGVkUmVhZGFibGUgPSBmYWxzZTtcblxuICAvLyBpZiB3ZSdyZSBkb2luZyByZWFkKDApIHRvIHRyaWdnZXIgYSByZWFkYWJsZSBldmVudCwgYnV0IHdlXG4gIC8vIGFscmVhZHkgaGF2ZSBhIGJ1bmNoIG9mIGRhdGEgaW4gdGhlIGJ1ZmZlciwgdGhlbiBqdXN0IHRyaWdnZXJcbiAgLy8gdGhlICdyZWFkYWJsZScgZXZlbnQgYW5kIG1vdmUgb24uXG4gIGlmIChuID09PSAwICYmIHN0YXRlLm5lZWRSZWFkYWJsZSAmJiAoc3RhdGUubGVuZ3RoID49IHN0YXRlLmhpZ2hXYXRlck1hcmsgfHwgc3RhdGUuZW5kZWQpKSB7XG4gICAgZGVidWcoJ3JlYWQ6IGVtaXRSZWFkYWJsZScsIHN0YXRlLmxlbmd0aCwgc3RhdGUuZW5kZWQpO1xuICAgIGlmIChzdGF0ZS5sZW5ndGggPT09IDAgJiYgc3RhdGUuZW5kZWQpIGVuZFJlYWRhYmxlKHRoaXMpO2Vsc2UgZW1pdFJlYWRhYmxlKHRoaXMpO1xuICAgIHJldHVybiBudWxsO1xuICB9XG5cbiAgbiA9IGhvd011Y2hUb1JlYWQobiwgc3RhdGUpO1xuXG4gIC8vIGlmIHdlJ3ZlIGVuZGVkLCBhbmQgd2UncmUgbm93IGNsZWFyLCB0aGVuIGZpbmlzaCBpdCB1cC5cbiAgaWYgKG4gPT09IDAgJiYgc3RhdGUuZW5kZWQpIHtcbiAgICBpZiAoc3RhdGUubGVuZ3RoID09PSAwKSBlbmRSZWFkYWJsZSh0aGlzKTtcbiAgICByZXR1cm4gbnVsbDtcbiAgfVxuXG4gIC8vIEFsbCB0aGUgYWN0dWFsIGNodW5rIGdlbmVyYXRpb24gbG9naWMgbmVlZHMgdG8gYmVcbiAgLy8gKmJlbG93KiB0aGUgY2FsbCB0byBfcmVhZC4gIFRoZSByZWFzb24gaXMgdGhhdCBpbiBjZXJ0YWluXG4gIC8vIHN5bnRoZXRpYyBzdHJlYW0gY2FzZXMsIHN1Y2ggYXMgcGFzc3Rocm91Z2ggc3RyZWFtcywgX3JlYWRcbiAgLy8gbWF5IGJlIGEgY29tcGxldGVseSBzeW5jaHJvbm91cyBvcGVyYXRpb24gd2hpY2ggbWF5IGNoYW5nZVxuICAvLyB0aGUgc3RhdGUgb2YgdGhlIHJlYWQgYnVmZmVyLCBwcm92aWRpbmcgZW5vdWdoIGRhdGEgd2hlblxuICAvLyBiZWZvcmUgdGhlcmUgd2FzICpub3QqIGVub3VnaC5cbiAgLy9cbiAgLy8gU28sIHRoZSBzdGVwcyBhcmU6XG4gIC8vIDEuIEZpZ3VyZSBvdXQgd2hhdCB0aGUgc3RhdGUgb2YgdGhpbmdzIHdpbGwgYmUgYWZ0ZXIgd2UgZG9cbiAgLy8gYSByZWFkIGZyb20gdGhlIGJ1ZmZlci5cbiAgLy9cbiAgLy8gMi4gSWYgdGhhdCByZXN1bHRpbmcgc3RhdGUgd2lsbCB0cmlnZ2VyIGEgX3JlYWQsIHRoZW4gY2FsbCBfcmVhZC5cbiAgLy8gTm90ZSB0aGF0IHRoaXMgbWF5IGJlIGFzeW5jaHJvbm91cywgb3Igc3luY2hyb25vdXMuICBZZXMsIGl0IGlzXG4gIC8vIGRlZXBseSB1Z2x5IHRvIHdyaXRlIEFQSXMgdGhpcyB3YXksIGJ1dCB0aGF0IHN0aWxsIGRvZXNuJ3QgbWVhblxuICAvLyB0aGF0IHRoZSBSZWFkYWJsZSBjbGFzcyBzaG91bGQgYmVoYXZlIGltcHJvcGVybHksIGFzIHN0cmVhbXMgYXJlXG4gIC8vIGRlc2lnbmVkIHRvIGJlIHN5bmMvYXN5bmMgYWdub3N0aWMuXG4gIC8vIFRha2Ugbm90ZSBpZiB0aGUgX3JlYWQgY2FsbCBpcyBzeW5jIG9yIGFzeW5jIChpZSwgaWYgdGhlIHJlYWQgY2FsbFxuICAvLyBoYXMgcmV0dXJuZWQgeWV0KSwgc28gdGhhdCB3ZSBrbm93IHdoZXRoZXIgb3Igbm90IGl0J3Mgc2FmZSB0byBlbWl0XG4gIC8vICdyZWFkYWJsZScgZXRjLlxuICAvL1xuICAvLyAzLiBBY3R1YWxseSBwdWxsIHRoZSByZXF1ZXN0ZWQgY2h1bmtzIG91dCBvZiB0aGUgYnVmZmVyIGFuZCByZXR1cm4uXG5cbiAgLy8gaWYgd2UgbmVlZCBhIHJlYWRhYmxlIGV2ZW50LCB0aGVuIHdlIG5lZWQgdG8gZG8gc29tZSByZWFkaW5nLlxuICB2YXIgZG9SZWFkID0gc3RhdGUubmVlZFJlYWRhYmxlO1xuICBkZWJ1ZygnbmVlZCByZWFkYWJsZScsIGRvUmVhZCk7XG5cbiAgLy8gaWYgd2UgY3VycmVudGx5IGhhdmUgbGVzcyB0aGFuIHRoZSBoaWdoV2F0ZXJNYXJrLCB0aGVuIGFsc28gcmVhZCBzb21lXG4gIGlmIChzdGF0ZS5sZW5ndGggPT09IDAgfHwgc3RhdGUubGVuZ3RoIC0gbiA8IHN0YXRlLmhpZ2hXYXRlck1hcmspIHtcbiAgICBkb1JlYWQgPSB0cnVlO1xuICAgIGRlYnVnKCdsZW5ndGggbGVzcyB0aGFuIHdhdGVybWFyaycsIGRvUmVhZCk7XG4gIH1cblxuICAvLyBob3dldmVyLCBpZiB3ZSd2ZSBlbmRlZCwgdGhlbiB0aGVyZSdzIG5vIHBvaW50LCBhbmQgaWYgd2UncmUgYWxyZWFkeVxuICAvLyByZWFkaW5nLCB0aGVuIGl0J3MgdW5uZWNlc3NhcnkuXG4gIGlmIChzdGF0ZS5lbmRlZCB8fCBzdGF0ZS5yZWFkaW5nKSB7XG4gICAgZG9SZWFkID0gZmFsc2U7XG4gICAgZGVidWcoJ3JlYWRpbmcgb3IgZW5kZWQnLCBkb1JlYWQpO1xuICB9IGVsc2UgaWYgKGRvUmVhZCkge1xuICAgIGRlYnVnKCdkbyByZWFkJyk7XG4gICAgc3RhdGUucmVhZGluZyA9IHRydWU7XG4gICAgc3RhdGUuc3luYyA9IHRydWU7XG4gICAgLy8gaWYgdGhlIGxlbmd0aCBpcyBjdXJyZW50bHkgemVybywgdGhlbiB3ZSAqbmVlZCogYSByZWFkYWJsZSBldmVudC5cbiAgICBpZiAoc3RhdGUubGVuZ3RoID09PSAwKSBzdGF0ZS5uZWVkUmVhZGFibGUgPSB0cnVlO1xuICAgIC8vIGNhbGwgaW50ZXJuYWwgcmVhZCBtZXRob2RcbiAgICB0aGlzLl9yZWFkKHN0YXRlLmhpZ2hXYXRlck1hcmspO1xuICAgIHN0YXRlLnN5bmMgPSBmYWxzZTtcbiAgICAvLyBJZiBfcmVhZCBwdXNoZWQgZGF0YSBzeW5jaHJvbm91c2x5LCB0aGVuIGByZWFkaW5nYCB3aWxsIGJlIGZhbHNlLFxuICAgIC8vIGFuZCB3ZSBuZWVkIHRvIHJlLWV2YWx1YXRlIGhvdyBtdWNoIGRhdGEgd2UgY2FuIHJldHVybiB0byB0aGUgdXNlci5cbiAgICBpZiAoIXN0YXRlLnJlYWRpbmcpIG4gPSBob3dNdWNoVG9SZWFkKG5PcmlnLCBzdGF0ZSk7XG4gIH1cblxuICB2YXIgcmV0O1xuICBpZiAobiA+IDApIHJldCA9IGZyb21MaXN0KG4sIHN0YXRlKTtlbHNlIHJldCA9IG51bGw7XG5cbiAgaWYgKHJldCA9PT0gbnVsbCkge1xuICAgIHN0YXRlLm5lZWRSZWFkYWJsZSA9IHRydWU7XG4gICAgbiA9IDA7XG4gIH0gZWxzZSB7XG4gICAgc3RhdGUubGVuZ3RoIC09IG47XG4gIH1cblxuICBpZiAoc3RhdGUubGVuZ3RoID09PSAwKSB7XG4gICAgLy8gSWYgd2UgaGF2ZSBub3RoaW5nIGluIHRoZSBidWZmZXIsIHRoZW4gd2Ugd2FudCB0byBrbm93XG4gICAgLy8gYXMgc29vbiBhcyB3ZSAqZG8qIGdldCBzb21ldGhpbmcgaW50byB0aGUgYnVmZmVyLlxuICAgIGlmICghc3RhdGUuZW5kZWQpIHN0YXRlLm5lZWRSZWFkYWJsZSA9IHRydWU7XG5cbiAgICAvLyBJZiB3ZSB0cmllZCB0byByZWFkKCkgcGFzdCB0aGUgRU9GLCB0aGVuIGVtaXQgZW5kIG9uIHRoZSBuZXh0IHRpY2suXG4gICAgaWYgKG5PcmlnICE9PSBuICYmIHN0YXRlLmVuZGVkKSBlbmRSZWFkYWJsZSh0aGlzKTtcbiAgfVxuXG4gIGlmIChyZXQgIT09IG51bGwpIHRoaXMuZW1pdCgnZGF0YScsIHJldCk7XG5cbiAgcmV0dXJuIHJldDtcbn07XG5cbmZ1bmN0aW9uIGNodW5rSW52YWxpZChzdGF0ZSwgY2h1bmspIHtcbiAgdmFyIGVyID0gbnVsbDtcbiAgaWYgKCFCdWZmZXIuaXNCdWZmZXIoY2h1bmspICYmIHR5cGVvZiBjaHVuayAhPT0gJ3N0cmluZycgJiYgY2h1bmsgIT09IG51bGwgJiYgY2h1bmsgIT09IHVuZGVmaW5lZCAmJiAhc3RhdGUub2JqZWN0TW9kZSkge1xuICAgIGVyID0gbmV3IFR5cGVFcnJvcignSW52YWxpZCBub24tc3RyaW5nL2J1ZmZlciBjaHVuaycpO1xuICB9XG4gIHJldHVybiBlcjtcbn1cblxuZnVuY3Rpb24gb25Fb2ZDaHVuayhzdHJlYW0sIHN0YXRlKSB7XG4gIGlmIChzdGF0ZS5lbmRlZCkgcmV0dXJuO1xuICBpZiAoc3RhdGUuZGVjb2Rlcikge1xuICAgIHZhciBjaHVuayA9IHN0YXRlLmRlY29kZXIuZW5kKCk7XG4gICAgaWYgKGNodW5rICYmIGNodW5rLmxlbmd0aCkge1xuICAgICAgc3RhdGUuYnVmZmVyLnB1c2goY2h1bmspO1xuICAgICAgc3RhdGUubGVuZ3RoICs9IHN0YXRlLm9iamVjdE1vZGUgPyAxIDogY2h1bmsubGVuZ3RoO1xuICAgIH1cbiAgfVxuICBzdGF0ZS5lbmRlZCA9IHRydWU7XG5cbiAgLy8gZW1pdCAncmVhZGFibGUnIG5vdyB0byBtYWtlIHN1cmUgaXQgZ2V0cyBwaWNrZWQgdXAuXG4gIGVtaXRSZWFkYWJsZShzdHJlYW0pO1xufVxuXG4vLyBEb24ndCBlbWl0IHJlYWRhYmxlIHJpZ2h0IGF3YXkgaW4gc3luYyBtb2RlLCBiZWNhdXNlIHRoaXMgY2FuIHRyaWdnZXJcbi8vIGFub3RoZXIgcmVhZCgpIGNhbGwgPT4gc3RhY2sgb3ZlcmZsb3cuICBUaGlzIHdheSwgaXQgbWlnaHQgdHJpZ2dlclxuLy8gYSBuZXh0VGljayByZWN1cnNpb24gd2FybmluZywgYnV0IHRoYXQncyBub3Qgc28gYmFkLlxuZnVuY3Rpb24gZW1pdFJlYWRhYmxlKHN0cmVhbSkge1xuICB2YXIgc3RhdGUgPSBzdHJlYW0uX3JlYWRhYmxlU3RhdGU7XG4gIHN0YXRlLm5lZWRSZWFkYWJsZSA9IGZhbHNlO1xuICBpZiAoIXN0YXRlLmVtaXR0ZWRSZWFkYWJsZSkge1xuICAgIGRlYnVnKCdlbWl0UmVhZGFibGUnLCBzdGF0ZS5mbG93aW5nKTtcbiAgICBzdGF0ZS5lbWl0dGVkUmVhZGFibGUgPSB0cnVlO1xuICAgIGlmIChzdGF0ZS5zeW5jKSBuZXh0VGljayhlbWl0UmVhZGFibGVfLCBzdHJlYW0pO2Vsc2UgZW1pdFJlYWRhYmxlXyhzdHJlYW0pO1xuICB9XG59XG5cbmZ1bmN0aW9uIGVtaXRSZWFkYWJsZV8oc3RyZWFtKSB7XG4gIGRlYnVnKCdlbWl0IHJlYWRhYmxlJyk7XG4gIHN0cmVhbS5lbWl0KCdyZWFkYWJsZScpO1xuICBmbG93KHN0cmVhbSk7XG59XG5cbi8vIGF0IHRoaXMgcG9pbnQsIHRoZSB1c2VyIGhhcyBwcmVzdW1hYmx5IHNlZW4gdGhlICdyZWFkYWJsZScgZXZlbnQsXG4vLyBhbmQgY2FsbGVkIHJlYWQoKSB0byBjb25zdW1lIHNvbWUgZGF0YS4gIHRoYXQgbWF5IGhhdmUgdHJpZ2dlcmVkXG4vLyBpbiB0dXJuIGFub3RoZXIgX3JlYWQobikgY2FsbCwgaW4gd2hpY2ggY2FzZSByZWFkaW5nID0gdHJ1ZSBpZlxuLy8gaXQncyBpbiBwcm9ncmVzcy5cbi8vIEhvd2V2ZXIsIGlmIHdlJ3JlIG5vdCBlbmRlZCwgb3IgcmVhZGluZywgYW5kIHRoZSBsZW5ndGggPCBod20sXG4vLyB0aGVuIGdvIGFoZWFkIGFuZCB0cnkgdG8gcmVhZCBzb21lIG1vcmUgcHJlZW1wdGl2ZWx5LlxuZnVuY3Rpb24gbWF5YmVSZWFkTW9yZShzdHJlYW0sIHN0YXRlKSB7XG4gIGlmICghc3RhdGUucmVhZGluZ01vcmUpIHtcbiAgICBzdGF0ZS5yZWFkaW5nTW9yZSA9IHRydWU7XG4gICAgbmV4dFRpY2sobWF5YmVSZWFkTW9yZV8sIHN0cmVhbSwgc3RhdGUpO1xuICB9XG59XG5cbmZ1bmN0aW9uIG1heWJlUmVhZE1vcmVfKHN0cmVhbSwgc3RhdGUpIHtcbiAgdmFyIGxlbiA9IHN0YXRlLmxlbmd0aDtcbiAgd2hpbGUgKCFzdGF0ZS5yZWFkaW5nICYmICFzdGF0ZS5mbG93aW5nICYmICFzdGF0ZS5lbmRlZCAmJiBzdGF0ZS5sZW5ndGggPCBzdGF0ZS5oaWdoV2F0ZXJNYXJrKSB7XG4gICAgZGVidWcoJ21heWJlUmVhZE1vcmUgcmVhZCAwJyk7XG4gICAgc3RyZWFtLnJlYWQoMCk7XG4gICAgaWYgKGxlbiA9PT0gc3RhdGUubGVuZ3RoKVxuICAgICAgLy8gZGlkbid0IGdldCBhbnkgZGF0YSwgc3RvcCBzcGlubmluZy5cbiAgICAgIGJyZWFrO2Vsc2UgbGVuID0gc3RhdGUubGVuZ3RoO1xuICB9XG4gIHN0YXRlLnJlYWRpbmdNb3JlID0gZmFsc2U7XG59XG5cbi8vIGFic3RyYWN0IG1ldGhvZC4gIHRvIGJlIG92ZXJyaWRkZW4gaW4gc3BlY2lmaWMgaW1wbGVtZW50YXRpb24gY2xhc3Nlcy5cbi8vIGNhbGwgY2IoZXIsIGRhdGEpIHdoZXJlIGRhdGEgaXMgPD0gbiBpbiBsZW5ndGguXG4vLyBmb3IgdmlydHVhbCAobm9uLXN0cmluZywgbm9uLWJ1ZmZlcikgc3RyZWFtcywgXCJsZW5ndGhcIiBpcyBzb21ld2hhdFxuLy8gYXJiaXRyYXJ5LCBhbmQgcGVyaGFwcyBub3QgdmVyeSBtZWFuaW5nZnVsLlxuUmVhZGFibGUucHJvdG90eXBlLl9yZWFkID0gZnVuY3Rpb24gKG4pIHtcbiAgdGhpcy5lbWl0KCdlcnJvcicsIG5ldyBFcnJvcignbm90IGltcGxlbWVudGVkJykpO1xufTtcblxuUmVhZGFibGUucHJvdG90eXBlLnBpcGUgPSBmdW5jdGlvbiAoZGVzdCwgcGlwZU9wdHMpIHtcbiAgdmFyIHNyYyA9IHRoaXM7XG4gIHZhciBzdGF0ZSA9IHRoaXMuX3JlYWRhYmxlU3RhdGU7XG5cbiAgc3dpdGNoIChzdGF0ZS5waXBlc0NvdW50KSB7XG4gICAgY2FzZSAwOlxuICAgICAgc3RhdGUucGlwZXMgPSBkZXN0O1xuICAgICAgYnJlYWs7XG4gICAgY2FzZSAxOlxuICAgICAgc3RhdGUucGlwZXMgPSBbc3RhdGUucGlwZXMsIGRlc3RdO1xuICAgICAgYnJlYWs7XG4gICAgZGVmYXVsdDpcbiAgICAgIHN0YXRlLnBpcGVzLnB1c2goZGVzdCk7XG4gICAgICBicmVhaztcbiAgfVxuICBzdGF0ZS5waXBlc0NvdW50ICs9IDE7XG4gIGRlYnVnKCdwaXBlIGNvdW50PSVkIG9wdHM9JWonLCBzdGF0ZS5waXBlc0NvdW50LCBwaXBlT3B0cyk7XG5cbiAgdmFyIGRvRW5kID0gKCFwaXBlT3B0cyB8fCBwaXBlT3B0cy5lbmQgIT09IGZhbHNlKTtcblxuICB2YXIgZW5kRm4gPSBkb0VuZCA/IG9uZW5kIDogY2xlYW51cDtcbiAgaWYgKHN0YXRlLmVuZEVtaXR0ZWQpIG5leHRUaWNrKGVuZEZuKTtlbHNlIHNyYy5vbmNlKCdlbmQnLCBlbmRGbik7XG5cbiAgZGVzdC5vbigndW5waXBlJywgb251bnBpcGUpO1xuICBmdW5jdGlvbiBvbnVucGlwZShyZWFkYWJsZSkge1xuICAgIGRlYnVnKCdvbnVucGlwZScpO1xuICAgIGlmIChyZWFkYWJsZSA9PT0gc3JjKSB7XG4gICAgICBjbGVhbnVwKCk7XG4gICAgfVxuICB9XG5cbiAgZnVuY3Rpb24gb25lbmQoKSB7XG4gICAgZGVidWcoJ29uZW5kJyk7XG4gICAgZGVzdC5lbmQoKTtcbiAgfVxuXG4gIC8vIHdoZW4gdGhlIGRlc3QgZHJhaW5zLCBpdCByZWR1Y2VzIHRoZSBhd2FpdERyYWluIGNvdW50ZXJcbiAgLy8gb24gdGhlIHNvdXJjZS4gIFRoaXMgd291bGQgYmUgbW9yZSBlbGVnYW50IHdpdGggYSAub25jZSgpXG4gIC8vIGhhbmRsZXIgaW4gZmxvdygpLCBidXQgYWRkaW5nIGFuZCByZW1vdmluZyByZXBlYXRlZGx5IGlzXG4gIC8vIHRvbyBzbG93LlxuICB2YXIgb25kcmFpbiA9IHBpcGVPbkRyYWluKHNyYyk7XG4gIGRlc3Qub24oJ2RyYWluJywgb25kcmFpbik7XG5cbiAgdmFyIGNsZWFuZWRVcCA9IGZhbHNlO1xuICBmdW5jdGlvbiBjbGVhbnVwKCkge1xuICAgIGRlYnVnKCdjbGVhbnVwJyk7XG4gICAgLy8gY2xlYW51cCBldmVudCBoYW5kbGVycyBvbmNlIHRoZSBwaXBlIGlzIGJyb2tlblxuICAgIGRlc3QucmVtb3ZlTGlzdGVuZXIoJ2Nsb3NlJywgb25jbG9zZSk7XG4gICAgZGVzdC5yZW1vdmVMaXN0ZW5lcignZmluaXNoJywgb25maW5pc2gpO1xuICAgIGRlc3QucmVtb3ZlTGlzdGVuZXIoJ2RyYWluJywgb25kcmFpbik7XG4gICAgZGVzdC5yZW1vdmVMaXN0ZW5lcignZXJyb3InLCBvbmVycm9yKTtcbiAgICBkZXN0LnJlbW92ZUxpc3RlbmVyKCd1bnBpcGUnLCBvbnVucGlwZSk7XG4gICAgc3JjLnJlbW92ZUxpc3RlbmVyKCdlbmQnLCBvbmVuZCk7XG4gICAgc3JjLnJlbW92ZUxpc3RlbmVyKCdlbmQnLCBjbGVhbnVwKTtcbiAgICBzcmMucmVtb3ZlTGlzdGVuZXIoJ2RhdGEnLCBvbmRhdGEpO1xuXG4gICAgY2xlYW5lZFVwID0gdHJ1ZTtcblxuICAgIC8vIGlmIHRoZSByZWFkZXIgaXMgd2FpdGluZyBmb3IgYSBkcmFpbiBldmVudCBmcm9tIHRoaXNcbiAgICAvLyBzcGVjaWZpYyB3cml0ZXIsIHRoZW4gaXQgd291bGQgY2F1c2UgaXQgdG8gbmV2ZXIgc3RhcnRcbiAgICAvLyBmbG93aW5nIGFnYWluLlxuICAgIC8vIFNvLCBpZiB0aGlzIGlzIGF3YWl0aW5nIGEgZHJhaW4sIHRoZW4gd2UganVzdCBjYWxsIGl0IG5vdy5cbiAgICAvLyBJZiB3ZSBkb24ndCBrbm93LCB0aGVuIGFzc3VtZSB0aGF0IHdlIGFyZSB3YWl0aW5nIGZvciBvbmUuXG4gICAgaWYgKHN0YXRlLmF3YWl0RHJhaW4gJiYgKCFkZXN0Ll93cml0YWJsZVN0YXRlIHx8IGRlc3QuX3dyaXRhYmxlU3RhdGUubmVlZERyYWluKSkgb25kcmFpbigpO1xuICB9XG5cbiAgLy8gSWYgdGhlIHVzZXIgcHVzaGVzIG1vcmUgZGF0YSB3aGlsZSB3ZSdyZSB3cml0aW5nIHRvIGRlc3QgdGhlbiB3ZSdsbCBlbmQgdXBcbiAgLy8gaW4gb25kYXRhIGFnYWluLiBIb3dldmVyLCB3ZSBvbmx5IHdhbnQgdG8gaW5jcmVhc2UgYXdhaXREcmFpbiBvbmNlIGJlY2F1c2VcbiAgLy8gZGVzdCB3aWxsIG9ubHkgZW1pdCBvbmUgJ2RyYWluJyBldmVudCBmb3IgdGhlIG11bHRpcGxlIHdyaXRlcy5cbiAgLy8gPT4gSW50cm9kdWNlIGEgZ3VhcmQgb24gaW5jcmVhc2luZyBhd2FpdERyYWluLlxuICB2YXIgaW5jcmVhc2VkQXdhaXREcmFpbiA9IGZhbHNlO1xuICBzcmMub24oJ2RhdGEnLCBvbmRhdGEpO1xuICBmdW5jdGlvbiBvbmRhdGEoY2h1bmspIHtcbiAgICBkZWJ1Zygnb25kYXRhJyk7XG4gICAgaW5jcmVhc2VkQXdhaXREcmFpbiA9IGZhbHNlO1xuICAgIHZhciByZXQgPSBkZXN0LndyaXRlKGNodW5rKTtcbiAgICBpZiAoZmFsc2UgPT09IHJldCAmJiAhaW5jcmVhc2VkQXdhaXREcmFpbikge1xuICAgICAgLy8gSWYgdGhlIHVzZXIgdW5waXBlZCBkdXJpbmcgYGRlc3Qud3JpdGUoKWAsIGl0IGlzIHBvc3NpYmxlXG4gICAgICAvLyB0byBnZXQgc3R1Y2sgaW4gYSBwZXJtYW5lbnRseSBwYXVzZWQgc3RhdGUgaWYgdGhhdCB3cml0ZVxuICAgICAgLy8gYWxzbyByZXR1cm5lZCBmYWxzZS5cbiAgICAgIC8vID0+IENoZWNrIHdoZXRoZXIgYGRlc3RgIGlzIHN0aWxsIGEgcGlwaW5nIGRlc3RpbmF0aW9uLlxuICAgICAgaWYgKChzdGF0ZS5waXBlc0NvdW50ID09PSAxICYmIHN0YXRlLnBpcGVzID09PSBkZXN0IHx8IHN0YXRlLnBpcGVzQ291bnQgPiAxICYmIGluZGV4T2Yoc3RhdGUucGlwZXMsIGRlc3QpICE9PSAtMSkgJiYgIWNsZWFuZWRVcCkge1xuICAgICAgICBkZWJ1ZygnZmFsc2Ugd3JpdGUgcmVzcG9uc2UsIHBhdXNlJywgc3JjLl9yZWFkYWJsZVN0YXRlLmF3YWl0RHJhaW4pO1xuICAgICAgICBzcmMuX3JlYWRhYmxlU3RhdGUuYXdhaXREcmFpbisrO1xuICAgICAgICBpbmNyZWFzZWRBd2FpdERyYWluID0gdHJ1ZTtcbiAgICAgIH1cbiAgICAgIHNyYy5wYXVzZSgpO1xuICAgIH1cbiAgfVxuXG4gIC8vIGlmIHRoZSBkZXN0IGhhcyBhbiBlcnJvciwgdGhlbiBzdG9wIHBpcGluZyBpbnRvIGl0LlxuICAvLyBob3dldmVyLCBkb24ndCBzdXBwcmVzcyB0aGUgdGhyb3dpbmcgYmVoYXZpb3IgZm9yIHRoaXMuXG4gIGZ1bmN0aW9uIG9uZXJyb3IoZXIpIHtcbiAgICBkZWJ1Zygnb25lcnJvcicsIGVyKTtcbiAgICB1bnBpcGUoKTtcbiAgICBkZXN0LnJlbW92ZUxpc3RlbmVyKCdlcnJvcicsIG9uZXJyb3IpO1xuICAgIGlmIChsaXN0ZW5lckNvdW50KGRlc3QsICdlcnJvcicpID09PSAwKSBkZXN0LmVtaXQoJ2Vycm9yJywgZXIpO1xuICB9XG5cbiAgLy8gTWFrZSBzdXJlIG91ciBlcnJvciBoYW5kbGVyIGlzIGF0dGFjaGVkIGJlZm9yZSB1c2VybGFuZCBvbmVzLlxuICBwcmVwZW5kTGlzdGVuZXIoZGVzdCwgJ2Vycm9yJywgb25lcnJvcik7XG5cbiAgLy8gQm90aCBjbG9zZSBhbmQgZmluaXNoIHNob3VsZCB0cmlnZ2VyIHVucGlwZSwgYnV0IG9ubHkgb25jZS5cbiAgZnVuY3Rpb24gb25jbG9zZSgpIHtcbiAgICBkZXN0LnJlbW92ZUxpc3RlbmVyKCdmaW5pc2gnLCBvbmZpbmlzaCk7XG4gICAgdW5waXBlKCk7XG4gIH1cbiAgZGVzdC5vbmNlKCdjbG9zZScsIG9uY2xvc2UpO1xuICBmdW5jdGlvbiBvbmZpbmlzaCgpIHtcbiAgICBkZWJ1Zygnb25maW5pc2gnKTtcbiAgICBkZXN0LnJlbW92ZUxpc3RlbmVyKCdjbG9zZScsIG9uY2xvc2UpO1xuICAgIHVucGlwZSgpO1xuICB9XG4gIGRlc3Qub25jZSgnZmluaXNoJywgb25maW5pc2gpO1xuXG4gIGZ1bmN0aW9uIHVucGlwZSgpIHtcbiAgICBkZWJ1ZygndW5waXBlJyk7XG4gICAgc3JjLnVucGlwZShkZXN0KTtcbiAgfVxuXG4gIC8vIHRlbGwgdGhlIGRlc3QgdGhhdCBpdCdzIGJlaW5nIHBpcGVkIHRvXG4gIGRlc3QuZW1pdCgncGlwZScsIHNyYyk7XG5cbiAgLy8gc3RhcnQgdGhlIGZsb3cgaWYgaXQgaGFzbid0IGJlZW4gc3RhcnRlZCBhbHJlYWR5LlxuICBpZiAoIXN0YXRlLmZsb3dpbmcpIHtcbiAgICBkZWJ1ZygncGlwZSByZXN1bWUnKTtcbiAgICBzcmMucmVzdW1lKCk7XG4gIH1cblxuICByZXR1cm4gZGVzdDtcbn07XG5cbmZ1bmN0aW9uIHBpcGVPbkRyYWluKHNyYykge1xuICByZXR1cm4gZnVuY3Rpb24gKCkge1xuICAgIHZhciBzdGF0ZSA9IHNyYy5fcmVhZGFibGVTdGF0ZTtcbiAgICBkZWJ1ZygncGlwZU9uRHJhaW4nLCBzdGF0ZS5hd2FpdERyYWluKTtcbiAgICBpZiAoc3RhdGUuYXdhaXREcmFpbikgc3RhdGUuYXdhaXREcmFpbi0tO1xuICAgIGlmIChzdGF0ZS5hd2FpdERyYWluID09PSAwICYmIHNyYy5saXN0ZW5lcnMoJ2RhdGEnKS5sZW5ndGgpIHtcbiAgICAgIHN0YXRlLmZsb3dpbmcgPSB0cnVlO1xuICAgICAgZmxvdyhzcmMpO1xuICAgIH1cbiAgfTtcbn1cblxuUmVhZGFibGUucHJvdG90eXBlLnVucGlwZSA9IGZ1bmN0aW9uIChkZXN0KSB7XG4gIHZhciBzdGF0ZSA9IHRoaXMuX3JlYWRhYmxlU3RhdGU7XG5cbiAgLy8gaWYgd2UncmUgbm90IHBpcGluZyBhbnl3aGVyZSwgdGhlbiBkbyBub3RoaW5nLlxuICBpZiAoc3RhdGUucGlwZXNDb3VudCA9PT0gMCkgcmV0dXJuIHRoaXM7XG5cbiAgLy8ganVzdCBvbmUgZGVzdGluYXRpb24uICBtb3N0IGNvbW1vbiBjYXNlLlxuICBpZiAoc3RhdGUucGlwZXNDb3VudCA9PT0gMSkge1xuICAgIC8vIHBhc3NlZCBpbiBvbmUsIGJ1dCBpdCdzIG5vdCB0aGUgcmlnaHQgb25lLlxuICAgIGlmIChkZXN0ICYmIGRlc3QgIT09IHN0YXRlLnBpcGVzKSByZXR1cm4gdGhpcztcblxuICAgIGlmICghZGVzdCkgZGVzdCA9IHN0YXRlLnBpcGVzO1xuXG4gICAgLy8gZ290IGEgbWF0Y2guXG4gICAgc3RhdGUucGlwZXMgPSBudWxsO1xuICAgIHN0YXRlLnBpcGVzQ291bnQgPSAwO1xuICAgIHN0YXRlLmZsb3dpbmcgPSBmYWxzZTtcbiAgICBpZiAoZGVzdCkgZGVzdC5lbWl0KCd1bnBpcGUnLCB0aGlzKTtcbiAgICByZXR1cm4gdGhpcztcbiAgfVxuXG4gIC8vIHNsb3cgY2FzZS4gbXVsdGlwbGUgcGlwZSBkZXN0aW5hdGlvbnMuXG5cbiAgaWYgKCFkZXN0KSB7XG4gICAgLy8gcmVtb3ZlIGFsbC5cbiAgICB2YXIgZGVzdHMgPSBzdGF0ZS5waXBlcztcbiAgICB2YXIgbGVuID0gc3RhdGUucGlwZXNDb3VudDtcbiAgICBzdGF0ZS5waXBlcyA9IG51bGw7XG4gICAgc3RhdGUucGlwZXNDb3VudCA9IDA7XG4gICAgc3RhdGUuZmxvd2luZyA9IGZhbHNlO1xuXG4gICAgZm9yICh2YXIgX2kgPSAwOyBfaSA8IGxlbjsgX2krKykge1xuICAgICAgZGVzdHNbX2ldLmVtaXQoJ3VucGlwZScsIHRoaXMpO1xuICAgIH1yZXR1cm4gdGhpcztcbiAgfVxuXG4gIC8vIHRyeSB0byBmaW5kIHRoZSByaWdodCBvbmUuXG4gIHZhciBpID0gaW5kZXhPZihzdGF0ZS5waXBlcywgZGVzdCk7XG4gIGlmIChpID09PSAtMSkgcmV0dXJuIHRoaXM7XG5cbiAgc3RhdGUucGlwZXMuc3BsaWNlKGksIDEpO1xuICBzdGF0ZS5waXBlc0NvdW50IC09IDE7XG4gIGlmIChzdGF0ZS5waXBlc0NvdW50ID09PSAxKSBzdGF0ZS5waXBlcyA9IHN0YXRlLnBpcGVzWzBdO1xuXG4gIGRlc3QuZW1pdCgndW5waXBlJywgdGhpcyk7XG5cbiAgcmV0dXJuIHRoaXM7XG59O1xuXG4vLyBzZXQgdXAgZGF0YSBldmVudHMgaWYgdGhleSBhcmUgYXNrZWQgZm9yXG4vLyBFbnN1cmUgcmVhZGFibGUgbGlzdGVuZXJzIGV2ZW50dWFsbHkgZ2V0IHNvbWV0aGluZ1xuUmVhZGFibGUucHJvdG90eXBlLm9uID0gZnVuY3Rpb24gKGV2LCBmbikge1xuICB2YXIgcmVzID0gRXZlbnRFbWl0dGVyLnByb3RvdHlwZS5vbi5jYWxsKHRoaXMsIGV2LCBmbik7XG5cbiAgaWYgKGV2ID09PSAnZGF0YScpIHtcbiAgICAvLyBTdGFydCBmbG93aW5nIG9uIG5leHQgdGljayBpZiBzdHJlYW0gaXNuJ3QgZXhwbGljaXRseSBwYXVzZWRcbiAgICBpZiAodGhpcy5fcmVhZGFibGVTdGF0ZS5mbG93aW5nICE9PSBmYWxzZSkgdGhpcy5yZXN1bWUoKTtcbiAgfSBlbHNlIGlmIChldiA9PT0gJ3JlYWRhYmxlJykge1xuICAgIHZhciBzdGF0ZSA9IHRoaXMuX3JlYWRhYmxlU3RhdGU7XG4gICAgaWYgKCFzdGF0ZS5lbmRFbWl0dGVkICYmICFzdGF0ZS5yZWFkYWJsZUxpc3RlbmluZykge1xuICAgICAgc3RhdGUucmVhZGFibGVMaXN0ZW5pbmcgPSBzdGF0ZS5uZWVkUmVhZGFibGUgPSB0cnVlO1xuICAgICAgc3RhdGUuZW1pdHRlZFJlYWRhYmxlID0gZmFsc2U7XG4gICAgICBpZiAoIXN0YXRlLnJlYWRpbmcpIHtcbiAgICAgICAgbmV4dFRpY2soblJlYWRpbmdOZXh0VGljaywgdGhpcyk7XG4gICAgICB9IGVsc2UgaWYgKHN0YXRlLmxlbmd0aCkge1xuICAgICAgICBlbWl0UmVhZGFibGUodGhpcywgc3RhdGUpO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIHJldHVybiByZXM7XG59O1xuUmVhZGFibGUucHJvdG90eXBlLmFkZExpc3RlbmVyID0gUmVhZGFibGUucHJvdG90eXBlLm9uO1xuXG5mdW5jdGlvbiBuUmVhZGluZ05leHRUaWNrKHNlbGYpIHtcbiAgZGVidWcoJ3JlYWRhYmxlIG5leHR0aWNrIHJlYWQgMCcpO1xuICBzZWxmLnJlYWQoMCk7XG59XG5cbi8vIHBhdXNlKCkgYW5kIHJlc3VtZSgpIGFyZSByZW1uYW50cyBvZiB0aGUgbGVnYWN5IHJlYWRhYmxlIHN0cmVhbSBBUElcbi8vIElmIHRoZSB1c2VyIHVzZXMgdGhlbSwgdGhlbiBzd2l0Y2ggaW50byBvbGQgbW9kZS5cblJlYWRhYmxlLnByb3RvdHlwZS5yZXN1bWUgPSBmdW5jdGlvbiAoKSB7XG4gIHZhciBzdGF0ZSA9IHRoaXMuX3JlYWRhYmxlU3RhdGU7XG4gIGlmICghc3RhdGUuZmxvd2luZykge1xuICAgIGRlYnVnKCdyZXN1bWUnKTtcbiAgICBzdGF0ZS5mbG93aW5nID0gdHJ1ZTtcbiAgICByZXN1bWUodGhpcywgc3RhdGUpO1xuICB9XG4gIHJldHVybiB0aGlzO1xufTtcblxuZnVuY3Rpb24gcmVzdW1lKHN0cmVhbSwgc3RhdGUpIHtcbiAgaWYgKCFzdGF0ZS5yZXN1bWVTY2hlZHVsZWQpIHtcbiAgICBzdGF0ZS5yZXN1bWVTY2hlZHVsZWQgPSB0cnVlO1xuICAgIG5leHRUaWNrKHJlc3VtZV8sIHN0cmVhbSwgc3RhdGUpO1xuICB9XG59XG5cbmZ1bmN0aW9uIHJlc3VtZV8oc3RyZWFtLCBzdGF0ZSkge1xuICBpZiAoIXN0YXRlLnJlYWRpbmcpIHtcbiAgICBkZWJ1ZygncmVzdW1lIHJlYWQgMCcpO1xuICAgIHN0cmVhbS5yZWFkKDApO1xuICB9XG5cbiAgc3RhdGUucmVzdW1lU2NoZWR1bGVkID0gZmFsc2U7XG4gIHN0YXRlLmF3YWl0RHJhaW4gPSAwO1xuICBzdHJlYW0uZW1pdCgncmVzdW1lJyk7XG4gIGZsb3coc3RyZWFtKTtcbiAgaWYgKHN0YXRlLmZsb3dpbmcgJiYgIXN0YXRlLnJlYWRpbmcpIHN0cmVhbS5yZWFkKDApO1xufVxuXG5SZWFkYWJsZS5wcm90b3R5cGUucGF1c2UgPSBmdW5jdGlvbiAoKSB7XG4gIGRlYnVnKCdjYWxsIHBhdXNlIGZsb3dpbmc9JWonLCB0aGlzLl9yZWFkYWJsZVN0YXRlLmZsb3dpbmcpO1xuICBpZiAoZmFsc2UgIT09IHRoaXMuX3JlYWRhYmxlU3RhdGUuZmxvd2luZykge1xuICAgIGRlYnVnKCdwYXVzZScpO1xuICAgIHRoaXMuX3JlYWRhYmxlU3RhdGUuZmxvd2luZyA9IGZhbHNlO1xuICAgIHRoaXMuZW1pdCgncGF1c2UnKTtcbiAgfVxuICByZXR1cm4gdGhpcztcbn07XG5cbmZ1bmN0aW9uIGZsb3coc3RyZWFtKSB7XG4gIHZhciBzdGF0ZSA9IHN0cmVhbS5fcmVhZGFibGVTdGF0ZTtcbiAgZGVidWcoJ2Zsb3cnLCBzdGF0ZS5mbG93aW5nKTtcbiAgd2hpbGUgKHN0YXRlLmZsb3dpbmcgJiYgc3RyZWFtLnJlYWQoKSAhPT0gbnVsbCkge31cbn1cblxuLy8gd3JhcCBhbiBvbGQtc3R5bGUgc3RyZWFtIGFzIHRoZSBhc3luYyBkYXRhIHNvdXJjZS5cbi8vIFRoaXMgaXMgKm5vdCogcGFydCBvZiB0aGUgcmVhZGFibGUgc3RyZWFtIGludGVyZmFjZS5cbi8vIEl0IGlzIGFuIHVnbHkgdW5mb3J0dW5hdGUgbWVzcyBvZiBoaXN0b3J5LlxuUmVhZGFibGUucHJvdG90eXBlLndyYXAgPSBmdW5jdGlvbiAoc3RyZWFtKSB7XG4gIHZhciBzdGF0ZSA9IHRoaXMuX3JlYWRhYmxlU3RhdGU7XG4gIHZhciBwYXVzZWQgPSBmYWxzZTtcblxuICB2YXIgc2VsZiA9IHRoaXM7XG4gIHN0cmVhbS5vbignZW5kJywgZnVuY3Rpb24gKCkge1xuICAgIGRlYnVnKCd3cmFwcGVkIGVuZCcpO1xuICAgIGlmIChzdGF0ZS5kZWNvZGVyICYmICFzdGF0ZS5lbmRlZCkge1xuICAgICAgdmFyIGNodW5rID0gc3RhdGUuZGVjb2Rlci5lbmQoKTtcbiAgICAgIGlmIChjaHVuayAmJiBjaHVuay5sZW5ndGgpIHNlbGYucHVzaChjaHVuayk7XG4gICAgfVxuXG4gICAgc2VsZi5wdXNoKG51bGwpO1xuICB9KTtcblxuICBzdHJlYW0ub24oJ2RhdGEnLCBmdW5jdGlvbiAoY2h1bmspIHtcbiAgICBkZWJ1Zygnd3JhcHBlZCBkYXRhJyk7XG4gICAgaWYgKHN0YXRlLmRlY29kZXIpIGNodW5rID0gc3RhdGUuZGVjb2Rlci53cml0ZShjaHVuayk7XG5cbiAgICAvLyBkb24ndCBza2lwIG92ZXIgZmFsc3kgdmFsdWVzIGluIG9iamVjdE1vZGVcbiAgICBpZiAoc3RhdGUub2JqZWN0TW9kZSAmJiAoY2h1bmsgPT09IG51bGwgfHwgY2h1bmsgPT09IHVuZGVmaW5lZCkpIHJldHVybjtlbHNlIGlmICghc3RhdGUub2JqZWN0TW9kZSAmJiAoIWNodW5rIHx8ICFjaHVuay5sZW5ndGgpKSByZXR1cm47XG5cbiAgICB2YXIgcmV0ID0gc2VsZi5wdXNoKGNodW5rKTtcbiAgICBpZiAoIXJldCkge1xuICAgICAgcGF1c2VkID0gdHJ1ZTtcbiAgICAgIHN0cmVhbS5wYXVzZSgpO1xuICAgIH1cbiAgfSk7XG5cbiAgLy8gcHJveHkgYWxsIHRoZSBvdGhlciBtZXRob2RzLlxuICAvLyBpbXBvcnRhbnQgd2hlbiB3cmFwcGluZyBmaWx0ZXJzIGFuZCBkdXBsZXhlcy5cbiAgZm9yICh2YXIgaSBpbiBzdHJlYW0pIHtcbiAgICBpZiAodGhpc1tpXSA9PT0gdW5kZWZpbmVkICYmIHR5cGVvZiBzdHJlYW1baV0gPT09ICdmdW5jdGlvbicpIHtcbiAgICAgIHRoaXNbaV0gPSBmdW5jdGlvbiAobWV0aG9kKSB7XG4gICAgICAgIHJldHVybiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgcmV0dXJuIHN0cmVhbVttZXRob2RdLmFwcGx5KHN0cmVhbSwgYXJndW1lbnRzKTtcbiAgICAgICAgfTtcbiAgICAgIH0oaSk7XG4gICAgfVxuICB9XG5cbiAgLy8gcHJveHkgY2VydGFpbiBpbXBvcnRhbnQgZXZlbnRzLlxuICB2YXIgZXZlbnRzID0gWydlcnJvcicsICdjbG9zZScsICdkZXN0cm95JywgJ3BhdXNlJywgJ3Jlc3VtZSddO1xuICBmb3JFYWNoKGV2ZW50cywgZnVuY3Rpb24gKGV2KSB7XG4gICAgc3RyZWFtLm9uKGV2LCBzZWxmLmVtaXQuYmluZChzZWxmLCBldikpO1xuICB9KTtcblxuICAvLyB3aGVuIHdlIHRyeSB0byBjb25zdW1lIHNvbWUgbW9yZSBieXRlcywgc2ltcGx5IHVucGF1c2UgdGhlXG4gIC8vIHVuZGVybHlpbmcgc3RyZWFtLlxuICBzZWxmLl9yZWFkID0gZnVuY3Rpb24gKG4pIHtcbiAgICBkZWJ1Zygnd3JhcHBlZCBfcmVhZCcsIG4pO1xuICAgIGlmIChwYXVzZWQpIHtcbiAgICAgIHBhdXNlZCA9IGZhbHNlO1xuICAgICAgc3RyZWFtLnJlc3VtZSgpO1xuICAgIH1cbiAgfTtcblxuICByZXR1cm4gc2VsZjtcbn07XG5cbi8vIGV4cG9zZWQgZm9yIHRlc3RpbmcgcHVycG9zZXMgb25seS5cblJlYWRhYmxlLl9mcm9tTGlzdCA9IGZyb21MaXN0O1xuXG4vLyBQbHVjayBvZmYgbiBieXRlcyBmcm9tIGFuIGFycmF5IG9mIGJ1ZmZlcnMuXG4vLyBMZW5ndGggaXMgdGhlIGNvbWJpbmVkIGxlbmd0aHMgb2YgYWxsIHRoZSBidWZmZXJzIGluIHRoZSBsaXN0LlxuLy8gVGhpcyBmdW5jdGlvbiBpcyBkZXNpZ25lZCB0byBiZSBpbmxpbmFibGUsIHNvIHBsZWFzZSB0YWtlIGNhcmUgd2hlbiBtYWtpbmdcbi8vIGNoYW5nZXMgdG8gdGhlIGZ1bmN0aW9uIGJvZHkuXG5mdW5jdGlvbiBmcm9tTGlzdChuLCBzdGF0ZSkge1xuICAvLyBub3RoaW5nIGJ1ZmZlcmVkXG4gIGlmIChzdGF0ZS5sZW5ndGggPT09IDApIHJldHVybiBudWxsO1xuXG4gIHZhciByZXQ7XG4gIGlmIChzdGF0ZS5vYmplY3RNb2RlKSByZXQgPSBzdGF0ZS5idWZmZXIuc2hpZnQoKTtlbHNlIGlmICghbiB8fCBuID49IHN0YXRlLmxlbmd0aCkge1xuICAgIC8vIHJlYWQgaXQgYWxsLCB0cnVuY2F0ZSB0aGUgbGlzdFxuICAgIGlmIChzdGF0ZS5kZWNvZGVyKSByZXQgPSBzdGF0ZS5idWZmZXIuam9pbignJyk7ZWxzZSBpZiAoc3RhdGUuYnVmZmVyLmxlbmd0aCA9PT0gMSkgcmV0ID0gc3RhdGUuYnVmZmVyLmhlYWQuZGF0YTtlbHNlIHJldCA9IHN0YXRlLmJ1ZmZlci5jb25jYXQoc3RhdGUubGVuZ3RoKTtcbiAgICBzdGF0ZS5idWZmZXIuY2xlYXIoKTtcbiAgfSBlbHNlIHtcbiAgICAvLyByZWFkIHBhcnQgb2YgbGlzdFxuICAgIHJldCA9IGZyb21MaXN0UGFydGlhbChuLCBzdGF0ZS5idWZmZXIsIHN0YXRlLmRlY29kZXIpO1xuICB9XG5cbiAgcmV0dXJuIHJldDtcbn1cblxuLy8gRXh0cmFjdHMgb25seSBlbm91Z2ggYnVmZmVyZWQgZGF0YSB0byBzYXRpc2Z5IHRoZSBhbW91bnQgcmVxdWVzdGVkLlxuLy8gVGhpcyBmdW5jdGlvbiBpcyBkZXNpZ25lZCB0byBiZSBpbmxpbmFibGUsIHNvIHBsZWFzZSB0YWtlIGNhcmUgd2hlbiBtYWtpbmdcbi8vIGNoYW5nZXMgdG8gdGhlIGZ1bmN0aW9uIGJvZHkuXG5mdW5jdGlvbiBmcm9tTGlzdFBhcnRpYWwobiwgbGlzdCwgaGFzU3RyaW5ncykge1xuICB2YXIgcmV0O1xuICBpZiAobiA8IGxpc3QuaGVhZC5kYXRhLmxlbmd0aCkge1xuICAgIC8vIHNsaWNlIGlzIHRoZSBzYW1lIGZvciBidWZmZXJzIGFuZCBzdHJpbmdzXG4gICAgcmV0ID0gbGlzdC5oZWFkLmRhdGEuc2xpY2UoMCwgbik7XG4gICAgbGlzdC5oZWFkLmRhdGEgPSBsaXN0LmhlYWQuZGF0YS5zbGljZShuKTtcbiAgfSBlbHNlIGlmIChuID09PSBsaXN0LmhlYWQuZGF0YS5sZW5ndGgpIHtcbiAgICAvLyBmaXJzdCBjaHVuayBpcyBhIHBlcmZlY3QgbWF0Y2hcbiAgICByZXQgPSBsaXN0LnNoaWZ0KCk7XG4gIH0gZWxzZSB7XG4gICAgLy8gcmVzdWx0IHNwYW5zIG1vcmUgdGhhbiBvbmUgYnVmZmVyXG4gICAgcmV0ID0gaGFzU3RyaW5ncyA/IGNvcHlGcm9tQnVmZmVyU3RyaW5nKG4sIGxpc3QpIDogY29weUZyb21CdWZmZXIobiwgbGlzdCk7XG4gIH1cbiAgcmV0dXJuIHJldDtcbn1cblxuLy8gQ29waWVzIGEgc3BlY2lmaWVkIGFtb3VudCBvZiBjaGFyYWN0ZXJzIGZyb20gdGhlIGxpc3Qgb2YgYnVmZmVyZWQgZGF0YVxuLy8gY2h1bmtzLlxuLy8gVGhpcyBmdW5jdGlvbiBpcyBkZXNpZ25lZCB0byBiZSBpbmxpbmFibGUsIHNvIHBsZWFzZSB0YWtlIGNhcmUgd2hlbiBtYWtpbmdcbi8vIGNoYW5nZXMgdG8gdGhlIGZ1bmN0aW9uIGJvZHkuXG5mdW5jdGlvbiBjb3B5RnJvbUJ1ZmZlclN0cmluZyhuLCBsaXN0KSB7XG4gIHZhciBwID0gbGlzdC5oZWFkO1xuICB2YXIgYyA9IDE7XG4gIHZhciByZXQgPSBwLmRhdGE7XG4gIG4gLT0gcmV0Lmxlbmd0aDtcbiAgd2hpbGUgKHAgPSBwLm5leHQpIHtcbiAgICB2YXIgc3RyID0gcC5kYXRhO1xuICAgIHZhciBuYiA9IG4gPiBzdHIubGVuZ3RoID8gc3RyLmxlbmd0aCA6IG47XG4gICAgaWYgKG5iID09PSBzdHIubGVuZ3RoKSByZXQgKz0gc3RyO2Vsc2UgcmV0ICs9IHN0ci5zbGljZSgwLCBuKTtcbiAgICBuIC09IG5iO1xuICAgIGlmIChuID09PSAwKSB7XG4gICAgICBpZiAobmIgPT09IHN0ci5sZW5ndGgpIHtcbiAgICAgICAgKytjO1xuICAgICAgICBpZiAocC5uZXh0KSBsaXN0LmhlYWQgPSBwLm5leHQ7ZWxzZSBsaXN0LmhlYWQgPSBsaXN0LnRhaWwgPSBudWxsO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgbGlzdC5oZWFkID0gcDtcbiAgICAgICAgcC5kYXRhID0gc3RyLnNsaWNlKG5iKTtcbiAgICAgIH1cbiAgICAgIGJyZWFrO1xuICAgIH1cbiAgICArK2M7XG4gIH1cbiAgbGlzdC5sZW5ndGggLT0gYztcbiAgcmV0dXJuIHJldDtcbn1cblxuLy8gQ29waWVzIGEgc3BlY2lmaWVkIGFtb3VudCBvZiBieXRlcyBmcm9tIHRoZSBsaXN0IG9mIGJ1ZmZlcmVkIGRhdGEgY2h1bmtzLlxuLy8gVGhpcyBmdW5jdGlvbiBpcyBkZXNpZ25lZCB0byBiZSBpbmxpbmFibGUsIHNvIHBsZWFzZSB0YWtlIGNhcmUgd2hlbiBtYWtpbmdcbi8vIGNoYW5nZXMgdG8gdGhlIGZ1bmN0aW9uIGJvZHkuXG5mdW5jdGlvbiBjb3B5RnJvbUJ1ZmZlcihuLCBsaXN0KSB7XG4gIHZhciByZXQgPSBCdWZmZXIuYWxsb2NVbnNhZmUobik7XG4gIHZhciBwID0gbGlzdC5oZWFkO1xuICB2YXIgYyA9IDE7XG4gIHAuZGF0YS5jb3B5KHJldCk7XG4gIG4gLT0gcC5kYXRhLmxlbmd0aDtcbiAgd2hpbGUgKHAgPSBwLm5leHQpIHtcbiAgICB2YXIgYnVmID0gcC5kYXRhO1xuICAgIHZhciBuYiA9IG4gPiBidWYubGVuZ3RoID8gYnVmLmxlbmd0aCA6IG47XG4gICAgYnVmLmNvcHkocmV0LCByZXQubGVuZ3RoIC0gbiwgMCwgbmIpO1xuICAgIG4gLT0gbmI7XG4gICAgaWYgKG4gPT09IDApIHtcbiAgICAgIGlmIChuYiA9PT0gYnVmLmxlbmd0aCkge1xuICAgICAgICArK2M7XG4gICAgICAgIGlmIChwLm5leHQpIGxpc3QuaGVhZCA9IHAubmV4dDtlbHNlIGxpc3QuaGVhZCA9IGxpc3QudGFpbCA9IG51bGw7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBsaXN0LmhlYWQgPSBwO1xuICAgICAgICBwLmRhdGEgPSBidWYuc2xpY2UobmIpO1xuICAgICAgfVxuICAgICAgYnJlYWs7XG4gICAgfVxuICAgICsrYztcbiAgfVxuICBsaXN0Lmxlbmd0aCAtPSBjO1xuICByZXR1cm4gcmV0O1xufVxuXG5mdW5jdGlvbiBlbmRSZWFkYWJsZShzdHJlYW0pIHtcbiAgdmFyIHN0YXRlID0gc3RyZWFtLl9yZWFkYWJsZVN0YXRlO1xuXG4gIC8vIElmIHdlIGdldCBoZXJlIGJlZm9yZSBjb25zdW1pbmcgYWxsIHRoZSBieXRlcywgdGhlbiB0aGF0IGlzIGFcbiAgLy8gYnVnIGluIG5vZGUuICBTaG91bGQgbmV2ZXIgaGFwcGVuLlxuICBpZiAoc3RhdGUubGVuZ3RoID4gMCkgdGhyb3cgbmV3IEVycm9yKCdcImVuZFJlYWRhYmxlKClcIiBjYWxsZWQgb24gbm9uLWVtcHR5IHN0cmVhbScpO1xuXG4gIGlmICghc3RhdGUuZW5kRW1pdHRlZCkge1xuICAgIHN0YXRlLmVuZGVkID0gdHJ1ZTtcbiAgICBuZXh0VGljayhlbmRSZWFkYWJsZU5ULCBzdGF0ZSwgc3RyZWFtKTtcbiAgfVxufVxuXG5mdW5jdGlvbiBlbmRSZWFkYWJsZU5UKHN0YXRlLCBzdHJlYW0pIHtcbiAgLy8gQ2hlY2sgdGhhdCB3ZSBkaWRuJ3QgZ2V0IG9uZSBsYXN0IHVuc2hpZnQuXG4gIGlmICghc3RhdGUuZW5kRW1pdHRlZCAmJiBzdGF0ZS5sZW5ndGggPT09IDApIHtcbiAgICBzdGF0ZS5lbmRFbWl0dGVkID0gdHJ1ZTtcbiAgICBzdHJlYW0ucmVhZGFibGUgPSBmYWxzZTtcbiAgICBzdHJlYW0uZW1pdCgnZW5kJyk7XG4gIH1cbn1cblxuZnVuY3Rpb24gZm9yRWFjaCh4cywgZikge1xuICBmb3IgKHZhciBpID0gMCwgbCA9IHhzLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuICAgIGYoeHNbaV0sIGkpO1xuICB9XG59XG5cbmZ1bmN0aW9uIGluZGV4T2YoeHMsIHgpIHtcbiAgZm9yICh2YXIgaSA9IDAsIGwgPSB4cy5sZW5ndGg7IGkgPCBsOyBpKyspIHtcbiAgICBpZiAoeHNbaV0gPT09IHgpIHJldHVybiBpO1xuICB9XG4gIHJldHVybiAtMTtcbn1cbiIsICIvLyBBIGJpdCBzaW1wbGVyIHRoYW4gcmVhZGFibGUgc3RyZWFtcy5cbi8vIEltcGxlbWVudCBhbiBhc3luYyAuX3dyaXRlKGNodW5rLCBlbmNvZGluZywgY2IpLCBhbmQgaXQnbGwgaGFuZGxlIGFsbFxuLy8gdGhlIGRyYWluIGV2ZW50IGVtaXNzaW9uIGFuZCBidWZmZXJpbmcuXG5cblxuaW1wb3J0IHtpbmhlcml0cywgZGVwcmVjYXRlfSBmcm9tICd1dGlsJztcbmltcG9ydCB7QnVmZmVyfSBmcm9tICdidWZmZXInO1xuV3JpdGFibGUuV3JpdGFibGVTdGF0ZSA9IFdyaXRhYmxlU3RhdGU7XG5pbXBvcnQge0V2ZW50RW1pdHRlcn0gZnJvbSAnZXZlbnRzJztcbmltcG9ydCB7RHVwbGV4fSBmcm9tICcuL2R1cGxleCc7XG5pbXBvcnQge25leHRUaWNrfSBmcm9tICdwcm9jZXNzJztcbmluaGVyaXRzKFdyaXRhYmxlLCBFdmVudEVtaXR0ZXIpO1xuXG5mdW5jdGlvbiBub3AoKSB7fVxuXG5mdW5jdGlvbiBXcml0ZVJlcShjaHVuaywgZW5jb2RpbmcsIGNiKSB7XG4gIHRoaXMuY2h1bmsgPSBjaHVuaztcbiAgdGhpcy5lbmNvZGluZyA9IGVuY29kaW5nO1xuICB0aGlzLmNhbGxiYWNrID0gY2I7XG4gIHRoaXMubmV4dCA9IG51bGw7XG59XG5cbmZ1bmN0aW9uIFdyaXRhYmxlU3RhdGUob3B0aW9ucywgc3RyZWFtKSB7XG4gIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCAnYnVmZmVyJywge1xuICAgIGdldDogZGVwcmVjYXRlKGZ1bmN0aW9uICgpIHtcbiAgICAgIHJldHVybiB0aGlzLmdldEJ1ZmZlcigpO1xuICAgIH0sICdfd3JpdGFibGVTdGF0ZS5idWZmZXIgaXMgZGVwcmVjYXRlZC4gVXNlIF93cml0YWJsZVN0YXRlLmdldEJ1ZmZlciAnICsgJ2luc3RlYWQuJylcbiAgfSk7XG4gIG9wdGlvbnMgPSBvcHRpb25zIHx8IHt9O1xuXG4gIC8vIG9iamVjdCBzdHJlYW0gZmxhZyB0byBpbmRpY2F0ZSB3aGV0aGVyIG9yIG5vdCB0aGlzIHN0cmVhbVxuICAvLyBjb250YWlucyBidWZmZXJzIG9yIG9iamVjdHMuXG4gIHRoaXMub2JqZWN0TW9kZSA9ICEhb3B0aW9ucy5vYmplY3RNb2RlO1xuXG4gIGlmIChzdHJlYW0gaW5zdGFuY2VvZiBEdXBsZXgpIHRoaXMub2JqZWN0TW9kZSA9IHRoaXMub2JqZWN0TW9kZSB8fCAhIW9wdGlvbnMud3JpdGFibGVPYmplY3RNb2RlO1xuXG4gIC8vIHRoZSBwb2ludCBhdCB3aGljaCB3cml0ZSgpIHN0YXJ0cyByZXR1cm5pbmcgZmFsc2VcbiAgLy8gTm90ZTogMCBpcyBhIHZhbGlkIHZhbHVlLCBtZWFucyB0aGF0IHdlIGFsd2F5cyByZXR1cm4gZmFsc2UgaWZcbiAgLy8gdGhlIGVudGlyZSBidWZmZXIgaXMgbm90IGZsdXNoZWQgaW1tZWRpYXRlbHkgb24gd3JpdGUoKVxuICB2YXIgaHdtID0gb3B0aW9ucy5oaWdoV2F0ZXJNYXJrO1xuICB2YXIgZGVmYXVsdEh3bSA9IHRoaXMub2JqZWN0TW9kZSA/IDE2IDogMTYgKiAxMDI0O1xuICB0aGlzLmhpZ2hXYXRlck1hcmsgPSBod20gfHwgaHdtID09PSAwID8gaHdtIDogZGVmYXVsdEh3bTtcblxuICAvLyBjYXN0IHRvIGludHMuXG4gIHRoaXMuaGlnaFdhdGVyTWFyayA9IH4gfnRoaXMuaGlnaFdhdGVyTWFyaztcblxuICB0aGlzLm5lZWREcmFpbiA9IGZhbHNlO1xuICAvLyBhdCB0aGUgc3RhcnQgb2YgY2FsbGluZyBlbmQoKVxuICB0aGlzLmVuZGluZyA9IGZhbHNlO1xuICAvLyB3aGVuIGVuZCgpIGhhcyBiZWVuIGNhbGxlZCwgYW5kIHJldHVybmVkXG4gIHRoaXMuZW5kZWQgPSBmYWxzZTtcbiAgLy8gd2hlbiAnZmluaXNoJyBpcyBlbWl0dGVkXG4gIHRoaXMuZmluaXNoZWQgPSBmYWxzZTtcblxuICAvLyBzaG91bGQgd2UgZGVjb2RlIHN0cmluZ3MgaW50byBidWZmZXJzIGJlZm9yZSBwYXNzaW5nIHRvIF93cml0ZT9cbiAgLy8gdGhpcyBpcyBoZXJlIHNvIHRoYXQgc29tZSBub2RlLWNvcmUgc3RyZWFtcyBjYW4gb3B0aW1pemUgc3RyaW5nXG4gIC8vIGhhbmRsaW5nIGF0IGEgbG93ZXIgbGV2ZWwuXG4gIHZhciBub0RlY29kZSA9IG9wdGlvbnMuZGVjb2RlU3RyaW5ncyA9PT0gZmFsc2U7XG4gIHRoaXMuZGVjb2RlU3RyaW5ncyA9ICFub0RlY29kZTtcblxuICAvLyBDcnlwdG8gaXMga2luZCBvZiBvbGQgYW5kIGNydXN0eS4gIEhpc3RvcmljYWxseSwgaXRzIGRlZmF1bHQgc3RyaW5nXG4gIC8vIGVuY29kaW5nIGlzICdiaW5hcnknIHNvIHdlIGhhdmUgdG8gbWFrZSB0aGlzIGNvbmZpZ3VyYWJsZS5cbiAgLy8gRXZlcnl0aGluZyBlbHNlIGluIHRoZSB1bml2ZXJzZSB1c2VzICd1dGY4JywgdGhvdWdoLlxuICB0aGlzLmRlZmF1bHRFbmNvZGluZyA9IG9wdGlvbnMuZGVmYXVsdEVuY29kaW5nIHx8ICd1dGY4JztcblxuICAvLyBub3QgYW4gYWN0dWFsIGJ1ZmZlciB3ZSBrZWVwIHRyYWNrIG9mLCBidXQgYSBtZWFzdXJlbWVudFxuICAvLyBvZiBob3cgbXVjaCB3ZSdyZSB3YWl0aW5nIHRvIGdldCBwdXNoZWQgdG8gc29tZSB1bmRlcmx5aW5nXG4gIC8vIHNvY2tldCBvciBmaWxlLlxuICB0aGlzLmxlbmd0aCA9IDA7XG5cbiAgLy8gYSBmbGFnIHRvIHNlZSB3aGVuIHdlJ3JlIGluIHRoZSBtaWRkbGUgb2YgYSB3cml0ZS5cbiAgdGhpcy53cml0aW5nID0gZmFsc2U7XG5cbiAgLy8gd2hlbiB0cnVlIGFsbCB3cml0ZXMgd2lsbCBiZSBidWZmZXJlZCB1bnRpbCAudW5jb3JrKCkgY2FsbFxuICB0aGlzLmNvcmtlZCA9IDA7XG5cbiAgLy8gYSBmbGFnIHRvIGJlIGFibGUgdG8gdGVsbCBpZiB0aGUgb253cml0ZSBjYiBpcyBjYWxsZWQgaW1tZWRpYXRlbHksXG4gIC8vIG9yIG9uIGEgbGF0ZXIgdGljay4gIFdlIHNldCB0aGlzIHRvIHRydWUgYXQgZmlyc3QsIGJlY2F1c2UgYW55XG4gIC8vIGFjdGlvbnMgdGhhdCBzaG91bGRuJ3QgaGFwcGVuIHVudGlsIFwibGF0ZXJcIiBzaG91bGQgZ2VuZXJhbGx5IGFsc29cbiAgLy8gbm90IGhhcHBlbiBiZWZvcmUgdGhlIGZpcnN0IHdyaXRlIGNhbGwuXG4gIHRoaXMuc3luYyA9IHRydWU7XG5cbiAgLy8gYSBmbGFnIHRvIGtub3cgaWYgd2UncmUgcHJvY2Vzc2luZyBwcmV2aW91c2x5IGJ1ZmZlcmVkIGl0ZW1zLCB3aGljaFxuICAvLyBtYXkgY2FsbCB0aGUgX3dyaXRlKCkgY2FsbGJhY2sgaW4gdGhlIHNhbWUgdGljaywgc28gdGhhdCB3ZSBkb24ndFxuICAvLyBlbmQgdXAgaW4gYW4gb3ZlcmxhcHBlZCBvbndyaXRlIHNpdHVhdGlvbi5cbiAgdGhpcy5idWZmZXJQcm9jZXNzaW5nID0gZmFsc2U7XG5cbiAgLy8gdGhlIGNhbGxiYWNrIHRoYXQncyBwYXNzZWQgdG8gX3dyaXRlKGNodW5rLGNiKVxuICB0aGlzLm9ud3JpdGUgPSBmdW5jdGlvbiAoZXIpIHtcbiAgICBvbndyaXRlKHN0cmVhbSwgZXIpO1xuICB9O1xuXG4gIC8vIHRoZSBjYWxsYmFjayB0aGF0IHRoZSB1c2VyIHN1cHBsaWVzIHRvIHdyaXRlKGNodW5rLGVuY29kaW5nLGNiKVxuICB0aGlzLndyaXRlY2IgPSBudWxsO1xuXG4gIC8vIHRoZSBhbW91bnQgdGhhdCBpcyBiZWluZyB3cml0dGVuIHdoZW4gX3dyaXRlIGlzIGNhbGxlZC5cbiAgdGhpcy53cml0ZWxlbiA9IDA7XG5cbiAgdGhpcy5idWZmZXJlZFJlcXVlc3QgPSBudWxsO1xuICB0aGlzLmxhc3RCdWZmZXJlZFJlcXVlc3QgPSBudWxsO1xuXG4gIC8vIG51bWJlciBvZiBwZW5kaW5nIHVzZXItc3VwcGxpZWQgd3JpdGUgY2FsbGJhY2tzXG4gIC8vIHRoaXMgbXVzdCBiZSAwIGJlZm9yZSAnZmluaXNoJyBjYW4gYmUgZW1pdHRlZFxuICB0aGlzLnBlbmRpbmdjYiA9IDA7XG5cbiAgLy8gZW1pdCBwcmVmaW5pc2ggaWYgdGhlIG9ubHkgdGhpbmcgd2UncmUgd2FpdGluZyBmb3IgaXMgX3dyaXRlIGNic1xuICAvLyBUaGlzIGlzIHJlbGV2YW50IGZvciBzeW5jaHJvbm91cyBUcmFuc2Zvcm0gc3RyZWFtc1xuICB0aGlzLnByZWZpbmlzaGVkID0gZmFsc2U7XG5cbiAgLy8gVHJ1ZSBpZiB0aGUgZXJyb3Igd2FzIGFscmVhZHkgZW1pdHRlZCBhbmQgc2hvdWxkIG5vdCBiZSB0aHJvd24gYWdhaW5cbiAgdGhpcy5lcnJvckVtaXR0ZWQgPSBmYWxzZTtcblxuICAvLyBjb3VudCBidWZmZXJlZCByZXF1ZXN0c1xuICB0aGlzLmJ1ZmZlcmVkUmVxdWVzdENvdW50ID0gMDtcblxuICAvLyBhbGxvY2F0ZSB0aGUgZmlyc3QgQ29ya2VkUmVxdWVzdCwgdGhlcmUgaXMgYWx3YXlzXG4gIC8vIG9uZSBhbGxvY2F0ZWQgYW5kIGZyZWUgdG8gdXNlLCBhbmQgd2UgbWFpbnRhaW4gYXQgbW9zdCB0d29cbiAgdGhpcy5jb3JrZWRSZXF1ZXN0c0ZyZWUgPSBuZXcgQ29ya2VkUmVxdWVzdCh0aGlzKTtcbn1cblxuV3JpdGFibGVTdGF0ZS5wcm90b3R5cGUuZ2V0QnVmZmVyID0gZnVuY3Rpb24gd3JpdGFibGVTdGF0ZUdldEJ1ZmZlcigpIHtcbiAgdmFyIGN1cnJlbnQgPSB0aGlzLmJ1ZmZlcmVkUmVxdWVzdDtcbiAgdmFyIG91dCA9IFtdO1xuICB3aGlsZSAoY3VycmVudCkge1xuICAgIG91dC5wdXNoKGN1cnJlbnQpO1xuICAgIGN1cnJlbnQgPSBjdXJyZW50Lm5leHQ7XG4gIH1cbiAgcmV0dXJuIG91dDtcbn07XG5cbmV4cG9ydCBkZWZhdWx0IFdyaXRhYmxlO1xuZXhwb3J0IGZ1bmN0aW9uIFdyaXRhYmxlKG9wdGlvbnMpIHtcblxuICAvLyBXcml0YWJsZSBjdG9yIGlzIGFwcGxpZWQgdG8gRHVwbGV4ZXMsIHRob3VnaCB0aGV5J3JlIG5vdFxuICAvLyBpbnN0YW5jZW9mIFdyaXRhYmxlLCB0aGV5J3JlIGluc3RhbmNlb2YgUmVhZGFibGUuXG4gIGlmICghKHRoaXMgaW5zdGFuY2VvZiBXcml0YWJsZSkgJiYgISh0aGlzIGluc3RhbmNlb2YgRHVwbGV4KSkgcmV0dXJuIG5ldyBXcml0YWJsZShvcHRpb25zKTtcblxuICB0aGlzLl93cml0YWJsZVN0YXRlID0gbmV3IFdyaXRhYmxlU3RhdGUob3B0aW9ucywgdGhpcyk7XG5cbiAgLy8gbGVnYWN5LlxuICB0aGlzLndyaXRhYmxlID0gdHJ1ZTtcblxuICBpZiAob3B0aW9ucykge1xuICAgIGlmICh0eXBlb2Ygb3B0aW9ucy53cml0ZSA9PT0gJ2Z1bmN0aW9uJykgdGhpcy5fd3JpdGUgPSBvcHRpb25zLndyaXRlO1xuXG4gICAgaWYgKHR5cGVvZiBvcHRpb25zLndyaXRldiA9PT0gJ2Z1bmN0aW9uJykgdGhpcy5fd3JpdGV2ID0gb3B0aW9ucy53cml0ZXY7XG4gIH1cblxuICBFdmVudEVtaXR0ZXIuY2FsbCh0aGlzKTtcbn1cblxuLy8gT3RoZXJ3aXNlIHBlb3BsZSBjYW4gcGlwZSBXcml0YWJsZSBzdHJlYW1zLCB3aGljaCBpcyBqdXN0IHdyb25nLlxuV3JpdGFibGUucHJvdG90eXBlLnBpcGUgPSBmdW5jdGlvbiAoKSB7XG4gIHRoaXMuZW1pdCgnZXJyb3InLCBuZXcgRXJyb3IoJ0Nhbm5vdCBwaXBlLCBub3QgcmVhZGFibGUnKSk7XG59O1xuXG5mdW5jdGlvbiB3cml0ZUFmdGVyRW5kKHN0cmVhbSwgY2IpIHtcbiAgdmFyIGVyID0gbmV3IEVycm9yKCd3cml0ZSBhZnRlciBlbmQnKTtcbiAgLy8gVE9ETzogZGVmZXIgZXJyb3IgZXZlbnRzIGNvbnNpc3RlbnRseSBldmVyeXdoZXJlLCBub3QganVzdCB0aGUgY2JcbiAgc3RyZWFtLmVtaXQoJ2Vycm9yJywgZXIpO1xuICBuZXh0VGljayhjYiwgZXIpO1xufVxuXG4vLyBJZiB3ZSBnZXQgc29tZXRoaW5nIHRoYXQgaXMgbm90IGEgYnVmZmVyLCBzdHJpbmcsIG51bGwsIG9yIHVuZGVmaW5lZCxcbi8vIGFuZCB3ZSdyZSBub3QgaW4gb2JqZWN0TW9kZSwgdGhlbiB0aGF0J3MgYW4gZXJyb3IuXG4vLyBPdGhlcndpc2Ugc3RyZWFtIGNodW5rcyBhcmUgYWxsIGNvbnNpZGVyZWQgdG8gYmUgb2YgbGVuZ3RoPTEsIGFuZCB0aGVcbi8vIHdhdGVybWFya3MgZGV0ZXJtaW5lIGhvdyBtYW55IG9iamVjdHMgdG8ga2VlcCBpbiB0aGUgYnVmZmVyLCByYXRoZXIgdGhhblxuLy8gaG93IG1hbnkgYnl0ZXMgb3IgY2hhcmFjdGVycy5cbmZ1bmN0aW9uIHZhbGlkQ2h1bmsoc3RyZWFtLCBzdGF0ZSwgY2h1bmssIGNiKSB7XG4gIHZhciB2YWxpZCA9IHRydWU7XG4gIHZhciBlciA9IGZhbHNlO1xuICAvLyBBbHdheXMgdGhyb3cgZXJyb3IgaWYgYSBudWxsIGlzIHdyaXR0ZW5cbiAgLy8gaWYgd2UgYXJlIG5vdCBpbiBvYmplY3QgbW9kZSB0aGVuIHRocm93XG4gIC8vIGlmIGl0IGlzIG5vdCBhIGJ1ZmZlciwgc3RyaW5nLCBvciB1bmRlZmluZWQuXG4gIGlmIChjaHVuayA9PT0gbnVsbCkge1xuICAgIGVyID0gbmV3IFR5cGVFcnJvcignTWF5IG5vdCB3cml0ZSBudWxsIHZhbHVlcyB0byBzdHJlYW0nKTtcbiAgfSBlbHNlIGlmICghQnVmZmVyLmlzQnVmZmVyKGNodW5rKSAmJiB0eXBlb2YgY2h1bmsgIT09ICdzdHJpbmcnICYmIGNodW5rICE9PSB1bmRlZmluZWQgJiYgIXN0YXRlLm9iamVjdE1vZGUpIHtcbiAgICBlciA9IG5ldyBUeXBlRXJyb3IoJ0ludmFsaWQgbm9uLXN0cmluZy9idWZmZXIgY2h1bmsnKTtcbiAgfVxuICBpZiAoZXIpIHtcbiAgICBzdHJlYW0uZW1pdCgnZXJyb3InLCBlcik7XG4gICAgbmV4dFRpY2soY2IsIGVyKTtcbiAgICB2YWxpZCA9IGZhbHNlO1xuICB9XG4gIHJldHVybiB2YWxpZDtcbn1cblxuV3JpdGFibGUucHJvdG90eXBlLndyaXRlID0gZnVuY3Rpb24gKGNodW5rLCBlbmNvZGluZywgY2IpIHtcbiAgdmFyIHN0YXRlID0gdGhpcy5fd3JpdGFibGVTdGF0ZTtcbiAgdmFyIHJldCA9IGZhbHNlO1xuXG4gIGlmICh0eXBlb2YgZW5jb2RpbmcgPT09ICdmdW5jdGlvbicpIHtcbiAgICBjYiA9IGVuY29kaW5nO1xuICAgIGVuY29kaW5nID0gbnVsbDtcbiAgfVxuXG4gIGlmIChCdWZmZXIuaXNCdWZmZXIoY2h1bmspKSBlbmNvZGluZyA9ICdidWZmZXInO2Vsc2UgaWYgKCFlbmNvZGluZykgZW5jb2RpbmcgPSBzdGF0ZS5kZWZhdWx0RW5jb2Rpbmc7XG5cbiAgaWYgKHR5cGVvZiBjYiAhPT0gJ2Z1bmN0aW9uJykgY2IgPSBub3A7XG5cbiAgaWYgKHN0YXRlLmVuZGVkKSB3cml0ZUFmdGVyRW5kKHRoaXMsIGNiKTtlbHNlIGlmICh2YWxpZENodW5rKHRoaXMsIHN0YXRlLCBjaHVuaywgY2IpKSB7XG4gICAgc3RhdGUucGVuZGluZ2NiKys7XG4gICAgcmV0ID0gd3JpdGVPckJ1ZmZlcih0aGlzLCBzdGF0ZSwgY2h1bmssIGVuY29kaW5nLCBjYik7XG4gIH1cblxuICByZXR1cm4gcmV0O1xufTtcblxuV3JpdGFibGUucHJvdG90eXBlLmNvcmsgPSBmdW5jdGlvbiAoKSB7XG4gIHZhciBzdGF0ZSA9IHRoaXMuX3dyaXRhYmxlU3RhdGU7XG5cbiAgc3RhdGUuY29ya2VkKys7XG59O1xuXG5Xcml0YWJsZS5wcm90b3R5cGUudW5jb3JrID0gZnVuY3Rpb24gKCkge1xuICB2YXIgc3RhdGUgPSB0aGlzLl93cml0YWJsZVN0YXRlO1xuXG4gIGlmIChzdGF0ZS5jb3JrZWQpIHtcbiAgICBzdGF0ZS5jb3JrZWQtLTtcblxuICAgIGlmICghc3RhdGUud3JpdGluZyAmJiAhc3RhdGUuY29ya2VkICYmICFzdGF0ZS5maW5pc2hlZCAmJiAhc3RhdGUuYnVmZmVyUHJvY2Vzc2luZyAmJiBzdGF0ZS5idWZmZXJlZFJlcXVlc3QpIGNsZWFyQnVmZmVyKHRoaXMsIHN0YXRlKTtcbiAgfVxufTtcblxuV3JpdGFibGUucHJvdG90eXBlLnNldERlZmF1bHRFbmNvZGluZyA9IGZ1bmN0aW9uIHNldERlZmF1bHRFbmNvZGluZyhlbmNvZGluZykge1xuICAvLyBub2RlOjpQYXJzZUVuY29kaW5nKCkgcmVxdWlyZXMgbG93ZXIgY2FzZS5cbiAgaWYgKHR5cGVvZiBlbmNvZGluZyA9PT0gJ3N0cmluZycpIGVuY29kaW5nID0gZW5jb2RpbmcudG9Mb3dlckNhc2UoKTtcbiAgaWYgKCEoWydoZXgnLCAndXRmOCcsICd1dGYtOCcsICdhc2NpaScsICdiaW5hcnknLCAnYmFzZTY0JywgJ3VjczInLCAndWNzLTInLCAndXRmMTZsZScsICd1dGYtMTZsZScsICdyYXcnXS5pbmRleE9mKChlbmNvZGluZyArICcnKS50b0xvd2VyQ2FzZSgpKSA+IC0xKSkgdGhyb3cgbmV3IFR5cGVFcnJvcignVW5rbm93biBlbmNvZGluZzogJyArIGVuY29kaW5nKTtcbiAgdGhpcy5fd3JpdGFibGVTdGF0ZS5kZWZhdWx0RW5jb2RpbmcgPSBlbmNvZGluZztcbiAgcmV0dXJuIHRoaXM7XG59O1xuXG5mdW5jdGlvbiBkZWNvZGVDaHVuayhzdGF0ZSwgY2h1bmssIGVuY29kaW5nKSB7XG4gIGlmICghc3RhdGUub2JqZWN0TW9kZSAmJiBzdGF0ZS5kZWNvZGVTdHJpbmdzICE9PSBmYWxzZSAmJiB0eXBlb2YgY2h1bmsgPT09ICdzdHJpbmcnKSB7XG4gICAgY2h1bmsgPSBCdWZmZXIuZnJvbShjaHVuaywgZW5jb2RpbmcpO1xuICB9XG4gIHJldHVybiBjaHVuaztcbn1cblxuLy8gaWYgd2UncmUgYWxyZWFkeSB3cml0aW5nIHNvbWV0aGluZywgdGhlbiBqdXN0IHB1dCB0aGlzXG4vLyBpbiB0aGUgcXVldWUsIGFuZCB3YWl0IG91ciB0dXJuLiAgT3RoZXJ3aXNlLCBjYWxsIF93cml0ZVxuLy8gSWYgd2UgcmV0dXJuIGZhbHNlLCB0aGVuIHdlIG5lZWQgYSBkcmFpbiBldmVudCwgc28gc2V0IHRoYXQgZmxhZy5cbmZ1bmN0aW9uIHdyaXRlT3JCdWZmZXIoc3RyZWFtLCBzdGF0ZSwgY2h1bmssIGVuY29kaW5nLCBjYikge1xuICBjaHVuayA9IGRlY29kZUNodW5rKHN0YXRlLCBjaHVuaywgZW5jb2RpbmcpO1xuXG4gIGlmIChCdWZmZXIuaXNCdWZmZXIoY2h1bmspKSBlbmNvZGluZyA9ICdidWZmZXInO1xuICB2YXIgbGVuID0gc3RhdGUub2JqZWN0TW9kZSA/IDEgOiBjaHVuay5sZW5ndGg7XG5cbiAgc3RhdGUubGVuZ3RoICs9IGxlbjtcblxuICB2YXIgcmV0ID0gc3RhdGUubGVuZ3RoIDwgc3RhdGUuaGlnaFdhdGVyTWFyaztcbiAgLy8gd2UgbXVzdCBlbnN1cmUgdGhhdCBwcmV2aW91cyBuZWVkRHJhaW4gd2lsbCBub3QgYmUgcmVzZXQgdG8gZmFsc2UuXG4gIGlmICghcmV0KSBzdGF0ZS5uZWVkRHJhaW4gPSB0cnVlO1xuXG4gIGlmIChzdGF0ZS53cml0aW5nIHx8IHN0YXRlLmNvcmtlZCkge1xuICAgIHZhciBsYXN0ID0gc3RhdGUubGFzdEJ1ZmZlcmVkUmVxdWVzdDtcbiAgICBzdGF0ZS5sYXN0QnVmZmVyZWRSZXF1ZXN0ID0gbmV3IFdyaXRlUmVxKGNodW5rLCBlbmNvZGluZywgY2IpO1xuICAgIGlmIChsYXN0KSB7XG4gICAgICBsYXN0Lm5leHQgPSBzdGF0ZS5sYXN0QnVmZmVyZWRSZXF1ZXN0O1xuICAgIH0gZWxzZSB7XG4gICAgICBzdGF0ZS5idWZmZXJlZFJlcXVlc3QgPSBzdGF0ZS5sYXN0QnVmZmVyZWRSZXF1ZXN0O1xuICAgIH1cbiAgICBzdGF0ZS5idWZmZXJlZFJlcXVlc3RDb3VudCArPSAxO1xuICB9IGVsc2Uge1xuICAgIGRvV3JpdGUoc3RyZWFtLCBzdGF0ZSwgZmFsc2UsIGxlbiwgY2h1bmssIGVuY29kaW5nLCBjYik7XG4gIH1cblxuICByZXR1cm4gcmV0O1xufVxuXG5mdW5jdGlvbiBkb1dyaXRlKHN0cmVhbSwgc3RhdGUsIHdyaXRldiwgbGVuLCBjaHVuaywgZW5jb2RpbmcsIGNiKSB7XG4gIHN0YXRlLndyaXRlbGVuID0gbGVuO1xuICBzdGF0ZS53cml0ZWNiID0gY2I7XG4gIHN0YXRlLndyaXRpbmcgPSB0cnVlO1xuICBzdGF0ZS5zeW5jID0gdHJ1ZTtcbiAgaWYgKHdyaXRldikgc3RyZWFtLl93cml0ZXYoY2h1bmssIHN0YXRlLm9ud3JpdGUpO2Vsc2Ugc3RyZWFtLl93cml0ZShjaHVuaywgZW5jb2RpbmcsIHN0YXRlLm9ud3JpdGUpO1xuICBzdGF0ZS5zeW5jID0gZmFsc2U7XG59XG5cbmZ1bmN0aW9uIG9ud3JpdGVFcnJvcihzdHJlYW0sIHN0YXRlLCBzeW5jLCBlciwgY2IpIHtcbiAgLS1zdGF0ZS5wZW5kaW5nY2I7XG4gIGlmIChzeW5jKSBuZXh0VGljayhjYiwgZXIpO2Vsc2UgY2IoZXIpO1xuXG4gIHN0cmVhbS5fd3JpdGFibGVTdGF0ZS5lcnJvckVtaXR0ZWQgPSB0cnVlO1xuICBzdHJlYW0uZW1pdCgnZXJyb3InLCBlcik7XG59XG5cbmZ1bmN0aW9uIG9ud3JpdGVTdGF0ZVVwZGF0ZShzdGF0ZSkge1xuICBzdGF0ZS53cml0aW5nID0gZmFsc2U7XG4gIHN0YXRlLndyaXRlY2IgPSBudWxsO1xuICBzdGF0ZS5sZW5ndGggLT0gc3RhdGUud3JpdGVsZW47XG4gIHN0YXRlLndyaXRlbGVuID0gMDtcbn1cblxuZnVuY3Rpb24gb253cml0ZShzdHJlYW0sIGVyKSB7XG4gIHZhciBzdGF0ZSA9IHN0cmVhbS5fd3JpdGFibGVTdGF0ZTtcbiAgdmFyIHN5bmMgPSBzdGF0ZS5zeW5jO1xuICB2YXIgY2IgPSBzdGF0ZS53cml0ZWNiO1xuXG4gIG9ud3JpdGVTdGF0ZVVwZGF0ZShzdGF0ZSk7XG5cbiAgaWYgKGVyKSBvbndyaXRlRXJyb3Ioc3RyZWFtLCBzdGF0ZSwgc3luYywgZXIsIGNiKTtlbHNlIHtcbiAgICAvLyBDaGVjayBpZiB3ZSdyZSBhY3R1YWxseSByZWFkeSB0byBmaW5pc2gsIGJ1dCBkb24ndCBlbWl0IHlldFxuICAgIHZhciBmaW5pc2hlZCA9IG5lZWRGaW5pc2goc3RhdGUpO1xuXG4gICAgaWYgKCFmaW5pc2hlZCAmJiAhc3RhdGUuY29ya2VkICYmICFzdGF0ZS5idWZmZXJQcm9jZXNzaW5nICYmIHN0YXRlLmJ1ZmZlcmVkUmVxdWVzdCkge1xuICAgICAgY2xlYXJCdWZmZXIoc3RyZWFtLCBzdGF0ZSk7XG4gICAgfVxuXG4gICAgaWYgKHN5bmMpIHtcbiAgICAgIC8qPHJlcGxhY2VtZW50PiovXG4gICAgICAgIG5leHRUaWNrKGFmdGVyV3JpdGUsIHN0cmVhbSwgc3RhdGUsIGZpbmlzaGVkLCBjYik7XG4gICAgICAvKjwvcmVwbGFjZW1lbnQ+Ki9cbiAgICB9IGVsc2Uge1xuICAgICAgICBhZnRlcldyaXRlKHN0cmVhbSwgc3RhdGUsIGZpbmlzaGVkLCBjYik7XG4gICAgICB9XG4gIH1cbn1cblxuZnVuY3Rpb24gYWZ0ZXJXcml0ZShzdHJlYW0sIHN0YXRlLCBmaW5pc2hlZCwgY2IpIHtcbiAgaWYgKCFmaW5pc2hlZCkgb253cml0ZURyYWluKHN0cmVhbSwgc3RhdGUpO1xuICBzdGF0ZS5wZW5kaW5nY2ItLTtcbiAgY2IoKTtcbiAgZmluaXNoTWF5YmUoc3RyZWFtLCBzdGF0ZSk7XG59XG5cbi8vIE11c3QgZm9yY2UgY2FsbGJhY2sgdG8gYmUgY2FsbGVkIG9uIG5leHRUaWNrLCBzbyB0aGF0IHdlIGRvbid0XG4vLyBlbWl0ICdkcmFpbicgYmVmb3JlIHRoZSB3cml0ZSgpIGNvbnN1bWVyIGdldHMgdGhlICdmYWxzZScgcmV0dXJuXG4vLyB2YWx1ZSwgYW5kIGhhcyBhIGNoYW5jZSB0byBhdHRhY2ggYSAnZHJhaW4nIGxpc3RlbmVyLlxuZnVuY3Rpb24gb253cml0ZURyYWluKHN0cmVhbSwgc3RhdGUpIHtcbiAgaWYgKHN0YXRlLmxlbmd0aCA9PT0gMCAmJiBzdGF0ZS5uZWVkRHJhaW4pIHtcbiAgICBzdGF0ZS5uZWVkRHJhaW4gPSBmYWxzZTtcbiAgICBzdHJlYW0uZW1pdCgnZHJhaW4nKTtcbiAgfVxufVxuXG4vLyBpZiB0aGVyZSdzIHNvbWV0aGluZyBpbiB0aGUgYnVmZmVyIHdhaXRpbmcsIHRoZW4gcHJvY2VzcyBpdFxuZnVuY3Rpb24gY2xlYXJCdWZmZXIoc3RyZWFtLCBzdGF0ZSkge1xuICBzdGF0ZS5idWZmZXJQcm9jZXNzaW5nID0gdHJ1ZTtcbiAgdmFyIGVudHJ5ID0gc3RhdGUuYnVmZmVyZWRSZXF1ZXN0O1xuXG4gIGlmIChzdHJlYW0uX3dyaXRldiAmJiBlbnRyeSAmJiBlbnRyeS5uZXh0KSB7XG4gICAgLy8gRmFzdCBjYXNlLCB3cml0ZSBldmVyeXRoaW5nIHVzaW5nIF93cml0ZXYoKVxuICAgIHZhciBsID0gc3RhdGUuYnVmZmVyZWRSZXF1ZXN0Q291bnQ7XG4gICAgdmFyIGJ1ZmZlciA9IG5ldyBBcnJheShsKTtcbiAgICB2YXIgaG9sZGVyID0gc3RhdGUuY29ya2VkUmVxdWVzdHNGcmVlO1xuICAgIGhvbGRlci5lbnRyeSA9IGVudHJ5O1xuXG4gICAgdmFyIGNvdW50ID0gMDtcbiAgICB3aGlsZSAoZW50cnkpIHtcbiAgICAgIGJ1ZmZlcltjb3VudF0gPSBlbnRyeTtcbiAgICAgIGVudHJ5ID0gZW50cnkubmV4dDtcbiAgICAgIGNvdW50ICs9IDE7XG4gICAgfVxuXG4gICAgZG9Xcml0ZShzdHJlYW0sIHN0YXRlLCB0cnVlLCBzdGF0ZS5sZW5ndGgsIGJ1ZmZlciwgJycsIGhvbGRlci5maW5pc2gpO1xuXG4gICAgLy8gZG9Xcml0ZSBpcyBhbG1vc3QgYWx3YXlzIGFzeW5jLCBkZWZlciB0aGVzZSB0byBzYXZlIGEgYml0IG9mIHRpbWVcbiAgICAvLyBhcyB0aGUgaG90IHBhdGggZW5kcyB3aXRoIGRvV3JpdGVcbiAgICBzdGF0ZS5wZW5kaW5nY2IrKztcbiAgICBzdGF0ZS5sYXN0QnVmZmVyZWRSZXF1ZXN0ID0gbnVsbDtcbiAgICBpZiAoaG9sZGVyLm5leHQpIHtcbiAgICAgIHN0YXRlLmNvcmtlZFJlcXVlc3RzRnJlZSA9IGhvbGRlci5uZXh0O1xuICAgICAgaG9sZGVyLm5leHQgPSBudWxsO1xuICAgIH0gZWxzZSB7XG4gICAgICBzdGF0ZS5jb3JrZWRSZXF1ZXN0c0ZyZWUgPSBuZXcgQ29ya2VkUmVxdWVzdChzdGF0ZSk7XG4gICAgfVxuICB9IGVsc2Uge1xuICAgIC8vIFNsb3cgY2FzZSwgd3JpdGUgY2h1bmtzIG9uZS1ieS1vbmVcbiAgICB3aGlsZSAoZW50cnkpIHtcbiAgICAgIHZhciBjaHVuayA9IGVudHJ5LmNodW5rO1xuICAgICAgdmFyIGVuY29kaW5nID0gZW50cnkuZW5jb2Rpbmc7XG4gICAgICB2YXIgY2IgPSBlbnRyeS5jYWxsYmFjaztcbiAgICAgIHZhciBsZW4gPSBzdGF0ZS5vYmplY3RNb2RlID8gMSA6IGNodW5rLmxlbmd0aDtcblxuICAgICAgZG9Xcml0ZShzdHJlYW0sIHN0YXRlLCBmYWxzZSwgbGVuLCBjaHVuaywgZW5jb2RpbmcsIGNiKTtcbiAgICAgIGVudHJ5ID0gZW50cnkubmV4dDtcbiAgICAgIC8vIGlmIHdlIGRpZG4ndCBjYWxsIHRoZSBvbndyaXRlIGltbWVkaWF0ZWx5LCB0aGVuXG4gICAgICAvLyBpdCBtZWFucyB0aGF0IHdlIG5lZWQgdG8gd2FpdCB1bnRpbCBpdCBkb2VzLlxuICAgICAgLy8gYWxzbywgdGhhdCBtZWFucyB0aGF0IHRoZSBjaHVuayBhbmQgY2IgYXJlIGN1cnJlbnRseVxuICAgICAgLy8gYmVpbmcgcHJvY2Vzc2VkLCBzbyBtb3ZlIHRoZSBidWZmZXIgY291bnRlciBwYXN0IHRoZW0uXG4gICAgICBpZiAoc3RhdGUud3JpdGluZykge1xuICAgICAgICBicmVhaztcbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAoZW50cnkgPT09IG51bGwpIHN0YXRlLmxhc3RCdWZmZXJlZFJlcXVlc3QgPSBudWxsO1xuICB9XG5cbiAgc3RhdGUuYnVmZmVyZWRSZXF1ZXN0Q291bnQgPSAwO1xuICBzdGF0ZS5idWZmZXJlZFJlcXVlc3QgPSBlbnRyeTtcbiAgc3RhdGUuYnVmZmVyUHJvY2Vzc2luZyA9IGZhbHNlO1xufVxuXG5Xcml0YWJsZS5wcm90b3R5cGUuX3dyaXRlID0gZnVuY3Rpb24gKGNodW5rLCBlbmNvZGluZywgY2IpIHtcbiAgY2IobmV3IEVycm9yKCdub3QgaW1wbGVtZW50ZWQnKSk7XG59O1xuXG5Xcml0YWJsZS5wcm90b3R5cGUuX3dyaXRldiA9IG51bGw7XG5cbldyaXRhYmxlLnByb3RvdHlwZS5lbmQgPSBmdW5jdGlvbiAoY2h1bmssIGVuY29kaW5nLCBjYikge1xuICB2YXIgc3RhdGUgPSB0aGlzLl93cml0YWJsZVN0YXRlO1xuXG4gIGlmICh0eXBlb2YgY2h1bmsgPT09ICdmdW5jdGlvbicpIHtcbiAgICBjYiA9IGNodW5rO1xuICAgIGNodW5rID0gbnVsbDtcbiAgICBlbmNvZGluZyA9IG51bGw7XG4gIH0gZWxzZSBpZiAodHlwZW9mIGVuY29kaW5nID09PSAnZnVuY3Rpb24nKSB7XG4gICAgY2IgPSBlbmNvZGluZztcbiAgICBlbmNvZGluZyA9IG51bGw7XG4gIH1cblxuICBpZiAoY2h1bmsgIT09IG51bGwgJiYgY2h1bmsgIT09IHVuZGVmaW5lZCkgdGhpcy53cml0ZShjaHVuaywgZW5jb2RpbmcpO1xuXG4gIC8vIC5lbmQoKSBmdWxseSB1bmNvcmtzXG4gIGlmIChzdGF0ZS5jb3JrZWQpIHtcbiAgICBzdGF0ZS5jb3JrZWQgPSAxO1xuICAgIHRoaXMudW5jb3JrKCk7XG4gIH1cblxuICAvLyBpZ25vcmUgdW5uZWNlc3NhcnkgZW5kKCkgY2FsbHMuXG4gIGlmICghc3RhdGUuZW5kaW5nICYmICFzdGF0ZS5maW5pc2hlZCkgZW5kV3JpdGFibGUodGhpcywgc3RhdGUsIGNiKTtcbn07XG5cbmZ1bmN0aW9uIG5lZWRGaW5pc2goc3RhdGUpIHtcbiAgcmV0dXJuIHN0YXRlLmVuZGluZyAmJiBzdGF0ZS5sZW5ndGggPT09IDAgJiYgc3RhdGUuYnVmZmVyZWRSZXF1ZXN0ID09PSBudWxsICYmICFzdGF0ZS5maW5pc2hlZCAmJiAhc3RhdGUud3JpdGluZztcbn1cblxuZnVuY3Rpb24gcHJlZmluaXNoKHN0cmVhbSwgc3RhdGUpIHtcbiAgaWYgKCFzdGF0ZS5wcmVmaW5pc2hlZCkge1xuICAgIHN0YXRlLnByZWZpbmlzaGVkID0gdHJ1ZTtcbiAgICBzdHJlYW0uZW1pdCgncHJlZmluaXNoJyk7XG4gIH1cbn1cblxuZnVuY3Rpb24gZmluaXNoTWF5YmUoc3RyZWFtLCBzdGF0ZSkge1xuICB2YXIgbmVlZCA9IG5lZWRGaW5pc2goc3RhdGUpO1xuICBpZiAobmVlZCkge1xuICAgIGlmIChzdGF0ZS5wZW5kaW5nY2IgPT09IDApIHtcbiAgICAgIHByZWZpbmlzaChzdHJlYW0sIHN0YXRlKTtcbiAgICAgIHN0YXRlLmZpbmlzaGVkID0gdHJ1ZTtcbiAgICAgIHN0cmVhbS5lbWl0KCdmaW5pc2gnKTtcbiAgICB9IGVsc2Uge1xuICAgICAgcHJlZmluaXNoKHN0cmVhbSwgc3RhdGUpO1xuICAgIH1cbiAgfVxuICByZXR1cm4gbmVlZDtcbn1cblxuZnVuY3Rpb24gZW5kV3JpdGFibGUoc3RyZWFtLCBzdGF0ZSwgY2IpIHtcbiAgc3RhdGUuZW5kaW5nID0gdHJ1ZTtcbiAgZmluaXNoTWF5YmUoc3RyZWFtLCBzdGF0ZSk7XG4gIGlmIChjYikge1xuICAgIGlmIChzdGF0ZS5maW5pc2hlZCkgbmV4dFRpY2soY2IpO2Vsc2Ugc3RyZWFtLm9uY2UoJ2ZpbmlzaCcsIGNiKTtcbiAgfVxuICBzdGF0ZS5lbmRlZCA9IHRydWU7XG4gIHN0cmVhbS53cml0YWJsZSA9IGZhbHNlO1xufVxuXG4vLyBJdCBzZWVtcyBhIGxpbmtlZCBsaXN0IGJ1dCBpdCBpcyBub3Rcbi8vIHRoZXJlIHdpbGwgYmUgb25seSAyIG9mIHRoZXNlIGZvciBlYWNoIHN0cmVhbVxuZnVuY3Rpb24gQ29ya2VkUmVxdWVzdChzdGF0ZSkge1xuICB2YXIgX3RoaXMgPSB0aGlzO1xuXG4gIHRoaXMubmV4dCA9IG51bGw7XG4gIHRoaXMuZW50cnkgPSBudWxsO1xuXG4gIHRoaXMuZmluaXNoID0gZnVuY3Rpb24gKGVycikge1xuICAgIHZhciBlbnRyeSA9IF90aGlzLmVudHJ5O1xuICAgIF90aGlzLmVudHJ5ID0gbnVsbDtcbiAgICB3aGlsZSAoZW50cnkpIHtcbiAgICAgIHZhciBjYiA9IGVudHJ5LmNhbGxiYWNrO1xuICAgICAgc3RhdGUucGVuZGluZ2NiLS07XG4gICAgICBjYihlcnIpO1xuICAgICAgZW50cnkgPSBlbnRyeS5uZXh0O1xuICAgIH1cbiAgICBpZiAoc3RhdGUuY29ya2VkUmVxdWVzdHNGcmVlKSB7XG4gICAgICBzdGF0ZS5jb3JrZWRSZXF1ZXN0c0ZyZWUubmV4dCA9IF90aGlzO1xuICAgIH0gZWxzZSB7XG4gICAgICBzdGF0ZS5jb3JrZWRSZXF1ZXN0c0ZyZWUgPSBfdGhpcztcbiAgICB9XG4gIH07XG59XG4iLCAiXG5pbXBvcnQge2luaGVyaXRzfSBmcm9tICd1dGlsJztcbmltcG9ydCB7bmV4dFRpY2t9IGZyb20gJ3Byb2Nlc3MnO1xuaW1wb3J0IHtSZWFkYWJsZX0gZnJvbSAnLi9yZWFkYWJsZSc7XG5pbXBvcnQge1dyaXRhYmxlfSBmcm9tICcuL3dyaXRhYmxlJztcblxuXG5pbmhlcml0cyhEdXBsZXgsIFJlYWRhYmxlKTtcblxudmFyIGtleXMgPSBPYmplY3Qua2V5cyhXcml0YWJsZS5wcm90b3R5cGUpO1xuZm9yICh2YXIgdiA9IDA7IHYgPCBrZXlzLmxlbmd0aDsgdisrKSB7XG4gIHZhciBtZXRob2QgPSBrZXlzW3ZdO1xuICBpZiAoIUR1cGxleC5wcm90b3R5cGVbbWV0aG9kXSkgRHVwbGV4LnByb3RvdHlwZVttZXRob2RdID0gV3JpdGFibGUucHJvdG90eXBlW21ldGhvZF07XG59XG5leHBvcnQgZGVmYXVsdCBEdXBsZXg7XG5leHBvcnQgZnVuY3Rpb24gRHVwbGV4KG9wdGlvbnMpIHtcbiAgaWYgKCEodGhpcyBpbnN0YW5jZW9mIER1cGxleCkpIHJldHVybiBuZXcgRHVwbGV4KG9wdGlvbnMpO1xuXG4gIFJlYWRhYmxlLmNhbGwodGhpcywgb3B0aW9ucyk7XG4gIFdyaXRhYmxlLmNhbGwodGhpcywgb3B0aW9ucyk7XG5cbiAgaWYgKG9wdGlvbnMgJiYgb3B0aW9ucy5yZWFkYWJsZSA9PT0gZmFsc2UpIHRoaXMucmVhZGFibGUgPSBmYWxzZTtcblxuICBpZiAob3B0aW9ucyAmJiBvcHRpb25zLndyaXRhYmxlID09PSBmYWxzZSkgdGhpcy53cml0YWJsZSA9IGZhbHNlO1xuXG4gIHRoaXMuYWxsb3dIYWxmT3BlbiA9IHRydWU7XG4gIGlmIChvcHRpb25zICYmIG9wdGlvbnMuYWxsb3dIYWxmT3BlbiA9PT0gZmFsc2UpIHRoaXMuYWxsb3dIYWxmT3BlbiA9IGZhbHNlO1xuXG4gIHRoaXMub25jZSgnZW5kJywgb25lbmQpO1xufVxuXG4vLyB0aGUgbm8taGFsZi1vcGVuIGVuZm9yY2VyXG5mdW5jdGlvbiBvbmVuZCgpIHtcbiAgLy8gaWYgd2UgYWxsb3cgaGFsZi1vcGVuIHN0YXRlLCBvciBpZiB0aGUgd3JpdGFibGUgc2lkZSBlbmRlZCxcbiAgLy8gdGhlbiB3ZSdyZSBvay5cbiAgaWYgKHRoaXMuYWxsb3dIYWxmT3BlbiB8fCB0aGlzLl93cml0YWJsZVN0YXRlLmVuZGVkKSByZXR1cm47XG5cbiAgLy8gbm8gbW9yZSBkYXRhIGNhbiBiZSB3cml0dGVuLlxuICAvLyBCdXQgYWxsb3cgbW9yZSB3cml0ZXMgdG8gaGFwcGVuIGluIHRoaXMgdGljay5cbiAgbmV4dFRpY2sob25FbmROVCwgdGhpcyk7XG59XG5cbmZ1bmN0aW9uIG9uRW5kTlQoc2VsZikge1xuICBzZWxmLmVuZCgpO1xufVxuIiwgIi8vIGEgdHJhbnNmb3JtIHN0cmVhbSBpcyBhIHJlYWRhYmxlL3dyaXRhYmxlIHN0cmVhbSB3aGVyZSB5b3UgZG9cbi8vIHNvbWV0aGluZyB3aXRoIHRoZSBkYXRhLiAgU29tZXRpbWVzIGl0J3MgY2FsbGVkIGEgXCJmaWx0ZXJcIixcbi8vIGJ1dCB0aGF0J3Mgbm90IGEgZ3JlYXQgbmFtZSBmb3IgaXQsIHNpbmNlIHRoYXQgaW1wbGllcyBhIHRoaW5nIHdoZXJlXG4vLyBzb21lIGJpdHMgcGFzcyB0aHJvdWdoLCBhbmQgb3RoZXJzIGFyZSBzaW1wbHkgaWdub3JlZC4gIChUaGF0IHdvdWxkXG4vLyBiZSBhIHZhbGlkIGV4YW1wbGUgb2YgYSB0cmFuc2Zvcm0sIG9mIGNvdXJzZS4pXG4vL1xuLy8gV2hpbGUgdGhlIG91dHB1dCBpcyBjYXVzYWxseSByZWxhdGVkIHRvIHRoZSBpbnB1dCwgaXQncyBub3QgYVxuLy8gbmVjZXNzYXJpbHkgc3ltbWV0cmljIG9yIHN5bmNocm9ub3VzIHRyYW5zZm9ybWF0aW9uLiAgRm9yIGV4YW1wbGUsXG4vLyBhIHpsaWIgc3RyZWFtIG1pZ2h0IHRha2UgbXVsdGlwbGUgcGxhaW4tdGV4dCB3cml0ZXMoKSwgYW5kIHRoZW5cbi8vIGVtaXQgYSBzaW5nbGUgY29tcHJlc3NlZCBjaHVuayBzb21lIHRpbWUgaW4gdGhlIGZ1dHVyZS5cbi8vXG4vLyBIZXJlJ3MgaG93IHRoaXMgd29ya3M6XG4vL1xuLy8gVGhlIFRyYW5zZm9ybSBzdHJlYW0gaGFzIGFsbCB0aGUgYXNwZWN0cyBvZiB0aGUgcmVhZGFibGUgYW5kIHdyaXRhYmxlXG4vLyBzdHJlYW0gY2xhc3Nlcy4gIFdoZW4geW91IHdyaXRlKGNodW5rKSwgdGhhdCBjYWxscyBfd3JpdGUoY2h1bmssY2IpXG4vLyBpbnRlcm5hbGx5LCBhbmQgcmV0dXJucyBmYWxzZSBpZiB0aGVyZSdzIGEgbG90IG9mIHBlbmRpbmcgd3JpdGVzXG4vLyBidWZmZXJlZCB1cC4gIFdoZW4geW91IGNhbGwgcmVhZCgpLCB0aGF0IGNhbGxzIF9yZWFkKG4pIHVudGlsXG4vLyB0aGVyZSdzIGVub3VnaCBwZW5kaW5nIHJlYWRhYmxlIGRhdGEgYnVmZmVyZWQgdXAuXG4vL1xuLy8gSW4gYSB0cmFuc2Zvcm0gc3RyZWFtLCB0aGUgd3JpdHRlbiBkYXRhIGlzIHBsYWNlZCBpbiBhIGJ1ZmZlci4gIFdoZW5cbi8vIF9yZWFkKG4pIGlzIGNhbGxlZCwgaXQgdHJhbnNmb3JtcyB0aGUgcXVldWVkIHVwIGRhdGEsIGNhbGxpbmcgdGhlXG4vLyBidWZmZXJlZCBfd3JpdGUgY2IncyBhcyBpdCBjb25zdW1lcyBjaHVua3MuICBJZiBjb25zdW1pbmcgYSBzaW5nbGVcbi8vIHdyaXR0ZW4gY2h1bmsgd291bGQgcmVzdWx0IGluIG11bHRpcGxlIG91dHB1dCBjaHVua3MsIHRoZW4gdGhlIGZpcnN0XG4vLyBvdXRwdXR0ZWQgYml0IGNhbGxzIHRoZSByZWFkY2IsIGFuZCBzdWJzZXF1ZW50IGNodW5rcyBqdXN0IGdvIGludG9cbi8vIHRoZSByZWFkIGJ1ZmZlciwgYW5kIHdpbGwgY2F1c2UgaXQgdG8gZW1pdCAncmVhZGFibGUnIGlmIG5lY2Vzc2FyeS5cbi8vXG4vLyBUaGlzIHdheSwgYmFjay1wcmVzc3VyZSBpcyBhY3R1YWxseSBkZXRlcm1pbmVkIGJ5IHRoZSByZWFkaW5nIHNpZGUsXG4vLyBzaW5jZSBfcmVhZCBoYXMgdG8gYmUgY2FsbGVkIHRvIHN0YXJ0IHByb2Nlc3NpbmcgYSBuZXcgY2h1bmsuICBIb3dldmVyLFxuLy8gYSBwYXRob2xvZ2ljYWwgaW5mbGF0ZSB0eXBlIG9mIHRyYW5zZm9ybSBjYW4gY2F1c2UgZXhjZXNzaXZlIGJ1ZmZlcmluZ1xuLy8gaGVyZS4gIEZvciBleGFtcGxlLCBpbWFnaW5lIGEgc3RyZWFtIHdoZXJlIGV2ZXJ5IGJ5dGUgb2YgaW5wdXQgaXNcbi8vIGludGVycHJldGVkIGFzIGFuIGludGVnZXIgZnJvbSAwLTI1NSwgYW5kIHRoZW4gcmVzdWx0cyBpbiB0aGF0IG1hbnlcbi8vIGJ5dGVzIG9mIG91dHB1dC4gIFdyaXRpbmcgdGhlIDQgYnl0ZXMge2ZmLGZmLGZmLGZmfSB3b3VsZCByZXN1bHQgaW5cbi8vIDFrYiBvZiBkYXRhIGJlaW5nIG91dHB1dC4gIEluIHRoaXMgY2FzZSwgeW91IGNvdWxkIHdyaXRlIGEgdmVyeSBzbWFsbFxuLy8gYW1vdW50IG9mIGlucHV0LCBhbmQgZW5kIHVwIHdpdGggYSB2ZXJ5IGxhcmdlIGFtb3VudCBvZiBvdXRwdXQuICBJblxuLy8gc3VjaCBhIHBhdGhvbG9naWNhbCBpbmZsYXRpbmcgbWVjaGFuaXNtLCB0aGVyZSdkIGJlIG5vIHdheSB0byB0ZWxsXG4vLyB0aGUgc3lzdGVtIHRvIHN0b3AgZG9pbmcgdGhlIHRyYW5zZm9ybS4gIEEgc2luZ2xlIDRNQiB3cml0ZSBjb3VsZFxuLy8gY2F1c2UgdGhlIHN5c3RlbSB0byBydW4gb3V0IG9mIG1lbW9yeS5cbi8vXG4vLyBIb3dldmVyLCBldmVuIGluIHN1Y2ggYSBwYXRob2xvZ2ljYWwgY2FzZSwgb25seSBhIHNpbmdsZSB3cml0dGVuIGNodW5rXG4vLyB3b3VsZCBiZSBjb25zdW1lZCwgYW5kIHRoZW4gdGhlIHJlc3Qgd291bGQgd2FpdCAodW4tdHJhbnNmb3JtZWQpIHVudGlsXG4vLyB0aGUgcmVzdWx0cyBvZiB0aGUgcHJldmlvdXMgdHJhbnNmb3JtZWQgY2h1bmsgd2VyZSBjb25zdW1lZC5cblxuXG5pbXBvcnQge0R1cGxleH0gZnJvbSAnLi9kdXBsZXgnO1xuXG5cbmltcG9ydCB7aW5oZXJpdHN9IGZyb20gJ3V0aWwnO1xuaW5oZXJpdHMoVHJhbnNmb3JtLCBEdXBsZXgpO1xuXG5mdW5jdGlvbiBUcmFuc2Zvcm1TdGF0ZShzdHJlYW0pIHtcbiAgdGhpcy5hZnRlclRyYW5zZm9ybSA9IGZ1bmN0aW9uIChlciwgZGF0YSkge1xuICAgIHJldHVybiBhZnRlclRyYW5zZm9ybShzdHJlYW0sIGVyLCBkYXRhKTtcbiAgfTtcblxuICB0aGlzLm5lZWRUcmFuc2Zvcm0gPSBmYWxzZTtcbiAgdGhpcy50cmFuc2Zvcm1pbmcgPSBmYWxzZTtcbiAgdGhpcy53cml0ZWNiID0gbnVsbDtcbiAgdGhpcy53cml0ZWNodW5rID0gbnVsbDtcbiAgdGhpcy53cml0ZWVuY29kaW5nID0gbnVsbDtcbn1cblxuZnVuY3Rpb24gYWZ0ZXJUcmFuc2Zvcm0oc3RyZWFtLCBlciwgZGF0YSkge1xuICB2YXIgdHMgPSBzdHJlYW0uX3RyYW5zZm9ybVN0YXRlO1xuICB0cy50cmFuc2Zvcm1pbmcgPSBmYWxzZTtcblxuICB2YXIgY2IgPSB0cy53cml0ZWNiO1xuXG4gIGlmICghY2IpIHJldHVybiBzdHJlYW0uZW1pdCgnZXJyb3InLCBuZXcgRXJyb3IoJ25vIHdyaXRlY2IgaW4gVHJhbnNmb3JtIGNsYXNzJykpO1xuXG4gIHRzLndyaXRlY2h1bmsgPSBudWxsO1xuICB0cy53cml0ZWNiID0gbnVsbDtcblxuICBpZiAoZGF0YSAhPT0gbnVsbCAmJiBkYXRhICE9PSB1bmRlZmluZWQpIHN0cmVhbS5wdXNoKGRhdGEpO1xuXG4gIGNiKGVyKTtcblxuICB2YXIgcnMgPSBzdHJlYW0uX3JlYWRhYmxlU3RhdGU7XG4gIHJzLnJlYWRpbmcgPSBmYWxzZTtcbiAgaWYgKHJzLm5lZWRSZWFkYWJsZSB8fCBycy5sZW5ndGggPCBycy5oaWdoV2F0ZXJNYXJrKSB7XG4gICAgc3RyZWFtLl9yZWFkKHJzLmhpZ2hXYXRlck1hcmspO1xuICB9XG59XG5leHBvcnQgZGVmYXVsdCBUcmFuc2Zvcm07XG5leHBvcnQgZnVuY3Rpb24gVHJhbnNmb3JtKG9wdGlvbnMpIHtcbiAgaWYgKCEodGhpcyBpbnN0YW5jZW9mIFRyYW5zZm9ybSkpIHJldHVybiBuZXcgVHJhbnNmb3JtKG9wdGlvbnMpO1xuXG4gIER1cGxleC5jYWxsKHRoaXMsIG9wdGlvbnMpO1xuXG4gIHRoaXMuX3RyYW5zZm9ybVN0YXRlID0gbmV3IFRyYW5zZm9ybVN0YXRlKHRoaXMpO1xuXG4gIC8vIHdoZW4gdGhlIHdyaXRhYmxlIHNpZGUgZmluaXNoZXMsIHRoZW4gZmx1c2ggb3V0IGFueXRoaW5nIHJlbWFpbmluZy5cbiAgdmFyIHN0cmVhbSA9IHRoaXM7XG5cbiAgLy8gc3RhcnQgb3V0IGFza2luZyBmb3IgYSByZWFkYWJsZSBldmVudCBvbmNlIGRhdGEgaXMgdHJhbnNmb3JtZWQuXG4gIHRoaXMuX3JlYWRhYmxlU3RhdGUubmVlZFJlYWRhYmxlID0gdHJ1ZTtcblxuICAvLyB3ZSBoYXZlIGltcGxlbWVudGVkIHRoZSBfcmVhZCBtZXRob2QsIGFuZCBkb25lIHRoZSBvdGhlciB0aGluZ3NcbiAgLy8gdGhhdCBSZWFkYWJsZSB3YW50cyBiZWZvcmUgdGhlIGZpcnN0IF9yZWFkIGNhbGwsIHNvIHVuc2V0IHRoZVxuICAvLyBzeW5jIGd1YXJkIGZsYWcuXG4gIHRoaXMuX3JlYWRhYmxlU3RhdGUuc3luYyA9IGZhbHNlO1xuXG4gIGlmIChvcHRpb25zKSB7XG4gICAgaWYgKHR5cGVvZiBvcHRpb25zLnRyYW5zZm9ybSA9PT0gJ2Z1bmN0aW9uJykgdGhpcy5fdHJhbnNmb3JtID0gb3B0aW9ucy50cmFuc2Zvcm07XG5cbiAgICBpZiAodHlwZW9mIG9wdGlvbnMuZmx1c2ggPT09ICdmdW5jdGlvbicpIHRoaXMuX2ZsdXNoID0gb3B0aW9ucy5mbHVzaDtcbiAgfVxuXG4gIHRoaXMub25jZSgncHJlZmluaXNoJywgZnVuY3Rpb24gKCkge1xuICAgIGlmICh0eXBlb2YgdGhpcy5fZmx1c2ggPT09ICdmdW5jdGlvbicpIHRoaXMuX2ZsdXNoKGZ1bmN0aW9uIChlcikge1xuICAgICAgZG9uZShzdHJlYW0sIGVyKTtcbiAgICB9KTtlbHNlIGRvbmUoc3RyZWFtKTtcbiAgfSk7XG59XG5cblRyYW5zZm9ybS5wcm90b3R5cGUucHVzaCA9IGZ1bmN0aW9uIChjaHVuaywgZW5jb2RpbmcpIHtcbiAgdGhpcy5fdHJhbnNmb3JtU3RhdGUubmVlZFRyYW5zZm9ybSA9IGZhbHNlO1xuICByZXR1cm4gRHVwbGV4LnByb3RvdHlwZS5wdXNoLmNhbGwodGhpcywgY2h1bmssIGVuY29kaW5nKTtcbn07XG5cbi8vIFRoaXMgaXMgdGhlIHBhcnQgd2hlcmUgeW91IGRvIHN0dWZmIVxuLy8gb3ZlcnJpZGUgdGhpcyBmdW5jdGlvbiBpbiBpbXBsZW1lbnRhdGlvbiBjbGFzc2VzLlxuLy8gJ2NodW5rJyBpcyBhbiBpbnB1dCBjaHVuay5cbi8vXG4vLyBDYWxsIGBwdXNoKG5ld0NodW5rKWAgdG8gcGFzcyBhbG9uZyB0cmFuc2Zvcm1lZCBvdXRwdXRcbi8vIHRvIHRoZSByZWFkYWJsZSBzaWRlLiAgWW91IG1heSBjYWxsICdwdXNoJyB6ZXJvIG9yIG1vcmUgdGltZXMuXG4vL1xuLy8gQ2FsbCBgY2IoZXJyKWAgd2hlbiB5b3UgYXJlIGRvbmUgd2l0aCB0aGlzIGNodW5rLiAgSWYgeW91IHBhc3Ncbi8vIGFuIGVycm9yLCB0aGVuIHRoYXQnbGwgcHV0IHRoZSBodXJ0IG9uIHRoZSB3aG9sZSBvcGVyYXRpb24uICBJZiB5b3Vcbi8vIG5ldmVyIGNhbGwgY2IoKSwgdGhlbiB5b3UnbGwgbmV2ZXIgZ2V0IGFub3RoZXIgY2h1bmsuXG5UcmFuc2Zvcm0ucHJvdG90eXBlLl90cmFuc2Zvcm0gPSBmdW5jdGlvbiAoY2h1bmssIGVuY29kaW5nLCBjYikge1xuICB0aHJvdyBuZXcgRXJyb3IoJ05vdCBpbXBsZW1lbnRlZCcpO1xufTtcblxuVHJhbnNmb3JtLnByb3RvdHlwZS5fd3JpdGUgPSBmdW5jdGlvbiAoY2h1bmssIGVuY29kaW5nLCBjYikge1xuICB2YXIgdHMgPSB0aGlzLl90cmFuc2Zvcm1TdGF0ZTtcbiAgdHMud3JpdGVjYiA9IGNiO1xuICB0cy53cml0ZWNodW5rID0gY2h1bms7XG4gIHRzLndyaXRlZW5jb2RpbmcgPSBlbmNvZGluZztcbiAgaWYgKCF0cy50cmFuc2Zvcm1pbmcpIHtcbiAgICB2YXIgcnMgPSB0aGlzLl9yZWFkYWJsZVN0YXRlO1xuICAgIGlmICh0cy5uZWVkVHJhbnNmb3JtIHx8IHJzLm5lZWRSZWFkYWJsZSB8fCBycy5sZW5ndGggPCBycy5oaWdoV2F0ZXJNYXJrKSB0aGlzLl9yZWFkKHJzLmhpZ2hXYXRlck1hcmspO1xuICB9XG59O1xuXG4vLyBEb2Vzbid0IG1hdHRlciB3aGF0IHRoZSBhcmdzIGFyZSBoZXJlLlxuLy8gX3RyYW5zZm9ybSBkb2VzIGFsbCB0aGUgd29yay5cbi8vIFRoYXQgd2UgZ290IGhlcmUgbWVhbnMgdGhhdCB0aGUgcmVhZGFibGUgc2lkZSB3YW50cyBtb3JlIGRhdGEuXG5UcmFuc2Zvcm0ucHJvdG90eXBlLl9yZWFkID0gZnVuY3Rpb24gKG4pIHtcbiAgdmFyIHRzID0gdGhpcy5fdHJhbnNmb3JtU3RhdGU7XG5cbiAgaWYgKHRzLndyaXRlY2h1bmsgIT09IG51bGwgJiYgdHMud3JpdGVjYiAmJiAhdHMudHJhbnNmb3JtaW5nKSB7XG4gICAgdHMudHJhbnNmb3JtaW5nID0gdHJ1ZTtcbiAgICB0aGlzLl90cmFuc2Zvcm0odHMud3JpdGVjaHVuaywgdHMud3JpdGVlbmNvZGluZywgdHMuYWZ0ZXJUcmFuc2Zvcm0pO1xuICB9IGVsc2Uge1xuICAgIC8vIG1hcmsgdGhhdCB3ZSBuZWVkIGEgdHJhbnNmb3JtLCBzbyB0aGF0IGFueSBkYXRhIHRoYXQgY29tZXMgaW5cbiAgICAvLyB3aWxsIGdldCBwcm9jZXNzZWQsIG5vdyB0aGF0IHdlJ3ZlIGFza2VkIGZvciBpdC5cbiAgICB0cy5uZWVkVHJhbnNmb3JtID0gdHJ1ZTtcbiAgfVxufTtcblxuZnVuY3Rpb24gZG9uZShzdHJlYW0sIGVyKSB7XG4gIGlmIChlcikgcmV0dXJuIHN0cmVhbS5lbWl0KCdlcnJvcicsIGVyKTtcblxuICAvLyBpZiB0aGVyZSdzIG5vdGhpbmcgaW4gdGhlIHdyaXRlIGJ1ZmZlciwgdGhlbiB0aGF0IG1lYW5zXG4gIC8vIHRoYXQgbm90aGluZyBtb3JlIHdpbGwgZXZlciBiZSBwcm92aWRlZFxuICB2YXIgd3MgPSBzdHJlYW0uX3dyaXRhYmxlU3RhdGU7XG4gIHZhciB0cyA9IHN0cmVhbS5fdHJhbnNmb3JtU3RhdGU7XG5cbiAgaWYgKHdzLmxlbmd0aCkgdGhyb3cgbmV3IEVycm9yKCdDYWxsaW5nIHRyYW5zZm9ybSBkb25lIHdoZW4gd3MubGVuZ3RoICE9IDAnKTtcblxuICBpZiAodHMudHJhbnNmb3JtaW5nKSB0aHJvdyBuZXcgRXJyb3IoJ0NhbGxpbmcgdHJhbnNmb3JtIGRvbmUgd2hlbiBzdGlsbCB0cmFuc2Zvcm1pbmcnKTtcblxuICByZXR1cm4gc3RyZWFtLnB1c2gobnVsbCk7XG59XG4iLCAiXG5pbXBvcnQge1RyYW5zZm9ybX0gZnJvbSAnLi90cmFuc2Zvcm0nO1xuXG5pbXBvcnQge2luaGVyaXRzfSBmcm9tICd1dGlsJztcbmluaGVyaXRzKFBhc3NUaHJvdWdoLCBUcmFuc2Zvcm0pO1xuZXhwb3J0IGRlZmF1bHQgUGFzc1Rocm91Z2g7XG5leHBvcnQgZnVuY3Rpb24gUGFzc1Rocm91Z2gob3B0aW9ucykge1xuICBpZiAoISh0aGlzIGluc3RhbmNlb2YgUGFzc1Rocm91Z2gpKSByZXR1cm4gbmV3IFBhc3NUaHJvdWdoKG9wdGlvbnMpO1xuXG4gIFRyYW5zZm9ybS5jYWxsKHRoaXMsIG9wdGlvbnMpO1xufVxuXG5QYXNzVGhyb3VnaC5wcm90b3R5cGUuX3RyYW5zZm9ybSA9IGZ1bmN0aW9uIChjaHVuaywgZW5jb2RpbmcsIGNiKSB7XG4gIGNiKG51bGwsIGNodW5rKTtcbn07XG4iLCAiaW1wb3J0IEVFIGZyb20gJ2V2ZW50cyc7XG5pbXBvcnQge2luaGVyaXRzfSBmcm9tICd1dGlsJztcblxuaW1wb3J0IHtEdXBsZXh9IGZyb20gJy4vcmVhZGFibGUtc3RyZWFtL2R1cGxleC5qcyc7XG5pbXBvcnQge1JlYWRhYmxlfSBmcm9tICcuL3JlYWRhYmxlLXN0cmVhbS9yZWFkYWJsZS5qcyc7XG5pbXBvcnQge1dyaXRhYmxlfSBmcm9tICcuL3JlYWRhYmxlLXN0cmVhbS93cml0YWJsZS5qcyc7XG5pbXBvcnQge1RyYW5zZm9ybX0gZnJvbSAnLi9yZWFkYWJsZS1zdHJlYW0vdHJhbnNmb3JtLmpzJztcbmltcG9ydCB7UGFzc1Rocm91Z2h9IGZyb20gJy4vcmVhZGFibGUtc3RyZWFtL3Bhc3N0aHJvdWdoLmpzJztcbmluaGVyaXRzKFN0cmVhbSwgRUUpO1xuU3RyZWFtLlJlYWRhYmxlID0gUmVhZGFibGU7XG5TdHJlYW0uV3JpdGFibGUgPSBXcml0YWJsZTtcblN0cmVhbS5EdXBsZXggPSBEdXBsZXg7XG5TdHJlYW0uVHJhbnNmb3JtID0gVHJhbnNmb3JtO1xuU3RyZWFtLlBhc3NUaHJvdWdoID0gUGFzc1Rocm91Z2g7XG5cbi8vIEJhY2t3YXJkcy1jb21wYXQgd2l0aCBub2RlIDAuNC54XG5TdHJlYW0uU3RyZWFtID0gU3RyZWFtO1xuXG5leHBvcnQgZGVmYXVsdCBTdHJlYW07XG5leHBvcnQge1JlYWRhYmxlLFdyaXRhYmxlLER1cGxleCxUcmFuc2Zvcm0sUGFzc1Rocm91Z2gsU3RyZWFtfVxuXG4vLyBvbGQtc3R5bGUgc3RyZWFtcy4gIE5vdGUgdGhhdCB0aGUgcGlwZSBtZXRob2QgKHRoZSBvbmx5IHJlbGV2YW50XG4vLyBwYXJ0IG9mIHRoaXMgY2xhc3MpIGlzIG92ZXJyaWRkZW4gaW4gdGhlIFJlYWRhYmxlIGNsYXNzLlxuXG5mdW5jdGlvbiBTdHJlYW0oKSB7XG4gIEVFLmNhbGwodGhpcyk7XG59XG5cblN0cmVhbS5wcm90b3R5cGUucGlwZSA9IGZ1bmN0aW9uKGRlc3QsIG9wdGlvbnMpIHtcbiAgdmFyIHNvdXJjZSA9IHRoaXM7XG5cbiAgZnVuY3Rpb24gb25kYXRhKGNodW5rKSB7XG4gICAgaWYgKGRlc3Qud3JpdGFibGUpIHtcbiAgICAgIGlmIChmYWxzZSA9PT0gZGVzdC53cml0ZShjaHVuaykgJiYgc291cmNlLnBhdXNlKSB7XG4gICAgICAgIHNvdXJjZS5wYXVzZSgpO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIHNvdXJjZS5vbignZGF0YScsIG9uZGF0YSk7XG5cbiAgZnVuY3Rpb24gb25kcmFpbigpIHtcbiAgICBpZiAoc291cmNlLnJlYWRhYmxlICYmIHNvdXJjZS5yZXN1bWUpIHtcbiAgICAgIHNvdXJjZS5yZXN1bWUoKTtcbiAgICB9XG4gIH1cblxuICBkZXN0Lm9uKCdkcmFpbicsIG9uZHJhaW4pO1xuXG4gIC8vIElmIHRoZSAnZW5kJyBvcHRpb24gaXMgbm90IHN1cHBsaWVkLCBkZXN0LmVuZCgpIHdpbGwgYmUgY2FsbGVkIHdoZW5cbiAgLy8gc291cmNlIGdldHMgdGhlICdlbmQnIG9yICdjbG9zZScgZXZlbnRzLiAgT25seSBkZXN0LmVuZCgpIG9uY2UuXG4gIGlmICghZGVzdC5faXNTdGRpbyAmJiAoIW9wdGlvbnMgfHwgb3B0aW9ucy5lbmQgIT09IGZhbHNlKSkge1xuICAgIHNvdXJjZS5vbignZW5kJywgb25lbmQpO1xuICAgIHNvdXJjZS5vbignY2xvc2UnLCBvbmNsb3NlKTtcbiAgfVxuXG4gIHZhciBkaWRPbkVuZCA9IGZhbHNlO1xuICBmdW5jdGlvbiBvbmVuZCgpIHtcbiAgICBpZiAoZGlkT25FbmQpIHJldHVybjtcbiAgICBkaWRPbkVuZCA9IHRydWU7XG5cbiAgICBkZXN0LmVuZCgpO1xuICB9XG5cblxuICBmdW5jdGlvbiBvbmNsb3NlKCkge1xuICAgIGlmIChkaWRPbkVuZCkgcmV0dXJuO1xuICAgIGRpZE9uRW5kID0gdHJ1ZTtcblxuICAgIGlmICh0eXBlb2YgZGVzdC5kZXN0cm95ID09PSAnZnVuY3Rpb24nKSBkZXN0LmRlc3Ryb3koKTtcbiAgfVxuXG4gIC8vIGRvbid0IGxlYXZlIGRhbmdsaW5nIHBpcGVzIHdoZW4gdGhlcmUgYXJlIGVycm9ycy5cbiAgZnVuY3Rpb24gb25lcnJvcihlcikge1xuICAgIGNsZWFudXAoKTtcbiAgICBpZiAoRUUubGlzdGVuZXJDb3VudCh0aGlzLCAnZXJyb3InKSA9PT0gMCkge1xuICAgICAgdGhyb3cgZXI7IC8vIFVuaGFuZGxlZCBzdHJlYW0gZXJyb3IgaW4gcGlwZS5cbiAgICB9XG4gIH1cblxuICBzb3VyY2Uub24oJ2Vycm9yJywgb25lcnJvcik7XG4gIGRlc3Qub24oJ2Vycm9yJywgb25lcnJvcik7XG5cbiAgLy8gcmVtb3ZlIGFsbCB0aGUgZXZlbnQgbGlzdGVuZXJzIHRoYXQgd2VyZSBhZGRlZC5cbiAgZnVuY3Rpb24gY2xlYW51cCgpIHtcbiAgICBzb3VyY2UucmVtb3ZlTGlzdGVuZXIoJ2RhdGEnLCBvbmRhdGEpO1xuICAgIGRlc3QucmVtb3ZlTGlzdGVuZXIoJ2RyYWluJywgb25kcmFpbik7XG5cbiAgICBzb3VyY2UucmVtb3ZlTGlzdGVuZXIoJ2VuZCcsIG9uZW5kKTtcbiAgICBzb3VyY2UucmVtb3ZlTGlzdGVuZXIoJ2Nsb3NlJywgb25jbG9zZSk7XG5cbiAgICBzb3VyY2UucmVtb3ZlTGlzdGVuZXIoJ2Vycm9yJywgb25lcnJvcik7XG4gICAgZGVzdC5yZW1vdmVMaXN0ZW5lcignZXJyb3InLCBvbmVycm9yKTtcblxuICAgIHNvdXJjZS5yZW1vdmVMaXN0ZW5lcignZW5kJywgY2xlYW51cCk7XG4gICAgc291cmNlLnJlbW92ZUxpc3RlbmVyKCdjbG9zZScsIGNsZWFudXApO1xuXG4gICAgZGVzdC5yZW1vdmVMaXN0ZW5lcignY2xvc2UnLCBjbGVhbnVwKTtcbiAgfVxuXG4gIHNvdXJjZS5vbignZW5kJywgY2xlYW51cCk7XG4gIHNvdXJjZS5vbignY2xvc2UnLCBjbGVhbnVwKTtcblxuICBkZXN0Lm9uKCdjbG9zZScsIGNsZWFudXApO1xuXG4gIGRlc3QuZW1pdCgncGlwZScsIHNvdXJjZSk7XG5cbiAgLy8gQWxsb3cgZm9yIHVuaXgtbGlrZSB1c2FnZTogQS5waXBlKEIpLnBpcGUoQylcbiAgcmV0dXJuIGRlc3Q7XG59O1xuIiwgImltcG9ydCBtc2cgZnJvbSAnLi9tZXNzYWdlcyc7XG5pbXBvcnQgenN0cmVhbSBmcm9tICcuL3pzdHJlYW0nO1xuaW1wb3J0IHtkZWZsYXRlSW5pdDIsIGRlZmxhdGVFbmQsIGRlZmxhdGVSZXNldCwgZGVmbGF0ZX0gZnJvbSAnLi9kZWZsYXRlJztcbmltcG9ydCB7aW5mbGF0ZUluaXQyLCBpbmZsYXRlLCBpbmZsYXRlRW5kLCBpbmZsYXRlUmVzZXR9IGZyb20gJy4vaW5mbGF0ZSc7XG4vLyBpbXBvcnQgY29uc3RhbnRzIGZyb20gJy4vY29uc3RhbnRzJztcblxuXG4vLyB6bGliIG1vZGVzXG5leHBvcnQgdmFyIE5PTkUgPSAwO1xuZXhwb3J0IHZhciBERUZMQVRFID0gMTtcbmV4cG9ydCB2YXIgSU5GTEFURSA9IDI7XG5leHBvcnQgdmFyIEdaSVAgPSAzO1xuZXhwb3J0IHZhciBHVU5aSVAgPSA0O1xuZXhwb3J0IHZhciBERUZMQVRFUkFXID0gNTtcbmV4cG9ydCB2YXIgSU5GTEFURVJBVyA9IDY7XG5leHBvcnQgdmFyIFVOWklQID0gNztcbmV4cG9ydCB2YXIgWl9OT19GTFVTSD0gICAgICAgICAwLFxuICBaX1BBUlRJQUxfRkxVU0g9ICAgIDEsXG4gIFpfU1lOQ19GTFVTSD0gICAgMixcbiAgWl9GVUxMX0ZMVVNIPSAgICAgICAzLFxuICBaX0ZJTklTSD0gICAgICAgNCxcbiAgWl9CTE9DSz0gICAgICAgICAgIDUsXG4gIFpfVFJFRVM9ICAgICAgICAgICAgNixcblxuICAvKiBSZXR1cm4gY29kZXMgZm9yIHRoZSBjb21wcmVzc2lvbi9kZWNvbXByZXNzaW9uIGZ1bmN0aW9ucy4gTmVnYXRpdmUgdmFsdWVzXG4gICogYXJlIGVycm9ycywgcG9zaXRpdmUgdmFsdWVzIGFyZSB1c2VkIGZvciBzcGVjaWFsIGJ1dCBub3JtYWwgZXZlbnRzLlxuICAqL1xuICBaX09LPSAgICAgICAgICAgICAgIDAsXG4gIFpfU1RSRUFNX0VORD0gICAgICAgMSxcbiAgWl9ORUVEX0RJQ1Q9ICAgICAgMixcbiAgWl9FUlJOTz0gICAgICAgLTEsXG4gIFpfU1RSRUFNX0VSUk9SPSAgIC0yLFxuICBaX0RBVEFfRVJST1I9ICAgIC0zLFxuICAvL1pfTUVNX0VSUk9SOiAgICAgLTQsXG4gIFpfQlVGX0VSUk9SPSAgICAtNSxcbiAgLy9aX1ZFUlNJT05fRVJST1I6IC02LFxuXG4gIC8qIGNvbXByZXNzaW9uIGxldmVscyAqL1xuICBaX05PX0NPTVBSRVNTSU9OPSAgICAgICAgIDAsXG4gIFpfQkVTVF9TUEVFRD0gICAgICAgICAgICAgMSxcbiAgWl9CRVNUX0NPTVBSRVNTSU9OPSAgICAgICA5LFxuICBaX0RFRkFVTFRfQ09NUFJFU1NJT049ICAgLTEsXG5cblxuICBaX0ZJTFRFUkVEPSAgICAgICAgICAgICAgIDEsXG4gIFpfSFVGRk1BTl9PTkxZPSAgICAgICAgICAgMixcbiAgWl9STEU9ICAgICAgICAgICAgICAgICAgICAzLFxuICBaX0ZJWEVEPSAgICAgICAgICAgICAgICAgIDQsXG4gIFpfREVGQVVMVF9TVFJBVEVHWT0gICAgICAgMCxcblxuICAvKiBQb3NzaWJsZSB2YWx1ZXMgb2YgdGhlIGRhdGFfdHlwZSBmaWVsZCAodGhvdWdoIHNlZSBpbmZsYXRlKCkpICovXG4gIFpfQklOQVJZPSAgICAgICAgICAgICAgICAgMCxcbiAgWl9URVhUPSAgICAgICAgICAgICAgICAgICAxLFxuICAvL1pfQVNDSUk6ICAgICAgICAgICAgICAgIDEsIC8vID0gWl9URVhUIChkZXByZWNhdGVkKVxuICBaX1VOS05PV049ICAgICAgICAgICAgICAgIDIsXG5cbiAgLyogVGhlIGRlZmxhdGUgY29tcHJlc3Npb24gbWV0aG9kICovXG4gIFpfREVGTEFURUQ9ICAgICAgICAgICAgICAgODtcbmV4cG9ydCBmdW5jdGlvbiBabGliKG1vZGUpIHtcbiAgaWYgKG1vZGUgPCBERUZMQVRFIHx8IG1vZGUgPiBVTlpJUClcbiAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdCYWQgYXJndW1lbnQnKTtcblxuICB0aGlzLm1vZGUgPSBtb2RlO1xuICB0aGlzLmluaXRfZG9uZSA9IGZhbHNlO1xuICB0aGlzLndyaXRlX2luX3Byb2dyZXNzID0gZmFsc2U7XG4gIHRoaXMucGVuZGluZ19jbG9zZSA9IGZhbHNlO1xuICB0aGlzLndpbmRvd0JpdHMgPSAwO1xuICB0aGlzLmxldmVsID0gMDtcbiAgdGhpcy5tZW1MZXZlbCA9IDA7XG4gIHRoaXMuc3RyYXRlZ3kgPSAwO1xuICB0aGlzLmRpY3Rpb25hcnkgPSBudWxsO1xufVxuXG5abGliLnByb3RvdHlwZS5pbml0ID0gZnVuY3Rpb24od2luZG93Qml0cywgbGV2ZWwsIG1lbUxldmVsLCBzdHJhdGVneSwgZGljdGlvbmFyeSkge1xuICB0aGlzLndpbmRvd0JpdHMgPSB3aW5kb3dCaXRzO1xuICB0aGlzLmxldmVsID0gbGV2ZWw7XG4gIHRoaXMubWVtTGV2ZWwgPSBtZW1MZXZlbDtcbiAgdGhpcy5zdHJhdGVneSA9IHN0cmF0ZWd5O1xuICAvLyBkaWN0aW9uYXJ5IG5vdCBzdXBwb3J0ZWQuXG5cbiAgaWYgKHRoaXMubW9kZSA9PT0gR1pJUCB8fCB0aGlzLm1vZGUgPT09IEdVTlpJUClcbiAgICB0aGlzLndpbmRvd0JpdHMgKz0gMTY7XG5cbiAgaWYgKHRoaXMubW9kZSA9PT0gVU5aSVApXG4gICAgdGhpcy53aW5kb3dCaXRzICs9IDMyO1xuXG4gIGlmICh0aGlzLm1vZGUgPT09IERFRkxBVEVSQVcgfHwgdGhpcy5tb2RlID09PSBJTkZMQVRFUkFXKVxuICAgIHRoaXMud2luZG93Qml0cyA9IC10aGlzLndpbmRvd0JpdHM7XG5cbiAgdGhpcy5zdHJtID0gbmV3IHpzdHJlYW0oKTtcbiAgdmFyIHN0YXR1cztcbiAgc3dpdGNoICh0aGlzLm1vZGUpIHtcbiAgY2FzZSBERUZMQVRFOlxuICBjYXNlIEdaSVA6XG4gIGNhc2UgREVGTEFURVJBVzpcbiAgICBzdGF0dXMgPSBkZWZsYXRlSW5pdDIoXG4gICAgICB0aGlzLnN0cm0sXG4gICAgICB0aGlzLmxldmVsLFxuICAgICAgWl9ERUZMQVRFRCxcbiAgICAgIHRoaXMud2luZG93Qml0cyxcbiAgICAgIHRoaXMubWVtTGV2ZWwsXG4gICAgICB0aGlzLnN0cmF0ZWd5XG4gICAgKTtcbiAgICBicmVhaztcbiAgY2FzZSBJTkZMQVRFOlxuICBjYXNlIEdVTlpJUDpcbiAgY2FzZSBJTkZMQVRFUkFXOlxuICBjYXNlIFVOWklQOlxuICAgIHN0YXR1cyAgPSBpbmZsYXRlSW5pdDIoXG4gICAgICB0aGlzLnN0cm0sXG4gICAgICB0aGlzLndpbmRvd0JpdHNcbiAgICApO1xuICAgIGJyZWFrO1xuICBkZWZhdWx0OlxuICAgIHRocm93IG5ldyBFcnJvcignVW5rbm93biBtb2RlICcgKyB0aGlzLm1vZGUpO1xuICB9XG5cbiAgaWYgKHN0YXR1cyAhPT0gWl9PSykge1xuICAgIHRoaXMuX2Vycm9yKHN0YXR1cyk7XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgdGhpcy53cml0ZV9pbl9wcm9ncmVzcyA9IGZhbHNlO1xuICB0aGlzLmluaXRfZG9uZSA9IHRydWU7XG59O1xuXG5abGliLnByb3RvdHlwZS5wYXJhbXMgPSBmdW5jdGlvbigpIHtcbiAgdGhyb3cgbmV3IEVycm9yKCdkZWZsYXRlUGFyYW1zIE5vdCBzdXBwb3J0ZWQnKTtcbn07XG5cblpsaWIucHJvdG90eXBlLl93cml0ZUNoZWNrID0gZnVuY3Rpb24oKSB7XG4gIGlmICghdGhpcy5pbml0X2RvbmUpXG4gICAgdGhyb3cgbmV3IEVycm9yKCd3cml0ZSBiZWZvcmUgaW5pdCcpO1xuXG4gIGlmICh0aGlzLm1vZGUgPT09IE5PTkUpXG4gICAgdGhyb3cgbmV3IEVycm9yKCdhbHJlYWR5IGZpbmFsaXplZCcpO1xuXG4gIGlmICh0aGlzLndyaXRlX2luX3Byb2dyZXNzKVxuICAgIHRocm93IG5ldyBFcnJvcignd3JpdGUgYWxyZWFkeSBpbiBwcm9ncmVzcycpO1xuXG4gIGlmICh0aGlzLnBlbmRpbmdfY2xvc2UpXG4gICAgdGhyb3cgbmV3IEVycm9yKCdjbG9zZSBpcyBwZW5kaW5nJyk7XG59O1xuXG5abGliLnByb3RvdHlwZS53cml0ZSA9IGZ1bmN0aW9uKGZsdXNoLCBpbnB1dCwgaW5fb2ZmLCBpbl9sZW4sIG91dCwgb3V0X29mZiwgb3V0X2xlbikge1xuICB0aGlzLl93cml0ZUNoZWNrKCk7XG4gIHRoaXMud3JpdGVfaW5fcHJvZ3Jlc3MgPSB0cnVlO1xuXG4gIHZhciBzZWxmID0gdGhpcztcbiAgcHJvY2Vzcy5uZXh0VGljayhmdW5jdGlvbigpIHtcbiAgICBzZWxmLndyaXRlX2luX3Byb2dyZXNzID0gZmFsc2U7XG4gICAgdmFyIHJlcyA9IHNlbGYuX3dyaXRlKGZsdXNoLCBpbnB1dCwgaW5fb2ZmLCBpbl9sZW4sIG91dCwgb3V0X29mZiwgb3V0X2xlbik7XG4gICAgc2VsZi5jYWxsYmFjayhyZXNbMF0sIHJlc1sxXSk7XG5cbiAgICBpZiAoc2VsZi5wZW5kaW5nX2Nsb3NlKVxuICAgICAgc2VsZi5jbG9zZSgpO1xuICB9KTtcblxuICByZXR1cm4gdGhpcztcbn07XG5cbi8vIHNldCBtZXRob2QgZm9yIE5vZGUgYnVmZmVycywgdXNlZCBieSBwYWtvXG5mdW5jdGlvbiBidWZmZXJTZXQoZGF0YSwgb2Zmc2V0KSB7XG4gIGZvciAodmFyIGkgPSAwOyBpIDwgZGF0YS5sZW5ndGg7IGkrKykge1xuICAgIHRoaXNbb2Zmc2V0ICsgaV0gPSBkYXRhW2ldO1xuICB9XG59XG5cblpsaWIucHJvdG90eXBlLndyaXRlU3luYyA9IGZ1bmN0aW9uKGZsdXNoLCBpbnB1dCwgaW5fb2ZmLCBpbl9sZW4sIG91dCwgb3V0X29mZiwgb3V0X2xlbikge1xuICB0aGlzLl93cml0ZUNoZWNrKCk7XG4gIHJldHVybiB0aGlzLl93cml0ZShmbHVzaCwgaW5wdXQsIGluX29mZiwgaW5fbGVuLCBvdXQsIG91dF9vZmYsIG91dF9sZW4pO1xufTtcblxuWmxpYi5wcm90b3R5cGUuX3dyaXRlID0gZnVuY3Rpb24oZmx1c2gsIGlucHV0LCBpbl9vZmYsIGluX2xlbiwgb3V0LCBvdXRfb2ZmLCBvdXRfbGVuKSB7XG4gIHRoaXMud3JpdGVfaW5fcHJvZ3Jlc3MgPSB0cnVlO1xuXG4gIGlmIChmbHVzaCAhPT0gWl9OT19GTFVTSCAmJlxuICAgICAgZmx1c2ggIT09IFpfUEFSVElBTF9GTFVTSCAmJlxuICAgICAgZmx1c2ggIT09IFpfU1lOQ19GTFVTSCAmJlxuICAgICAgZmx1c2ggIT09IFpfRlVMTF9GTFVTSCAmJlxuICAgICAgZmx1c2ggIT09IFpfRklOSVNIICYmXG4gICAgICBmbHVzaCAhPT0gWl9CTE9DSykge1xuICAgIHRocm93IG5ldyBFcnJvcignSW52YWxpZCBmbHVzaCB2YWx1ZScpO1xuICB9XG5cbiAgaWYgKGlucHV0ID09IG51bGwpIHtcbiAgICBpbnB1dCA9IG5ldyBCdWZmZXIoMCk7XG4gICAgaW5fbGVuID0gMDtcbiAgICBpbl9vZmYgPSAwO1xuICB9XG5cbiAgaWYgKG91dC5fc2V0KVxuICAgIG91dC5zZXQgPSBvdXQuX3NldDtcbiAgZWxzZVxuICAgIG91dC5zZXQgPSBidWZmZXJTZXQ7XG5cbiAgdmFyIHN0cm0gPSB0aGlzLnN0cm07XG4gIHN0cm0uYXZhaWxfaW4gPSBpbl9sZW47XG4gIHN0cm0uaW5wdXQgPSBpbnB1dDtcbiAgc3RybS5uZXh0X2luID0gaW5fb2ZmO1xuICBzdHJtLmF2YWlsX291dCA9IG91dF9sZW47XG4gIHN0cm0ub3V0cHV0ID0gb3V0O1xuICBzdHJtLm5leHRfb3V0ID0gb3V0X29mZjtcbiAgdmFyIHN0YXR1cztcbiAgc3dpdGNoICh0aGlzLm1vZGUpIHtcbiAgY2FzZSBERUZMQVRFOlxuICBjYXNlIEdaSVA6XG4gIGNhc2UgREVGTEFURVJBVzpcbiAgICBzdGF0dXMgPSBkZWZsYXRlKHN0cm0sIGZsdXNoKTtcbiAgICBicmVhaztcbiAgY2FzZSBVTlpJUDpcbiAgY2FzZSBJTkZMQVRFOlxuICBjYXNlIEdVTlpJUDpcbiAgY2FzZSBJTkZMQVRFUkFXOlxuICAgIHN0YXR1cyA9IGluZmxhdGUoc3RybSwgZmx1c2gpO1xuICAgIGJyZWFrO1xuICBkZWZhdWx0OlxuICAgIHRocm93IG5ldyBFcnJvcignVW5rbm93biBtb2RlICcgKyB0aGlzLm1vZGUpO1xuICB9XG5cbiAgaWYgKHN0YXR1cyAhPT0gWl9TVFJFQU1fRU5EICYmIHN0YXR1cyAhPT0gWl9PSykge1xuICAgIHRoaXMuX2Vycm9yKHN0YXR1cyk7XG4gIH1cblxuICB0aGlzLndyaXRlX2luX3Byb2dyZXNzID0gZmFsc2U7XG4gIHJldHVybiBbc3RybS5hdmFpbF9pbiwgc3RybS5hdmFpbF9vdXRdO1xufTtcblxuWmxpYi5wcm90b3R5cGUuY2xvc2UgPSBmdW5jdGlvbigpIHtcbiAgaWYgKHRoaXMud3JpdGVfaW5fcHJvZ3Jlc3MpIHtcbiAgICB0aGlzLnBlbmRpbmdfY2xvc2UgPSB0cnVlO1xuICAgIHJldHVybjtcbiAgfVxuXG4gIHRoaXMucGVuZGluZ19jbG9zZSA9IGZhbHNlO1xuXG4gIGlmICh0aGlzLm1vZGUgPT09IERFRkxBVEUgfHwgdGhpcy5tb2RlID09PSBHWklQIHx8IHRoaXMubW9kZSA9PT0gREVGTEFURVJBVykge1xuICAgIGRlZmxhdGVFbmQodGhpcy5zdHJtKTtcbiAgfSBlbHNlIHtcbiAgICBpbmZsYXRlRW5kKHRoaXMuc3RybSk7XG4gIH1cblxuICB0aGlzLm1vZGUgPSBOT05FO1xufTtcbnZhciBzdGF0dXNcblpsaWIucHJvdG90eXBlLnJlc2V0ID0gZnVuY3Rpb24oKSB7XG4gIHN3aXRjaCAodGhpcy5tb2RlKSB7XG4gIGNhc2UgREVGTEFURTpcbiAgY2FzZSBERUZMQVRFUkFXOlxuICAgIHN0YXR1cyA9IGRlZmxhdGVSZXNldCh0aGlzLnN0cm0pO1xuICAgIGJyZWFrO1xuICBjYXNlIElORkxBVEU6XG4gIGNhc2UgSU5GTEFURVJBVzpcbiAgICBzdGF0dXMgPSBpbmZsYXRlUmVzZXQodGhpcy5zdHJtKTtcbiAgICBicmVhaztcbiAgfVxuXG4gIGlmIChzdGF0dXMgIT09IFpfT0spIHtcbiAgICB0aGlzLl9lcnJvcihzdGF0dXMpO1xuICB9XG59O1xuXG5abGliLnByb3RvdHlwZS5fZXJyb3IgPSBmdW5jdGlvbihzdGF0dXMpIHtcbiAgdGhpcy5vbmVycm9yKG1zZ1tzdGF0dXNdICsgJzogJyArIHRoaXMuc3RybS5tc2csIHN0YXR1cyk7XG5cbiAgdGhpcy53cml0ZV9pbl9wcm9ncmVzcyA9IGZhbHNlO1xuICBpZiAodGhpcy5wZW5kaW5nX2Nsb3NlKVxuICAgIHRoaXMuY2xvc2UoKTtcbn07XG4iLCAiZXhwb3J0IGRlZmF1bHQge1xuICAyOiAgICAgICduZWVkIGRpY3Rpb25hcnknLCAgICAgLyogWl9ORUVEX0RJQ1QgICAgICAgMiAgKi9cbiAgMTogICAgICAnc3RyZWFtIGVuZCcsICAgICAgICAgIC8qIFpfU1RSRUFNX0VORCAgICAgIDEgICovXG4gIDA6ICAgICAgJycsICAgICAgICAgICAgICAgICAgICAvKiBaX09LICAgICAgICAgICAgICAwICAqL1xuICAnLTEnOiAgICdmaWxlIGVycm9yJywgICAgICAgICAgLyogWl9FUlJOTyAgICAgICAgICgtMSkgKi9cbiAgJy0yJzogICAnc3RyZWFtIGVycm9yJywgICAgICAgIC8qIFpfU1RSRUFNX0VSUk9SICAoLTIpICovXG4gICctMyc6ICAgJ2RhdGEgZXJyb3InLCAgICAgICAgICAvKiBaX0RBVEFfRVJST1IgICAgKC0zKSAqL1xuICAnLTQnOiAgICdpbnN1ZmZpY2llbnQgbWVtb3J5JywgLyogWl9NRU1fRVJST1IgICAgICgtNCkgKi9cbiAgJy01JzogICAnYnVmZmVyIGVycm9yJywgICAgICAgIC8qIFpfQlVGX0VSUk9SICAgICAoLTUpICovXG4gICctNic6ICAgJ2luY29tcGF0aWJsZSB2ZXJzaW9uJyAvKiBaX1ZFUlNJT05fRVJST1IgKC02KSAqL1xufTtcbiIsICJcblxuZnVuY3Rpb24gWlN0cmVhbSgpIHtcbiAgLyogbmV4dCBpbnB1dCBieXRlICovXG4gIHRoaXMuaW5wdXQgPSBudWxsOyAvLyBKUyBzcGVjaWZpYywgYmVjYXVzZSB3ZSBoYXZlIG5vIHBvaW50ZXJzXG4gIHRoaXMubmV4dF9pbiA9IDA7XG4gIC8qIG51bWJlciBvZiBieXRlcyBhdmFpbGFibGUgYXQgaW5wdXQgKi9cbiAgdGhpcy5hdmFpbF9pbiA9IDA7XG4gIC8qIHRvdGFsIG51bWJlciBvZiBpbnB1dCBieXRlcyByZWFkIHNvIGZhciAqL1xuICB0aGlzLnRvdGFsX2luID0gMDtcbiAgLyogbmV4dCBvdXRwdXQgYnl0ZSBzaG91bGQgYmUgcHV0IHRoZXJlICovXG4gIHRoaXMub3V0cHV0ID0gbnVsbDsgLy8gSlMgc3BlY2lmaWMsIGJlY2F1c2Ugd2UgaGF2ZSBubyBwb2ludGVyc1xuICB0aGlzLm5leHRfb3V0ID0gMDtcbiAgLyogcmVtYWluaW5nIGZyZWUgc3BhY2UgYXQgb3V0cHV0ICovXG4gIHRoaXMuYXZhaWxfb3V0ID0gMDtcbiAgLyogdG90YWwgbnVtYmVyIG9mIGJ5dGVzIG91dHB1dCBzbyBmYXIgKi9cbiAgdGhpcy50b3RhbF9vdXQgPSAwO1xuICAvKiBsYXN0IGVycm9yIG1lc3NhZ2UsIE5VTEwgaWYgbm8gZXJyb3IgKi9cbiAgdGhpcy5tc2cgPSAnJy8qWl9OVUxMKi87XG4gIC8qIG5vdCB2aXNpYmxlIGJ5IGFwcGxpY2F0aW9ucyAqL1xuICB0aGlzLnN0YXRlID0gbnVsbDtcbiAgLyogYmVzdCBndWVzcyBhYm91dCB0aGUgZGF0YSB0eXBlOiBiaW5hcnkgb3IgdGV4dCAqL1xuICB0aGlzLmRhdGFfdHlwZSA9IDIvKlpfVU5LTk9XTiovO1xuICAvKiBhZGxlcjMyIHZhbHVlIG9mIHRoZSB1bmNvbXByZXNzZWQgZGF0YSAqL1xuICB0aGlzLmFkbGVyID0gMDtcbn1cblxuZXhwb3J0IGRlZmF1bHQgWlN0cmVhbTtcbiIsICIndXNlIHN0cmljdCc7XG5cblxudmFyIFRZUEVEX09LID0gICh0eXBlb2YgVWludDhBcnJheSAhPT0gJ3VuZGVmaW5lZCcpICYmXG4gICAgICAgICAgICAgICAgKHR5cGVvZiBVaW50MTZBcnJheSAhPT0gJ3VuZGVmaW5lZCcpICYmXG4gICAgICAgICAgICAgICAgKHR5cGVvZiBJbnQzMkFycmF5ICE9PSAndW5kZWZpbmVkJyk7XG5cblxuZXhwb3J0IGZ1bmN0aW9uIGFzc2lnbihvYmogLypmcm9tMSwgZnJvbTIsIGZyb20zLCAuLi4qLykge1xuICB2YXIgc291cmNlcyA9IEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFyZ3VtZW50cywgMSk7XG4gIHdoaWxlIChzb3VyY2VzLmxlbmd0aCkge1xuICAgIHZhciBzb3VyY2UgPSBzb3VyY2VzLnNoaWZ0KCk7XG4gICAgaWYgKCFzb3VyY2UpIHsgY29udGludWU7IH1cblxuICAgIGlmICh0eXBlb2Ygc291cmNlICE9PSAnb2JqZWN0Jykge1xuICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihzb3VyY2UgKyAnbXVzdCBiZSBub24tb2JqZWN0Jyk7XG4gICAgfVxuXG4gICAgZm9yICh2YXIgcCBpbiBzb3VyY2UpIHtcbiAgICAgIGlmIChzb3VyY2UuaGFzT3duUHJvcGVydHkocCkpIHtcbiAgICAgICAgb2JqW3BdID0gc291cmNlW3BdO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIHJldHVybiBvYmo7XG59XG5cblxuLy8gcmVkdWNlIGJ1ZmZlciBzaXplLCBhdm9pZGluZyBtZW0gY29weVxuZXhwb3J0IGZ1bmN0aW9uIHNocmlua0J1ZihidWYsIHNpemUpIHtcbiAgaWYgKGJ1Zi5sZW5ndGggPT09IHNpemUpIHsgcmV0dXJuIGJ1ZjsgfVxuICBpZiAoYnVmLnN1YmFycmF5KSB7IHJldHVybiBidWYuc3ViYXJyYXkoMCwgc2l6ZSk7IH1cbiAgYnVmLmxlbmd0aCA9IHNpemU7XG4gIHJldHVybiBidWY7XG59XG5leHBvcnQgZnVuY3Rpb24gYXJyYXlTZXQoZGVzdCwgc3JjLCBzcmNfb2ZmcywgbGVuLCBkZXN0X29mZnMpIHtcbiAgaWYgKHNyYy5zdWJhcnJheSAmJiBkZXN0LnN1YmFycmF5KSB7XG4gICAgZGVzdC5zZXQoc3JjLnN1YmFycmF5KHNyY19vZmZzLCBzcmNfb2ZmcyArIGxlbiksIGRlc3Rfb2Zmcyk7XG4gICAgcmV0dXJuO1xuICB9XG4gIC8vIEZhbGxiYWNrIHRvIG9yZGluYXJ5IGFycmF5XG4gIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuOyBpKyspIHtcbiAgICBkZXN0W2Rlc3Rfb2ZmcyArIGldID0gc3JjW3NyY19vZmZzICsgaV07XG4gIH1cbn1cbmV4cG9ydCBmdW5jdGlvbiBmbGF0dGVuQ2h1bmtzKGNodW5rcykge1xuICB2YXIgaSwgbCwgbGVuLCBwb3MsIGNodW5rLCByZXN1bHQ7XG5cbiAgLy8gY2FsY3VsYXRlIGRhdGEgbGVuZ3RoXG4gIGxlbiA9IDA7XG4gIGZvciAoaSA9IDAsIGwgPSBjaHVua3MubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG4gICAgbGVuICs9IGNodW5rc1tpXS5sZW5ndGg7XG4gIH1cblxuICAvLyBqb2luIGNodW5rc1xuICByZXN1bHQgPSBuZXcgVWludDhBcnJheShsZW4pO1xuICBwb3MgPSAwO1xuICBmb3IgKGkgPSAwLCBsID0gY2h1bmtzLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuICAgIGNodW5rID0gY2h1bmtzW2ldO1xuICAgIHJlc3VsdC5zZXQoY2h1bmssIHBvcyk7XG4gICAgcG9zICs9IGNodW5rLmxlbmd0aDtcbiAgfVxuXG4gIHJldHVybiByZXN1bHQ7XG59XG5cblxuZXhwb3J0IHZhciBCdWY4ID0gVWludDhBcnJheTtcbmV4cG9ydCB2YXIgQnVmMTYgPSBVaW50MTZBcnJheTtcbmV4cG9ydCB2YXIgQnVmMzIgPSBJbnQzMkFycmF5O1xuLy8gRW5hYmxlL0Rpc2FibGUgdHlwZWQgYXJyYXlzIHVzZSwgZm9yIHRlc3Rpbmdcbi8vXG4iLCAiJ3VzZSBzdHJpY3QnO1xuXG5pbXBvcnQge2FycmF5U2V0fSBmcm9tICcuL3V0aWxzJztcblxuLyogUHVibGljIGNvbnN0YW50cyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09Ki9cbi8qID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PSovXG5cblxuLy92YXIgWl9GSUxURVJFRCAgICAgICAgICA9IDE7XG4vL3ZhciBaX0hVRkZNQU5fT05MWSAgICAgID0gMjtcbi8vdmFyIFpfUkxFICAgICAgICAgICAgICAgPSAzO1xudmFyIFpfRklYRUQgPSA0O1xuLy92YXIgWl9ERUZBVUxUX1NUUkFURUdZICA9IDA7XG5cbi8qIFBvc3NpYmxlIHZhbHVlcyBvZiB0aGUgZGF0YV90eXBlIGZpZWxkICh0aG91Z2ggc2VlIGluZmxhdGUoKSkgKi9cbnZhciBaX0JJTkFSWSA9IDA7XG52YXIgWl9URVhUID0gMTtcbi8vdmFyIFpfQVNDSUkgICAgICAgICAgICAgPSAxOyAvLyA9IFpfVEVYVFxudmFyIFpfVU5LTk9XTiA9IDI7XG5cbi8qPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PSovXG5cblxuZnVuY3Rpb24gemVybyhidWYpIHtcbiAgdmFyIGxlbiA9IGJ1Zi5sZW5ndGg7XG4gIHdoaWxlICgtLWxlbiA+PSAwKSB7XG4gICAgYnVmW2xlbl0gPSAwO1xuICB9XG59XG5cbi8vIEZyb20genV0aWwuaFxuXG52YXIgU1RPUkVEX0JMT0NLID0gMDtcbnZhciBTVEFUSUNfVFJFRVMgPSAxO1xudmFyIERZTl9UUkVFUyA9IDI7XG4vKiBUaGUgdGhyZWUga2luZHMgb2YgYmxvY2sgdHlwZSAqL1xuXG52YXIgTUlOX01BVENIID0gMztcbnZhciBNQVhfTUFUQ0ggPSAyNTg7XG4vKiBUaGUgbWluaW11bSBhbmQgbWF4aW11bSBtYXRjaCBsZW5ndGhzICovXG5cbi8vIEZyb20gZGVmbGF0ZS5oXG4vKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbiAqIEludGVybmFsIGNvbXByZXNzaW9uIHN0YXRlLlxuICovXG5cbnZhciBMRU5HVEhfQ09ERVMgPSAyOTtcbi8qIG51bWJlciBvZiBsZW5ndGggY29kZXMsIG5vdCBjb3VudGluZyB0aGUgc3BlY2lhbCBFTkRfQkxPQ0sgY29kZSAqL1xuXG52YXIgTElURVJBTFMgPSAyNTY7XG4vKiBudW1iZXIgb2YgbGl0ZXJhbCBieXRlcyAwLi4yNTUgKi9cblxudmFyIExfQ09ERVMgPSBMSVRFUkFMUyArIDEgKyBMRU5HVEhfQ09ERVM7XG4vKiBudW1iZXIgb2YgTGl0ZXJhbCBvciBMZW5ndGggY29kZXMsIGluY2x1ZGluZyB0aGUgRU5EX0JMT0NLIGNvZGUgKi9cblxudmFyIERfQ09ERVMgPSAzMDtcbi8qIG51bWJlciBvZiBkaXN0YW5jZSBjb2RlcyAqL1xuXG52YXIgQkxfQ09ERVMgPSAxOTtcbi8qIG51bWJlciBvZiBjb2RlcyB1c2VkIHRvIHRyYW5zZmVyIHRoZSBiaXQgbGVuZ3RocyAqL1xuXG52YXIgSEVBUF9TSVpFID0gMiAqIExfQ09ERVMgKyAxO1xuLyogbWF4aW11bSBoZWFwIHNpemUgKi9cblxudmFyIE1BWF9CSVRTID0gMTU7XG4vKiBBbGwgY29kZXMgbXVzdCBub3QgZXhjZWVkIE1BWF9CSVRTIGJpdHMgKi9cblxudmFyIEJ1Zl9zaXplID0gMTY7XG4vKiBzaXplIG9mIGJpdCBidWZmZXIgaW4gYmlfYnVmICovXG5cblxuLyogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4gKiBDb25zdGFudHNcbiAqL1xuXG52YXIgTUFYX0JMX0JJVFMgPSA3O1xuLyogQml0IGxlbmd0aCBjb2RlcyBtdXN0IG5vdCBleGNlZWQgTUFYX0JMX0JJVFMgYml0cyAqL1xuXG52YXIgRU5EX0JMT0NLID0gMjU2O1xuLyogZW5kIG9mIGJsb2NrIGxpdGVyYWwgY29kZSAqL1xuXG52YXIgUkVQXzNfNiA9IDE2O1xuLyogcmVwZWF0IHByZXZpb3VzIGJpdCBsZW5ndGggMy02IHRpbWVzICgyIGJpdHMgb2YgcmVwZWF0IGNvdW50KSAqL1xuXG52YXIgUkVQWl8zXzEwID0gMTc7XG4vKiByZXBlYXQgYSB6ZXJvIGxlbmd0aCAzLTEwIHRpbWVzICAoMyBiaXRzIG9mIHJlcGVhdCBjb3VudCkgKi9cblxudmFyIFJFUFpfMTFfMTM4ID0gMTg7XG4vKiByZXBlYXQgYSB6ZXJvIGxlbmd0aCAxMS0xMzggdGltZXMgICg3IGJpdHMgb2YgcmVwZWF0IGNvdW50KSAqL1xuXG4vKiBlc2xpbnQtZGlzYWJsZSBjb21tYS1zcGFjaW5nLGFycmF5LWJyYWNrZXQtc3BhY2luZyAqL1xudmFyIGV4dHJhX2xiaXRzID0gLyogZXh0cmEgYml0cyBmb3IgZWFjaCBsZW5ndGggY29kZSAqLyBbMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMSwgMSwgMSwgMSwgMiwgMiwgMiwgMiwgMywgMywgMywgMywgNCwgNCwgNCwgNCwgNSwgNSwgNSwgNSwgMF07XG5cbnZhciBleHRyYV9kYml0cyA9IC8qIGV4dHJhIGJpdHMgZm9yIGVhY2ggZGlzdGFuY2UgY29kZSAqLyBbMCwgMCwgMCwgMCwgMSwgMSwgMiwgMiwgMywgMywgNCwgNCwgNSwgNSwgNiwgNiwgNywgNywgOCwgOCwgOSwgOSwgMTAsIDEwLCAxMSwgMTEsIDEyLCAxMiwgMTMsIDEzXTtcblxudmFyIGV4dHJhX2JsYml0cyA9IC8qIGV4dHJhIGJpdHMgZm9yIGVhY2ggYml0IGxlbmd0aCBjb2RlICovIFswLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAyLCAzLCA3XTtcblxudmFyIGJsX29yZGVyID0gWzE2LCAxNywgMTgsIDAsIDgsIDcsIDksIDYsIDEwLCA1LCAxMSwgNCwgMTIsIDMsIDEzLCAyLCAxNCwgMSwgMTVdO1xuLyogZXNsaW50LWVuYWJsZSBjb21tYS1zcGFjaW5nLGFycmF5LWJyYWNrZXQtc3BhY2luZyAqL1xuXG4vKiBUaGUgbGVuZ3RocyBvZiB0aGUgYml0IGxlbmd0aCBjb2RlcyBhcmUgc2VudCBpbiBvcmRlciBvZiBkZWNyZWFzaW5nXG4gKiBwcm9iYWJpbGl0eSwgdG8gYXZvaWQgdHJhbnNtaXR0aW5nIHRoZSBsZW5ndGhzIGZvciB1bnVzZWQgYml0IGxlbmd0aCBjb2Rlcy5cbiAqL1xuXG4vKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbiAqIExvY2FsIGRhdGEuIFRoZXNlIGFyZSBpbml0aWFsaXplZCBvbmx5IG9uY2UuXG4gKi9cblxuLy8gV2UgcHJlLWZpbGwgYXJyYXlzIHdpdGggMCB0byBhdm9pZCB1bmluaXRpYWxpemVkIGdhcHNcblxudmFyIERJU1RfQ09ERV9MRU4gPSA1MTI7IC8qIHNlZSBkZWZpbml0aW9uIG9mIGFycmF5IGRpc3RfY29kZSBiZWxvdyAqL1xuXG4vLyAhISEhIFVzZSBmbGF0IGFycmF5IGluc2RlYWQgb2Ygc3RydWN0dXJlLCBGcmVxID0gaSoyLCBMZW4gPSBpKjIrMVxudmFyIHN0YXRpY19sdHJlZSA9IG5ldyBBcnJheSgoTF9DT0RFUyArIDIpICogMik7XG56ZXJvKHN0YXRpY19sdHJlZSk7XG4vKiBUaGUgc3RhdGljIGxpdGVyYWwgdHJlZS4gU2luY2UgdGhlIGJpdCBsZW5ndGhzIGFyZSBpbXBvc2VkLCB0aGVyZSBpcyBub1xuICogbmVlZCBmb3IgdGhlIExfQ09ERVMgZXh0cmEgY29kZXMgdXNlZCBkdXJpbmcgaGVhcCBjb25zdHJ1Y3Rpb24uIEhvd2V2ZXJcbiAqIFRoZSBjb2RlcyAyODYgYW5kIDI4NyBhcmUgbmVlZGVkIHRvIGJ1aWxkIGEgY2Fub25pY2FsIHRyZWUgKHNlZSBfdHJfaW5pdFxuICogYmVsb3cpLlxuICovXG5cbnZhciBzdGF0aWNfZHRyZWUgPSBuZXcgQXJyYXkoRF9DT0RFUyAqIDIpO1xuemVybyhzdGF0aWNfZHRyZWUpO1xuLyogVGhlIHN0YXRpYyBkaXN0YW5jZSB0cmVlLiAoQWN0dWFsbHkgYSB0cml2aWFsIHRyZWUgc2luY2UgYWxsIGNvZGVzIHVzZVxuICogNSBiaXRzLilcbiAqL1xuXG52YXIgX2Rpc3RfY29kZSA9IG5ldyBBcnJheShESVNUX0NPREVfTEVOKTtcbnplcm8oX2Rpc3RfY29kZSk7XG4vKiBEaXN0YW5jZSBjb2Rlcy4gVGhlIGZpcnN0IDI1NiB2YWx1ZXMgY29ycmVzcG9uZCB0byB0aGUgZGlzdGFuY2VzXG4gKiAzIC4uIDI1OCwgdGhlIGxhc3QgMjU2IHZhbHVlcyBjb3JyZXNwb25kIHRvIHRoZSB0b3AgOCBiaXRzIG9mXG4gKiB0aGUgMTUgYml0IGRpc3RhbmNlcy5cbiAqL1xuXG52YXIgX2xlbmd0aF9jb2RlID0gbmV3IEFycmF5KE1BWF9NQVRDSCAtIE1JTl9NQVRDSCArIDEpO1xuemVybyhfbGVuZ3RoX2NvZGUpO1xuLyogbGVuZ3RoIGNvZGUgZm9yIGVhY2ggbm9ybWFsaXplZCBtYXRjaCBsZW5ndGggKDAgPT0gTUlOX01BVENIKSAqL1xuXG52YXIgYmFzZV9sZW5ndGggPSBuZXcgQXJyYXkoTEVOR1RIX0NPREVTKTtcbnplcm8oYmFzZV9sZW5ndGgpO1xuLyogRmlyc3Qgbm9ybWFsaXplZCBsZW5ndGggZm9yIGVhY2ggY29kZSAoMCA9IE1JTl9NQVRDSCkgKi9cblxudmFyIGJhc2VfZGlzdCA9IG5ldyBBcnJheShEX0NPREVTKTtcbnplcm8oYmFzZV9kaXN0KTtcbi8qIEZpcnN0IG5vcm1hbGl6ZWQgZGlzdGFuY2UgZm9yIGVhY2ggY29kZSAoMCA9IGRpc3RhbmNlIG9mIDEpICovXG5cblxuZnVuY3Rpb24gU3RhdGljVHJlZURlc2Moc3RhdGljX3RyZWUsIGV4dHJhX2JpdHMsIGV4dHJhX2Jhc2UsIGVsZW1zLCBtYXhfbGVuZ3RoKSB7XG5cbiAgdGhpcy5zdGF0aWNfdHJlZSA9IHN0YXRpY190cmVlOyAvKiBzdGF0aWMgdHJlZSBvciBOVUxMICovXG4gIHRoaXMuZXh0cmFfYml0cyA9IGV4dHJhX2JpdHM7IC8qIGV4dHJhIGJpdHMgZm9yIGVhY2ggY29kZSBvciBOVUxMICovXG4gIHRoaXMuZXh0cmFfYmFzZSA9IGV4dHJhX2Jhc2U7IC8qIGJhc2UgaW5kZXggZm9yIGV4dHJhX2JpdHMgKi9cbiAgdGhpcy5lbGVtcyA9IGVsZW1zOyAvKiBtYXggbnVtYmVyIG9mIGVsZW1lbnRzIGluIHRoZSB0cmVlICovXG4gIHRoaXMubWF4X2xlbmd0aCA9IG1heF9sZW5ndGg7IC8qIG1heCBiaXQgbGVuZ3RoIGZvciB0aGUgY29kZXMgKi9cblxuICAvLyBzaG93IGlmIGBzdGF0aWNfdHJlZWAgaGFzIGRhdGEgb3IgZHVtbXkgLSBuZWVkZWQgZm9yIG1vbm9tb3JwaGljIG9iamVjdHNcbiAgdGhpcy5oYXNfc3RyZWUgPSBzdGF0aWNfdHJlZSAmJiBzdGF0aWNfdHJlZS5sZW5ndGg7XG59XG5cblxudmFyIHN0YXRpY19sX2Rlc2M7XG52YXIgc3RhdGljX2RfZGVzYztcbnZhciBzdGF0aWNfYmxfZGVzYztcblxuXG5mdW5jdGlvbiBUcmVlRGVzYyhkeW5fdHJlZSwgc3RhdF9kZXNjKSB7XG4gIHRoaXMuZHluX3RyZWUgPSBkeW5fdHJlZTsgLyogdGhlIGR5bmFtaWMgdHJlZSAqL1xuICB0aGlzLm1heF9jb2RlID0gMDsgLyogbGFyZ2VzdCBjb2RlIHdpdGggbm9uIHplcm8gZnJlcXVlbmN5ICovXG4gIHRoaXMuc3RhdF9kZXNjID0gc3RhdF9kZXNjOyAvKiB0aGUgY29ycmVzcG9uZGluZyBzdGF0aWMgdHJlZSAqL1xufVxuXG5cblxuZnVuY3Rpb24gZF9jb2RlKGRpc3QpIHtcbiAgcmV0dXJuIGRpc3QgPCAyNTYgPyBfZGlzdF9jb2RlW2Rpc3RdIDogX2Rpc3RfY29kZVsyNTYgKyAoZGlzdCA+Pj4gNyldO1xufVxuXG5cbi8qID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuICogT3V0cHV0IGEgc2hvcnQgTFNCIGZpcnN0IG9uIHRoZSBzdHJlYW0uXG4gKiBJTiBhc3NlcnRpb246IHRoZXJlIGlzIGVub3VnaCByb29tIGluIHBlbmRpbmdCdWYuXG4gKi9cbmZ1bmN0aW9uIHB1dF9zaG9ydChzLCB3KSB7XG4gIC8vICAgIHB1dF9ieXRlKHMsICh1Y2gpKCh3KSAmIDB4ZmYpKTtcbiAgLy8gICAgcHV0X2J5dGUocywgKHVjaCkoKHVzaCkodykgPj4gOCkpO1xuICBzLnBlbmRpbmdfYnVmW3MucGVuZGluZysrXSA9ICh3KSAmIDB4ZmY7XG4gIHMucGVuZGluZ19idWZbcy5wZW5kaW5nKytdID0gKHcgPj4+IDgpICYgMHhmZjtcbn1cblxuXG4vKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbiAqIFNlbmQgYSB2YWx1ZSBvbiBhIGdpdmVuIG51bWJlciBvZiBiaXRzLlxuICogSU4gYXNzZXJ0aW9uOiBsZW5ndGggPD0gMTYgYW5kIHZhbHVlIGZpdHMgaW4gbGVuZ3RoIGJpdHMuXG4gKi9cbmZ1bmN0aW9uIHNlbmRfYml0cyhzLCB2YWx1ZSwgbGVuZ3RoKSB7XG4gIGlmIChzLmJpX3ZhbGlkID4gKEJ1Zl9zaXplIC0gbGVuZ3RoKSkge1xuICAgIHMuYmlfYnVmIHw9ICh2YWx1ZSA8PCBzLmJpX3ZhbGlkKSAmIDB4ZmZmZjtcbiAgICBwdXRfc2hvcnQocywgcy5iaV9idWYpO1xuICAgIHMuYmlfYnVmID0gdmFsdWUgPj4gKEJ1Zl9zaXplIC0gcy5iaV92YWxpZCk7XG4gICAgcy5iaV92YWxpZCArPSBsZW5ndGggLSBCdWZfc2l6ZTtcbiAgfSBlbHNlIHtcbiAgICBzLmJpX2J1ZiB8PSAodmFsdWUgPDwgcy5iaV92YWxpZCkgJiAweGZmZmY7XG4gICAgcy5iaV92YWxpZCArPSBsZW5ndGg7XG4gIH1cbn1cblxuXG5mdW5jdGlvbiBzZW5kX2NvZGUocywgYywgdHJlZSkge1xuICBzZW5kX2JpdHMocywgdHJlZVtjICogMl0gLyouQ29kZSovICwgdHJlZVtjICogMiArIDFdIC8qLkxlbiovICk7XG59XG5cblxuLyogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4gKiBSZXZlcnNlIHRoZSBmaXJzdCBsZW4gYml0cyBvZiBhIGNvZGUsIHVzaW5nIHN0cmFpZ2h0Zm9yd2FyZCBjb2RlIChhIGZhc3RlclxuICogbWV0aG9kIHdvdWxkIHVzZSBhIHRhYmxlKVxuICogSU4gYXNzZXJ0aW9uOiAxIDw9IGxlbiA8PSAxNVxuICovXG5mdW5jdGlvbiBiaV9yZXZlcnNlKGNvZGUsIGxlbikge1xuICB2YXIgcmVzID0gMDtcbiAgZG8ge1xuICAgIHJlcyB8PSBjb2RlICYgMTtcbiAgICBjb2RlID4+Pj0gMTtcbiAgICByZXMgPDw9IDE7XG4gIH0gd2hpbGUgKC0tbGVuID4gMCk7XG4gIHJldHVybiByZXMgPj4+IDE7XG59XG5cblxuLyogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4gKiBGbHVzaCB0aGUgYml0IGJ1ZmZlciwga2VlcGluZyBhdCBtb3N0IDcgYml0cyBpbiBpdC5cbiAqL1xuZnVuY3Rpb24gYmlfZmx1c2gocykge1xuICBpZiAocy5iaV92YWxpZCA9PT0gMTYpIHtcbiAgICBwdXRfc2hvcnQocywgcy5iaV9idWYpO1xuICAgIHMuYmlfYnVmID0gMDtcbiAgICBzLmJpX3ZhbGlkID0gMDtcblxuICB9IGVsc2UgaWYgKHMuYmlfdmFsaWQgPj0gOCkge1xuICAgIHMucGVuZGluZ19idWZbcy5wZW5kaW5nKytdID0gcy5iaV9idWYgJiAweGZmO1xuICAgIHMuYmlfYnVmID4+PSA4O1xuICAgIHMuYmlfdmFsaWQgLT0gODtcbiAgfVxufVxuXG5cbi8qID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuICogQ29tcHV0ZSB0aGUgb3B0aW1hbCBiaXQgbGVuZ3RocyBmb3IgYSB0cmVlIGFuZCB1cGRhdGUgdGhlIHRvdGFsIGJpdCBsZW5ndGhcbiAqIGZvciB0aGUgY3VycmVudCBibG9jay5cbiAqIElOIGFzc2VydGlvbjogdGhlIGZpZWxkcyBmcmVxIGFuZCBkYWQgYXJlIHNldCwgaGVhcFtoZWFwX21heF0gYW5kXG4gKiAgICBhYm92ZSBhcmUgdGhlIHRyZWUgbm9kZXMgc29ydGVkIGJ5IGluY3JlYXNpbmcgZnJlcXVlbmN5LlxuICogT1VUIGFzc2VydGlvbnM6IHRoZSBmaWVsZCBsZW4gaXMgc2V0IHRvIHRoZSBvcHRpbWFsIGJpdCBsZW5ndGgsIHRoZVxuICogICAgIGFycmF5IGJsX2NvdW50IGNvbnRhaW5zIHRoZSBmcmVxdWVuY2llcyBmb3IgZWFjaCBiaXQgbGVuZ3RoLlxuICogICAgIFRoZSBsZW5ndGggb3B0X2xlbiBpcyB1cGRhdGVkOyBzdGF0aWNfbGVuIGlzIGFsc28gdXBkYXRlZCBpZiBzdHJlZSBpc1xuICogICAgIG5vdCBudWxsLlxuICovXG5mdW5jdGlvbiBnZW5fYml0bGVuKHMsIGRlc2MpIHtcbi8vICAgIGRlZmxhdGVfc3RhdGUgKnM7XG4vLyAgICB0cmVlX2Rlc2MgKmRlc2M7ICAgIC8qIHRoZSB0cmVlIGRlc2NyaXB0b3IgKi9cbiAgdmFyIHRyZWUgPSBkZXNjLmR5bl90cmVlO1xuICB2YXIgbWF4X2NvZGUgPSBkZXNjLm1heF9jb2RlO1xuICB2YXIgc3RyZWUgPSBkZXNjLnN0YXRfZGVzYy5zdGF0aWNfdHJlZTtcbiAgdmFyIGhhc19zdHJlZSA9IGRlc2Muc3RhdF9kZXNjLmhhc19zdHJlZTtcbiAgdmFyIGV4dHJhID0gZGVzYy5zdGF0X2Rlc2MuZXh0cmFfYml0cztcbiAgdmFyIGJhc2UgPSBkZXNjLnN0YXRfZGVzYy5leHRyYV9iYXNlO1xuICB2YXIgbWF4X2xlbmd0aCA9IGRlc2Muc3RhdF9kZXNjLm1heF9sZW5ndGg7XG4gIHZhciBoOyAvKiBoZWFwIGluZGV4ICovXG4gIHZhciBuLCBtOyAvKiBpdGVyYXRlIG92ZXIgdGhlIHRyZWUgZWxlbWVudHMgKi9cbiAgdmFyIGJpdHM7IC8qIGJpdCBsZW5ndGggKi9cbiAgdmFyIHhiaXRzOyAvKiBleHRyYSBiaXRzICovXG4gIHZhciBmOyAvKiBmcmVxdWVuY3kgKi9cbiAgdmFyIG92ZXJmbG93ID0gMDsgLyogbnVtYmVyIG9mIGVsZW1lbnRzIHdpdGggYml0IGxlbmd0aCB0b28gbGFyZ2UgKi9cblxuICBmb3IgKGJpdHMgPSAwOyBiaXRzIDw9IE1BWF9CSVRTOyBiaXRzKyspIHtcbiAgICBzLmJsX2NvdW50W2JpdHNdID0gMDtcbiAgfVxuXG4gIC8qIEluIGEgZmlyc3QgcGFzcywgY29tcHV0ZSB0aGUgb3B0aW1hbCBiaXQgbGVuZ3RocyAod2hpY2ggbWF5XG4gICAqIG92ZXJmbG93IGluIHRoZSBjYXNlIG9mIHRoZSBiaXQgbGVuZ3RoIHRyZWUpLlxuICAgKi9cbiAgdHJlZVtzLmhlYXBbcy5oZWFwX21heF0gKiAyICsgMV0gLyouTGVuKi8gPSAwOyAvKiByb290IG9mIHRoZSBoZWFwICovXG5cbiAgZm9yIChoID0gcy5oZWFwX21heCArIDE7IGggPCBIRUFQX1NJWkU7IGgrKykge1xuICAgIG4gPSBzLmhlYXBbaF07XG4gICAgYml0cyA9IHRyZWVbdHJlZVtuICogMiArIDFdIC8qLkRhZCovICogMiArIDFdIC8qLkxlbiovICsgMTtcbiAgICBpZiAoYml0cyA+IG1heF9sZW5ndGgpIHtcbiAgICAgIGJpdHMgPSBtYXhfbGVuZ3RoO1xuICAgICAgb3ZlcmZsb3crKztcbiAgICB9XG4gICAgdHJlZVtuICogMiArIDFdIC8qLkxlbiovID0gYml0cztcbiAgICAvKiBXZSBvdmVyd3JpdGUgdHJlZVtuXS5EYWQgd2hpY2ggaXMgbm8gbG9uZ2VyIG5lZWRlZCAqL1xuXG4gICAgaWYgKG4gPiBtYXhfY29kZSkge1xuICAgICAgY29udGludWU7XG4gICAgfSAvKiBub3QgYSBsZWFmIG5vZGUgKi9cblxuICAgIHMuYmxfY291bnRbYml0c10rKztcbiAgICB4Yml0cyA9IDA7XG4gICAgaWYgKG4gPj0gYmFzZSkge1xuICAgICAgeGJpdHMgPSBleHRyYVtuIC0gYmFzZV07XG4gICAgfVxuICAgIGYgPSB0cmVlW24gKiAyXSAvKi5GcmVxKi8gO1xuICAgIHMub3B0X2xlbiArPSBmICogKGJpdHMgKyB4Yml0cyk7XG4gICAgaWYgKGhhc19zdHJlZSkge1xuICAgICAgcy5zdGF0aWNfbGVuICs9IGYgKiAoc3RyZWVbbiAqIDIgKyAxXSAvKi5MZW4qLyArIHhiaXRzKTtcbiAgICB9XG4gIH1cbiAgaWYgKG92ZXJmbG93ID09PSAwKSB7XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgLy8gVHJhY2UoKHN0ZGVycixcIlxcbmJpdCBsZW5ndGggb3ZlcmZsb3dcXG5cIikpO1xuICAvKiBUaGlzIGhhcHBlbnMgZm9yIGV4YW1wbGUgb24gb2JqMiBhbmQgcGljIG9mIHRoZSBDYWxnYXJ5IGNvcnB1cyAqL1xuXG4gIC8qIEZpbmQgdGhlIGZpcnN0IGJpdCBsZW5ndGggd2hpY2ggY291bGQgaW5jcmVhc2U6ICovXG4gIGRvIHtcbiAgICBiaXRzID0gbWF4X2xlbmd0aCAtIDE7XG4gICAgd2hpbGUgKHMuYmxfY291bnRbYml0c10gPT09IDApIHtcbiAgICAgIGJpdHMtLTtcbiAgICB9XG4gICAgcy5ibF9jb3VudFtiaXRzXS0tOyAvKiBtb3ZlIG9uZSBsZWFmIGRvd24gdGhlIHRyZWUgKi9cbiAgICBzLmJsX2NvdW50W2JpdHMgKyAxXSArPSAyOyAvKiBtb3ZlIG9uZSBvdmVyZmxvdyBpdGVtIGFzIGl0cyBicm90aGVyICovXG4gICAgcy5ibF9jb3VudFttYXhfbGVuZ3RoXS0tO1xuICAgIC8qIFRoZSBicm90aGVyIG9mIHRoZSBvdmVyZmxvdyBpdGVtIGFsc28gbW92ZXMgb25lIHN0ZXAgdXAsXG4gICAgICogYnV0IHRoaXMgZG9lcyBub3QgYWZmZWN0IGJsX2NvdW50W21heF9sZW5ndGhdXG4gICAgICovXG4gICAgb3ZlcmZsb3cgLT0gMjtcbiAgfSB3aGlsZSAob3ZlcmZsb3cgPiAwKTtcblxuICAvKiBOb3cgcmVjb21wdXRlIGFsbCBiaXQgbGVuZ3Rocywgc2Nhbm5pbmcgaW4gaW5jcmVhc2luZyBmcmVxdWVuY3kuXG4gICAqIGggaXMgc3RpbGwgZXF1YWwgdG8gSEVBUF9TSVpFLiAoSXQgaXMgc2ltcGxlciB0byByZWNvbnN0cnVjdCBhbGxcbiAgICogbGVuZ3RocyBpbnN0ZWFkIG9mIGZpeGluZyBvbmx5IHRoZSB3cm9uZyBvbmVzLiBUaGlzIGlkZWEgaXMgdGFrZW5cbiAgICogZnJvbSAnYXInIHdyaXR0ZW4gYnkgSGFydWhpa28gT2t1bXVyYS4pXG4gICAqL1xuICBmb3IgKGJpdHMgPSBtYXhfbGVuZ3RoOyBiaXRzICE9PSAwOyBiaXRzLS0pIHtcbiAgICBuID0gcy5ibF9jb3VudFtiaXRzXTtcbiAgICB3aGlsZSAobiAhPT0gMCkge1xuICAgICAgbSA9IHMuaGVhcFstLWhdO1xuICAgICAgaWYgKG0gPiBtYXhfY29kZSkge1xuICAgICAgICBjb250aW51ZTtcbiAgICAgIH1cbiAgICAgIGlmICh0cmVlW20gKiAyICsgMV0gLyouTGVuKi8gIT09IGJpdHMpIHtcbiAgICAgICAgLy8gVHJhY2UoKHN0ZGVycixcImNvZGUgJWQgYml0cyAlZC0+JWRcXG5cIiwgbSwgdHJlZVttXS5MZW4sIGJpdHMpKTtcbiAgICAgICAgcy5vcHRfbGVuICs9IChiaXRzIC0gdHJlZVttICogMiArIDFdIC8qLkxlbiovICkgKiB0cmVlW20gKiAyXSAvKi5GcmVxKi8gO1xuICAgICAgICB0cmVlW20gKiAyICsgMV0gLyouTGVuKi8gPSBiaXRzO1xuICAgICAgfVxuICAgICAgbi0tO1xuICAgIH1cbiAgfVxufVxuXG5cbi8qID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuICogR2VuZXJhdGUgdGhlIGNvZGVzIGZvciBhIGdpdmVuIHRyZWUgYW5kIGJpdCBjb3VudHMgKHdoaWNoIG5lZWQgbm90IGJlXG4gKiBvcHRpbWFsKS5cbiAqIElOIGFzc2VydGlvbjogdGhlIGFycmF5IGJsX2NvdW50IGNvbnRhaW5zIHRoZSBiaXQgbGVuZ3RoIHN0YXRpc3RpY3MgZm9yXG4gKiB0aGUgZ2l2ZW4gdHJlZSBhbmQgdGhlIGZpZWxkIGxlbiBpcyBzZXQgZm9yIGFsbCB0cmVlIGVsZW1lbnRzLlxuICogT1VUIGFzc2VydGlvbjogdGhlIGZpZWxkIGNvZGUgaXMgc2V0IGZvciBhbGwgdHJlZSBlbGVtZW50cyBvZiBub25cbiAqICAgICB6ZXJvIGNvZGUgbGVuZ3RoLlxuICovXG5mdW5jdGlvbiBnZW5fY29kZXModHJlZSwgbWF4X2NvZGUsIGJsX2NvdW50KSB7XG4vLyAgICBjdF9kYXRhICp0cmVlOyAgICAgICAgICAgICAvKiB0aGUgdHJlZSB0byBkZWNvcmF0ZSAqL1xuLy8gICAgaW50IG1heF9jb2RlOyAgICAgICAgICAgICAgLyogbGFyZ2VzdCBjb2RlIHdpdGggbm9uIHplcm8gZnJlcXVlbmN5ICovXG4vLyAgICB1c2hmICpibF9jb3VudDsgICAgICAgICAgICAvKiBudW1iZXIgb2YgY29kZXMgYXQgZWFjaCBiaXQgbGVuZ3RoICovXG5cbiAgdmFyIG5leHRfY29kZSA9IG5ldyBBcnJheShNQVhfQklUUyArIDEpOyAvKiBuZXh0IGNvZGUgdmFsdWUgZm9yIGVhY2ggYml0IGxlbmd0aCAqL1xuICB2YXIgY29kZSA9IDA7IC8qIHJ1bm5pbmcgY29kZSB2YWx1ZSAqL1xuICB2YXIgYml0czsgLyogYml0IGluZGV4ICovXG4gIHZhciBuOyAvKiBjb2RlIGluZGV4ICovXG5cbiAgLyogVGhlIGRpc3RyaWJ1dGlvbiBjb3VudHMgYXJlIGZpcnN0IHVzZWQgdG8gZ2VuZXJhdGUgdGhlIGNvZGUgdmFsdWVzXG4gICAqIHdpdGhvdXQgYml0IHJldmVyc2FsLlxuICAgKi9cbiAgZm9yIChiaXRzID0gMTsgYml0cyA8PSBNQVhfQklUUzsgYml0cysrKSB7XG4gICAgbmV4dF9jb2RlW2JpdHNdID0gY29kZSA9IChjb2RlICsgYmxfY291bnRbYml0cyAtIDFdKSA8PCAxO1xuICB9XG4gIC8qIENoZWNrIHRoYXQgdGhlIGJpdCBjb3VudHMgaW4gYmxfY291bnQgYXJlIGNvbnNpc3RlbnQuIFRoZSBsYXN0IGNvZGVcbiAgICogbXVzdCBiZSBhbGwgb25lcy5cbiAgICovXG4gIC8vQXNzZXJ0IChjb2RlICsgYmxfY291bnRbTUFYX0JJVFNdLTEgPT0gKDE8PE1BWF9CSVRTKS0xLFxuICAvLyAgICAgICAgXCJpbmNvbnNpc3RlbnQgYml0IGNvdW50c1wiKTtcbiAgLy9UcmFjZXYoKHN0ZGVycixcIlxcbmdlbl9jb2RlczogbWF4X2NvZGUgJWQgXCIsIG1heF9jb2RlKSk7XG5cbiAgZm9yIChuID0gMDsgbiA8PSBtYXhfY29kZTsgbisrKSB7XG4gICAgdmFyIGxlbiA9IHRyZWVbbiAqIDIgKyAxXSAvKi5MZW4qLyA7XG4gICAgaWYgKGxlbiA9PT0gMCkge1xuICAgICAgY29udGludWU7XG4gICAgfVxuICAgIC8qIE5vdyByZXZlcnNlIHRoZSBiaXRzICovXG4gICAgdHJlZVtuICogMl0gLyouQ29kZSovID0gYmlfcmV2ZXJzZShuZXh0X2NvZGVbbGVuXSsrLCBsZW4pO1xuXG4gICAgLy9UcmFjZWN2KHRyZWUgIT0gc3RhdGljX2x0cmVlLCAoc3RkZXJyLFwiXFxubiAlM2QgJWMgbCAlMmQgYyAlNHggKCV4KSBcIixcbiAgICAvLyAgICAgbiwgKGlzZ3JhcGgobikgPyBuIDogJyAnKSwgbGVuLCB0cmVlW25dLkNvZGUsIG5leHRfY29kZVtsZW5dLTEpKTtcbiAgfVxufVxuXG5cbi8qID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuICogSW5pdGlhbGl6ZSB0aGUgdmFyaW91cyAnY29uc3RhbnQnIHRhYmxlcy5cbiAqL1xuZnVuY3Rpb24gdHJfc3RhdGljX2luaXQoKSB7XG4gIHZhciBuOyAvKiBpdGVyYXRlcyBvdmVyIHRyZWUgZWxlbWVudHMgKi9cbiAgdmFyIGJpdHM7IC8qIGJpdCBjb3VudGVyICovXG4gIHZhciBsZW5ndGg7IC8qIGxlbmd0aCB2YWx1ZSAqL1xuICB2YXIgY29kZTsgLyogY29kZSB2YWx1ZSAqL1xuICB2YXIgZGlzdDsgLyogZGlzdGFuY2UgaW5kZXggKi9cbiAgdmFyIGJsX2NvdW50ID0gbmV3IEFycmF5KE1BWF9CSVRTICsgMSk7XG4gIC8qIG51bWJlciBvZiBjb2RlcyBhdCBlYWNoIGJpdCBsZW5ndGggZm9yIGFuIG9wdGltYWwgdHJlZSAqL1xuXG4gIC8vIGRvIGNoZWNrIGluIF90cl9pbml0KClcbiAgLy9pZiAoc3RhdGljX2luaXRfZG9uZSkgcmV0dXJuO1xuXG4gIC8qIEZvciBzb21lIGVtYmVkZGVkIHRhcmdldHMsIGdsb2JhbCB2YXJpYWJsZXMgYXJlIG5vdCBpbml0aWFsaXplZDogKi9cbiAgLyojaWZkZWYgTk9fSU5JVF9HTE9CQUxfUE9JTlRFUlNcbiAgICBzdGF0aWNfbF9kZXNjLnN0YXRpY190cmVlID0gc3RhdGljX2x0cmVlO1xuICAgIHN0YXRpY19sX2Rlc2MuZXh0cmFfYml0cyA9IGV4dHJhX2xiaXRzO1xuICAgIHN0YXRpY19kX2Rlc2Muc3RhdGljX3RyZWUgPSBzdGF0aWNfZHRyZWU7XG4gICAgc3RhdGljX2RfZGVzYy5leHRyYV9iaXRzID0gZXh0cmFfZGJpdHM7XG4gICAgc3RhdGljX2JsX2Rlc2MuZXh0cmFfYml0cyA9IGV4dHJhX2JsYml0cztcbiAgI2VuZGlmKi9cblxuICAvKiBJbml0aWFsaXplIHRoZSBtYXBwaW5nIGxlbmd0aCAoMC4uMjU1KSAtPiBsZW5ndGggY29kZSAoMC4uMjgpICovXG4gIGxlbmd0aCA9IDA7XG4gIGZvciAoY29kZSA9IDA7IGNvZGUgPCBMRU5HVEhfQ09ERVMgLSAxOyBjb2RlKyspIHtcbiAgICBiYXNlX2xlbmd0aFtjb2RlXSA9IGxlbmd0aDtcbiAgICBmb3IgKG4gPSAwOyBuIDwgKDEgPDwgZXh0cmFfbGJpdHNbY29kZV0pOyBuKyspIHtcbiAgICAgIF9sZW5ndGhfY29kZVtsZW5ndGgrK10gPSBjb2RlO1xuICAgIH1cbiAgfVxuICAvL0Fzc2VydCAobGVuZ3RoID09IDI1NiwgXCJ0cl9zdGF0aWNfaW5pdDogbGVuZ3RoICE9IDI1NlwiKTtcbiAgLyogTm90ZSB0aGF0IHRoZSBsZW5ndGggMjU1IChtYXRjaCBsZW5ndGggMjU4KSBjYW4gYmUgcmVwcmVzZW50ZWRcbiAgICogaW4gdHdvIGRpZmZlcmVudCB3YXlzOiBjb2RlIDI4NCArIDUgYml0cyBvciBjb2RlIDI4NSwgc28gd2VcbiAgICogb3ZlcndyaXRlIGxlbmd0aF9jb2RlWzI1NV0gdG8gdXNlIHRoZSBiZXN0IGVuY29kaW5nOlxuICAgKi9cbiAgX2xlbmd0aF9jb2RlW2xlbmd0aCAtIDFdID0gY29kZTtcblxuICAvKiBJbml0aWFsaXplIHRoZSBtYXBwaW5nIGRpc3QgKDAuLjMySykgLT4gZGlzdCBjb2RlICgwLi4yOSkgKi9cbiAgZGlzdCA9IDA7XG4gIGZvciAoY29kZSA9IDA7IGNvZGUgPCAxNjsgY29kZSsrKSB7XG4gICAgYmFzZV9kaXN0W2NvZGVdID0gZGlzdDtcbiAgICBmb3IgKG4gPSAwOyBuIDwgKDEgPDwgZXh0cmFfZGJpdHNbY29kZV0pOyBuKyspIHtcbiAgICAgIF9kaXN0X2NvZGVbZGlzdCsrXSA9IGNvZGU7XG4gICAgfVxuICB9XG4gIC8vQXNzZXJ0IChkaXN0ID09IDI1NiwgXCJ0cl9zdGF0aWNfaW5pdDogZGlzdCAhPSAyNTZcIik7XG4gIGRpc3QgPj49IDc7IC8qIGZyb20gbm93IG9uLCBhbGwgZGlzdGFuY2VzIGFyZSBkaXZpZGVkIGJ5IDEyOCAqL1xuICBmb3IgKDsgY29kZSA8IERfQ09ERVM7IGNvZGUrKykge1xuICAgIGJhc2VfZGlzdFtjb2RlXSA9IGRpc3QgPDwgNztcbiAgICBmb3IgKG4gPSAwOyBuIDwgKDEgPDwgKGV4dHJhX2RiaXRzW2NvZGVdIC0gNykpOyBuKyspIHtcbiAgICAgIF9kaXN0X2NvZGVbMjU2ICsgZGlzdCsrXSA9IGNvZGU7XG4gICAgfVxuICB9XG4gIC8vQXNzZXJ0IChkaXN0ID09IDI1NiwgXCJ0cl9zdGF0aWNfaW5pdDogMjU2K2Rpc3QgIT0gNTEyXCIpO1xuXG4gIC8qIENvbnN0cnVjdCB0aGUgY29kZXMgb2YgdGhlIHN0YXRpYyBsaXRlcmFsIHRyZWUgKi9cbiAgZm9yIChiaXRzID0gMDsgYml0cyA8PSBNQVhfQklUUzsgYml0cysrKSB7XG4gICAgYmxfY291bnRbYml0c10gPSAwO1xuICB9XG5cbiAgbiA9IDA7XG4gIHdoaWxlIChuIDw9IDE0Mykge1xuICAgIHN0YXRpY19sdHJlZVtuICogMiArIDFdIC8qLkxlbiovID0gODtcbiAgICBuKys7XG4gICAgYmxfY291bnRbOF0rKztcbiAgfVxuICB3aGlsZSAobiA8PSAyNTUpIHtcbiAgICBzdGF0aWNfbHRyZWVbbiAqIDIgKyAxXSAvKi5MZW4qLyA9IDk7XG4gICAgbisrO1xuICAgIGJsX2NvdW50WzldKys7XG4gIH1cbiAgd2hpbGUgKG4gPD0gMjc5KSB7XG4gICAgc3RhdGljX2x0cmVlW24gKiAyICsgMV0gLyouTGVuKi8gPSA3O1xuICAgIG4rKztcbiAgICBibF9jb3VudFs3XSsrO1xuICB9XG4gIHdoaWxlIChuIDw9IDI4Nykge1xuICAgIHN0YXRpY19sdHJlZVtuICogMiArIDFdIC8qLkxlbiovID0gODtcbiAgICBuKys7XG4gICAgYmxfY291bnRbOF0rKztcbiAgfVxuICAvKiBDb2RlcyAyODYgYW5kIDI4NyBkbyBub3QgZXhpc3QsIGJ1dCB3ZSBtdXN0IGluY2x1ZGUgdGhlbSBpbiB0aGVcbiAgICogdHJlZSBjb25zdHJ1Y3Rpb24gdG8gZ2V0IGEgY2Fub25pY2FsIEh1ZmZtYW4gdHJlZSAobG9uZ2VzdCBjb2RlXG4gICAqIGFsbCBvbmVzKVxuICAgKi9cbiAgZ2VuX2NvZGVzKHN0YXRpY19sdHJlZSwgTF9DT0RFUyArIDEsIGJsX2NvdW50KTtcblxuICAvKiBUaGUgc3RhdGljIGRpc3RhbmNlIHRyZWUgaXMgdHJpdmlhbDogKi9cbiAgZm9yIChuID0gMDsgbiA8IERfQ09ERVM7IG4rKykge1xuICAgIHN0YXRpY19kdHJlZVtuICogMiArIDFdIC8qLkxlbiovID0gNTtcbiAgICBzdGF0aWNfZHRyZWVbbiAqIDJdIC8qLkNvZGUqLyA9IGJpX3JldmVyc2UobiwgNSk7XG4gIH1cblxuICAvLyBOb3cgZGF0YSByZWFkeSBhbmQgd2UgY2FuIGluaXQgc3RhdGljIHRyZWVzXG4gIHN0YXRpY19sX2Rlc2MgPSBuZXcgU3RhdGljVHJlZURlc2Moc3RhdGljX2x0cmVlLCBleHRyYV9sYml0cywgTElURVJBTFMgKyAxLCBMX0NPREVTLCBNQVhfQklUUyk7XG4gIHN0YXRpY19kX2Rlc2MgPSBuZXcgU3RhdGljVHJlZURlc2Moc3RhdGljX2R0cmVlLCBleHRyYV9kYml0cywgMCwgRF9DT0RFUywgTUFYX0JJVFMpO1xuICBzdGF0aWNfYmxfZGVzYyA9IG5ldyBTdGF0aWNUcmVlRGVzYyhuZXcgQXJyYXkoMCksIGV4dHJhX2JsYml0cywgMCwgQkxfQ09ERVMsIE1BWF9CTF9CSVRTKTtcblxuICAvL3N0YXRpY19pbml0X2RvbmUgPSB0cnVlO1xufVxuXG5cbi8qID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuICogSW5pdGlhbGl6ZSBhIG5ldyBibG9jay5cbiAqL1xuZnVuY3Rpb24gaW5pdF9ibG9jayhzKSB7XG4gIHZhciBuOyAvKiBpdGVyYXRlcyBvdmVyIHRyZWUgZWxlbWVudHMgKi9cblxuICAvKiBJbml0aWFsaXplIHRoZSB0cmVlcy4gKi9cbiAgZm9yIChuID0gMDsgbiA8IExfQ09ERVM7IG4rKykge1xuICAgIHMuZHluX2x0cmVlW24gKiAyXSAvKi5GcmVxKi8gPSAwO1xuICB9XG4gIGZvciAobiA9IDA7IG4gPCBEX0NPREVTOyBuKyspIHtcbiAgICBzLmR5bl9kdHJlZVtuICogMl0gLyouRnJlcSovID0gMDtcbiAgfVxuICBmb3IgKG4gPSAwOyBuIDwgQkxfQ09ERVM7IG4rKykge1xuICAgIHMuYmxfdHJlZVtuICogMl0gLyouRnJlcSovID0gMDtcbiAgfVxuXG4gIHMuZHluX2x0cmVlW0VORF9CTE9DSyAqIDJdIC8qLkZyZXEqLyA9IDE7XG4gIHMub3B0X2xlbiA9IHMuc3RhdGljX2xlbiA9IDA7XG4gIHMubGFzdF9saXQgPSBzLm1hdGNoZXMgPSAwO1xufVxuXG5cbi8qID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuICogRmx1c2ggdGhlIGJpdCBidWZmZXIgYW5kIGFsaWduIHRoZSBvdXRwdXQgb24gYSBieXRlIGJvdW5kYXJ5XG4gKi9cbmZ1bmN0aW9uIGJpX3dpbmR1cChzKSB7XG4gIGlmIChzLmJpX3ZhbGlkID4gOCkge1xuICAgIHB1dF9zaG9ydChzLCBzLmJpX2J1Zik7XG4gIH0gZWxzZSBpZiAocy5iaV92YWxpZCA+IDApIHtcbiAgICAvL3B1dF9ieXRlKHMsIChCeXRlKXMtPmJpX2J1Zik7XG4gICAgcy5wZW5kaW5nX2J1ZltzLnBlbmRpbmcrK10gPSBzLmJpX2J1ZjtcbiAgfVxuICBzLmJpX2J1ZiA9IDA7XG4gIHMuYmlfdmFsaWQgPSAwO1xufVxuXG4vKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbiAqIENvcHkgYSBzdG9yZWQgYmxvY2ssIHN0b3JpbmcgZmlyc3QgdGhlIGxlbmd0aCBhbmQgaXRzXG4gKiBvbmUncyBjb21wbGVtZW50IGlmIHJlcXVlc3RlZC5cbiAqL1xuZnVuY3Rpb24gY29weV9ibG9jayhzLCBidWYsIGxlbiwgaGVhZGVyKSB7XG4vL0RlZmxhdGVTdGF0ZSAqcztcbi8vY2hhcmYgICAgKmJ1ZjsgICAgLyogdGhlIGlucHV0IGRhdGEgKi9cbi8vdW5zaWduZWQgbGVuOyAgICAgLyogaXRzIGxlbmd0aCAqL1xuLy9pbnQgICAgICBoZWFkZXI7ICAvKiB0cnVlIGlmIGJsb2NrIGhlYWRlciBtdXN0IGJlIHdyaXR0ZW4gKi9cblxuICBiaV93aW5kdXAocyk7IC8qIGFsaWduIG9uIGJ5dGUgYm91bmRhcnkgKi9cblxuICBpZiAoaGVhZGVyKSB7XG4gICAgcHV0X3Nob3J0KHMsIGxlbik7XG4gICAgcHV0X3Nob3J0KHMsIH5sZW4pO1xuICB9XG4gIC8vICB3aGlsZSAobGVuLS0pIHtcbiAgLy8gICAgcHV0X2J5dGUocywgKmJ1ZisrKTtcbiAgLy8gIH1cbiAgYXJyYXlTZXQocy5wZW5kaW5nX2J1Ziwgcy53aW5kb3csIGJ1ZiwgbGVuLCBzLnBlbmRpbmcpO1xuICBzLnBlbmRpbmcgKz0gbGVuO1xufVxuXG4vKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbiAqIENvbXBhcmVzIHRvIHN1YnRyZWVzLCB1c2luZyB0aGUgdHJlZSBkZXB0aCBhcyB0aWUgYnJlYWtlciB3aGVuXG4gKiB0aGUgc3VidHJlZXMgaGF2ZSBlcXVhbCBmcmVxdWVuY3kuIFRoaXMgbWluaW1pemVzIHRoZSB3b3JzdCBjYXNlIGxlbmd0aC5cbiAqL1xuZnVuY3Rpb24gc21hbGxlcih0cmVlLCBuLCBtLCBkZXB0aCkge1xuICB2YXIgX24yID0gbiAqIDI7XG4gIHZhciBfbTIgPSBtICogMjtcbiAgcmV0dXJuICh0cmVlW19uMl0gLyouRnJlcSovIDwgdHJlZVtfbTJdIC8qLkZyZXEqLyB8fFxuICAgICh0cmVlW19uMl0gLyouRnJlcSovID09PSB0cmVlW19tMl0gLyouRnJlcSovICYmIGRlcHRoW25dIDw9IGRlcHRoW21dKSk7XG59XG5cbi8qID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuICogUmVzdG9yZSB0aGUgaGVhcCBwcm9wZXJ0eSBieSBtb3ZpbmcgZG93biB0aGUgdHJlZSBzdGFydGluZyBhdCBub2RlIGssXG4gKiBleGNoYW5naW5nIGEgbm9kZSB3aXRoIHRoZSBzbWFsbGVzdCBvZiBpdHMgdHdvIHNvbnMgaWYgbmVjZXNzYXJ5LCBzdG9wcGluZ1xuICogd2hlbiB0aGUgaGVhcCBwcm9wZXJ0eSBpcyByZS1lc3RhYmxpc2hlZCAoZWFjaCBmYXRoZXIgc21hbGxlciB0aGFuIGl0c1xuICogdHdvIHNvbnMpLlxuICovXG5mdW5jdGlvbiBwcWRvd25oZWFwKHMsIHRyZWUsIGspXG4vLyAgICBkZWZsYXRlX3N0YXRlICpzO1xuLy8gICAgY3RfZGF0YSAqdHJlZTsgIC8qIHRoZSB0cmVlIHRvIHJlc3RvcmUgKi9cbi8vICAgIGludCBrOyAgICAgICAgICAgICAgIC8qIG5vZGUgdG8gbW92ZSBkb3duICovXG57XG4gIHZhciB2ID0gcy5oZWFwW2tdO1xuICB2YXIgaiA9IGsgPDwgMTsgLyogbGVmdCBzb24gb2YgayAqL1xuICB3aGlsZSAoaiA8PSBzLmhlYXBfbGVuKSB7XG4gICAgLyogU2V0IGogdG8gdGhlIHNtYWxsZXN0IG9mIHRoZSB0d28gc29uczogKi9cbiAgICBpZiAoaiA8IHMuaGVhcF9sZW4gJiZcbiAgICAgIHNtYWxsZXIodHJlZSwgcy5oZWFwW2ogKyAxXSwgcy5oZWFwW2pdLCBzLmRlcHRoKSkge1xuICAgICAgaisrO1xuICAgIH1cbiAgICAvKiBFeGl0IGlmIHYgaXMgc21hbGxlciB0aGFuIGJvdGggc29ucyAqL1xuICAgIGlmIChzbWFsbGVyKHRyZWUsIHYsIHMuaGVhcFtqXSwgcy5kZXB0aCkpIHtcbiAgICAgIGJyZWFrO1xuICAgIH1cblxuICAgIC8qIEV4Y2hhbmdlIHYgd2l0aCB0aGUgc21hbGxlc3Qgc29uICovXG4gICAgcy5oZWFwW2tdID0gcy5oZWFwW2pdO1xuICAgIGsgPSBqO1xuXG4gICAgLyogQW5kIGNvbnRpbnVlIGRvd24gdGhlIHRyZWUsIHNldHRpbmcgaiB0byB0aGUgbGVmdCBzb24gb2YgayAqL1xuICAgIGogPDw9IDE7XG4gIH1cbiAgcy5oZWFwW2tdID0gdjtcbn1cblxuXG4vLyBpbmxpbmVkIG1hbnVhbGx5XG4vLyB2YXIgU01BTExFU1QgPSAxO1xuXG4vKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbiAqIFNlbmQgdGhlIGJsb2NrIGRhdGEgY29tcHJlc3NlZCB1c2luZyB0aGUgZ2l2ZW4gSHVmZm1hbiB0cmVlc1xuICovXG5mdW5jdGlvbiBjb21wcmVzc19ibG9jayhzLCBsdHJlZSwgZHRyZWUpXG4vLyAgICBkZWZsYXRlX3N0YXRlICpzO1xuLy8gICAgY29uc3QgY3RfZGF0YSAqbHRyZWU7IC8qIGxpdGVyYWwgdHJlZSAqL1xuLy8gICAgY29uc3QgY3RfZGF0YSAqZHRyZWU7IC8qIGRpc3RhbmNlIHRyZWUgKi9cbntcbiAgdmFyIGRpc3Q7IC8qIGRpc3RhbmNlIG9mIG1hdGNoZWQgc3RyaW5nICovXG4gIHZhciBsYzsgLyogbWF0Y2ggbGVuZ3RoIG9yIHVubWF0Y2hlZCBjaGFyIChpZiBkaXN0ID09IDApICovXG4gIHZhciBseCA9IDA7IC8qIHJ1bm5pbmcgaW5kZXggaW4gbF9idWYgKi9cbiAgdmFyIGNvZGU7IC8qIHRoZSBjb2RlIHRvIHNlbmQgKi9cbiAgdmFyIGV4dHJhOyAvKiBudW1iZXIgb2YgZXh0cmEgYml0cyB0byBzZW5kICovXG5cbiAgaWYgKHMubGFzdF9saXQgIT09IDApIHtcbiAgICBkbyB7XG4gICAgICBkaXN0ID0gKHMucGVuZGluZ19idWZbcy5kX2J1ZiArIGx4ICogMl0gPDwgOCkgfCAocy5wZW5kaW5nX2J1ZltzLmRfYnVmICsgbHggKiAyICsgMV0pO1xuICAgICAgbGMgPSBzLnBlbmRpbmdfYnVmW3MubF9idWYgKyBseF07XG4gICAgICBseCsrO1xuXG4gICAgICBpZiAoZGlzdCA9PT0gMCkge1xuICAgICAgICBzZW5kX2NvZGUocywgbGMsIGx0cmVlKTsgLyogc2VuZCBhIGxpdGVyYWwgYnl0ZSAqL1xuICAgICAgICAvL1RyYWNlY3YoaXNncmFwaChsYyksIChzdGRlcnIsXCIgJyVjJyBcIiwgbGMpKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIC8qIEhlcmUsIGxjIGlzIHRoZSBtYXRjaCBsZW5ndGggLSBNSU5fTUFUQ0ggKi9cbiAgICAgICAgY29kZSA9IF9sZW5ndGhfY29kZVtsY107XG4gICAgICAgIHNlbmRfY29kZShzLCBjb2RlICsgTElURVJBTFMgKyAxLCBsdHJlZSk7IC8qIHNlbmQgdGhlIGxlbmd0aCBjb2RlICovXG4gICAgICAgIGV4dHJhID0gZXh0cmFfbGJpdHNbY29kZV07XG4gICAgICAgIGlmIChleHRyYSAhPT0gMCkge1xuICAgICAgICAgIGxjIC09IGJhc2VfbGVuZ3RoW2NvZGVdO1xuICAgICAgICAgIHNlbmRfYml0cyhzLCBsYywgZXh0cmEpOyAvKiBzZW5kIHRoZSBleHRyYSBsZW5ndGggYml0cyAqL1xuICAgICAgICB9XG4gICAgICAgIGRpc3QtLTsgLyogZGlzdCBpcyBub3cgdGhlIG1hdGNoIGRpc3RhbmNlIC0gMSAqL1xuICAgICAgICBjb2RlID0gZF9jb2RlKGRpc3QpO1xuICAgICAgICAvL0Fzc2VydCAoY29kZSA8IERfQ09ERVMsIFwiYmFkIGRfY29kZVwiKTtcblxuICAgICAgICBzZW5kX2NvZGUocywgY29kZSwgZHRyZWUpOyAvKiBzZW5kIHRoZSBkaXN0YW5jZSBjb2RlICovXG4gICAgICAgIGV4dHJhID0gZXh0cmFfZGJpdHNbY29kZV07XG4gICAgICAgIGlmIChleHRyYSAhPT0gMCkge1xuICAgICAgICAgIGRpc3QgLT0gYmFzZV9kaXN0W2NvZGVdO1xuICAgICAgICAgIHNlbmRfYml0cyhzLCBkaXN0LCBleHRyYSk7IC8qIHNlbmQgdGhlIGV4dHJhIGRpc3RhbmNlIGJpdHMgKi9cbiAgICAgICAgfVxuICAgICAgfSAvKiBsaXRlcmFsIG9yIG1hdGNoIHBhaXIgPyAqL1xuXG4gICAgICAvKiBDaGVjayB0aGF0IHRoZSBvdmVybGF5IGJldHdlZW4gcGVuZGluZ19idWYgYW5kIGRfYnVmK2xfYnVmIGlzIG9rOiAqL1xuICAgICAgLy9Bc3NlcnQoKHVJbnQpKHMtPnBlbmRpbmcpIDwgcy0+bGl0X2J1ZnNpemUgKyAyKmx4LFxuICAgICAgLy8gICAgICAgXCJwZW5kaW5nQnVmIG92ZXJmbG93XCIpO1xuXG4gICAgfSB3aGlsZSAobHggPCBzLmxhc3RfbGl0KTtcbiAgfVxuXG4gIHNlbmRfY29kZShzLCBFTkRfQkxPQ0ssIGx0cmVlKTtcbn1cblxuXG4vKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbiAqIENvbnN0cnVjdCBvbmUgSHVmZm1hbiB0cmVlIGFuZCBhc3NpZ25zIHRoZSBjb2RlIGJpdCBzdHJpbmdzIGFuZCBsZW5ndGhzLlxuICogVXBkYXRlIHRoZSB0b3RhbCBiaXQgbGVuZ3RoIGZvciB0aGUgY3VycmVudCBibG9jay5cbiAqIElOIGFzc2VydGlvbjogdGhlIGZpZWxkIGZyZXEgaXMgc2V0IGZvciBhbGwgdHJlZSBlbGVtZW50cy5cbiAqIE9VVCBhc3NlcnRpb25zOiB0aGUgZmllbGRzIGxlbiBhbmQgY29kZSBhcmUgc2V0IHRvIHRoZSBvcHRpbWFsIGJpdCBsZW5ndGhcbiAqICAgICBhbmQgY29ycmVzcG9uZGluZyBjb2RlLiBUaGUgbGVuZ3RoIG9wdF9sZW4gaXMgdXBkYXRlZDsgc3RhdGljX2xlbiBpc1xuICogICAgIGFsc28gdXBkYXRlZCBpZiBzdHJlZSBpcyBub3QgbnVsbC4gVGhlIGZpZWxkIG1heF9jb2RlIGlzIHNldC5cbiAqL1xuZnVuY3Rpb24gYnVpbGRfdHJlZShzLCBkZXNjKVxuLy8gICAgZGVmbGF0ZV9zdGF0ZSAqcztcbi8vICAgIHRyZWVfZGVzYyAqZGVzYzsgLyogdGhlIHRyZWUgZGVzY3JpcHRvciAqL1xue1xuICB2YXIgdHJlZSA9IGRlc2MuZHluX3RyZWU7XG4gIHZhciBzdHJlZSA9IGRlc2Muc3RhdF9kZXNjLnN0YXRpY190cmVlO1xuICB2YXIgaGFzX3N0cmVlID0gZGVzYy5zdGF0X2Rlc2MuaGFzX3N0cmVlO1xuICB2YXIgZWxlbXMgPSBkZXNjLnN0YXRfZGVzYy5lbGVtcztcbiAgdmFyIG4sIG07IC8qIGl0ZXJhdGUgb3ZlciBoZWFwIGVsZW1lbnRzICovXG4gIHZhciBtYXhfY29kZSA9IC0xOyAvKiBsYXJnZXN0IGNvZGUgd2l0aCBub24gemVybyBmcmVxdWVuY3kgKi9cbiAgdmFyIG5vZGU7IC8qIG5ldyBub2RlIGJlaW5nIGNyZWF0ZWQgKi9cblxuICAvKiBDb25zdHJ1Y3QgdGhlIGluaXRpYWwgaGVhcCwgd2l0aCBsZWFzdCBmcmVxdWVudCBlbGVtZW50IGluXG4gICAqIGhlYXBbU01BTExFU1RdLiBUaGUgc29ucyBvZiBoZWFwW25dIGFyZSBoZWFwWzIqbl0gYW5kIGhlYXBbMipuKzFdLlxuICAgKiBoZWFwWzBdIGlzIG5vdCB1c2VkLlxuICAgKi9cbiAgcy5oZWFwX2xlbiA9IDA7XG4gIHMuaGVhcF9tYXggPSBIRUFQX1NJWkU7XG5cbiAgZm9yIChuID0gMDsgbiA8IGVsZW1zOyBuKyspIHtcbiAgICBpZiAodHJlZVtuICogMl0gLyouRnJlcSovICE9PSAwKSB7XG4gICAgICBzLmhlYXBbKytzLmhlYXBfbGVuXSA9IG1heF9jb2RlID0gbjtcbiAgICAgIHMuZGVwdGhbbl0gPSAwO1xuXG4gICAgfSBlbHNlIHtcbiAgICAgIHRyZWVbbiAqIDIgKyAxXSAvKi5MZW4qLyA9IDA7XG4gICAgfVxuICB9XG5cbiAgLyogVGhlIHBremlwIGZvcm1hdCByZXF1aXJlcyB0aGF0IGF0IGxlYXN0IG9uZSBkaXN0YW5jZSBjb2RlIGV4aXN0cyxcbiAgICogYW5kIHRoYXQgYXQgbGVhc3Qgb25lIGJpdCBzaG91bGQgYmUgc2VudCBldmVuIGlmIHRoZXJlIGlzIG9ubHkgb25lXG4gICAqIHBvc3NpYmxlIGNvZGUuIFNvIHRvIGF2b2lkIHNwZWNpYWwgY2hlY2tzIGxhdGVyIG9uIHdlIGZvcmNlIGF0IGxlYXN0XG4gICAqIHR3byBjb2RlcyBvZiBub24gemVybyBmcmVxdWVuY3kuXG4gICAqL1xuICB3aGlsZSAocy5oZWFwX2xlbiA8IDIpIHtcbiAgICBub2RlID0gcy5oZWFwWysrcy5oZWFwX2xlbl0gPSAobWF4X2NvZGUgPCAyID8gKyttYXhfY29kZSA6IDApO1xuICAgIHRyZWVbbm9kZSAqIDJdIC8qLkZyZXEqLyA9IDE7XG4gICAgcy5kZXB0aFtub2RlXSA9IDA7XG4gICAgcy5vcHRfbGVuLS07XG5cbiAgICBpZiAoaGFzX3N0cmVlKSB7XG4gICAgICBzLnN0YXRpY19sZW4gLT0gc3RyZWVbbm9kZSAqIDIgKyAxXSAvKi5MZW4qLyA7XG4gICAgfVxuICAgIC8qIG5vZGUgaXMgMCBvciAxIHNvIGl0IGRvZXMgbm90IGhhdmUgZXh0cmEgYml0cyAqL1xuICB9XG4gIGRlc2MubWF4X2NvZGUgPSBtYXhfY29kZTtcblxuICAvKiBUaGUgZWxlbWVudHMgaGVhcFtoZWFwX2xlbi8yKzEgLi4gaGVhcF9sZW5dIGFyZSBsZWF2ZXMgb2YgdGhlIHRyZWUsXG4gICAqIGVzdGFibGlzaCBzdWItaGVhcHMgb2YgaW5jcmVhc2luZyBsZW5ndGhzOlxuICAgKi9cbiAgZm9yIChuID0gKHMuaGVhcF9sZW4gPj4gMSAvKmludCAvMiovICk7IG4gPj0gMTsgbi0tKSB7XG4gICAgcHFkb3duaGVhcChzLCB0cmVlLCBuKTtcbiAgfVxuXG4gIC8qIENvbnN0cnVjdCB0aGUgSHVmZm1hbiB0cmVlIGJ5IHJlcGVhdGVkbHkgY29tYmluaW5nIHRoZSBsZWFzdCB0d29cbiAgICogZnJlcXVlbnQgbm9kZXMuXG4gICAqL1xuICBub2RlID0gZWxlbXM7IC8qIG5leHQgaW50ZXJuYWwgbm9kZSBvZiB0aGUgdHJlZSAqL1xuICBkbyB7XG4gICAgLy9wcXJlbW92ZShzLCB0cmVlLCBuKTsgIC8qIG4gPSBub2RlIG9mIGxlYXN0IGZyZXF1ZW5jeSAqL1xuICAgIC8qKiogcHFyZW1vdmUgKioqL1xuICAgIG4gPSBzLmhlYXBbMSAvKlNNQUxMRVNUKi8gXTtcbiAgICBzLmhlYXBbMSAvKlNNQUxMRVNUKi8gXSA9IHMuaGVhcFtzLmhlYXBfbGVuLS1dO1xuICAgIHBxZG93bmhlYXAocywgdHJlZSwgMSAvKlNNQUxMRVNUKi8gKTtcbiAgICAvKioqL1xuXG4gICAgbSA9IHMuaGVhcFsxIC8qU01BTExFU1QqLyBdOyAvKiBtID0gbm9kZSBvZiBuZXh0IGxlYXN0IGZyZXF1ZW5jeSAqL1xuXG4gICAgcy5oZWFwWy0tcy5oZWFwX21heF0gPSBuOyAvKiBrZWVwIHRoZSBub2RlcyBzb3J0ZWQgYnkgZnJlcXVlbmN5ICovXG4gICAgcy5oZWFwWy0tcy5oZWFwX21heF0gPSBtO1xuXG4gICAgLyogQ3JlYXRlIGEgbmV3IG5vZGUgZmF0aGVyIG9mIG4gYW5kIG0gKi9cbiAgICB0cmVlW25vZGUgKiAyXSAvKi5GcmVxKi8gPSB0cmVlW24gKiAyXSAvKi5GcmVxKi8gKyB0cmVlW20gKiAyXSAvKi5GcmVxKi8gO1xuICAgIHMuZGVwdGhbbm9kZV0gPSAocy5kZXB0aFtuXSA+PSBzLmRlcHRoW21dID8gcy5kZXB0aFtuXSA6IHMuZGVwdGhbbV0pICsgMTtcbiAgICB0cmVlW24gKiAyICsgMV0gLyouRGFkKi8gPSB0cmVlW20gKiAyICsgMV0gLyouRGFkKi8gPSBub2RlO1xuXG4gICAgLyogYW5kIGluc2VydCB0aGUgbmV3IG5vZGUgaW4gdGhlIGhlYXAgKi9cbiAgICBzLmhlYXBbMSAvKlNNQUxMRVNUKi8gXSA9IG5vZGUrKztcbiAgICBwcWRvd25oZWFwKHMsIHRyZWUsIDEgLypTTUFMTEVTVCovICk7XG5cbiAgfSB3aGlsZSAocy5oZWFwX2xlbiA+PSAyKTtcblxuICBzLmhlYXBbLS1zLmhlYXBfbWF4XSA9IHMuaGVhcFsxIC8qU01BTExFU1QqLyBdO1xuXG4gIC8qIEF0IHRoaXMgcG9pbnQsIHRoZSBmaWVsZHMgZnJlcSBhbmQgZGFkIGFyZSBzZXQuIFdlIGNhbiBub3dcbiAgICogZ2VuZXJhdGUgdGhlIGJpdCBsZW5ndGhzLlxuICAgKi9cbiAgZ2VuX2JpdGxlbihzLCBkZXNjKTtcblxuICAvKiBUaGUgZmllbGQgbGVuIGlzIG5vdyBzZXQsIHdlIGNhbiBnZW5lcmF0ZSB0aGUgYml0IGNvZGVzICovXG4gIGdlbl9jb2Rlcyh0cmVlLCBtYXhfY29kZSwgcy5ibF9jb3VudCk7XG59XG5cblxuLyogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4gKiBTY2FuIGEgbGl0ZXJhbCBvciBkaXN0YW5jZSB0cmVlIHRvIGRldGVybWluZSB0aGUgZnJlcXVlbmNpZXMgb2YgdGhlIGNvZGVzXG4gKiBpbiB0aGUgYml0IGxlbmd0aCB0cmVlLlxuICovXG5mdW5jdGlvbiBzY2FuX3RyZWUocywgdHJlZSwgbWF4X2NvZGUpXG4vLyAgICBkZWZsYXRlX3N0YXRlICpzO1xuLy8gICAgY3RfZGF0YSAqdHJlZTsgICAvKiB0aGUgdHJlZSB0byBiZSBzY2FubmVkICovXG4vLyAgICBpbnQgbWF4X2NvZGU7ICAgIC8qIGFuZCBpdHMgbGFyZ2VzdCBjb2RlIG9mIG5vbiB6ZXJvIGZyZXF1ZW5jeSAqL1xue1xuICB2YXIgbjsgLyogaXRlcmF0ZXMgb3ZlciBhbGwgdHJlZSBlbGVtZW50cyAqL1xuICB2YXIgcHJldmxlbiA9IC0xOyAvKiBsYXN0IGVtaXR0ZWQgbGVuZ3RoICovXG4gIHZhciBjdXJsZW47IC8qIGxlbmd0aCBvZiBjdXJyZW50IGNvZGUgKi9cblxuICB2YXIgbmV4dGxlbiA9IHRyZWVbMCAqIDIgKyAxXSAvKi5MZW4qLyA7IC8qIGxlbmd0aCBvZiBuZXh0IGNvZGUgKi9cblxuICB2YXIgY291bnQgPSAwOyAvKiByZXBlYXQgY291bnQgb2YgdGhlIGN1cnJlbnQgY29kZSAqL1xuICB2YXIgbWF4X2NvdW50ID0gNzsgLyogbWF4IHJlcGVhdCBjb3VudCAqL1xuICB2YXIgbWluX2NvdW50ID0gNDsgLyogbWluIHJlcGVhdCBjb3VudCAqL1xuXG4gIGlmIChuZXh0bGVuID09PSAwKSB7XG4gICAgbWF4X2NvdW50ID0gMTM4O1xuICAgIG1pbl9jb3VudCA9IDM7XG4gIH1cbiAgdHJlZVsobWF4X2NvZGUgKyAxKSAqIDIgKyAxXSAvKi5MZW4qLyA9IDB4ZmZmZjsgLyogZ3VhcmQgKi9cblxuICBmb3IgKG4gPSAwOyBuIDw9IG1heF9jb2RlOyBuKyspIHtcbiAgICBjdXJsZW4gPSBuZXh0bGVuO1xuICAgIG5leHRsZW4gPSB0cmVlWyhuICsgMSkgKiAyICsgMV0gLyouTGVuKi8gO1xuXG4gICAgaWYgKCsrY291bnQgPCBtYXhfY291bnQgJiYgY3VybGVuID09PSBuZXh0bGVuKSB7XG4gICAgICBjb250aW51ZTtcblxuICAgIH0gZWxzZSBpZiAoY291bnQgPCBtaW5fY291bnQpIHtcbiAgICAgIHMuYmxfdHJlZVtjdXJsZW4gKiAyXSAvKi5GcmVxKi8gKz0gY291bnQ7XG5cbiAgICB9IGVsc2UgaWYgKGN1cmxlbiAhPT0gMCkge1xuXG4gICAgICBpZiAoY3VybGVuICE9PSBwcmV2bGVuKSB7XG4gICAgICAgIHMuYmxfdHJlZVtjdXJsZW4gKiAyXSAvKi5GcmVxKi8gKys7XG4gICAgICB9XG4gICAgICBzLmJsX3RyZWVbUkVQXzNfNiAqIDJdIC8qLkZyZXEqLyArKztcblxuICAgIH0gZWxzZSBpZiAoY291bnQgPD0gMTApIHtcbiAgICAgIHMuYmxfdHJlZVtSRVBaXzNfMTAgKiAyXSAvKi5GcmVxKi8gKys7XG5cbiAgICB9IGVsc2Uge1xuICAgICAgcy5ibF90cmVlW1JFUFpfMTFfMTM4ICogMl0gLyouRnJlcSovICsrO1xuICAgIH1cblxuICAgIGNvdW50ID0gMDtcbiAgICBwcmV2bGVuID0gY3VybGVuO1xuXG4gICAgaWYgKG5leHRsZW4gPT09IDApIHtcbiAgICAgIG1heF9jb3VudCA9IDEzODtcbiAgICAgIG1pbl9jb3VudCA9IDM7XG5cbiAgICB9IGVsc2UgaWYgKGN1cmxlbiA9PT0gbmV4dGxlbikge1xuICAgICAgbWF4X2NvdW50ID0gNjtcbiAgICAgIG1pbl9jb3VudCA9IDM7XG5cbiAgICB9IGVsc2Uge1xuICAgICAgbWF4X2NvdW50ID0gNztcbiAgICAgIG1pbl9jb3VudCA9IDQ7XG4gICAgfVxuICB9XG59XG5cblxuLyogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4gKiBTZW5kIGEgbGl0ZXJhbCBvciBkaXN0YW5jZSB0cmVlIGluIGNvbXByZXNzZWQgZm9ybSwgdXNpbmcgdGhlIGNvZGVzIGluXG4gKiBibF90cmVlLlxuICovXG5mdW5jdGlvbiBzZW5kX3RyZWUocywgdHJlZSwgbWF4X2NvZGUpXG4vLyAgICBkZWZsYXRlX3N0YXRlICpzO1xuLy8gICAgY3RfZGF0YSAqdHJlZTsgLyogdGhlIHRyZWUgdG8gYmUgc2Nhbm5lZCAqL1xuLy8gICAgaW50IG1heF9jb2RlOyAgICAgICAvKiBhbmQgaXRzIGxhcmdlc3QgY29kZSBvZiBub24gemVybyBmcmVxdWVuY3kgKi9cbntcbiAgdmFyIG47IC8qIGl0ZXJhdGVzIG92ZXIgYWxsIHRyZWUgZWxlbWVudHMgKi9cbiAgdmFyIHByZXZsZW4gPSAtMTsgLyogbGFzdCBlbWl0dGVkIGxlbmd0aCAqL1xuICB2YXIgY3VybGVuOyAvKiBsZW5ndGggb2YgY3VycmVudCBjb2RlICovXG5cbiAgdmFyIG5leHRsZW4gPSB0cmVlWzAgKiAyICsgMV0gLyouTGVuKi8gOyAvKiBsZW5ndGggb2YgbmV4dCBjb2RlICovXG5cbiAgdmFyIGNvdW50ID0gMDsgLyogcmVwZWF0IGNvdW50IG9mIHRoZSBjdXJyZW50IGNvZGUgKi9cbiAgdmFyIG1heF9jb3VudCA9IDc7IC8qIG1heCByZXBlYXQgY291bnQgKi9cbiAgdmFyIG1pbl9jb3VudCA9IDQ7IC8qIG1pbiByZXBlYXQgY291bnQgKi9cblxuICAvKiB0cmVlW21heF9jb2RlKzFdLkxlbiA9IC0xOyAqL1xuICAvKiBndWFyZCBhbHJlYWR5IHNldCAqL1xuICBpZiAobmV4dGxlbiA9PT0gMCkge1xuICAgIG1heF9jb3VudCA9IDEzODtcbiAgICBtaW5fY291bnQgPSAzO1xuICB9XG5cbiAgZm9yIChuID0gMDsgbiA8PSBtYXhfY29kZTsgbisrKSB7XG4gICAgY3VybGVuID0gbmV4dGxlbjtcbiAgICBuZXh0bGVuID0gdHJlZVsobiArIDEpICogMiArIDFdIC8qLkxlbiovIDtcblxuICAgIGlmICgrK2NvdW50IDwgbWF4X2NvdW50ICYmIGN1cmxlbiA9PT0gbmV4dGxlbikge1xuICAgICAgY29udGludWU7XG5cbiAgICB9IGVsc2UgaWYgKGNvdW50IDwgbWluX2NvdW50KSB7XG4gICAgICBkbyB7XG4gICAgICAgIHNlbmRfY29kZShzLCBjdXJsZW4sIHMuYmxfdHJlZSk7XG4gICAgICB9IHdoaWxlICgtLWNvdW50ICE9PSAwKTtcblxuICAgIH0gZWxzZSBpZiAoY3VybGVuICE9PSAwKSB7XG4gICAgICBpZiAoY3VybGVuICE9PSBwcmV2bGVuKSB7XG4gICAgICAgIHNlbmRfY29kZShzLCBjdXJsZW4sIHMuYmxfdHJlZSk7XG4gICAgICAgIGNvdW50LS07XG4gICAgICB9XG4gICAgICAvL0Fzc2VydChjb3VudCA+PSAzICYmIGNvdW50IDw9IDYsIFwiIDNfNj9cIik7XG4gICAgICBzZW5kX2NvZGUocywgUkVQXzNfNiwgcy5ibF90cmVlKTtcbiAgICAgIHNlbmRfYml0cyhzLCBjb3VudCAtIDMsIDIpO1xuXG4gICAgfSBlbHNlIGlmIChjb3VudCA8PSAxMCkge1xuICAgICAgc2VuZF9jb2RlKHMsIFJFUFpfM18xMCwgcy5ibF90cmVlKTtcbiAgICAgIHNlbmRfYml0cyhzLCBjb3VudCAtIDMsIDMpO1xuXG4gICAgfSBlbHNlIHtcbiAgICAgIHNlbmRfY29kZShzLCBSRVBaXzExXzEzOCwgcy5ibF90cmVlKTtcbiAgICAgIHNlbmRfYml0cyhzLCBjb3VudCAtIDExLCA3KTtcbiAgICB9XG5cbiAgICBjb3VudCA9IDA7XG4gICAgcHJldmxlbiA9IGN1cmxlbjtcbiAgICBpZiAobmV4dGxlbiA9PT0gMCkge1xuICAgICAgbWF4X2NvdW50ID0gMTM4O1xuICAgICAgbWluX2NvdW50ID0gMztcblxuICAgIH0gZWxzZSBpZiAoY3VybGVuID09PSBuZXh0bGVuKSB7XG4gICAgICBtYXhfY291bnQgPSA2O1xuICAgICAgbWluX2NvdW50ID0gMztcblxuICAgIH0gZWxzZSB7XG4gICAgICBtYXhfY291bnQgPSA3O1xuICAgICAgbWluX2NvdW50ID0gNDtcbiAgICB9XG4gIH1cbn1cblxuXG4vKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbiAqIENvbnN0cnVjdCB0aGUgSHVmZm1hbiB0cmVlIGZvciB0aGUgYml0IGxlbmd0aHMgYW5kIHJldHVybiB0aGUgaW5kZXggaW5cbiAqIGJsX29yZGVyIG9mIHRoZSBsYXN0IGJpdCBsZW5ndGggY29kZSB0byBzZW5kLlxuICovXG5mdW5jdGlvbiBidWlsZF9ibF90cmVlKHMpIHtcbiAgdmFyIG1heF9ibGluZGV4OyAvKiBpbmRleCBvZiBsYXN0IGJpdCBsZW5ndGggY29kZSBvZiBub24gemVybyBmcmVxICovXG5cbiAgLyogRGV0ZXJtaW5lIHRoZSBiaXQgbGVuZ3RoIGZyZXF1ZW5jaWVzIGZvciBsaXRlcmFsIGFuZCBkaXN0YW5jZSB0cmVlcyAqL1xuICBzY2FuX3RyZWUocywgcy5keW5fbHRyZWUsIHMubF9kZXNjLm1heF9jb2RlKTtcbiAgc2Nhbl90cmVlKHMsIHMuZHluX2R0cmVlLCBzLmRfZGVzYy5tYXhfY29kZSk7XG5cbiAgLyogQnVpbGQgdGhlIGJpdCBsZW5ndGggdHJlZTogKi9cbiAgYnVpbGRfdHJlZShzLCBzLmJsX2Rlc2MpO1xuICAvKiBvcHRfbGVuIG5vdyBpbmNsdWRlcyB0aGUgbGVuZ3RoIG9mIHRoZSB0cmVlIHJlcHJlc2VudGF0aW9ucywgZXhjZXB0XG4gICAqIHRoZSBsZW5ndGhzIG9mIHRoZSBiaXQgbGVuZ3RocyBjb2RlcyBhbmQgdGhlIDUrNSs0IGJpdHMgZm9yIHRoZSBjb3VudHMuXG4gICAqL1xuXG4gIC8qIERldGVybWluZSB0aGUgbnVtYmVyIG9mIGJpdCBsZW5ndGggY29kZXMgdG8gc2VuZC4gVGhlIHBremlwIGZvcm1hdFxuICAgKiByZXF1aXJlcyB0aGF0IGF0IGxlYXN0IDQgYml0IGxlbmd0aCBjb2RlcyBiZSBzZW50LiAoYXBwbm90ZS50eHQgc2F5c1xuICAgKiAzIGJ1dCB0aGUgYWN0dWFsIHZhbHVlIHVzZWQgaXMgNC4pXG4gICAqL1xuICBmb3IgKG1heF9ibGluZGV4ID0gQkxfQ09ERVMgLSAxOyBtYXhfYmxpbmRleCA+PSAzOyBtYXhfYmxpbmRleC0tKSB7XG4gICAgaWYgKHMuYmxfdHJlZVtibF9vcmRlclttYXhfYmxpbmRleF0gKiAyICsgMV0gLyouTGVuKi8gIT09IDApIHtcbiAgICAgIGJyZWFrO1xuICAgIH1cbiAgfVxuICAvKiBVcGRhdGUgb3B0X2xlbiB0byBpbmNsdWRlIHRoZSBiaXQgbGVuZ3RoIHRyZWUgYW5kIGNvdW50cyAqL1xuICBzLm9wdF9sZW4gKz0gMyAqIChtYXhfYmxpbmRleCArIDEpICsgNSArIDUgKyA0O1xuICAvL1RyYWNldigoc3RkZXJyLCBcIlxcbmR5biB0cmVlczogZHluICVsZCwgc3RhdCAlbGRcIixcbiAgLy8gICAgICAgIHMtPm9wdF9sZW4sIHMtPnN0YXRpY19sZW4pKTtcblxuICByZXR1cm4gbWF4X2JsaW5kZXg7XG59XG5cblxuLyogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4gKiBTZW5kIHRoZSBoZWFkZXIgZm9yIGEgYmxvY2sgdXNpbmcgZHluYW1pYyBIdWZmbWFuIHRyZWVzOiB0aGUgY291bnRzLCB0aGVcbiAqIGxlbmd0aHMgb2YgdGhlIGJpdCBsZW5ndGggY29kZXMsIHRoZSBsaXRlcmFsIHRyZWUgYW5kIHRoZSBkaXN0YW5jZSB0cmVlLlxuICogSU4gYXNzZXJ0aW9uOiBsY29kZXMgPj0gMjU3LCBkY29kZXMgPj0gMSwgYmxjb2RlcyA+PSA0LlxuICovXG5mdW5jdGlvbiBzZW5kX2FsbF90cmVlcyhzLCBsY29kZXMsIGRjb2RlcywgYmxjb2Rlcylcbi8vICAgIGRlZmxhdGVfc3RhdGUgKnM7XG4vLyAgICBpbnQgbGNvZGVzLCBkY29kZXMsIGJsY29kZXM7IC8qIG51bWJlciBvZiBjb2RlcyBmb3IgZWFjaCB0cmVlICovXG57XG4gIHZhciByYW5rOyAvKiBpbmRleCBpbiBibF9vcmRlciAqL1xuXG4gIC8vQXNzZXJ0IChsY29kZXMgPj0gMjU3ICYmIGRjb2RlcyA+PSAxICYmIGJsY29kZXMgPj0gNCwgXCJub3QgZW5vdWdoIGNvZGVzXCIpO1xuICAvL0Fzc2VydCAobGNvZGVzIDw9IExfQ09ERVMgJiYgZGNvZGVzIDw9IERfQ09ERVMgJiYgYmxjb2RlcyA8PSBCTF9DT0RFUyxcbiAgLy8gICAgICAgIFwidG9vIG1hbnkgY29kZXNcIik7XG4gIC8vVHJhY2V2KChzdGRlcnIsIFwiXFxuYmwgY291bnRzOiBcIikpO1xuICBzZW5kX2JpdHMocywgbGNvZGVzIC0gMjU3LCA1KTsgLyogbm90ICsyNTUgYXMgc3RhdGVkIGluIGFwcG5vdGUudHh0ICovXG4gIHNlbmRfYml0cyhzLCBkY29kZXMgLSAxLCA1KTtcbiAgc2VuZF9iaXRzKHMsIGJsY29kZXMgLSA0LCA0KTsgLyogbm90IC0zIGFzIHN0YXRlZCBpbiBhcHBub3RlLnR4dCAqL1xuICBmb3IgKHJhbmsgPSAwOyByYW5rIDwgYmxjb2RlczsgcmFuaysrKSB7XG4gICAgLy9UcmFjZXYoKHN0ZGVyciwgXCJcXG5ibCBjb2RlICUyZCBcIiwgYmxfb3JkZXJbcmFua10pKTtcbiAgICBzZW5kX2JpdHMocywgcy5ibF90cmVlW2JsX29yZGVyW3JhbmtdICogMiArIDFdIC8qLkxlbiovICwgMyk7XG4gIH1cbiAgLy9UcmFjZXYoKHN0ZGVyciwgXCJcXG5ibCB0cmVlOiBzZW50ICVsZFwiLCBzLT5iaXRzX3NlbnQpKTtcblxuICBzZW5kX3RyZWUocywgcy5keW5fbHRyZWUsIGxjb2RlcyAtIDEpOyAvKiBsaXRlcmFsIHRyZWUgKi9cbiAgLy9UcmFjZXYoKHN0ZGVyciwgXCJcXG5saXQgdHJlZTogc2VudCAlbGRcIiwgcy0+Yml0c19zZW50KSk7XG5cbiAgc2VuZF90cmVlKHMsIHMuZHluX2R0cmVlLCBkY29kZXMgLSAxKTsgLyogZGlzdGFuY2UgdHJlZSAqL1xuICAvL1RyYWNldigoc3RkZXJyLCBcIlxcbmRpc3QgdHJlZTogc2VudCAlbGRcIiwgcy0+Yml0c19zZW50KSk7XG59XG5cblxuLyogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4gKiBDaGVjayBpZiB0aGUgZGF0YSB0eXBlIGlzIFRFWFQgb3IgQklOQVJZLCB1c2luZyB0aGUgZm9sbG93aW5nIGFsZ29yaXRobTpcbiAqIC0gVEVYVCBpZiB0aGUgdHdvIGNvbmRpdGlvbnMgYmVsb3cgYXJlIHNhdGlzZmllZDpcbiAqICAgIGEpIFRoZXJlIGFyZSBubyBub24tcG9ydGFibGUgY29udHJvbCBjaGFyYWN0ZXJzIGJlbG9uZ2luZyB0byB0aGVcbiAqICAgICAgIFwiYmxhY2sgbGlzdFwiICgwLi42LCAxNC4uMjUsIDI4Li4zMSkuXG4gKiAgICBiKSBUaGVyZSBpcyBhdCBsZWFzdCBvbmUgcHJpbnRhYmxlIGNoYXJhY3RlciBiZWxvbmdpbmcgdG8gdGhlXG4gKiAgICAgICBcIndoaXRlIGxpc3RcIiAoOSB7VEFCfSwgMTAge0xGfSwgMTMge0NSfSwgMzIuLjI1NSkuXG4gKiAtIEJJTkFSWSBvdGhlcndpc2UuXG4gKiAtIFRoZSBmb2xsb3dpbmcgcGFydGlhbGx5LXBvcnRhYmxlIGNvbnRyb2wgY2hhcmFjdGVycyBmb3JtIGFcbiAqICAgXCJncmF5IGxpc3RcIiB0aGF0IGlzIGlnbm9yZWQgaW4gdGhpcyBkZXRlY3Rpb24gYWxnb3JpdGhtOlxuICogICAoNyB7QkVMfSwgOCB7QlN9LCAxMSB7VlR9LCAxMiB7RkZ9LCAyNiB7U1VCfSwgMjcge0VTQ30pLlxuICogSU4gYXNzZXJ0aW9uOiB0aGUgZmllbGRzIEZyZXEgb2YgZHluX2x0cmVlIGFyZSBzZXQuXG4gKi9cbmZ1bmN0aW9uIGRldGVjdF9kYXRhX3R5cGUocykge1xuICAvKiBibGFja19tYXNrIGlzIHRoZSBiaXQgbWFzayBvZiBibGFjay1saXN0ZWQgYnl0ZXNcbiAgICogc2V0IGJpdHMgMC4uNiwgMTQuLjI1LCBhbmQgMjguLjMxXG4gICAqIDB4ZjNmZmMwN2YgPSBiaW5hcnkgMTExMTAwMTExMTExMTExMTExMDAwMDAwMDExMTExMTFcbiAgICovXG4gIHZhciBibGFja19tYXNrID0gMHhmM2ZmYzA3ZjtcbiAgdmFyIG47XG5cbiAgLyogQ2hlY2sgZm9yIG5vbi10ZXh0dWFsIChcImJsYWNrLWxpc3RlZFwiKSBieXRlcy4gKi9cbiAgZm9yIChuID0gMDsgbiA8PSAzMTsgbisrLCBibGFja19tYXNrID4+Pj0gMSkge1xuICAgIGlmICgoYmxhY2tfbWFzayAmIDEpICYmIChzLmR5bl9sdHJlZVtuICogMl0gLyouRnJlcSovICE9PSAwKSkge1xuICAgICAgcmV0dXJuIFpfQklOQVJZO1xuICAgIH1cbiAgfVxuXG4gIC8qIENoZWNrIGZvciB0ZXh0dWFsIChcIndoaXRlLWxpc3RlZFwiKSBieXRlcy4gKi9cbiAgaWYgKHMuZHluX2x0cmVlWzkgKiAyXSAvKi5GcmVxKi8gIT09IDAgfHwgcy5keW5fbHRyZWVbMTAgKiAyXSAvKi5GcmVxKi8gIT09IDAgfHxcbiAgICBzLmR5bl9sdHJlZVsxMyAqIDJdIC8qLkZyZXEqLyAhPT0gMCkge1xuICAgIHJldHVybiBaX1RFWFQ7XG4gIH1cbiAgZm9yIChuID0gMzI7IG4gPCBMSVRFUkFMUzsgbisrKSB7XG4gICAgaWYgKHMuZHluX2x0cmVlW24gKiAyXSAvKi5GcmVxKi8gIT09IDApIHtcbiAgICAgIHJldHVybiBaX1RFWFQ7XG4gICAgfVxuICB9XG5cbiAgLyogVGhlcmUgYXJlIG5vIFwiYmxhY2stbGlzdGVkXCIgb3IgXCJ3aGl0ZS1saXN0ZWRcIiBieXRlczpcbiAgICogdGhpcyBzdHJlYW0gZWl0aGVyIGlzIGVtcHR5IG9yIGhhcyB0b2xlcmF0ZWQgKFwiZ3JheS1saXN0ZWRcIikgYnl0ZXMgb25seS5cbiAgICovXG4gIHJldHVybiBaX0JJTkFSWTtcbn1cblxuXG52YXIgc3RhdGljX2luaXRfZG9uZSA9IGZhbHNlO1xuXG4vKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbiAqIEluaXRpYWxpemUgdGhlIHRyZWUgZGF0YSBzdHJ1Y3R1cmVzIGZvciBhIG5ldyB6bGliIHN0cmVhbS5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIF90cl9pbml0KHMpIHtcblxuICBpZiAoIXN0YXRpY19pbml0X2RvbmUpIHtcbiAgICB0cl9zdGF0aWNfaW5pdCgpO1xuICAgIHN0YXRpY19pbml0X2RvbmUgPSB0cnVlO1xuICB9XG5cbiAgcy5sX2Rlc2MgPSBuZXcgVHJlZURlc2Mocy5keW5fbHRyZWUsIHN0YXRpY19sX2Rlc2MpO1xuICBzLmRfZGVzYyA9IG5ldyBUcmVlRGVzYyhzLmR5bl9kdHJlZSwgc3RhdGljX2RfZGVzYyk7XG4gIHMuYmxfZGVzYyA9IG5ldyBUcmVlRGVzYyhzLmJsX3RyZWUsIHN0YXRpY19ibF9kZXNjKTtcblxuICBzLmJpX2J1ZiA9IDA7XG4gIHMuYmlfdmFsaWQgPSAwO1xuXG4gIC8qIEluaXRpYWxpemUgdGhlIGZpcnN0IGJsb2NrIG9mIHRoZSBmaXJzdCBmaWxlOiAqL1xuICBpbml0X2Jsb2NrKHMpO1xufVxuXG5cbi8qID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuICogU2VuZCBhIHN0b3JlZCBibG9ja1xuICovXG5leHBvcnQgZnVuY3Rpb24gX3RyX3N0b3JlZF9ibG9jayhzLCBidWYsIHN0b3JlZF9sZW4sIGxhc3QpXG4vL0RlZmxhdGVTdGF0ZSAqcztcbi8vY2hhcmYgKmJ1ZjsgICAgICAgLyogaW5wdXQgYmxvY2sgKi9cbi8vdWxnIHN0b3JlZF9sZW47ICAgLyogbGVuZ3RoIG9mIGlucHV0IGJsb2NrICovXG4vL2ludCBsYXN0OyAgICAgICAgIC8qIG9uZSBpZiB0aGlzIGlzIHRoZSBsYXN0IGJsb2NrIGZvciBhIGZpbGUgKi9cbntcbiAgc2VuZF9iaXRzKHMsIChTVE9SRURfQkxPQ0sgPDwgMSkgKyAobGFzdCA/IDEgOiAwKSwgMyk7IC8qIHNlbmQgYmxvY2sgdHlwZSAqL1xuICBjb3B5X2Jsb2NrKHMsIGJ1Ziwgc3RvcmVkX2xlbiwgdHJ1ZSk7IC8qIHdpdGggaGVhZGVyICovXG59XG5cblxuLyogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4gKiBTZW5kIG9uZSBlbXB0eSBzdGF0aWMgYmxvY2sgdG8gZ2l2ZSBlbm91Z2ggbG9va2FoZWFkIGZvciBpbmZsYXRlLlxuICogVGhpcyB0YWtlcyAxMCBiaXRzLCBvZiB3aGljaCA3IG1heSByZW1haW4gaW4gdGhlIGJpdCBidWZmZXIuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBfdHJfYWxpZ24ocykge1xuICBzZW5kX2JpdHMocywgU1RBVElDX1RSRUVTIDw8IDEsIDMpO1xuICBzZW5kX2NvZGUocywgRU5EX0JMT0NLLCBzdGF0aWNfbHRyZWUpO1xuICBiaV9mbHVzaChzKTtcbn1cblxuXG4vKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbiAqIERldGVybWluZSB0aGUgYmVzdCBlbmNvZGluZyBmb3IgdGhlIGN1cnJlbnQgYmxvY2s6IGR5bmFtaWMgdHJlZXMsIHN0YXRpY1xuICogdHJlZXMgb3Igc3RvcmUsIGFuZCBvdXRwdXQgdGhlIGVuY29kZWQgYmxvY2sgdG8gdGhlIHppcCBmaWxlLlxuICovXG5leHBvcnQgZnVuY3Rpb24gX3RyX2ZsdXNoX2Jsb2NrKHMsIGJ1Ziwgc3RvcmVkX2xlbiwgbGFzdClcbi8vRGVmbGF0ZVN0YXRlICpzO1xuLy9jaGFyZiAqYnVmOyAgICAgICAvKiBpbnB1dCBibG9jaywgb3IgTlVMTCBpZiB0b28gb2xkICovXG4vL3VsZyBzdG9yZWRfbGVuOyAgIC8qIGxlbmd0aCBvZiBpbnB1dCBibG9jayAqL1xuLy9pbnQgbGFzdDsgICAgICAgICAvKiBvbmUgaWYgdGhpcyBpcyB0aGUgbGFzdCBibG9jayBmb3IgYSBmaWxlICovXG57XG4gIHZhciBvcHRfbGVuYiwgc3RhdGljX2xlbmI7IC8qIG9wdF9sZW4gYW5kIHN0YXRpY19sZW4gaW4gYnl0ZXMgKi9cbiAgdmFyIG1heF9ibGluZGV4ID0gMDsgLyogaW5kZXggb2YgbGFzdCBiaXQgbGVuZ3RoIGNvZGUgb2Ygbm9uIHplcm8gZnJlcSAqL1xuXG4gIC8qIEJ1aWxkIHRoZSBIdWZmbWFuIHRyZWVzIHVubGVzcyBhIHN0b3JlZCBibG9jayBpcyBmb3JjZWQgKi9cbiAgaWYgKHMubGV2ZWwgPiAwKSB7XG5cbiAgICAvKiBDaGVjayBpZiB0aGUgZmlsZSBpcyBiaW5hcnkgb3IgdGV4dCAqL1xuICAgIGlmIChzLnN0cm0uZGF0YV90eXBlID09PSBaX1VOS05PV04pIHtcbiAgICAgIHMuc3RybS5kYXRhX3R5cGUgPSBkZXRlY3RfZGF0YV90eXBlKHMpO1xuICAgIH1cblxuICAgIC8qIENvbnN0cnVjdCB0aGUgbGl0ZXJhbCBhbmQgZGlzdGFuY2UgdHJlZXMgKi9cbiAgICBidWlsZF90cmVlKHMsIHMubF9kZXNjKTtcbiAgICAvLyBUcmFjZXYoKHN0ZGVyciwgXCJcXG5saXQgZGF0YTogZHluICVsZCwgc3RhdCAlbGRcIiwgcy0+b3B0X2xlbixcbiAgICAvLyAgICAgICAgcy0+c3RhdGljX2xlbikpO1xuXG4gICAgYnVpbGRfdHJlZShzLCBzLmRfZGVzYyk7XG4gICAgLy8gVHJhY2V2KChzdGRlcnIsIFwiXFxuZGlzdCBkYXRhOiBkeW4gJWxkLCBzdGF0ICVsZFwiLCBzLT5vcHRfbGVuLFxuICAgIC8vICAgICAgICBzLT5zdGF0aWNfbGVuKSk7XG4gICAgLyogQXQgdGhpcyBwb2ludCwgb3B0X2xlbiBhbmQgc3RhdGljX2xlbiBhcmUgdGhlIHRvdGFsIGJpdCBsZW5ndGhzIG9mXG4gICAgICogdGhlIGNvbXByZXNzZWQgYmxvY2sgZGF0YSwgZXhjbHVkaW5nIHRoZSB0cmVlIHJlcHJlc2VudGF0aW9ucy5cbiAgICAgKi9cblxuICAgIC8qIEJ1aWxkIHRoZSBiaXQgbGVuZ3RoIHRyZWUgZm9yIHRoZSBhYm92ZSB0d28gdHJlZXMsIGFuZCBnZXQgdGhlIGluZGV4XG4gICAgICogaW4gYmxfb3JkZXIgb2YgdGhlIGxhc3QgYml0IGxlbmd0aCBjb2RlIHRvIHNlbmQuXG4gICAgICovXG4gICAgbWF4X2JsaW5kZXggPSBidWlsZF9ibF90cmVlKHMpO1xuXG4gICAgLyogRGV0ZXJtaW5lIHRoZSBiZXN0IGVuY29kaW5nLiBDb21wdXRlIHRoZSBibG9jayBsZW5ndGhzIGluIGJ5dGVzLiAqL1xuICAgIG9wdF9sZW5iID0gKHMub3B0X2xlbiArIDMgKyA3KSA+Pj4gMztcbiAgICBzdGF0aWNfbGVuYiA9IChzLnN0YXRpY19sZW4gKyAzICsgNykgPj4+IDM7XG5cbiAgICAvLyBUcmFjZXYoKHN0ZGVyciwgXCJcXG5vcHQgJWx1KCVsdSkgc3RhdCAlbHUoJWx1KSBzdG9yZWQgJWx1IGxpdCAldSBcIixcbiAgICAvLyAgICAgICAgb3B0X2xlbmIsIHMtPm9wdF9sZW4sIHN0YXRpY19sZW5iLCBzLT5zdGF0aWNfbGVuLCBzdG9yZWRfbGVuLFxuICAgIC8vICAgICAgICBzLT5sYXN0X2xpdCkpO1xuXG4gICAgaWYgKHN0YXRpY19sZW5iIDw9IG9wdF9sZW5iKSB7XG4gICAgICBvcHRfbGVuYiA9IHN0YXRpY19sZW5iO1xuICAgIH1cblxuICB9IGVsc2Uge1xuICAgIC8vIEFzc2VydChidWYgIT0gKGNoYXIqKTAsIFwibG9zdCBidWZcIik7XG4gICAgb3B0X2xlbmIgPSBzdGF0aWNfbGVuYiA9IHN0b3JlZF9sZW4gKyA1OyAvKiBmb3JjZSBhIHN0b3JlZCBibG9jayAqL1xuICB9XG5cbiAgaWYgKChzdG9yZWRfbGVuICsgNCA8PSBvcHRfbGVuYikgJiYgKGJ1ZiAhPT0gLTEpKSB7XG4gICAgLyogNDogdHdvIHdvcmRzIGZvciB0aGUgbGVuZ3RocyAqL1xuXG4gICAgLyogVGhlIHRlc3QgYnVmICE9IE5VTEwgaXMgb25seSBuZWNlc3NhcnkgaWYgTElUX0JVRlNJWkUgPiBXU0laRS5cbiAgICAgKiBPdGhlcndpc2Ugd2UgY2FuJ3QgaGF2ZSBwcm9jZXNzZWQgbW9yZSB0aGFuIFdTSVpFIGlucHV0IGJ5dGVzIHNpbmNlXG4gICAgICogdGhlIGxhc3QgYmxvY2sgZmx1c2gsIGJlY2F1c2UgY29tcHJlc3Npb24gd291bGQgaGF2ZSBiZWVuXG4gICAgICogc3VjY2Vzc2Z1bC4gSWYgTElUX0JVRlNJWkUgPD0gV1NJWkUsIGl0IGlzIG5ldmVyIHRvbyBsYXRlIHRvXG4gICAgICogdHJhbnNmb3JtIGEgYmxvY2sgaW50byBhIHN0b3JlZCBibG9jay5cbiAgICAgKi9cbiAgICBfdHJfc3RvcmVkX2Jsb2NrKHMsIGJ1Ziwgc3RvcmVkX2xlbiwgbGFzdCk7XG5cbiAgfSBlbHNlIGlmIChzLnN0cmF0ZWd5ID09PSBaX0ZJWEVEIHx8IHN0YXRpY19sZW5iID09PSBvcHRfbGVuYikge1xuXG4gICAgc2VuZF9iaXRzKHMsIChTVEFUSUNfVFJFRVMgPDwgMSkgKyAobGFzdCA/IDEgOiAwKSwgMyk7XG4gICAgY29tcHJlc3NfYmxvY2socywgc3RhdGljX2x0cmVlLCBzdGF0aWNfZHRyZWUpO1xuXG4gIH0gZWxzZSB7XG4gICAgc2VuZF9iaXRzKHMsIChEWU5fVFJFRVMgPDwgMSkgKyAobGFzdCA/IDEgOiAwKSwgMyk7XG4gICAgc2VuZF9hbGxfdHJlZXMocywgcy5sX2Rlc2MubWF4X2NvZGUgKyAxLCBzLmRfZGVzYy5tYXhfY29kZSArIDEsIG1heF9ibGluZGV4ICsgMSk7XG4gICAgY29tcHJlc3NfYmxvY2socywgcy5keW5fbHRyZWUsIHMuZHluX2R0cmVlKTtcbiAgfVxuICAvLyBBc3NlcnQgKHMtPmNvbXByZXNzZWRfbGVuID09IHMtPmJpdHNfc2VudCwgXCJiYWQgY29tcHJlc3NlZCBzaXplXCIpO1xuICAvKiBUaGUgYWJvdmUgY2hlY2sgaXMgbWFkZSBtb2QgMl4zMiwgZm9yIGZpbGVzIGxhcmdlciB0aGFuIDUxMiBNQlxuICAgKiBhbmQgdUxvbmcgaW1wbGVtZW50ZWQgb24gMzIgYml0cy5cbiAgICovXG4gIGluaXRfYmxvY2socyk7XG5cbiAgaWYgKGxhc3QpIHtcbiAgICBiaV93aW5kdXAocyk7XG4gIH1cbiAgLy8gVHJhY2V2KChzdGRlcnIsXCJcXG5jb21wcmxlbiAlbHUoJWx1KSBcIiwgcy0+Y29tcHJlc3NlZF9sZW4+PjMsXG4gIC8vICAgICAgIHMtPmNvbXByZXNzZWRfbGVuLTcqbGFzdCkpO1xufVxuXG4vKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbiAqIFNhdmUgdGhlIG1hdGNoIGluZm8gYW5kIHRhbGx5IHRoZSBmcmVxdWVuY3kgY291bnRzLiBSZXR1cm4gdHJ1ZSBpZlxuICogdGhlIGN1cnJlbnQgYmxvY2sgbXVzdCBiZSBmbHVzaGVkLlxuICovXG5leHBvcnQgZnVuY3Rpb24gX3RyX3RhbGx5KHMsIGRpc3QsIGxjKVxuLy8gICAgZGVmbGF0ZV9zdGF0ZSAqcztcbi8vICAgIHVuc2lnbmVkIGRpc3Q7ICAvKiBkaXN0YW5jZSBvZiBtYXRjaGVkIHN0cmluZyAqL1xuLy8gICAgdW5zaWduZWQgbGM7ICAgIC8qIG1hdGNoIGxlbmd0aC1NSU5fTUFUQ0ggb3IgdW5tYXRjaGVkIGNoYXIgKGlmIGRpc3Q9PTApICovXG57XG4gIC8vdmFyIG91dF9sZW5ndGgsIGluX2xlbmd0aCwgZGNvZGU7XG5cbiAgcy5wZW5kaW5nX2J1ZltzLmRfYnVmICsgcy5sYXN0X2xpdCAqIDJdID0gKGRpc3QgPj4+IDgpICYgMHhmZjtcbiAgcy5wZW5kaW5nX2J1ZltzLmRfYnVmICsgcy5sYXN0X2xpdCAqIDIgKyAxXSA9IGRpc3QgJiAweGZmO1xuXG4gIHMucGVuZGluZ19idWZbcy5sX2J1ZiArIHMubGFzdF9saXRdID0gbGMgJiAweGZmO1xuICBzLmxhc3RfbGl0Kys7XG5cbiAgaWYgKGRpc3QgPT09IDApIHtcbiAgICAvKiBsYyBpcyB0aGUgdW5tYXRjaGVkIGNoYXIgKi9cbiAgICBzLmR5bl9sdHJlZVtsYyAqIDJdIC8qLkZyZXEqLyArKztcbiAgfSBlbHNlIHtcbiAgICBzLm1hdGNoZXMrKztcbiAgICAvKiBIZXJlLCBsYyBpcyB0aGUgbWF0Y2ggbGVuZ3RoIC0gTUlOX01BVENIICovXG4gICAgZGlzdC0tOyAvKiBkaXN0ID0gbWF0Y2ggZGlzdGFuY2UgLSAxICovXG4gICAgLy9Bc3NlcnQoKHVzaClkaXN0IDwgKHVzaClNQVhfRElTVChzKSAmJlxuICAgIC8vICAgICAgICh1c2gpbGMgPD0gKHVzaCkoTUFYX01BVENILU1JTl9NQVRDSCkgJiZcbiAgICAvLyAgICAgICAodXNoKWRfY29kZShkaXN0KSA8ICh1c2gpRF9DT0RFUywgIFwiX3RyX3RhbGx5OiBiYWQgbWF0Y2hcIik7XG5cbiAgICBzLmR5bl9sdHJlZVsoX2xlbmd0aF9jb2RlW2xjXSArIExJVEVSQUxTICsgMSkgKiAyXSAvKi5GcmVxKi8gKys7XG4gICAgcy5keW5fZHRyZWVbZF9jb2RlKGRpc3QpICogMl0gLyouRnJlcSovICsrO1xuICB9XG5cbiAgLy8gKCEpIFRoaXMgYmxvY2sgaXMgZGlzYWJsZWQgaW4gemxpYiBkZWZhaWx0cyxcbiAgLy8gZG9uJ3QgZW5hYmxlIGl0IGZvciBiaW5hcnkgY29tcGF0aWJpbGl0eVxuXG4gIC8vI2lmZGVmIFRSVU5DQVRFX0JMT0NLXG4gIC8vICAvKiBUcnkgdG8gZ3Vlc3MgaWYgaXQgaXMgcHJvZml0YWJsZSB0byBzdG9wIHRoZSBjdXJyZW50IGJsb2NrIGhlcmUgKi9cbiAgLy8gIGlmICgocy5sYXN0X2xpdCAmIDB4MWZmZikgPT09IDAgJiYgcy5sZXZlbCA+IDIpIHtcbiAgLy8gICAgLyogQ29tcHV0ZSBhbiB1cHBlciBib3VuZCBmb3IgdGhlIGNvbXByZXNzZWQgbGVuZ3RoICovXG4gIC8vICAgIG91dF9sZW5ndGggPSBzLmxhc3RfbGl0Kjg7XG4gIC8vICAgIGluX2xlbmd0aCA9IHMuc3Ryc3RhcnQgLSBzLmJsb2NrX3N0YXJ0O1xuICAvL1xuICAvLyAgICBmb3IgKGRjb2RlID0gMDsgZGNvZGUgPCBEX0NPREVTOyBkY29kZSsrKSB7XG4gIC8vICAgICAgb3V0X2xlbmd0aCArPSBzLmR5bl9kdHJlZVtkY29kZSoyXS8qLkZyZXEqLyAqICg1ICsgZXh0cmFfZGJpdHNbZGNvZGVdKTtcbiAgLy8gICAgfVxuICAvLyAgICBvdXRfbGVuZ3RoID4+Pj0gMztcbiAgLy8gICAgLy9UcmFjZXYoKHN0ZGVycixcIlxcbmxhc3RfbGl0ICV1LCBpbiAlbGQsIG91dCB+JWxkKCVsZCUlKSBcIixcbiAgLy8gICAgLy8gICAgICAgcy0+bGFzdF9saXQsIGluX2xlbmd0aCwgb3V0X2xlbmd0aCxcbiAgLy8gICAgLy8gICAgICAgMTAwTCAtIG91dF9sZW5ndGgqMTAwTC9pbl9sZW5ndGgpKTtcbiAgLy8gICAgaWYgKHMubWF0Y2hlcyA8IChzLmxhc3RfbGl0Pj4xKS8qaW50IC8yKi8gJiYgb3V0X2xlbmd0aCA8IChpbl9sZW5ndGg+PjEpLyppbnQgLzIqLykge1xuICAvLyAgICAgIHJldHVybiB0cnVlO1xuICAvLyAgICB9XG4gIC8vICB9XG4gIC8vI2VuZGlmXG5cbiAgcmV0dXJuIChzLmxhc3RfbGl0ID09PSBzLmxpdF9idWZzaXplIC0gMSk7XG4gIC8qIFdlIGF2b2lkIGVxdWFsaXR5IHdpdGggbGl0X2J1ZnNpemUgYmVjYXVzZSBvZiB3cmFwYXJvdW5kIGF0IDY0S1xuICAgKiBvbiAxNiBiaXQgbWFjaGluZXMgYW5kIGJlY2F1c2Ugc3RvcmVkIGJsb2NrcyBhcmUgcmVzdHJpY3RlZCB0b1xuICAgKiA2NEstMSBieXRlcy5cbiAgICovXG59XG4iLCAiXG4vLyBOb3RlOiBhZGxlcjMyIHRha2VzIDEyJSBmb3IgbGV2ZWwgMCBhbmQgMiUgZm9yIGxldmVsIDYuXG4vLyBJdCBkb2Vzbid0IHdvcnRoIHRvIG1ha2UgYWRkaXRpb25hbCBvcHRpbWl6YXRpb25hIGFzIGluIG9yaWdpbmFsLlxuLy8gU21hbGwgc2l6ZSBpcyBwcmVmZXJhYmxlLlxuXG5mdW5jdGlvbiBhZGxlcjMyKGFkbGVyLCBidWYsIGxlbiwgcG9zKSB7XG4gIHZhciBzMSA9IChhZGxlciAmIDB4ZmZmZikgfDAsXG4gICAgICBzMiA9ICgoYWRsZXIgPj4+IDE2KSAmIDB4ZmZmZikgfDAsXG4gICAgICBuID0gMDtcblxuICB3aGlsZSAobGVuICE9PSAwKSB7XG4gICAgLy8gU2V0IGxpbWl0IH4gdHdpY2UgbGVzcyB0aGFuIDU1NTIsIHRvIGtlZXBcbiAgICAvLyBzMiBpbiAzMS1iaXRzLCBiZWNhdXNlIHdlIGZvcmNlIHNpZ25lZCBpbnRzLlxuICAgIC8vIGluIG90aGVyIGNhc2UgJT0gd2lsbCBmYWlsLlxuICAgIG4gPSBsZW4gPiAyMDAwID8gMjAwMCA6IGxlbjtcbiAgICBsZW4gLT0gbjtcblxuICAgIGRvIHtcbiAgICAgIHMxID0gKHMxICsgYnVmW3BvcysrXSkgfDA7XG4gICAgICBzMiA9IChzMiArIHMxKSB8MDtcbiAgICB9IHdoaWxlICgtLW4pO1xuXG4gICAgczEgJT0gNjU1MjE7XG4gICAgczIgJT0gNjU1MjE7XG4gIH1cblxuICByZXR1cm4gKHMxIHwgKHMyIDw8IDE2KSkgfDA7XG59XG5cblxuZXhwb3J0IGRlZmF1bHQgYWRsZXIzMjtcbiIsICJcbi8vIE5vdGU6IHdlIGNhbid0IGdldCBzaWduaWZpY2FudCBzcGVlZCBib29zdCBoZXJlLlxuLy8gU28gd3JpdGUgY29kZSB0byBtaW5pbWl6ZSBzaXplIC0gbm8gcHJlZ2VuZXJhdGVkIHRhYmxlc1xuLy8gYW5kIGFycmF5IHRvb2xzIGRlcGVuZGVuY2llcy5cblxuXG4vLyBVc2Ugb3JkaW5hcnkgYXJyYXksIHNpbmNlIHVudHlwZWQgbWFrZXMgbm8gYm9vc3QgaGVyZVxuZnVuY3Rpb24gbWFrZVRhYmxlKCkge1xuICB2YXIgYywgdGFibGUgPSBbXTtcblxuICBmb3IgKHZhciBuID0gMDsgbiA8IDI1NjsgbisrKSB7XG4gICAgYyA9IG47XG4gICAgZm9yICh2YXIgayA9IDA7IGsgPCA4OyBrKyspIHtcbiAgICAgIGMgPSAoKGMgJiAxKSA/ICgweEVEQjg4MzIwIF4gKGMgPj4+IDEpKSA6IChjID4+PiAxKSk7XG4gICAgfVxuICAgIHRhYmxlW25dID0gYztcbiAgfVxuXG4gIHJldHVybiB0YWJsZTtcbn1cblxuLy8gQ3JlYXRlIHRhYmxlIG9uIGxvYWQuIEp1c3QgMjU1IHNpZ25lZCBsb25ncy4gTm90IGEgcHJvYmxlbS5cbnZhciBjcmNUYWJsZSA9IG1ha2VUYWJsZSgpO1xuXG5cbmZ1bmN0aW9uIGNyYzMyKGNyYywgYnVmLCBsZW4sIHBvcykge1xuICB2YXIgdCA9IGNyY1RhYmxlLFxuICAgICAgZW5kID0gcG9zICsgbGVuO1xuXG4gIGNyYyBePSAtMTtcblxuICBmb3IgKHZhciBpID0gcG9zOyBpIDwgZW5kOyBpKyspIHtcbiAgICBjcmMgPSAoY3JjID4+PiA4KSBeIHRbKGNyYyBeIGJ1ZltpXSkgJiAweEZGXTtcbiAgfVxuXG4gIHJldHVybiAoY3JjIF4gKC0xKSk7IC8vID4+PiAwO1xufVxuXG5cbmV4cG9ydCBkZWZhdWx0IGNyYzMyO1xuIiwgIlxuaW1wb3J0IHtCdWY4LEJ1ZjE2LGFycmF5U2V0fSBmcm9tICcuL3V0aWxzJztcbmltcG9ydCB7X3RyX2ZsdXNoX2Jsb2NrLCBfdHJfdGFsbHksIF90cl9pbml0LCBfdHJfYWxpZ24sIF90cl9zdG9yZWRfYmxvY2t9IGZyb20gJy4vdHJlZXMnO1xuaW1wb3J0IGFkbGVyMzIgZnJvbSAnLi9hZGxlcjMyJztcbmltcG9ydCBjcmMzMiBmcm9tICcuL2NyYzMyJztcbmltcG9ydCBtc2cgZnJvbSAnLi9tZXNzYWdlcyc7XG5cbi8qIFB1YmxpYyBjb25zdGFudHMgPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PSovXG4vKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0qL1xuXG5cbi8qIEFsbG93ZWQgZmx1c2ggdmFsdWVzOyBzZWUgZGVmbGF0ZSgpIGFuZCBpbmZsYXRlKCkgYmVsb3cgZm9yIGRldGFpbHMgKi9cbnZhciBaX05PX0ZMVVNIID0gMDtcbnZhciBaX1BBUlRJQUxfRkxVU0ggPSAxO1xuLy92YXIgWl9TWU5DX0ZMVVNIICAgID0gMjtcbnZhciBaX0ZVTExfRkxVU0ggPSAzO1xudmFyIFpfRklOSVNIID0gNDtcbnZhciBaX0JMT0NLID0gNTtcbi8vdmFyIFpfVFJFRVMgICAgICAgICA9IDY7XG5cblxuLyogUmV0dXJuIGNvZGVzIGZvciB0aGUgY29tcHJlc3Npb24vZGVjb21wcmVzc2lvbiBmdW5jdGlvbnMuIE5lZ2F0aXZlIHZhbHVlc1xuICogYXJlIGVycm9ycywgcG9zaXRpdmUgdmFsdWVzIGFyZSB1c2VkIGZvciBzcGVjaWFsIGJ1dCBub3JtYWwgZXZlbnRzLlxuICovXG52YXIgWl9PSyA9IDA7XG52YXIgWl9TVFJFQU1fRU5EID0gMTtcbi8vdmFyIFpfTkVFRF9ESUNUICAgICA9IDI7XG4vL3ZhciBaX0VSUk5PICAgICAgICAgPSAtMTtcbnZhciBaX1NUUkVBTV9FUlJPUiA9IC0yO1xudmFyIFpfREFUQV9FUlJPUiA9IC0zO1xuLy92YXIgWl9NRU1fRVJST1IgICAgID0gLTQ7XG52YXIgWl9CVUZfRVJST1IgPSAtNTtcbi8vdmFyIFpfVkVSU0lPTl9FUlJPUiA9IC02O1xuXG5cbi8qIGNvbXByZXNzaW9uIGxldmVscyAqL1xuLy92YXIgWl9OT19DT01QUkVTU0lPTiAgICAgID0gMDtcbi8vdmFyIFpfQkVTVF9TUEVFRCAgICAgICAgICA9IDE7XG4vL3ZhciBaX0JFU1RfQ09NUFJFU1NJT04gICAgPSA5O1xudmFyIFpfREVGQVVMVF9DT01QUkVTU0lPTiA9IC0xO1xuXG5cbnZhciBaX0ZJTFRFUkVEID0gMTtcbnZhciBaX0hVRkZNQU5fT05MWSA9IDI7XG52YXIgWl9STEUgPSAzO1xudmFyIFpfRklYRUQgPSA0O1xudmFyIFpfREVGQVVMVF9TVFJBVEVHWSA9IDA7XG5cbi8qIFBvc3NpYmxlIHZhbHVlcyBvZiB0aGUgZGF0YV90eXBlIGZpZWxkICh0aG91Z2ggc2VlIGluZmxhdGUoKSkgKi9cbi8vdmFyIFpfQklOQVJZICAgICAgICAgICAgICA9IDA7XG4vL3ZhciBaX1RFWFQgICAgICAgICAgICAgICAgPSAxO1xuLy92YXIgWl9BU0NJSSAgICAgICAgICAgICAgID0gMTsgLy8gPSBaX1RFWFRcbnZhciBaX1VOS05PV04gPSAyO1xuXG5cbi8qIFRoZSBkZWZsYXRlIGNvbXByZXNzaW9uIG1ldGhvZCAqL1xudmFyIFpfREVGTEFURUQgPSA4O1xuXG4vKj09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0qL1xuXG5cbnZhciBNQVhfTUVNX0xFVkVMID0gOTtcbi8qIE1heGltdW0gdmFsdWUgZm9yIG1lbUxldmVsIGluIGRlZmxhdGVJbml0MiAqL1xudmFyIE1BWF9XQklUUyA9IDE1O1xuLyogMzJLIExaNzcgd2luZG93ICovXG52YXIgREVGX01FTV9MRVZFTCA9IDg7XG5cblxudmFyIExFTkdUSF9DT0RFUyA9IDI5O1xuLyogbnVtYmVyIG9mIGxlbmd0aCBjb2Rlcywgbm90IGNvdW50aW5nIHRoZSBzcGVjaWFsIEVORF9CTE9DSyBjb2RlICovXG52YXIgTElURVJBTFMgPSAyNTY7XG4vKiBudW1iZXIgb2YgbGl0ZXJhbCBieXRlcyAwLi4yNTUgKi9cbnZhciBMX0NPREVTID0gTElURVJBTFMgKyAxICsgTEVOR1RIX0NPREVTO1xuLyogbnVtYmVyIG9mIExpdGVyYWwgb3IgTGVuZ3RoIGNvZGVzLCBpbmNsdWRpbmcgdGhlIEVORF9CTE9DSyBjb2RlICovXG52YXIgRF9DT0RFUyA9IDMwO1xuLyogbnVtYmVyIG9mIGRpc3RhbmNlIGNvZGVzICovXG52YXIgQkxfQ09ERVMgPSAxOTtcbi8qIG51bWJlciBvZiBjb2RlcyB1c2VkIHRvIHRyYW5zZmVyIHRoZSBiaXQgbGVuZ3RocyAqL1xudmFyIEhFQVBfU0laRSA9IDIgKiBMX0NPREVTICsgMTtcbi8qIG1heGltdW0gaGVhcCBzaXplICovXG52YXIgTUFYX0JJVFMgPSAxNTtcbi8qIEFsbCBjb2RlcyBtdXN0IG5vdCBleGNlZWQgTUFYX0JJVFMgYml0cyAqL1xuXG52YXIgTUlOX01BVENIID0gMztcbnZhciBNQVhfTUFUQ0ggPSAyNTg7XG52YXIgTUlOX0xPT0tBSEVBRCA9IChNQVhfTUFUQ0ggKyBNSU5fTUFUQ0ggKyAxKTtcblxudmFyIFBSRVNFVF9ESUNUID0gMHgyMDtcblxudmFyIElOSVRfU1RBVEUgPSA0MjtcbnZhciBFWFRSQV9TVEFURSA9IDY5O1xudmFyIE5BTUVfU1RBVEUgPSA3MztcbnZhciBDT01NRU5UX1NUQVRFID0gOTE7XG52YXIgSENSQ19TVEFURSA9IDEwMztcbnZhciBCVVNZX1NUQVRFID0gMTEzO1xudmFyIEZJTklTSF9TVEFURSA9IDY2NjtcblxudmFyIEJTX05FRURfTU9SRSA9IDE7IC8qIGJsb2NrIG5vdCBjb21wbGV0ZWQsIG5lZWQgbW9yZSBpbnB1dCBvciBtb3JlIG91dHB1dCAqL1xudmFyIEJTX0JMT0NLX0RPTkUgPSAyOyAvKiBibG9jayBmbHVzaCBwZXJmb3JtZWQgKi9cbnZhciBCU19GSU5JU0hfU1RBUlRFRCA9IDM7IC8qIGZpbmlzaCBzdGFydGVkLCBuZWVkIG9ubHkgbW9yZSBvdXRwdXQgYXQgbmV4dCBkZWZsYXRlICovXG52YXIgQlNfRklOSVNIX0RPTkUgPSA0OyAvKiBmaW5pc2ggZG9uZSwgYWNjZXB0IG5vIG1vcmUgaW5wdXQgb3Igb3V0cHV0ICovXG5cbnZhciBPU19DT0RFID0gMHgwMzsgLy8gVW5peCA6KSAuIERvbid0IGRldGVjdCwgdXNlIHRoaXMgZGVmYXVsdC5cblxuZnVuY3Rpb24gZXJyKHN0cm0sIGVycm9yQ29kZSkge1xuICBzdHJtLm1zZyA9IG1zZ1tlcnJvckNvZGVdO1xuICByZXR1cm4gZXJyb3JDb2RlO1xufVxuXG5mdW5jdGlvbiByYW5rKGYpIHtcbiAgcmV0dXJuICgoZikgPDwgMSkgLSAoKGYpID4gNCA/IDkgOiAwKTtcbn1cblxuZnVuY3Rpb24gemVybyhidWYpIHtcbiAgdmFyIGxlbiA9IGJ1Zi5sZW5ndGg7XG4gIHdoaWxlICgtLWxlbiA+PSAwKSB7XG4gICAgYnVmW2xlbl0gPSAwO1xuICB9XG59XG5cblxuLyogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuICogRmx1c2ggYXMgbXVjaCBwZW5kaW5nIG91dHB1dCBhcyBwb3NzaWJsZS4gQWxsIGRlZmxhdGUoKSBvdXRwdXQgZ29lc1xuICogdGhyb3VnaCB0aGlzIGZ1bmN0aW9uIHNvIHNvbWUgYXBwbGljYXRpb25zIG1heSB3aXNoIHRvIG1vZGlmeSBpdFxuICogdG8gYXZvaWQgYWxsb2NhdGluZyBhIGxhcmdlIHN0cm0tPm91dHB1dCBidWZmZXIgYW5kIGNvcHlpbmcgaW50byBpdC5cbiAqIChTZWUgYWxzbyByZWFkX2J1ZigpKS5cbiAqL1xuZnVuY3Rpb24gZmx1c2hfcGVuZGluZyhzdHJtKSB7XG4gIHZhciBzID0gc3RybS5zdGF0ZTtcblxuICAvL190cl9mbHVzaF9iaXRzKHMpO1xuICB2YXIgbGVuID0gcy5wZW5kaW5nO1xuICBpZiAobGVuID4gc3RybS5hdmFpbF9vdXQpIHtcbiAgICBsZW4gPSBzdHJtLmF2YWlsX291dDtcbiAgfVxuICBpZiAobGVuID09PSAwKSB7XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgYXJyYXlTZXQoc3RybS5vdXRwdXQsIHMucGVuZGluZ19idWYsIHMucGVuZGluZ19vdXQsIGxlbiwgc3RybS5uZXh0X291dCk7XG4gIHN0cm0ubmV4dF9vdXQgKz0gbGVuO1xuICBzLnBlbmRpbmdfb3V0ICs9IGxlbjtcbiAgc3RybS50b3RhbF9vdXQgKz0gbGVuO1xuICBzdHJtLmF2YWlsX291dCAtPSBsZW47XG4gIHMucGVuZGluZyAtPSBsZW47XG4gIGlmIChzLnBlbmRpbmcgPT09IDApIHtcbiAgICBzLnBlbmRpbmdfb3V0ID0gMDtcbiAgfVxufVxuXG5cbmZ1bmN0aW9uIGZsdXNoX2Jsb2NrX29ubHkocywgbGFzdCkge1xuICBfdHJfZmx1c2hfYmxvY2socywgKHMuYmxvY2tfc3RhcnQgPj0gMCA/IHMuYmxvY2tfc3RhcnQgOiAtMSksIHMuc3Ryc3RhcnQgLSBzLmJsb2NrX3N0YXJ0LCBsYXN0KTtcbiAgcy5ibG9ja19zdGFydCA9IHMuc3Ryc3RhcnQ7XG4gIGZsdXNoX3BlbmRpbmcocy5zdHJtKTtcbn1cblxuXG5mdW5jdGlvbiBwdXRfYnl0ZShzLCBiKSB7XG4gIHMucGVuZGluZ19idWZbcy5wZW5kaW5nKytdID0gYjtcbn1cblxuXG4vKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4gKiBQdXQgYSBzaG9ydCBpbiB0aGUgcGVuZGluZyBidWZmZXIuIFRoZSAxNi1iaXQgdmFsdWUgaXMgcHV0IGluIE1TQiBvcmRlci5cbiAqIElOIGFzc2VydGlvbjogdGhlIHN0cmVhbSBzdGF0ZSBpcyBjb3JyZWN0IGFuZCB0aGVyZSBpcyBlbm91Z2ggcm9vbSBpblxuICogcGVuZGluZ19idWYuXG4gKi9cbmZ1bmN0aW9uIHB1dFNob3J0TVNCKHMsIGIpIHtcbiAgLy8gIHB1dF9ieXRlKHMsIChCeXRlKShiID4+IDgpKTtcbiAgLy8gIHB1dF9ieXRlKHMsIChCeXRlKShiICYgMHhmZikpO1xuICBzLnBlbmRpbmdfYnVmW3MucGVuZGluZysrXSA9IChiID4+PiA4KSAmIDB4ZmY7XG4gIHMucGVuZGluZ19idWZbcy5wZW5kaW5nKytdID0gYiAmIDB4ZmY7XG59XG5cblxuLyogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4gKiBSZWFkIGEgbmV3IGJ1ZmZlciBmcm9tIHRoZSBjdXJyZW50IGlucHV0IHN0cmVhbSwgdXBkYXRlIHRoZSBhZGxlcjMyXG4gKiBhbmQgdG90YWwgbnVtYmVyIG9mIGJ5dGVzIHJlYWQuICBBbGwgZGVmbGF0ZSgpIGlucHV0IGdvZXMgdGhyb3VnaFxuICogdGhpcyBmdW5jdGlvbiBzbyBzb21lIGFwcGxpY2F0aW9ucyBtYXkgd2lzaCB0byBtb2RpZnkgaXQgdG8gYXZvaWRcbiAqIGFsbG9jYXRpbmcgYSBsYXJnZSBzdHJtLT5pbnB1dCBidWZmZXIgYW5kIGNvcHlpbmcgZnJvbSBpdC5cbiAqIChTZWUgYWxzbyBmbHVzaF9wZW5kaW5nKCkpLlxuICovXG5mdW5jdGlvbiByZWFkX2J1ZihzdHJtLCBidWYsIHN0YXJ0LCBzaXplKSB7XG4gIHZhciBsZW4gPSBzdHJtLmF2YWlsX2luO1xuXG4gIGlmIChsZW4gPiBzaXplKSB7XG4gICAgbGVuID0gc2l6ZTtcbiAgfVxuICBpZiAobGVuID09PSAwKSB7XG4gICAgcmV0dXJuIDA7XG4gIH1cblxuICBzdHJtLmF2YWlsX2luIC09IGxlbjtcblxuICAvLyB6bWVtY3B5KGJ1Ziwgc3RybS0+bmV4dF9pbiwgbGVuKTtcbiAgYXJyYXlTZXQoYnVmLCBzdHJtLmlucHV0LCBzdHJtLm5leHRfaW4sIGxlbiwgc3RhcnQpO1xuICBpZiAoc3RybS5zdGF0ZS53cmFwID09PSAxKSB7XG4gICAgc3RybS5hZGxlciA9IGFkbGVyMzIoc3RybS5hZGxlciwgYnVmLCBsZW4sIHN0YXJ0KTtcbiAgfSBlbHNlIGlmIChzdHJtLnN0YXRlLndyYXAgPT09IDIpIHtcbiAgICBzdHJtLmFkbGVyID0gY3JjMzIoc3RybS5hZGxlciwgYnVmLCBsZW4sIHN0YXJ0KTtcbiAgfVxuXG4gIHN0cm0ubmV4dF9pbiArPSBsZW47XG4gIHN0cm0udG90YWxfaW4gKz0gbGVuO1xuXG4gIHJldHVybiBsZW47XG59XG5cblxuLyogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4gKiBTZXQgbWF0Y2hfc3RhcnQgdG8gdGhlIGxvbmdlc3QgbWF0Y2ggc3RhcnRpbmcgYXQgdGhlIGdpdmVuIHN0cmluZyBhbmRcbiAqIHJldHVybiBpdHMgbGVuZ3RoLiBNYXRjaGVzIHNob3J0ZXIgb3IgZXF1YWwgdG8gcHJldl9sZW5ndGggYXJlIGRpc2NhcmRlZCxcbiAqIGluIHdoaWNoIGNhc2UgdGhlIHJlc3VsdCBpcyBlcXVhbCB0byBwcmV2X2xlbmd0aCBhbmQgbWF0Y2hfc3RhcnQgaXNcbiAqIGdhcmJhZ2UuXG4gKiBJTiBhc3NlcnRpb25zOiBjdXJfbWF0Y2ggaXMgdGhlIGhlYWQgb2YgdGhlIGhhc2ggY2hhaW4gZm9yIHRoZSBjdXJyZW50XG4gKiAgIHN0cmluZyAoc3Ryc3RhcnQpIGFuZCBpdHMgZGlzdGFuY2UgaXMgPD0gTUFYX0RJU1QsIGFuZCBwcmV2X2xlbmd0aCA+PSAxXG4gKiBPVVQgYXNzZXJ0aW9uOiB0aGUgbWF0Y2ggbGVuZ3RoIGlzIG5vdCBncmVhdGVyIHRoYW4gcy0+bG9va2FoZWFkLlxuICovXG5mdW5jdGlvbiBsb25nZXN0X21hdGNoKHMsIGN1cl9tYXRjaCkge1xuICB2YXIgY2hhaW5fbGVuZ3RoID0gcy5tYXhfY2hhaW5fbGVuZ3RoOyAvKiBtYXggaGFzaCBjaGFpbiBsZW5ndGggKi9cbiAgdmFyIHNjYW4gPSBzLnN0cnN0YXJ0OyAvKiBjdXJyZW50IHN0cmluZyAqL1xuICB2YXIgbWF0Y2g7IC8qIG1hdGNoZWQgc3RyaW5nICovXG4gIHZhciBsZW47IC8qIGxlbmd0aCBvZiBjdXJyZW50IG1hdGNoICovXG4gIHZhciBiZXN0X2xlbiA9IHMucHJldl9sZW5ndGg7IC8qIGJlc3QgbWF0Y2ggbGVuZ3RoIHNvIGZhciAqL1xuICB2YXIgbmljZV9tYXRjaCA9IHMubmljZV9tYXRjaDsgLyogc3RvcCBpZiBtYXRjaCBsb25nIGVub3VnaCAqL1xuICB2YXIgbGltaXQgPSAocy5zdHJzdGFydCA+IChzLndfc2l6ZSAtIE1JTl9MT09LQUhFQUQpKSA/XG4gICAgcy5zdHJzdGFydCAtIChzLndfc2l6ZSAtIE1JTl9MT09LQUhFQUQpIDogMCAvKk5JTCovIDtcblxuICB2YXIgX3dpbiA9IHMud2luZG93OyAvLyBzaG9ydGN1dFxuXG4gIHZhciB3bWFzayA9IHMud19tYXNrO1xuICB2YXIgcHJldiA9IHMucHJldjtcblxuICAvKiBTdG9wIHdoZW4gY3VyX21hdGNoIGJlY29tZXMgPD0gbGltaXQuIFRvIHNpbXBsaWZ5IHRoZSBjb2RlLFxuICAgKiB3ZSBwcmV2ZW50IG1hdGNoZXMgd2l0aCB0aGUgc3RyaW5nIG9mIHdpbmRvdyBpbmRleCAwLlxuICAgKi9cblxuICB2YXIgc3RyZW5kID0gcy5zdHJzdGFydCArIE1BWF9NQVRDSDtcbiAgdmFyIHNjYW5fZW5kMSA9IF93aW5bc2NhbiArIGJlc3RfbGVuIC0gMV07XG4gIHZhciBzY2FuX2VuZCA9IF93aW5bc2NhbiArIGJlc3RfbGVuXTtcblxuICAvKiBUaGUgY29kZSBpcyBvcHRpbWl6ZWQgZm9yIEhBU0hfQklUUyA+PSA4IGFuZCBNQVhfTUFUQ0gtMiBtdWx0aXBsZSBvZiAxNi5cbiAgICogSXQgaXMgZWFzeSB0byBnZXQgcmlkIG9mIHRoaXMgb3B0aW1pemF0aW9uIGlmIG5lY2Vzc2FyeS5cbiAgICovXG4gIC8vIEFzc2VydChzLT5oYXNoX2JpdHMgPj0gOCAmJiBNQVhfTUFUQ0ggPT0gMjU4LCBcIkNvZGUgdG9vIGNsZXZlclwiKTtcblxuICAvKiBEbyBub3Qgd2FzdGUgdG9vIG11Y2ggdGltZSBpZiB3ZSBhbHJlYWR5IGhhdmUgYSBnb29kIG1hdGNoOiAqL1xuICBpZiAocy5wcmV2X2xlbmd0aCA+PSBzLmdvb2RfbWF0Y2gpIHtcbiAgICBjaGFpbl9sZW5ndGggPj49IDI7XG4gIH1cbiAgLyogRG8gbm90IGxvb2sgZm9yIG1hdGNoZXMgYmV5b25kIHRoZSBlbmQgb2YgdGhlIGlucHV0LiBUaGlzIGlzIG5lY2Vzc2FyeVxuICAgKiB0byBtYWtlIGRlZmxhdGUgZGV0ZXJtaW5pc3RpYy5cbiAgICovXG4gIGlmIChuaWNlX21hdGNoID4gcy5sb29rYWhlYWQpIHtcbiAgICBuaWNlX21hdGNoID0gcy5sb29rYWhlYWQ7XG4gIH1cblxuICAvLyBBc3NlcnQoKHVsZylzLT5zdHJzdGFydCA8PSBzLT53aW5kb3dfc2l6ZS1NSU5fTE9PS0FIRUFELCBcIm5lZWQgbG9va2FoZWFkXCIpO1xuXG4gIGRvIHtcbiAgICAvLyBBc3NlcnQoY3VyX21hdGNoIDwgcy0+c3Ryc3RhcnQsIFwibm8gZnV0dXJlXCIpO1xuICAgIG1hdGNoID0gY3VyX21hdGNoO1xuXG4gICAgLyogU2tpcCB0byBuZXh0IG1hdGNoIGlmIHRoZSBtYXRjaCBsZW5ndGggY2Fubm90IGluY3JlYXNlXG4gICAgICogb3IgaWYgdGhlIG1hdGNoIGxlbmd0aCBpcyBsZXNzIHRoYW4gMi4gIE5vdGUgdGhhdCB0aGUgY2hlY2tzIGJlbG93XG4gICAgICogZm9yIGluc3VmZmljaWVudCBsb29rYWhlYWQgb25seSBvY2N1ciBvY2Nhc2lvbmFsbHkgZm9yIHBlcmZvcm1hbmNlXG4gICAgICogcmVhc29ucy4gIFRoZXJlZm9yZSB1bmluaXRpYWxpemVkIG1lbW9yeSB3aWxsIGJlIGFjY2Vzc2VkLCBhbmRcbiAgICAgKiBjb25kaXRpb25hbCBqdW1wcyB3aWxsIGJlIG1hZGUgdGhhdCBkZXBlbmQgb24gdGhvc2UgdmFsdWVzLlxuICAgICAqIEhvd2V2ZXIgdGhlIGxlbmd0aCBvZiB0aGUgbWF0Y2ggaXMgbGltaXRlZCB0byB0aGUgbG9va2FoZWFkLCBzb1xuICAgICAqIHRoZSBvdXRwdXQgb2YgZGVmbGF0ZSBpcyBub3QgYWZmZWN0ZWQgYnkgdGhlIHVuaW5pdGlhbGl6ZWQgdmFsdWVzLlxuICAgICAqL1xuXG4gICAgaWYgKF93aW5bbWF0Y2ggKyBiZXN0X2xlbl0gIT09IHNjYW5fZW5kIHx8XG4gICAgICBfd2luW21hdGNoICsgYmVzdF9sZW4gLSAxXSAhPT0gc2Nhbl9lbmQxIHx8XG4gICAgICBfd2luW21hdGNoXSAhPT0gX3dpbltzY2FuXSB8fFxuICAgICAgX3dpblsrK21hdGNoXSAhPT0gX3dpbltzY2FuICsgMV0pIHtcbiAgICAgIGNvbnRpbnVlO1xuICAgIH1cblxuICAgIC8qIFRoZSBjaGVjayBhdCBiZXN0X2xlbi0xIGNhbiBiZSByZW1vdmVkIGJlY2F1c2UgaXQgd2lsbCBiZSBtYWRlXG4gICAgICogYWdhaW4gbGF0ZXIuIChUaGlzIGhldXJpc3RpYyBpcyBub3QgYWx3YXlzIGEgd2luLilcbiAgICAgKiBJdCBpcyBub3QgbmVjZXNzYXJ5IHRvIGNvbXBhcmUgc2NhblsyXSBhbmQgbWF0Y2hbMl0gc2luY2UgdGhleVxuICAgICAqIGFyZSBhbHdheXMgZXF1YWwgd2hlbiB0aGUgb3RoZXIgYnl0ZXMgbWF0Y2gsIGdpdmVuIHRoYXRcbiAgICAgKiB0aGUgaGFzaCBrZXlzIGFyZSBlcXVhbCBhbmQgdGhhdCBIQVNIX0JJVFMgPj0gOC5cbiAgICAgKi9cbiAgICBzY2FuICs9IDI7XG4gICAgbWF0Y2grKztcbiAgICAvLyBBc3NlcnQoKnNjYW4gPT0gKm1hdGNoLCBcIm1hdGNoWzJdP1wiKTtcblxuICAgIC8qIFdlIGNoZWNrIGZvciBpbnN1ZmZpY2llbnQgbG9va2FoZWFkIG9ubHkgZXZlcnkgOHRoIGNvbXBhcmlzb247XG4gICAgICogdGhlIDI1NnRoIGNoZWNrIHdpbGwgYmUgbWFkZSBhdCBzdHJzdGFydCsyNTguXG4gICAgICovXG4gICAgZG8ge1xuICAgICAgLypqc2hpbnQgbm9lbXB0eTpmYWxzZSovXG4gICAgfSB3aGlsZSAoX3dpblsrK3NjYW5dID09PSBfd2luWysrbWF0Y2hdICYmIF93aW5bKytzY2FuXSA9PT0gX3dpblsrK21hdGNoXSAmJlxuICAgICAgX3dpblsrK3NjYW5dID09PSBfd2luWysrbWF0Y2hdICYmIF93aW5bKytzY2FuXSA9PT0gX3dpblsrK21hdGNoXSAmJlxuICAgICAgX3dpblsrK3NjYW5dID09PSBfd2luWysrbWF0Y2hdICYmIF93aW5bKytzY2FuXSA9PT0gX3dpblsrK21hdGNoXSAmJlxuICAgICAgX3dpblsrK3NjYW5dID09PSBfd2luWysrbWF0Y2hdICYmIF93aW5bKytzY2FuXSA9PT0gX3dpblsrK21hdGNoXSAmJlxuICAgICAgc2NhbiA8IHN0cmVuZCk7XG5cbiAgICAvLyBBc3NlcnQoc2NhbiA8PSBzLT53aW5kb3crKHVuc2lnbmVkKShzLT53aW5kb3dfc2l6ZS0xKSwgXCJ3aWxkIHNjYW5cIik7XG5cbiAgICBsZW4gPSBNQVhfTUFUQ0ggLSAoc3RyZW5kIC0gc2Nhbik7XG4gICAgc2NhbiA9IHN0cmVuZCAtIE1BWF9NQVRDSDtcblxuICAgIGlmIChsZW4gPiBiZXN0X2xlbikge1xuICAgICAgcy5tYXRjaF9zdGFydCA9IGN1cl9tYXRjaDtcbiAgICAgIGJlc3RfbGVuID0gbGVuO1xuICAgICAgaWYgKGxlbiA+PSBuaWNlX21hdGNoKSB7XG4gICAgICAgIGJyZWFrO1xuICAgICAgfVxuICAgICAgc2Nhbl9lbmQxID0gX3dpbltzY2FuICsgYmVzdF9sZW4gLSAxXTtcbiAgICAgIHNjYW5fZW5kID0gX3dpbltzY2FuICsgYmVzdF9sZW5dO1xuICAgIH1cbiAgfSB3aGlsZSAoKGN1cl9tYXRjaCA9IHByZXZbY3VyX21hdGNoICYgd21hc2tdKSA+IGxpbWl0ICYmIC0tY2hhaW5fbGVuZ3RoICE9PSAwKTtcblxuICBpZiAoYmVzdF9sZW4gPD0gcy5sb29rYWhlYWQpIHtcbiAgICByZXR1cm4gYmVzdF9sZW47XG4gIH1cbiAgcmV0dXJuIHMubG9va2FoZWFkO1xufVxuXG5cbi8qID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuICogRmlsbCB0aGUgd2luZG93IHdoZW4gdGhlIGxvb2thaGVhZCBiZWNvbWVzIGluc3VmZmljaWVudC5cbiAqIFVwZGF0ZXMgc3Ryc3RhcnQgYW5kIGxvb2thaGVhZC5cbiAqXG4gKiBJTiBhc3NlcnRpb246IGxvb2thaGVhZCA8IE1JTl9MT09LQUhFQURcbiAqIE9VVCBhc3NlcnRpb25zOiBzdHJzdGFydCA8PSB3aW5kb3dfc2l6ZS1NSU5fTE9PS0FIRUFEXG4gKiAgICBBdCBsZWFzdCBvbmUgYnl0ZSBoYXMgYmVlbiByZWFkLCBvciBhdmFpbF9pbiA9PSAwOyByZWFkcyBhcmVcbiAqICAgIHBlcmZvcm1lZCBmb3IgYXQgbGVhc3QgdHdvIGJ5dGVzIChyZXF1aXJlZCBmb3IgdGhlIHppcCB0cmFuc2xhdGVfZW9sXG4gKiAgICBvcHRpb24gLS0gbm90IHN1cHBvcnRlZCBoZXJlKS5cbiAqL1xuZnVuY3Rpb24gZmlsbF93aW5kb3cocykge1xuICB2YXIgX3dfc2l6ZSA9IHMud19zaXplO1xuICB2YXIgcCwgbiwgbSwgbW9yZSwgc3RyO1xuXG4gIC8vQXNzZXJ0KHMtPmxvb2thaGVhZCA8IE1JTl9MT09LQUhFQUQsIFwiYWxyZWFkeSBlbm91Z2ggbG9va2FoZWFkXCIpO1xuXG4gIGRvIHtcbiAgICBtb3JlID0gcy53aW5kb3dfc2l6ZSAtIHMubG9va2FoZWFkIC0gcy5zdHJzdGFydDtcblxuICAgIC8vIEpTIGludHMgaGF2ZSAzMiBiaXQsIGJsb2NrIGJlbG93IG5vdCBuZWVkZWRcbiAgICAvKiBEZWFsIHdpdGggIUAjJCUgNjRLIGxpbWl0OiAqL1xuICAgIC8vaWYgKHNpemVvZihpbnQpIDw9IDIpIHtcbiAgICAvLyAgICBpZiAobW9yZSA9PSAwICYmIHMtPnN0cnN0YXJ0ID09IDAgJiYgcy0+bG9va2FoZWFkID09IDApIHtcbiAgICAvLyAgICAgICAgbW9yZSA9IHdzaXplO1xuICAgIC8vXG4gICAgLy8gIH0gZWxzZSBpZiAobW9yZSA9PSAodW5zaWduZWQpKC0xKSkge1xuICAgIC8vICAgICAgICAvKiBWZXJ5IHVubGlrZWx5LCBidXQgcG9zc2libGUgb24gMTYgYml0IG1hY2hpbmUgaWZcbiAgICAvLyAgICAgICAgICogc3Ryc3RhcnQgPT0gMCAmJiBsb29rYWhlYWQgPT0gMSAoaW5wdXQgZG9uZSBhIGJ5dGUgYXQgdGltZSlcbiAgICAvLyAgICAgICAgICovXG4gICAgLy8gICAgICAgIG1vcmUtLTtcbiAgICAvLyAgICB9XG4gICAgLy99XG5cblxuICAgIC8qIElmIHRoZSB3aW5kb3cgaXMgYWxtb3N0IGZ1bGwgYW5kIHRoZXJlIGlzIGluc3VmZmljaWVudCBsb29rYWhlYWQsXG4gICAgICogbW92ZSB0aGUgdXBwZXIgaGFsZiB0byB0aGUgbG93ZXIgb25lIHRvIG1ha2Ugcm9vbSBpbiB0aGUgdXBwZXIgaGFsZi5cbiAgICAgKi9cbiAgICBpZiAocy5zdHJzdGFydCA+PSBfd19zaXplICsgKF93X3NpemUgLSBNSU5fTE9PS0FIRUFEKSkge1xuXG4gICAgICBhcnJheVNldChzLndpbmRvdywgcy53aW5kb3csIF93X3NpemUsIF93X3NpemUsIDApO1xuICAgICAgcy5tYXRjaF9zdGFydCAtPSBfd19zaXplO1xuICAgICAgcy5zdHJzdGFydCAtPSBfd19zaXplO1xuICAgICAgLyogd2Ugbm93IGhhdmUgc3Ryc3RhcnQgPj0gTUFYX0RJU1QgKi9cbiAgICAgIHMuYmxvY2tfc3RhcnQgLT0gX3dfc2l6ZTtcblxuICAgICAgLyogU2xpZGUgdGhlIGhhc2ggdGFibGUgKGNvdWxkIGJlIGF2b2lkZWQgd2l0aCAzMiBiaXQgdmFsdWVzXG4gICAgICAgYXQgdGhlIGV4cGVuc2Ugb2YgbWVtb3J5IHVzYWdlKS4gV2Ugc2xpZGUgZXZlbiB3aGVuIGxldmVsID09IDBcbiAgICAgICB0byBrZWVwIHRoZSBoYXNoIHRhYmxlIGNvbnNpc3RlbnQgaWYgd2Ugc3dpdGNoIGJhY2sgdG8gbGV2ZWwgPiAwXG4gICAgICAgbGF0ZXIuIChVc2luZyBsZXZlbCAwIHBlcm1hbmVudGx5IGlzIG5vdCBhbiBvcHRpbWFsIHVzYWdlIG9mXG4gICAgICAgemxpYiwgc28gd2UgZG9uJ3QgY2FyZSBhYm91dCB0aGlzIHBhdGhvbG9naWNhbCBjYXNlLilcbiAgICAgICAqL1xuXG4gICAgICBuID0gcy5oYXNoX3NpemU7XG4gICAgICBwID0gbjtcbiAgICAgIGRvIHtcbiAgICAgICAgbSA9IHMuaGVhZFstLXBdO1xuICAgICAgICBzLmhlYWRbcF0gPSAobSA+PSBfd19zaXplID8gbSAtIF93X3NpemUgOiAwKTtcbiAgICAgIH0gd2hpbGUgKC0tbik7XG5cbiAgICAgIG4gPSBfd19zaXplO1xuICAgICAgcCA9IG47XG4gICAgICBkbyB7XG4gICAgICAgIG0gPSBzLnByZXZbLS1wXTtcbiAgICAgICAgcy5wcmV2W3BdID0gKG0gPj0gX3dfc2l6ZSA/IG0gLSBfd19zaXplIDogMCk7XG4gICAgICAgIC8qIElmIG4gaXMgbm90IG9uIGFueSBoYXNoIGNoYWluLCBwcmV2W25dIGlzIGdhcmJhZ2UgYnV0XG4gICAgICAgICAqIGl0cyB2YWx1ZSB3aWxsIG5ldmVyIGJlIHVzZWQuXG4gICAgICAgICAqL1xuICAgICAgfSB3aGlsZSAoLS1uKTtcblxuICAgICAgbW9yZSArPSBfd19zaXplO1xuICAgIH1cbiAgICBpZiAocy5zdHJtLmF2YWlsX2luID09PSAwKSB7XG4gICAgICBicmVhaztcbiAgICB9XG5cbiAgICAvKiBJZiB0aGVyZSB3YXMgbm8gc2xpZGluZzpcbiAgICAgKiAgICBzdHJzdGFydCA8PSBXU0laRStNQVhfRElTVC0xICYmIGxvb2thaGVhZCA8PSBNSU5fTE9PS0FIRUFEIC0gMSAmJlxuICAgICAqICAgIG1vcmUgPT0gd2luZG93X3NpemUgLSBsb29rYWhlYWQgLSBzdHJzdGFydFxuICAgICAqID0+IG1vcmUgPj0gd2luZG93X3NpemUgLSAoTUlOX0xPT0tBSEVBRC0xICsgV1NJWkUgKyBNQVhfRElTVC0xKVxuICAgICAqID0+IG1vcmUgPj0gd2luZG93X3NpemUgLSAyKldTSVpFICsgMlxuICAgICAqIEluIHRoZSBCSUdfTUVNIG9yIE1NQVAgY2FzZSAobm90IHlldCBzdXBwb3J0ZWQpLFxuICAgICAqICAgd2luZG93X3NpemUgPT0gaW5wdXRfc2l6ZSArIE1JTl9MT09LQUhFQUQgICYmXG4gICAgICogICBzdHJzdGFydCArIHMtPmxvb2thaGVhZCA8PSBpbnB1dF9zaXplID0+IG1vcmUgPj0gTUlOX0xPT0tBSEVBRC5cbiAgICAgKiBPdGhlcndpc2UsIHdpbmRvd19zaXplID09IDIqV1NJWkUgc28gbW9yZSA+PSAyLlxuICAgICAqIElmIHRoZXJlIHdhcyBzbGlkaW5nLCBtb3JlID49IFdTSVpFLiBTbyBpbiBhbGwgY2FzZXMsIG1vcmUgPj0gMi5cbiAgICAgKi9cbiAgICAvL0Fzc2VydChtb3JlID49IDIsIFwibW9yZSA8IDJcIik7XG4gICAgbiA9IHJlYWRfYnVmKHMuc3RybSwgcy53aW5kb3csIHMuc3Ryc3RhcnQgKyBzLmxvb2thaGVhZCwgbW9yZSk7XG4gICAgcy5sb29rYWhlYWQgKz0gbjtcblxuICAgIC8qIEluaXRpYWxpemUgdGhlIGhhc2ggdmFsdWUgbm93IHRoYXQgd2UgaGF2ZSBzb21lIGlucHV0OiAqL1xuICAgIGlmIChzLmxvb2thaGVhZCArIHMuaW5zZXJ0ID49IE1JTl9NQVRDSCkge1xuICAgICAgc3RyID0gcy5zdHJzdGFydCAtIHMuaW5zZXJ0O1xuICAgICAgcy5pbnNfaCA9IHMud2luZG93W3N0cl07XG5cbiAgICAgIC8qIFVQREFURV9IQVNIKHMsIHMtPmluc19oLCBzLT53aW5kb3dbc3RyICsgMV0pOyAqL1xuICAgICAgcy5pbnNfaCA9ICgocy5pbnNfaCA8PCBzLmhhc2hfc2hpZnQpIF4gcy53aW5kb3dbc3RyICsgMV0pICYgcy5oYXNoX21hc2s7XG4gICAgICAvLyNpZiBNSU5fTUFUQ0ggIT0gM1xuICAgICAgLy8gICAgICAgIENhbGwgdXBkYXRlX2hhc2goKSBNSU5fTUFUQ0gtMyBtb3JlIHRpbWVzXG4gICAgICAvLyNlbmRpZlxuICAgICAgd2hpbGUgKHMuaW5zZXJ0KSB7XG4gICAgICAgIC8qIFVQREFURV9IQVNIKHMsIHMtPmluc19oLCBzLT53aW5kb3dbc3RyICsgTUlOX01BVENILTFdKTsgKi9cbiAgICAgICAgcy5pbnNfaCA9ICgocy5pbnNfaCA8PCBzLmhhc2hfc2hpZnQpIF4gcy53aW5kb3dbc3RyICsgTUlOX01BVENIIC0gMV0pICYgcy5oYXNoX21hc2s7XG5cbiAgICAgICAgcy5wcmV2W3N0ciAmIHMud19tYXNrXSA9IHMuaGVhZFtzLmluc19oXTtcbiAgICAgICAgcy5oZWFkW3MuaW5zX2hdID0gc3RyO1xuICAgICAgICBzdHIrKztcbiAgICAgICAgcy5pbnNlcnQtLTtcbiAgICAgICAgaWYgKHMubG9va2FoZWFkICsgcy5pbnNlcnQgPCBNSU5fTUFUQ0gpIHtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgICAvKiBJZiB0aGUgd2hvbGUgaW5wdXQgaGFzIGxlc3MgdGhhbiBNSU5fTUFUQ0ggYnl0ZXMsIGluc19oIGlzIGdhcmJhZ2UsXG4gICAgICogYnV0IHRoaXMgaXMgbm90IGltcG9ydGFudCBzaW5jZSBvbmx5IGxpdGVyYWwgYnl0ZXMgd2lsbCBiZSBlbWl0dGVkLlxuICAgICAqL1xuXG4gIH0gd2hpbGUgKHMubG9va2FoZWFkIDwgTUlOX0xPT0tBSEVBRCAmJiBzLnN0cm0uYXZhaWxfaW4gIT09IDApO1xuXG4gIC8qIElmIHRoZSBXSU5fSU5JVCBieXRlcyBhZnRlciB0aGUgZW5kIG9mIHRoZSBjdXJyZW50IGRhdGEgaGF2ZSBuZXZlciBiZWVuXG4gICAqIHdyaXR0ZW4sIHRoZW4gemVybyB0aG9zZSBieXRlcyBpbiBvcmRlciB0byBhdm9pZCBtZW1vcnkgY2hlY2sgcmVwb3J0cyBvZlxuICAgKiB0aGUgdXNlIG9mIHVuaW5pdGlhbGl6ZWQgKG9yIHVuaW5pdGlhbGlzZWQgYXMgSnVsaWFuIHdyaXRlcykgYnl0ZXMgYnlcbiAgICogdGhlIGxvbmdlc3QgbWF0Y2ggcm91dGluZXMuICBVcGRhdGUgdGhlIGhpZ2ggd2F0ZXIgbWFyayBmb3IgdGhlIG5leHRcbiAgICogdGltZSB0aHJvdWdoIGhlcmUuICBXSU5fSU5JVCBpcyBzZXQgdG8gTUFYX01BVENIIHNpbmNlIHRoZSBsb25nZXN0IG1hdGNoXG4gICAqIHJvdXRpbmVzIGFsbG93IHNjYW5uaW5nIHRvIHN0cnN0YXJ0ICsgTUFYX01BVENILCBpZ25vcmluZyBsb29rYWhlYWQuXG4gICAqL1xuICAvLyAgaWYgKHMuaGlnaF93YXRlciA8IHMud2luZG93X3NpemUpIHtcbiAgLy8gICAgdmFyIGN1cnIgPSBzLnN0cnN0YXJ0ICsgcy5sb29rYWhlYWQ7XG4gIC8vICAgIHZhciBpbml0ID0gMDtcbiAgLy9cbiAgLy8gICAgaWYgKHMuaGlnaF93YXRlciA8IGN1cnIpIHtcbiAgLy8gICAgICAvKiBQcmV2aW91cyBoaWdoIHdhdGVyIG1hcmsgYmVsb3cgY3VycmVudCBkYXRhIC0tIHplcm8gV0lOX0lOSVRcbiAgLy8gICAgICAgKiBieXRlcyBvciB1cCB0byBlbmQgb2Ygd2luZG93LCB3aGljaGV2ZXIgaXMgbGVzcy5cbiAgLy8gICAgICAgKi9cbiAgLy8gICAgICBpbml0ID0gcy53aW5kb3dfc2l6ZSAtIGN1cnI7XG4gIC8vICAgICAgaWYgKGluaXQgPiBXSU5fSU5JVClcbiAgLy8gICAgICAgIGluaXQgPSBXSU5fSU5JVDtcbiAgLy8gICAgICB6bWVtemVybyhzLT53aW5kb3cgKyBjdXJyLCAodW5zaWduZWQpaW5pdCk7XG4gIC8vICAgICAgcy0+aGlnaF93YXRlciA9IGN1cnIgKyBpbml0O1xuICAvLyAgICB9XG4gIC8vICAgIGVsc2UgaWYgKHMtPmhpZ2hfd2F0ZXIgPCAodWxnKWN1cnIgKyBXSU5fSU5JVCkge1xuICAvLyAgICAgIC8qIEhpZ2ggd2F0ZXIgbWFyayBhdCBvciBhYm92ZSBjdXJyZW50IGRhdGEsIGJ1dCBiZWxvdyBjdXJyZW50IGRhdGFcbiAgLy8gICAgICAgKiBwbHVzIFdJTl9JTklUIC0tIHplcm8gb3V0IHRvIGN1cnJlbnQgZGF0YSBwbHVzIFdJTl9JTklULCBvciB1cFxuICAvLyAgICAgICAqIHRvIGVuZCBvZiB3aW5kb3csIHdoaWNoZXZlciBpcyBsZXNzLlxuICAvLyAgICAgICAqL1xuICAvLyAgICAgIGluaXQgPSAodWxnKWN1cnIgKyBXSU5fSU5JVCAtIHMtPmhpZ2hfd2F0ZXI7XG4gIC8vICAgICAgaWYgKGluaXQgPiBzLT53aW5kb3dfc2l6ZSAtIHMtPmhpZ2hfd2F0ZXIpXG4gIC8vICAgICAgICBpbml0ID0gcy0+d2luZG93X3NpemUgLSBzLT5oaWdoX3dhdGVyO1xuICAvLyAgICAgIHptZW16ZXJvKHMtPndpbmRvdyArIHMtPmhpZ2hfd2F0ZXIsICh1bnNpZ25lZClpbml0KTtcbiAgLy8gICAgICBzLT5oaWdoX3dhdGVyICs9IGluaXQ7XG4gIC8vICAgIH1cbiAgLy8gIH1cbiAgLy9cbiAgLy8gIEFzc2VydCgodWxnKXMtPnN0cnN0YXJ0IDw9IHMtPndpbmRvd19zaXplIC0gTUlOX0xPT0tBSEVBRCxcbiAgLy8gICAgXCJub3QgZW5vdWdoIHJvb20gZm9yIHNlYXJjaFwiKTtcbn1cblxuLyogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4gKiBDb3B5IHdpdGhvdXQgY29tcHJlc3Npb24gYXMgbXVjaCBhcyBwb3NzaWJsZSBmcm9tIHRoZSBpbnB1dCBzdHJlYW0sIHJldHVyblxuICogdGhlIGN1cnJlbnQgYmxvY2sgc3RhdGUuXG4gKiBUaGlzIGZ1bmN0aW9uIGRvZXMgbm90IGluc2VydCBuZXcgc3RyaW5ncyBpbiB0aGUgZGljdGlvbmFyeSBzaW5jZVxuICogdW5jb21wcmVzc2libGUgZGF0YSBpcyBwcm9iYWJseSBub3QgdXNlZnVsLiBUaGlzIGZ1bmN0aW9uIGlzIHVzZWRcbiAqIG9ubHkgZm9yIHRoZSBsZXZlbD0wIGNvbXByZXNzaW9uIG9wdGlvbi5cbiAqIE5PVEU6IHRoaXMgZnVuY3Rpb24gc2hvdWxkIGJlIG9wdGltaXplZCB0byBhdm9pZCBleHRyYSBjb3B5aW5nIGZyb21cbiAqIHdpbmRvdyB0byBwZW5kaW5nX2J1Zi5cbiAqL1xuZnVuY3Rpb24gZGVmbGF0ZV9zdG9yZWQocywgZmx1c2gpIHtcbiAgLyogU3RvcmVkIGJsb2NrcyBhcmUgbGltaXRlZCB0byAweGZmZmYgYnl0ZXMsIHBlbmRpbmdfYnVmIGlzIGxpbWl0ZWRcbiAgICogdG8gcGVuZGluZ19idWZfc2l6ZSwgYW5kIGVhY2ggc3RvcmVkIGJsb2NrIGhhcyBhIDUgYnl0ZSBoZWFkZXI6XG4gICAqL1xuICB2YXIgbWF4X2Jsb2NrX3NpemUgPSAweGZmZmY7XG5cbiAgaWYgKG1heF9ibG9ja19zaXplID4gcy5wZW5kaW5nX2J1Zl9zaXplIC0gNSkge1xuICAgIG1heF9ibG9ja19zaXplID0gcy5wZW5kaW5nX2J1Zl9zaXplIC0gNTtcbiAgfVxuXG4gIC8qIENvcHkgYXMgbXVjaCBhcyBwb3NzaWJsZSBmcm9tIGlucHV0IHRvIG91dHB1dDogKi9cbiAgZm9yICg7Oykge1xuICAgIC8qIEZpbGwgdGhlIHdpbmRvdyBhcyBtdWNoIGFzIHBvc3NpYmxlOiAqL1xuICAgIGlmIChzLmxvb2thaGVhZCA8PSAxKSB7XG5cbiAgICAgIC8vQXNzZXJ0KHMtPnN0cnN0YXJ0IDwgcy0+d19zaXplK01BWF9ESVNUKHMpIHx8XG4gICAgICAvLyAgcy0+YmxvY2tfc3RhcnQgPj0gKGxvbmcpcy0+d19zaXplLCBcInNsaWRlIHRvbyBsYXRlXCIpO1xuICAgICAgLy8gICAgICBpZiAoIShzLnN0cnN0YXJ0IDwgcy53X3NpemUgKyAocy53X3NpemUgLSBNSU5fTE9PS0FIRUFEKSB8fFxuICAgICAgLy8gICAgICAgIHMuYmxvY2tfc3RhcnQgPj0gcy53X3NpemUpKSB7XG4gICAgICAvLyAgICAgICAgdGhyb3cgIG5ldyBFcnJvcihcInNsaWRlIHRvbyBsYXRlXCIpO1xuICAgICAgLy8gICAgICB9XG5cbiAgICAgIGZpbGxfd2luZG93KHMpO1xuICAgICAgaWYgKHMubG9va2FoZWFkID09PSAwICYmIGZsdXNoID09PSBaX05PX0ZMVVNIKSB7XG4gICAgICAgIHJldHVybiBCU19ORUVEX01PUkU7XG4gICAgICB9XG5cbiAgICAgIGlmIChzLmxvb2thaGVhZCA9PT0gMCkge1xuICAgICAgICBicmVhaztcbiAgICAgIH1cbiAgICAgIC8qIGZsdXNoIHRoZSBjdXJyZW50IGJsb2NrICovXG4gICAgfVxuICAgIC8vQXNzZXJ0KHMtPmJsb2NrX3N0YXJ0ID49IDBMLCBcImJsb2NrIGdvbmVcIik7XG4gICAgLy8gICAgaWYgKHMuYmxvY2tfc3RhcnQgPCAwKSB0aHJvdyBuZXcgRXJyb3IoXCJibG9jayBnb25lXCIpO1xuXG4gICAgcy5zdHJzdGFydCArPSBzLmxvb2thaGVhZDtcbiAgICBzLmxvb2thaGVhZCA9IDA7XG5cbiAgICAvKiBFbWl0IGEgc3RvcmVkIGJsb2NrIGlmIHBlbmRpbmdfYnVmIHdpbGwgYmUgZnVsbDogKi9cbiAgICB2YXIgbWF4X3N0YXJ0ID0gcy5ibG9ja19zdGFydCArIG1heF9ibG9ja19zaXplO1xuXG4gICAgaWYgKHMuc3Ryc3RhcnQgPT09IDAgfHwgcy5zdHJzdGFydCA+PSBtYXhfc3RhcnQpIHtcbiAgICAgIC8qIHN0cnN0YXJ0ID09IDAgaXMgcG9zc2libGUgd2hlbiB3cmFwYXJvdW5kIG9uIDE2LWJpdCBtYWNoaW5lICovXG4gICAgICBzLmxvb2thaGVhZCA9IHMuc3Ryc3RhcnQgLSBtYXhfc3RhcnQ7XG4gICAgICBzLnN0cnN0YXJ0ID0gbWF4X3N0YXJ0O1xuICAgICAgLyoqKiBGTFVTSF9CTE9DSyhzLCAwKTsgKioqL1xuICAgICAgZmx1c2hfYmxvY2tfb25seShzLCBmYWxzZSk7XG4gICAgICBpZiAocy5zdHJtLmF2YWlsX291dCA9PT0gMCkge1xuICAgICAgICByZXR1cm4gQlNfTkVFRF9NT1JFO1xuICAgICAgfVxuICAgICAgLyoqKi9cblxuXG4gICAgfVxuICAgIC8qIEZsdXNoIGlmIHdlIG1heSBoYXZlIHRvIHNsaWRlLCBvdGhlcndpc2UgYmxvY2tfc3RhcnQgbWF5IGJlY29tZVxuICAgICAqIG5lZ2F0aXZlIGFuZCB0aGUgZGF0YSB3aWxsIGJlIGdvbmU6XG4gICAgICovXG4gICAgaWYgKHMuc3Ryc3RhcnQgLSBzLmJsb2NrX3N0YXJ0ID49IChzLndfc2l6ZSAtIE1JTl9MT09LQUhFQUQpKSB7XG4gICAgICAvKioqIEZMVVNIX0JMT0NLKHMsIDApOyAqKiovXG4gICAgICBmbHVzaF9ibG9ja19vbmx5KHMsIGZhbHNlKTtcbiAgICAgIGlmIChzLnN0cm0uYXZhaWxfb3V0ID09PSAwKSB7XG4gICAgICAgIHJldHVybiBCU19ORUVEX01PUkU7XG4gICAgICB9XG4gICAgICAvKioqL1xuICAgIH1cbiAgfVxuXG4gIHMuaW5zZXJ0ID0gMDtcblxuICBpZiAoZmx1c2ggPT09IFpfRklOSVNIKSB7XG4gICAgLyoqKiBGTFVTSF9CTE9DSyhzLCAxKTsgKioqL1xuICAgIGZsdXNoX2Jsb2NrX29ubHkocywgdHJ1ZSk7XG4gICAgaWYgKHMuc3RybS5hdmFpbF9vdXQgPT09IDApIHtcbiAgICAgIHJldHVybiBCU19GSU5JU0hfU1RBUlRFRDtcbiAgICB9XG4gICAgLyoqKi9cbiAgICByZXR1cm4gQlNfRklOSVNIX0RPTkU7XG4gIH1cblxuICBpZiAocy5zdHJzdGFydCA+IHMuYmxvY2tfc3RhcnQpIHtcbiAgICAvKioqIEZMVVNIX0JMT0NLKHMsIDApOyAqKiovXG4gICAgZmx1c2hfYmxvY2tfb25seShzLCBmYWxzZSk7XG4gICAgaWYgKHMuc3RybS5hdmFpbF9vdXQgPT09IDApIHtcbiAgICAgIHJldHVybiBCU19ORUVEX01PUkU7XG4gICAgfVxuICAgIC8qKiovXG4gIH1cblxuICByZXR1cm4gQlNfTkVFRF9NT1JFO1xufVxuXG4vKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbiAqIENvbXByZXNzIGFzIG11Y2ggYXMgcG9zc2libGUgZnJvbSB0aGUgaW5wdXQgc3RyZWFtLCByZXR1cm4gdGhlIGN1cnJlbnRcbiAqIGJsb2NrIHN0YXRlLlxuICogVGhpcyBmdW5jdGlvbiBkb2VzIG5vdCBwZXJmb3JtIGxhenkgZXZhbHVhdGlvbiBvZiBtYXRjaGVzIGFuZCBpbnNlcnRzXG4gKiBuZXcgc3RyaW5ncyBpbiB0aGUgZGljdGlvbmFyeSBvbmx5IGZvciB1bm1hdGNoZWQgc3RyaW5ncyBvciBmb3Igc2hvcnRcbiAqIG1hdGNoZXMuIEl0IGlzIHVzZWQgb25seSBmb3IgdGhlIGZhc3QgY29tcHJlc3Npb24gb3B0aW9ucy5cbiAqL1xuZnVuY3Rpb24gZGVmbGF0ZV9mYXN0KHMsIGZsdXNoKSB7XG4gIHZhciBoYXNoX2hlYWQ7IC8qIGhlYWQgb2YgdGhlIGhhc2ggY2hhaW4gKi9cbiAgdmFyIGJmbHVzaDsgLyogc2V0IGlmIGN1cnJlbnQgYmxvY2sgbXVzdCBiZSBmbHVzaGVkICovXG5cbiAgZm9yICg7Oykge1xuICAgIC8qIE1ha2Ugc3VyZSB0aGF0IHdlIGFsd2F5cyBoYXZlIGVub3VnaCBsb29rYWhlYWQsIGV4Y2VwdFxuICAgICAqIGF0IHRoZSBlbmQgb2YgdGhlIGlucHV0IGZpbGUuIFdlIG5lZWQgTUFYX01BVENIIGJ5dGVzXG4gICAgICogZm9yIHRoZSBuZXh0IG1hdGNoLCBwbHVzIE1JTl9NQVRDSCBieXRlcyB0byBpbnNlcnQgdGhlXG4gICAgICogc3RyaW5nIGZvbGxvd2luZyB0aGUgbmV4dCBtYXRjaC5cbiAgICAgKi9cbiAgICBpZiAocy5sb29rYWhlYWQgPCBNSU5fTE9PS0FIRUFEKSB7XG4gICAgICBmaWxsX3dpbmRvdyhzKTtcbiAgICAgIGlmIChzLmxvb2thaGVhZCA8IE1JTl9MT09LQUhFQUQgJiYgZmx1c2ggPT09IFpfTk9fRkxVU0gpIHtcbiAgICAgICAgcmV0dXJuIEJTX05FRURfTU9SRTtcbiAgICAgIH1cbiAgICAgIGlmIChzLmxvb2thaGVhZCA9PT0gMCkge1xuICAgICAgICBicmVhazsgLyogZmx1c2ggdGhlIGN1cnJlbnQgYmxvY2sgKi9cbiAgICAgIH1cbiAgICB9XG5cbiAgICAvKiBJbnNlcnQgdGhlIHN0cmluZyB3aW5kb3dbc3Ryc3RhcnQgLi4gc3Ryc3RhcnQrMl0gaW4gdGhlXG4gICAgICogZGljdGlvbmFyeSwgYW5kIHNldCBoYXNoX2hlYWQgdG8gdGhlIGhlYWQgb2YgdGhlIGhhc2ggY2hhaW46XG4gICAgICovXG4gICAgaGFzaF9oZWFkID0gMCAvKk5JTCovIDtcbiAgICBpZiAocy5sb29rYWhlYWQgPj0gTUlOX01BVENIKSB7XG4gICAgICAvKioqIElOU0VSVF9TVFJJTkcocywgcy5zdHJzdGFydCwgaGFzaF9oZWFkKTsgKioqL1xuICAgICAgcy5pbnNfaCA9ICgocy5pbnNfaCA8PCBzLmhhc2hfc2hpZnQpIF4gcy53aW5kb3dbcy5zdHJzdGFydCArIE1JTl9NQVRDSCAtIDFdKSAmIHMuaGFzaF9tYXNrO1xuICAgICAgaGFzaF9oZWFkID0gcy5wcmV2W3Muc3Ryc3RhcnQgJiBzLndfbWFza10gPSBzLmhlYWRbcy5pbnNfaF07XG4gICAgICBzLmhlYWRbcy5pbnNfaF0gPSBzLnN0cnN0YXJ0O1xuICAgICAgLyoqKi9cbiAgICB9XG5cbiAgICAvKiBGaW5kIHRoZSBsb25nZXN0IG1hdGNoLCBkaXNjYXJkaW5nIHRob3NlIDw9IHByZXZfbGVuZ3RoLlxuICAgICAqIEF0IHRoaXMgcG9pbnQgd2UgaGF2ZSBhbHdheXMgbWF0Y2hfbGVuZ3RoIDwgTUlOX01BVENIXG4gICAgICovXG4gICAgaWYgKGhhc2hfaGVhZCAhPT0gMCAvKk5JTCovICYmICgocy5zdHJzdGFydCAtIGhhc2hfaGVhZCkgPD0gKHMud19zaXplIC0gTUlOX0xPT0tBSEVBRCkpKSB7XG4gICAgICAvKiBUbyBzaW1wbGlmeSB0aGUgY29kZSwgd2UgcHJldmVudCBtYXRjaGVzIHdpdGggdGhlIHN0cmluZ1xuICAgICAgICogb2Ygd2luZG93IGluZGV4IDAgKGluIHBhcnRpY3VsYXIgd2UgaGF2ZSB0byBhdm9pZCBhIG1hdGNoXG4gICAgICAgKiBvZiB0aGUgc3RyaW5nIHdpdGggaXRzZWxmIGF0IHRoZSBzdGFydCBvZiB0aGUgaW5wdXQgZmlsZSkuXG4gICAgICAgKi9cbiAgICAgIHMubWF0Y2hfbGVuZ3RoID0gbG9uZ2VzdF9tYXRjaChzLCBoYXNoX2hlYWQpO1xuICAgICAgLyogbG9uZ2VzdF9tYXRjaCgpIHNldHMgbWF0Y2hfc3RhcnQgKi9cbiAgICB9XG4gICAgaWYgKHMubWF0Y2hfbGVuZ3RoID49IE1JTl9NQVRDSCkge1xuICAgICAgLy8gY2hlY2tfbWF0Y2gocywgcy5zdHJzdGFydCwgcy5tYXRjaF9zdGFydCwgcy5tYXRjaF9sZW5ndGgpOyAvLyBmb3IgZGVidWcgb25seVxuXG4gICAgICAvKioqIF90cl90YWxseV9kaXN0KHMsIHMuc3Ryc3RhcnQgLSBzLm1hdGNoX3N0YXJ0LFxuICAgICAgICAgICAgICAgICAgICAgcy5tYXRjaF9sZW5ndGggLSBNSU5fTUFUQ0gsIGJmbHVzaCk7ICoqKi9cbiAgICAgIGJmbHVzaCA9IF90cl90YWxseShzLCBzLnN0cnN0YXJ0IC0gcy5tYXRjaF9zdGFydCwgcy5tYXRjaF9sZW5ndGggLSBNSU5fTUFUQ0gpO1xuXG4gICAgICBzLmxvb2thaGVhZCAtPSBzLm1hdGNoX2xlbmd0aDtcblxuICAgICAgLyogSW5zZXJ0IG5ldyBzdHJpbmdzIGluIHRoZSBoYXNoIHRhYmxlIG9ubHkgaWYgdGhlIG1hdGNoIGxlbmd0aFxuICAgICAgICogaXMgbm90IHRvbyBsYXJnZS4gVGhpcyBzYXZlcyB0aW1lIGJ1dCBkZWdyYWRlcyBjb21wcmVzc2lvbi5cbiAgICAgICAqL1xuICAgICAgaWYgKHMubWF0Y2hfbGVuZ3RoIDw9IHMubWF4X2xhenlfbWF0Y2ggLyptYXhfaW5zZXJ0X2xlbmd0aCovICYmIHMubG9va2FoZWFkID49IE1JTl9NQVRDSCkge1xuICAgICAgICBzLm1hdGNoX2xlbmd0aC0tOyAvKiBzdHJpbmcgYXQgc3Ryc3RhcnQgYWxyZWFkeSBpbiB0YWJsZSAqL1xuICAgICAgICBkbyB7XG4gICAgICAgICAgcy5zdHJzdGFydCsrO1xuICAgICAgICAgIC8qKiogSU5TRVJUX1NUUklORyhzLCBzLnN0cnN0YXJ0LCBoYXNoX2hlYWQpOyAqKiovXG4gICAgICAgICAgcy5pbnNfaCA9ICgocy5pbnNfaCA8PCBzLmhhc2hfc2hpZnQpIF4gcy53aW5kb3dbcy5zdHJzdGFydCArIE1JTl9NQVRDSCAtIDFdKSAmIHMuaGFzaF9tYXNrO1xuICAgICAgICAgIGhhc2hfaGVhZCA9IHMucHJldltzLnN0cnN0YXJ0ICYgcy53X21hc2tdID0gcy5oZWFkW3MuaW5zX2hdO1xuICAgICAgICAgIHMuaGVhZFtzLmluc19oXSA9IHMuc3Ryc3RhcnQ7XG4gICAgICAgICAgLyoqKi9cbiAgICAgICAgICAvKiBzdHJzdGFydCBuZXZlciBleGNlZWRzIFdTSVpFLU1BWF9NQVRDSCwgc28gdGhlcmUgYXJlXG4gICAgICAgICAgICogYWx3YXlzIE1JTl9NQVRDSCBieXRlcyBhaGVhZC5cbiAgICAgICAgICAgKi9cbiAgICAgICAgfSB3aGlsZSAoLS1zLm1hdGNoX2xlbmd0aCAhPT0gMCk7XG4gICAgICAgIHMuc3Ryc3RhcnQrKztcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHMuc3Ryc3RhcnQgKz0gcy5tYXRjaF9sZW5ndGg7XG4gICAgICAgIHMubWF0Y2hfbGVuZ3RoID0gMDtcbiAgICAgICAgcy5pbnNfaCA9IHMud2luZG93W3Muc3Ryc3RhcnRdO1xuICAgICAgICAvKiBVUERBVEVfSEFTSChzLCBzLmluc19oLCBzLndpbmRvd1tzLnN0cnN0YXJ0KzFdKTsgKi9cbiAgICAgICAgcy5pbnNfaCA9ICgocy5pbnNfaCA8PCBzLmhhc2hfc2hpZnQpIF4gcy53aW5kb3dbcy5zdHJzdGFydCArIDFdKSAmIHMuaGFzaF9tYXNrO1xuXG4gICAgICAgIC8vI2lmIE1JTl9NQVRDSCAhPSAzXG4gICAgICAgIC8vICAgICAgICAgICAgICAgIENhbGwgVVBEQVRFX0hBU0goKSBNSU5fTUFUQ0gtMyBtb3JlIHRpbWVzXG4gICAgICAgIC8vI2VuZGlmXG4gICAgICAgIC8qIElmIGxvb2thaGVhZCA8IE1JTl9NQVRDSCwgaW5zX2ggaXMgZ2FyYmFnZSwgYnV0IGl0IGRvZXMgbm90XG4gICAgICAgICAqIG1hdHRlciBzaW5jZSBpdCB3aWxsIGJlIHJlY29tcHV0ZWQgYXQgbmV4dCBkZWZsYXRlIGNhbGwuXG4gICAgICAgICAqL1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICAvKiBObyBtYXRjaCwgb3V0cHV0IGEgbGl0ZXJhbCBieXRlICovXG4gICAgICAvL1RyYWNldnYoKHN0ZGVycixcIiVjXCIsIHMud2luZG93W3Muc3Ryc3RhcnRdKSk7XG4gICAgICAvKioqIF90cl90YWxseV9saXQocywgcy53aW5kb3dbcy5zdHJzdGFydF0sIGJmbHVzaCk7ICoqKi9cbiAgICAgIGJmbHVzaCA9IF90cl90YWxseShzLCAwLCBzLndpbmRvd1tzLnN0cnN0YXJ0XSk7XG5cbiAgICAgIHMubG9va2FoZWFkLS07XG4gICAgICBzLnN0cnN0YXJ0Kys7XG4gICAgfVxuICAgIGlmIChiZmx1c2gpIHtcbiAgICAgIC8qKiogRkxVU0hfQkxPQ0socywgMCk7ICoqKi9cbiAgICAgIGZsdXNoX2Jsb2NrX29ubHkocywgZmFsc2UpO1xuICAgICAgaWYgKHMuc3RybS5hdmFpbF9vdXQgPT09IDApIHtcbiAgICAgICAgcmV0dXJuIEJTX05FRURfTU9SRTtcbiAgICAgIH1cbiAgICAgIC8qKiovXG4gICAgfVxuICB9XG4gIHMuaW5zZXJ0ID0gKChzLnN0cnN0YXJ0IDwgKE1JTl9NQVRDSCAtIDEpKSA/IHMuc3Ryc3RhcnQgOiBNSU5fTUFUQ0ggLSAxKTtcbiAgaWYgKGZsdXNoID09PSBaX0ZJTklTSCkge1xuICAgIC8qKiogRkxVU0hfQkxPQ0socywgMSk7ICoqKi9cbiAgICBmbHVzaF9ibG9ja19vbmx5KHMsIHRydWUpO1xuICAgIGlmIChzLnN0cm0uYXZhaWxfb3V0ID09PSAwKSB7XG4gICAgICByZXR1cm4gQlNfRklOSVNIX1NUQVJURUQ7XG4gICAgfVxuICAgIC8qKiovXG4gICAgcmV0dXJuIEJTX0ZJTklTSF9ET05FO1xuICB9XG4gIGlmIChzLmxhc3RfbGl0KSB7XG4gICAgLyoqKiBGTFVTSF9CTE9DSyhzLCAwKTsgKioqL1xuICAgIGZsdXNoX2Jsb2NrX29ubHkocywgZmFsc2UpO1xuICAgIGlmIChzLnN0cm0uYXZhaWxfb3V0ID09PSAwKSB7XG4gICAgICByZXR1cm4gQlNfTkVFRF9NT1JFO1xuICAgIH1cbiAgICAvKioqL1xuICB9XG4gIHJldHVybiBCU19CTE9DS19ET05FO1xufVxuXG4vKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbiAqIFNhbWUgYXMgYWJvdmUsIGJ1dCBhY2hpZXZlcyBiZXR0ZXIgY29tcHJlc3Npb24uIFdlIHVzZSBhIGxhenlcbiAqIGV2YWx1YXRpb24gZm9yIG1hdGNoZXM6IGEgbWF0Y2ggaXMgZmluYWxseSBhZG9wdGVkIG9ubHkgaWYgdGhlcmUgaXNcbiAqIG5vIGJldHRlciBtYXRjaCBhdCB0aGUgbmV4dCB3aW5kb3cgcG9zaXRpb24uXG4gKi9cbmZ1bmN0aW9uIGRlZmxhdGVfc2xvdyhzLCBmbHVzaCkge1xuICB2YXIgaGFzaF9oZWFkOyAvKiBoZWFkIG9mIGhhc2ggY2hhaW4gKi9cbiAgdmFyIGJmbHVzaDsgLyogc2V0IGlmIGN1cnJlbnQgYmxvY2sgbXVzdCBiZSBmbHVzaGVkICovXG5cbiAgdmFyIG1heF9pbnNlcnQ7XG5cbiAgLyogUHJvY2VzcyB0aGUgaW5wdXQgYmxvY2suICovXG4gIGZvciAoOzspIHtcbiAgICAvKiBNYWtlIHN1cmUgdGhhdCB3ZSBhbHdheXMgaGF2ZSBlbm91Z2ggbG9va2FoZWFkLCBleGNlcHRcbiAgICAgKiBhdCB0aGUgZW5kIG9mIHRoZSBpbnB1dCBmaWxlLiBXZSBuZWVkIE1BWF9NQVRDSCBieXRlc1xuICAgICAqIGZvciB0aGUgbmV4dCBtYXRjaCwgcGx1cyBNSU5fTUFUQ0ggYnl0ZXMgdG8gaW5zZXJ0IHRoZVxuICAgICAqIHN0cmluZyBmb2xsb3dpbmcgdGhlIG5leHQgbWF0Y2guXG4gICAgICovXG4gICAgaWYgKHMubG9va2FoZWFkIDwgTUlOX0xPT0tBSEVBRCkge1xuICAgICAgZmlsbF93aW5kb3cocyk7XG4gICAgICBpZiAocy5sb29rYWhlYWQgPCBNSU5fTE9PS0FIRUFEICYmIGZsdXNoID09PSBaX05PX0ZMVVNIKSB7XG4gICAgICAgIHJldHVybiBCU19ORUVEX01PUkU7XG4gICAgICB9XG4gICAgICBpZiAocy5sb29rYWhlYWQgPT09IDApIHtcbiAgICAgICAgYnJlYWs7XG4gICAgICB9IC8qIGZsdXNoIHRoZSBjdXJyZW50IGJsb2NrICovXG4gICAgfVxuXG4gICAgLyogSW5zZXJ0IHRoZSBzdHJpbmcgd2luZG93W3N0cnN0YXJ0IC4uIHN0cnN0YXJ0KzJdIGluIHRoZVxuICAgICAqIGRpY3Rpb25hcnksIGFuZCBzZXQgaGFzaF9oZWFkIHRvIHRoZSBoZWFkIG9mIHRoZSBoYXNoIGNoYWluOlxuICAgICAqL1xuICAgIGhhc2hfaGVhZCA9IDAgLypOSUwqLyA7XG4gICAgaWYgKHMubG9va2FoZWFkID49IE1JTl9NQVRDSCkge1xuICAgICAgLyoqKiBJTlNFUlRfU1RSSU5HKHMsIHMuc3Ryc3RhcnQsIGhhc2hfaGVhZCk7ICoqKi9cbiAgICAgIHMuaW5zX2ggPSAoKHMuaW5zX2ggPDwgcy5oYXNoX3NoaWZ0KSBeIHMud2luZG93W3Muc3Ryc3RhcnQgKyBNSU5fTUFUQ0ggLSAxXSkgJiBzLmhhc2hfbWFzaztcbiAgICAgIGhhc2hfaGVhZCA9IHMucHJldltzLnN0cnN0YXJ0ICYgcy53X21hc2tdID0gcy5oZWFkW3MuaW5zX2hdO1xuICAgICAgcy5oZWFkW3MuaW5zX2hdID0gcy5zdHJzdGFydDtcbiAgICAgIC8qKiovXG4gICAgfVxuXG4gICAgLyogRmluZCB0aGUgbG9uZ2VzdCBtYXRjaCwgZGlzY2FyZGluZyB0aG9zZSA8PSBwcmV2X2xlbmd0aC5cbiAgICAgKi9cbiAgICBzLnByZXZfbGVuZ3RoID0gcy5tYXRjaF9sZW5ndGg7XG4gICAgcy5wcmV2X21hdGNoID0gcy5tYXRjaF9zdGFydDtcbiAgICBzLm1hdGNoX2xlbmd0aCA9IE1JTl9NQVRDSCAtIDE7XG5cbiAgICBpZiAoaGFzaF9oZWFkICE9PSAwIC8qTklMKi8gJiYgcy5wcmV2X2xlbmd0aCA8IHMubWF4X2xhenlfbWF0Y2ggJiZcbiAgICAgIHMuc3Ryc3RhcnQgLSBoYXNoX2hlYWQgPD0gKHMud19zaXplIC0gTUlOX0xPT0tBSEVBRCkgLypNQVhfRElTVChzKSovICkge1xuICAgICAgLyogVG8gc2ltcGxpZnkgdGhlIGNvZGUsIHdlIHByZXZlbnQgbWF0Y2hlcyB3aXRoIHRoZSBzdHJpbmdcbiAgICAgICAqIG9mIHdpbmRvdyBpbmRleCAwIChpbiBwYXJ0aWN1bGFyIHdlIGhhdmUgdG8gYXZvaWQgYSBtYXRjaFxuICAgICAgICogb2YgdGhlIHN0cmluZyB3aXRoIGl0c2VsZiBhdCB0aGUgc3RhcnQgb2YgdGhlIGlucHV0IGZpbGUpLlxuICAgICAgICovXG4gICAgICBzLm1hdGNoX2xlbmd0aCA9IGxvbmdlc3RfbWF0Y2gocywgaGFzaF9oZWFkKTtcbiAgICAgIC8qIGxvbmdlc3RfbWF0Y2goKSBzZXRzIG1hdGNoX3N0YXJ0ICovXG5cbiAgICAgIGlmIChzLm1hdGNoX2xlbmd0aCA8PSA1ICYmXG4gICAgICAgIChzLnN0cmF0ZWd5ID09PSBaX0ZJTFRFUkVEIHx8IChzLm1hdGNoX2xlbmd0aCA9PT0gTUlOX01BVENIICYmIHMuc3Ryc3RhcnQgLSBzLm1hdGNoX3N0YXJ0ID4gNDA5NiAvKlRPT19GQVIqLyApKSkge1xuXG4gICAgICAgIC8qIElmIHByZXZfbWF0Y2ggaXMgYWxzbyBNSU5fTUFUQ0gsIG1hdGNoX3N0YXJ0IGlzIGdhcmJhZ2VcbiAgICAgICAgICogYnV0IHdlIHdpbGwgaWdub3JlIHRoZSBjdXJyZW50IG1hdGNoIGFueXdheS5cbiAgICAgICAgICovXG4gICAgICAgIHMubWF0Y2hfbGVuZ3RoID0gTUlOX01BVENIIC0gMTtcbiAgICAgIH1cbiAgICB9XG4gICAgLyogSWYgdGhlcmUgd2FzIGEgbWF0Y2ggYXQgdGhlIHByZXZpb3VzIHN0ZXAgYW5kIHRoZSBjdXJyZW50XG4gICAgICogbWF0Y2ggaXMgbm90IGJldHRlciwgb3V0cHV0IHRoZSBwcmV2aW91cyBtYXRjaDpcbiAgICAgKi9cbiAgICBpZiAocy5wcmV2X2xlbmd0aCA+PSBNSU5fTUFUQ0ggJiYgcy5tYXRjaF9sZW5ndGggPD0gcy5wcmV2X2xlbmd0aCkge1xuICAgICAgbWF4X2luc2VydCA9IHMuc3Ryc3RhcnQgKyBzLmxvb2thaGVhZCAtIE1JTl9NQVRDSDtcbiAgICAgIC8qIERvIG5vdCBpbnNlcnQgc3RyaW5ncyBpbiBoYXNoIHRhYmxlIGJleW9uZCB0aGlzLiAqL1xuXG4gICAgICAvL2NoZWNrX21hdGNoKHMsIHMuc3Ryc3RhcnQtMSwgcy5wcmV2X21hdGNoLCBzLnByZXZfbGVuZ3RoKTtcblxuICAgICAgLyoqKl90cl90YWxseV9kaXN0KHMsIHMuc3Ryc3RhcnQgLSAxIC0gcy5wcmV2X21hdGNoLFxuICAgICAgICAgICAgICAgICAgICAgcy5wcmV2X2xlbmd0aCAtIE1JTl9NQVRDSCwgYmZsdXNoKTsqKiovXG4gICAgICBiZmx1c2ggPSBfdHJfdGFsbHkocywgcy5zdHJzdGFydCAtIDEgLSBzLnByZXZfbWF0Y2gsIHMucHJldl9sZW5ndGggLSBNSU5fTUFUQ0gpO1xuICAgICAgLyogSW5zZXJ0IGluIGhhc2ggdGFibGUgYWxsIHN0cmluZ3MgdXAgdG8gdGhlIGVuZCBvZiB0aGUgbWF0Y2guXG4gICAgICAgKiBzdHJzdGFydC0xIGFuZCBzdHJzdGFydCBhcmUgYWxyZWFkeSBpbnNlcnRlZC4gSWYgdGhlcmUgaXMgbm90XG4gICAgICAgKiBlbm91Z2ggbG9va2FoZWFkLCB0aGUgbGFzdCB0d28gc3RyaW5ncyBhcmUgbm90IGluc2VydGVkIGluXG4gICAgICAgKiB0aGUgaGFzaCB0YWJsZS5cbiAgICAgICAqL1xuICAgICAgcy5sb29rYWhlYWQgLT0gcy5wcmV2X2xlbmd0aCAtIDE7XG4gICAgICBzLnByZXZfbGVuZ3RoIC09IDI7XG4gICAgICBkbyB7XG4gICAgICAgIGlmICgrK3Muc3Ryc3RhcnQgPD0gbWF4X2luc2VydCkge1xuICAgICAgICAgIC8qKiogSU5TRVJUX1NUUklORyhzLCBzLnN0cnN0YXJ0LCBoYXNoX2hlYWQpOyAqKiovXG4gICAgICAgICAgcy5pbnNfaCA9ICgocy5pbnNfaCA8PCBzLmhhc2hfc2hpZnQpIF4gcy53aW5kb3dbcy5zdHJzdGFydCArIE1JTl9NQVRDSCAtIDFdKSAmIHMuaGFzaF9tYXNrO1xuICAgICAgICAgIGhhc2hfaGVhZCA9IHMucHJldltzLnN0cnN0YXJ0ICYgcy53X21hc2tdID0gcy5oZWFkW3MuaW5zX2hdO1xuICAgICAgICAgIHMuaGVhZFtzLmluc19oXSA9IHMuc3Ryc3RhcnQ7XG4gICAgICAgICAgLyoqKi9cbiAgICAgICAgfVxuICAgICAgfSB3aGlsZSAoLS1zLnByZXZfbGVuZ3RoICE9PSAwKTtcbiAgICAgIHMubWF0Y2hfYXZhaWxhYmxlID0gMDtcbiAgICAgIHMubWF0Y2hfbGVuZ3RoID0gTUlOX01BVENIIC0gMTtcbiAgICAgIHMuc3Ryc3RhcnQrKztcblxuICAgICAgaWYgKGJmbHVzaCkge1xuICAgICAgICAvKioqIEZMVVNIX0JMT0NLKHMsIDApOyAqKiovXG4gICAgICAgIGZsdXNoX2Jsb2NrX29ubHkocywgZmFsc2UpO1xuICAgICAgICBpZiAocy5zdHJtLmF2YWlsX291dCA9PT0gMCkge1xuICAgICAgICAgIHJldHVybiBCU19ORUVEX01PUkU7XG4gICAgICAgIH1cbiAgICAgICAgLyoqKi9cbiAgICAgIH1cblxuICAgIH0gZWxzZSBpZiAocy5tYXRjaF9hdmFpbGFibGUpIHtcbiAgICAgIC8qIElmIHRoZXJlIHdhcyBubyBtYXRjaCBhdCB0aGUgcHJldmlvdXMgcG9zaXRpb24sIG91dHB1dCBhXG4gICAgICAgKiBzaW5nbGUgbGl0ZXJhbC4gSWYgdGhlcmUgd2FzIGEgbWF0Y2ggYnV0IHRoZSBjdXJyZW50IG1hdGNoXG4gICAgICAgKiBpcyBsb25nZXIsIHRydW5jYXRlIHRoZSBwcmV2aW91cyBtYXRjaCB0byBhIHNpbmdsZSBsaXRlcmFsLlxuICAgICAgICovXG4gICAgICAvL1RyYWNldnYoKHN0ZGVycixcIiVjXCIsIHMtPndpbmRvd1tzLT5zdHJzdGFydC0xXSkpO1xuICAgICAgLyoqKiBfdHJfdGFsbHlfbGl0KHMsIHMud2luZG93W3Muc3Ryc3RhcnQtMV0sIGJmbHVzaCk7ICoqKi9cbiAgICAgIGJmbHVzaCA9IF90cl90YWxseShzLCAwLCBzLndpbmRvd1tzLnN0cnN0YXJ0IC0gMV0pO1xuXG4gICAgICBpZiAoYmZsdXNoKSB7XG4gICAgICAgIC8qKiogRkxVU0hfQkxPQ0tfT05MWShzLCAwKSAqKiovXG4gICAgICAgIGZsdXNoX2Jsb2NrX29ubHkocywgZmFsc2UpO1xuICAgICAgICAvKioqL1xuICAgICAgfVxuICAgICAgcy5zdHJzdGFydCsrO1xuICAgICAgcy5sb29rYWhlYWQtLTtcbiAgICAgIGlmIChzLnN0cm0uYXZhaWxfb3V0ID09PSAwKSB7XG4gICAgICAgIHJldHVybiBCU19ORUVEX01PUkU7XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIC8qIFRoZXJlIGlzIG5vIHByZXZpb3VzIG1hdGNoIHRvIGNvbXBhcmUgd2l0aCwgd2FpdCBmb3JcbiAgICAgICAqIHRoZSBuZXh0IHN0ZXAgdG8gZGVjaWRlLlxuICAgICAgICovXG4gICAgICBzLm1hdGNoX2F2YWlsYWJsZSA9IDE7XG4gICAgICBzLnN0cnN0YXJ0Kys7XG4gICAgICBzLmxvb2thaGVhZC0tO1xuICAgIH1cbiAgfVxuICAvL0Fzc2VydCAoZmx1c2ggIT0gWl9OT19GTFVTSCwgXCJubyBmbHVzaD9cIik7XG4gIGlmIChzLm1hdGNoX2F2YWlsYWJsZSkge1xuICAgIC8vVHJhY2V2digoc3RkZXJyLFwiJWNcIiwgcy0+d2luZG93W3MtPnN0cnN0YXJ0LTFdKSk7XG4gICAgLyoqKiBfdHJfdGFsbHlfbGl0KHMsIHMud2luZG93W3Muc3Ryc3RhcnQtMV0sIGJmbHVzaCk7ICoqKi9cbiAgICBiZmx1c2ggPSBfdHJfdGFsbHkocywgMCwgcy53aW5kb3dbcy5zdHJzdGFydCAtIDFdKTtcblxuICAgIHMubWF0Y2hfYXZhaWxhYmxlID0gMDtcbiAgfVxuICBzLmluc2VydCA9IHMuc3Ryc3RhcnQgPCBNSU5fTUFUQ0ggLSAxID8gcy5zdHJzdGFydCA6IE1JTl9NQVRDSCAtIDE7XG4gIGlmIChmbHVzaCA9PT0gWl9GSU5JU0gpIHtcbiAgICAvKioqIEZMVVNIX0JMT0NLKHMsIDEpOyAqKiovXG4gICAgZmx1c2hfYmxvY2tfb25seShzLCB0cnVlKTtcbiAgICBpZiAocy5zdHJtLmF2YWlsX291dCA9PT0gMCkge1xuICAgICAgcmV0dXJuIEJTX0ZJTklTSF9TVEFSVEVEO1xuICAgIH1cbiAgICAvKioqL1xuICAgIHJldHVybiBCU19GSU5JU0hfRE9ORTtcbiAgfVxuICBpZiAocy5sYXN0X2xpdCkge1xuICAgIC8qKiogRkxVU0hfQkxPQ0socywgMCk7ICoqKi9cbiAgICBmbHVzaF9ibG9ja19vbmx5KHMsIGZhbHNlKTtcbiAgICBpZiAocy5zdHJtLmF2YWlsX291dCA9PT0gMCkge1xuICAgICAgcmV0dXJuIEJTX05FRURfTU9SRTtcbiAgICB9XG4gICAgLyoqKi9cbiAgfVxuXG4gIHJldHVybiBCU19CTE9DS19ET05FO1xufVxuXG5cbi8qID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuICogRm9yIFpfUkxFLCBzaW1wbHkgbG9vayBmb3IgcnVucyBvZiBieXRlcywgZ2VuZXJhdGUgbWF0Y2hlcyBvbmx5IG9mIGRpc3RhbmNlXG4gKiBvbmUuICBEbyBub3QgbWFpbnRhaW4gYSBoYXNoIHRhYmxlLiAgKEl0IHdpbGwgYmUgcmVnZW5lcmF0ZWQgaWYgdGhpcyBydW4gb2ZcbiAqIGRlZmxhdGUgc3dpdGNoZXMgYXdheSBmcm9tIFpfUkxFLilcbiAqL1xuZnVuY3Rpb24gZGVmbGF0ZV9ybGUocywgZmx1c2gpIHtcbiAgdmFyIGJmbHVzaDsgLyogc2V0IGlmIGN1cnJlbnQgYmxvY2sgbXVzdCBiZSBmbHVzaGVkICovXG4gIHZhciBwcmV2OyAvKiBieXRlIGF0IGRpc3RhbmNlIG9uZSB0byBtYXRjaCAqL1xuICB2YXIgc2Nhbiwgc3RyZW5kOyAvKiBzY2FuIGdvZXMgdXAgdG8gc3RyZW5kIGZvciBsZW5ndGggb2YgcnVuICovXG5cbiAgdmFyIF93aW4gPSBzLndpbmRvdztcblxuICBmb3IgKDs7KSB7XG4gICAgLyogTWFrZSBzdXJlIHRoYXQgd2UgYWx3YXlzIGhhdmUgZW5vdWdoIGxvb2thaGVhZCwgZXhjZXB0XG4gICAgICogYXQgdGhlIGVuZCBvZiB0aGUgaW5wdXQgZmlsZS4gV2UgbmVlZCBNQVhfTUFUQ0ggYnl0ZXNcbiAgICAgKiBmb3IgdGhlIGxvbmdlc3QgcnVuLCBwbHVzIG9uZSBmb3IgdGhlIHVucm9sbGVkIGxvb3AuXG4gICAgICovXG4gICAgaWYgKHMubG9va2FoZWFkIDw9IE1BWF9NQVRDSCkge1xuICAgICAgZmlsbF93aW5kb3cocyk7XG4gICAgICBpZiAocy5sb29rYWhlYWQgPD0gTUFYX01BVENIICYmIGZsdXNoID09PSBaX05PX0ZMVVNIKSB7XG4gICAgICAgIHJldHVybiBCU19ORUVEX01PUkU7XG4gICAgICB9XG4gICAgICBpZiAocy5sb29rYWhlYWQgPT09IDApIHtcbiAgICAgICAgYnJlYWs7XG4gICAgICB9IC8qIGZsdXNoIHRoZSBjdXJyZW50IGJsb2NrICovXG4gICAgfVxuXG4gICAgLyogU2VlIGhvdyBtYW55IHRpbWVzIHRoZSBwcmV2aW91cyBieXRlIHJlcGVhdHMgKi9cbiAgICBzLm1hdGNoX2xlbmd0aCA9IDA7XG4gICAgaWYgKHMubG9va2FoZWFkID49IE1JTl9NQVRDSCAmJiBzLnN0cnN0YXJ0ID4gMCkge1xuICAgICAgc2NhbiA9IHMuc3Ryc3RhcnQgLSAxO1xuICAgICAgcHJldiA9IF93aW5bc2Nhbl07XG4gICAgICBpZiAocHJldiA9PT0gX3dpblsrK3NjYW5dICYmIHByZXYgPT09IF93aW5bKytzY2FuXSAmJiBwcmV2ID09PSBfd2luWysrc2Nhbl0pIHtcbiAgICAgICAgc3RyZW5kID0gcy5zdHJzdGFydCArIE1BWF9NQVRDSDtcbiAgICAgICAgZG8ge1xuICAgICAgICAgIC8qanNoaW50IG5vZW1wdHk6ZmFsc2UqL1xuICAgICAgICB9IHdoaWxlIChwcmV2ID09PSBfd2luWysrc2Nhbl0gJiYgcHJldiA9PT0gX3dpblsrK3NjYW5dICYmXG4gICAgICAgICAgcHJldiA9PT0gX3dpblsrK3NjYW5dICYmIHByZXYgPT09IF93aW5bKytzY2FuXSAmJlxuICAgICAgICAgIHByZXYgPT09IF93aW5bKytzY2FuXSAmJiBwcmV2ID09PSBfd2luWysrc2Nhbl0gJiZcbiAgICAgICAgICBwcmV2ID09PSBfd2luWysrc2Nhbl0gJiYgcHJldiA9PT0gX3dpblsrK3NjYW5dICYmXG4gICAgICAgICAgc2NhbiA8IHN0cmVuZCk7XG4gICAgICAgIHMubWF0Y2hfbGVuZ3RoID0gTUFYX01BVENIIC0gKHN0cmVuZCAtIHNjYW4pO1xuICAgICAgICBpZiAocy5tYXRjaF9sZW5ndGggPiBzLmxvb2thaGVhZCkge1xuICAgICAgICAgIHMubWF0Y2hfbGVuZ3RoID0gcy5sb29rYWhlYWQ7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIC8vQXNzZXJ0KHNjYW4gPD0gcy0+d2luZG93Kyh1SW50KShzLT53aW5kb3dfc2l6ZS0xKSwgXCJ3aWxkIHNjYW5cIik7XG4gICAgfVxuXG4gICAgLyogRW1pdCBtYXRjaCBpZiBoYXZlIHJ1biBvZiBNSU5fTUFUQ0ggb3IgbG9uZ2VyLCBlbHNlIGVtaXQgbGl0ZXJhbCAqL1xuICAgIGlmIChzLm1hdGNoX2xlbmd0aCA+PSBNSU5fTUFUQ0gpIHtcbiAgICAgIC8vY2hlY2tfbWF0Y2gocywgcy5zdHJzdGFydCwgcy5zdHJzdGFydCAtIDEsIHMubWF0Y2hfbGVuZ3RoKTtcblxuICAgICAgLyoqKiBfdHJfdGFsbHlfZGlzdChzLCAxLCBzLm1hdGNoX2xlbmd0aCAtIE1JTl9NQVRDSCwgYmZsdXNoKTsgKioqL1xuICAgICAgYmZsdXNoID0gX3RyX3RhbGx5KHMsIDEsIHMubWF0Y2hfbGVuZ3RoIC0gTUlOX01BVENIKTtcblxuICAgICAgcy5sb29rYWhlYWQgLT0gcy5tYXRjaF9sZW5ndGg7XG4gICAgICBzLnN0cnN0YXJ0ICs9IHMubWF0Y2hfbGVuZ3RoO1xuICAgICAgcy5tYXRjaF9sZW5ndGggPSAwO1xuICAgIH0gZWxzZSB7XG4gICAgICAvKiBObyBtYXRjaCwgb3V0cHV0IGEgbGl0ZXJhbCBieXRlICovXG4gICAgICAvL1RyYWNldnYoKHN0ZGVycixcIiVjXCIsIHMtPndpbmRvd1tzLT5zdHJzdGFydF0pKTtcbiAgICAgIC8qKiogX3RyX3RhbGx5X2xpdChzLCBzLndpbmRvd1tzLnN0cnN0YXJ0XSwgYmZsdXNoKTsgKioqL1xuICAgICAgYmZsdXNoID0gX3RyX3RhbGx5KHMsIDAsIHMud2luZG93W3Muc3Ryc3RhcnRdKTtcblxuICAgICAgcy5sb29rYWhlYWQtLTtcbiAgICAgIHMuc3Ryc3RhcnQrKztcbiAgICB9XG4gICAgaWYgKGJmbHVzaCkge1xuICAgICAgLyoqKiBGTFVTSF9CTE9DSyhzLCAwKTsgKioqL1xuICAgICAgZmx1c2hfYmxvY2tfb25seShzLCBmYWxzZSk7XG4gICAgICBpZiAocy5zdHJtLmF2YWlsX291dCA9PT0gMCkge1xuICAgICAgICByZXR1cm4gQlNfTkVFRF9NT1JFO1xuICAgICAgfVxuICAgICAgLyoqKi9cbiAgICB9XG4gIH1cbiAgcy5pbnNlcnQgPSAwO1xuICBpZiAoZmx1c2ggPT09IFpfRklOSVNIKSB7XG4gICAgLyoqKiBGTFVTSF9CTE9DSyhzLCAxKTsgKioqL1xuICAgIGZsdXNoX2Jsb2NrX29ubHkocywgdHJ1ZSk7XG4gICAgaWYgKHMuc3RybS5hdmFpbF9vdXQgPT09IDApIHtcbiAgICAgIHJldHVybiBCU19GSU5JU0hfU1RBUlRFRDtcbiAgICB9XG4gICAgLyoqKi9cbiAgICByZXR1cm4gQlNfRklOSVNIX0RPTkU7XG4gIH1cbiAgaWYgKHMubGFzdF9saXQpIHtcbiAgICAvKioqIEZMVVNIX0JMT0NLKHMsIDApOyAqKiovXG4gICAgZmx1c2hfYmxvY2tfb25seShzLCBmYWxzZSk7XG4gICAgaWYgKHMuc3RybS5hdmFpbF9vdXQgPT09IDApIHtcbiAgICAgIHJldHVybiBCU19ORUVEX01PUkU7XG4gICAgfVxuICAgIC8qKiovXG4gIH1cbiAgcmV0dXJuIEJTX0JMT0NLX0RPTkU7XG59XG5cbi8qID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuICogRm9yIFpfSFVGRk1BTl9PTkxZLCBkbyBub3QgbG9vayBmb3IgbWF0Y2hlcy4gIERvIG5vdCBtYWludGFpbiBhIGhhc2ggdGFibGUuXG4gKiAoSXQgd2lsbCBiZSByZWdlbmVyYXRlZCBpZiB0aGlzIHJ1biBvZiBkZWZsYXRlIHN3aXRjaGVzIGF3YXkgZnJvbSBIdWZmbWFuLilcbiAqL1xuZnVuY3Rpb24gZGVmbGF0ZV9odWZmKHMsIGZsdXNoKSB7XG4gIHZhciBiZmx1c2g7IC8qIHNldCBpZiBjdXJyZW50IGJsb2NrIG11c3QgYmUgZmx1c2hlZCAqL1xuXG4gIGZvciAoOzspIHtcbiAgICAvKiBNYWtlIHN1cmUgdGhhdCB3ZSBoYXZlIGEgbGl0ZXJhbCB0byB3cml0ZS4gKi9cbiAgICBpZiAocy5sb29rYWhlYWQgPT09IDApIHtcbiAgICAgIGZpbGxfd2luZG93KHMpO1xuICAgICAgaWYgKHMubG9va2FoZWFkID09PSAwKSB7XG4gICAgICAgIGlmIChmbHVzaCA9PT0gWl9OT19GTFVTSCkge1xuICAgICAgICAgIHJldHVybiBCU19ORUVEX01PUkU7XG4gICAgICAgIH1cbiAgICAgICAgYnJlYWs7IC8qIGZsdXNoIHRoZSBjdXJyZW50IGJsb2NrICovXG4gICAgICB9XG4gICAgfVxuXG4gICAgLyogT3V0cHV0IGEgbGl0ZXJhbCBieXRlICovXG4gICAgcy5tYXRjaF9sZW5ndGggPSAwO1xuICAgIC8vVHJhY2V2digoc3RkZXJyLFwiJWNcIiwgcy0+d2luZG93W3MtPnN0cnN0YXJ0XSkpO1xuICAgIC8qKiogX3RyX3RhbGx5X2xpdChzLCBzLndpbmRvd1tzLnN0cnN0YXJ0XSwgYmZsdXNoKTsgKioqL1xuICAgIGJmbHVzaCA9IF90cl90YWxseShzLCAwLCBzLndpbmRvd1tzLnN0cnN0YXJ0XSk7XG4gICAgcy5sb29rYWhlYWQtLTtcbiAgICBzLnN0cnN0YXJ0Kys7XG4gICAgaWYgKGJmbHVzaCkge1xuICAgICAgLyoqKiBGTFVTSF9CTE9DSyhzLCAwKTsgKioqL1xuICAgICAgZmx1c2hfYmxvY2tfb25seShzLCBmYWxzZSk7XG4gICAgICBpZiAocy5zdHJtLmF2YWlsX291dCA9PT0gMCkge1xuICAgICAgICByZXR1cm4gQlNfTkVFRF9NT1JFO1xuICAgICAgfVxuICAgICAgLyoqKi9cbiAgICB9XG4gIH1cbiAgcy5pbnNlcnQgPSAwO1xuICBpZiAoZmx1c2ggPT09IFpfRklOSVNIKSB7XG4gICAgLyoqKiBGTFVTSF9CTE9DSyhzLCAxKTsgKioqL1xuICAgIGZsdXNoX2Jsb2NrX29ubHkocywgdHJ1ZSk7XG4gICAgaWYgKHMuc3RybS5hdmFpbF9vdXQgPT09IDApIHtcbiAgICAgIHJldHVybiBCU19GSU5JU0hfU1RBUlRFRDtcbiAgICB9XG4gICAgLyoqKi9cbiAgICByZXR1cm4gQlNfRklOSVNIX0RPTkU7XG4gIH1cbiAgaWYgKHMubGFzdF9saXQpIHtcbiAgICAvKioqIEZMVVNIX0JMT0NLKHMsIDApOyAqKiovXG4gICAgZmx1c2hfYmxvY2tfb25seShzLCBmYWxzZSk7XG4gICAgaWYgKHMuc3RybS5hdmFpbF9vdXQgPT09IDApIHtcbiAgICAgIHJldHVybiBCU19ORUVEX01PUkU7XG4gICAgfVxuICAgIC8qKiovXG4gIH1cbiAgcmV0dXJuIEJTX0JMT0NLX0RPTkU7XG59XG5cbi8qIFZhbHVlcyBmb3IgbWF4X2xhenlfbWF0Y2gsIGdvb2RfbWF0Y2ggYW5kIG1heF9jaGFpbl9sZW5ndGgsIGRlcGVuZGluZyBvblxuICogdGhlIGRlc2lyZWQgcGFjayBsZXZlbCAoMC4uOSkuIFRoZSB2YWx1ZXMgZ2l2ZW4gYmVsb3cgaGF2ZSBiZWVuIHR1bmVkIHRvXG4gKiBleGNsdWRlIHdvcnN0IGNhc2UgcGVyZm9ybWFuY2UgZm9yIHBhdGhvbG9naWNhbCBmaWxlcy4gQmV0dGVyIHZhbHVlcyBtYXkgYmVcbiAqIGZvdW5kIGZvciBzcGVjaWZpYyBmaWxlcy5cbiAqL1xuZnVuY3Rpb24gQ29uZmlnKGdvb2RfbGVuZ3RoLCBtYXhfbGF6eSwgbmljZV9sZW5ndGgsIG1heF9jaGFpbiwgZnVuYykge1xuICB0aGlzLmdvb2RfbGVuZ3RoID0gZ29vZF9sZW5ndGg7XG4gIHRoaXMubWF4X2xhenkgPSBtYXhfbGF6eTtcbiAgdGhpcy5uaWNlX2xlbmd0aCA9IG5pY2VfbGVuZ3RoO1xuICB0aGlzLm1heF9jaGFpbiA9IG1heF9jaGFpbjtcbiAgdGhpcy5mdW5jID0gZnVuYztcbn1cblxudmFyIGNvbmZpZ3VyYXRpb25fdGFibGU7XG5cbmNvbmZpZ3VyYXRpb25fdGFibGUgPSBbXG4gIC8qICAgICAgZ29vZCBsYXp5IG5pY2UgY2hhaW4gKi9cbiAgbmV3IENvbmZpZygwLCAwLCAwLCAwLCBkZWZsYXRlX3N0b3JlZCksIC8qIDAgc3RvcmUgb25seSAqL1xuICBuZXcgQ29uZmlnKDQsIDQsIDgsIDQsIGRlZmxhdGVfZmFzdCksIC8qIDEgbWF4IHNwZWVkLCBubyBsYXp5IG1hdGNoZXMgKi9cbiAgbmV3IENvbmZpZyg0LCA1LCAxNiwgOCwgZGVmbGF0ZV9mYXN0KSwgLyogMiAqL1xuICBuZXcgQ29uZmlnKDQsIDYsIDMyLCAzMiwgZGVmbGF0ZV9mYXN0KSwgLyogMyAqL1xuXG4gIG5ldyBDb25maWcoNCwgNCwgMTYsIDE2LCBkZWZsYXRlX3Nsb3cpLCAvKiA0IGxhenkgbWF0Y2hlcyAqL1xuICBuZXcgQ29uZmlnKDgsIDE2LCAzMiwgMzIsIGRlZmxhdGVfc2xvdyksIC8qIDUgKi9cbiAgbmV3IENvbmZpZyg4LCAxNiwgMTI4LCAxMjgsIGRlZmxhdGVfc2xvdyksIC8qIDYgKi9cbiAgbmV3IENvbmZpZyg4LCAzMiwgMTI4LCAyNTYsIGRlZmxhdGVfc2xvdyksIC8qIDcgKi9cbiAgbmV3IENvbmZpZygzMiwgMTI4LCAyNTgsIDEwMjQsIGRlZmxhdGVfc2xvdyksIC8qIDggKi9cbiAgbmV3IENvbmZpZygzMiwgMjU4LCAyNTgsIDQwOTYsIGRlZmxhdGVfc2xvdykgLyogOSBtYXggY29tcHJlc3Npb24gKi9cbl07XG5cblxuLyogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4gKiBJbml0aWFsaXplIHRoZSBcImxvbmdlc3QgbWF0Y2hcIiByb3V0aW5lcyBmb3IgYSBuZXcgemxpYiBzdHJlYW1cbiAqL1xuZnVuY3Rpb24gbG1faW5pdChzKSB7XG4gIHMud2luZG93X3NpemUgPSAyICogcy53X3NpemU7XG5cbiAgLyoqKiBDTEVBUl9IQVNIKHMpOyAqKiovXG4gIHplcm8ocy5oZWFkKTsgLy8gRmlsbCB3aXRoIE5JTCAoPSAwKTtcblxuICAvKiBTZXQgdGhlIGRlZmF1bHQgY29uZmlndXJhdGlvbiBwYXJhbWV0ZXJzOlxuICAgKi9cbiAgcy5tYXhfbGF6eV9tYXRjaCA9IGNvbmZpZ3VyYXRpb25fdGFibGVbcy5sZXZlbF0ubWF4X2xhenk7XG4gIHMuZ29vZF9tYXRjaCA9IGNvbmZpZ3VyYXRpb25fdGFibGVbcy5sZXZlbF0uZ29vZF9sZW5ndGg7XG4gIHMubmljZV9tYXRjaCA9IGNvbmZpZ3VyYXRpb25fdGFibGVbcy5sZXZlbF0ubmljZV9sZW5ndGg7XG4gIHMubWF4X2NoYWluX2xlbmd0aCA9IGNvbmZpZ3VyYXRpb25fdGFibGVbcy5sZXZlbF0ubWF4X2NoYWluO1xuXG4gIHMuc3Ryc3RhcnQgPSAwO1xuICBzLmJsb2NrX3N0YXJ0ID0gMDtcbiAgcy5sb29rYWhlYWQgPSAwO1xuICBzLmluc2VydCA9IDA7XG4gIHMubWF0Y2hfbGVuZ3RoID0gcy5wcmV2X2xlbmd0aCA9IE1JTl9NQVRDSCAtIDE7XG4gIHMubWF0Y2hfYXZhaWxhYmxlID0gMDtcbiAgcy5pbnNfaCA9IDA7XG59XG5cblxuZnVuY3Rpb24gRGVmbGF0ZVN0YXRlKCkge1xuICB0aGlzLnN0cm0gPSBudWxsOyAvKiBwb2ludGVyIGJhY2sgdG8gdGhpcyB6bGliIHN0cmVhbSAqL1xuICB0aGlzLnN0YXR1cyA9IDA7IC8qIGFzIHRoZSBuYW1lIGltcGxpZXMgKi9cbiAgdGhpcy5wZW5kaW5nX2J1ZiA9IG51bGw7IC8qIG91dHB1dCBzdGlsbCBwZW5kaW5nICovXG4gIHRoaXMucGVuZGluZ19idWZfc2l6ZSA9IDA7IC8qIHNpemUgb2YgcGVuZGluZ19idWYgKi9cbiAgdGhpcy5wZW5kaW5nX291dCA9IDA7IC8qIG5leHQgcGVuZGluZyBieXRlIHRvIG91dHB1dCB0byB0aGUgc3RyZWFtICovXG4gIHRoaXMucGVuZGluZyA9IDA7IC8qIG5iIG9mIGJ5dGVzIGluIHRoZSBwZW5kaW5nIGJ1ZmZlciAqL1xuICB0aGlzLndyYXAgPSAwOyAvKiBiaXQgMCB0cnVlIGZvciB6bGliLCBiaXQgMSB0cnVlIGZvciBnemlwICovXG4gIHRoaXMuZ3poZWFkID0gbnVsbDsgLyogZ3ppcCBoZWFkZXIgaW5mb3JtYXRpb24gdG8gd3JpdGUgKi9cbiAgdGhpcy5nemluZGV4ID0gMDsgLyogd2hlcmUgaW4gZXh0cmEsIG5hbWUsIG9yIGNvbW1lbnQgKi9cbiAgdGhpcy5tZXRob2QgPSBaX0RFRkxBVEVEOyAvKiBjYW4gb25seSBiZSBERUZMQVRFRCAqL1xuICB0aGlzLmxhc3RfZmx1c2ggPSAtMTsgLyogdmFsdWUgb2YgZmx1c2ggcGFyYW0gZm9yIHByZXZpb3VzIGRlZmxhdGUgY2FsbCAqL1xuXG4gIHRoaXMud19zaXplID0gMDsgLyogTFo3NyB3aW5kb3cgc2l6ZSAoMzJLIGJ5IGRlZmF1bHQpICovXG4gIHRoaXMud19iaXRzID0gMDsgLyogbG9nMih3X3NpemUpICAoOC4uMTYpICovXG4gIHRoaXMud19tYXNrID0gMDsgLyogd19zaXplIC0gMSAqL1xuXG4gIHRoaXMud2luZG93ID0gbnVsbDtcbiAgLyogU2xpZGluZyB3aW5kb3cuIElucHV0IGJ5dGVzIGFyZSByZWFkIGludG8gdGhlIHNlY29uZCBoYWxmIG9mIHRoZSB3aW5kb3csXG4gICAqIGFuZCBtb3ZlIHRvIHRoZSBmaXJzdCBoYWxmIGxhdGVyIHRvIGtlZXAgYSBkaWN0aW9uYXJ5IG9mIGF0IGxlYXN0IHdTaXplXG4gICAqIGJ5dGVzLiBXaXRoIHRoaXMgb3JnYW5pemF0aW9uLCBtYXRjaGVzIGFyZSBsaW1pdGVkIHRvIGEgZGlzdGFuY2Ugb2ZcbiAgICogd1NpemUtTUFYX01BVENIIGJ5dGVzLCBidXQgdGhpcyBlbnN1cmVzIHRoYXQgSU8gaXMgYWx3YXlzXG4gICAqIHBlcmZvcm1lZCB3aXRoIGEgbGVuZ3RoIG11bHRpcGxlIG9mIHRoZSBibG9jayBzaXplLlxuICAgKi9cblxuICB0aGlzLndpbmRvd19zaXplID0gMDtcbiAgLyogQWN0dWFsIHNpemUgb2Ygd2luZG93OiAyKndTaXplLCBleGNlcHQgd2hlbiB0aGUgdXNlciBpbnB1dCBidWZmZXJcbiAgICogaXMgZGlyZWN0bHkgdXNlZCBhcyBzbGlkaW5nIHdpbmRvdy5cbiAgICovXG5cbiAgdGhpcy5wcmV2ID0gbnVsbDtcbiAgLyogTGluayB0byBvbGRlciBzdHJpbmcgd2l0aCBzYW1lIGhhc2ggaW5kZXguIFRvIGxpbWl0IHRoZSBzaXplIG9mIHRoaXNcbiAgICogYXJyYXkgdG8gNjRLLCB0aGlzIGxpbmsgaXMgbWFpbnRhaW5lZCBvbmx5IGZvciB0aGUgbGFzdCAzMksgc3RyaW5ncy5cbiAgICogQW4gaW5kZXggaW4gdGhpcyBhcnJheSBpcyB0aHVzIGEgd2luZG93IGluZGV4IG1vZHVsbyAzMksuXG4gICAqL1xuXG4gIHRoaXMuaGVhZCA9IG51bGw7IC8qIEhlYWRzIG9mIHRoZSBoYXNoIGNoYWlucyBvciBOSUwuICovXG5cbiAgdGhpcy5pbnNfaCA9IDA7IC8qIGhhc2ggaW5kZXggb2Ygc3RyaW5nIHRvIGJlIGluc2VydGVkICovXG4gIHRoaXMuaGFzaF9zaXplID0gMDsgLyogbnVtYmVyIG9mIGVsZW1lbnRzIGluIGhhc2ggdGFibGUgKi9cbiAgdGhpcy5oYXNoX2JpdHMgPSAwOyAvKiBsb2cyKGhhc2hfc2l6ZSkgKi9cbiAgdGhpcy5oYXNoX21hc2sgPSAwOyAvKiBoYXNoX3NpemUtMSAqL1xuXG4gIHRoaXMuaGFzaF9zaGlmdCA9IDA7XG4gIC8qIE51bWJlciBvZiBiaXRzIGJ5IHdoaWNoIGluc19oIG11c3QgYmUgc2hpZnRlZCBhdCBlYWNoIGlucHV0XG4gICAqIHN0ZXAuIEl0IG11c3QgYmUgc3VjaCB0aGF0IGFmdGVyIE1JTl9NQVRDSCBzdGVwcywgdGhlIG9sZGVzdFxuICAgKiBieXRlIG5vIGxvbmdlciB0YWtlcyBwYXJ0IGluIHRoZSBoYXNoIGtleSwgdGhhdCBpczpcbiAgICogICBoYXNoX3NoaWZ0ICogTUlOX01BVENIID49IGhhc2hfYml0c1xuICAgKi9cblxuICB0aGlzLmJsb2NrX3N0YXJ0ID0gMDtcbiAgLyogV2luZG93IHBvc2l0aW9uIGF0IHRoZSBiZWdpbm5pbmcgb2YgdGhlIGN1cnJlbnQgb3V0cHV0IGJsb2NrLiBHZXRzXG4gICAqIG5lZ2F0aXZlIHdoZW4gdGhlIHdpbmRvdyBpcyBtb3ZlZCBiYWNrd2FyZHMuXG4gICAqL1xuXG4gIHRoaXMubWF0Y2hfbGVuZ3RoID0gMDsgLyogbGVuZ3RoIG9mIGJlc3QgbWF0Y2ggKi9cbiAgdGhpcy5wcmV2X21hdGNoID0gMDsgLyogcHJldmlvdXMgbWF0Y2ggKi9cbiAgdGhpcy5tYXRjaF9hdmFpbGFibGUgPSAwOyAvKiBzZXQgaWYgcHJldmlvdXMgbWF0Y2ggZXhpc3RzICovXG4gIHRoaXMuc3Ryc3RhcnQgPSAwOyAvKiBzdGFydCBvZiBzdHJpbmcgdG8gaW5zZXJ0ICovXG4gIHRoaXMubWF0Y2hfc3RhcnQgPSAwOyAvKiBzdGFydCBvZiBtYXRjaGluZyBzdHJpbmcgKi9cbiAgdGhpcy5sb29rYWhlYWQgPSAwOyAvKiBudW1iZXIgb2YgdmFsaWQgYnl0ZXMgYWhlYWQgaW4gd2luZG93ICovXG5cbiAgdGhpcy5wcmV2X2xlbmd0aCA9IDA7XG4gIC8qIExlbmd0aCBvZiB0aGUgYmVzdCBtYXRjaCBhdCBwcmV2aW91cyBzdGVwLiBNYXRjaGVzIG5vdCBncmVhdGVyIHRoYW4gdGhpc1xuICAgKiBhcmUgZGlzY2FyZGVkLiBUaGlzIGlzIHVzZWQgaW4gdGhlIGxhenkgbWF0Y2ggZXZhbHVhdGlvbi5cbiAgICovXG5cbiAgdGhpcy5tYXhfY2hhaW5fbGVuZ3RoID0gMDtcbiAgLyogVG8gc3BlZWQgdXAgZGVmbGF0aW9uLCBoYXNoIGNoYWlucyBhcmUgbmV2ZXIgc2VhcmNoZWQgYmV5b25kIHRoaXNcbiAgICogbGVuZ3RoLiAgQSBoaWdoZXIgbGltaXQgaW1wcm92ZXMgY29tcHJlc3Npb24gcmF0aW8gYnV0IGRlZ3JhZGVzIHRoZVxuICAgKiBzcGVlZC5cbiAgICovXG5cbiAgdGhpcy5tYXhfbGF6eV9tYXRjaCA9IDA7XG4gIC8qIEF0dGVtcHQgdG8gZmluZCBhIGJldHRlciBtYXRjaCBvbmx5IHdoZW4gdGhlIGN1cnJlbnQgbWF0Y2ggaXMgc3RyaWN0bHlcbiAgICogc21hbGxlciB0aGFuIHRoaXMgdmFsdWUuIFRoaXMgbWVjaGFuaXNtIGlzIHVzZWQgb25seSBmb3IgY29tcHJlc3Npb25cbiAgICogbGV2ZWxzID49IDQuXG4gICAqL1xuICAvLyBUaGF0J3MgYWxpYXMgdG8gbWF4X2xhenlfbWF0Y2gsIGRvbid0IHVzZSBkaXJlY3RseVxuICAvL3RoaXMubWF4X2luc2VydF9sZW5ndGggPSAwO1xuICAvKiBJbnNlcnQgbmV3IHN0cmluZ3MgaW4gdGhlIGhhc2ggdGFibGUgb25seSBpZiB0aGUgbWF0Y2ggbGVuZ3RoIGlzIG5vdFxuICAgKiBncmVhdGVyIHRoYW4gdGhpcyBsZW5ndGguIFRoaXMgc2F2ZXMgdGltZSBidXQgZGVncmFkZXMgY29tcHJlc3Npb24uXG4gICAqIG1heF9pbnNlcnRfbGVuZ3RoIGlzIHVzZWQgb25seSBmb3IgY29tcHJlc3Npb24gbGV2ZWxzIDw9IDMuXG4gICAqL1xuXG4gIHRoaXMubGV2ZWwgPSAwOyAvKiBjb21wcmVzc2lvbiBsZXZlbCAoMS4uOSkgKi9cbiAgdGhpcy5zdHJhdGVneSA9IDA7IC8qIGZhdm9yIG9yIGZvcmNlIEh1ZmZtYW4gY29kaW5nKi9cblxuICB0aGlzLmdvb2RfbWF0Y2ggPSAwO1xuICAvKiBVc2UgYSBmYXN0ZXIgc2VhcmNoIHdoZW4gdGhlIHByZXZpb3VzIG1hdGNoIGlzIGxvbmdlciB0aGFuIHRoaXMgKi9cblxuICB0aGlzLm5pY2VfbWF0Y2ggPSAwOyAvKiBTdG9wIHNlYXJjaGluZyB3aGVuIGN1cnJlbnQgbWF0Y2ggZXhjZWVkcyB0aGlzICovXG5cbiAgLyogdXNlZCBieSBjOiAqL1xuXG4gIC8qIERpZG4ndCB1c2UgY3RfZGF0YSB0eXBlZGVmIGJlbG93IHRvIHN1cHByZXNzIGNvbXBpbGVyIHdhcm5pbmcgKi9cblxuICAvLyBzdHJ1Y3QgY3RfZGF0YV9zIGR5bl9sdHJlZVtIRUFQX1NJWkVdOyAgIC8qIGxpdGVyYWwgYW5kIGxlbmd0aCB0cmVlICovXG4gIC8vIHN0cnVjdCBjdF9kYXRhX3MgZHluX2R0cmVlWzIqRF9DT0RFUysxXTsgLyogZGlzdGFuY2UgdHJlZSAqL1xuICAvLyBzdHJ1Y3QgY3RfZGF0YV9zIGJsX3RyZWVbMipCTF9DT0RFUysxXTsgIC8qIEh1ZmZtYW4gdHJlZSBmb3IgYml0IGxlbmd0aHMgKi9cblxuICAvLyBVc2UgZmxhdCBhcnJheSBvZiBET1VCTEUgc2l6ZSwgd2l0aCBpbnRlcmxlYXZlZCBmYXRhLFxuICAvLyBiZWNhdXNlIEpTIGRvZXMgbm90IHN1cHBvcnQgZWZmZWN0aXZlXG4gIHRoaXMuZHluX2x0cmVlID0gbmV3IEJ1ZjE2KEhFQVBfU0laRSAqIDIpO1xuICB0aGlzLmR5bl9kdHJlZSA9IG5ldyBCdWYxNigoMiAqIERfQ09ERVMgKyAxKSAqIDIpO1xuICB0aGlzLmJsX3RyZWUgPSBuZXcgQnVmMTYoKDIgKiBCTF9DT0RFUyArIDEpICogMik7XG4gIHplcm8odGhpcy5keW5fbHRyZWUpO1xuICB6ZXJvKHRoaXMuZHluX2R0cmVlKTtcbiAgemVybyh0aGlzLmJsX3RyZWUpO1xuXG4gIHRoaXMubF9kZXNjID0gbnVsbDsgLyogZGVzYy4gZm9yIGxpdGVyYWwgdHJlZSAqL1xuICB0aGlzLmRfZGVzYyA9IG51bGw7IC8qIGRlc2MuIGZvciBkaXN0YW5jZSB0cmVlICovXG4gIHRoaXMuYmxfZGVzYyA9IG51bGw7IC8qIGRlc2MuIGZvciBiaXQgbGVuZ3RoIHRyZWUgKi9cblxuICAvL3VzaCBibF9jb3VudFtNQVhfQklUUysxXTtcbiAgdGhpcy5ibF9jb3VudCA9IG5ldyBCdWYxNihNQVhfQklUUyArIDEpO1xuICAvKiBudW1iZXIgb2YgY29kZXMgYXQgZWFjaCBiaXQgbGVuZ3RoIGZvciBhbiBvcHRpbWFsIHRyZWUgKi9cblxuICAvL2ludCBoZWFwWzIqTF9DT0RFUysxXTsgICAgICAvKiBoZWFwIHVzZWQgdG8gYnVpbGQgdGhlIEh1ZmZtYW4gdHJlZXMgKi9cbiAgdGhpcy5oZWFwID0gbmV3IEJ1ZjE2KDIgKiBMX0NPREVTICsgMSk7IC8qIGhlYXAgdXNlZCB0byBidWlsZCB0aGUgSHVmZm1hbiB0cmVlcyAqL1xuICB6ZXJvKHRoaXMuaGVhcCk7XG5cbiAgdGhpcy5oZWFwX2xlbiA9IDA7IC8qIG51bWJlciBvZiBlbGVtZW50cyBpbiB0aGUgaGVhcCAqL1xuICB0aGlzLmhlYXBfbWF4ID0gMDsgLyogZWxlbWVudCBvZiBsYXJnZXN0IGZyZXF1ZW5jeSAqL1xuICAvKiBUaGUgc29ucyBvZiBoZWFwW25dIGFyZSBoZWFwWzIqbl0gYW5kIGhlYXBbMipuKzFdLiBoZWFwWzBdIGlzIG5vdCB1c2VkLlxuICAgKiBUaGUgc2FtZSBoZWFwIGFycmF5IGlzIHVzZWQgdG8gYnVpbGQgYWxsXG4gICAqL1xuXG4gIHRoaXMuZGVwdGggPSBuZXcgQnVmMTYoMiAqIExfQ09ERVMgKyAxKTsgLy91Y2ggZGVwdGhbMipMX0NPREVTKzFdO1xuICB6ZXJvKHRoaXMuZGVwdGgpO1xuICAvKiBEZXB0aCBvZiBlYWNoIHN1YnRyZWUgdXNlZCBhcyB0aWUgYnJlYWtlciBmb3IgdHJlZXMgb2YgZXF1YWwgZnJlcXVlbmN5XG4gICAqL1xuXG4gIHRoaXMubF9idWYgPSAwOyAvKiBidWZmZXIgaW5kZXggZm9yIGxpdGVyYWxzIG9yIGxlbmd0aHMgKi9cblxuICB0aGlzLmxpdF9idWZzaXplID0gMDtcbiAgLyogU2l6ZSBvZiBtYXRjaCBidWZmZXIgZm9yIGxpdGVyYWxzL2xlbmd0aHMuICBUaGVyZSBhcmUgNCByZWFzb25zIGZvclxuICAgKiBsaW1pdGluZyBsaXRfYnVmc2l6ZSB0byA2NEs6XG4gICAqICAgLSBmcmVxdWVuY2llcyBjYW4gYmUga2VwdCBpbiAxNiBiaXQgY291bnRlcnNcbiAgICogICAtIGlmIGNvbXByZXNzaW9uIGlzIG5vdCBzdWNjZXNzZnVsIGZvciB0aGUgZmlyc3QgYmxvY2ssIGFsbCBpbnB1dFxuICAgKiAgICAgZGF0YSBpcyBzdGlsbCBpbiB0aGUgd2luZG93IHNvIHdlIGNhbiBzdGlsbCBlbWl0IGEgc3RvcmVkIGJsb2NrIGV2ZW5cbiAgICogICAgIHdoZW4gaW5wdXQgY29tZXMgZnJvbSBzdGFuZGFyZCBpbnB1dC4gIChUaGlzIGNhbiBhbHNvIGJlIGRvbmUgZm9yXG4gICAqICAgICBhbGwgYmxvY2tzIGlmIGxpdF9idWZzaXplIGlzIG5vdCBncmVhdGVyIHRoYW4gMzJLLilcbiAgICogICAtIGlmIGNvbXByZXNzaW9uIGlzIG5vdCBzdWNjZXNzZnVsIGZvciBhIGZpbGUgc21hbGxlciB0aGFuIDY0Sywgd2UgY2FuXG4gICAqICAgICBldmVuIGVtaXQgYSBzdG9yZWQgZmlsZSBpbnN0ZWFkIG9mIGEgc3RvcmVkIGJsb2NrIChzYXZpbmcgNSBieXRlcykuXG4gICAqICAgICBUaGlzIGlzIGFwcGxpY2FibGUgb25seSBmb3IgemlwIChub3QgZ3ppcCBvciB6bGliKS5cbiAgICogICAtIGNyZWF0aW5nIG5ldyBIdWZmbWFuIHRyZWVzIGxlc3MgZnJlcXVlbnRseSBtYXkgbm90IHByb3ZpZGUgZmFzdFxuICAgKiAgICAgYWRhcHRhdGlvbiB0byBjaGFuZ2VzIGluIHRoZSBpbnB1dCBkYXRhIHN0YXRpc3RpY3MuIChUYWtlIGZvclxuICAgKiAgICAgZXhhbXBsZSBhIGJpbmFyeSBmaWxlIHdpdGggcG9vcmx5IGNvbXByZXNzaWJsZSBjb2RlIGZvbGxvd2VkIGJ5XG4gICAqICAgICBhIGhpZ2hseSBjb21wcmVzc2libGUgc3RyaW5nIHRhYmxlLikgU21hbGxlciBidWZmZXIgc2l6ZXMgZ2l2ZVxuICAgKiAgICAgZmFzdCBhZGFwdGF0aW9uIGJ1dCBoYXZlIG9mIGNvdXJzZSB0aGUgb3ZlcmhlYWQgb2YgdHJhbnNtaXR0aW5nXG4gICAqICAgICB0cmVlcyBtb3JlIGZyZXF1ZW50bHkuXG4gICAqICAgLSBJIGNhbid0IGNvdW50IGFib3ZlIDRcbiAgICovXG5cbiAgdGhpcy5sYXN0X2xpdCA9IDA7IC8qIHJ1bm5pbmcgaW5kZXggaW4gbF9idWYgKi9cblxuICB0aGlzLmRfYnVmID0gMDtcbiAgLyogQnVmZmVyIGluZGV4IGZvciBkaXN0YW5jZXMuIFRvIHNpbXBsaWZ5IHRoZSBjb2RlLCBkX2J1ZiBhbmQgbF9idWYgaGF2ZVxuICAgKiB0aGUgc2FtZSBudW1iZXIgb2YgZWxlbWVudHMuIFRvIHVzZSBkaWZmZXJlbnQgbGVuZ3RocywgYW4gZXh0cmEgZmxhZ1xuICAgKiBhcnJheSB3b3VsZCBiZSBuZWNlc3NhcnkuXG4gICAqL1xuXG4gIHRoaXMub3B0X2xlbiA9IDA7IC8qIGJpdCBsZW5ndGggb2YgY3VycmVudCBibG9jayB3aXRoIG9wdGltYWwgdHJlZXMgKi9cbiAgdGhpcy5zdGF0aWNfbGVuID0gMDsgLyogYml0IGxlbmd0aCBvZiBjdXJyZW50IGJsb2NrIHdpdGggc3RhdGljIHRyZWVzICovXG4gIHRoaXMubWF0Y2hlcyA9IDA7IC8qIG51bWJlciBvZiBzdHJpbmcgbWF0Y2hlcyBpbiBjdXJyZW50IGJsb2NrICovXG4gIHRoaXMuaW5zZXJ0ID0gMDsgLyogYnl0ZXMgYXQgZW5kIG9mIHdpbmRvdyBsZWZ0IHRvIGluc2VydCAqL1xuXG5cbiAgdGhpcy5iaV9idWYgPSAwO1xuICAvKiBPdXRwdXQgYnVmZmVyLiBiaXRzIGFyZSBpbnNlcnRlZCBzdGFydGluZyBhdCB0aGUgYm90dG9tIChsZWFzdFxuICAgKiBzaWduaWZpY2FudCBiaXRzKS5cbiAgICovXG4gIHRoaXMuYmlfdmFsaWQgPSAwO1xuICAvKiBOdW1iZXIgb2YgdmFsaWQgYml0cyBpbiBiaV9idWYuICBBbGwgYml0cyBhYm92ZSB0aGUgbGFzdCB2YWxpZCBiaXRcbiAgICogYXJlIGFsd2F5cyB6ZXJvLlxuICAgKi9cblxuICAvLyBVc2VkIGZvciB3aW5kb3cgbWVtb3J5IGluaXQuIFdlIHNhZmVseSBpZ25vcmUgaXQgZm9yIEpTLiBUaGF0IG1ha2VzXG4gIC8vIHNlbnNlIG9ubHkgZm9yIHBvaW50ZXJzIGFuZCBtZW1vcnkgY2hlY2sgdG9vbHMuXG4gIC8vdGhpcy5oaWdoX3dhdGVyID0gMDtcbiAgLyogSGlnaCB3YXRlciBtYXJrIG9mZnNldCBpbiB3aW5kb3cgZm9yIGluaXRpYWxpemVkIGJ5dGVzIC0tIGJ5dGVzIGFib3ZlXG4gICAqIHRoaXMgYXJlIHNldCB0byB6ZXJvIGluIG9yZGVyIHRvIGF2b2lkIG1lbW9yeSBjaGVjayB3YXJuaW5ncyB3aGVuXG4gICAqIGxvbmdlc3QgbWF0Y2ggcm91dGluZXMgYWNjZXNzIGJ5dGVzIHBhc3QgdGhlIGlucHV0LiAgVGhpcyBpcyB0aGVuXG4gICAqIHVwZGF0ZWQgdG8gdGhlIG5ldyBoaWdoIHdhdGVyIG1hcmsuXG4gICAqL1xufVxuXG5cbmV4cG9ydCBmdW5jdGlvbiBkZWZsYXRlUmVzZXRLZWVwKHN0cm0pIHtcbiAgdmFyIHM7XG5cbiAgaWYgKCFzdHJtIHx8ICFzdHJtLnN0YXRlKSB7XG4gICAgcmV0dXJuIGVycihzdHJtLCBaX1NUUkVBTV9FUlJPUik7XG4gIH1cblxuICBzdHJtLnRvdGFsX2luID0gc3RybS50b3RhbF9vdXQgPSAwO1xuICBzdHJtLmRhdGFfdHlwZSA9IFpfVU5LTk9XTjtcblxuICBzID0gc3RybS5zdGF0ZTtcbiAgcy5wZW5kaW5nID0gMDtcbiAgcy5wZW5kaW5nX291dCA9IDA7XG5cbiAgaWYgKHMud3JhcCA8IDApIHtcbiAgICBzLndyYXAgPSAtcy53cmFwO1xuICAgIC8qIHdhcyBtYWRlIG5lZ2F0aXZlIGJ5IGRlZmxhdGUoLi4uLCBaX0ZJTklTSCk7ICovXG4gIH1cbiAgcy5zdGF0dXMgPSAocy53cmFwID8gSU5JVF9TVEFURSA6IEJVU1lfU1RBVEUpO1xuICBzdHJtLmFkbGVyID0gKHMud3JhcCA9PT0gMikgP1xuICAgIDAgLy8gY3JjMzIoMCwgWl9OVUxMLCAwKVxuICAgIDpcbiAgICAxOyAvLyBhZGxlcjMyKDAsIFpfTlVMTCwgMClcbiAgcy5sYXN0X2ZsdXNoID0gWl9OT19GTFVTSDtcbiAgX3RyX2luaXQocyk7XG4gIHJldHVybiBaX09LO1xufVxuXG5cbmV4cG9ydCBmdW5jdGlvbiBkZWZsYXRlUmVzZXQoc3RybSkge1xuICB2YXIgcmV0ID0gZGVmbGF0ZVJlc2V0S2VlcChzdHJtKTtcbiAgaWYgKHJldCA9PT0gWl9PSykge1xuICAgIGxtX2luaXQoc3RybS5zdGF0ZSk7XG4gIH1cbiAgcmV0dXJuIHJldDtcbn1cblxuXG5leHBvcnQgZnVuY3Rpb24gZGVmbGF0ZVNldEhlYWRlcihzdHJtLCBoZWFkKSB7XG4gIGlmICghc3RybSB8fCAhc3RybS5zdGF0ZSkge1xuICAgIHJldHVybiBaX1NUUkVBTV9FUlJPUjtcbiAgfVxuICBpZiAoc3RybS5zdGF0ZS53cmFwICE9PSAyKSB7XG4gICAgcmV0dXJuIFpfU1RSRUFNX0VSUk9SO1xuICB9XG4gIHN0cm0uc3RhdGUuZ3poZWFkID0gaGVhZDtcbiAgcmV0dXJuIFpfT0s7XG59XG5cblxuZXhwb3J0IGZ1bmN0aW9uIGRlZmxhdGVJbml0MihzdHJtLCBsZXZlbCwgbWV0aG9kLCB3aW5kb3dCaXRzLCBtZW1MZXZlbCwgc3RyYXRlZ3kpIHtcbiAgaWYgKCFzdHJtKSB7IC8vID09PSBaX05VTExcbiAgICByZXR1cm4gWl9TVFJFQU1fRVJST1I7XG4gIH1cbiAgdmFyIHdyYXAgPSAxO1xuXG4gIGlmIChsZXZlbCA9PT0gWl9ERUZBVUxUX0NPTVBSRVNTSU9OKSB7XG4gICAgbGV2ZWwgPSA2O1xuICB9XG5cbiAgaWYgKHdpbmRvd0JpdHMgPCAwKSB7IC8qIHN1cHByZXNzIHpsaWIgd3JhcHBlciAqL1xuICAgIHdyYXAgPSAwO1xuICAgIHdpbmRvd0JpdHMgPSAtd2luZG93Qml0cztcbiAgfSBlbHNlIGlmICh3aW5kb3dCaXRzID4gMTUpIHtcbiAgICB3cmFwID0gMjsgLyogd3JpdGUgZ3ppcCB3cmFwcGVyIGluc3RlYWQgKi9cbiAgICB3aW5kb3dCaXRzIC09IDE2O1xuICB9XG5cblxuICBpZiAobWVtTGV2ZWwgPCAxIHx8IG1lbUxldmVsID4gTUFYX01FTV9MRVZFTCB8fCBtZXRob2QgIT09IFpfREVGTEFURUQgfHxcbiAgICB3aW5kb3dCaXRzIDwgOCB8fCB3aW5kb3dCaXRzID4gMTUgfHwgbGV2ZWwgPCAwIHx8IGxldmVsID4gOSB8fFxuICAgIHN0cmF0ZWd5IDwgMCB8fCBzdHJhdGVneSA+IFpfRklYRUQpIHtcbiAgICByZXR1cm4gZXJyKHN0cm0sIFpfU1RSRUFNX0VSUk9SKTtcbiAgfVxuXG5cbiAgaWYgKHdpbmRvd0JpdHMgPT09IDgpIHtcbiAgICB3aW5kb3dCaXRzID0gOTtcbiAgfVxuICAvKiB1bnRpbCAyNTYtYnl0ZSB3aW5kb3cgYnVnIGZpeGVkICovXG5cbiAgdmFyIHMgPSBuZXcgRGVmbGF0ZVN0YXRlKCk7XG5cbiAgc3RybS5zdGF0ZSA9IHM7XG4gIHMuc3RybSA9IHN0cm07XG5cbiAgcy53cmFwID0gd3JhcDtcbiAgcy5nemhlYWQgPSBudWxsO1xuICBzLndfYml0cyA9IHdpbmRvd0JpdHM7XG4gIHMud19zaXplID0gMSA8PCBzLndfYml0cztcbiAgcy53X21hc2sgPSBzLndfc2l6ZSAtIDE7XG5cbiAgcy5oYXNoX2JpdHMgPSBtZW1MZXZlbCArIDc7XG4gIHMuaGFzaF9zaXplID0gMSA8PCBzLmhhc2hfYml0cztcbiAgcy5oYXNoX21hc2sgPSBzLmhhc2hfc2l6ZSAtIDE7XG4gIHMuaGFzaF9zaGlmdCA9IH5+KChzLmhhc2hfYml0cyArIE1JTl9NQVRDSCAtIDEpIC8gTUlOX01BVENIKTtcblxuICBzLndpbmRvdyA9IG5ldyBCdWY4KHMud19zaXplICogMik7XG4gIHMuaGVhZCA9IG5ldyBCdWYxNihzLmhhc2hfc2l6ZSk7XG4gIHMucHJldiA9IG5ldyBCdWYxNihzLndfc2l6ZSk7XG5cbiAgLy8gRG9uJ3QgbmVlZCBtZW0gaW5pdCBtYWdpYyBmb3IgSlMuXG4gIC8vcy5oaWdoX3dhdGVyID0gMDsgIC8qIG5vdGhpbmcgd3JpdHRlbiB0byBzLT53aW5kb3cgeWV0ICovXG5cbiAgcy5saXRfYnVmc2l6ZSA9IDEgPDwgKG1lbUxldmVsICsgNik7IC8qIDE2SyBlbGVtZW50cyBieSBkZWZhdWx0ICovXG5cbiAgcy5wZW5kaW5nX2J1Zl9zaXplID0gcy5saXRfYnVmc2l6ZSAqIDQ7XG5cbiAgLy9vdmVybGF5ID0gKHVzaGYgKikgWkFMTE9DKHN0cm0sIHMtPmxpdF9idWZzaXplLCBzaXplb2YodXNoKSsyKTtcbiAgLy9zLT5wZW5kaW5nX2J1ZiA9ICh1Y2hmICopIG92ZXJsYXk7XG4gIHMucGVuZGluZ19idWYgPSBuZXcgQnVmOChzLnBlbmRpbmdfYnVmX3NpemUpO1xuXG4gIC8vIEl0IGlzIG9mZnNldCBmcm9tIGBzLnBlbmRpbmdfYnVmYCAoc2l6ZSBpcyBgcy5saXRfYnVmc2l6ZSAqIDJgKVxuICAvL3MtPmRfYnVmID0gb3ZlcmxheSArIHMtPmxpdF9idWZzaXplL3NpemVvZih1c2gpO1xuICBzLmRfYnVmID0gMSAqIHMubGl0X2J1ZnNpemU7XG5cbiAgLy9zLT5sX2J1ZiA9IHMtPnBlbmRpbmdfYnVmICsgKDErc2l6ZW9mKHVzaCkpKnMtPmxpdF9idWZzaXplO1xuICBzLmxfYnVmID0gKDEgKyAyKSAqIHMubGl0X2J1ZnNpemU7XG5cbiAgcy5sZXZlbCA9IGxldmVsO1xuICBzLnN0cmF0ZWd5ID0gc3RyYXRlZ3k7XG4gIHMubWV0aG9kID0gbWV0aG9kO1xuXG4gIHJldHVybiBkZWZsYXRlUmVzZXQoc3RybSk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBkZWZsYXRlSW5pdChzdHJtLCBsZXZlbCkge1xuICByZXR1cm4gZGVmbGF0ZUluaXQyKHN0cm0sIGxldmVsLCBaX0RFRkxBVEVELCBNQVhfV0JJVFMsIERFRl9NRU1fTEVWRUwsIFpfREVGQVVMVF9TVFJBVEVHWSk7XG59XG5cblxuZXhwb3J0IGZ1bmN0aW9uIGRlZmxhdGUoc3RybSwgZmx1c2gpIHtcbiAgdmFyIG9sZF9mbHVzaCwgcztcbiAgdmFyIGJlZywgdmFsOyAvLyBmb3IgZ3ppcCBoZWFkZXIgd3JpdGUgb25seVxuXG4gIGlmICghc3RybSB8fCAhc3RybS5zdGF0ZSB8fFxuICAgIGZsdXNoID4gWl9CTE9DSyB8fCBmbHVzaCA8IDApIHtcbiAgICByZXR1cm4gc3RybSA/IGVycihzdHJtLCBaX1NUUkVBTV9FUlJPUikgOiBaX1NUUkVBTV9FUlJPUjtcbiAgfVxuXG4gIHMgPSBzdHJtLnN0YXRlO1xuXG4gIGlmICghc3RybS5vdXRwdXQgfHxcbiAgICAoIXN0cm0uaW5wdXQgJiYgc3RybS5hdmFpbF9pbiAhPT0gMCkgfHxcbiAgICAocy5zdGF0dXMgPT09IEZJTklTSF9TVEFURSAmJiBmbHVzaCAhPT0gWl9GSU5JU0gpKSB7XG4gICAgcmV0dXJuIGVycihzdHJtLCAoc3RybS5hdmFpbF9vdXQgPT09IDApID8gWl9CVUZfRVJST1IgOiBaX1NUUkVBTV9FUlJPUik7XG4gIH1cblxuICBzLnN0cm0gPSBzdHJtOyAvKiBqdXN0IGluIGNhc2UgKi9cbiAgb2xkX2ZsdXNoID0gcy5sYXN0X2ZsdXNoO1xuICBzLmxhc3RfZmx1c2ggPSBmbHVzaDtcblxuICAvKiBXcml0ZSB0aGUgaGVhZGVyICovXG4gIGlmIChzLnN0YXR1cyA9PT0gSU5JVF9TVEFURSkge1xuICAgIGlmIChzLndyYXAgPT09IDIpIHtcbiAgICAgIC8vIEdaSVAgaGVhZGVyXG4gICAgICBzdHJtLmFkbGVyID0gMDsgLy9jcmMzMigwTCwgWl9OVUxMLCAwKTtcbiAgICAgIHB1dF9ieXRlKHMsIDMxKTtcbiAgICAgIHB1dF9ieXRlKHMsIDEzOSk7XG4gICAgICBwdXRfYnl0ZShzLCA4KTtcbiAgICAgIGlmICghcy5nemhlYWQpIHsgLy8gcy0+Z3poZWFkID09IFpfTlVMTFxuICAgICAgICBwdXRfYnl0ZShzLCAwKTtcbiAgICAgICAgcHV0X2J5dGUocywgMCk7XG4gICAgICAgIHB1dF9ieXRlKHMsIDApO1xuICAgICAgICBwdXRfYnl0ZShzLCAwKTtcbiAgICAgICAgcHV0X2J5dGUocywgMCk7XG4gICAgICAgIHB1dF9ieXRlKHMsIHMubGV2ZWwgPT09IDkgPyAyIDpcbiAgICAgICAgICAocy5zdHJhdGVneSA+PSBaX0hVRkZNQU5fT05MWSB8fCBzLmxldmVsIDwgMiA/XG4gICAgICAgICAgICA0IDogMCkpO1xuICAgICAgICBwdXRfYnl0ZShzLCBPU19DT0RFKTtcbiAgICAgICAgcy5zdGF0dXMgPSBCVVNZX1NUQVRFO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcHV0X2J5dGUocywgKHMuZ3poZWFkLnRleHQgPyAxIDogMCkgK1xuICAgICAgICAgIChzLmd6aGVhZC5oY3JjID8gMiA6IDApICtcbiAgICAgICAgICAoIXMuZ3poZWFkLmV4dHJhID8gMCA6IDQpICtcbiAgICAgICAgICAoIXMuZ3poZWFkLm5hbWUgPyAwIDogOCkgK1xuICAgICAgICAgICghcy5nemhlYWQuY29tbWVudCA/IDAgOiAxNilcbiAgICAgICAgKTtcbiAgICAgICAgcHV0X2J5dGUocywgcy5nemhlYWQudGltZSAmIDB4ZmYpO1xuICAgICAgICBwdXRfYnl0ZShzLCAocy5nemhlYWQudGltZSA+PiA4KSAmIDB4ZmYpO1xuICAgICAgICBwdXRfYnl0ZShzLCAocy5nemhlYWQudGltZSA+PiAxNikgJiAweGZmKTtcbiAgICAgICAgcHV0X2J5dGUocywgKHMuZ3poZWFkLnRpbWUgPj4gMjQpICYgMHhmZik7XG4gICAgICAgIHB1dF9ieXRlKHMsIHMubGV2ZWwgPT09IDkgPyAyIDpcbiAgICAgICAgICAocy5zdHJhdGVneSA+PSBaX0hVRkZNQU5fT05MWSB8fCBzLmxldmVsIDwgMiA/XG4gICAgICAgICAgICA0IDogMCkpO1xuICAgICAgICBwdXRfYnl0ZShzLCBzLmd6aGVhZC5vcyAmIDB4ZmYpO1xuICAgICAgICBpZiAocy5nemhlYWQuZXh0cmEgJiYgcy5nemhlYWQuZXh0cmEubGVuZ3RoKSB7XG4gICAgICAgICAgcHV0X2J5dGUocywgcy5nemhlYWQuZXh0cmEubGVuZ3RoICYgMHhmZik7XG4gICAgICAgICAgcHV0X2J5dGUocywgKHMuZ3poZWFkLmV4dHJhLmxlbmd0aCA+PiA4KSAmIDB4ZmYpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChzLmd6aGVhZC5oY3JjKSB7XG4gICAgICAgICAgc3RybS5hZGxlciA9IGNyYzMyKHN0cm0uYWRsZXIsIHMucGVuZGluZ19idWYsIHMucGVuZGluZywgMCk7XG4gICAgICAgIH1cbiAgICAgICAgcy5nemluZGV4ID0gMDtcbiAgICAgICAgcy5zdGF0dXMgPSBFWFRSQV9TVEFURTtcbiAgICAgIH1cbiAgICB9IGVsc2UgLy8gREVGTEFURSBoZWFkZXJcbiAgICB7XG4gICAgICB2YXIgaGVhZGVyID0gKFpfREVGTEFURUQgKyAoKHMud19iaXRzIC0gOCkgPDwgNCkpIDw8IDg7XG4gICAgICB2YXIgbGV2ZWxfZmxhZ3MgPSAtMTtcblxuICAgICAgaWYgKHMuc3RyYXRlZ3kgPj0gWl9IVUZGTUFOX09OTFkgfHwgcy5sZXZlbCA8IDIpIHtcbiAgICAgICAgbGV2ZWxfZmxhZ3MgPSAwO1xuICAgICAgfSBlbHNlIGlmIChzLmxldmVsIDwgNikge1xuICAgICAgICBsZXZlbF9mbGFncyA9IDE7XG4gICAgICB9IGVsc2UgaWYgKHMubGV2ZWwgPT09IDYpIHtcbiAgICAgICAgbGV2ZWxfZmxhZ3MgPSAyO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgbGV2ZWxfZmxhZ3MgPSAzO1xuICAgICAgfVxuICAgICAgaGVhZGVyIHw9IChsZXZlbF9mbGFncyA8PCA2KTtcbiAgICAgIGlmIChzLnN0cnN0YXJ0ICE9PSAwKSB7XG4gICAgICAgIGhlYWRlciB8PSBQUkVTRVRfRElDVDtcbiAgICAgIH1cbiAgICAgIGhlYWRlciArPSAzMSAtIChoZWFkZXIgJSAzMSk7XG5cbiAgICAgIHMuc3RhdHVzID0gQlVTWV9TVEFURTtcbiAgICAgIHB1dFNob3J0TVNCKHMsIGhlYWRlcik7XG5cbiAgICAgIC8qIFNhdmUgdGhlIGFkbGVyMzIgb2YgdGhlIHByZXNldCBkaWN0aW9uYXJ5OiAqL1xuICAgICAgaWYgKHMuc3Ryc3RhcnQgIT09IDApIHtcbiAgICAgICAgcHV0U2hvcnRNU0Iocywgc3RybS5hZGxlciA+Pj4gMTYpO1xuICAgICAgICBwdXRTaG9ydE1TQihzLCBzdHJtLmFkbGVyICYgMHhmZmZmKTtcbiAgICAgIH1cbiAgICAgIHN0cm0uYWRsZXIgPSAxOyAvLyBhZGxlcjMyKDBMLCBaX05VTEwsIDApO1xuICAgIH1cbiAgfVxuXG4gIC8vI2lmZGVmIEdaSVBcbiAgaWYgKHMuc3RhdHVzID09PSBFWFRSQV9TVEFURSkge1xuICAgIGlmIChzLmd6aGVhZC5leHRyYSAvKiAhPSBaX05VTEwqLyApIHtcbiAgICAgIGJlZyA9IHMucGVuZGluZzsgLyogc3RhcnQgb2YgYnl0ZXMgdG8gdXBkYXRlIGNyYyAqL1xuXG4gICAgICB3aGlsZSAocy5nemluZGV4IDwgKHMuZ3poZWFkLmV4dHJhLmxlbmd0aCAmIDB4ZmZmZikpIHtcbiAgICAgICAgaWYgKHMucGVuZGluZyA9PT0gcy5wZW5kaW5nX2J1Zl9zaXplKSB7XG4gICAgICAgICAgaWYgKHMuZ3poZWFkLmhjcmMgJiYgcy5wZW5kaW5nID4gYmVnKSB7XG4gICAgICAgICAgICBzdHJtLmFkbGVyID0gY3JjMzIoc3RybS5hZGxlciwgcy5wZW5kaW5nX2J1Ziwgcy5wZW5kaW5nIC0gYmVnLCBiZWcpO1xuICAgICAgICAgIH1cbiAgICAgICAgICBmbHVzaF9wZW5kaW5nKHN0cm0pO1xuICAgICAgICAgIGJlZyA9IHMucGVuZGluZztcbiAgICAgICAgICBpZiAocy5wZW5kaW5nID09PSBzLnBlbmRpbmdfYnVmX3NpemUpIHtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBwdXRfYnl0ZShzLCBzLmd6aGVhZC5leHRyYVtzLmd6aW5kZXhdICYgMHhmZik7XG4gICAgICAgIHMuZ3ppbmRleCsrO1xuICAgICAgfVxuICAgICAgaWYgKHMuZ3poZWFkLmhjcmMgJiYgcy5wZW5kaW5nID4gYmVnKSB7XG4gICAgICAgIHN0cm0uYWRsZXIgPSBjcmMzMihzdHJtLmFkbGVyLCBzLnBlbmRpbmdfYnVmLCBzLnBlbmRpbmcgLSBiZWcsIGJlZyk7XG4gICAgICB9XG4gICAgICBpZiAocy5nemluZGV4ID09PSBzLmd6aGVhZC5leHRyYS5sZW5ndGgpIHtcbiAgICAgICAgcy5nemluZGV4ID0gMDtcbiAgICAgICAgcy5zdGF0dXMgPSBOQU1FX1NUQVRFO1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICBzLnN0YXR1cyA9IE5BTUVfU1RBVEU7XG4gICAgfVxuICB9XG4gIGlmIChzLnN0YXR1cyA9PT0gTkFNRV9TVEFURSkge1xuICAgIGlmIChzLmd6aGVhZC5uYW1lIC8qICE9IFpfTlVMTCovICkge1xuICAgICAgYmVnID0gcy5wZW5kaW5nOyAvKiBzdGFydCBvZiBieXRlcyB0byB1cGRhdGUgY3JjICovXG4gICAgICAvL2ludCB2YWw7XG5cbiAgICAgIGRvIHtcbiAgICAgICAgaWYgKHMucGVuZGluZyA9PT0gcy5wZW5kaW5nX2J1Zl9zaXplKSB7XG4gICAgICAgICAgaWYgKHMuZ3poZWFkLmhjcmMgJiYgcy5wZW5kaW5nID4gYmVnKSB7XG4gICAgICAgICAgICBzdHJtLmFkbGVyID0gY3JjMzIoc3RybS5hZGxlciwgcy5wZW5kaW5nX2J1Ziwgcy5wZW5kaW5nIC0gYmVnLCBiZWcpO1xuICAgICAgICAgIH1cbiAgICAgICAgICBmbHVzaF9wZW5kaW5nKHN0cm0pO1xuICAgICAgICAgIGJlZyA9IHMucGVuZGluZztcbiAgICAgICAgICBpZiAocy5wZW5kaW5nID09PSBzLnBlbmRpbmdfYnVmX3NpemUpIHtcbiAgICAgICAgICAgIHZhbCA9IDE7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgLy8gSlMgc3BlY2lmaWM6IGxpdHRsZSBtYWdpYyB0byBhZGQgemVybyB0ZXJtaW5hdG9yIHRvIGVuZCBvZiBzdHJpbmdcbiAgICAgICAgaWYgKHMuZ3ppbmRleCA8IHMuZ3poZWFkLm5hbWUubGVuZ3RoKSB7XG4gICAgICAgICAgdmFsID0gcy5nemhlYWQubmFtZS5jaGFyQ29kZUF0KHMuZ3ppbmRleCsrKSAmIDB4ZmY7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdmFsID0gMDtcbiAgICAgICAgfVxuICAgICAgICBwdXRfYnl0ZShzLCB2YWwpO1xuICAgICAgfSB3aGlsZSAodmFsICE9PSAwKTtcblxuICAgICAgaWYgKHMuZ3poZWFkLmhjcmMgJiYgcy5wZW5kaW5nID4gYmVnKSB7XG4gICAgICAgIHN0cm0uYWRsZXIgPSBjcmMzMihzdHJtLmFkbGVyLCBzLnBlbmRpbmdfYnVmLCBzLnBlbmRpbmcgLSBiZWcsIGJlZyk7XG4gICAgICB9XG4gICAgICBpZiAodmFsID09PSAwKSB7XG4gICAgICAgIHMuZ3ppbmRleCA9IDA7XG4gICAgICAgIHMuc3RhdHVzID0gQ09NTUVOVF9TVEFURTtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgcy5zdGF0dXMgPSBDT01NRU5UX1NUQVRFO1xuICAgIH1cbiAgfVxuICBpZiAocy5zdGF0dXMgPT09IENPTU1FTlRfU1RBVEUpIHtcbiAgICBpZiAocy5nemhlYWQuY29tbWVudCAvKiAhPSBaX05VTEwqLyApIHtcbiAgICAgIGJlZyA9IHMucGVuZGluZzsgLyogc3RhcnQgb2YgYnl0ZXMgdG8gdXBkYXRlIGNyYyAqL1xuICAgICAgLy9pbnQgdmFsO1xuXG4gICAgICBkbyB7XG4gICAgICAgIGlmIChzLnBlbmRpbmcgPT09IHMucGVuZGluZ19idWZfc2l6ZSkge1xuICAgICAgICAgIGlmIChzLmd6aGVhZC5oY3JjICYmIHMucGVuZGluZyA+IGJlZykge1xuICAgICAgICAgICAgc3RybS5hZGxlciA9IGNyYzMyKHN0cm0uYWRsZXIsIHMucGVuZGluZ19idWYsIHMucGVuZGluZyAtIGJlZywgYmVnKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgZmx1c2hfcGVuZGluZyhzdHJtKTtcbiAgICAgICAgICBiZWcgPSBzLnBlbmRpbmc7XG4gICAgICAgICAgaWYgKHMucGVuZGluZyA9PT0gcy5wZW5kaW5nX2J1Zl9zaXplKSB7XG4gICAgICAgICAgICB2YWwgPSAxO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIC8vIEpTIHNwZWNpZmljOiBsaXR0bGUgbWFnaWMgdG8gYWRkIHplcm8gdGVybWluYXRvciB0byBlbmQgb2Ygc3RyaW5nXG4gICAgICAgIGlmIChzLmd6aW5kZXggPCBzLmd6aGVhZC5jb21tZW50Lmxlbmd0aCkge1xuICAgICAgICAgIHZhbCA9IHMuZ3poZWFkLmNvbW1lbnQuY2hhckNvZGVBdChzLmd6aW5kZXgrKykgJiAweGZmO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHZhbCA9IDA7XG4gICAgICAgIH1cbiAgICAgICAgcHV0X2J5dGUocywgdmFsKTtcbiAgICAgIH0gd2hpbGUgKHZhbCAhPT0gMCk7XG5cbiAgICAgIGlmIChzLmd6aGVhZC5oY3JjICYmIHMucGVuZGluZyA+IGJlZykge1xuICAgICAgICBzdHJtLmFkbGVyID0gY3JjMzIoc3RybS5hZGxlciwgcy5wZW5kaW5nX2J1Ziwgcy5wZW5kaW5nIC0gYmVnLCBiZWcpO1xuICAgICAgfVxuICAgICAgaWYgKHZhbCA9PT0gMCkge1xuICAgICAgICBzLnN0YXR1cyA9IEhDUkNfU1RBVEU7XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIHMuc3RhdHVzID0gSENSQ19TVEFURTtcbiAgICB9XG4gIH1cbiAgaWYgKHMuc3RhdHVzID09PSBIQ1JDX1NUQVRFKSB7XG4gICAgaWYgKHMuZ3poZWFkLmhjcmMpIHtcbiAgICAgIGlmIChzLnBlbmRpbmcgKyAyID4gcy5wZW5kaW5nX2J1Zl9zaXplKSB7XG4gICAgICAgIGZsdXNoX3BlbmRpbmcoc3RybSk7XG4gICAgICB9XG4gICAgICBpZiAocy5wZW5kaW5nICsgMiA8PSBzLnBlbmRpbmdfYnVmX3NpemUpIHtcbiAgICAgICAgcHV0X2J5dGUocywgc3RybS5hZGxlciAmIDB4ZmYpO1xuICAgICAgICBwdXRfYnl0ZShzLCAoc3RybS5hZGxlciA+PiA4KSAmIDB4ZmYpO1xuICAgICAgICBzdHJtLmFkbGVyID0gMDsgLy9jcmMzMigwTCwgWl9OVUxMLCAwKTtcbiAgICAgICAgcy5zdGF0dXMgPSBCVVNZX1NUQVRFO1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICBzLnN0YXR1cyA9IEJVU1lfU1RBVEU7XG4gICAgfVxuICB9XG4gIC8vI2VuZGlmXG5cbiAgLyogRmx1c2ggYXMgbXVjaCBwZW5kaW5nIG91dHB1dCBhcyBwb3NzaWJsZSAqL1xuICBpZiAocy5wZW5kaW5nICE9PSAwKSB7XG4gICAgZmx1c2hfcGVuZGluZyhzdHJtKTtcbiAgICBpZiAoc3RybS5hdmFpbF9vdXQgPT09IDApIHtcbiAgICAgIC8qIFNpbmNlIGF2YWlsX291dCBpcyAwLCBkZWZsYXRlIHdpbGwgYmUgY2FsbGVkIGFnYWluIHdpdGhcbiAgICAgICAqIG1vcmUgb3V0cHV0IHNwYWNlLCBidXQgcG9zc2libHkgd2l0aCBib3RoIHBlbmRpbmcgYW5kXG4gICAgICAgKiBhdmFpbF9pbiBlcXVhbCB0byB6ZXJvLiBUaGVyZSB3b24ndCBiZSBhbnl0aGluZyB0byBkbyxcbiAgICAgICAqIGJ1dCB0aGlzIGlzIG5vdCBhbiBlcnJvciBzaXR1YXRpb24gc28gbWFrZSBzdXJlIHdlXG4gICAgICAgKiByZXR1cm4gT0sgaW5zdGVhZCBvZiBCVUZfRVJST1IgYXQgbmV4dCBjYWxsIG9mIGRlZmxhdGU6XG4gICAgICAgKi9cbiAgICAgIHMubGFzdF9mbHVzaCA9IC0xO1xuICAgICAgcmV0dXJuIFpfT0s7XG4gICAgfVxuXG4gICAgLyogTWFrZSBzdXJlIHRoZXJlIGlzIHNvbWV0aGluZyB0byBkbyBhbmQgYXZvaWQgZHVwbGljYXRlIGNvbnNlY3V0aXZlXG4gICAgICogZmx1c2hlcy4gRm9yIHJlcGVhdGVkIGFuZCB1c2VsZXNzIGNhbGxzIHdpdGggWl9GSU5JU0gsIHdlIGtlZXBcbiAgICAgKiByZXR1cm5pbmcgWl9TVFJFQU1fRU5EIGluc3RlYWQgb2YgWl9CVUZfRVJST1IuXG4gICAgICovXG4gIH0gZWxzZSBpZiAoc3RybS5hdmFpbF9pbiA9PT0gMCAmJiByYW5rKGZsdXNoKSA8PSByYW5rKG9sZF9mbHVzaCkgJiZcbiAgICBmbHVzaCAhPT0gWl9GSU5JU0gpIHtcbiAgICByZXR1cm4gZXJyKHN0cm0sIFpfQlVGX0VSUk9SKTtcbiAgfVxuXG4gIC8qIFVzZXIgbXVzdCBub3QgcHJvdmlkZSBtb3JlIGlucHV0IGFmdGVyIHRoZSBmaXJzdCBGSU5JU0g6ICovXG4gIGlmIChzLnN0YXR1cyA9PT0gRklOSVNIX1NUQVRFICYmIHN0cm0uYXZhaWxfaW4gIT09IDApIHtcbiAgICByZXR1cm4gZXJyKHN0cm0sIFpfQlVGX0VSUk9SKTtcbiAgfVxuXG4gIC8qIFN0YXJ0IGEgbmV3IGJsb2NrIG9yIGNvbnRpbnVlIHRoZSBjdXJyZW50IG9uZS5cbiAgICovXG4gIGlmIChzdHJtLmF2YWlsX2luICE9PSAwIHx8IHMubG9va2FoZWFkICE9PSAwIHx8XG4gICAgKGZsdXNoICE9PSBaX05PX0ZMVVNIICYmIHMuc3RhdHVzICE9PSBGSU5JU0hfU1RBVEUpKSB7XG4gICAgdmFyIGJzdGF0ZSA9IChzLnN0cmF0ZWd5ID09PSBaX0hVRkZNQU5fT05MWSkgPyBkZWZsYXRlX2h1ZmYocywgZmx1c2gpIDpcbiAgICAgIChzLnN0cmF0ZWd5ID09PSBaX1JMRSA/IGRlZmxhdGVfcmxlKHMsIGZsdXNoKSA6XG4gICAgICAgIGNvbmZpZ3VyYXRpb25fdGFibGVbcy5sZXZlbF0uZnVuYyhzLCBmbHVzaCkpO1xuXG4gICAgaWYgKGJzdGF0ZSA9PT0gQlNfRklOSVNIX1NUQVJURUQgfHwgYnN0YXRlID09PSBCU19GSU5JU0hfRE9ORSkge1xuICAgICAgcy5zdGF0dXMgPSBGSU5JU0hfU1RBVEU7XG4gICAgfVxuICAgIGlmIChic3RhdGUgPT09IEJTX05FRURfTU9SRSB8fCBic3RhdGUgPT09IEJTX0ZJTklTSF9TVEFSVEVEKSB7XG4gICAgICBpZiAoc3RybS5hdmFpbF9vdXQgPT09IDApIHtcbiAgICAgICAgcy5sYXN0X2ZsdXNoID0gLTE7XG4gICAgICAgIC8qIGF2b2lkIEJVRl9FUlJPUiBuZXh0IGNhbGwsIHNlZSBhYm92ZSAqL1xuICAgICAgfVxuICAgICAgcmV0dXJuIFpfT0s7XG4gICAgICAvKiBJZiBmbHVzaCAhPSBaX05PX0ZMVVNIICYmIGF2YWlsX291dCA9PSAwLCB0aGUgbmV4dCBjYWxsXG4gICAgICAgKiBvZiBkZWZsYXRlIHNob3VsZCB1c2UgdGhlIHNhbWUgZmx1c2ggcGFyYW1ldGVyIHRvIG1ha2Ugc3VyZVxuICAgICAgICogdGhhdCB0aGUgZmx1c2ggaXMgY29tcGxldGUuIFNvIHdlIGRvbid0IGhhdmUgdG8gb3V0cHV0IGFuXG4gICAgICAgKiBlbXB0eSBibG9jayBoZXJlLCB0aGlzIHdpbGwgYmUgZG9uZSBhdCBuZXh0IGNhbGwuIFRoaXMgYWxzb1xuICAgICAgICogZW5zdXJlcyB0aGF0IGZvciBhIHZlcnkgc21hbGwgb3V0cHV0IGJ1ZmZlciwgd2UgZW1pdCBhdCBtb3N0XG4gICAgICAgKiBvbmUgZW1wdHkgYmxvY2suXG4gICAgICAgKi9cbiAgICB9XG4gICAgaWYgKGJzdGF0ZSA9PT0gQlNfQkxPQ0tfRE9ORSkge1xuICAgICAgaWYgKGZsdXNoID09PSBaX1BBUlRJQUxfRkxVU0gpIHtcbiAgICAgICAgX3RyX2FsaWduKHMpO1xuICAgICAgfSBlbHNlIGlmIChmbHVzaCAhPT0gWl9CTE9DSykgeyAvKiBGVUxMX0ZMVVNIIG9yIFNZTkNfRkxVU0ggKi9cblxuICAgICAgICBfdHJfc3RvcmVkX2Jsb2NrKHMsIDAsIDAsIGZhbHNlKTtcbiAgICAgICAgLyogRm9yIGEgZnVsbCBmbHVzaCwgdGhpcyBlbXB0eSBibG9jayB3aWxsIGJlIHJlY29nbml6ZWRcbiAgICAgICAgICogYXMgYSBzcGVjaWFsIG1hcmtlciBieSBpbmZsYXRlX3N5bmMoKS5cbiAgICAgICAgICovXG4gICAgICAgIGlmIChmbHVzaCA9PT0gWl9GVUxMX0ZMVVNIKSB7XG4gICAgICAgICAgLyoqKiBDTEVBUl9IQVNIKHMpOyAqKiovXG4gICAgICAgICAgLyogZm9yZ2V0IGhpc3RvcnkgKi9cbiAgICAgICAgICB6ZXJvKHMuaGVhZCk7IC8vIEZpbGwgd2l0aCBOSUwgKD0gMCk7XG5cbiAgICAgICAgICBpZiAocy5sb29rYWhlYWQgPT09IDApIHtcbiAgICAgICAgICAgIHMuc3Ryc3RhcnQgPSAwO1xuICAgICAgICAgICAgcy5ibG9ja19zdGFydCA9IDA7XG4gICAgICAgICAgICBzLmluc2VydCA9IDA7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgICBmbHVzaF9wZW5kaW5nKHN0cm0pO1xuICAgICAgaWYgKHN0cm0uYXZhaWxfb3V0ID09PSAwKSB7XG4gICAgICAgIHMubGFzdF9mbHVzaCA9IC0xOyAvKiBhdm9pZCBCVUZfRVJST1IgYXQgbmV4dCBjYWxsLCBzZWUgYWJvdmUgKi9cbiAgICAgICAgcmV0dXJuIFpfT0s7XG4gICAgICB9XG4gICAgfVxuICB9XG4gIC8vQXNzZXJ0KHN0cm0tPmF2YWlsX291dCA+IDAsIFwiYnVnMlwiKTtcbiAgLy9pZiAoc3RybS5hdmFpbF9vdXQgPD0gMCkgeyB0aHJvdyBuZXcgRXJyb3IoXCJidWcyXCIpO31cblxuICBpZiAoZmx1c2ggIT09IFpfRklOSVNIKSB7XG4gICAgcmV0dXJuIFpfT0s7XG4gIH1cbiAgaWYgKHMud3JhcCA8PSAwKSB7XG4gICAgcmV0dXJuIFpfU1RSRUFNX0VORDtcbiAgfVxuXG4gIC8qIFdyaXRlIHRoZSB0cmFpbGVyICovXG4gIGlmIChzLndyYXAgPT09IDIpIHtcbiAgICBwdXRfYnl0ZShzLCBzdHJtLmFkbGVyICYgMHhmZik7XG4gICAgcHV0X2J5dGUocywgKHN0cm0uYWRsZXIgPj4gOCkgJiAweGZmKTtcbiAgICBwdXRfYnl0ZShzLCAoc3RybS5hZGxlciA+PiAxNikgJiAweGZmKTtcbiAgICBwdXRfYnl0ZShzLCAoc3RybS5hZGxlciA+PiAyNCkgJiAweGZmKTtcbiAgICBwdXRfYnl0ZShzLCBzdHJtLnRvdGFsX2luICYgMHhmZik7XG4gICAgcHV0X2J5dGUocywgKHN0cm0udG90YWxfaW4gPj4gOCkgJiAweGZmKTtcbiAgICBwdXRfYnl0ZShzLCAoc3RybS50b3RhbF9pbiA+PiAxNikgJiAweGZmKTtcbiAgICBwdXRfYnl0ZShzLCAoc3RybS50b3RhbF9pbiA+PiAyNCkgJiAweGZmKTtcbiAgfSBlbHNlIHtcbiAgICBwdXRTaG9ydE1TQihzLCBzdHJtLmFkbGVyID4+PiAxNik7XG4gICAgcHV0U2hvcnRNU0Iocywgc3RybS5hZGxlciAmIDB4ZmZmZik7XG4gIH1cblxuICBmbHVzaF9wZW5kaW5nKHN0cm0pO1xuICAvKiBJZiBhdmFpbF9vdXQgaXMgemVybywgdGhlIGFwcGxpY2F0aW9uIHdpbGwgY2FsbCBkZWZsYXRlIGFnYWluXG4gICAqIHRvIGZsdXNoIHRoZSByZXN0LlxuICAgKi9cbiAgaWYgKHMud3JhcCA+IDApIHtcbiAgICBzLndyYXAgPSAtcy53cmFwO1xuICB9XG4gIC8qIHdyaXRlIHRoZSB0cmFpbGVyIG9ubHkgb25jZSEgKi9cbiAgcmV0dXJuIHMucGVuZGluZyAhPT0gMCA/IFpfT0sgOiBaX1NUUkVBTV9FTkQ7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBkZWZsYXRlRW5kKHN0cm0pIHtcbiAgdmFyIHN0YXR1cztcblxuICBpZiAoIXN0cm0gLyo9PSBaX05VTEwqLyB8fCAhc3RybS5zdGF0ZSAvKj09IFpfTlVMTCovICkge1xuICAgIHJldHVybiBaX1NUUkVBTV9FUlJPUjtcbiAgfVxuXG4gIHN0YXR1cyA9IHN0cm0uc3RhdGUuc3RhdHVzO1xuICBpZiAoc3RhdHVzICE9PSBJTklUX1NUQVRFICYmXG4gICAgc3RhdHVzICE9PSBFWFRSQV9TVEFURSAmJlxuICAgIHN0YXR1cyAhPT0gTkFNRV9TVEFURSAmJlxuICAgIHN0YXR1cyAhPT0gQ09NTUVOVF9TVEFURSAmJlxuICAgIHN0YXR1cyAhPT0gSENSQ19TVEFURSAmJlxuICAgIHN0YXR1cyAhPT0gQlVTWV9TVEFURSAmJlxuICAgIHN0YXR1cyAhPT0gRklOSVNIX1NUQVRFXG4gICkge1xuICAgIHJldHVybiBlcnIoc3RybSwgWl9TVFJFQU1fRVJST1IpO1xuICB9XG5cbiAgc3RybS5zdGF0ZSA9IG51bGw7XG5cbiAgcmV0dXJuIHN0YXR1cyA9PT0gQlVTWV9TVEFURSA/IGVycihzdHJtLCBaX0RBVEFfRVJST1IpIDogWl9PSztcbn1cblxuXG4vKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4gKiBJbml0aWFsaXplcyB0aGUgY29tcHJlc3Npb24gZGljdGlvbmFyeSBmcm9tIHRoZSBnaXZlbiBieXRlXG4gKiBzZXF1ZW5jZSB3aXRob3V0IHByb2R1Y2luZyBhbnkgY29tcHJlc3NlZCBvdXRwdXQuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBkZWZsYXRlU2V0RGljdGlvbmFyeShzdHJtLCBkaWN0aW9uYXJ5KSB7XG4gIHZhciBkaWN0TGVuZ3RoID0gZGljdGlvbmFyeS5sZW5ndGg7XG5cbiAgdmFyIHM7XG4gIHZhciBzdHIsIG47XG4gIHZhciB3cmFwO1xuICB2YXIgYXZhaWw7XG4gIHZhciBuZXh0O1xuICB2YXIgaW5wdXQ7XG4gIHZhciB0bXBEaWN0O1xuXG4gIGlmICghc3RybSAvKj09IFpfTlVMTCovIHx8ICFzdHJtLnN0YXRlIC8qPT0gWl9OVUxMKi8gKSB7XG4gICAgcmV0dXJuIFpfU1RSRUFNX0VSUk9SO1xuICB9XG5cbiAgcyA9IHN0cm0uc3RhdGU7XG4gIHdyYXAgPSBzLndyYXA7XG5cbiAgaWYgKHdyYXAgPT09IDIgfHwgKHdyYXAgPT09IDEgJiYgcy5zdGF0dXMgIT09IElOSVRfU1RBVEUpIHx8IHMubG9va2FoZWFkKSB7XG4gICAgcmV0dXJuIFpfU1RSRUFNX0VSUk9SO1xuICB9XG5cbiAgLyogd2hlbiB1c2luZyB6bGliIHdyYXBwZXJzLCBjb21wdXRlIEFkbGVyLTMyIGZvciBwcm92aWRlZCBkaWN0aW9uYXJ5ICovXG4gIGlmICh3cmFwID09PSAxKSB7XG4gICAgLyogYWRsZXIzMihzdHJtLT5hZGxlciwgZGljdGlvbmFyeSwgZGljdExlbmd0aCk7ICovXG4gICAgc3RybS5hZGxlciA9IGFkbGVyMzIoc3RybS5hZGxlciwgZGljdGlvbmFyeSwgZGljdExlbmd0aCwgMCk7XG4gIH1cblxuICBzLndyYXAgPSAwOyAvKiBhdm9pZCBjb21wdXRpbmcgQWRsZXItMzIgaW4gcmVhZF9idWYgKi9cblxuICAvKiBpZiBkaWN0aW9uYXJ5IHdvdWxkIGZpbGwgd2luZG93LCBqdXN0IHJlcGxhY2UgdGhlIGhpc3RvcnkgKi9cbiAgaWYgKGRpY3RMZW5ndGggPj0gcy53X3NpemUpIHtcbiAgICBpZiAod3JhcCA9PT0gMCkgeyAvKiBhbHJlYWR5IGVtcHR5IG90aGVyd2lzZSAqL1xuICAgICAgLyoqKiBDTEVBUl9IQVNIKHMpOyAqKiovXG4gICAgICB6ZXJvKHMuaGVhZCk7IC8vIEZpbGwgd2l0aCBOSUwgKD0gMCk7XG4gICAgICBzLnN0cnN0YXJ0ID0gMDtcbiAgICAgIHMuYmxvY2tfc3RhcnQgPSAwO1xuICAgICAgcy5pbnNlcnQgPSAwO1xuICAgIH1cbiAgICAvKiB1c2UgdGhlIHRhaWwgKi9cbiAgICAvLyBkaWN0aW9uYXJ5ID0gZGljdGlvbmFyeS5zbGljZShkaWN0TGVuZ3RoIC0gcy53X3NpemUpO1xuICAgIHRtcERpY3QgPSBuZXcgQnVmOChzLndfc2l6ZSk7XG4gICAgYXJyYXlTZXQodG1wRGljdCwgZGljdGlvbmFyeSwgZGljdExlbmd0aCAtIHMud19zaXplLCBzLndfc2l6ZSwgMCk7XG4gICAgZGljdGlvbmFyeSA9IHRtcERpY3Q7XG4gICAgZGljdExlbmd0aCA9IHMud19zaXplO1xuICB9XG4gIC8qIGluc2VydCBkaWN0aW9uYXJ5IGludG8gd2luZG93IGFuZCBoYXNoICovXG4gIGF2YWlsID0gc3RybS5hdmFpbF9pbjtcbiAgbmV4dCA9IHN0cm0ubmV4dF9pbjtcbiAgaW5wdXQgPSBzdHJtLmlucHV0O1xuICBzdHJtLmF2YWlsX2luID0gZGljdExlbmd0aDtcbiAgc3RybS5uZXh0X2luID0gMDtcbiAgc3RybS5pbnB1dCA9IGRpY3Rpb25hcnk7XG4gIGZpbGxfd2luZG93KHMpO1xuICB3aGlsZSAocy5sb29rYWhlYWQgPj0gTUlOX01BVENIKSB7XG4gICAgc3RyID0gcy5zdHJzdGFydDtcbiAgICBuID0gcy5sb29rYWhlYWQgLSAoTUlOX01BVENIIC0gMSk7XG4gICAgZG8ge1xuICAgICAgLyogVVBEQVRFX0hBU0gocywgcy0+aW5zX2gsIHMtPndpbmRvd1tzdHIgKyBNSU5fTUFUQ0gtMV0pOyAqL1xuICAgICAgcy5pbnNfaCA9ICgocy5pbnNfaCA8PCBzLmhhc2hfc2hpZnQpIF4gcy53aW5kb3dbc3RyICsgTUlOX01BVENIIC0gMV0pICYgcy5oYXNoX21hc2s7XG5cbiAgICAgIHMucHJldltzdHIgJiBzLndfbWFza10gPSBzLmhlYWRbcy5pbnNfaF07XG5cbiAgICAgIHMuaGVhZFtzLmluc19oXSA9IHN0cjtcbiAgICAgIHN0cisrO1xuICAgIH0gd2hpbGUgKC0tbik7XG4gICAgcy5zdHJzdGFydCA9IHN0cjtcbiAgICBzLmxvb2thaGVhZCA9IE1JTl9NQVRDSCAtIDE7XG4gICAgZmlsbF93aW5kb3cocyk7XG4gIH1cbiAgcy5zdHJzdGFydCArPSBzLmxvb2thaGVhZDtcbiAgcy5ibG9ja19zdGFydCA9IHMuc3Ryc3RhcnQ7XG4gIHMuaW5zZXJ0ID0gcy5sb29rYWhlYWQ7XG4gIHMubG9va2FoZWFkID0gMDtcbiAgcy5tYXRjaF9sZW5ndGggPSBzLnByZXZfbGVuZ3RoID0gTUlOX01BVENIIC0gMTtcbiAgcy5tYXRjaF9hdmFpbGFibGUgPSAwO1xuICBzdHJtLm5leHRfaW4gPSBuZXh0O1xuICBzdHJtLmlucHV0ID0gaW5wdXQ7XG4gIHN0cm0uYXZhaWxfaW4gPSBhdmFpbDtcbiAgcy53cmFwID0gd3JhcDtcbiAgcmV0dXJuIFpfT0s7XG59XG5cblxuZXhwb3J0IHZhciBkZWZsYXRlSW5mbyA9ICdwYWtvIGRlZmxhdGUgKGZyb20gTm9kZWNhIHByb2plY3QpJztcblxuLyogTm90IGltcGxlbWVudGVkXG5leHBvcnRzLmRlZmxhdGVCb3VuZCA9IGRlZmxhdGVCb3VuZDtcbmV4cG9ydHMuZGVmbGF0ZUNvcHkgPSBkZWZsYXRlQ29weTtcbmV4cG9ydHMuZGVmbGF0ZVBhcmFtcyA9IGRlZmxhdGVQYXJhbXM7XG5leHBvcnRzLmRlZmxhdGVQZW5kaW5nID0gZGVmbGF0ZVBlbmRpbmc7XG5leHBvcnRzLmRlZmxhdGVQcmltZSA9IGRlZmxhdGVQcmltZTtcbmV4cG9ydHMuZGVmbGF0ZVR1bmUgPSBkZWZsYXRlVHVuZTtcbiovXG4iLCAiXG4vLyBTZWUgc3RhdGUgZGVmcyBmcm9tIGluZmxhdGUuanNcbnZhciBCQUQgPSAzMDsgICAgICAgLyogZ290IGEgZGF0YSBlcnJvciAtLSByZW1haW4gaGVyZSB1bnRpbCByZXNldCAqL1xudmFyIFRZUEUgPSAxMjsgICAgICAvKiBpOiB3YWl0aW5nIGZvciB0eXBlIGJpdHMsIGluY2x1ZGluZyBsYXN0LWZsYWcgYml0ICovXG5cbi8qXG4gICBEZWNvZGUgbGl0ZXJhbCwgbGVuZ3RoLCBhbmQgZGlzdGFuY2UgY29kZXMgYW5kIHdyaXRlIG91dCB0aGUgcmVzdWx0aW5nXG4gICBsaXRlcmFsIGFuZCBtYXRjaCBieXRlcyB1bnRpbCBlaXRoZXIgbm90IGVub3VnaCBpbnB1dCBvciBvdXRwdXQgaXNcbiAgIGF2YWlsYWJsZSwgYW4gZW5kLW9mLWJsb2NrIGlzIGVuY291bnRlcmVkLCBvciBhIGRhdGEgZXJyb3IgaXMgZW5jb3VudGVyZWQuXG4gICBXaGVuIGxhcmdlIGVub3VnaCBpbnB1dCBhbmQgb3V0cHV0IGJ1ZmZlcnMgYXJlIHN1cHBsaWVkIHRvIGluZmxhdGUoKSwgZm9yXG4gICBleGFtcGxlLCBhIDE2SyBpbnB1dCBidWZmZXIgYW5kIGEgNjRLIG91dHB1dCBidWZmZXIsIG1vcmUgdGhhbiA5NSUgb2YgdGhlXG4gICBpbmZsYXRlIGV4ZWN1dGlvbiB0aW1lIGlzIHNwZW50IGluIHRoaXMgcm91dGluZS5cblxuICAgRW50cnkgYXNzdW1wdGlvbnM6XG5cbiAgICAgICAgc3RhdGUubW9kZSA9PT0gTEVOXG4gICAgICAgIHN0cm0uYXZhaWxfaW4gPj0gNlxuICAgICAgICBzdHJtLmF2YWlsX291dCA+PSAyNThcbiAgICAgICAgc3RhcnQgPj0gc3RybS5hdmFpbF9vdXRcbiAgICAgICAgc3RhdGUuYml0cyA8IDhcblxuICAgT24gcmV0dXJuLCBzdGF0ZS5tb2RlIGlzIG9uZSBvZjpcblxuICAgICAgICBMRU4gLS0gcmFuIG91dCBvZiBlbm91Z2ggb3V0cHV0IHNwYWNlIG9yIGVub3VnaCBhdmFpbGFibGUgaW5wdXRcbiAgICAgICAgVFlQRSAtLSByZWFjaGVkIGVuZCBvZiBibG9jayBjb2RlLCBpbmZsYXRlKCkgdG8gaW50ZXJwcmV0IG5leHQgYmxvY2tcbiAgICAgICAgQkFEIC0tIGVycm9yIGluIGJsb2NrIGRhdGFcblxuICAgTm90ZXM6XG5cbiAgICAtIFRoZSBtYXhpbXVtIGlucHV0IGJpdHMgdXNlZCBieSBhIGxlbmd0aC9kaXN0YW5jZSBwYWlyIGlzIDE1IGJpdHMgZm9yIHRoZVxuICAgICAgbGVuZ3RoIGNvZGUsIDUgYml0cyBmb3IgdGhlIGxlbmd0aCBleHRyYSwgMTUgYml0cyBmb3IgdGhlIGRpc3RhbmNlIGNvZGUsXG4gICAgICBhbmQgMTMgYml0cyBmb3IgdGhlIGRpc3RhbmNlIGV4dHJhLiAgVGhpcyB0b3RhbHMgNDggYml0cywgb3Igc2l4IGJ5dGVzLlxuICAgICAgVGhlcmVmb3JlIGlmIHN0cm0uYXZhaWxfaW4gPj0gNiwgdGhlbiB0aGVyZSBpcyBlbm91Z2ggaW5wdXQgdG8gYXZvaWRcbiAgICAgIGNoZWNraW5nIGZvciBhdmFpbGFibGUgaW5wdXQgd2hpbGUgZGVjb2RpbmcuXG5cbiAgICAtIFRoZSBtYXhpbXVtIGJ5dGVzIHRoYXQgYSBzaW5nbGUgbGVuZ3RoL2Rpc3RhbmNlIHBhaXIgY2FuIG91dHB1dCBpcyAyNThcbiAgICAgIGJ5dGVzLCB3aGljaCBpcyB0aGUgbWF4aW11bSBsZW5ndGggdGhhdCBjYW4gYmUgY29kZWQuICBpbmZsYXRlX2Zhc3QoKVxuICAgICAgcmVxdWlyZXMgc3RybS5hdmFpbF9vdXQgPj0gMjU4IGZvciBlYWNoIGxvb3AgdG8gYXZvaWQgY2hlY2tpbmcgZm9yXG4gICAgICBvdXRwdXQgc3BhY2UuXG4gKi9cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIGluZmxhdGVfZmFzdChzdHJtLCBzdGFydCkge1xuICB2YXIgc3RhdGU7XG4gIHZhciBfaW47ICAgICAgICAgICAgICAgICAgICAvKiBsb2NhbCBzdHJtLmlucHV0ICovXG4gIHZhciBsYXN0OyAgICAgICAgICAgICAgICAgICAvKiBoYXZlIGVub3VnaCBpbnB1dCB3aGlsZSBpbiA8IGxhc3QgKi9cbiAgdmFyIF9vdXQ7ICAgICAgICAgICAgICAgICAgIC8qIGxvY2FsIHN0cm0ub3V0cHV0ICovXG4gIHZhciBiZWc7ICAgICAgICAgICAgICAgICAgICAvKiBpbmZsYXRlKCkncyBpbml0aWFsIHN0cm0ub3V0cHV0ICovXG4gIHZhciBlbmQ7ICAgICAgICAgICAgICAgICAgICAvKiB3aGlsZSBvdXQgPCBlbmQsIGVub3VnaCBzcGFjZSBhdmFpbGFibGUgKi9cbi8vI2lmZGVmIElORkxBVEVfU1RSSUNUXG4gIHZhciBkbWF4OyAgICAgICAgICAgICAgICAgICAvKiBtYXhpbXVtIGRpc3RhbmNlIGZyb20gemxpYiBoZWFkZXIgKi9cbi8vI2VuZGlmXG4gIHZhciB3c2l6ZTsgICAgICAgICAgICAgICAgICAvKiB3aW5kb3cgc2l6ZSBvciB6ZXJvIGlmIG5vdCB1c2luZyB3aW5kb3cgKi9cbiAgdmFyIHdoYXZlOyAgICAgICAgICAgICAgICAgIC8qIHZhbGlkIGJ5dGVzIGluIHRoZSB3aW5kb3cgKi9cbiAgdmFyIHduZXh0OyAgICAgICAgICAgICAgICAgIC8qIHdpbmRvdyB3cml0ZSBpbmRleCAqL1xuICAvLyBVc2UgYHNfd2luZG93YCBpbnN0ZWFkIGB3aW5kb3dgLCBhdm9pZCBjb25mbGljdCB3aXRoIGluc3RydW1lbnRhdGlvbiB0b29sc1xuICB2YXIgc193aW5kb3c7ICAgICAgICAgICAgICAgLyogYWxsb2NhdGVkIHNsaWRpbmcgd2luZG93LCBpZiB3c2l6ZSAhPSAwICovXG4gIHZhciBob2xkOyAgICAgICAgICAgICAgICAgICAvKiBsb2NhbCBzdHJtLmhvbGQgKi9cbiAgdmFyIGJpdHM7ICAgICAgICAgICAgICAgICAgIC8qIGxvY2FsIHN0cm0uYml0cyAqL1xuICB2YXIgbGNvZGU7ICAgICAgICAgICAgICAgICAgLyogbG9jYWwgc3RybS5sZW5jb2RlICovXG4gIHZhciBkY29kZTsgICAgICAgICAgICAgICAgICAvKiBsb2NhbCBzdHJtLmRpc3Rjb2RlICovXG4gIHZhciBsbWFzazsgICAgICAgICAgICAgICAgICAvKiBtYXNrIGZvciBmaXJzdCBsZXZlbCBvZiBsZW5ndGggY29kZXMgKi9cbiAgdmFyIGRtYXNrOyAgICAgICAgICAgICAgICAgIC8qIG1hc2sgZm9yIGZpcnN0IGxldmVsIG9mIGRpc3RhbmNlIGNvZGVzICovXG4gIHZhciBoZXJlOyAgICAgICAgICAgICAgICAgICAvKiByZXRyaWV2ZWQgdGFibGUgZW50cnkgKi9cbiAgdmFyIG9wOyAgICAgICAgICAgICAgICAgICAgIC8qIGNvZGUgYml0cywgb3BlcmF0aW9uLCBleHRyYSBiaXRzLCBvciAqL1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLyogIHdpbmRvdyBwb3NpdGlvbiwgd2luZG93IGJ5dGVzIHRvIGNvcHkgKi9cbiAgdmFyIGxlbjsgICAgICAgICAgICAgICAgICAgIC8qIG1hdGNoIGxlbmd0aCwgdW51c2VkIGJ5dGVzICovXG4gIHZhciBkaXN0OyAgICAgICAgICAgICAgICAgICAvKiBtYXRjaCBkaXN0YW5jZSAqL1xuICB2YXIgZnJvbTsgICAgICAgICAgICAgICAgICAgLyogd2hlcmUgdG8gY29weSBtYXRjaCBmcm9tICovXG4gIHZhciBmcm9tX3NvdXJjZTtcblxuXG4gIHZhciBpbnB1dCwgb3V0cHV0OyAvLyBKUyBzcGVjaWZpYywgYmVjYXVzZSB3ZSBoYXZlIG5vIHBvaW50ZXJzXG5cbiAgLyogY29weSBzdGF0ZSB0byBsb2NhbCB2YXJpYWJsZXMgKi9cbiAgc3RhdGUgPSBzdHJtLnN0YXRlO1xuICAvL2hlcmUgPSBzdGF0ZS5oZXJlO1xuICBfaW4gPSBzdHJtLm5leHRfaW47XG4gIGlucHV0ID0gc3RybS5pbnB1dDtcbiAgbGFzdCA9IF9pbiArIChzdHJtLmF2YWlsX2luIC0gNSk7XG4gIF9vdXQgPSBzdHJtLm5leHRfb3V0O1xuICBvdXRwdXQgPSBzdHJtLm91dHB1dDtcbiAgYmVnID0gX291dCAtIChzdGFydCAtIHN0cm0uYXZhaWxfb3V0KTtcbiAgZW5kID0gX291dCArIChzdHJtLmF2YWlsX291dCAtIDI1Nyk7XG4vLyNpZmRlZiBJTkZMQVRFX1NUUklDVFxuICBkbWF4ID0gc3RhdGUuZG1heDtcbi8vI2VuZGlmXG4gIHdzaXplID0gc3RhdGUud3NpemU7XG4gIHdoYXZlID0gc3RhdGUud2hhdmU7XG4gIHduZXh0ID0gc3RhdGUud25leHQ7XG4gIHNfd2luZG93ID0gc3RhdGUud2luZG93O1xuICBob2xkID0gc3RhdGUuaG9sZDtcbiAgYml0cyA9IHN0YXRlLmJpdHM7XG4gIGxjb2RlID0gc3RhdGUubGVuY29kZTtcbiAgZGNvZGUgPSBzdGF0ZS5kaXN0Y29kZTtcbiAgbG1hc2sgPSAoMSA8PCBzdGF0ZS5sZW5iaXRzKSAtIDE7XG4gIGRtYXNrID0gKDEgPDwgc3RhdGUuZGlzdGJpdHMpIC0gMTtcblxuXG4gIC8qIGRlY29kZSBsaXRlcmFscyBhbmQgbGVuZ3RoL2Rpc3RhbmNlcyB1bnRpbCBlbmQtb2YtYmxvY2sgb3Igbm90IGVub3VnaFxuICAgICBpbnB1dCBkYXRhIG9yIG91dHB1dCBzcGFjZSAqL1xuXG4gIHRvcDpcbiAgZG8ge1xuICAgIGlmIChiaXRzIDwgMTUpIHtcbiAgICAgIGhvbGQgKz0gaW5wdXRbX2luKytdIDw8IGJpdHM7XG4gICAgICBiaXRzICs9IDg7XG4gICAgICBob2xkICs9IGlucHV0W19pbisrXSA8PCBiaXRzO1xuICAgICAgYml0cyArPSA4O1xuICAgIH1cblxuICAgIGhlcmUgPSBsY29kZVtob2xkICYgbG1hc2tdO1xuXG4gICAgZG9sZW46XG4gICAgZm9yICg7OykgeyAvLyBHb3RvIGVtdWxhdGlvblxuICAgICAgb3AgPSBoZXJlID4+PiAyNC8qaGVyZS5iaXRzKi87XG4gICAgICBob2xkID4+Pj0gb3A7XG4gICAgICBiaXRzIC09IG9wO1xuICAgICAgb3AgPSAoaGVyZSA+Pj4gMTYpICYgMHhmZi8qaGVyZS5vcCovO1xuICAgICAgaWYgKG9wID09PSAwKSB7ICAgICAgICAgICAgICAgICAgICAgICAgICAvKiBsaXRlcmFsICovXG4gICAgICAgIC8vVHJhY2V2digoc3RkZXJyLCBoZXJlLnZhbCA+PSAweDIwICYmIGhlcmUudmFsIDwgMHg3ZiA/XG4gICAgICAgIC8vICAgICAgICBcImluZmxhdGU6ICAgICAgICAgbGl0ZXJhbCAnJWMnXFxuXCIgOlxuICAgICAgICAvLyAgICAgICAgXCJpbmZsYXRlOiAgICAgICAgIGxpdGVyYWwgMHglMDJ4XFxuXCIsIGhlcmUudmFsKSk7XG4gICAgICAgIG91dHB1dFtfb3V0KytdID0gaGVyZSAmIDB4ZmZmZi8qaGVyZS52YWwqLztcbiAgICAgIH1cbiAgICAgIGVsc2UgaWYgKG9wICYgMTYpIHsgICAgICAgICAgICAgICAgICAgICAvKiBsZW5ndGggYmFzZSAqL1xuICAgICAgICBsZW4gPSBoZXJlICYgMHhmZmZmLypoZXJlLnZhbCovO1xuICAgICAgICBvcCAmPSAxNTsgICAgICAgICAgICAgICAgICAgICAgICAgICAvKiBudW1iZXIgb2YgZXh0cmEgYml0cyAqL1xuICAgICAgICBpZiAob3ApIHtcbiAgICAgICAgICBpZiAoYml0cyA8IG9wKSB7XG4gICAgICAgICAgICBob2xkICs9IGlucHV0W19pbisrXSA8PCBiaXRzO1xuICAgICAgICAgICAgYml0cyArPSA4O1xuICAgICAgICAgIH1cbiAgICAgICAgICBsZW4gKz0gaG9sZCAmICgoMSA8PCBvcCkgLSAxKTtcbiAgICAgICAgICBob2xkID4+Pj0gb3A7XG4gICAgICAgICAgYml0cyAtPSBvcDtcbiAgICAgICAgfVxuICAgICAgICAvL1RyYWNldnYoKHN0ZGVyciwgXCJpbmZsYXRlOiAgICAgICAgIGxlbmd0aCAldVxcblwiLCBsZW4pKTtcbiAgICAgICAgaWYgKGJpdHMgPCAxNSkge1xuICAgICAgICAgIGhvbGQgKz0gaW5wdXRbX2luKytdIDw8IGJpdHM7XG4gICAgICAgICAgYml0cyArPSA4O1xuICAgICAgICAgIGhvbGQgKz0gaW5wdXRbX2luKytdIDw8IGJpdHM7XG4gICAgICAgICAgYml0cyArPSA4O1xuICAgICAgICB9XG4gICAgICAgIGhlcmUgPSBkY29kZVtob2xkICYgZG1hc2tdO1xuXG4gICAgICAgIGRvZGlzdDpcbiAgICAgICAgZm9yICg7OykgeyAvLyBnb3RvIGVtdWxhdGlvblxuICAgICAgICAgIG9wID0gaGVyZSA+Pj4gMjQvKmhlcmUuYml0cyovO1xuICAgICAgICAgIGhvbGQgPj4+PSBvcDtcbiAgICAgICAgICBiaXRzIC09IG9wO1xuICAgICAgICAgIG9wID0gKGhlcmUgPj4+IDE2KSAmIDB4ZmYvKmhlcmUub3AqLztcblxuICAgICAgICAgIGlmIChvcCAmIDE2KSB7ICAgICAgICAgICAgICAgICAgICAgIC8qIGRpc3RhbmNlIGJhc2UgKi9cbiAgICAgICAgICAgIGRpc3QgPSBoZXJlICYgMHhmZmZmLypoZXJlLnZhbCovO1xuICAgICAgICAgICAgb3AgJj0gMTU7ICAgICAgICAgICAgICAgICAgICAgICAvKiBudW1iZXIgb2YgZXh0cmEgYml0cyAqL1xuICAgICAgICAgICAgaWYgKGJpdHMgPCBvcCkge1xuICAgICAgICAgICAgICBob2xkICs9IGlucHV0W19pbisrXSA8PCBiaXRzO1xuICAgICAgICAgICAgICBiaXRzICs9IDg7XG4gICAgICAgICAgICAgIGlmIChiaXRzIDwgb3ApIHtcbiAgICAgICAgICAgICAgICBob2xkICs9IGlucHV0W19pbisrXSA8PCBiaXRzO1xuICAgICAgICAgICAgICAgIGJpdHMgKz0gODtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZGlzdCArPSBob2xkICYgKCgxIDw8IG9wKSAtIDEpO1xuLy8jaWZkZWYgSU5GTEFURV9TVFJJQ1RcbiAgICAgICAgICAgIGlmIChkaXN0ID4gZG1heCkge1xuICAgICAgICAgICAgICBzdHJtLm1zZyA9ICdpbnZhbGlkIGRpc3RhbmNlIHRvbyBmYXIgYmFjayc7XG4gICAgICAgICAgICAgIHN0YXRlLm1vZGUgPSBCQUQ7XG4gICAgICAgICAgICAgIGJyZWFrIHRvcDtcbiAgICAgICAgICAgIH1cbi8vI2VuZGlmXG4gICAgICAgICAgICBob2xkID4+Pj0gb3A7XG4gICAgICAgICAgICBiaXRzIC09IG9wO1xuICAgICAgICAgICAgLy9UcmFjZXZ2KChzdGRlcnIsIFwiaW5mbGF0ZTogICAgICAgICBkaXN0YW5jZSAldVxcblwiLCBkaXN0KSk7XG4gICAgICAgICAgICBvcCA9IF9vdXQgLSBiZWc7ICAgICAgICAgICAgICAgIC8qIG1heCBkaXN0YW5jZSBpbiBvdXRwdXQgKi9cbiAgICAgICAgICAgIGlmIChkaXN0ID4gb3ApIHsgICAgICAgICAgICAgICAgLyogc2VlIGlmIGNvcHkgZnJvbSB3aW5kb3cgKi9cbiAgICAgICAgICAgICAgb3AgPSBkaXN0IC0gb3A7ICAgICAgICAgICAgICAgLyogZGlzdGFuY2UgYmFjayBpbiB3aW5kb3cgKi9cbiAgICAgICAgICAgICAgaWYgKG9wID4gd2hhdmUpIHtcbiAgICAgICAgICAgICAgICBpZiAoc3RhdGUuc2FuZSkge1xuICAgICAgICAgICAgICAgICAgc3RybS5tc2cgPSAnaW52YWxpZCBkaXN0YW5jZSB0b28gZmFyIGJhY2snO1xuICAgICAgICAgICAgICAgICAgc3RhdGUubW9kZSA9IEJBRDtcbiAgICAgICAgICAgICAgICAgIGJyZWFrIHRvcDtcbiAgICAgICAgICAgICAgICB9XG5cbi8vICghKSBUaGlzIGJsb2NrIGlzIGRpc2FibGVkIGluIHpsaWIgZGVmYWlsdHMsXG4vLyBkb24ndCBlbmFibGUgaXQgZm9yIGJpbmFyeSBjb21wYXRpYmlsaXR5XG4vLyNpZmRlZiBJTkZMQVRFX0FMTE9XX0lOVkFMSURfRElTVEFOQ0VfVE9PRkFSX0FSUlJcbi8vICAgICAgICAgICAgICAgIGlmIChsZW4gPD0gb3AgLSB3aGF2ZSkge1xuLy8gICAgICAgICAgICAgICAgICBkbyB7XG4vLyAgICAgICAgICAgICAgICAgICAgb3V0cHV0W19vdXQrK10gPSAwO1xuLy8gICAgICAgICAgICAgICAgICB9IHdoaWxlICgtLWxlbik7XG4vLyAgICAgICAgICAgICAgICAgIGNvbnRpbnVlIHRvcDtcbi8vICAgICAgICAgICAgICAgIH1cbi8vICAgICAgICAgICAgICAgIGxlbiAtPSBvcCAtIHdoYXZlO1xuLy8gICAgICAgICAgICAgICAgZG8ge1xuLy8gICAgICAgICAgICAgICAgICBvdXRwdXRbX291dCsrXSA9IDA7XG4vLyAgICAgICAgICAgICAgICB9IHdoaWxlICgtLW9wID4gd2hhdmUpO1xuLy8gICAgICAgICAgICAgICAgaWYgKG9wID09PSAwKSB7XG4vLyAgICAgICAgICAgICAgICAgIGZyb20gPSBfb3V0IC0gZGlzdDtcbi8vICAgICAgICAgICAgICAgICAgZG8ge1xuLy8gICAgICAgICAgICAgICAgICAgIG91dHB1dFtfb3V0KytdID0gb3V0cHV0W2Zyb20rK107XG4vLyAgICAgICAgICAgICAgICAgIH0gd2hpbGUgKC0tbGVuKTtcbi8vICAgICAgICAgICAgICAgICAgY29udGludWUgdG9wO1xuLy8gICAgICAgICAgICAgICAgfVxuLy8jZW5kaWZcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICBmcm9tID0gMDsgLy8gd2luZG93IGluZGV4XG4gICAgICAgICAgICAgIGZyb21fc291cmNlID0gc193aW5kb3c7XG4gICAgICAgICAgICAgIGlmICh3bmV4dCA9PT0gMCkgeyAgICAgICAgICAgLyogdmVyeSBjb21tb24gY2FzZSAqL1xuICAgICAgICAgICAgICAgIGZyb20gKz0gd3NpemUgLSBvcDtcbiAgICAgICAgICAgICAgICBpZiAob3AgPCBsZW4pIHsgICAgICAgICAvKiBzb21lIGZyb20gd2luZG93ICovXG4gICAgICAgICAgICAgICAgICBsZW4gLT0gb3A7XG4gICAgICAgICAgICAgICAgICBkbyB7XG4gICAgICAgICAgICAgICAgICAgIG91dHB1dFtfb3V0KytdID0gc193aW5kb3dbZnJvbSsrXTtcbiAgICAgICAgICAgICAgICAgIH0gd2hpbGUgKC0tb3ApO1xuICAgICAgICAgICAgICAgICAgZnJvbSA9IF9vdXQgLSBkaXN0OyAgLyogcmVzdCBmcm9tIG91dHB1dCAqL1xuICAgICAgICAgICAgICAgICAgZnJvbV9zb3VyY2UgPSBvdXRwdXQ7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIGVsc2UgaWYgKHduZXh0IDwgb3ApIHsgICAgICAvKiB3cmFwIGFyb3VuZCB3aW5kb3cgKi9cbiAgICAgICAgICAgICAgICBmcm9tICs9IHdzaXplICsgd25leHQgLSBvcDtcbiAgICAgICAgICAgICAgICBvcCAtPSB3bmV4dDtcbiAgICAgICAgICAgICAgICBpZiAob3AgPCBsZW4pIHsgICAgICAgICAvKiBzb21lIGZyb20gZW5kIG9mIHdpbmRvdyAqL1xuICAgICAgICAgICAgICAgICAgbGVuIC09IG9wO1xuICAgICAgICAgICAgICAgICAgZG8ge1xuICAgICAgICAgICAgICAgICAgICBvdXRwdXRbX291dCsrXSA9IHNfd2luZG93W2Zyb20rK107XG4gICAgICAgICAgICAgICAgICB9IHdoaWxlICgtLW9wKTtcbiAgICAgICAgICAgICAgICAgIGZyb20gPSAwO1xuICAgICAgICAgICAgICAgICAgaWYgKHduZXh0IDwgbGVuKSB7ICAvKiBzb21lIGZyb20gc3RhcnQgb2Ygd2luZG93ICovXG4gICAgICAgICAgICAgICAgICAgIG9wID0gd25leHQ7XG4gICAgICAgICAgICAgICAgICAgIGxlbiAtPSBvcDtcbiAgICAgICAgICAgICAgICAgICAgZG8ge1xuICAgICAgICAgICAgICAgICAgICAgIG91dHB1dFtfb3V0KytdID0gc193aW5kb3dbZnJvbSsrXTtcbiAgICAgICAgICAgICAgICAgICAgfSB3aGlsZSAoLS1vcCk7XG4gICAgICAgICAgICAgICAgICAgIGZyb20gPSBfb3V0IC0gZGlzdDsgICAgICAvKiByZXN0IGZyb20gb3V0cHV0ICovXG4gICAgICAgICAgICAgICAgICAgIGZyb21fc291cmNlID0gb3V0cHV0O1xuICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICBlbHNlIHsgICAgICAgICAgICAgICAgICAgICAgLyogY29udGlndW91cyBpbiB3aW5kb3cgKi9cbiAgICAgICAgICAgICAgICBmcm9tICs9IHduZXh0IC0gb3A7XG4gICAgICAgICAgICAgICAgaWYgKG9wIDwgbGVuKSB7ICAgICAgICAgLyogc29tZSBmcm9tIHdpbmRvdyAqL1xuICAgICAgICAgICAgICAgICAgbGVuIC09IG9wO1xuICAgICAgICAgICAgICAgICAgZG8ge1xuICAgICAgICAgICAgICAgICAgICBvdXRwdXRbX291dCsrXSA9IHNfd2luZG93W2Zyb20rK107XG4gICAgICAgICAgICAgICAgICB9IHdoaWxlICgtLW9wKTtcbiAgICAgICAgICAgICAgICAgIGZyb20gPSBfb3V0IC0gZGlzdDsgIC8qIHJlc3QgZnJvbSBvdXRwdXQgKi9cbiAgICAgICAgICAgICAgICAgIGZyb21fc291cmNlID0gb3V0cHV0O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB3aGlsZSAobGVuID4gMikge1xuICAgICAgICAgICAgICAgIG91dHB1dFtfb3V0KytdID0gZnJvbV9zb3VyY2VbZnJvbSsrXTtcbiAgICAgICAgICAgICAgICBvdXRwdXRbX291dCsrXSA9IGZyb21fc291cmNlW2Zyb20rK107XG4gICAgICAgICAgICAgICAgb3V0cHV0W19vdXQrK10gPSBmcm9tX3NvdXJjZVtmcm9tKytdO1xuICAgICAgICAgICAgICAgIGxlbiAtPSAzO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIGlmIChsZW4pIHtcbiAgICAgICAgICAgICAgICBvdXRwdXRbX291dCsrXSA9IGZyb21fc291cmNlW2Zyb20rK107XG4gICAgICAgICAgICAgICAgaWYgKGxlbiA+IDEpIHtcbiAgICAgICAgICAgICAgICAgIG91dHB1dFtfb3V0KytdID0gZnJvbV9zb3VyY2VbZnJvbSsrXTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICBmcm9tID0gX291dCAtIGRpc3Q7ICAgICAgICAgIC8qIGNvcHkgZGlyZWN0IGZyb20gb3V0cHV0ICovXG4gICAgICAgICAgICAgIGRvIHsgICAgICAgICAgICAgICAgICAgICAgICAvKiBtaW5pbXVtIGxlbmd0aCBpcyB0aHJlZSAqL1xuICAgICAgICAgICAgICAgIG91dHB1dFtfb3V0KytdID0gb3V0cHV0W2Zyb20rK107XG4gICAgICAgICAgICAgICAgb3V0cHV0W19vdXQrK10gPSBvdXRwdXRbZnJvbSsrXTtcbiAgICAgICAgICAgICAgICBvdXRwdXRbX291dCsrXSA9IG91dHB1dFtmcm9tKytdO1xuICAgICAgICAgICAgICAgIGxlbiAtPSAzO1xuICAgICAgICAgICAgICB9IHdoaWxlIChsZW4gPiAyKTtcbiAgICAgICAgICAgICAgaWYgKGxlbikge1xuICAgICAgICAgICAgICAgIG91dHB1dFtfb3V0KytdID0gb3V0cHV0W2Zyb20rK107XG4gICAgICAgICAgICAgICAgaWYgKGxlbiA+IDEpIHtcbiAgICAgICAgICAgICAgICAgIG91dHB1dFtfb3V0KytdID0gb3V0cHV0W2Zyb20rK107XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICAgIGVsc2UgaWYgKChvcCAmIDY0KSA9PT0gMCkgeyAgICAgICAgICAvKiAybmQgbGV2ZWwgZGlzdGFuY2UgY29kZSAqL1xuICAgICAgICAgICAgaGVyZSA9IGRjb2RlWyhoZXJlICYgMHhmZmZmKS8qaGVyZS52YWwqLyArIChob2xkICYgKCgxIDw8IG9wKSAtIDEpKV07XG4gICAgICAgICAgICBjb250aW51ZSBkb2Rpc3Q7XG4gICAgICAgICAgfVxuICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgc3RybS5tc2cgPSAnaW52YWxpZCBkaXN0YW5jZSBjb2RlJztcbiAgICAgICAgICAgIHN0YXRlLm1vZGUgPSBCQUQ7XG4gICAgICAgICAgICBicmVhayB0b3A7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgYnJlYWs7IC8vIG5lZWQgdG8gZW11bGF0ZSBnb3RvIHZpYSBcImNvbnRpbnVlXCJcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgZWxzZSBpZiAoKG9wICYgNjQpID09PSAwKSB7ICAgICAgICAgICAgICAvKiAybmQgbGV2ZWwgbGVuZ3RoIGNvZGUgKi9cbiAgICAgICAgaGVyZSA9IGxjb2RlWyhoZXJlICYgMHhmZmZmKS8qaGVyZS52YWwqLyArIChob2xkICYgKCgxIDw8IG9wKSAtIDEpKV07XG4gICAgICAgIGNvbnRpbnVlIGRvbGVuO1xuICAgICAgfVxuICAgICAgZWxzZSBpZiAob3AgJiAzMikgeyAgICAgICAgICAgICAgICAgICAgIC8qIGVuZC1vZi1ibG9jayAqL1xuICAgICAgICAvL1RyYWNldnYoKHN0ZGVyciwgXCJpbmZsYXRlOiAgICAgICAgIGVuZCBvZiBibG9ja1xcblwiKSk7XG4gICAgICAgIHN0YXRlLm1vZGUgPSBUWVBFO1xuICAgICAgICBicmVhayB0b3A7XG4gICAgICB9XG4gICAgICBlbHNlIHtcbiAgICAgICAgc3RybS5tc2cgPSAnaW52YWxpZCBsaXRlcmFsL2xlbmd0aCBjb2RlJztcbiAgICAgICAgc3RhdGUubW9kZSA9IEJBRDtcbiAgICAgICAgYnJlYWsgdG9wO1xuICAgICAgfVxuXG4gICAgICBicmVhazsgLy8gbmVlZCB0byBlbXVsYXRlIGdvdG8gdmlhIFwiY29udGludWVcIlxuICAgIH1cbiAgfSB3aGlsZSAoX2luIDwgbGFzdCAmJiBfb3V0IDwgZW5kKTtcblxuICAvKiByZXR1cm4gdW51c2VkIGJ5dGVzIChvbiBlbnRyeSwgYml0cyA8IDgsIHNvIGluIHdvbid0IGdvIHRvbyBmYXIgYmFjaykgKi9cbiAgbGVuID0gYml0cyA+PiAzO1xuICBfaW4gLT0gbGVuO1xuICBiaXRzIC09IGxlbiA8PCAzO1xuICBob2xkICY9ICgxIDw8IGJpdHMpIC0gMTtcblxuICAvKiB1cGRhdGUgc3RhdGUgYW5kIHJldHVybiAqL1xuICBzdHJtLm5leHRfaW4gPSBfaW47XG4gIHN0cm0ubmV4dF9vdXQgPSBfb3V0O1xuICBzdHJtLmF2YWlsX2luID0gKF9pbiA8IGxhc3QgPyA1ICsgKGxhc3QgLSBfaW4pIDogNSAtIChfaW4gLSBsYXN0KSk7XG4gIHN0cm0uYXZhaWxfb3V0ID0gKF9vdXQgPCBlbmQgPyAyNTcgKyAoZW5kIC0gX291dCkgOiAyNTcgLSAoX291dCAtIGVuZCkpO1xuICBzdGF0ZS5ob2xkID0gaG9sZDtcbiAgc3RhdGUuYml0cyA9IGJpdHM7XG4gIHJldHVybjtcbn07XG4iLCAiaW1wb3J0IHtCdWYxNn0gZnJvbSAnLi91dGlscyc7XG52YXIgTUFYQklUUyA9IDE1O1xudmFyIEVOT1VHSF9MRU5TID0gODUyO1xudmFyIEVOT1VHSF9ESVNUUyA9IDU5Mjtcbi8vdmFyIEVOT1VHSCA9IChFTk9VR0hfTEVOUytFTk9VR0hfRElTVFMpO1xuXG52YXIgQ09ERVMgPSAwO1xudmFyIExFTlMgPSAxO1xudmFyIERJU1RTID0gMjtcblxudmFyIGxiYXNlID0gWyAvKiBMZW5ndGggY29kZXMgMjU3Li4yODUgYmFzZSAqL1xuICAzLCA0LCA1LCA2LCA3LCA4LCA5LCAxMCwgMTEsIDEzLCAxNSwgMTcsIDE5LCAyMywgMjcsIDMxLFxuICAzNSwgNDMsIDUxLCA1OSwgNjcsIDgzLCA5OSwgMTE1LCAxMzEsIDE2MywgMTk1LCAyMjcsIDI1OCwgMCwgMFxuXTtcblxudmFyIGxleHQgPSBbIC8qIExlbmd0aCBjb2RlcyAyNTcuLjI4NSBleHRyYSAqL1xuICAxNiwgMTYsIDE2LCAxNiwgMTYsIDE2LCAxNiwgMTYsIDE3LCAxNywgMTcsIDE3LCAxOCwgMTgsIDE4LCAxOCxcbiAgMTksIDE5LCAxOSwgMTksIDIwLCAyMCwgMjAsIDIwLCAyMSwgMjEsIDIxLCAyMSwgMTYsIDcyLCA3OFxuXTtcblxudmFyIGRiYXNlID0gWyAvKiBEaXN0YW5jZSBjb2RlcyAwLi4yOSBiYXNlICovXG4gIDEsIDIsIDMsIDQsIDUsIDcsIDksIDEzLCAxNywgMjUsIDMzLCA0OSwgNjUsIDk3LCAxMjksIDE5MyxcbiAgMjU3LCAzODUsIDUxMywgNzY5LCAxMDI1LCAxNTM3LCAyMDQ5LCAzMDczLCA0MDk3LCA2MTQ1LFxuICA4MTkzLCAxMjI4OSwgMTYzODUsIDI0NTc3LCAwLCAwXG5dO1xuXG52YXIgZGV4dCA9IFsgLyogRGlzdGFuY2UgY29kZXMgMC4uMjkgZXh0cmEgKi9cbiAgMTYsIDE2LCAxNiwgMTYsIDE3LCAxNywgMTgsIDE4LCAxOSwgMTksIDIwLCAyMCwgMjEsIDIxLCAyMiwgMjIsXG4gIDIzLCAyMywgMjQsIDI0LCAyNSwgMjUsIDI2LCAyNiwgMjcsIDI3LFxuICAyOCwgMjgsIDI5LCAyOSwgNjQsIDY0XG5dO1xuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBpbmZsYXRlX3RhYmxlKHR5cGUsIGxlbnMsIGxlbnNfaW5kZXgsIGNvZGVzLCB0YWJsZSwgdGFibGVfaW5kZXgsIHdvcmssIG9wdHMpIHtcbiAgdmFyIGJpdHMgPSBvcHRzLmJpdHM7XG4gIC8vaGVyZSA9IG9wdHMuaGVyZTsgLyogdGFibGUgZW50cnkgZm9yIGR1cGxpY2F0aW9uICovXG5cbiAgdmFyIGxlbiA9IDA7IC8qIGEgY29kZSdzIGxlbmd0aCBpbiBiaXRzICovXG4gIHZhciBzeW0gPSAwOyAvKiBpbmRleCBvZiBjb2RlIHN5bWJvbHMgKi9cbiAgdmFyIG1pbiA9IDAsXG4gICAgbWF4ID0gMDsgLyogbWluaW11bSBhbmQgbWF4aW11bSBjb2RlIGxlbmd0aHMgKi9cbiAgdmFyIHJvb3QgPSAwOyAvKiBudW1iZXIgb2YgaW5kZXggYml0cyBmb3Igcm9vdCB0YWJsZSAqL1xuICB2YXIgY3VyciA9IDA7IC8qIG51bWJlciBvZiBpbmRleCBiaXRzIGZvciBjdXJyZW50IHRhYmxlICovXG4gIHZhciBkcm9wID0gMDsgLyogY29kZSBiaXRzIHRvIGRyb3AgZm9yIHN1Yi10YWJsZSAqL1xuICB2YXIgbGVmdCA9IDA7IC8qIG51bWJlciBvZiBwcmVmaXggY29kZXMgYXZhaWxhYmxlICovXG4gIHZhciB1c2VkID0gMDsgLyogY29kZSBlbnRyaWVzIGluIHRhYmxlIHVzZWQgKi9cbiAgdmFyIGh1ZmYgPSAwOyAvKiBIdWZmbWFuIGNvZGUgKi9cbiAgdmFyIGluY3I7IC8qIGZvciBpbmNyZW1lbnRpbmcgY29kZSwgaW5kZXggKi9cbiAgdmFyIGZpbGw7IC8qIGluZGV4IGZvciByZXBsaWNhdGluZyBlbnRyaWVzICovXG4gIHZhciBsb3c7IC8qIGxvdyBiaXRzIGZvciBjdXJyZW50IHJvb3QgZW50cnkgKi9cbiAgdmFyIG1hc2s7IC8qIG1hc2sgZm9yIGxvdyByb290IGJpdHMgKi9cbiAgdmFyIG5leHQ7IC8qIG5leHQgYXZhaWxhYmxlIHNwYWNlIGluIHRhYmxlICovXG4gIHZhciBiYXNlID0gbnVsbDsgLyogYmFzZSB2YWx1ZSB0YWJsZSB0byB1c2UgKi9cbiAgdmFyIGJhc2VfaW5kZXggPSAwO1xuICAvLyAgdmFyIHNob2V4dHJhOyAgICAvKiBleHRyYSBiaXRzIHRhYmxlIHRvIHVzZSAqL1xuICB2YXIgZW5kOyAvKiB1c2UgYmFzZSBhbmQgZXh0cmEgZm9yIHN5bWJvbCA+IGVuZCAqL1xuICB2YXIgY291bnQgPSBuZXcgQnVmMTYoTUFYQklUUyArIDEpOyAvL1tNQVhCSVRTKzFdOyAgICAvKiBudW1iZXIgb2YgY29kZXMgb2YgZWFjaCBsZW5ndGggKi9cbiAgdmFyIG9mZnMgPSBuZXcgQnVmMTYoTUFYQklUUyArIDEpOyAvL1tNQVhCSVRTKzFdOyAgICAgLyogb2Zmc2V0cyBpbiB0YWJsZSBmb3IgZWFjaCBsZW5ndGggKi9cbiAgdmFyIGV4dHJhID0gbnVsbDtcbiAgdmFyIGV4dHJhX2luZGV4ID0gMDtcblxuICB2YXIgaGVyZV9iaXRzLCBoZXJlX29wLCBoZXJlX3ZhbDtcblxuICAvKlxuICAgUHJvY2VzcyBhIHNldCBvZiBjb2RlIGxlbmd0aHMgdG8gY3JlYXRlIGEgY2Fub25pY2FsIEh1ZmZtYW4gY29kZS4gIFRoZVxuICAgY29kZSBsZW5ndGhzIGFyZSBsZW5zWzAuLmNvZGVzLTFdLiAgRWFjaCBsZW5ndGggY29ycmVzcG9uZHMgdG8gdGhlXG4gICBzeW1ib2xzIDAuLmNvZGVzLTEuICBUaGUgSHVmZm1hbiBjb2RlIGlzIGdlbmVyYXRlZCBieSBmaXJzdCBzb3J0aW5nIHRoZVxuICAgc3ltYm9scyBieSBsZW5ndGggZnJvbSBzaG9ydCB0byBsb25nLCBhbmQgcmV0YWluaW5nIHRoZSBzeW1ib2wgb3JkZXJcbiAgIGZvciBjb2RlcyB3aXRoIGVxdWFsIGxlbmd0aHMuICBUaGVuIHRoZSBjb2RlIHN0YXJ0cyB3aXRoIGFsbCB6ZXJvIGJpdHNcbiAgIGZvciB0aGUgZmlyc3QgY29kZSBvZiB0aGUgc2hvcnRlc3QgbGVuZ3RoLCBhbmQgdGhlIGNvZGVzIGFyZSBpbnRlZ2VyXG4gICBpbmNyZW1lbnRzIGZvciB0aGUgc2FtZSBsZW5ndGgsIGFuZCB6ZXJvcyBhcmUgYXBwZW5kZWQgYXMgdGhlIGxlbmd0aFxuICAgaW5jcmVhc2VzLiAgRm9yIHRoZSBkZWZsYXRlIGZvcm1hdCwgdGhlc2UgYml0cyBhcmUgc3RvcmVkIGJhY2t3YXJkc1xuICAgZnJvbSB0aGVpciBtb3JlIG5hdHVyYWwgaW50ZWdlciBpbmNyZW1lbnQgb3JkZXJpbmcsIGFuZCBzbyB3aGVuIHRoZVxuICAgZGVjb2RpbmcgdGFibGVzIGFyZSBidWlsdCBpbiB0aGUgbGFyZ2UgbG9vcCBiZWxvdywgdGhlIGludGVnZXIgY29kZXNcbiAgIGFyZSBpbmNyZW1lbnRlZCBiYWNrd2FyZHMuXG5cbiAgIFRoaXMgcm91dGluZSBhc3N1bWVzLCBidXQgZG9lcyBub3QgY2hlY2ssIHRoYXQgYWxsIG9mIHRoZSBlbnRyaWVzIGluXG4gICBsZW5zW10gYXJlIGluIHRoZSByYW5nZSAwLi5NQVhCSVRTLiAgVGhlIGNhbGxlciBtdXN0IGFzc3VyZSB0aGlzLlxuICAgMS4uTUFYQklUUyBpcyBpbnRlcnByZXRlZCBhcyB0aGF0IGNvZGUgbGVuZ3RoLiAgemVybyBtZWFucyB0aGF0IHRoYXRcbiAgIHN5bWJvbCBkb2VzIG5vdCBvY2N1ciBpbiB0aGlzIGNvZGUuXG5cbiAgIFRoZSBjb2RlcyBhcmUgc29ydGVkIGJ5IGNvbXB1dGluZyBhIGNvdW50IG9mIGNvZGVzIGZvciBlYWNoIGxlbmd0aCxcbiAgIGNyZWF0aW5nIGZyb20gdGhhdCBhIHRhYmxlIG9mIHN0YXJ0aW5nIGluZGljZXMgZm9yIGVhY2ggbGVuZ3RoIGluIHRoZVxuICAgc29ydGVkIHRhYmxlLCBhbmQgdGhlbiBlbnRlcmluZyB0aGUgc3ltYm9scyBpbiBvcmRlciBpbiB0aGUgc29ydGVkXG4gICB0YWJsZS4gIFRoZSBzb3J0ZWQgdGFibGUgaXMgd29ya1tdLCB3aXRoIHRoYXQgc3BhY2UgYmVpbmcgcHJvdmlkZWQgYnlcbiAgIHRoZSBjYWxsZXIuXG5cbiAgIFRoZSBsZW5ndGggY291bnRzIGFyZSB1c2VkIGZvciBvdGhlciBwdXJwb3NlcyBhcyB3ZWxsLCBpLmUuIGZpbmRpbmdcbiAgIHRoZSBtaW5pbXVtIGFuZCBtYXhpbXVtIGxlbmd0aCBjb2RlcywgZGV0ZXJtaW5pbmcgaWYgdGhlcmUgYXJlIGFueVxuICAgY29kZXMgYXQgYWxsLCBjaGVja2luZyBmb3IgYSB2YWxpZCBzZXQgb2YgbGVuZ3RocywgYW5kIGxvb2tpbmcgYWhlYWRcbiAgIGF0IGxlbmd0aCBjb3VudHMgdG8gZGV0ZXJtaW5lIHN1Yi10YWJsZSBzaXplcyB3aGVuIGJ1aWxkaW5nIHRoZVxuICAgZGVjb2RpbmcgdGFibGVzLlxuICAgKi9cblxuICAvKiBhY2N1bXVsYXRlIGxlbmd0aHMgZm9yIGNvZGVzIChhc3N1bWVzIGxlbnNbXSBhbGwgaW4gMC4uTUFYQklUUykgKi9cbiAgZm9yIChsZW4gPSAwOyBsZW4gPD0gTUFYQklUUzsgbGVuKyspIHtcbiAgICBjb3VudFtsZW5dID0gMDtcbiAgfVxuICBmb3IgKHN5bSA9IDA7IHN5bSA8IGNvZGVzOyBzeW0rKykge1xuICAgIGNvdW50W2xlbnNbbGVuc19pbmRleCArIHN5bV1dKys7XG4gIH1cblxuICAvKiBib3VuZCBjb2RlIGxlbmd0aHMsIGZvcmNlIHJvb3QgdG8gYmUgd2l0aGluIGNvZGUgbGVuZ3RocyAqL1xuICByb290ID0gYml0cztcbiAgZm9yIChtYXggPSBNQVhCSVRTOyBtYXggPj0gMTsgbWF4LS0pIHtcbiAgICBpZiAoY291bnRbbWF4XSAhPT0gMCkge1xuICAgICAgYnJlYWs7XG4gICAgfVxuICB9XG4gIGlmIChyb290ID4gbWF4KSB7XG4gICAgcm9vdCA9IG1heDtcbiAgfVxuICBpZiAobWF4ID09PSAwKSB7IC8qIG5vIHN5bWJvbHMgdG8gY29kZSBhdCBhbGwgKi9cbiAgICAvL3RhYmxlLm9wW29wdHMudGFibGVfaW5kZXhdID0gNjQ7ICAvL2hlcmUub3AgPSAodmFyIGNoYXIpNjQ7ICAgIC8qIGludmFsaWQgY29kZSBtYXJrZXIgKi9cbiAgICAvL3RhYmxlLmJpdHNbb3B0cy50YWJsZV9pbmRleF0gPSAxOyAgIC8vaGVyZS5iaXRzID0gKHZhciBjaGFyKTE7XG4gICAgLy90YWJsZS52YWxbb3B0cy50YWJsZV9pbmRleCsrXSA9IDA7ICAgLy9oZXJlLnZhbCA9ICh2YXIgc2hvcnQpMDtcbiAgICB0YWJsZVt0YWJsZV9pbmRleCsrXSA9ICgxIDw8IDI0KSB8ICg2NCA8PCAxNikgfCAwO1xuXG5cbiAgICAvL3RhYmxlLm9wW29wdHMudGFibGVfaW5kZXhdID0gNjQ7XG4gICAgLy90YWJsZS5iaXRzW29wdHMudGFibGVfaW5kZXhdID0gMTtcbiAgICAvL3RhYmxlLnZhbFtvcHRzLnRhYmxlX2luZGV4KytdID0gMDtcbiAgICB0YWJsZVt0YWJsZV9pbmRleCsrXSA9ICgxIDw8IDI0KSB8ICg2NCA8PCAxNikgfCAwO1xuXG4gICAgb3B0cy5iaXRzID0gMTtcbiAgICByZXR1cm4gMDsgLyogbm8gc3ltYm9scywgYnV0IHdhaXQgZm9yIGRlY29kaW5nIHRvIHJlcG9ydCBlcnJvciAqL1xuICB9XG4gIGZvciAobWluID0gMTsgbWluIDwgbWF4OyBtaW4rKykge1xuICAgIGlmIChjb3VudFttaW5dICE9PSAwKSB7XG4gICAgICBicmVhaztcbiAgICB9XG4gIH1cbiAgaWYgKHJvb3QgPCBtaW4pIHtcbiAgICByb290ID0gbWluO1xuICB9XG5cbiAgLyogY2hlY2sgZm9yIGFuIG92ZXItc3Vic2NyaWJlZCBvciBpbmNvbXBsZXRlIHNldCBvZiBsZW5ndGhzICovXG4gIGxlZnQgPSAxO1xuICBmb3IgKGxlbiA9IDE7IGxlbiA8PSBNQVhCSVRTOyBsZW4rKykge1xuICAgIGxlZnQgPDw9IDE7XG4gICAgbGVmdCAtPSBjb3VudFtsZW5dO1xuICAgIGlmIChsZWZ0IDwgMCkge1xuICAgICAgcmV0dXJuIC0xO1xuICAgIH0gLyogb3Zlci1zdWJzY3JpYmVkICovXG4gIH1cbiAgaWYgKGxlZnQgPiAwICYmICh0eXBlID09PSBDT0RFUyB8fCBtYXggIT09IDEpKSB7XG4gICAgcmV0dXJuIC0xOyAvKiBpbmNvbXBsZXRlIHNldCAqL1xuICB9XG5cbiAgLyogZ2VuZXJhdGUgb2Zmc2V0cyBpbnRvIHN5bWJvbCB0YWJsZSBmb3IgZWFjaCBsZW5ndGggZm9yIHNvcnRpbmcgKi9cbiAgb2Zmc1sxXSA9IDA7XG4gIGZvciAobGVuID0gMTsgbGVuIDwgTUFYQklUUzsgbGVuKyspIHtcbiAgICBvZmZzW2xlbiArIDFdID0gb2Zmc1tsZW5dICsgY291bnRbbGVuXTtcbiAgfVxuXG4gIC8qIHNvcnQgc3ltYm9scyBieSBsZW5ndGgsIGJ5IHN5bWJvbCBvcmRlciB3aXRoaW4gZWFjaCBsZW5ndGggKi9cbiAgZm9yIChzeW0gPSAwOyBzeW0gPCBjb2Rlczsgc3ltKyspIHtcbiAgICBpZiAobGVuc1tsZW5zX2luZGV4ICsgc3ltXSAhPT0gMCkge1xuICAgICAgd29ya1tvZmZzW2xlbnNbbGVuc19pbmRleCArIHN5bV1dKytdID0gc3ltO1xuICAgIH1cbiAgfVxuXG4gIC8qXG4gICBDcmVhdGUgYW5kIGZpbGwgaW4gZGVjb2RpbmcgdGFibGVzLiAgSW4gdGhpcyBsb29wLCB0aGUgdGFibGUgYmVpbmdcbiAgIGZpbGxlZCBpcyBhdCBuZXh0IGFuZCBoYXMgY3VyciBpbmRleCBiaXRzLiAgVGhlIGNvZGUgYmVpbmcgdXNlZCBpcyBodWZmXG4gICB3aXRoIGxlbmd0aCBsZW4uICBUaGF0IGNvZGUgaXMgY29udmVydGVkIHRvIGFuIGluZGV4IGJ5IGRyb3BwaW5nIGRyb3BcbiAgIGJpdHMgb2ZmIG9mIHRoZSBib3R0b20uICBGb3IgY29kZXMgd2hlcmUgbGVuIGlzIGxlc3MgdGhhbiBkcm9wICsgY3VycixcbiAgIHRob3NlIHRvcCBkcm9wICsgY3VyciAtIGxlbiBiaXRzIGFyZSBpbmNyZW1lbnRlZCB0aHJvdWdoIGFsbCB2YWx1ZXMgdG9cbiAgIGZpbGwgdGhlIHRhYmxlIHdpdGggcmVwbGljYXRlZCBlbnRyaWVzLlxuXG4gICByb290IGlzIHRoZSBudW1iZXIgb2YgaW5kZXggYml0cyBmb3IgdGhlIHJvb3QgdGFibGUuICBXaGVuIGxlbiBleGNlZWRzXG4gICByb290LCBzdWItdGFibGVzIGFyZSBjcmVhdGVkIHBvaW50ZWQgdG8gYnkgdGhlIHJvb3QgZW50cnkgd2l0aCBhbiBpbmRleFxuICAgb2YgdGhlIGxvdyByb290IGJpdHMgb2YgaHVmZi4gIFRoaXMgaXMgc2F2ZWQgaW4gbG93IHRvIGNoZWNrIGZvciB3aGVuIGFcbiAgIG5ldyBzdWItdGFibGUgc2hvdWxkIGJlIHN0YXJ0ZWQuICBkcm9wIGlzIHplcm8gd2hlbiB0aGUgcm9vdCB0YWJsZSBpc1xuICAgYmVpbmcgZmlsbGVkLCBhbmQgZHJvcCBpcyByb290IHdoZW4gc3ViLXRhYmxlcyBhcmUgYmVpbmcgZmlsbGVkLlxuXG4gICBXaGVuIGEgbmV3IHN1Yi10YWJsZSBpcyBuZWVkZWQsIGl0IGlzIG5lY2Vzc2FyeSB0byBsb29rIGFoZWFkIGluIHRoZVxuICAgY29kZSBsZW5ndGhzIHRvIGRldGVybWluZSB3aGF0IHNpemUgc3ViLXRhYmxlIGlzIG5lZWRlZC4gIFRoZSBsZW5ndGhcbiAgIGNvdW50cyBhcmUgdXNlZCBmb3IgdGhpcywgYW5kIHNvIGNvdW50W10gaXMgZGVjcmVtZW50ZWQgYXMgY29kZXMgYXJlXG4gICBlbnRlcmVkIGluIHRoZSB0YWJsZXMuXG5cbiAgIHVzZWQga2VlcHMgdHJhY2sgb2YgaG93IG1hbnkgdGFibGUgZW50cmllcyBoYXZlIGJlZW4gYWxsb2NhdGVkIGZyb20gdGhlXG4gICBwcm92aWRlZCAqdGFibGUgc3BhY2UuICBJdCBpcyBjaGVja2VkIGZvciBMRU5TIGFuZCBESVNUIHRhYmxlcyBhZ2FpbnN0XG4gICB0aGUgY29uc3RhbnRzIEVOT1VHSF9MRU5TIGFuZCBFTk9VR0hfRElTVFMgdG8gZ3VhcmQgYWdhaW5zdCBjaGFuZ2VzIGluXG4gICB0aGUgaW5pdGlhbCByb290IHRhYmxlIHNpemUgY29uc3RhbnRzLiAgU2VlIHRoZSBjb21tZW50cyBpbiBpbmZ0cmVlcy5oXG4gICBmb3IgbW9yZSBpbmZvcm1hdGlvbi5cblxuICAgc3ltIGluY3JlbWVudHMgdGhyb3VnaCBhbGwgc3ltYm9scywgYW5kIHRoZSBsb29wIHRlcm1pbmF0ZXMgd2hlblxuICAgYWxsIGNvZGVzIG9mIGxlbmd0aCBtYXgsIGkuZS4gYWxsIGNvZGVzLCBoYXZlIGJlZW4gcHJvY2Vzc2VkLiAgVGhpc1xuICAgcm91dGluZSBwZXJtaXRzIGluY29tcGxldGUgY29kZXMsIHNvIGFub3RoZXIgbG9vcCBhZnRlciB0aGlzIG9uZSBmaWxsc1xuICAgaW4gdGhlIHJlc3Qgb2YgdGhlIGRlY29kaW5nIHRhYmxlcyB3aXRoIGludmFsaWQgY29kZSBtYXJrZXJzLlxuICAgKi9cblxuICAvKiBzZXQgdXAgZm9yIGNvZGUgdHlwZSAqL1xuICAvLyBwb29yIG1hbiBvcHRpbWl6YXRpb24gLSB1c2UgaWYtZWxzZSBpbnN0ZWFkIG9mIHN3aXRjaCxcbiAgLy8gdG8gYXZvaWQgZGVvcHRzIGluIG9sZCB2OFxuICBpZiAodHlwZSA9PT0gQ09ERVMpIHtcbiAgICBiYXNlID0gZXh0cmEgPSB3b3JrOyAvKiBkdW1teSB2YWx1ZS0tbm90IHVzZWQgKi9cbiAgICBlbmQgPSAxOTtcblxuICB9IGVsc2UgaWYgKHR5cGUgPT09IExFTlMpIHtcbiAgICBiYXNlID0gbGJhc2U7XG4gICAgYmFzZV9pbmRleCAtPSAyNTc7XG4gICAgZXh0cmEgPSBsZXh0O1xuICAgIGV4dHJhX2luZGV4IC09IDI1NztcbiAgICBlbmQgPSAyNTY7XG5cbiAgfSBlbHNlIHsgLyogRElTVFMgKi9cbiAgICBiYXNlID0gZGJhc2U7XG4gICAgZXh0cmEgPSBkZXh0O1xuICAgIGVuZCA9IC0xO1xuICB9XG5cbiAgLyogaW5pdGlhbGl6ZSBvcHRzIGZvciBsb29wICovXG4gIGh1ZmYgPSAwOyAvKiBzdGFydGluZyBjb2RlICovXG4gIHN5bSA9IDA7IC8qIHN0YXJ0aW5nIGNvZGUgc3ltYm9sICovXG4gIGxlbiA9IG1pbjsgLyogc3RhcnRpbmcgY29kZSBsZW5ndGggKi9cbiAgbmV4dCA9IHRhYmxlX2luZGV4OyAvKiBjdXJyZW50IHRhYmxlIHRvIGZpbGwgaW4gKi9cbiAgY3VyciA9IHJvb3Q7IC8qIGN1cnJlbnQgdGFibGUgaW5kZXggYml0cyAqL1xuICBkcm9wID0gMDsgLyogY3VycmVudCBiaXRzIHRvIGRyb3AgZnJvbSBjb2RlIGZvciBpbmRleCAqL1xuICBsb3cgPSAtMTsgLyogdHJpZ2dlciBuZXcgc3ViLXRhYmxlIHdoZW4gbGVuID4gcm9vdCAqL1xuICB1c2VkID0gMSA8PCByb290OyAvKiB1c2Ugcm9vdCB0YWJsZSBlbnRyaWVzICovXG4gIG1hc2sgPSB1c2VkIC0gMTsgLyogbWFzayBmb3IgY29tcGFyaW5nIGxvdyAqL1xuXG4gIC8qIGNoZWNrIGF2YWlsYWJsZSB0YWJsZSBzcGFjZSAqL1xuICBpZiAoKHR5cGUgPT09IExFTlMgJiYgdXNlZCA+IEVOT1VHSF9MRU5TKSB8fFxuICAgICh0eXBlID09PSBESVNUUyAmJiB1c2VkID4gRU5PVUdIX0RJU1RTKSkge1xuICAgIHJldHVybiAxO1xuICB9XG5cbiAgdmFyIGkgPSAwO1xuICAvKiBwcm9jZXNzIGFsbCBjb2RlcyBhbmQgbWFrZSB0YWJsZSBlbnRyaWVzICovXG4gIGZvciAoOzspIHtcbiAgICBpKys7XG4gICAgLyogY3JlYXRlIHRhYmxlIGVudHJ5ICovXG4gICAgaGVyZV9iaXRzID0gbGVuIC0gZHJvcDtcbiAgICBpZiAod29ya1tzeW1dIDwgZW5kKSB7XG4gICAgICBoZXJlX29wID0gMDtcbiAgICAgIGhlcmVfdmFsID0gd29ya1tzeW1dO1xuICAgIH0gZWxzZSBpZiAod29ya1tzeW1dID4gZW5kKSB7XG4gICAgICBoZXJlX29wID0gZXh0cmFbZXh0cmFfaW5kZXggKyB3b3JrW3N5bV1dO1xuICAgICAgaGVyZV92YWwgPSBiYXNlW2Jhc2VfaW5kZXggKyB3b3JrW3N5bV1dO1xuICAgIH0gZWxzZSB7XG4gICAgICBoZXJlX29wID0gMzIgKyA2NDsgLyogZW5kIG9mIGJsb2NrICovXG4gICAgICBoZXJlX3ZhbCA9IDA7XG4gICAgfVxuXG4gICAgLyogcmVwbGljYXRlIGZvciB0aG9zZSBpbmRpY2VzIHdpdGggbG93IGxlbiBiaXRzIGVxdWFsIHRvIGh1ZmYgKi9cbiAgICBpbmNyID0gMSA8PCAobGVuIC0gZHJvcCk7XG4gICAgZmlsbCA9IDEgPDwgY3VycjtcbiAgICBtaW4gPSBmaWxsOyAvKiBzYXZlIG9mZnNldCB0byBuZXh0IHRhYmxlICovXG4gICAgZG8ge1xuICAgICAgZmlsbCAtPSBpbmNyO1xuICAgICAgdGFibGVbbmV4dCArIChodWZmID4+IGRyb3ApICsgZmlsbF0gPSAoaGVyZV9iaXRzIDw8IDI0KSB8IChoZXJlX29wIDw8IDE2KSB8IGhlcmVfdmFsIHwgMDtcbiAgICB9IHdoaWxlIChmaWxsICE9PSAwKTtcblxuICAgIC8qIGJhY2t3YXJkcyBpbmNyZW1lbnQgdGhlIGxlbi1iaXQgY29kZSBodWZmICovXG4gICAgaW5jciA9IDEgPDwgKGxlbiAtIDEpO1xuICAgIHdoaWxlIChodWZmICYgaW5jcikge1xuICAgICAgaW5jciA+Pj0gMTtcbiAgICB9XG4gICAgaWYgKGluY3IgIT09IDApIHtcbiAgICAgIGh1ZmYgJj0gaW5jciAtIDE7XG4gICAgICBodWZmICs9IGluY3I7XG4gICAgfSBlbHNlIHtcbiAgICAgIGh1ZmYgPSAwO1xuICAgIH1cblxuICAgIC8qIGdvIHRvIG5leHQgc3ltYm9sLCB1cGRhdGUgY291bnQsIGxlbiAqL1xuICAgIHN5bSsrO1xuICAgIGlmICgtLWNvdW50W2xlbl0gPT09IDApIHtcbiAgICAgIGlmIChsZW4gPT09IG1heCkge1xuICAgICAgICBicmVhaztcbiAgICAgIH1cbiAgICAgIGxlbiA9IGxlbnNbbGVuc19pbmRleCArIHdvcmtbc3ltXV07XG4gICAgfVxuXG4gICAgLyogY3JlYXRlIG5ldyBzdWItdGFibGUgaWYgbmVlZGVkICovXG4gICAgaWYgKGxlbiA+IHJvb3QgJiYgKGh1ZmYgJiBtYXNrKSAhPT0gbG93KSB7XG4gICAgICAvKiBpZiBmaXJzdCB0aW1lLCB0cmFuc2l0aW9uIHRvIHN1Yi10YWJsZXMgKi9cbiAgICAgIGlmIChkcm9wID09PSAwKSB7XG4gICAgICAgIGRyb3AgPSByb290O1xuICAgICAgfVxuXG4gICAgICAvKiBpbmNyZW1lbnQgcGFzdCBsYXN0IHRhYmxlICovXG4gICAgICBuZXh0ICs9IG1pbjsgLyogaGVyZSBtaW4gaXMgMSA8PCBjdXJyICovXG5cbiAgICAgIC8qIGRldGVybWluZSBsZW5ndGggb2YgbmV4dCB0YWJsZSAqL1xuICAgICAgY3VyciA9IGxlbiAtIGRyb3A7XG4gICAgICBsZWZ0ID0gMSA8PCBjdXJyO1xuICAgICAgd2hpbGUgKGN1cnIgKyBkcm9wIDwgbWF4KSB7XG4gICAgICAgIGxlZnQgLT0gY291bnRbY3VyciArIGRyb3BdO1xuICAgICAgICBpZiAobGVmdCA8PSAwKSB7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgICAgY3VycisrO1xuICAgICAgICBsZWZ0IDw8PSAxO1xuICAgICAgfVxuXG4gICAgICAvKiBjaGVjayBmb3IgZW5vdWdoIHNwYWNlICovXG4gICAgICB1c2VkICs9IDEgPDwgY3VycjtcbiAgICAgIGlmICgodHlwZSA9PT0gTEVOUyAmJiB1c2VkID4gRU5PVUdIX0xFTlMpIHx8XG4gICAgICAgICh0eXBlID09PSBESVNUUyAmJiB1c2VkID4gRU5PVUdIX0RJU1RTKSkge1xuICAgICAgICByZXR1cm4gMTtcbiAgICAgIH1cblxuICAgICAgLyogcG9pbnQgZW50cnkgaW4gcm9vdCB0YWJsZSB0byBzdWItdGFibGUgKi9cbiAgICAgIGxvdyA9IGh1ZmYgJiBtYXNrO1xuICAgICAgLyp0YWJsZS5vcFtsb3ddID0gY3VycjtcbiAgICAgIHRhYmxlLmJpdHNbbG93XSA9IHJvb3Q7XG4gICAgICB0YWJsZS52YWxbbG93XSA9IG5leHQgLSBvcHRzLnRhYmxlX2luZGV4OyovXG4gICAgICB0YWJsZVtsb3ddID0gKHJvb3QgPDwgMjQpIHwgKGN1cnIgPDwgMTYpIHwgKG5leHQgLSB0YWJsZV9pbmRleCkgfCAwO1xuICAgIH1cbiAgfVxuXG4gIC8qIGZpbGwgaW4gcmVtYWluaW5nIHRhYmxlIGVudHJ5IGlmIGNvZGUgaXMgaW5jb21wbGV0ZSAoZ3VhcmFudGVlZCB0byBoYXZlXG4gICBhdCBtb3N0IG9uZSByZW1haW5pbmcgZW50cnksIHNpbmNlIGlmIHRoZSBjb2RlIGlzIGluY29tcGxldGUsIHRoZVxuICAgbWF4aW11bSBjb2RlIGxlbmd0aCB0aGF0IHdhcyBhbGxvd2VkIHRvIGdldCB0aGlzIGZhciBpcyBvbmUgYml0KSAqL1xuICBpZiAoaHVmZiAhPT0gMCkge1xuICAgIC8vdGFibGUub3BbbmV4dCArIGh1ZmZdID0gNjQ7ICAgICAgICAgICAgLyogaW52YWxpZCBjb2RlIG1hcmtlciAqL1xuICAgIC8vdGFibGUuYml0c1tuZXh0ICsgaHVmZl0gPSBsZW4gLSBkcm9wO1xuICAgIC8vdGFibGUudmFsW25leHQgKyBodWZmXSA9IDA7XG4gICAgdGFibGVbbmV4dCArIGh1ZmZdID0gKChsZW4gLSBkcm9wKSA8PCAyNCkgfCAoNjQgPDwgMTYpIHwgMDtcbiAgfVxuXG4gIC8qIHNldCByZXR1cm4gcGFyYW1ldGVycyAqL1xuICAvL29wdHMudGFibGVfaW5kZXggKz0gdXNlZDtcbiAgb3B0cy5iaXRzID0gcm9vdDtcbiAgcmV0dXJuIDA7XG59O1xuIiwgIid1c2Ugc3RyaWN0JztcblxuaW1wb3J0IHtCdWY4LEJ1ZjE2LEJ1ZjMyLGFycmF5U2V0fSBmcm9tICcuL3V0aWxzJztcbmltcG9ydCBhZGxlcjMyIGZyb20gJy4vYWRsZXIzMic7XG5pbXBvcnQgY3JjMzIgZnJvbSAnLi9jcmMzMic7XG5pbXBvcnQgaW5mbGF0ZV9mYXN0IGZyb20gJy4vaW5mZmFzdCc7XG5pbXBvcnQgaW5mbGF0ZV90YWJsZSBmcm9tICcuL2luZnRyZWVzJztcblxudmFyIENPREVTID0gMDtcbnZhciBMRU5TID0gMTtcbnZhciBESVNUUyA9IDI7XG5cbi8qIFB1YmxpYyBjb25zdGFudHMgPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PSovXG4vKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0qL1xuXG5cbi8qIEFsbG93ZWQgZmx1c2ggdmFsdWVzOyBzZWUgZGVmbGF0ZSgpIGFuZCBpbmZsYXRlKCkgYmVsb3cgZm9yIGRldGFpbHMgKi9cbi8vdmFyIFpfTk9fRkxVU0ggICAgICA9IDA7XG4vL3ZhciBaX1BBUlRJQUxfRkxVU0ggPSAxO1xuLy92YXIgWl9TWU5DX0ZMVVNIICAgID0gMjtcbi8vdmFyIFpfRlVMTF9GTFVTSCAgICA9IDM7XG52YXIgWl9GSU5JU0ggPSA0O1xudmFyIFpfQkxPQ0sgPSA1O1xudmFyIFpfVFJFRVMgPSA2O1xuXG5cbi8qIFJldHVybiBjb2RlcyBmb3IgdGhlIGNvbXByZXNzaW9uL2RlY29tcHJlc3Npb24gZnVuY3Rpb25zLiBOZWdhdGl2ZSB2YWx1ZXNcbiAqIGFyZSBlcnJvcnMsIHBvc2l0aXZlIHZhbHVlcyBhcmUgdXNlZCBmb3Igc3BlY2lhbCBidXQgbm9ybWFsIGV2ZW50cy5cbiAqL1xudmFyIFpfT0sgPSAwO1xudmFyIFpfU1RSRUFNX0VORCA9IDE7XG52YXIgWl9ORUVEX0RJQ1QgPSAyO1xuLy92YXIgWl9FUlJOTyAgICAgICAgID0gLTE7XG52YXIgWl9TVFJFQU1fRVJST1IgPSAtMjtcbnZhciBaX0RBVEFfRVJST1IgPSAtMztcbnZhciBaX01FTV9FUlJPUiA9IC00O1xudmFyIFpfQlVGX0VSUk9SID0gLTU7XG4vL3ZhciBaX1ZFUlNJT05fRVJST1IgPSAtNjtcblxuLyogVGhlIGRlZmxhdGUgY29tcHJlc3Npb24gbWV0aG9kICovXG52YXIgWl9ERUZMQVRFRCA9IDg7XG5cblxuLyogU1RBVEVTID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09Ki9cbi8qID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PSovXG5cblxudmFyIEhFQUQgPSAxOyAvKiBpOiB3YWl0aW5nIGZvciBtYWdpYyBoZWFkZXIgKi9cbnZhciBGTEFHUyA9IDI7IC8qIGk6IHdhaXRpbmcgZm9yIG1ldGhvZCBhbmQgZmxhZ3MgKGd6aXApICovXG52YXIgVElNRSA9IDM7IC8qIGk6IHdhaXRpbmcgZm9yIG1vZGlmaWNhdGlvbiB0aW1lIChnemlwKSAqL1xudmFyIE9TID0gNDsgLyogaTogd2FpdGluZyBmb3IgZXh0cmEgZmxhZ3MgYW5kIG9wZXJhdGluZyBzeXN0ZW0gKGd6aXApICovXG52YXIgRVhMRU4gPSA1OyAvKiBpOiB3YWl0aW5nIGZvciBleHRyYSBsZW5ndGggKGd6aXApICovXG52YXIgRVhUUkEgPSA2OyAvKiBpOiB3YWl0aW5nIGZvciBleHRyYSBieXRlcyAoZ3ppcCkgKi9cbnZhciBOQU1FID0gNzsgLyogaTogd2FpdGluZyBmb3IgZW5kIG9mIGZpbGUgbmFtZSAoZ3ppcCkgKi9cbnZhciBDT01NRU5UID0gODsgLyogaTogd2FpdGluZyBmb3IgZW5kIG9mIGNvbW1lbnQgKGd6aXApICovXG52YXIgSENSQyA9IDk7IC8qIGk6IHdhaXRpbmcgZm9yIGhlYWRlciBjcmMgKGd6aXApICovXG52YXIgRElDVElEID0gMTA7IC8qIGk6IHdhaXRpbmcgZm9yIGRpY3Rpb25hcnkgY2hlY2sgdmFsdWUgKi9cbnZhciBESUNUID0gMTE7IC8qIHdhaXRpbmcgZm9yIGluZmxhdGVTZXREaWN0aW9uYXJ5KCkgY2FsbCAqL1xudmFyIFRZUEUgPSAxMjsgLyogaTogd2FpdGluZyBmb3IgdHlwZSBiaXRzLCBpbmNsdWRpbmcgbGFzdC1mbGFnIGJpdCAqL1xudmFyIFRZUEVETyA9IDEzOyAvKiBpOiBzYW1lLCBidXQgc2tpcCBjaGVjayB0byBleGl0IGluZmxhdGUgb24gbmV3IGJsb2NrICovXG52YXIgU1RPUkVEID0gMTQ7IC8qIGk6IHdhaXRpbmcgZm9yIHN0b3JlZCBzaXplIChsZW5ndGggYW5kIGNvbXBsZW1lbnQpICovXG52YXIgQ09QWV8gPSAxNTsgLyogaS9vOiBzYW1lIGFzIENPUFkgYmVsb3csIGJ1dCBvbmx5IGZpcnN0IHRpbWUgaW4gKi9cbnZhciBDT1BZID0gMTY7IC8qIGkvbzogd2FpdGluZyBmb3IgaW5wdXQgb3Igb3V0cHV0IHRvIGNvcHkgc3RvcmVkIGJsb2NrICovXG52YXIgVEFCTEUgPSAxNzsgLyogaTogd2FpdGluZyBmb3IgZHluYW1pYyBibG9jayB0YWJsZSBsZW5ndGhzICovXG52YXIgTEVOTEVOUyA9IDE4OyAvKiBpOiB3YWl0aW5nIGZvciBjb2RlIGxlbmd0aCBjb2RlIGxlbmd0aHMgKi9cbnZhciBDT0RFTEVOUyA9IDE5OyAvKiBpOiB3YWl0aW5nIGZvciBsZW5ndGgvbGl0IGFuZCBkaXN0YW5jZSBjb2RlIGxlbmd0aHMgKi9cbnZhciBMRU5fID0gMjA7IC8qIGk6IHNhbWUgYXMgTEVOIGJlbG93LCBidXQgb25seSBmaXJzdCB0aW1lIGluICovXG52YXIgTEVOID0gMjE7IC8qIGk6IHdhaXRpbmcgZm9yIGxlbmd0aC9saXQvZW9iIGNvZGUgKi9cbnZhciBMRU5FWFQgPSAyMjsgLyogaTogd2FpdGluZyBmb3IgbGVuZ3RoIGV4dHJhIGJpdHMgKi9cbnZhciBESVNUID0gMjM7IC8qIGk6IHdhaXRpbmcgZm9yIGRpc3RhbmNlIGNvZGUgKi9cbnZhciBESVNURVhUID0gMjQ7IC8qIGk6IHdhaXRpbmcgZm9yIGRpc3RhbmNlIGV4dHJhIGJpdHMgKi9cbnZhciBNQVRDSCA9IDI1OyAvKiBvOiB3YWl0aW5nIGZvciBvdXRwdXQgc3BhY2UgdG8gY29weSBzdHJpbmcgKi9cbnZhciBMSVQgPSAyNjsgLyogbzogd2FpdGluZyBmb3Igb3V0cHV0IHNwYWNlIHRvIHdyaXRlIGxpdGVyYWwgKi9cbnZhciBDSEVDSyA9IDI3OyAvKiBpOiB3YWl0aW5nIGZvciAzMi1iaXQgY2hlY2sgdmFsdWUgKi9cbnZhciBMRU5HVEggPSAyODsgLyogaTogd2FpdGluZyBmb3IgMzItYml0IGxlbmd0aCAoZ3ppcCkgKi9cbnZhciBET05FID0gMjk7IC8qIGZpbmlzaGVkIGNoZWNrLCBkb25lIC0tIHJlbWFpbiBoZXJlIHVudGlsIHJlc2V0ICovXG52YXIgQkFEID0gMzA7IC8qIGdvdCBhIGRhdGEgZXJyb3IgLS0gcmVtYWluIGhlcmUgdW50aWwgcmVzZXQgKi9cbnZhciBNRU0gPSAzMTsgLyogZ290IGFuIGluZmxhdGUoKSBtZW1vcnkgZXJyb3IgLS0gcmVtYWluIGhlcmUgdW50aWwgcmVzZXQgKi9cbnZhciBTWU5DID0gMzI7IC8qIGxvb2tpbmcgZm9yIHN5bmNocm9uaXphdGlvbiBieXRlcyB0byByZXN0YXJ0IGluZmxhdGUoKSAqL1xuXG4vKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0qL1xuXG5cblxudmFyIEVOT1VHSF9MRU5TID0gODUyO1xudmFyIEVOT1VHSF9ESVNUUyA9IDU5Mjtcbi8vdmFyIEVOT1VHSCA9ICAoRU5PVUdIX0xFTlMrRU5PVUdIX0RJU1RTKTtcblxudmFyIE1BWF9XQklUUyA9IDE1O1xuLyogMzJLIExaNzcgd2luZG93ICovXG52YXIgREVGX1dCSVRTID0gTUFYX1dCSVRTO1xuXG5cbmZ1bmN0aW9uIHpzd2FwMzIocSkge1xuICByZXR1cm4gKCgocSA+Pj4gMjQpICYgMHhmZikgK1xuICAgICgocSA+Pj4gOCkgJiAweGZmMDApICtcbiAgICAoKHEgJiAweGZmMDApIDw8IDgpICtcbiAgICAoKHEgJiAweGZmKSA8PCAyNCkpO1xufVxuXG5cbmZ1bmN0aW9uIEluZmxhdGVTdGF0ZSgpIHtcbiAgdGhpcy5tb2RlID0gMDsgLyogY3VycmVudCBpbmZsYXRlIG1vZGUgKi9cbiAgdGhpcy5sYXN0ID0gZmFsc2U7IC8qIHRydWUgaWYgcHJvY2Vzc2luZyBsYXN0IGJsb2NrICovXG4gIHRoaXMud3JhcCA9IDA7IC8qIGJpdCAwIHRydWUgZm9yIHpsaWIsIGJpdCAxIHRydWUgZm9yIGd6aXAgKi9cbiAgdGhpcy5oYXZlZGljdCA9IGZhbHNlOyAvKiB0cnVlIGlmIGRpY3Rpb25hcnkgcHJvdmlkZWQgKi9cbiAgdGhpcy5mbGFncyA9IDA7IC8qIGd6aXAgaGVhZGVyIG1ldGhvZCBhbmQgZmxhZ3MgKDAgaWYgemxpYikgKi9cbiAgdGhpcy5kbWF4ID0gMDsgLyogemxpYiBoZWFkZXIgbWF4IGRpc3RhbmNlIChJTkZMQVRFX1NUUklDVCkgKi9cbiAgdGhpcy5jaGVjayA9IDA7IC8qIHByb3RlY3RlZCBjb3B5IG9mIGNoZWNrIHZhbHVlICovXG4gIHRoaXMudG90YWwgPSAwOyAvKiBwcm90ZWN0ZWQgY29weSBvZiBvdXRwdXQgY291bnQgKi9cbiAgLy8gVE9ETzogbWF5IGJlIHt9XG4gIHRoaXMuaGVhZCA9IG51bGw7IC8qIHdoZXJlIHRvIHNhdmUgZ3ppcCBoZWFkZXIgaW5mb3JtYXRpb24gKi9cblxuICAvKiBzbGlkaW5nIHdpbmRvdyAqL1xuICB0aGlzLndiaXRzID0gMDsgLyogbG9nIGJhc2UgMiBvZiByZXF1ZXN0ZWQgd2luZG93IHNpemUgKi9cbiAgdGhpcy53c2l6ZSA9IDA7IC8qIHdpbmRvdyBzaXplIG9yIHplcm8gaWYgbm90IHVzaW5nIHdpbmRvdyAqL1xuICB0aGlzLndoYXZlID0gMDsgLyogdmFsaWQgYnl0ZXMgaW4gdGhlIHdpbmRvdyAqL1xuICB0aGlzLnduZXh0ID0gMDsgLyogd2luZG93IHdyaXRlIGluZGV4ICovXG4gIHRoaXMud2luZG93ID0gbnVsbDsgLyogYWxsb2NhdGVkIHNsaWRpbmcgd2luZG93LCBpZiBuZWVkZWQgKi9cblxuICAvKiBiaXQgYWNjdW11bGF0b3IgKi9cbiAgdGhpcy5ob2xkID0gMDsgLyogaW5wdXQgYml0IGFjY3VtdWxhdG9yICovXG4gIHRoaXMuYml0cyA9IDA7IC8qIG51bWJlciBvZiBiaXRzIGluIFwiaW5cIiAqL1xuXG4gIC8qIGZvciBzdHJpbmcgYW5kIHN0b3JlZCBibG9jayBjb3B5aW5nICovXG4gIHRoaXMubGVuZ3RoID0gMDsgLyogbGl0ZXJhbCBvciBsZW5ndGggb2YgZGF0YSB0byBjb3B5ICovXG4gIHRoaXMub2Zmc2V0ID0gMDsgLyogZGlzdGFuY2UgYmFjayB0byBjb3B5IHN0cmluZyBmcm9tICovXG5cbiAgLyogZm9yIHRhYmxlIGFuZCBjb2RlIGRlY29kaW5nICovXG4gIHRoaXMuZXh0cmEgPSAwOyAvKiBleHRyYSBiaXRzIG5lZWRlZCAqL1xuXG4gIC8qIGZpeGVkIGFuZCBkeW5hbWljIGNvZGUgdGFibGVzICovXG4gIHRoaXMubGVuY29kZSA9IG51bGw7IC8qIHN0YXJ0aW5nIHRhYmxlIGZvciBsZW5ndGgvbGl0ZXJhbCBjb2RlcyAqL1xuICB0aGlzLmRpc3Rjb2RlID0gbnVsbDsgLyogc3RhcnRpbmcgdGFibGUgZm9yIGRpc3RhbmNlIGNvZGVzICovXG4gIHRoaXMubGVuYml0cyA9IDA7IC8qIGluZGV4IGJpdHMgZm9yIGxlbmNvZGUgKi9cbiAgdGhpcy5kaXN0Yml0cyA9IDA7IC8qIGluZGV4IGJpdHMgZm9yIGRpc3Rjb2RlICovXG5cbiAgLyogZHluYW1pYyB0YWJsZSBidWlsZGluZyAqL1xuICB0aGlzLm5jb2RlID0gMDsgLyogbnVtYmVyIG9mIGNvZGUgbGVuZ3RoIGNvZGUgbGVuZ3RocyAqL1xuICB0aGlzLm5sZW4gPSAwOyAvKiBudW1iZXIgb2YgbGVuZ3RoIGNvZGUgbGVuZ3RocyAqL1xuICB0aGlzLm5kaXN0ID0gMDsgLyogbnVtYmVyIG9mIGRpc3RhbmNlIGNvZGUgbGVuZ3RocyAqL1xuICB0aGlzLmhhdmUgPSAwOyAvKiBudW1iZXIgb2YgY29kZSBsZW5ndGhzIGluIGxlbnNbXSAqL1xuICB0aGlzLm5leHQgPSBudWxsOyAvKiBuZXh0IGF2YWlsYWJsZSBzcGFjZSBpbiBjb2Rlc1tdICovXG5cbiAgdGhpcy5sZW5zID0gbmV3IEJ1ZjE2KDMyMCk7IC8qIHRlbXBvcmFyeSBzdG9yYWdlIGZvciBjb2RlIGxlbmd0aHMgKi9cbiAgdGhpcy53b3JrID0gbmV3IEJ1ZjE2KDI4OCk7IC8qIHdvcmsgYXJlYSBmb3IgY29kZSB0YWJsZSBidWlsZGluZyAqL1xuXG4gIC8qXG4gICBiZWNhdXNlIHdlIGRvbid0IGhhdmUgcG9pbnRlcnMgaW4ganMsIHdlIHVzZSBsZW5jb2RlIGFuZCBkaXN0Y29kZSBkaXJlY3RseVxuICAgYXMgYnVmZmVycyBzbyB3ZSBkb24ndCBuZWVkIGNvZGVzXG4gICovXG4gIC8vdGhpcy5jb2RlcyA9IG5ldyBCdWYzMihFTk9VR0gpOyAgICAgICAvKiBzcGFjZSBmb3IgY29kZSB0YWJsZXMgKi9cbiAgdGhpcy5sZW5keW4gPSBudWxsOyAvKiBkeW5hbWljIHRhYmxlIGZvciBsZW5ndGgvbGl0ZXJhbCBjb2RlcyAoSlMgc3BlY2lmaWMpICovXG4gIHRoaXMuZGlzdGR5biA9IG51bGw7IC8qIGR5bmFtaWMgdGFibGUgZm9yIGRpc3RhbmNlIGNvZGVzIChKUyBzcGVjaWZpYykgKi9cbiAgdGhpcy5zYW5lID0gMDsgLyogaWYgZmFsc2UsIGFsbG93IGludmFsaWQgZGlzdGFuY2UgdG9vIGZhciAqL1xuICB0aGlzLmJhY2sgPSAwOyAvKiBiaXRzIGJhY2sgb2YgbGFzdCB1bnByb2Nlc3NlZCBsZW5ndGgvbGl0ICovXG4gIHRoaXMud2FzID0gMDsgLyogaW5pdGlhbCBsZW5ndGggb2YgbWF0Y2ggKi9cbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGluZmxhdGVSZXNldEtlZXAoc3RybSkge1xuICB2YXIgc3RhdGU7XG5cbiAgaWYgKCFzdHJtIHx8ICFzdHJtLnN0YXRlKSB7XG4gICAgcmV0dXJuIFpfU1RSRUFNX0VSUk9SO1xuICB9XG4gIHN0YXRlID0gc3RybS5zdGF0ZTtcbiAgc3RybS50b3RhbF9pbiA9IHN0cm0udG90YWxfb3V0ID0gc3RhdGUudG90YWwgPSAwO1xuICBzdHJtLm1zZyA9ICcnOyAvKlpfTlVMTCovXG4gIGlmIChzdGF0ZS53cmFwKSB7IC8qIHRvIHN1cHBvcnQgaWxsLWNvbmNlaXZlZCBKYXZhIHRlc3Qgc3VpdGUgKi9cbiAgICBzdHJtLmFkbGVyID0gc3RhdGUud3JhcCAmIDE7XG4gIH1cbiAgc3RhdGUubW9kZSA9IEhFQUQ7XG4gIHN0YXRlLmxhc3QgPSAwO1xuICBzdGF0ZS5oYXZlZGljdCA9IDA7XG4gIHN0YXRlLmRtYXggPSAzMjc2ODtcbiAgc3RhdGUuaGVhZCA9IG51bGwgLypaX05VTEwqLyA7XG4gIHN0YXRlLmhvbGQgPSAwO1xuICBzdGF0ZS5iaXRzID0gMDtcbiAgLy9zdGF0ZS5sZW5jb2RlID0gc3RhdGUuZGlzdGNvZGUgPSBzdGF0ZS5uZXh0ID0gc3RhdGUuY29kZXM7XG4gIHN0YXRlLmxlbmNvZGUgPSBzdGF0ZS5sZW5keW4gPSBuZXcgQnVmMzIoRU5PVUdIX0xFTlMpO1xuICBzdGF0ZS5kaXN0Y29kZSA9IHN0YXRlLmRpc3RkeW4gPSBuZXcgQnVmMzIoRU5PVUdIX0RJU1RTKTtcblxuICBzdGF0ZS5zYW5lID0gMTtcbiAgc3RhdGUuYmFjayA9IC0xO1xuICAvL1RyYWNldigoc3RkZXJyLCBcImluZmxhdGU6IHJlc2V0XFxuXCIpKTtcbiAgcmV0dXJuIFpfT0s7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBpbmZsYXRlUmVzZXQoc3RybSkge1xuICB2YXIgc3RhdGU7XG5cbiAgaWYgKCFzdHJtIHx8ICFzdHJtLnN0YXRlKSB7XG4gICAgcmV0dXJuIFpfU1RSRUFNX0VSUk9SO1xuICB9XG4gIHN0YXRlID0gc3RybS5zdGF0ZTtcbiAgc3RhdGUud3NpemUgPSAwO1xuICBzdGF0ZS53aGF2ZSA9IDA7XG4gIHN0YXRlLnduZXh0ID0gMDtcbiAgcmV0dXJuIGluZmxhdGVSZXNldEtlZXAoc3RybSk7XG5cbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGluZmxhdGVSZXNldDIoc3RybSwgd2luZG93Qml0cykge1xuICB2YXIgd3JhcDtcbiAgdmFyIHN0YXRlO1xuXG4gIC8qIGdldCB0aGUgc3RhdGUgKi9cbiAgaWYgKCFzdHJtIHx8ICFzdHJtLnN0YXRlKSB7XG4gICAgcmV0dXJuIFpfU1RSRUFNX0VSUk9SO1xuICB9XG4gIHN0YXRlID0gc3RybS5zdGF0ZTtcblxuICAvKiBleHRyYWN0IHdyYXAgcmVxdWVzdCBmcm9tIHdpbmRvd0JpdHMgcGFyYW1ldGVyICovXG4gIGlmICh3aW5kb3dCaXRzIDwgMCkge1xuICAgIHdyYXAgPSAwO1xuICAgIHdpbmRvd0JpdHMgPSAtd2luZG93Qml0cztcbiAgfSBlbHNlIHtcbiAgICB3cmFwID0gKHdpbmRvd0JpdHMgPj4gNCkgKyAxO1xuICAgIGlmICh3aW5kb3dCaXRzIDwgNDgpIHtcbiAgICAgIHdpbmRvd0JpdHMgJj0gMTU7XG4gICAgfVxuICB9XG5cbiAgLyogc2V0IG51bWJlciBvZiB3aW5kb3cgYml0cywgZnJlZSB3aW5kb3cgaWYgZGlmZmVyZW50ICovXG4gIGlmICh3aW5kb3dCaXRzICYmICh3aW5kb3dCaXRzIDwgOCB8fCB3aW5kb3dCaXRzID4gMTUpKSB7XG4gICAgcmV0dXJuIFpfU1RSRUFNX0VSUk9SO1xuICB9XG4gIGlmIChzdGF0ZS53aW5kb3cgIT09IG51bGwgJiYgc3RhdGUud2JpdHMgIT09IHdpbmRvd0JpdHMpIHtcbiAgICBzdGF0ZS53aW5kb3cgPSBudWxsO1xuICB9XG5cbiAgLyogdXBkYXRlIHN0YXRlIGFuZCByZXNldCB0aGUgcmVzdCBvZiBpdCAqL1xuICBzdGF0ZS53cmFwID0gd3JhcDtcbiAgc3RhdGUud2JpdHMgPSB3aW5kb3dCaXRzO1xuICByZXR1cm4gaW5mbGF0ZVJlc2V0KHN0cm0pO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gaW5mbGF0ZUluaXQyKHN0cm0sIHdpbmRvd0JpdHMpIHtcbiAgdmFyIHJldDtcbiAgdmFyIHN0YXRlO1xuXG4gIGlmICghc3RybSkge1xuICAgIHJldHVybiBaX1NUUkVBTV9FUlJPUjtcbiAgfVxuICAvL3N0cm0ubXNnID0gWl9OVUxMOyAgICAgICAgICAgICAgICAgLyogaW4gY2FzZSB3ZSByZXR1cm4gYW4gZXJyb3IgKi9cblxuICBzdGF0ZSA9IG5ldyBJbmZsYXRlU3RhdGUoKTtcblxuICAvL2lmIChzdGF0ZSA9PT0gWl9OVUxMKSByZXR1cm4gWl9NRU1fRVJST1I7XG4gIC8vVHJhY2V2KChzdGRlcnIsIFwiaW5mbGF0ZTogYWxsb2NhdGVkXFxuXCIpKTtcbiAgc3RybS5zdGF0ZSA9IHN0YXRlO1xuICBzdGF0ZS53aW5kb3cgPSBudWxsIC8qWl9OVUxMKi8gO1xuICByZXQgPSBpbmZsYXRlUmVzZXQyKHN0cm0sIHdpbmRvd0JpdHMpO1xuICBpZiAocmV0ICE9PSBaX09LKSB7XG4gICAgc3RybS5zdGF0ZSA9IG51bGwgLypaX05VTEwqLyA7XG4gIH1cbiAgcmV0dXJuIHJldDtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGluZmxhdGVJbml0KHN0cm0pIHtcbiAgcmV0dXJuIGluZmxhdGVJbml0MihzdHJtLCBERUZfV0JJVFMpO1xufVxuXG5cbi8qXG4gUmV0dXJuIHN0YXRlIHdpdGggbGVuZ3RoIGFuZCBkaXN0YW5jZSBkZWNvZGluZyB0YWJsZXMgYW5kIGluZGV4IHNpemVzIHNldCB0b1xuIGZpeGVkIGNvZGUgZGVjb2RpbmcuICBOb3JtYWxseSB0aGlzIHJldHVybnMgZml4ZWQgdGFibGVzIGZyb20gaW5mZml4ZWQuaC5cbiBJZiBCVUlMREZJWEVEIGlzIGRlZmluZWQsIHRoZW4gaW5zdGVhZCB0aGlzIHJvdXRpbmUgYnVpbGRzIHRoZSB0YWJsZXMgdGhlXG4gZmlyc3QgdGltZSBpdCdzIGNhbGxlZCwgYW5kIHJldHVybnMgdGhvc2UgdGFibGVzIHRoZSBmaXJzdCB0aW1lIGFuZFxuIHRoZXJlYWZ0ZXIuICBUaGlzIHJlZHVjZXMgdGhlIHNpemUgb2YgdGhlIGNvZGUgYnkgYWJvdXQgMksgYnl0ZXMsIGluXG4gZXhjaGFuZ2UgZm9yIGEgbGl0dGxlIGV4ZWN1dGlvbiB0aW1lLiAgSG93ZXZlciwgQlVJTERGSVhFRCBzaG91bGQgbm90IGJlXG4gdXNlZCBmb3IgdGhyZWFkZWQgYXBwbGljYXRpb25zLCBzaW5jZSB0aGUgcmV3cml0aW5nIG9mIHRoZSB0YWJsZXMgYW5kIHZpcmdpblxuIG1heSBub3QgYmUgdGhyZWFkLXNhZmUuXG4gKi9cbnZhciB2aXJnaW4gPSB0cnVlO1xuXG52YXIgbGVuZml4LCBkaXN0Zml4OyAvLyBXZSBoYXZlIG5vIHBvaW50ZXJzIGluIEpTLCBzbyBrZWVwIHRhYmxlcyBzZXBhcmF0ZVxuXG5mdW5jdGlvbiBmaXhlZHRhYmxlcyhzdGF0ZSkge1xuICAvKiBidWlsZCBmaXhlZCBodWZmbWFuIHRhYmxlcyBpZiBmaXJzdCBjYWxsIChtYXkgbm90IGJlIHRocmVhZCBzYWZlKSAqL1xuICBpZiAodmlyZ2luKSB7XG4gICAgdmFyIHN5bTtcblxuICAgIGxlbmZpeCA9IG5ldyBCdWYzMig1MTIpO1xuICAgIGRpc3RmaXggPSBuZXcgQnVmMzIoMzIpO1xuXG4gICAgLyogbGl0ZXJhbC9sZW5ndGggdGFibGUgKi9cbiAgICBzeW0gPSAwO1xuICAgIHdoaWxlIChzeW0gPCAxNDQpIHtcbiAgICAgIHN0YXRlLmxlbnNbc3ltKytdID0gODtcbiAgICB9XG4gICAgd2hpbGUgKHN5bSA8IDI1Nikge1xuICAgICAgc3RhdGUubGVuc1tzeW0rK10gPSA5O1xuICAgIH1cbiAgICB3aGlsZSAoc3ltIDwgMjgwKSB7XG4gICAgICBzdGF0ZS5sZW5zW3N5bSsrXSA9IDc7XG4gICAgfVxuICAgIHdoaWxlIChzeW0gPCAyODgpIHtcbiAgICAgIHN0YXRlLmxlbnNbc3ltKytdID0gODtcbiAgICB9XG5cbiAgICBpbmZsYXRlX3RhYmxlKExFTlMsIHN0YXRlLmxlbnMsIDAsIDI4OCwgbGVuZml4LCAwLCBzdGF0ZS53b3JrLCB7XG4gICAgICBiaXRzOiA5XG4gICAgfSk7XG5cbiAgICAvKiBkaXN0YW5jZSB0YWJsZSAqL1xuICAgIHN5bSA9IDA7XG4gICAgd2hpbGUgKHN5bSA8IDMyKSB7XG4gICAgICBzdGF0ZS5sZW5zW3N5bSsrXSA9IDU7XG4gICAgfVxuXG4gICAgaW5mbGF0ZV90YWJsZShESVNUUywgc3RhdGUubGVucywgMCwgMzIsIGRpc3RmaXgsIDAsIHN0YXRlLndvcmssIHtcbiAgICAgIGJpdHM6IDVcbiAgICB9KTtcblxuICAgIC8qIGRvIHRoaXMganVzdCBvbmNlICovXG4gICAgdmlyZ2luID0gZmFsc2U7XG4gIH1cblxuICBzdGF0ZS5sZW5jb2RlID0gbGVuZml4O1xuICBzdGF0ZS5sZW5iaXRzID0gOTtcbiAgc3RhdGUuZGlzdGNvZGUgPSBkaXN0Zml4O1xuICBzdGF0ZS5kaXN0Yml0cyA9IDU7XG59XG5cblxuLypcbiBVcGRhdGUgdGhlIHdpbmRvdyB3aXRoIHRoZSBsYXN0IHdzaXplIChub3JtYWxseSAzMkspIGJ5dGVzIHdyaXR0ZW4gYmVmb3JlXG4gcmV0dXJuaW5nLiAgSWYgd2luZG93IGRvZXMgbm90IGV4aXN0IHlldCwgY3JlYXRlIGl0LiAgVGhpcyBpcyBvbmx5IGNhbGxlZFxuIHdoZW4gYSB3aW5kb3cgaXMgYWxyZWFkeSBpbiB1c2UsIG9yIHdoZW4gb3V0cHV0IGhhcyBiZWVuIHdyaXR0ZW4gZHVyaW5nIHRoaXNcbiBpbmZsYXRlIGNhbGwsIGJ1dCB0aGUgZW5kIG9mIHRoZSBkZWZsYXRlIHN0cmVhbSBoYXMgbm90IGJlZW4gcmVhY2hlZCB5ZXQuXG4gSXQgaXMgYWxzbyBjYWxsZWQgdG8gY3JlYXRlIGEgd2luZG93IGZvciBkaWN0aW9uYXJ5IGRhdGEgd2hlbiBhIGRpY3Rpb25hcnlcbiBpcyBsb2FkZWQuXG5cbiBQcm92aWRpbmcgb3V0cHV0IGJ1ZmZlcnMgbGFyZ2VyIHRoYW4gMzJLIHRvIGluZmxhdGUoKSBzaG91bGQgcHJvdmlkZSBhIHNwZWVkXG4gYWR2YW50YWdlLCBzaW5jZSBvbmx5IHRoZSBsYXN0IDMySyBvZiBvdXRwdXQgaXMgY29waWVkIHRvIHRoZSBzbGlkaW5nIHdpbmRvd1xuIHVwb24gcmV0dXJuIGZyb20gaW5mbGF0ZSgpLCBhbmQgc2luY2UgYWxsIGRpc3RhbmNlcyBhZnRlciB0aGUgZmlyc3QgMzJLIG9mXG4gb3V0cHV0IHdpbGwgZmFsbCBpbiB0aGUgb3V0cHV0IGRhdGEsIG1ha2luZyBtYXRjaCBjb3BpZXMgc2ltcGxlciBhbmQgZmFzdGVyLlxuIFRoZSBhZHZhbnRhZ2UgbWF5IGJlIGRlcGVuZGVudCBvbiB0aGUgc2l6ZSBvZiB0aGUgcHJvY2Vzc29yJ3MgZGF0YSBjYWNoZXMuXG4gKi9cbmZ1bmN0aW9uIHVwZGF0ZXdpbmRvdyhzdHJtLCBzcmMsIGVuZCwgY29weSkge1xuICB2YXIgZGlzdDtcbiAgdmFyIHN0YXRlID0gc3RybS5zdGF0ZTtcblxuICAvKiBpZiBpdCBoYXNuJ3QgYmVlbiBkb25lIGFscmVhZHksIGFsbG9jYXRlIHNwYWNlIGZvciB0aGUgd2luZG93ICovXG4gIGlmIChzdGF0ZS53aW5kb3cgPT09IG51bGwpIHtcbiAgICBzdGF0ZS53c2l6ZSA9IDEgPDwgc3RhdGUud2JpdHM7XG4gICAgc3RhdGUud25leHQgPSAwO1xuICAgIHN0YXRlLndoYXZlID0gMDtcblxuICAgIHN0YXRlLndpbmRvdyA9IG5ldyBCdWY4KHN0YXRlLndzaXplKTtcbiAgfVxuXG4gIC8qIGNvcHkgc3RhdGUtPndzaXplIG9yIGxlc3Mgb3V0cHV0IGJ5dGVzIGludG8gdGhlIGNpcmN1bGFyIHdpbmRvdyAqL1xuICBpZiAoY29weSA+PSBzdGF0ZS53c2l6ZSkge1xuICAgIGFycmF5U2V0KHN0YXRlLndpbmRvdywgc3JjLCBlbmQgLSBzdGF0ZS53c2l6ZSwgc3RhdGUud3NpemUsIDApO1xuICAgIHN0YXRlLnduZXh0ID0gMDtcbiAgICBzdGF0ZS53aGF2ZSA9IHN0YXRlLndzaXplO1xuICB9IGVsc2Uge1xuICAgIGRpc3QgPSBzdGF0ZS53c2l6ZSAtIHN0YXRlLnduZXh0O1xuICAgIGlmIChkaXN0ID4gY29weSkge1xuICAgICAgZGlzdCA9IGNvcHk7XG4gICAgfVxuICAgIC8vem1lbWNweShzdGF0ZS0+d2luZG93ICsgc3RhdGUtPnduZXh0LCBlbmQgLSBjb3B5LCBkaXN0KTtcbiAgICBhcnJheVNldChzdGF0ZS53aW5kb3csIHNyYywgZW5kIC0gY29weSwgZGlzdCwgc3RhdGUud25leHQpO1xuICAgIGNvcHkgLT0gZGlzdDtcbiAgICBpZiAoY29weSkge1xuICAgICAgLy96bWVtY3B5KHN0YXRlLT53aW5kb3csIGVuZCAtIGNvcHksIGNvcHkpO1xuICAgICAgYXJyYXlTZXQoc3RhdGUud2luZG93LCBzcmMsIGVuZCAtIGNvcHksIGNvcHksIDApO1xuICAgICAgc3RhdGUud25leHQgPSBjb3B5O1xuICAgICAgc3RhdGUud2hhdmUgPSBzdGF0ZS53c2l6ZTtcbiAgICB9IGVsc2Uge1xuICAgICAgc3RhdGUud25leHQgKz0gZGlzdDtcbiAgICAgIGlmIChzdGF0ZS53bmV4dCA9PT0gc3RhdGUud3NpemUpIHtcbiAgICAgICAgc3RhdGUud25leHQgPSAwO1xuICAgICAgfVxuICAgICAgaWYgKHN0YXRlLndoYXZlIDwgc3RhdGUud3NpemUpIHtcbiAgICAgICAgc3RhdGUud2hhdmUgKz0gZGlzdDtcbiAgICAgIH1cbiAgICB9XG4gIH1cbiAgcmV0dXJuIDA7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBpbmZsYXRlKHN0cm0sIGZsdXNoKSB7XG4gIHZhciBzdGF0ZTtcbiAgdmFyIGlucHV0LCBvdXRwdXQ7IC8vIGlucHV0L291dHB1dCBidWZmZXJzXG4gIHZhciBuZXh0OyAvKiBuZXh0IGlucHV0IElOREVYICovXG4gIHZhciBwdXQ7IC8qIG5leHQgb3V0cHV0IElOREVYICovXG4gIHZhciBoYXZlLCBsZWZ0OyAvKiBhdmFpbGFibGUgaW5wdXQgYW5kIG91dHB1dCAqL1xuICB2YXIgaG9sZDsgLyogYml0IGJ1ZmZlciAqL1xuICB2YXIgYml0czsgLyogYml0cyBpbiBiaXQgYnVmZmVyICovXG4gIHZhciBfaW4sIF9vdXQ7IC8qIHNhdmUgc3RhcnRpbmcgYXZhaWxhYmxlIGlucHV0IGFuZCBvdXRwdXQgKi9cbiAgdmFyIGNvcHk7IC8qIG51bWJlciBvZiBzdG9yZWQgb3IgbWF0Y2ggYnl0ZXMgdG8gY29weSAqL1xuICB2YXIgZnJvbTsgLyogd2hlcmUgdG8gY29weSBtYXRjaCBieXRlcyBmcm9tICovXG4gIHZhciBmcm9tX3NvdXJjZTtcbiAgdmFyIGhlcmUgPSAwOyAvKiBjdXJyZW50IGRlY29kaW5nIHRhYmxlIGVudHJ5ICovXG4gIHZhciBoZXJlX2JpdHMsIGhlcmVfb3AsIGhlcmVfdmFsOyAvLyBwYWtlZCBcImhlcmVcIiBkZW5vcm1hbGl6ZWQgKEpTIHNwZWNpZmljKVxuICAvL3ZhciBsYXN0OyAgICAgICAgICAgICAgICAgICAvKiBwYXJlbnQgdGFibGUgZW50cnkgKi9cbiAgdmFyIGxhc3RfYml0cywgbGFzdF9vcCwgbGFzdF92YWw7IC8vIHBha2VkIFwibGFzdFwiIGRlbm9ybWFsaXplZCAoSlMgc3BlY2lmaWMpXG4gIHZhciBsZW47IC8qIGxlbmd0aCB0byBjb3B5IGZvciByZXBlYXRzLCBiaXRzIHRvIGRyb3AgKi9cbiAgdmFyIHJldDsgLyogcmV0dXJuIGNvZGUgKi9cbiAgdmFyIGhidWYgPSBuZXcgQnVmOCg0KTsgLyogYnVmZmVyIGZvciBnemlwIGhlYWRlciBjcmMgY2FsY3VsYXRpb24gKi9cbiAgdmFyIG9wdHM7XG5cbiAgdmFyIG47IC8vIHRlbXBvcmFyeSB2YXIgZm9yIE5FRURfQklUU1xuXG4gIHZhciBvcmRlciA9IC8qIHBlcm11dGF0aW9uIG9mIGNvZGUgbGVuZ3RocyAqLyBbMTYsIDE3LCAxOCwgMCwgOCwgNywgOSwgNiwgMTAsIDUsIDExLCA0LCAxMiwgMywgMTMsIDIsIDE0LCAxLCAxNV07XG5cblxuICBpZiAoIXN0cm0gfHwgIXN0cm0uc3RhdGUgfHwgIXN0cm0ub3V0cHV0IHx8XG4gICAgKCFzdHJtLmlucHV0ICYmIHN0cm0uYXZhaWxfaW4gIT09IDApKSB7XG4gICAgcmV0dXJuIFpfU1RSRUFNX0VSUk9SO1xuICB9XG5cbiAgc3RhdGUgPSBzdHJtLnN0YXRlO1xuICBpZiAoc3RhdGUubW9kZSA9PT0gVFlQRSkge1xuICAgIHN0YXRlLm1vZGUgPSBUWVBFRE87XG4gIH0gLyogc2tpcCBjaGVjayAqL1xuXG5cbiAgLy8tLS0gTE9BRCgpIC0tLVxuICBwdXQgPSBzdHJtLm5leHRfb3V0O1xuICBvdXRwdXQgPSBzdHJtLm91dHB1dDtcbiAgbGVmdCA9IHN0cm0uYXZhaWxfb3V0O1xuICBuZXh0ID0gc3RybS5uZXh0X2luO1xuICBpbnB1dCA9IHN0cm0uaW5wdXQ7XG4gIGhhdmUgPSBzdHJtLmF2YWlsX2luO1xuICBob2xkID0gc3RhdGUuaG9sZDtcbiAgYml0cyA9IHN0YXRlLmJpdHM7XG4gIC8vLS0tXG5cbiAgX2luID0gaGF2ZTtcbiAgX291dCA9IGxlZnQ7XG4gIHJldCA9IFpfT0s7XG5cbiAgaW5mX2xlYXZlOiAvLyBnb3RvIGVtdWxhdGlvblxuICAgIGZvciAoOzspIHtcbiAgICAgIHN3aXRjaCAoc3RhdGUubW9kZSkge1xuICAgICAgY2FzZSBIRUFEOlxuICAgICAgICBpZiAoc3RhdGUud3JhcCA9PT0gMCkge1xuICAgICAgICAgIHN0YXRlLm1vZGUgPSBUWVBFRE87XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgICAgLy89PT0gTkVFREJJVFMoMTYpO1xuICAgICAgICB3aGlsZSAoYml0cyA8IDE2KSB7XG4gICAgICAgICAgaWYgKGhhdmUgPT09IDApIHtcbiAgICAgICAgICAgIGJyZWFrIGluZl9sZWF2ZTtcbiAgICAgICAgICB9XG4gICAgICAgICAgaGF2ZS0tO1xuICAgICAgICAgIGhvbGQgKz0gaW5wdXRbbmV4dCsrXSA8PCBiaXRzO1xuICAgICAgICAgIGJpdHMgKz0gODtcbiAgICAgICAgfVxuICAgICAgICAvLz09PS8vXG4gICAgICAgIGlmICgoc3RhdGUud3JhcCAmIDIpICYmIGhvbGQgPT09IDB4OGIxZikgeyAvKiBnemlwIGhlYWRlciAqL1xuICAgICAgICAgIHN0YXRlLmNoZWNrID0gMCAvKmNyYzMyKDBMLCBaX05VTEwsIDApKi8gO1xuICAgICAgICAgIC8vPT09IENSQzIoc3RhdGUuY2hlY2ssIGhvbGQpO1xuICAgICAgICAgIGhidWZbMF0gPSBob2xkICYgMHhmZjtcbiAgICAgICAgICBoYnVmWzFdID0gKGhvbGQgPj4+IDgpICYgMHhmZjtcbiAgICAgICAgICBzdGF0ZS5jaGVjayA9IGNyYzMyKHN0YXRlLmNoZWNrLCBoYnVmLCAyLCAwKTtcbiAgICAgICAgICAvLz09PS8vXG5cbiAgICAgICAgICAvLz09PSBJTklUQklUUygpO1xuICAgICAgICAgIGhvbGQgPSAwO1xuICAgICAgICAgIGJpdHMgPSAwO1xuICAgICAgICAgIC8vPT09Ly9cbiAgICAgICAgICBzdGF0ZS5tb2RlID0gRkxBR1M7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgICAgc3RhdGUuZmxhZ3MgPSAwOyAvKiBleHBlY3QgemxpYiBoZWFkZXIgKi9cbiAgICAgICAgaWYgKHN0YXRlLmhlYWQpIHtcbiAgICAgICAgICBzdGF0ZS5oZWFkLmRvbmUgPSBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoIShzdGF0ZS53cmFwICYgMSkgfHwgLyogY2hlY2sgaWYgemxpYiBoZWFkZXIgYWxsb3dlZCAqL1xuICAgICAgICAgICgoKGhvbGQgJiAweGZmKSAvKkJJVFMoOCkqLyA8PCA4KSArIChob2xkID4+IDgpKSAlIDMxKSB7XG4gICAgICAgICAgc3RybS5tc2cgPSAnaW5jb3JyZWN0IGhlYWRlciBjaGVjayc7XG4gICAgICAgICAgc3RhdGUubW9kZSA9IEJBRDtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgICBpZiAoKGhvbGQgJiAweDBmKSAvKkJJVFMoNCkqLyAhPT0gWl9ERUZMQVRFRCkge1xuICAgICAgICAgIHN0cm0ubXNnID0gJ3Vua25vd24gY29tcHJlc3Npb24gbWV0aG9kJztcbiAgICAgICAgICBzdGF0ZS5tb2RlID0gQkFEO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICAgIC8vLS0tIERST1BCSVRTKDQpIC0tLS8vXG4gICAgICAgIGhvbGQgPj4+PSA0O1xuICAgICAgICBiaXRzIC09IDQ7XG4gICAgICAgIC8vLS0tLy9cbiAgICAgICAgbGVuID0gKGhvbGQgJiAweDBmKSAvKkJJVFMoNCkqLyArIDg7XG4gICAgICAgIGlmIChzdGF0ZS53Yml0cyA9PT0gMCkge1xuICAgICAgICAgIHN0YXRlLndiaXRzID0gbGVuO1xuICAgICAgICB9IGVsc2UgaWYgKGxlbiA+IHN0YXRlLndiaXRzKSB7XG4gICAgICAgICAgc3RybS5tc2cgPSAnaW52YWxpZCB3aW5kb3cgc2l6ZSc7XG4gICAgICAgICAgc3RhdGUubW9kZSA9IEJBRDtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgICBzdGF0ZS5kbWF4ID0gMSA8PCBsZW47XG4gICAgICAgIC8vVHJhY2V2KChzdGRlcnIsIFwiaW5mbGF0ZTogICB6bGliIGhlYWRlciBva1xcblwiKSk7XG4gICAgICAgIHN0cm0uYWRsZXIgPSBzdGF0ZS5jaGVjayA9IDEgLyphZGxlcjMyKDBMLCBaX05VTEwsIDApKi8gO1xuICAgICAgICBzdGF0ZS5tb2RlID0gaG9sZCAmIDB4MjAwID8gRElDVElEIDogVFlQRTtcbiAgICAgICAgLy89PT0gSU5JVEJJVFMoKTtcbiAgICAgICAgaG9sZCA9IDA7XG4gICAgICAgIGJpdHMgPSAwO1xuICAgICAgICAvLz09PS8vXG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSBGTEFHUzpcbiAgICAgICAgLy89PT0gTkVFREJJVFMoMTYpOyAqL1xuICAgICAgICB3aGlsZSAoYml0cyA8IDE2KSB7XG4gICAgICAgICAgaWYgKGhhdmUgPT09IDApIHtcbiAgICAgICAgICAgIGJyZWFrIGluZl9sZWF2ZTtcbiAgICAgICAgICB9XG4gICAgICAgICAgaGF2ZS0tO1xuICAgICAgICAgIGhvbGQgKz0gaW5wdXRbbmV4dCsrXSA8PCBiaXRzO1xuICAgICAgICAgIGJpdHMgKz0gODtcbiAgICAgICAgfVxuICAgICAgICAvLz09PS8vXG4gICAgICAgIHN0YXRlLmZsYWdzID0gaG9sZDtcbiAgICAgICAgaWYgKChzdGF0ZS5mbGFncyAmIDB4ZmYpICE9PSBaX0RFRkxBVEVEKSB7XG4gICAgICAgICAgc3RybS5tc2cgPSAndW5rbm93biBjb21wcmVzc2lvbiBtZXRob2QnO1xuICAgICAgICAgIHN0YXRlLm1vZGUgPSBCQUQ7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHN0YXRlLmZsYWdzICYgMHhlMDAwKSB7XG4gICAgICAgICAgc3RybS5tc2cgPSAndW5rbm93biBoZWFkZXIgZmxhZ3Mgc2V0JztcbiAgICAgICAgICBzdGF0ZS5tb2RlID0gQkFEO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICAgIGlmIChzdGF0ZS5oZWFkKSB7XG4gICAgICAgICAgc3RhdGUuaGVhZC50ZXh0ID0gKChob2xkID4+IDgpICYgMSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHN0YXRlLmZsYWdzICYgMHgwMjAwKSB7XG4gICAgICAgICAgLy89PT0gQ1JDMihzdGF0ZS5jaGVjaywgaG9sZCk7XG4gICAgICAgICAgaGJ1ZlswXSA9IGhvbGQgJiAweGZmO1xuICAgICAgICAgIGhidWZbMV0gPSAoaG9sZCA+Pj4gOCkgJiAweGZmO1xuICAgICAgICAgIHN0YXRlLmNoZWNrID0gY3JjMzIoc3RhdGUuY2hlY2ssIGhidWYsIDIsIDApO1xuICAgICAgICAgIC8vPT09Ly9cbiAgICAgICAgfVxuICAgICAgICAvLz09PSBJTklUQklUUygpO1xuICAgICAgICBob2xkID0gMDtcbiAgICAgICAgYml0cyA9IDA7XG4gICAgICAgIC8vPT09Ly9cbiAgICAgICAgc3RhdGUubW9kZSA9IFRJTUU7XG4gICAgICAgIC8qIGZhbGxzIHRocm91Z2ggKi9cbiAgICAgIGNhc2UgVElNRTpcbiAgICAgICAgLy89PT0gTkVFREJJVFMoMzIpOyAqL1xuICAgICAgICB3aGlsZSAoYml0cyA8IDMyKSB7XG4gICAgICAgICAgaWYgKGhhdmUgPT09IDApIHtcbiAgICAgICAgICAgIGJyZWFrIGluZl9sZWF2ZTtcbiAgICAgICAgICB9XG4gICAgICAgICAgaGF2ZS0tO1xuICAgICAgICAgIGhvbGQgKz0gaW5wdXRbbmV4dCsrXSA8PCBiaXRzO1xuICAgICAgICAgIGJpdHMgKz0gODtcbiAgICAgICAgfVxuICAgICAgICAvLz09PS8vXG4gICAgICAgIGlmIChzdGF0ZS5oZWFkKSB7XG4gICAgICAgICAgc3RhdGUuaGVhZC50aW1lID0gaG9sZDtcbiAgICAgICAgfVxuICAgICAgICBpZiAoc3RhdGUuZmxhZ3MgJiAweDAyMDApIHtcbiAgICAgICAgICAvLz09PSBDUkM0KHN0YXRlLmNoZWNrLCBob2xkKVxuICAgICAgICAgIGhidWZbMF0gPSBob2xkICYgMHhmZjtcbiAgICAgICAgICBoYnVmWzFdID0gKGhvbGQgPj4+IDgpICYgMHhmZjtcbiAgICAgICAgICBoYnVmWzJdID0gKGhvbGQgPj4+IDE2KSAmIDB4ZmY7XG4gICAgICAgICAgaGJ1ZlszXSA9IChob2xkID4+PiAyNCkgJiAweGZmO1xuICAgICAgICAgIHN0YXRlLmNoZWNrID0gY3JjMzIoc3RhdGUuY2hlY2ssIGhidWYsIDQsIDApO1xuICAgICAgICAgIC8vPT09XG4gICAgICAgIH1cbiAgICAgICAgLy89PT0gSU5JVEJJVFMoKTtcbiAgICAgICAgaG9sZCA9IDA7XG4gICAgICAgIGJpdHMgPSAwO1xuICAgICAgICAvLz09PS8vXG4gICAgICAgIHN0YXRlLm1vZGUgPSBPUztcbiAgICAgICAgLyogZmFsbHMgdGhyb3VnaCAqL1xuICAgICAgY2FzZSBPUzpcbiAgICAgICAgLy89PT0gTkVFREJJVFMoMTYpOyAqL1xuICAgICAgICB3aGlsZSAoYml0cyA8IDE2KSB7XG4gICAgICAgICAgaWYgKGhhdmUgPT09IDApIHtcbiAgICAgICAgICAgIGJyZWFrIGluZl9sZWF2ZTtcbiAgICAgICAgICB9XG4gICAgICAgICAgaGF2ZS0tO1xuICAgICAgICAgIGhvbGQgKz0gaW5wdXRbbmV4dCsrXSA8PCBiaXRzO1xuICAgICAgICAgIGJpdHMgKz0gODtcbiAgICAgICAgfVxuICAgICAgICAvLz09PS8vXG4gICAgICAgIGlmIChzdGF0ZS5oZWFkKSB7XG4gICAgICAgICAgc3RhdGUuaGVhZC54ZmxhZ3MgPSAoaG9sZCAmIDB4ZmYpO1xuICAgICAgICAgIHN0YXRlLmhlYWQub3MgPSAoaG9sZCA+PiA4KTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoc3RhdGUuZmxhZ3MgJiAweDAyMDApIHtcbiAgICAgICAgICAvLz09PSBDUkMyKHN0YXRlLmNoZWNrLCBob2xkKTtcbiAgICAgICAgICBoYnVmWzBdID0gaG9sZCAmIDB4ZmY7XG4gICAgICAgICAgaGJ1ZlsxXSA9IChob2xkID4+PiA4KSAmIDB4ZmY7XG4gICAgICAgICAgc3RhdGUuY2hlY2sgPSBjcmMzMihzdGF0ZS5jaGVjaywgaGJ1ZiwgMiwgMCk7XG4gICAgICAgICAgLy89PT0vL1xuICAgICAgICB9XG4gICAgICAgIC8vPT09IElOSVRCSVRTKCk7XG4gICAgICAgIGhvbGQgPSAwO1xuICAgICAgICBiaXRzID0gMDtcbiAgICAgICAgLy89PT0vL1xuICAgICAgICBzdGF0ZS5tb2RlID0gRVhMRU47XG4gICAgICAgIC8qIGZhbGxzIHRocm91Z2ggKi9cbiAgICAgIGNhc2UgRVhMRU46XG4gICAgICAgIGlmIChzdGF0ZS5mbGFncyAmIDB4MDQwMCkge1xuICAgICAgICAgIC8vPT09IE5FRURCSVRTKDE2KTsgKi9cbiAgICAgICAgICB3aGlsZSAoYml0cyA8IDE2KSB7XG4gICAgICAgICAgICBpZiAoaGF2ZSA9PT0gMCkge1xuICAgICAgICAgICAgICBicmVhayBpbmZfbGVhdmU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBoYXZlLS07XG4gICAgICAgICAgICBob2xkICs9IGlucHV0W25leHQrK10gPDwgYml0cztcbiAgICAgICAgICAgIGJpdHMgKz0gODtcbiAgICAgICAgICB9XG4gICAgICAgICAgLy89PT0vL1xuICAgICAgICAgIHN0YXRlLmxlbmd0aCA9IGhvbGQ7XG4gICAgICAgICAgaWYgKHN0YXRlLmhlYWQpIHtcbiAgICAgICAgICAgIHN0YXRlLmhlYWQuZXh0cmFfbGVuID0gaG9sZDtcbiAgICAgICAgICB9XG4gICAgICAgICAgaWYgKHN0YXRlLmZsYWdzICYgMHgwMjAwKSB7XG4gICAgICAgICAgICAvLz09PSBDUkMyKHN0YXRlLmNoZWNrLCBob2xkKTtcbiAgICAgICAgICAgIGhidWZbMF0gPSBob2xkICYgMHhmZjtcbiAgICAgICAgICAgIGhidWZbMV0gPSAoaG9sZCA+Pj4gOCkgJiAweGZmO1xuICAgICAgICAgICAgc3RhdGUuY2hlY2sgPSBjcmMzMihzdGF0ZS5jaGVjaywgaGJ1ZiwgMiwgMCk7XG4gICAgICAgICAgICAvLz09PS8vXG4gICAgICAgICAgfVxuICAgICAgICAgIC8vPT09IElOSVRCSVRTKCk7XG4gICAgICAgICAgaG9sZCA9IDA7XG4gICAgICAgICAgYml0cyA9IDA7XG4gICAgICAgICAgLy89PT0vL1xuICAgICAgICB9IGVsc2UgaWYgKHN0YXRlLmhlYWQpIHtcbiAgICAgICAgICBzdGF0ZS5oZWFkLmV4dHJhID0gbnVsbCAvKlpfTlVMTCovIDtcbiAgICAgICAgfVxuICAgICAgICBzdGF0ZS5tb2RlID0gRVhUUkE7XG4gICAgICAgIC8qIGZhbGxzIHRocm91Z2ggKi9cbiAgICAgIGNhc2UgRVhUUkE6XG4gICAgICAgIGlmIChzdGF0ZS5mbGFncyAmIDB4MDQwMCkge1xuICAgICAgICAgIGNvcHkgPSBzdGF0ZS5sZW5ndGg7XG4gICAgICAgICAgaWYgKGNvcHkgPiBoYXZlKSB7XG4gICAgICAgICAgICBjb3B5ID0gaGF2ZTtcbiAgICAgICAgICB9XG4gICAgICAgICAgaWYgKGNvcHkpIHtcbiAgICAgICAgICAgIGlmIChzdGF0ZS5oZWFkKSB7XG4gICAgICAgICAgICAgIGxlbiA9IHN0YXRlLmhlYWQuZXh0cmFfbGVuIC0gc3RhdGUubGVuZ3RoO1xuICAgICAgICAgICAgICBpZiAoIXN0YXRlLmhlYWQuZXh0cmEpIHtcbiAgICAgICAgICAgICAgICAvLyBVc2UgdW50eXBlZCBhcnJheSBmb3IgbW9yZSBjb252ZW5pZW5kIHByb2Nlc3NpbmcgbGF0ZXJcbiAgICAgICAgICAgICAgICBzdGF0ZS5oZWFkLmV4dHJhID0gbmV3IEFycmF5KHN0YXRlLmhlYWQuZXh0cmFfbGVuKTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICBhcnJheVNldChcbiAgICAgICAgICAgICAgICBzdGF0ZS5oZWFkLmV4dHJhLFxuICAgICAgICAgICAgICAgIGlucHV0LFxuICAgICAgICAgICAgICAgIG5leHQsXG4gICAgICAgICAgICAgICAgLy8gZXh0cmEgZmllbGQgaXMgbGltaXRlZCB0byA2NTUzNiBieXRlc1xuICAgICAgICAgICAgICAgIC8vIC0gbm8gbmVlZCBmb3IgYWRkaXRpb25hbCBzaXplIGNoZWNrXG4gICAgICAgICAgICAgICAgY29weSxcbiAgICAgICAgICAgICAgICAvKmxlbiArIGNvcHkgPiBzdGF0ZS5oZWFkLmV4dHJhX21heCAtIGxlbiA/IHN0YXRlLmhlYWQuZXh0cmFfbWF4IDogY29weSwqL1xuICAgICAgICAgICAgICAgIGxlblxuICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAvL3ptZW1jcHkoc3RhdGUuaGVhZC5leHRyYSArIGxlbiwgbmV4dCxcbiAgICAgICAgICAgICAgLy8gICAgICAgIGxlbiArIGNvcHkgPiBzdGF0ZS5oZWFkLmV4dHJhX21heCA/XG4gICAgICAgICAgICAgIC8vICAgICAgICBzdGF0ZS5oZWFkLmV4dHJhX21heCAtIGxlbiA6IGNvcHkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHN0YXRlLmZsYWdzICYgMHgwMjAwKSB7XG4gICAgICAgICAgICAgIHN0YXRlLmNoZWNrID0gY3JjMzIoc3RhdGUuY2hlY2ssIGlucHV0LCBjb3B5LCBuZXh0KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGhhdmUgLT0gY29weTtcbiAgICAgICAgICAgIG5leHQgKz0gY29weTtcbiAgICAgICAgICAgIHN0YXRlLmxlbmd0aCAtPSBjb3B5O1xuICAgICAgICAgIH1cbiAgICAgICAgICBpZiAoc3RhdGUubGVuZ3RoKSB7XG4gICAgICAgICAgICBicmVhayBpbmZfbGVhdmU7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHN0YXRlLmxlbmd0aCA9IDA7XG4gICAgICAgIHN0YXRlLm1vZGUgPSBOQU1FO1xuICAgICAgICAvKiBmYWxscyB0aHJvdWdoICovXG4gICAgICBjYXNlIE5BTUU6XG4gICAgICAgIGlmIChzdGF0ZS5mbGFncyAmIDB4MDgwMCkge1xuICAgICAgICAgIGlmIChoYXZlID09PSAwKSB7XG4gICAgICAgICAgICBicmVhayBpbmZfbGVhdmU7XG4gICAgICAgICAgfVxuICAgICAgICAgIGNvcHkgPSAwO1xuICAgICAgICAgIGRvIHtcbiAgICAgICAgICAgIC8vIFRPRE86IDIgb3IgMSBieXRlcz9cbiAgICAgICAgICAgIGxlbiA9IGlucHV0W25leHQgKyBjb3B5KytdO1xuICAgICAgICAgICAgLyogdXNlIGNvbnN0YW50IGxpbWl0IGJlY2F1c2UgaW4ganMgd2Ugc2hvdWxkIG5vdCBwcmVhbGxvY2F0ZSBtZW1vcnkgKi9cbiAgICAgICAgICAgIGlmIChzdGF0ZS5oZWFkICYmIGxlbiAmJlxuICAgICAgICAgICAgICAoc3RhdGUubGVuZ3RoIDwgNjU1MzYgLypzdGF0ZS5oZWFkLm5hbWVfbWF4Ki8gKSkge1xuICAgICAgICAgICAgICBzdGF0ZS5oZWFkLm5hbWUgKz0gU3RyaW5nLmZyb21DaGFyQ29kZShsZW4pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0gd2hpbGUgKGxlbiAmJiBjb3B5IDwgaGF2ZSk7XG5cbiAgICAgICAgICBpZiAoc3RhdGUuZmxhZ3MgJiAweDAyMDApIHtcbiAgICAgICAgICAgIHN0YXRlLmNoZWNrID0gY3JjMzIoc3RhdGUuY2hlY2ssIGlucHV0LCBjb3B5LCBuZXh0KTtcbiAgICAgICAgICB9XG4gICAgICAgICAgaGF2ZSAtPSBjb3B5O1xuICAgICAgICAgIG5leHQgKz0gY29weTtcbiAgICAgICAgICBpZiAobGVuKSB7XG4gICAgICAgICAgICBicmVhayBpbmZfbGVhdmU7XG4gICAgICAgICAgfVxuICAgICAgICB9IGVsc2UgaWYgKHN0YXRlLmhlYWQpIHtcbiAgICAgICAgICBzdGF0ZS5oZWFkLm5hbWUgPSBudWxsO1xuICAgICAgICB9XG4gICAgICAgIHN0YXRlLmxlbmd0aCA9IDA7XG4gICAgICAgIHN0YXRlLm1vZGUgPSBDT01NRU5UO1xuICAgICAgICAvKiBmYWxscyB0aHJvdWdoICovXG4gICAgICBjYXNlIENPTU1FTlQ6XG4gICAgICAgIGlmIChzdGF0ZS5mbGFncyAmIDB4MTAwMCkge1xuICAgICAgICAgIGlmIChoYXZlID09PSAwKSB7XG4gICAgICAgICAgICBicmVhayBpbmZfbGVhdmU7XG4gICAgICAgICAgfVxuICAgICAgICAgIGNvcHkgPSAwO1xuICAgICAgICAgIGRvIHtcbiAgICAgICAgICAgIGxlbiA9IGlucHV0W25leHQgKyBjb3B5KytdO1xuICAgICAgICAgICAgLyogdXNlIGNvbnN0YW50IGxpbWl0IGJlY2F1c2UgaW4ganMgd2Ugc2hvdWxkIG5vdCBwcmVhbGxvY2F0ZSBtZW1vcnkgKi9cbiAgICAgICAgICAgIGlmIChzdGF0ZS5oZWFkICYmIGxlbiAmJlxuICAgICAgICAgICAgICAoc3RhdGUubGVuZ3RoIDwgNjU1MzYgLypzdGF0ZS5oZWFkLmNvbW1fbWF4Ki8gKSkge1xuICAgICAgICAgICAgICBzdGF0ZS5oZWFkLmNvbW1lbnQgKz0gU3RyaW5nLmZyb21DaGFyQ29kZShsZW4pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0gd2hpbGUgKGxlbiAmJiBjb3B5IDwgaGF2ZSk7XG4gICAgICAgICAgaWYgKHN0YXRlLmZsYWdzICYgMHgwMjAwKSB7XG4gICAgICAgICAgICBzdGF0ZS5jaGVjayA9IGNyYzMyKHN0YXRlLmNoZWNrLCBpbnB1dCwgY29weSwgbmV4dCk7XG4gICAgICAgICAgfVxuICAgICAgICAgIGhhdmUgLT0gY29weTtcbiAgICAgICAgICBuZXh0ICs9IGNvcHk7XG4gICAgICAgICAgaWYgKGxlbikge1xuICAgICAgICAgICAgYnJlYWsgaW5mX2xlYXZlO1xuICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIGlmIChzdGF0ZS5oZWFkKSB7XG4gICAgICAgICAgc3RhdGUuaGVhZC5jb21tZW50ID0gbnVsbDtcbiAgICAgICAgfVxuICAgICAgICBzdGF0ZS5tb2RlID0gSENSQztcbiAgICAgICAgLyogZmFsbHMgdGhyb3VnaCAqL1xuICAgICAgY2FzZSBIQ1JDOlxuICAgICAgICBpZiAoc3RhdGUuZmxhZ3MgJiAweDAyMDApIHtcbiAgICAgICAgICAvLz09PSBORUVEQklUUygxNik7ICovXG4gICAgICAgICAgd2hpbGUgKGJpdHMgPCAxNikge1xuICAgICAgICAgICAgaWYgKGhhdmUgPT09IDApIHtcbiAgICAgICAgICAgICAgYnJlYWsgaW5mX2xlYXZlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaGF2ZS0tO1xuICAgICAgICAgICAgaG9sZCArPSBpbnB1dFtuZXh0KytdIDw8IGJpdHM7XG4gICAgICAgICAgICBiaXRzICs9IDg7XG4gICAgICAgICAgfVxuICAgICAgICAgIC8vPT09Ly9cbiAgICAgICAgICBpZiAoaG9sZCAhPT0gKHN0YXRlLmNoZWNrICYgMHhmZmZmKSkge1xuICAgICAgICAgICAgc3RybS5tc2cgPSAnaGVhZGVyIGNyYyBtaXNtYXRjaCc7XG4gICAgICAgICAgICBzdGF0ZS5tb2RlID0gQkFEO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgfVxuICAgICAgICAgIC8vPT09IElOSVRCSVRTKCk7XG4gICAgICAgICAgaG9sZCA9IDA7XG4gICAgICAgICAgYml0cyA9IDA7XG4gICAgICAgICAgLy89PT0vL1xuICAgICAgICB9XG4gICAgICAgIGlmIChzdGF0ZS5oZWFkKSB7XG4gICAgICAgICAgc3RhdGUuaGVhZC5oY3JjID0gKChzdGF0ZS5mbGFncyA+PiA5KSAmIDEpO1xuICAgICAgICAgIHN0YXRlLmhlYWQuZG9uZSA9IHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgc3RybS5hZGxlciA9IHN0YXRlLmNoZWNrID0gMDtcbiAgICAgICAgc3RhdGUubW9kZSA9IFRZUEU7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSBESUNUSUQ6XG4gICAgICAgIC8vPT09IE5FRURCSVRTKDMyKTsgKi9cbiAgICAgICAgd2hpbGUgKGJpdHMgPCAzMikge1xuICAgICAgICAgIGlmIChoYXZlID09PSAwKSB7XG4gICAgICAgICAgICBicmVhayBpbmZfbGVhdmU7XG4gICAgICAgICAgfVxuICAgICAgICAgIGhhdmUtLTtcbiAgICAgICAgICBob2xkICs9IGlucHV0W25leHQrK10gPDwgYml0cztcbiAgICAgICAgICBiaXRzICs9IDg7XG4gICAgICAgIH1cbiAgICAgICAgLy89PT0vL1xuICAgICAgICBzdHJtLmFkbGVyID0gc3RhdGUuY2hlY2sgPSB6c3dhcDMyKGhvbGQpO1xuICAgICAgICAvLz09PSBJTklUQklUUygpO1xuICAgICAgICBob2xkID0gMDtcbiAgICAgICAgYml0cyA9IDA7XG4gICAgICAgIC8vPT09Ly9cbiAgICAgICAgc3RhdGUubW9kZSA9IERJQ1Q7XG4gICAgICAgIC8qIGZhbGxzIHRocm91Z2ggKi9cbiAgICAgIGNhc2UgRElDVDpcbiAgICAgICAgaWYgKHN0YXRlLmhhdmVkaWN0ID09PSAwKSB7XG4gICAgICAgICAgLy8tLS0gUkVTVE9SRSgpIC0tLVxuICAgICAgICAgIHN0cm0ubmV4dF9vdXQgPSBwdXQ7XG4gICAgICAgICAgc3RybS5hdmFpbF9vdXQgPSBsZWZ0O1xuICAgICAgICAgIHN0cm0ubmV4dF9pbiA9IG5leHQ7XG4gICAgICAgICAgc3RybS5hdmFpbF9pbiA9IGhhdmU7XG4gICAgICAgICAgc3RhdGUuaG9sZCA9IGhvbGQ7XG4gICAgICAgICAgc3RhdGUuYml0cyA9IGJpdHM7XG4gICAgICAgICAgLy8tLS1cbiAgICAgICAgICByZXR1cm4gWl9ORUVEX0RJQ1Q7XG4gICAgICAgIH1cbiAgICAgICAgc3RybS5hZGxlciA9IHN0YXRlLmNoZWNrID0gMSAvKmFkbGVyMzIoMEwsIFpfTlVMTCwgMCkqLyA7XG4gICAgICAgIHN0YXRlLm1vZGUgPSBUWVBFO1xuICAgICAgICAvKiBmYWxscyB0aHJvdWdoICovXG4gICAgICBjYXNlIFRZUEU6XG4gICAgICAgIGlmIChmbHVzaCA9PT0gWl9CTE9DSyB8fCBmbHVzaCA9PT0gWl9UUkVFUykge1xuICAgICAgICAgIGJyZWFrIGluZl9sZWF2ZTtcbiAgICAgICAgfVxuICAgICAgICAvKiBmYWxscyB0aHJvdWdoICovXG4gICAgICBjYXNlIFRZUEVETzpcbiAgICAgICAgaWYgKHN0YXRlLmxhc3QpIHtcbiAgICAgICAgICAvLy0tLSBCWVRFQklUUygpIC0tLS8vXG4gICAgICAgICAgaG9sZCA+Pj49IGJpdHMgJiA3O1xuICAgICAgICAgIGJpdHMgLT0gYml0cyAmIDc7XG4gICAgICAgICAgLy8tLS0vL1xuICAgICAgICAgIHN0YXRlLm1vZGUgPSBDSEVDSztcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgICAvLz09PSBORUVEQklUUygzKTsgKi9cbiAgICAgICAgd2hpbGUgKGJpdHMgPCAzKSB7XG4gICAgICAgICAgaWYgKGhhdmUgPT09IDApIHtcbiAgICAgICAgICAgIGJyZWFrIGluZl9sZWF2ZTtcbiAgICAgICAgICB9XG4gICAgICAgICAgaGF2ZS0tO1xuICAgICAgICAgIGhvbGQgKz0gaW5wdXRbbmV4dCsrXSA8PCBiaXRzO1xuICAgICAgICAgIGJpdHMgKz0gODtcbiAgICAgICAgfVxuICAgICAgICAvLz09PS8vXG4gICAgICAgIHN0YXRlLmxhc3QgPSAoaG9sZCAmIDB4MDEpIC8qQklUUygxKSovIDtcbiAgICAgICAgLy8tLS0gRFJPUEJJVFMoMSkgLS0tLy9cbiAgICAgICAgaG9sZCA+Pj49IDE7XG4gICAgICAgIGJpdHMgLT0gMTtcbiAgICAgICAgLy8tLS0vL1xuXG4gICAgICAgIHN3aXRjaCAoKGhvbGQgJiAweDAzKSAvKkJJVFMoMikqLyApIHtcbiAgICAgICAgY2FzZSAwOlxuICAgICAgICAgIC8qIHN0b3JlZCBibG9jayAqL1xuICAgICAgICAgIC8vVHJhY2V2KChzdGRlcnIsIFwiaW5mbGF0ZTogICAgIHN0b3JlZCBibG9jayVzXFxuXCIsXG4gICAgICAgICAgLy8gICAgICAgIHN0YXRlLmxhc3QgPyBcIiAobGFzdClcIiA6IFwiXCIpKTtcbiAgICAgICAgICBzdGF0ZS5tb2RlID0gU1RPUkVEO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIDE6XG4gICAgICAgICAgLyogZml4ZWQgYmxvY2sgKi9cbiAgICAgICAgICBmaXhlZHRhYmxlcyhzdGF0ZSk7XG4gICAgICAgICAgLy9UcmFjZXYoKHN0ZGVyciwgXCJpbmZsYXRlOiAgICAgZml4ZWQgY29kZXMgYmxvY2slc1xcblwiLFxuICAgICAgICAgIC8vICAgICAgICBzdGF0ZS5sYXN0ID8gXCIgKGxhc3QpXCIgOiBcIlwiKSk7XG4gICAgICAgICAgc3RhdGUubW9kZSA9IExFTl87IC8qIGRlY29kZSBjb2RlcyAqL1xuICAgICAgICAgIGlmIChmbHVzaCA9PT0gWl9UUkVFUykge1xuICAgICAgICAgICAgLy8tLS0gRFJPUEJJVFMoMikgLS0tLy9cbiAgICAgICAgICAgIGhvbGQgPj4+PSAyO1xuICAgICAgICAgICAgYml0cyAtPSAyO1xuICAgICAgICAgICAgLy8tLS0vL1xuICAgICAgICAgICAgYnJlYWsgaW5mX2xlYXZlO1xuICAgICAgICAgIH1cbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSAyOlxuICAgICAgICAgIC8qIGR5bmFtaWMgYmxvY2sgKi9cbiAgICAgICAgICAvL1RyYWNldigoc3RkZXJyLCBcImluZmxhdGU6ICAgICBkeW5hbWljIGNvZGVzIGJsb2NrJXNcXG5cIixcbiAgICAgICAgICAvLyAgICAgICAgc3RhdGUubGFzdCA/IFwiIChsYXN0KVwiIDogXCJcIikpO1xuICAgICAgICAgIHN0YXRlLm1vZGUgPSBUQUJMRTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSAzOlxuICAgICAgICAgIHN0cm0ubXNnID0gJ2ludmFsaWQgYmxvY2sgdHlwZSc7XG4gICAgICAgICAgc3RhdGUubW9kZSA9IEJBRDtcbiAgICAgICAgfVxuICAgICAgICAvLy0tLSBEUk9QQklUUygyKSAtLS0vL1xuICAgICAgICBob2xkID4+Pj0gMjtcbiAgICAgICAgYml0cyAtPSAyO1xuICAgICAgICAvLy0tLS8vXG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSBTVE9SRUQ6XG4gICAgICAgIC8vLS0tIEJZVEVCSVRTKCkgLS0tLy8gLyogZ28gdG8gYnl0ZSBib3VuZGFyeSAqL1xuICAgICAgICBob2xkID4+Pj0gYml0cyAmIDc7XG4gICAgICAgIGJpdHMgLT0gYml0cyAmIDc7XG4gICAgICAgIC8vLS0tLy9cbiAgICAgICAgLy89PT0gTkVFREJJVFMoMzIpOyAqL1xuICAgICAgICB3aGlsZSAoYml0cyA8IDMyKSB7XG4gICAgICAgICAgaWYgKGhhdmUgPT09IDApIHtcbiAgICAgICAgICAgIGJyZWFrIGluZl9sZWF2ZTtcbiAgICAgICAgICB9XG4gICAgICAgICAgaGF2ZS0tO1xuICAgICAgICAgIGhvbGQgKz0gaW5wdXRbbmV4dCsrXSA8PCBiaXRzO1xuICAgICAgICAgIGJpdHMgKz0gODtcbiAgICAgICAgfVxuICAgICAgICAvLz09PS8vXG4gICAgICAgIGlmICgoaG9sZCAmIDB4ZmZmZikgIT09ICgoaG9sZCA+Pj4gMTYpIF4gMHhmZmZmKSkge1xuICAgICAgICAgIHN0cm0ubXNnID0gJ2ludmFsaWQgc3RvcmVkIGJsb2NrIGxlbmd0aHMnO1xuICAgICAgICAgIHN0YXRlLm1vZGUgPSBCQUQ7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgICAgc3RhdGUubGVuZ3RoID0gaG9sZCAmIDB4ZmZmZjtcbiAgICAgICAgLy9UcmFjZXYoKHN0ZGVyciwgXCJpbmZsYXRlOiAgICAgICBzdG9yZWQgbGVuZ3RoICV1XFxuXCIsXG4gICAgICAgIC8vICAgICAgICBzdGF0ZS5sZW5ndGgpKTtcbiAgICAgICAgLy89PT0gSU5JVEJJVFMoKTtcbiAgICAgICAgaG9sZCA9IDA7XG4gICAgICAgIGJpdHMgPSAwO1xuICAgICAgICAvLz09PS8vXG4gICAgICAgIHN0YXRlLm1vZGUgPSBDT1BZXztcbiAgICAgICAgaWYgKGZsdXNoID09PSBaX1RSRUVTKSB7XG4gICAgICAgICAgYnJlYWsgaW5mX2xlYXZlO1xuICAgICAgICB9XG4gICAgICAgIC8qIGZhbGxzIHRocm91Z2ggKi9cbiAgICAgIGNhc2UgQ09QWV86XG4gICAgICAgIHN0YXRlLm1vZGUgPSBDT1BZO1xuICAgICAgICAvKiBmYWxscyB0aHJvdWdoICovXG4gICAgICBjYXNlIENPUFk6XG4gICAgICAgIGNvcHkgPSBzdGF0ZS5sZW5ndGg7XG4gICAgICAgIGlmIChjb3B5KSB7XG4gICAgICAgICAgaWYgKGNvcHkgPiBoYXZlKSB7XG4gICAgICAgICAgICBjb3B5ID0gaGF2ZTtcbiAgICAgICAgICB9XG4gICAgICAgICAgaWYgKGNvcHkgPiBsZWZ0KSB7XG4gICAgICAgICAgICBjb3B5ID0gbGVmdDtcbiAgICAgICAgICB9XG4gICAgICAgICAgaWYgKGNvcHkgPT09IDApIHtcbiAgICAgICAgICAgIGJyZWFrIGluZl9sZWF2ZTtcbiAgICAgICAgICB9XG4gICAgICAgICAgLy8tLS0gem1lbWNweShwdXQsIG5leHQsIGNvcHkpOyAtLS1cbiAgICAgICAgICBhcnJheVNldChvdXRwdXQsIGlucHV0LCBuZXh0LCBjb3B5LCBwdXQpO1xuICAgICAgICAgIC8vLS0tLy9cbiAgICAgICAgICBoYXZlIC09IGNvcHk7XG4gICAgICAgICAgbmV4dCArPSBjb3B5O1xuICAgICAgICAgIGxlZnQgLT0gY29weTtcbiAgICAgICAgICBwdXQgKz0gY29weTtcbiAgICAgICAgICBzdGF0ZS5sZW5ndGggLT0gY29weTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgICAvL1RyYWNldigoc3RkZXJyLCBcImluZmxhdGU6ICAgICAgIHN0b3JlZCBlbmRcXG5cIikpO1xuICAgICAgICBzdGF0ZS5tb2RlID0gVFlQRTtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlIFRBQkxFOlxuICAgICAgICAvLz09PSBORUVEQklUUygxNCk7ICovXG4gICAgICAgIHdoaWxlIChiaXRzIDwgMTQpIHtcbiAgICAgICAgICBpZiAoaGF2ZSA9PT0gMCkge1xuICAgICAgICAgICAgYnJlYWsgaW5mX2xlYXZlO1xuICAgICAgICAgIH1cbiAgICAgICAgICBoYXZlLS07XG4gICAgICAgICAgaG9sZCArPSBpbnB1dFtuZXh0KytdIDw8IGJpdHM7XG4gICAgICAgICAgYml0cyArPSA4O1xuICAgICAgICB9XG4gICAgICAgIC8vPT09Ly9cbiAgICAgICAgc3RhdGUubmxlbiA9IChob2xkICYgMHgxZikgLypCSVRTKDUpKi8gKyAyNTc7XG4gICAgICAgIC8vLS0tIERST1BCSVRTKDUpIC0tLS8vXG4gICAgICAgIGhvbGQgPj4+PSA1O1xuICAgICAgICBiaXRzIC09IDU7XG4gICAgICAgIC8vLS0tLy9cbiAgICAgICAgc3RhdGUubmRpc3QgPSAoaG9sZCAmIDB4MWYpIC8qQklUUyg1KSovICsgMTtcbiAgICAgICAgLy8tLS0gRFJPUEJJVFMoNSkgLS0tLy9cbiAgICAgICAgaG9sZCA+Pj49IDU7XG4gICAgICAgIGJpdHMgLT0gNTtcbiAgICAgICAgLy8tLS0vL1xuICAgICAgICBzdGF0ZS5uY29kZSA9IChob2xkICYgMHgwZikgLypCSVRTKDQpKi8gKyA0O1xuICAgICAgICAvLy0tLSBEUk9QQklUUyg0KSAtLS0vL1xuICAgICAgICBob2xkID4+Pj0gNDtcbiAgICAgICAgYml0cyAtPSA0O1xuICAgICAgICAvLy0tLS8vXG4gICAgICAgIC8vI2lmbmRlZiBQS1pJUF9CVUdfV09SS0FST1VORFxuICAgICAgICBpZiAoc3RhdGUubmxlbiA+IDI4NiB8fCBzdGF0ZS5uZGlzdCA+IDMwKSB7XG4gICAgICAgICAgc3RybS5tc2cgPSAndG9vIG1hbnkgbGVuZ3RoIG9yIGRpc3RhbmNlIHN5bWJvbHMnO1xuICAgICAgICAgIHN0YXRlLm1vZGUgPSBCQUQ7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgICAgLy8jZW5kaWZcbiAgICAgICAgLy9UcmFjZXYoKHN0ZGVyciwgXCJpbmZsYXRlOiAgICAgICB0YWJsZSBzaXplcyBva1xcblwiKSk7XG4gICAgICAgIHN0YXRlLmhhdmUgPSAwO1xuICAgICAgICBzdGF0ZS5tb2RlID0gTEVOTEVOUztcbiAgICAgICAgLyogZmFsbHMgdGhyb3VnaCAqL1xuICAgICAgY2FzZSBMRU5MRU5TOlxuICAgICAgICB3aGlsZSAoc3RhdGUuaGF2ZSA8IHN0YXRlLm5jb2RlKSB7XG4gICAgICAgICAgLy89PT0gTkVFREJJVFMoMyk7XG4gICAgICAgICAgd2hpbGUgKGJpdHMgPCAzKSB7XG4gICAgICAgICAgICBpZiAoaGF2ZSA9PT0gMCkge1xuICAgICAgICAgICAgICBicmVhayBpbmZfbGVhdmU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBoYXZlLS07XG4gICAgICAgICAgICBob2xkICs9IGlucHV0W25leHQrK10gPDwgYml0cztcbiAgICAgICAgICAgIGJpdHMgKz0gODtcbiAgICAgICAgICB9XG4gICAgICAgICAgLy89PT0vL1xuICAgICAgICAgIHN0YXRlLmxlbnNbb3JkZXJbc3RhdGUuaGF2ZSsrXV0gPSAoaG9sZCAmIDB4MDcpOyAvL0JJVFMoMyk7XG4gICAgICAgICAgLy8tLS0gRFJPUEJJVFMoMykgLS0tLy9cbiAgICAgICAgICBob2xkID4+Pj0gMztcbiAgICAgICAgICBiaXRzIC09IDM7XG4gICAgICAgICAgLy8tLS0vL1xuICAgICAgICB9XG4gICAgICAgIHdoaWxlIChzdGF0ZS5oYXZlIDwgMTkpIHtcbiAgICAgICAgICBzdGF0ZS5sZW5zW29yZGVyW3N0YXRlLmhhdmUrK11dID0gMDtcbiAgICAgICAgfVxuICAgICAgICAvLyBXZSBoYXZlIHNlcGFyYXRlIHRhYmxlcyAmIG5vIHBvaW50ZXJzLiAyIGNvbW1lbnRlZCBsaW5lcyBiZWxvdyBub3QgbmVlZGVkLlxuICAgICAgICAvL3N0YXRlLm5leHQgPSBzdGF0ZS5jb2RlcztcbiAgICAgICAgLy9zdGF0ZS5sZW5jb2RlID0gc3RhdGUubmV4dDtcbiAgICAgICAgLy8gU3dpdGNoIHRvIHVzZSBkeW5hbWljIHRhYmxlXG4gICAgICAgIHN0YXRlLmxlbmNvZGUgPSBzdGF0ZS5sZW5keW47XG4gICAgICAgIHN0YXRlLmxlbmJpdHMgPSA3O1xuXG4gICAgICAgIG9wdHMgPSB7XG4gICAgICAgICAgYml0czogc3RhdGUubGVuYml0c1xuICAgICAgICB9O1xuICAgICAgICByZXQgPSBpbmZsYXRlX3RhYmxlKENPREVTLCBzdGF0ZS5sZW5zLCAwLCAxOSwgc3RhdGUubGVuY29kZSwgMCwgc3RhdGUud29yaywgb3B0cyk7XG4gICAgICAgIHN0YXRlLmxlbmJpdHMgPSBvcHRzLmJpdHM7XG5cbiAgICAgICAgaWYgKHJldCkge1xuICAgICAgICAgIHN0cm0ubXNnID0gJ2ludmFsaWQgY29kZSBsZW5ndGhzIHNldCc7XG4gICAgICAgICAgc3RhdGUubW9kZSA9IEJBRDtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgICAvL1RyYWNldigoc3RkZXJyLCBcImluZmxhdGU6ICAgICAgIGNvZGUgbGVuZ3RocyBva1xcblwiKSk7XG4gICAgICAgIHN0YXRlLmhhdmUgPSAwO1xuICAgICAgICBzdGF0ZS5tb2RlID0gQ09ERUxFTlM7XG4gICAgICAgIC8qIGZhbGxzIHRocm91Z2ggKi9cbiAgICAgIGNhc2UgQ09ERUxFTlM6XG4gICAgICAgIHdoaWxlIChzdGF0ZS5oYXZlIDwgc3RhdGUubmxlbiArIHN0YXRlLm5kaXN0KSB7XG4gICAgICAgICAgZm9yICg7Oykge1xuICAgICAgICAgICAgaGVyZSA9IHN0YXRlLmxlbmNvZGVbaG9sZCAmICgoMSA8PCBzdGF0ZS5sZW5iaXRzKSAtIDEpXTsgLypCSVRTKHN0YXRlLmxlbmJpdHMpKi9cbiAgICAgICAgICAgIGhlcmVfYml0cyA9IGhlcmUgPj4+IDI0O1xuICAgICAgICAgICAgaGVyZV9vcCA9IChoZXJlID4+PiAxNikgJiAweGZmO1xuICAgICAgICAgICAgaGVyZV92YWwgPSBoZXJlICYgMHhmZmZmO1xuXG4gICAgICAgICAgICBpZiAoKGhlcmVfYml0cykgPD0gYml0cykge1xuICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vLS0tIFBVTExCWVRFKCkgLS0tLy9cbiAgICAgICAgICAgIGlmIChoYXZlID09PSAwKSB7XG4gICAgICAgICAgICAgIGJyZWFrIGluZl9sZWF2ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGhhdmUtLTtcbiAgICAgICAgICAgIGhvbGQgKz0gaW5wdXRbbmV4dCsrXSA8PCBiaXRzO1xuICAgICAgICAgICAgYml0cyArPSA4O1xuICAgICAgICAgICAgLy8tLS0vL1xuICAgICAgICAgIH1cbiAgICAgICAgICBpZiAoaGVyZV92YWwgPCAxNikge1xuICAgICAgICAgICAgLy8tLS0gRFJPUEJJVFMoaGVyZS5iaXRzKSAtLS0vL1xuICAgICAgICAgICAgaG9sZCA+Pj49IGhlcmVfYml0cztcbiAgICAgICAgICAgIGJpdHMgLT0gaGVyZV9iaXRzO1xuICAgICAgICAgICAgLy8tLS0vL1xuICAgICAgICAgICAgc3RhdGUubGVuc1tzdGF0ZS5oYXZlKytdID0gaGVyZV92YWw7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGlmIChoZXJlX3ZhbCA9PT0gMTYpIHtcbiAgICAgICAgICAgICAgLy89PT0gTkVFREJJVFMoaGVyZS5iaXRzICsgMik7XG4gICAgICAgICAgICAgIG4gPSBoZXJlX2JpdHMgKyAyO1xuICAgICAgICAgICAgICB3aGlsZSAoYml0cyA8IG4pIHtcbiAgICAgICAgICAgICAgICBpZiAoaGF2ZSA9PT0gMCkge1xuICAgICAgICAgICAgICAgICAgYnJlYWsgaW5mX2xlYXZlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBoYXZlLS07XG4gICAgICAgICAgICAgICAgaG9sZCArPSBpbnB1dFtuZXh0KytdIDw8IGJpdHM7XG4gICAgICAgICAgICAgICAgYml0cyArPSA4O1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIC8vPT09Ly9cbiAgICAgICAgICAgICAgLy8tLS0gRFJPUEJJVFMoaGVyZS5iaXRzKSAtLS0vL1xuICAgICAgICAgICAgICBob2xkID4+Pj0gaGVyZV9iaXRzO1xuICAgICAgICAgICAgICBiaXRzIC09IGhlcmVfYml0cztcbiAgICAgICAgICAgICAgLy8tLS0vL1xuICAgICAgICAgICAgICBpZiAoc3RhdGUuaGF2ZSA9PT0gMCkge1xuICAgICAgICAgICAgICAgIHN0cm0ubXNnID0gJ2ludmFsaWQgYml0IGxlbmd0aCByZXBlYXQnO1xuICAgICAgICAgICAgICAgIHN0YXRlLm1vZGUgPSBCQUQ7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgbGVuID0gc3RhdGUubGVuc1tzdGF0ZS5oYXZlIC0gMV07XG4gICAgICAgICAgICAgIGNvcHkgPSAzICsgKGhvbGQgJiAweDAzKTsgLy9CSVRTKDIpO1xuICAgICAgICAgICAgICAvLy0tLSBEUk9QQklUUygyKSAtLS0vL1xuICAgICAgICAgICAgICBob2xkID4+Pj0gMjtcbiAgICAgICAgICAgICAgYml0cyAtPSAyO1xuICAgICAgICAgICAgICAvLy0tLS8vXG4gICAgICAgICAgICB9IGVsc2UgaWYgKGhlcmVfdmFsID09PSAxNykge1xuICAgICAgICAgICAgICAvLz09PSBORUVEQklUUyhoZXJlLmJpdHMgKyAzKTtcbiAgICAgICAgICAgICAgbiA9IGhlcmVfYml0cyArIDM7XG4gICAgICAgICAgICAgIHdoaWxlIChiaXRzIDwgbikge1xuICAgICAgICAgICAgICAgIGlmIChoYXZlID09PSAwKSB7XG4gICAgICAgICAgICAgICAgICBicmVhayBpbmZfbGVhdmU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGhhdmUtLTtcbiAgICAgICAgICAgICAgICBob2xkICs9IGlucHV0W25leHQrK10gPDwgYml0cztcbiAgICAgICAgICAgICAgICBiaXRzICs9IDg7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgLy89PT0vL1xuICAgICAgICAgICAgICAvLy0tLSBEUk9QQklUUyhoZXJlLmJpdHMpIC0tLS8vXG4gICAgICAgICAgICAgIGhvbGQgPj4+PSBoZXJlX2JpdHM7XG4gICAgICAgICAgICAgIGJpdHMgLT0gaGVyZV9iaXRzO1xuICAgICAgICAgICAgICAvLy0tLS8vXG4gICAgICAgICAgICAgIGxlbiA9IDA7XG4gICAgICAgICAgICAgIGNvcHkgPSAzICsgKGhvbGQgJiAweDA3KTsgLy9CSVRTKDMpO1xuICAgICAgICAgICAgICAvLy0tLSBEUk9QQklUUygzKSAtLS0vL1xuICAgICAgICAgICAgICBob2xkID4+Pj0gMztcbiAgICAgICAgICAgICAgYml0cyAtPSAzO1xuICAgICAgICAgICAgICAvLy0tLS8vXG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAvLz09PSBORUVEQklUUyhoZXJlLmJpdHMgKyA3KTtcbiAgICAgICAgICAgICAgbiA9IGhlcmVfYml0cyArIDc7XG4gICAgICAgICAgICAgIHdoaWxlIChiaXRzIDwgbikge1xuICAgICAgICAgICAgICAgIGlmIChoYXZlID09PSAwKSB7XG4gICAgICAgICAgICAgICAgICBicmVhayBpbmZfbGVhdmU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGhhdmUtLTtcbiAgICAgICAgICAgICAgICBob2xkICs9IGlucHV0W25leHQrK10gPDwgYml0cztcbiAgICAgICAgICAgICAgICBiaXRzICs9IDg7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgLy89PT0vL1xuICAgICAgICAgICAgICAvLy0tLSBEUk9QQklUUyhoZXJlLmJpdHMpIC0tLS8vXG4gICAgICAgICAgICAgIGhvbGQgPj4+PSBoZXJlX2JpdHM7XG4gICAgICAgICAgICAgIGJpdHMgLT0gaGVyZV9iaXRzO1xuICAgICAgICAgICAgICAvLy0tLS8vXG4gICAgICAgICAgICAgIGxlbiA9IDA7XG4gICAgICAgICAgICAgIGNvcHkgPSAxMSArIChob2xkICYgMHg3Zik7IC8vQklUUyg3KTtcbiAgICAgICAgICAgICAgLy8tLS0gRFJPUEJJVFMoNykgLS0tLy9cbiAgICAgICAgICAgICAgaG9sZCA+Pj49IDc7XG4gICAgICAgICAgICAgIGJpdHMgLT0gNztcbiAgICAgICAgICAgICAgLy8tLS0vL1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHN0YXRlLmhhdmUgKyBjb3B5ID4gc3RhdGUubmxlbiArIHN0YXRlLm5kaXN0KSB7XG4gICAgICAgICAgICAgIHN0cm0ubXNnID0gJ2ludmFsaWQgYml0IGxlbmd0aCByZXBlYXQnO1xuICAgICAgICAgICAgICBzdGF0ZS5tb2RlID0gQkFEO1xuICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHdoaWxlIChjb3B5LS0pIHtcbiAgICAgICAgICAgICAgc3RhdGUubGVuc1tzdGF0ZS5oYXZlKytdID0gbGVuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIC8qIGhhbmRsZSBlcnJvciBicmVha3MgaW4gd2hpbGUgKi9cbiAgICAgICAgaWYgKHN0YXRlLm1vZGUgPT09IEJBRCkge1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG5cbiAgICAgICAgLyogY2hlY2sgZm9yIGVuZC1vZi1ibG9jayBjb2RlIChiZXR0ZXIgaGF2ZSBvbmUpICovXG4gICAgICAgIGlmIChzdGF0ZS5sZW5zWzI1Nl0gPT09IDApIHtcbiAgICAgICAgICBzdHJtLm1zZyA9ICdpbnZhbGlkIGNvZGUgLS0gbWlzc2luZyBlbmQtb2YtYmxvY2snO1xuICAgICAgICAgIHN0YXRlLm1vZGUgPSBCQUQ7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cblxuICAgICAgICAvKiBidWlsZCBjb2RlIHRhYmxlcyAtLSBub3RlOiBkbyBub3QgY2hhbmdlIHRoZSBsZW5iaXRzIG9yIGRpc3RiaXRzXG4gICAgICAgICAgIHZhbHVlcyBoZXJlICg5IGFuZCA2KSB3aXRob3V0IHJlYWRpbmcgdGhlIGNvbW1lbnRzIGluIGluZnRyZWVzLmhcbiAgICAgICAgICAgY29uY2VybmluZyB0aGUgRU5PVUdIIGNvbnN0YW50cywgd2hpY2ggZGVwZW5kIG9uIHRob3NlIHZhbHVlcyAqL1xuICAgICAgICBzdGF0ZS5sZW5iaXRzID0gOTtcblxuICAgICAgICBvcHRzID0ge1xuICAgICAgICAgIGJpdHM6IHN0YXRlLmxlbmJpdHNcbiAgICAgICAgfTtcbiAgICAgICAgcmV0ID0gaW5mbGF0ZV90YWJsZShMRU5TLCBzdGF0ZS5sZW5zLCAwLCBzdGF0ZS5ubGVuLCBzdGF0ZS5sZW5jb2RlLCAwLCBzdGF0ZS53b3JrLCBvcHRzKTtcbiAgICAgICAgLy8gV2UgaGF2ZSBzZXBhcmF0ZSB0YWJsZXMgJiBubyBwb2ludGVycy4gMiBjb21tZW50ZWQgbGluZXMgYmVsb3cgbm90IG5lZWRlZC5cbiAgICAgICAgLy8gc3RhdGUubmV4dF9pbmRleCA9IG9wdHMudGFibGVfaW5kZXg7XG4gICAgICAgIHN0YXRlLmxlbmJpdHMgPSBvcHRzLmJpdHM7XG4gICAgICAgIC8vIHN0YXRlLmxlbmNvZGUgPSBzdGF0ZS5uZXh0O1xuXG4gICAgICAgIGlmIChyZXQpIHtcbiAgICAgICAgICBzdHJtLm1zZyA9ICdpbnZhbGlkIGxpdGVyYWwvbGVuZ3RocyBzZXQnO1xuICAgICAgICAgIHN0YXRlLm1vZGUgPSBCQUQ7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cblxuICAgICAgICBzdGF0ZS5kaXN0Yml0cyA9IDY7XG4gICAgICAgIC8vc3RhdGUuZGlzdGNvZGUuY29weShzdGF0ZS5jb2Rlcyk7XG4gICAgICAgIC8vIFN3aXRjaCB0byB1c2UgZHluYW1pYyB0YWJsZVxuICAgICAgICBzdGF0ZS5kaXN0Y29kZSA9IHN0YXRlLmRpc3RkeW47XG4gICAgICAgIG9wdHMgPSB7XG4gICAgICAgICAgYml0czogc3RhdGUuZGlzdGJpdHNcbiAgICAgICAgfTtcbiAgICAgICAgcmV0ID0gaW5mbGF0ZV90YWJsZShESVNUUywgc3RhdGUubGVucywgc3RhdGUubmxlbiwgc3RhdGUubmRpc3QsIHN0YXRlLmRpc3Rjb2RlLCAwLCBzdGF0ZS53b3JrLCBvcHRzKTtcbiAgICAgICAgLy8gV2UgaGF2ZSBzZXBhcmF0ZSB0YWJsZXMgJiBubyBwb2ludGVycy4gMiBjb21tZW50ZWQgbGluZXMgYmVsb3cgbm90IG5lZWRlZC5cbiAgICAgICAgLy8gc3RhdGUubmV4dF9pbmRleCA9IG9wdHMudGFibGVfaW5kZXg7XG4gICAgICAgIHN0YXRlLmRpc3RiaXRzID0gb3B0cy5iaXRzO1xuICAgICAgICAvLyBzdGF0ZS5kaXN0Y29kZSA9IHN0YXRlLm5leHQ7XG5cbiAgICAgICAgaWYgKHJldCkge1xuICAgICAgICAgIHN0cm0ubXNnID0gJ2ludmFsaWQgZGlzdGFuY2VzIHNldCc7XG4gICAgICAgICAgc3RhdGUubW9kZSA9IEJBRDtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgICAvL1RyYWNldigoc3RkZXJyLCAnaW5mbGF0ZTogICAgICAgY29kZXMgb2tcXG4nKSk7XG4gICAgICAgIHN0YXRlLm1vZGUgPSBMRU5fO1xuICAgICAgICBpZiAoZmx1c2ggPT09IFpfVFJFRVMpIHtcbiAgICAgICAgICBicmVhayBpbmZfbGVhdmU7XG4gICAgICAgIH1cbiAgICAgICAgLyogZmFsbHMgdGhyb3VnaCAqL1xuICAgICAgY2FzZSBMRU5fOlxuICAgICAgICBzdGF0ZS5tb2RlID0gTEVOO1xuICAgICAgICAvKiBmYWxscyB0aHJvdWdoICovXG4gICAgICBjYXNlIExFTjpcbiAgICAgICAgaWYgKGhhdmUgPj0gNiAmJiBsZWZ0ID49IDI1OCkge1xuICAgICAgICAgIC8vLS0tIFJFU1RPUkUoKSAtLS1cbiAgICAgICAgICBzdHJtLm5leHRfb3V0ID0gcHV0O1xuICAgICAgICAgIHN0cm0uYXZhaWxfb3V0ID0gbGVmdDtcbiAgICAgICAgICBzdHJtLm5leHRfaW4gPSBuZXh0O1xuICAgICAgICAgIHN0cm0uYXZhaWxfaW4gPSBoYXZlO1xuICAgICAgICAgIHN0YXRlLmhvbGQgPSBob2xkO1xuICAgICAgICAgIHN0YXRlLmJpdHMgPSBiaXRzO1xuICAgICAgICAgIC8vLS0tXG4gICAgICAgICAgaW5mbGF0ZV9mYXN0KHN0cm0sIF9vdXQpO1xuICAgICAgICAgIC8vLS0tIExPQUQoKSAtLS1cbiAgICAgICAgICBwdXQgPSBzdHJtLm5leHRfb3V0O1xuICAgICAgICAgIG91dHB1dCA9IHN0cm0ub3V0cHV0O1xuICAgICAgICAgIGxlZnQgPSBzdHJtLmF2YWlsX291dDtcbiAgICAgICAgICBuZXh0ID0gc3RybS5uZXh0X2luO1xuICAgICAgICAgIGlucHV0ID0gc3RybS5pbnB1dDtcbiAgICAgICAgICBoYXZlID0gc3RybS5hdmFpbF9pbjtcbiAgICAgICAgICBob2xkID0gc3RhdGUuaG9sZDtcbiAgICAgICAgICBiaXRzID0gc3RhdGUuYml0cztcbiAgICAgICAgICAvLy0tLVxuXG4gICAgICAgICAgaWYgKHN0YXRlLm1vZGUgPT09IFRZUEUpIHtcbiAgICAgICAgICAgIHN0YXRlLmJhY2sgPSAtMTtcbiAgICAgICAgICB9XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgICAgc3RhdGUuYmFjayA9IDA7XG4gICAgICAgIGZvciAoOzspIHtcbiAgICAgICAgICBoZXJlID0gc3RhdGUubGVuY29kZVtob2xkICYgKCgxIDw8IHN0YXRlLmxlbmJpdHMpIC0gMSldOyAvKkJJVFMoc3RhdGUubGVuYml0cykqL1xuICAgICAgICAgIGhlcmVfYml0cyA9IGhlcmUgPj4+IDI0O1xuICAgICAgICAgIGhlcmVfb3AgPSAoaGVyZSA+Pj4gMTYpICYgMHhmZjtcbiAgICAgICAgICBoZXJlX3ZhbCA9IGhlcmUgJiAweGZmZmY7XG5cbiAgICAgICAgICBpZiAoaGVyZV9iaXRzIDw9IGJpdHMpIHtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIH1cbiAgICAgICAgICAvLy0tLSBQVUxMQllURSgpIC0tLS8vXG4gICAgICAgICAgaWYgKGhhdmUgPT09IDApIHtcbiAgICAgICAgICAgIGJyZWFrIGluZl9sZWF2ZTtcbiAgICAgICAgICB9XG4gICAgICAgICAgaGF2ZS0tO1xuICAgICAgICAgIGhvbGQgKz0gaW5wdXRbbmV4dCsrXSA8PCBiaXRzO1xuICAgICAgICAgIGJpdHMgKz0gODtcbiAgICAgICAgICAvLy0tLS8vXG4gICAgICAgIH1cbiAgICAgICAgaWYgKGhlcmVfb3AgJiYgKGhlcmVfb3AgJiAweGYwKSA9PT0gMCkge1xuICAgICAgICAgIGxhc3RfYml0cyA9IGhlcmVfYml0cztcbiAgICAgICAgICBsYXN0X29wID0gaGVyZV9vcDtcbiAgICAgICAgICBsYXN0X3ZhbCA9IGhlcmVfdmFsO1xuICAgICAgICAgIGZvciAoOzspIHtcbiAgICAgICAgICAgIGhlcmUgPSBzdGF0ZS5sZW5jb2RlW2xhc3RfdmFsICtcbiAgICAgICAgICAgICAgKChob2xkICYgKCgxIDw8IChsYXN0X2JpdHMgKyBsYXN0X29wKSkgLSAxKSkgLypCSVRTKGxhc3QuYml0cyArIGxhc3Qub3ApKi8gPj4gbGFzdF9iaXRzKV07XG4gICAgICAgICAgICBoZXJlX2JpdHMgPSBoZXJlID4+PiAyNDtcbiAgICAgICAgICAgIGhlcmVfb3AgPSAoaGVyZSA+Pj4gMTYpICYgMHhmZjtcbiAgICAgICAgICAgIGhlcmVfdmFsID0gaGVyZSAmIDB4ZmZmZjtcblxuICAgICAgICAgICAgaWYgKChsYXN0X2JpdHMgKyBoZXJlX2JpdHMpIDw9IGJpdHMpIHtcbiAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLy0tLSBQVUxMQllURSgpIC0tLS8vXG4gICAgICAgICAgICBpZiAoaGF2ZSA9PT0gMCkge1xuICAgICAgICAgICAgICBicmVhayBpbmZfbGVhdmU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBoYXZlLS07XG4gICAgICAgICAgICBob2xkICs9IGlucHV0W25leHQrK10gPDwgYml0cztcbiAgICAgICAgICAgIGJpdHMgKz0gODtcbiAgICAgICAgICAgIC8vLS0tLy9cbiAgICAgICAgICB9XG4gICAgICAgICAgLy8tLS0gRFJPUEJJVFMobGFzdC5iaXRzKSAtLS0vL1xuICAgICAgICAgIGhvbGQgPj4+PSBsYXN0X2JpdHM7XG4gICAgICAgICAgYml0cyAtPSBsYXN0X2JpdHM7XG4gICAgICAgICAgLy8tLS0vL1xuICAgICAgICAgIHN0YXRlLmJhY2sgKz0gbGFzdF9iaXRzO1xuICAgICAgICB9XG4gICAgICAgIC8vLS0tIERST1BCSVRTKGhlcmUuYml0cykgLS0tLy9cbiAgICAgICAgaG9sZCA+Pj49IGhlcmVfYml0cztcbiAgICAgICAgYml0cyAtPSBoZXJlX2JpdHM7XG4gICAgICAgIC8vLS0tLy9cbiAgICAgICAgc3RhdGUuYmFjayArPSBoZXJlX2JpdHM7XG4gICAgICAgIHN0YXRlLmxlbmd0aCA9IGhlcmVfdmFsO1xuICAgICAgICBpZiAoaGVyZV9vcCA9PT0gMCkge1xuICAgICAgICAgIC8vVHJhY2V2digoc3RkZXJyLCBoZXJlLnZhbCA+PSAweDIwICYmIGhlcmUudmFsIDwgMHg3ZiA/XG4gICAgICAgICAgLy8gICAgICAgIFwiaW5mbGF0ZTogICAgICAgICBsaXRlcmFsICclYydcXG5cIiA6XG4gICAgICAgICAgLy8gICAgICAgIFwiaW5mbGF0ZTogICAgICAgICBsaXRlcmFsIDB4JTAyeFxcblwiLCBoZXJlLnZhbCkpO1xuICAgICAgICAgIHN0YXRlLm1vZGUgPSBMSVQ7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGhlcmVfb3AgJiAzMikge1xuICAgICAgICAgIC8vVHJhY2V2digoc3RkZXJyLCBcImluZmxhdGU6ICAgICAgICAgZW5kIG9mIGJsb2NrXFxuXCIpKTtcbiAgICAgICAgICBzdGF0ZS5iYWNrID0gLTE7XG4gICAgICAgICAgc3RhdGUubW9kZSA9IFRZUEU7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGhlcmVfb3AgJiA2NCkge1xuICAgICAgICAgIHN0cm0ubXNnID0gJ2ludmFsaWQgbGl0ZXJhbC9sZW5ndGggY29kZSc7XG4gICAgICAgICAgc3RhdGUubW9kZSA9IEJBRDtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgICBzdGF0ZS5leHRyYSA9IGhlcmVfb3AgJiAxNTtcbiAgICAgICAgc3RhdGUubW9kZSA9IExFTkVYVDtcbiAgICAgICAgLyogZmFsbHMgdGhyb3VnaCAqL1xuICAgICAgY2FzZSBMRU5FWFQ6XG4gICAgICAgIGlmIChzdGF0ZS5leHRyYSkge1xuICAgICAgICAgIC8vPT09IE5FRURCSVRTKHN0YXRlLmV4dHJhKTtcbiAgICAgICAgICBuID0gc3RhdGUuZXh0cmE7XG4gICAgICAgICAgd2hpbGUgKGJpdHMgPCBuKSB7XG4gICAgICAgICAgICBpZiAoaGF2ZSA9PT0gMCkge1xuICAgICAgICAgICAgICBicmVhayBpbmZfbGVhdmU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBoYXZlLS07XG4gICAgICAgICAgICBob2xkICs9IGlucHV0W25leHQrK10gPDwgYml0cztcbiAgICAgICAgICAgIGJpdHMgKz0gODtcbiAgICAgICAgICB9XG4gICAgICAgICAgLy89PT0vL1xuICAgICAgICAgIHN0YXRlLmxlbmd0aCArPSBob2xkICYgKCgxIDw8IHN0YXRlLmV4dHJhKSAtIDEpIC8qQklUUyhzdGF0ZS5leHRyYSkqLyA7XG4gICAgICAgICAgLy8tLS0gRFJPUEJJVFMoc3RhdGUuZXh0cmEpIC0tLS8vXG4gICAgICAgICAgaG9sZCA+Pj49IHN0YXRlLmV4dHJhO1xuICAgICAgICAgIGJpdHMgLT0gc3RhdGUuZXh0cmE7XG4gICAgICAgICAgLy8tLS0vL1xuICAgICAgICAgIHN0YXRlLmJhY2sgKz0gc3RhdGUuZXh0cmE7XG4gICAgICAgIH1cbiAgICAgICAgLy9UcmFjZXZ2KChzdGRlcnIsIFwiaW5mbGF0ZTogICAgICAgICBsZW5ndGggJXVcXG5cIiwgc3RhdGUubGVuZ3RoKSk7XG4gICAgICAgIHN0YXRlLndhcyA9IHN0YXRlLmxlbmd0aDtcbiAgICAgICAgc3RhdGUubW9kZSA9IERJU1Q7XG4gICAgICAgIC8qIGZhbGxzIHRocm91Z2ggKi9cbiAgICAgIGNhc2UgRElTVDpcbiAgICAgICAgZm9yICg7Oykge1xuICAgICAgICAgIGhlcmUgPSBzdGF0ZS5kaXN0Y29kZVtob2xkICYgKCgxIDw8IHN0YXRlLmRpc3RiaXRzKSAtIDEpXTsgLypCSVRTKHN0YXRlLmRpc3RiaXRzKSovXG4gICAgICAgICAgaGVyZV9iaXRzID0gaGVyZSA+Pj4gMjQ7XG4gICAgICAgICAgaGVyZV9vcCA9IChoZXJlID4+PiAxNikgJiAweGZmO1xuICAgICAgICAgIGhlcmVfdmFsID0gaGVyZSAmIDB4ZmZmZjtcblxuICAgICAgICAgIGlmICgoaGVyZV9iaXRzKSA8PSBiaXRzKSB7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICB9XG4gICAgICAgICAgLy8tLS0gUFVMTEJZVEUoKSAtLS0vL1xuICAgICAgICAgIGlmIChoYXZlID09PSAwKSB7XG4gICAgICAgICAgICBicmVhayBpbmZfbGVhdmU7XG4gICAgICAgICAgfVxuICAgICAgICAgIGhhdmUtLTtcbiAgICAgICAgICBob2xkICs9IGlucHV0W25leHQrK10gPDwgYml0cztcbiAgICAgICAgICBiaXRzICs9IDg7XG4gICAgICAgICAgLy8tLS0vL1xuICAgICAgICB9XG4gICAgICAgIGlmICgoaGVyZV9vcCAmIDB4ZjApID09PSAwKSB7XG4gICAgICAgICAgbGFzdF9iaXRzID0gaGVyZV9iaXRzO1xuICAgICAgICAgIGxhc3Rfb3AgPSBoZXJlX29wO1xuICAgICAgICAgIGxhc3RfdmFsID0gaGVyZV92YWw7XG4gICAgICAgICAgZm9yICg7Oykge1xuICAgICAgICAgICAgaGVyZSA9IHN0YXRlLmRpc3Rjb2RlW2xhc3RfdmFsICtcbiAgICAgICAgICAgICAgKChob2xkICYgKCgxIDw8IChsYXN0X2JpdHMgKyBsYXN0X29wKSkgLSAxKSkgLypCSVRTKGxhc3QuYml0cyArIGxhc3Qub3ApKi8gPj4gbGFzdF9iaXRzKV07XG4gICAgICAgICAgICBoZXJlX2JpdHMgPSBoZXJlID4+PiAyNDtcbiAgICAgICAgICAgIGhlcmVfb3AgPSAoaGVyZSA+Pj4gMTYpICYgMHhmZjtcbiAgICAgICAgICAgIGhlcmVfdmFsID0gaGVyZSAmIDB4ZmZmZjtcblxuICAgICAgICAgICAgaWYgKChsYXN0X2JpdHMgKyBoZXJlX2JpdHMpIDw9IGJpdHMpIHtcbiAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLy0tLSBQVUxMQllURSgpIC0tLS8vXG4gICAgICAgICAgICBpZiAoaGF2ZSA9PT0gMCkge1xuICAgICAgICAgICAgICBicmVhayBpbmZfbGVhdmU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBoYXZlLS07XG4gICAgICAgICAgICBob2xkICs9IGlucHV0W25leHQrK10gPDwgYml0cztcbiAgICAgICAgICAgIGJpdHMgKz0gODtcbiAgICAgICAgICAgIC8vLS0tLy9cbiAgICAgICAgICB9XG4gICAgICAgICAgLy8tLS0gRFJPUEJJVFMobGFzdC5iaXRzKSAtLS0vL1xuICAgICAgICAgIGhvbGQgPj4+PSBsYXN0X2JpdHM7XG4gICAgICAgICAgYml0cyAtPSBsYXN0X2JpdHM7XG4gICAgICAgICAgLy8tLS0vL1xuICAgICAgICAgIHN0YXRlLmJhY2sgKz0gbGFzdF9iaXRzO1xuICAgICAgICB9XG4gICAgICAgIC8vLS0tIERST1BCSVRTKGhlcmUuYml0cykgLS0tLy9cbiAgICAgICAgaG9sZCA+Pj49IGhlcmVfYml0cztcbiAgICAgICAgYml0cyAtPSBoZXJlX2JpdHM7XG4gICAgICAgIC8vLS0tLy9cbiAgICAgICAgc3RhdGUuYmFjayArPSBoZXJlX2JpdHM7XG4gICAgICAgIGlmIChoZXJlX29wICYgNjQpIHtcbiAgICAgICAgICBzdHJtLm1zZyA9ICdpbnZhbGlkIGRpc3RhbmNlIGNvZGUnO1xuICAgICAgICAgIHN0YXRlLm1vZGUgPSBCQUQ7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgICAgc3RhdGUub2Zmc2V0ID0gaGVyZV92YWw7XG4gICAgICAgIHN0YXRlLmV4dHJhID0gKGhlcmVfb3ApICYgMTU7XG4gICAgICAgIHN0YXRlLm1vZGUgPSBESVNURVhUO1xuICAgICAgICAvKiBmYWxscyB0aHJvdWdoICovXG4gICAgICBjYXNlIERJU1RFWFQ6XG4gICAgICAgIGlmIChzdGF0ZS5leHRyYSkge1xuICAgICAgICAgIC8vPT09IE5FRURCSVRTKHN0YXRlLmV4dHJhKTtcbiAgICAgICAgICBuID0gc3RhdGUuZXh0cmE7XG4gICAgICAgICAgd2hpbGUgKGJpdHMgPCBuKSB7XG4gICAgICAgICAgICBpZiAoaGF2ZSA9PT0gMCkge1xuICAgICAgICAgICAgICBicmVhayBpbmZfbGVhdmU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBoYXZlLS07XG4gICAgICAgICAgICBob2xkICs9IGlucHV0W25leHQrK10gPDwgYml0cztcbiAgICAgICAgICAgIGJpdHMgKz0gODtcbiAgICAgICAgICB9XG4gICAgICAgICAgLy89PT0vL1xuICAgICAgICAgIHN0YXRlLm9mZnNldCArPSBob2xkICYgKCgxIDw8IHN0YXRlLmV4dHJhKSAtIDEpIC8qQklUUyhzdGF0ZS5leHRyYSkqLyA7XG4gICAgICAgICAgLy8tLS0gRFJPUEJJVFMoc3RhdGUuZXh0cmEpIC0tLS8vXG4gICAgICAgICAgaG9sZCA+Pj49IHN0YXRlLmV4dHJhO1xuICAgICAgICAgIGJpdHMgLT0gc3RhdGUuZXh0cmE7XG4gICAgICAgICAgLy8tLS0vL1xuICAgICAgICAgIHN0YXRlLmJhY2sgKz0gc3RhdGUuZXh0cmE7XG4gICAgICAgIH1cbiAgICAgICAgLy8jaWZkZWYgSU5GTEFURV9TVFJJQ1RcbiAgICAgICAgaWYgKHN0YXRlLm9mZnNldCA+IHN0YXRlLmRtYXgpIHtcbiAgICAgICAgICBzdHJtLm1zZyA9ICdpbnZhbGlkIGRpc3RhbmNlIHRvbyBmYXIgYmFjayc7XG4gICAgICAgICAgc3RhdGUubW9kZSA9IEJBRDtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgICAvLyNlbmRpZlxuICAgICAgICAvL1RyYWNldnYoKHN0ZGVyciwgXCJpbmZsYXRlOiAgICAgICAgIGRpc3RhbmNlICV1XFxuXCIsIHN0YXRlLm9mZnNldCkpO1xuICAgICAgICBzdGF0ZS5tb2RlID0gTUFUQ0g7XG4gICAgICAgIC8qIGZhbGxzIHRocm91Z2ggKi9cbiAgICAgIGNhc2UgTUFUQ0g6XG4gICAgICAgIGlmIChsZWZ0ID09PSAwKSB7XG4gICAgICAgICAgYnJlYWsgaW5mX2xlYXZlO1xuICAgICAgICB9XG4gICAgICAgIGNvcHkgPSBfb3V0IC0gbGVmdDtcbiAgICAgICAgaWYgKHN0YXRlLm9mZnNldCA+IGNvcHkpIHsgLyogY29weSBmcm9tIHdpbmRvdyAqL1xuICAgICAgICAgIGNvcHkgPSBzdGF0ZS5vZmZzZXQgLSBjb3B5O1xuICAgICAgICAgIGlmIChjb3B5ID4gc3RhdGUud2hhdmUpIHtcbiAgICAgICAgICAgIGlmIChzdGF0ZS5zYW5lKSB7XG4gICAgICAgICAgICAgIHN0cm0ubXNnID0gJ2ludmFsaWQgZGlzdGFuY2UgdG9vIGZhciBiYWNrJztcbiAgICAgICAgICAgICAgc3RhdGUubW9kZSA9IEJBRDtcbiAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyAoISkgVGhpcyBibG9jayBpcyBkaXNhYmxlZCBpbiB6bGliIGRlZmFpbHRzLFxuICAgICAgICAgICAgLy8gZG9uJ3QgZW5hYmxlIGl0IGZvciBiaW5hcnkgY29tcGF0aWJpbGl0eVxuICAgICAgICAgICAgLy8jaWZkZWYgSU5GTEFURV9BTExPV19JTlZBTElEX0RJU1RBTkNFX1RPT0ZBUl9BUlJSXG4gICAgICAgICAgICAvLyAgICAgICAgICBUcmFjZSgoc3RkZXJyLCBcImluZmxhdGUuYyB0b28gZmFyXFxuXCIpKTtcbiAgICAgICAgICAgIC8vICAgICAgICAgIGNvcHkgLT0gc3RhdGUud2hhdmU7XG4gICAgICAgICAgICAvLyAgICAgICAgICBpZiAoY29weSA+IHN0YXRlLmxlbmd0aCkgeyBjb3B5ID0gc3RhdGUubGVuZ3RoOyB9XG4gICAgICAgICAgICAvLyAgICAgICAgICBpZiAoY29weSA+IGxlZnQpIHsgY29weSA9IGxlZnQ7IH1cbiAgICAgICAgICAgIC8vICAgICAgICAgIGxlZnQgLT0gY29weTtcbiAgICAgICAgICAgIC8vICAgICAgICAgIHN0YXRlLmxlbmd0aCAtPSBjb3B5O1xuICAgICAgICAgICAgLy8gICAgICAgICAgZG8ge1xuICAgICAgICAgICAgLy8gICAgICAgICAgICBvdXRwdXRbcHV0KytdID0gMDtcbiAgICAgICAgICAgIC8vICAgICAgICAgIH0gd2hpbGUgKC0tY29weSk7XG4gICAgICAgICAgICAvLyAgICAgICAgICBpZiAoc3RhdGUubGVuZ3RoID09PSAwKSB7IHN0YXRlLm1vZGUgPSBMRU47IH1cbiAgICAgICAgICAgIC8vICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgLy8jZW5kaWZcbiAgICAgICAgICB9XG4gICAgICAgICAgaWYgKGNvcHkgPiBzdGF0ZS53bmV4dCkge1xuICAgICAgICAgICAgY29weSAtPSBzdGF0ZS53bmV4dDtcbiAgICAgICAgICAgIGZyb20gPSBzdGF0ZS53c2l6ZSAtIGNvcHk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGZyb20gPSBzdGF0ZS53bmV4dCAtIGNvcHk7XG4gICAgICAgICAgfVxuICAgICAgICAgIGlmIChjb3B5ID4gc3RhdGUubGVuZ3RoKSB7XG4gICAgICAgICAgICBjb3B5ID0gc3RhdGUubGVuZ3RoO1xuICAgICAgICAgIH1cbiAgICAgICAgICBmcm9tX3NvdXJjZSA9IHN0YXRlLndpbmRvdztcbiAgICAgICAgfSBlbHNlIHsgLyogY29weSBmcm9tIG91dHB1dCAqL1xuICAgICAgICAgIGZyb21fc291cmNlID0gb3V0cHV0O1xuICAgICAgICAgIGZyb20gPSBwdXQgLSBzdGF0ZS5vZmZzZXQ7XG4gICAgICAgICAgY29weSA9IHN0YXRlLmxlbmd0aDtcbiAgICAgICAgfVxuICAgICAgICBpZiAoY29weSA+IGxlZnQpIHtcbiAgICAgICAgICBjb3B5ID0gbGVmdDtcbiAgICAgICAgfVxuICAgICAgICBsZWZ0IC09IGNvcHk7XG4gICAgICAgIHN0YXRlLmxlbmd0aCAtPSBjb3B5O1xuICAgICAgICBkbyB7XG4gICAgICAgICAgb3V0cHV0W3B1dCsrXSA9IGZyb21fc291cmNlW2Zyb20rK107XG4gICAgICAgIH0gd2hpbGUgKC0tY29weSk7XG4gICAgICAgIGlmIChzdGF0ZS5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICBzdGF0ZS5tb2RlID0gTEVOO1xuICAgICAgICB9XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSBMSVQ6XG4gICAgICAgIGlmIChsZWZ0ID09PSAwKSB7XG4gICAgICAgICAgYnJlYWsgaW5mX2xlYXZlO1xuICAgICAgICB9XG4gICAgICAgIG91dHB1dFtwdXQrK10gPSBzdGF0ZS5sZW5ndGg7XG4gICAgICAgIGxlZnQtLTtcbiAgICAgICAgc3RhdGUubW9kZSA9IExFTjtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlIENIRUNLOlxuICAgICAgICBpZiAoc3RhdGUud3JhcCkge1xuICAgICAgICAgIC8vPT09IE5FRURCSVRTKDMyKTtcbiAgICAgICAgICB3aGlsZSAoYml0cyA8IDMyKSB7XG4gICAgICAgICAgICBpZiAoaGF2ZSA9PT0gMCkge1xuICAgICAgICAgICAgICBicmVhayBpbmZfbGVhdmU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBoYXZlLS07XG4gICAgICAgICAgICAvLyBVc2UgJ3wnIGluc2RlYWQgb2YgJysnIHRvIG1ha2Ugc3VyZSB0aGF0IHJlc3VsdCBpcyBzaWduZWRcbiAgICAgICAgICAgIGhvbGQgfD0gaW5wdXRbbmV4dCsrXSA8PCBiaXRzO1xuICAgICAgICAgICAgYml0cyArPSA4O1xuICAgICAgICAgIH1cbiAgICAgICAgICAvLz09PS8vXG4gICAgICAgICAgX291dCAtPSBsZWZ0O1xuICAgICAgICAgIHN0cm0udG90YWxfb3V0ICs9IF9vdXQ7XG4gICAgICAgICAgc3RhdGUudG90YWwgKz0gX291dDtcbiAgICAgICAgICBpZiAoX291dCkge1xuICAgICAgICAgICAgc3RybS5hZGxlciA9IHN0YXRlLmNoZWNrID1cbiAgICAgICAgICAgICAgLypVUERBVEUoc3RhdGUuY2hlY2ssIHB1dCAtIF9vdXQsIF9vdXQpOyovXG4gICAgICAgICAgICAgIChzdGF0ZS5mbGFncyA/IGNyYzMyKHN0YXRlLmNoZWNrLCBvdXRwdXQsIF9vdXQsIHB1dCAtIF9vdXQpIDogYWRsZXIzMihzdGF0ZS5jaGVjaywgb3V0cHV0LCBfb3V0LCBwdXQgLSBfb3V0KSk7XG5cbiAgICAgICAgICB9XG4gICAgICAgICAgX291dCA9IGxlZnQ7XG4gICAgICAgICAgLy8gTkI6IGNyYzMyIHN0b3JlZCBhcyBzaWduZWQgMzItYml0IGludCwgenN3YXAzMiByZXR1cm5zIHNpZ25lZCB0b29cbiAgICAgICAgICBpZiAoKHN0YXRlLmZsYWdzID8gaG9sZCA6IHpzd2FwMzIoaG9sZCkpICE9PSBzdGF0ZS5jaGVjaykge1xuICAgICAgICAgICAgc3RybS5tc2cgPSAnaW5jb3JyZWN0IGRhdGEgY2hlY2snO1xuICAgICAgICAgICAgc3RhdGUubW9kZSA9IEJBRDtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIH1cbiAgICAgICAgICAvLz09PSBJTklUQklUUygpO1xuICAgICAgICAgIGhvbGQgPSAwO1xuICAgICAgICAgIGJpdHMgPSAwO1xuICAgICAgICAgIC8vPT09Ly9cbiAgICAgICAgICAvL1RyYWNldigoc3RkZXJyLCBcImluZmxhdGU6ICAgY2hlY2sgbWF0Y2hlcyB0cmFpbGVyXFxuXCIpKTtcbiAgICAgICAgfVxuICAgICAgICBzdGF0ZS5tb2RlID0gTEVOR1RIO1xuICAgICAgICAvKiBmYWxscyB0aHJvdWdoICovXG4gICAgICBjYXNlIExFTkdUSDpcbiAgICAgICAgaWYgKHN0YXRlLndyYXAgJiYgc3RhdGUuZmxhZ3MpIHtcbiAgICAgICAgICAvLz09PSBORUVEQklUUygzMik7XG4gICAgICAgICAgd2hpbGUgKGJpdHMgPCAzMikge1xuICAgICAgICAgICAgaWYgKGhhdmUgPT09IDApIHtcbiAgICAgICAgICAgICAgYnJlYWsgaW5mX2xlYXZlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaGF2ZS0tO1xuICAgICAgICAgICAgaG9sZCArPSBpbnB1dFtuZXh0KytdIDw8IGJpdHM7XG4gICAgICAgICAgICBiaXRzICs9IDg7XG4gICAgICAgICAgfVxuICAgICAgICAgIC8vPT09Ly9cbiAgICAgICAgICBpZiAoaG9sZCAhPT0gKHN0YXRlLnRvdGFsICYgMHhmZmZmZmZmZikpIHtcbiAgICAgICAgICAgIHN0cm0ubXNnID0gJ2luY29ycmVjdCBsZW5ndGggY2hlY2snO1xuICAgICAgICAgICAgc3RhdGUubW9kZSA9IEJBRDtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIH1cbiAgICAgICAgICAvLz09PSBJTklUQklUUygpO1xuICAgICAgICAgIGhvbGQgPSAwO1xuICAgICAgICAgIGJpdHMgPSAwO1xuICAgICAgICAgIC8vPT09Ly9cbiAgICAgICAgICAvL1RyYWNldigoc3RkZXJyLCBcImluZmxhdGU6ICAgbGVuZ3RoIG1hdGNoZXMgdHJhaWxlclxcblwiKSk7XG4gICAgICAgIH1cbiAgICAgICAgc3RhdGUubW9kZSA9IERPTkU7XG4gICAgICAgIC8qIGZhbGxzIHRocm91Z2ggKi9cbiAgICAgIGNhc2UgRE9ORTpcbiAgICAgICAgcmV0ID0gWl9TVFJFQU1fRU5EO1xuICAgICAgICBicmVhayBpbmZfbGVhdmU7XG4gICAgICBjYXNlIEJBRDpcbiAgICAgICAgcmV0ID0gWl9EQVRBX0VSUk9SO1xuICAgICAgICBicmVhayBpbmZfbGVhdmU7XG4gICAgICBjYXNlIE1FTTpcbiAgICAgICAgcmV0dXJuIFpfTUVNX0VSUk9SO1xuICAgICAgY2FzZSBTWU5DOlxuICAgICAgICAvKiBmYWxscyB0aHJvdWdoICovXG4gICAgICBkZWZhdWx0OlxuICAgICAgICByZXR1cm4gWl9TVFJFQU1fRVJST1I7XG4gICAgICB9XG4gICAgfVxuXG4gIC8vIGluZl9sZWF2ZSA8LSBoZXJlIGlzIHJlYWwgcGxhY2UgZm9yIFwiZ290byBpbmZfbGVhdmVcIiwgZW11bGF0ZWQgdmlhIFwiYnJlYWsgaW5mX2xlYXZlXCJcblxuICAvKlxuICAgICBSZXR1cm4gZnJvbSBpbmZsYXRlKCksIHVwZGF0aW5nIHRoZSB0b3RhbCBjb3VudHMgYW5kIHRoZSBjaGVjayB2YWx1ZS5cbiAgICAgSWYgdGhlcmUgd2FzIG5vIHByb2dyZXNzIGR1cmluZyB0aGUgaW5mbGF0ZSgpIGNhbGwsIHJldHVybiBhIGJ1ZmZlclxuICAgICBlcnJvci4gIENhbGwgdXBkYXRld2luZG93KCkgdG8gY3JlYXRlIGFuZC9vciB1cGRhdGUgdGhlIHdpbmRvdyBzdGF0ZS5cbiAgICAgTm90ZTogYSBtZW1vcnkgZXJyb3IgZnJvbSBpbmZsYXRlKCkgaXMgbm9uLXJlY292ZXJhYmxlLlxuICAgKi9cblxuICAvLy0tLSBSRVNUT1JFKCkgLS0tXG4gIHN0cm0ubmV4dF9vdXQgPSBwdXQ7XG4gIHN0cm0uYXZhaWxfb3V0ID0gbGVmdDtcbiAgc3RybS5uZXh0X2luID0gbmV4dDtcbiAgc3RybS5hdmFpbF9pbiA9IGhhdmU7XG4gIHN0YXRlLmhvbGQgPSBob2xkO1xuICBzdGF0ZS5iaXRzID0gYml0cztcbiAgLy8tLS1cblxuICBpZiAoc3RhdGUud3NpemUgfHwgKF9vdXQgIT09IHN0cm0uYXZhaWxfb3V0ICYmIHN0YXRlLm1vZGUgPCBCQUQgJiZcbiAgICAgIChzdGF0ZS5tb2RlIDwgQ0hFQ0sgfHwgZmx1c2ggIT09IFpfRklOSVNIKSkpIHtcbiAgICBpZiAodXBkYXRld2luZG93KHN0cm0sIHN0cm0ub3V0cHV0LCBzdHJtLm5leHRfb3V0LCBfb3V0IC0gc3RybS5hdmFpbF9vdXQpKSB7XG4gICAgICBzdGF0ZS5tb2RlID0gTUVNO1xuICAgICAgcmV0dXJuIFpfTUVNX0VSUk9SO1xuICAgIH1cbiAgfVxuICBfaW4gLT0gc3RybS5hdmFpbF9pbjtcbiAgX291dCAtPSBzdHJtLmF2YWlsX291dDtcbiAgc3RybS50b3RhbF9pbiArPSBfaW47XG4gIHN0cm0udG90YWxfb3V0ICs9IF9vdXQ7XG4gIHN0YXRlLnRvdGFsICs9IF9vdXQ7XG4gIGlmIChzdGF0ZS53cmFwICYmIF9vdXQpIHtcbiAgICBzdHJtLmFkbGVyID0gc3RhdGUuY2hlY2sgPSAvKlVQREFURShzdGF0ZS5jaGVjaywgc3RybS5uZXh0X291dCAtIF9vdXQsIF9vdXQpOyovXG4gICAgICAoc3RhdGUuZmxhZ3MgPyBjcmMzMihzdGF0ZS5jaGVjaywgb3V0cHV0LCBfb3V0LCBzdHJtLm5leHRfb3V0IC0gX291dCkgOiBhZGxlcjMyKHN0YXRlLmNoZWNrLCBvdXRwdXQsIF9vdXQsIHN0cm0ubmV4dF9vdXQgLSBfb3V0KSk7XG4gIH1cbiAgc3RybS5kYXRhX3R5cGUgPSBzdGF0ZS5iaXRzICsgKHN0YXRlLmxhc3QgPyA2NCA6IDApICtcbiAgICAoc3RhdGUubW9kZSA9PT0gVFlQRSA/IDEyOCA6IDApICtcbiAgICAoc3RhdGUubW9kZSA9PT0gTEVOXyB8fCBzdGF0ZS5tb2RlID09PSBDT1BZXyA/IDI1NiA6IDApO1xuICBpZiAoKChfaW4gPT09IDAgJiYgX291dCA9PT0gMCkgfHwgZmx1c2ggPT09IFpfRklOSVNIKSAmJiByZXQgPT09IFpfT0spIHtcbiAgICByZXQgPSBaX0JVRl9FUlJPUjtcbiAgfVxuICByZXR1cm4gcmV0O1xufVxuXG5leHBvcnQgZnVuY3Rpb24gaW5mbGF0ZUVuZChzdHJtKSB7XG5cbiAgaWYgKCFzdHJtIHx8ICFzdHJtLnN0YXRlIC8qfHwgc3RybS0+emZyZWUgPT0gKGZyZWVfZnVuYykwKi8gKSB7XG4gICAgcmV0dXJuIFpfU1RSRUFNX0VSUk9SO1xuICB9XG5cbiAgdmFyIHN0YXRlID0gc3RybS5zdGF0ZTtcbiAgaWYgKHN0YXRlLndpbmRvdykge1xuICAgIHN0YXRlLndpbmRvdyA9IG51bGw7XG4gIH1cbiAgc3RybS5zdGF0ZSA9IG51bGw7XG4gIHJldHVybiBaX09LO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gaW5mbGF0ZUdldEhlYWRlcihzdHJtLCBoZWFkKSB7XG4gIHZhciBzdGF0ZTtcblxuICAvKiBjaGVjayBzdGF0ZSAqL1xuICBpZiAoIXN0cm0gfHwgIXN0cm0uc3RhdGUpIHtcbiAgICByZXR1cm4gWl9TVFJFQU1fRVJST1I7XG4gIH1cbiAgc3RhdGUgPSBzdHJtLnN0YXRlO1xuICBpZiAoKHN0YXRlLndyYXAgJiAyKSA9PT0gMCkge1xuICAgIHJldHVybiBaX1NUUkVBTV9FUlJPUjtcbiAgfVxuXG4gIC8qIHNhdmUgaGVhZGVyIHN0cnVjdHVyZSAqL1xuICBzdGF0ZS5oZWFkID0gaGVhZDtcbiAgaGVhZC5kb25lID0gZmFsc2U7XG4gIHJldHVybiBaX09LO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gaW5mbGF0ZVNldERpY3Rpb25hcnkoc3RybSwgZGljdGlvbmFyeSkge1xuICB2YXIgZGljdExlbmd0aCA9IGRpY3Rpb25hcnkubGVuZ3RoO1xuXG4gIHZhciBzdGF0ZTtcbiAgdmFyIGRpY3RpZDtcbiAgdmFyIHJldDtcblxuICAvKiBjaGVjayBzdGF0ZSAqL1xuICBpZiAoIXN0cm0gLyogPT0gWl9OVUxMICovIHx8ICFzdHJtLnN0YXRlIC8qID09IFpfTlVMTCAqLyApIHtcbiAgICByZXR1cm4gWl9TVFJFQU1fRVJST1I7XG4gIH1cbiAgc3RhdGUgPSBzdHJtLnN0YXRlO1xuXG4gIGlmIChzdGF0ZS53cmFwICE9PSAwICYmIHN0YXRlLm1vZGUgIT09IERJQ1QpIHtcbiAgICByZXR1cm4gWl9TVFJFQU1fRVJST1I7XG4gIH1cblxuICAvKiBjaGVjayBmb3IgY29ycmVjdCBkaWN0aW9uYXJ5IGlkZW50aWZpZXIgKi9cbiAgaWYgKHN0YXRlLm1vZGUgPT09IERJQ1QpIHtcbiAgICBkaWN0aWQgPSAxOyAvKiBhZGxlcjMyKDAsIG51bGwsIDApKi9cbiAgICAvKiBkaWN0aWQgPSBhZGxlcjMyKGRpY3RpZCwgZGljdGlvbmFyeSwgZGljdExlbmd0aCk7ICovXG4gICAgZGljdGlkID0gYWRsZXIzMihkaWN0aWQsIGRpY3Rpb25hcnksIGRpY3RMZW5ndGgsIDApO1xuICAgIGlmIChkaWN0aWQgIT09IHN0YXRlLmNoZWNrKSB7XG4gICAgICByZXR1cm4gWl9EQVRBX0VSUk9SO1xuICAgIH1cbiAgfVxuICAvKiBjb3B5IGRpY3Rpb25hcnkgdG8gd2luZG93IHVzaW5nIHVwZGF0ZXdpbmRvdygpLCB3aGljaCB3aWxsIGFtZW5kIHRoZVxuICAgZXhpc3RpbmcgZGljdGlvbmFyeSBpZiBhcHByb3ByaWF0ZSAqL1xuICByZXQgPSB1cGRhdGV3aW5kb3coc3RybSwgZGljdGlvbmFyeSwgZGljdExlbmd0aCwgZGljdExlbmd0aCk7XG4gIGlmIChyZXQpIHtcbiAgICBzdGF0ZS5tb2RlID0gTUVNO1xuICAgIHJldHVybiBaX01FTV9FUlJPUjtcbiAgfVxuICBzdGF0ZS5oYXZlZGljdCA9IDE7XG4gIC8vIFRyYWNldigoc3RkZXJyLCBcImluZmxhdGU6ICAgZGljdGlvbmFyeSBzZXRcXG5cIikpO1xuICByZXR1cm4gWl9PSztcbn1cblxuZXhwb3J0IHZhciBpbmZsYXRlSW5mbyA9ICdwYWtvIGluZmxhdGUgKGZyb20gTm9kZWNhIHByb2plY3QpJztcblxuLyogTm90IGltcGxlbWVudGVkXG5leHBvcnRzLmluZmxhdGVDb3B5ID0gaW5mbGF0ZUNvcHk7XG5leHBvcnRzLmluZmxhdGVHZXREaWN0aW9uYXJ5ID0gaW5mbGF0ZUdldERpY3Rpb25hcnk7XG5leHBvcnRzLmluZmxhdGVNYXJrID0gaW5mbGF0ZU1hcms7XG5leHBvcnRzLmluZmxhdGVQcmltZSA9IGluZmxhdGVQcmltZTtcbmV4cG9ydHMuaW5mbGF0ZVN5bmMgPSBpbmZsYXRlU3luYztcbmV4cG9ydHMuaW5mbGF0ZVN5bmNQb2ludCA9IGluZmxhdGVTeW5jUG9pbnQ7XG5leHBvcnRzLmluZmxhdGVVbmRlcm1pbmUgPSBpbmZsYXRlVW5kZXJtaW5lO1xuKi9cbiIsICIvLyBDb3B5cmlnaHQgSm95ZW50LCBJbmMuIGFuZCBvdGhlciBOb2RlIGNvbnRyaWJ1dG9ycy5cbi8vXG4vLyBQZXJtaXNzaW9uIGlzIGhlcmVieSBncmFudGVkLCBmcmVlIG9mIGNoYXJnZSwgdG8gYW55IHBlcnNvbiBvYnRhaW5pbmcgYVxuLy8gY29weSBvZiB0aGlzIHNvZnR3YXJlIGFuZCBhc3NvY2lhdGVkIGRvY3VtZW50YXRpb24gZmlsZXMgKHRoZVxuLy8gXCJTb2Z0d2FyZVwiKSwgdG8gZGVhbCBpbiB0aGUgU29mdHdhcmUgd2l0aG91dCByZXN0cmljdGlvbiwgaW5jbHVkaW5nXG4vLyB3aXRob3V0IGxpbWl0YXRpb24gdGhlIHJpZ2h0cyB0byB1c2UsIGNvcHksIG1vZGlmeSwgbWVyZ2UsIHB1Ymxpc2gsXG4vLyBkaXN0cmlidXRlLCBzdWJsaWNlbnNlLCBhbmQvb3Igc2VsbCBjb3BpZXMgb2YgdGhlIFNvZnR3YXJlLCBhbmQgdG8gcGVybWl0XG4vLyBwZXJzb25zIHRvIHdob20gdGhlIFNvZnR3YXJlIGlzIGZ1cm5pc2hlZCB0byBkbyBzbywgc3ViamVjdCB0byB0aGVcbi8vIGZvbGxvd2luZyBjb25kaXRpb25zOlxuLy9cbi8vIFRoZSBhYm92ZSBjb3B5cmlnaHQgbm90aWNlIGFuZCB0aGlzIHBlcm1pc3Npb24gbm90aWNlIHNoYWxsIGJlIGluY2x1ZGVkXG4vLyBpbiBhbGwgY29waWVzIG9yIHN1YnN0YW50aWFsIHBvcnRpb25zIG9mIHRoZSBTb2Z0d2FyZS5cbi8vXG4vLyBUSEUgU09GVFdBUkUgSVMgUFJPVklERUQgXCJBUyBJU1wiLCBXSVRIT1VUIFdBUlJBTlRZIE9GIEFOWSBLSU5ELCBFWFBSRVNTXG4vLyBPUiBJTVBMSUVELCBJTkNMVURJTkcgQlVUIE5PVCBMSU1JVEVEIFRPIFRIRSBXQVJSQU5USUVTIE9GXG4vLyBNRVJDSEFOVEFCSUxJVFksIEZJVE5FU1MgRk9SIEEgUEFSVElDVUxBUiBQVVJQT1NFIEFORCBOT05JTkZSSU5HRU1FTlQuIElOXG4vLyBOTyBFVkVOVCBTSEFMTCBUSEUgQVVUSE9SUyBPUiBDT1BZUklHSFQgSE9MREVSUyBCRSBMSUFCTEUgRk9SIEFOWSBDTEFJTSxcbi8vIERBTUFHRVMgT1IgT1RIRVIgTElBQklMSVRZLCBXSEVUSEVSIElOIEFOIEFDVElPTiBPRiBDT05UUkFDVCwgVE9SVCBPUlxuLy8gT1RIRVJXSVNFLCBBUklTSU5HIEZST00sIE9VVCBPRiBPUiBJTiBDT05ORUNUSU9OIFdJVEggVEhFIFNPRlRXQVJFIE9SIFRIRVxuLy8gVVNFIE9SIE9USEVSIERFQUxJTkdTIElOIFRIRSBTT0ZUV0FSRS5cblxuaW1wb3J0IHtUcmFuc2Zvcm19IGZyb20gJ3N0cmVhbSc7XG5pbXBvcnQgKiBhcyBfYmluZGluZyBmcm9tICcuL3psaWItbGliL2JpbmRpbmcnO1xuaW1wb3J0IHtpbmhlcml0c30gZnJvbSAndXRpbCc7XG5mdW5jdGlvbiBhc3NlcnQgKGEsIG1zZykge1xuICBpZiAoIWEpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IobXNnKTtcbiAgfVxufVxudmFyIGJpbmRpbmcgPSB7fTtcbk9iamVjdC5rZXlzKF9iaW5kaW5nKS5mb3JFYWNoKGZ1bmN0aW9uIChrZXkpIHtcbiAgYmluZGluZ1trZXldID0gX2JpbmRpbmdba2V5XTtcbn0pO1xuLy8gemxpYiBkb2Vzbid0IHByb3ZpZGUgdGhlc2UsIHNvIGtsdWRnZSB0aGVtIGluIGZvbGxvd2luZyB0aGUgc2FtZVxuLy8gY29uc3QgbmFtaW5nIHNjaGVtZSB6bGliIHVzZXMuXG5iaW5kaW5nLlpfTUlOX1dJTkRPV0JJVFMgPSA4O1xuYmluZGluZy5aX01BWF9XSU5ET1dCSVRTID0gMTU7XG5iaW5kaW5nLlpfREVGQVVMVF9XSU5ET1dCSVRTID0gMTU7XG5cbi8vIGZld2VyIHRoYW4gNjQgYnl0ZXMgcGVyIGNodW5rIGlzIHN0dXBpZC5cbi8vIHRlY2huaWNhbGx5IGl0IGNvdWxkIHdvcmsgd2l0aCBhcyBmZXcgYXMgOCwgYnV0IGV2ZW4gNjQgYnl0ZXNcbi8vIGlzIGFic3VyZGx5IGxvdy4gIFVzdWFsbHkgYSBNQiBvciBtb3JlIGlzIGJlc3QuXG5iaW5kaW5nLlpfTUlOX0NIVU5LID0gNjQ7XG5iaW5kaW5nLlpfTUFYX0NIVU5LID0gSW5maW5pdHk7XG5iaW5kaW5nLlpfREVGQVVMVF9DSFVOSyA9ICgxNiAqIDEwMjQpO1xuXG5iaW5kaW5nLlpfTUlOX01FTUxFVkVMID0gMTtcbmJpbmRpbmcuWl9NQVhfTUVNTEVWRUwgPSA5O1xuYmluZGluZy5aX0RFRkFVTFRfTUVNTEVWRUwgPSA4O1xuXG5iaW5kaW5nLlpfTUlOX0xFVkVMID0gLTE7XG5iaW5kaW5nLlpfTUFYX0xFVkVMID0gOTtcbmJpbmRpbmcuWl9ERUZBVUxUX0xFVkVMID0gYmluZGluZy5aX0RFRkFVTFRfQ09NUFJFU1NJT047XG5cblxuLy8gdHJhbnNsYXRpb24gdGFibGUgZm9yIHJldHVybiBjb2Rlcy5cbmV4cG9ydCB2YXIgY29kZXMgPSB7XG4gIFpfT0s6IGJpbmRpbmcuWl9PSyxcbiAgWl9TVFJFQU1fRU5EOiBiaW5kaW5nLlpfU1RSRUFNX0VORCxcbiAgWl9ORUVEX0RJQ1Q6IGJpbmRpbmcuWl9ORUVEX0RJQ1QsXG4gIFpfRVJSTk86IGJpbmRpbmcuWl9FUlJOTyxcbiAgWl9TVFJFQU1fRVJST1I6IGJpbmRpbmcuWl9TVFJFQU1fRVJST1IsXG4gIFpfREFUQV9FUlJPUjogYmluZGluZy5aX0RBVEFfRVJST1IsXG4gIFpfTUVNX0VSUk9SOiBiaW5kaW5nLlpfTUVNX0VSUk9SLFxuICBaX0JVRl9FUlJPUjogYmluZGluZy5aX0JVRl9FUlJPUixcbiAgWl9WRVJTSU9OX0VSUk9SOiBiaW5kaW5nLlpfVkVSU0lPTl9FUlJPUlxufTtcblxuT2JqZWN0LmtleXMoY29kZXMpLmZvckVhY2goZnVuY3Rpb24oaykge1xuICBjb2Rlc1tjb2Rlc1trXV0gPSBrO1xufSk7XG5cbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVEZWZsYXRlKG8pIHtcbiAgcmV0dXJuIG5ldyBEZWZsYXRlKG8pO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlSW5mbGF0ZShvKSB7XG4gIHJldHVybiBuZXcgSW5mbGF0ZShvKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZURlZmxhdGVSYXcobykge1xuICByZXR1cm4gbmV3IERlZmxhdGVSYXcobyk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVJbmZsYXRlUmF3KG8pIHtcbiAgcmV0dXJuIG5ldyBJbmZsYXRlUmF3KG8pO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlR3ppcChvKSB7XG4gIHJldHVybiBuZXcgR3ppcChvKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZUd1bnppcChvKSB7XG4gIHJldHVybiBuZXcgR3VuemlwKG8pO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlVW56aXAobykge1xuICByZXR1cm4gbmV3IFVuemlwKG8pO1xufVxuXG5cbi8vIENvbnZlbmllbmNlIG1ldGhvZHMuXG4vLyBjb21wcmVzcy9kZWNvbXByZXNzIGEgc3RyaW5nIG9yIGJ1ZmZlciBpbiBvbmUgc3RlcC5cbmV4cG9ydCBmdW5jdGlvbiBkZWZsYXRlKGJ1ZmZlciwgb3B0cywgY2FsbGJhY2spIHtcbiAgaWYgKHR5cGVvZiBvcHRzID09PSAnZnVuY3Rpb24nKSB7XG4gICAgY2FsbGJhY2sgPSBvcHRzO1xuICAgIG9wdHMgPSB7fTtcbiAgfVxuICByZXR1cm4gemxpYkJ1ZmZlcihuZXcgRGVmbGF0ZShvcHRzKSwgYnVmZmVyLCBjYWxsYmFjayk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBkZWZsYXRlU3luYyhidWZmZXIsIG9wdHMpIHtcbiAgcmV0dXJuIHpsaWJCdWZmZXJTeW5jKG5ldyBEZWZsYXRlKG9wdHMpLCBidWZmZXIpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gZ3ppcChidWZmZXIsIG9wdHMsIGNhbGxiYWNrKSB7XG4gIGlmICh0eXBlb2Ygb3B0cyA9PT0gJ2Z1bmN0aW9uJykge1xuICAgIGNhbGxiYWNrID0gb3B0cztcbiAgICBvcHRzID0ge307XG4gIH1cbiAgcmV0dXJuIHpsaWJCdWZmZXIobmV3IEd6aXAob3B0cyksIGJ1ZmZlciwgY2FsbGJhY2spO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gZ3ppcFN5bmMoYnVmZmVyLCBvcHRzKSB7XG4gIHJldHVybiB6bGliQnVmZmVyU3luYyhuZXcgR3ppcChvcHRzKSwgYnVmZmVyKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGRlZmxhdGVSYXcoYnVmZmVyLCBvcHRzLCBjYWxsYmFjaykge1xuICBpZiAodHlwZW9mIG9wdHMgPT09ICdmdW5jdGlvbicpIHtcbiAgICBjYWxsYmFjayA9IG9wdHM7XG4gICAgb3B0cyA9IHt9O1xuICB9XG4gIHJldHVybiB6bGliQnVmZmVyKG5ldyBEZWZsYXRlUmF3KG9wdHMpLCBidWZmZXIsIGNhbGxiYWNrKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGRlZmxhdGVSYXdTeW5jKGJ1ZmZlciwgb3B0cykge1xuICByZXR1cm4gemxpYkJ1ZmZlclN5bmMobmV3IERlZmxhdGVSYXcob3B0cyksIGJ1ZmZlcik7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiB1bnppcChidWZmZXIsIG9wdHMsIGNhbGxiYWNrKSB7XG4gIGlmICh0eXBlb2Ygb3B0cyA9PT0gJ2Z1bmN0aW9uJykge1xuICAgIGNhbGxiYWNrID0gb3B0cztcbiAgICBvcHRzID0ge307XG4gIH1cbiAgcmV0dXJuIHpsaWJCdWZmZXIobmV3IFVuemlwKG9wdHMpLCBidWZmZXIsIGNhbGxiYWNrKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHVuemlwU3luYyhidWZmZXIsIG9wdHMpIHtcbiAgcmV0dXJuIHpsaWJCdWZmZXJTeW5jKG5ldyBVbnppcChvcHRzKSwgYnVmZmVyKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGluZmxhdGUoYnVmZmVyLCBvcHRzLCBjYWxsYmFjaykge1xuICBpZiAodHlwZW9mIG9wdHMgPT09ICdmdW5jdGlvbicpIHtcbiAgICBjYWxsYmFjayA9IG9wdHM7XG4gICAgb3B0cyA9IHt9O1xuICB9XG4gIHJldHVybiB6bGliQnVmZmVyKG5ldyBJbmZsYXRlKG9wdHMpLCBidWZmZXIsIGNhbGxiYWNrKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGluZmxhdGVTeW5jKGJ1ZmZlciwgb3B0cykge1xuICByZXR1cm4gemxpYkJ1ZmZlclN5bmMobmV3IEluZmxhdGUob3B0cyksIGJ1ZmZlcik7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBndW56aXAoYnVmZmVyLCBvcHRzLCBjYWxsYmFjaykge1xuICBpZiAodHlwZW9mIG9wdHMgPT09ICdmdW5jdGlvbicpIHtcbiAgICBjYWxsYmFjayA9IG9wdHM7XG4gICAgb3B0cyA9IHt9O1xuICB9XG4gIHJldHVybiB6bGliQnVmZmVyKG5ldyBHdW56aXAob3B0cyksIGJ1ZmZlciwgY2FsbGJhY2spO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gZ3VuemlwU3luYyhidWZmZXIsIG9wdHMpIHtcbiAgcmV0dXJuIHpsaWJCdWZmZXJTeW5jKG5ldyBHdW56aXAob3B0cyksIGJ1ZmZlcik7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBpbmZsYXRlUmF3KGJ1ZmZlciwgb3B0cywgY2FsbGJhY2spIHtcbiAgaWYgKHR5cGVvZiBvcHRzID09PSAnZnVuY3Rpb24nKSB7XG4gICAgY2FsbGJhY2sgPSBvcHRzO1xuICAgIG9wdHMgPSB7fTtcbiAgfVxuICByZXR1cm4gemxpYkJ1ZmZlcihuZXcgSW5mbGF0ZVJhdyhvcHRzKSwgYnVmZmVyLCBjYWxsYmFjayk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBpbmZsYXRlUmF3U3luYyhidWZmZXIsIG9wdHMpIHtcbiAgcmV0dXJuIHpsaWJCdWZmZXJTeW5jKG5ldyBJbmZsYXRlUmF3KG9wdHMpLCBidWZmZXIpO1xufVxuXG5mdW5jdGlvbiB6bGliQnVmZmVyKGVuZ2luZSwgYnVmZmVyLCBjYWxsYmFjaykge1xuICB2YXIgYnVmZmVycyA9IFtdO1xuICB2YXIgbnJlYWQgPSAwO1xuXG4gIGVuZ2luZS5vbignZXJyb3InLCBvbkVycm9yKTtcbiAgZW5naW5lLm9uKCdlbmQnLCBvbkVuZCk7XG5cbiAgZW5naW5lLmVuZChidWZmZXIpO1xuICBmbG93KCk7XG5cbiAgZnVuY3Rpb24gZmxvdygpIHtcbiAgICB2YXIgY2h1bms7XG4gICAgd2hpbGUgKG51bGwgIT09IChjaHVuayA9IGVuZ2luZS5yZWFkKCkpKSB7XG4gICAgICBidWZmZXJzLnB1c2goY2h1bmspO1xuICAgICAgbnJlYWQgKz0gY2h1bmsubGVuZ3RoO1xuICAgIH1cbiAgICBlbmdpbmUub25jZSgncmVhZGFibGUnLCBmbG93KTtcbiAgfVxuXG4gIGZ1bmN0aW9uIG9uRXJyb3IoZXJyKSB7XG4gICAgZW5naW5lLnJlbW92ZUxpc3RlbmVyKCdlbmQnLCBvbkVuZCk7XG4gICAgZW5naW5lLnJlbW92ZUxpc3RlbmVyKCdyZWFkYWJsZScsIGZsb3cpO1xuICAgIGNhbGxiYWNrKGVycik7XG4gIH1cblxuICBmdW5jdGlvbiBvbkVuZCgpIHtcbiAgICB2YXIgYnVmID0gQnVmZmVyLmNvbmNhdChidWZmZXJzLCBucmVhZCk7XG4gICAgYnVmZmVycyA9IFtdO1xuICAgIGNhbGxiYWNrKG51bGwsIGJ1Zik7XG4gICAgZW5naW5lLmNsb3NlKCk7XG4gIH1cbn1cblxuZnVuY3Rpb24gemxpYkJ1ZmZlclN5bmMoZW5naW5lLCBidWZmZXIpIHtcbiAgaWYgKHR5cGVvZiBidWZmZXIgPT09ICdzdHJpbmcnKVxuICAgIGJ1ZmZlciA9IG5ldyBCdWZmZXIoYnVmZmVyKTtcbiAgaWYgKCFCdWZmZXIuaXNCdWZmZXIoYnVmZmVyKSlcbiAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdOb3QgYSBzdHJpbmcgb3IgYnVmZmVyJyk7XG5cbiAgdmFyIGZsdXNoRmxhZyA9IGJpbmRpbmcuWl9GSU5JU0g7XG5cbiAgcmV0dXJuIGVuZ2luZS5fcHJvY2Vzc0NodW5rKGJ1ZmZlciwgZmx1c2hGbGFnKTtcbn1cblxuLy8gZ2VuZXJpYyB6bGliXG4vLyBtaW5pbWFsIDItYnl0ZSBoZWFkZXJcbmV4cG9ydCBmdW5jdGlvbiBEZWZsYXRlKG9wdHMpIHtcbiAgaWYgKCEodGhpcyBpbnN0YW5jZW9mIERlZmxhdGUpKSByZXR1cm4gbmV3IERlZmxhdGUob3B0cyk7XG4gIFpsaWIuY2FsbCh0aGlzLCBvcHRzLCBiaW5kaW5nLkRFRkxBVEUpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gSW5mbGF0ZShvcHRzKSB7XG4gIGlmICghKHRoaXMgaW5zdGFuY2VvZiBJbmZsYXRlKSkgcmV0dXJuIG5ldyBJbmZsYXRlKG9wdHMpO1xuICBabGliLmNhbGwodGhpcywgb3B0cywgYmluZGluZy5JTkZMQVRFKTtcbn1cblxuXG5cbi8vIGd6aXAgLSBiaWdnZXIgaGVhZGVyLCBzYW1lIGRlZmxhdGUgY29tcHJlc3Npb25cbmV4cG9ydCBmdW5jdGlvbiBHemlwKG9wdHMpIHtcbiAgaWYgKCEodGhpcyBpbnN0YW5jZW9mIEd6aXApKSByZXR1cm4gbmV3IEd6aXAob3B0cyk7XG4gIFpsaWIuY2FsbCh0aGlzLCBvcHRzLCBiaW5kaW5nLkdaSVApO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gR3VuemlwKG9wdHMpIHtcbiAgaWYgKCEodGhpcyBpbnN0YW5jZW9mIEd1bnppcCkpIHJldHVybiBuZXcgR3VuemlwKG9wdHMpO1xuICBabGliLmNhbGwodGhpcywgb3B0cywgYmluZGluZy5HVU5aSVApO1xufVxuXG5cblxuLy8gcmF3IC0gbm8gaGVhZGVyXG5leHBvcnQgZnVuY3Rpb24gRGVmbGF0ZVJhdyhvcHRzKSB7XG4gIGlmICghKHRoaXMgaW5zdGFuY2VvZiBEZWZsYXRlUmF3KSkgcmV0dXJuIG5ldyBEZWZsYXRlUmF3KG9wdHMpO1xuICBabGliLmNhbGwodGhpcywgb3B0cywgYmluZGluZy5ERUZMQVRFUkFXKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIEluZmxhdGVSYXcob3B0cykge1xuICBpZiAoISh0aGlzIGluc3RhbmNlb2YgSW5mbGF0ZVJhdykpIHJldHVybiBuZXcgSW5mbGF0ZVJhdyhvcHRzKTtcbiAgWmxpYi5jYWxsKHRoaXMsIG9wdHMsIGJpbmRpbmcuSU5GTEFURVJBVyk7XG59XG5cblxuLy8gYXV0by1kZXRlY3QgaGVhZGVyLlxuZXhwb3J0IGZ1bmN0aW9uIFVuemlwKG9wdHMpIHtcbiAgaWYgKCEodGhpcyBpbnN0YW5jZW9mIFVuemlwKSkgcmV0dXJuIG5ldyBVbnppcChvcHRzKTtcbiAgWmxpYi5jYWxsKHRoaXMsIG9wdHMsIGJpbmRpbmcuVU5aSVApO1xufVxuXG5cbi8vIHRoZSBabGliIGNsYXNzIHRoZXkgYWxsIGluaGVyaXQgZnJvbVxuLy8gVGhpcyB0aGluZyBtYW5hZ2VzIHRoZSBxdWV1ZSBvZiByZXF1ZXN0cywgYW5kIHJldHVybnNcbi8vIHRydWUgb3IgZmFsc2UgaWYgdGhlcmUgaXMgYW55dGhpbmcgaW4gdGhlIHF1ZXVlIHdoZW5cbi8vIHlvdSBjYWxsIHRoZSAud3JpdGUoKSBtZXRob2QuXG5cbmV4cG9ydCBmdW5jdGlvbiBabGliKG9wdHMsIG1vZGUpIHtcbiAgdGhpcy5fb3B0cyA9IG9wdHMgPSBvcHRzIHx8IHt9O1xuICB0aGlzLl9jaHVua1NpemUgPSBvcHRzLmNodW5rU2l6ZSB8fCBiaW5kaW5nLlpfREVGQVVMVF9DSFVOSztcblxuICBUcmFuc2Zvcm0uY2FsbCh0aGlzLCBvcHRzKTtcblxuICBpZiAob3B0cy5mbHVzaCkge1xuICAgIGlmIChvcHRzLmZsdXNoICE9PSBiaW5kaW5nLlpfTk9fRkxVU0ggJiZcbiAgICAgICAgb3B0cy5mbHVzaCAhPT0gYmluZGluZy5aX1BBUlRJQUxfRkxVU0ggJiZcbiAgICAgICAgb3B0cy5mbHVzaCAhPT0gYmluZGluZy5aX1NZTkNfRkxVU0ggJiZcbiAgICAgICAgb3B0cy5mbHVzaCAhPT0gYmluZGluZy5aX0ZVTExfRkxVU0ggJiZcbiAgICAgICAgb3B0cy5mbHVzaCAhPT0gYmluZGluZy5aX0ZJTklTSCAmJlxuICAgICAgICBvcHRzLmZsdXNoICE9PSBiaW5kaW5nLlpfQkxPQ0spIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignSW52YWxpZCBmbHVzaCBmbGFnOiAnICsgb3B0cy5mbHVzaCk7XG4gICAgfVxuICB9XG4gIHRoaXMuX2ZsdXNoRmxhZyA9IG9wdHMuZmx1c2ggfHwgYmluZGluZy5aX05PX0ZMVVNIO1xuXG4gIGlmIChvcHRzLmNodW5rU2l6ZSkge1xuICAgIGlmIChvcHRzLmNodW5rU2l6ZSA8IGJpbmRpbmcuWl9NSU5fQ0hVTksgfHxcbiAgICAgICAgb3B0cy5jaHVua1NpemUgPiBiaW5kaW5nLlpfTUFYX0NIVU5LKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ0ludmFsaWQgY2h1bmsgc2l6ZTogJyArIG9wdHMuY2h1bmtTaXplKTtcbiAgICB9XG4gIH1cblxuICBpZiAob3B0cy53aW5kb3dCaXRzKSB7XG4gICAgaWYgKG9wdHMud2luZG93Qml0cyA8IGJpbmRpbmcuWl9NSU5fV0lORE9XQklUUyB8fFxuICAgICAgICBvcHRzLndpbmRvd0JpdHMgPiBiaW5kaW5nLlpfTUFYX1dJTkRPV0JJVFMpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignSW52YWxpZCB3aW5kb3dCaXRzOiAnICsgb3B0cy53aW5kb3dCaXRzKTtcbiAgICB9XG4gIH1cblxuICBpZiAob3B0cy5sZXZlbCkge1xuICAgIGlmIChvcHRzLmxldmVsIDwgYmluZGluZy5aX01JTl9MRVZFTCB8fFxuICAgICAgICBvcHRzLmxldmVsID4gYmluZGluZy5aX01BWF9MRVZFTCkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdJbnZhbGlkIGNvbXByZXNzaW9uIGxldmVsOiAnICsgb3B0cy5sZXZlbCk7XG4gICAgfVxuICB9XG5cbiAgaWYgKG9wdHMubWVtTGV2ZWwpIHtcbiAgICBpZiAob3B0cy5tZW1MZXZlbCA8IGJpbmRpbmcuWl9NSU5fTUVNTEVWRUwgfHxcbiAgICAgICAgb3B0cy5tZW1MZXZlbCA+IGJpbmRpbmcuWl9NQVhfTUVNTEVWRUwpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignSW52YWxpZCBtZW1MZXZlbDogJyArIG9wdHMubWVtTGV2ZWwpO1xuICAgIH1cbiAgfVxuXG4gIGlmIChvcHRzLnN0cmF0ZWd5KSB7XG4gICAgaWYgKG9wdHMuc3RyYXRlZ3kgIT0gYmluZGluZy5aX0ZJTFRFUkVEICYmXG4gICAgICAgIG9wdHMuc3RyYXRlZ3kgIT0gYmluZGluZy5aX0hVRkZNQU5fT05MWSAmJlxuICAgICAgICBvcHRzLnN0cmF0ZWd5ICE9IGJpbmRpbmcuWl9STEUgJiZcbiAgICAgICAgb3B0cy5zdHJhdGVneSAhPSBiaW5kaW5nLlpfRklYRUQgJiZcbiAgICAgICAgb3B0cy5zdHJhdGVneSAhPSBiaW5kaW5nLlpfREVGQVVMVF9TVFJBVEVHWSkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdJbnZhbGlkIHN0cmF0ZWd5OiAnICsgb3B0cy5zdHJhdGVneSk7XG4gICAgfVxuICB9XG5cbiAgaWYgKG9wdHMuZGljdGlvbmFyeSkge1xuICAgIGlmICghQnVmZmVyLmlzQnVmZmVyKG9wdHMuZGljdGlvbmFyeSkpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignSW52YWxpZCBkaWN0aW9uYXJ5OiBpdCBzaG91bGQgYmUgYSBCdWZmZXIgaW5zdGFuY2UnKTtcbiAgICB9XG4gIH1cblxuICB0aGlzLl9iaW5kaW5nID0gbmV3IGJpbmRpbmcuWmxpYihtb2RlKTtcblxuICB2YXIgc2VsZiA9IHRoaXM7XG4gIHRoaXMuX2hhZEVycm9yID0gZmFsc2U7XG4gIHRoaXMuX2JpbmRpbmcub25lcnJvciA9IGZ1bmN0aW9uKG1lc3NhZ2UsIGVycm5vKSB7XG4gICAgLy8gdGhlcmUgaXMgbm8gd2F5IHRvIGNsZWFubHkgcmVjb3Zlci5cbiAgICAvLyBjb250aW51aW5nIG9ubHkgb2JzY3VyZXMgcHJvYmxlbXMuXG4gICAgc2VsZi5fYmluZGluZyA9IG51bGw7XG4gICAgc2VsZi5faGFkRXJyb3IgPSB0cnVlO1xuXG4gICAgdmFyIGVycm9yID0gbmV3IEVycm9yKG1lc3NhZ2UpO1xuICAgIGVycm9yLmVycm5vID0gZXJybm87XG4gICAgZXJyb3IuY29kZSA9IGJpbmRpbmcuY29kZXNbZXJybm9dO1xuICAgIHNlbGYuZW1pdCgnZXJyb3InLCBlcnJvcik7XG4gIH07XG5cbiAgdmFyIGxldmVsID0gYmluZGluZy5aX0RFRkFVTFRfQ09NUFJFU1NJT047XG4gIGlmICh0eXBlb2Ygb3B0cy5sZXZlbCA9PT0gJ251bWJlcicpIGxldmVsID0gb3B0cy5sZXZlbDtcblxuICB2YXIgc3RyYXRlZ3kgPSBiaW5kaW5nLlpfREVGQVVMVF9TVFJBVEVHWTtcbiAgaWYgKHR5cGVvZiBvcHRzLnN0cmF0ZWd5ID09PSAnbnVtYmVyJykgc3RyYXRlZ3kgPSBvcHRzLnN0cmF0ZWd5O1xuXG4gIHRoaXMuX2JpbmRpbmcuaW5pdChvcHRzLndpbmRvd0JpdHMgfHwgYmluZGluZy5aX0RFRkFVTFRfV0lORE9XQklUUyxcbiAgICAgICAgICAgICAgICAgICAgIGxldmVsLFxuICAgICAgICAgICAgICAgICAgICAgb3B0cy5tZW1MZXZlbCB8fCBiaW5kaW5nLlpfREVGQVVMVF9NRU1MRVZFTCxcbiAgICAgICAgICAgICAgICAgICAgIHN0cmF0ZWd5LFxuICAgICAgICAgICAgICAgICAgICAgb3B0cy5kaWN0aW9uYXJ5KTtcblxuICB0aGlzLl9idWZmZXIgPSBuZXcgQnVmZmVyKHRoaXMuX2NodW5rU2l6ZSk7XG4gIHRoaXMuX29mZnNldCA9IDA7XG4gIHRoaXMuX2Nsb3NlZCA9IGZhbHNlO1xuICB0aGlzLl9sZXZlbCA9IGxldmVsO1xuICB0aGlzLl9zdHJhdGVneSA9IHN0cmF0ZWd5O1xuXG4gIHRoaXMub25jZSgnZW5kJywgdGhpcy5jbG9zZSk7XG59XG5cbmluaGVyaXRzKFpsaWIsIFRyYW5zZm9ybSk7XG5cblpsaWIucHJvdG90eXBlLnBhcmFtcyA9IGZ1bmN0aW9uKGxldmVsLCBzdHJhdGVneSwgY2FsbGJhY2spIHtcbiAgaWYgKGxldmVsIDwgYmluZGluZy5aX01JTl9MRVZFTCB8fFxuICAgICAgbGV2ZWwgPiBiaW5kaW5nLlpfTUFYX0xFVkVMKSB7XG4gICAgdGhyb3cgbmV3IFJhbmdlRXJyb3IoJ0ludmFsaWQgY29tcHJlc3Npb24gbGV2ZWw6ICcgKyBsZXZlbCk7XG4gIH1cbiAgaWYgKHN0cmF0ZWd5ICE9IGJpbmRpbmcuWl9GSUxURVJFRCAmJlxuICAgICAgc3RyYXRlZ3kgIT0gYmluZGluZy5aX0hVRkZNQU5fT05MWSAmJlxuICAgICAgc3RyYXRlZ3kgIT0gYmluZGluZy5aX1JMRSAmJlxuICAgICAgc3RyYXRlZ3kgIT0gYmluZGluZy5aX0ZJWEVEICYmXG4gICAgICBzdHJhdGVneSAhPSBiaW5kaW5nLlpfREVGQVVMVF9TVFJBVEVHWSkge1xuICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ0ludmFsaWQgc3RyYXRlZ3k6ICcgKyBzdHJhdGVneSk7XG4gIH1cblxuICBpZiAodGhpcy5fbGV2ZWwgIT09IGxldmVsIHx8IHRoaXMuX3N0cmF0ZWd5ICE9PSBzdHJhdGVneSkge1xuICAgIHZhciBzZWxmID0gdGhpcztcbiAgICB0aGlzLmZsdXNoKGJpbmRpbmcuWl9TWU5DX0ZMVVNILCBmdW5jdGlvbigpIHtcbiAgICAgIHNlbGYuX2JpbmRpbmcucGFyYW1zKGxldmVsLCBzdHJhdGVneSk7XG4gICAgICBpZiAoIXNlbGYuX2hhZEVycm9yKSB7XG4gICAgICAgIHNlbGYuX2xldmVsID0gbGV2ZWw7XG4gICAgICAgIHNlbGYuX3N0cmF0ZWd5ID0gc3RyYXRlZ3k7XG4gICAgICAgIGlmIChjYWxsYmFjaykgY2FsbGJhY2soKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfSBlbHNlIHtcbiAgICBwcm9jZXNzLm5leHRUaWNrKGNhbGxiYWNrKTtcbiAgfVxufTtcblxuWmxpYi5wcm90b3R5cGUucmVzZXQgPSBmdW5jdGlvbigpIHtcbiAgcmV0dXJuIHRoaXMuX2JpbmRpbmcucmVzZXQoKTtcbn07XG5cbi8vIFRoaXMgaXMgdGhlIF9mbHVzaCBmdW5jdGlvbiBjYWxsZWQgYnkgdGhlIHRyYW5zZm9ybSBjbGFzcyxcbi8vIGludGVybmFsbHksIHdoZW4gdGhlIGxhc3QgY2h1bmsgaGFzIGJlZW4gd3JpdHRlbi5cblpsaWIucHJvdG90eXBlLl9mbHVzaCA9IGZ1bmN0aW9uKGNhbGxiYWNrKSB7XG4gIHRoaXMuX3RyYW5zZm9ybShuZXcgQnVmZmVyKDApLCAnJywgY2FsbGJhY2spO1xufTtcblxuWmxpYi5wcm90b3R5cGUuZmx1c2ggPSBmdW5jdGlvbihraW5kLCBjYWxsYmFjaykge1xuICB2YXIgd3MgPSB0aGlzLl93cml0YWJsZVN0YXRlO1xuXG4gIGlmICh0eXBlb2Yga2luZCA9PT0gJ2Z1bmN0aW9uJyB8fCAoa2luZCA9PT0gdm9pZCAwICYmICFjYWxsYmFjaykpIHtcbiAgICBjYWxsYmFjayA9IGtpbmQ7XG4gICAga2luZCA9IGJpbmRpbmcuWl9GVUxMX0ZMVVNIO1xuICB9XG5cbiAgaWYgKHdzLmVuZGVkKSB7XG4gICAgaWYgKGNhbGxiYWNrKVxuICAgICAgcHJvY2Vzcy5uZXh0VGljayhjYWxsYmFjayk7XG4gIH0gZWxzZSBpZiAod3MuZW5kaW5nKSB7XG4gICAgaWYgKGNhbGxiYWNrKVxuICAgICAgdGhpcy5vbmNlKCdlbmQnLCBjYWxsYmFjayk7XG4gIH0gZWxzZSBpZiAod3MubmVlZERyYWluKSB7XG4gICAgdmFyIHNlbGYgPSB0aGlzO1xuICAgIHRoaXMub25jZSgnZHJhaW4nLCBmdW5jdGlvbigpIHtcbiAgICAgIHNlbGYuZmx1c2goY2FsbGJhY2spO1xuICAgIH0pO1xuICB9IGVsc2Uge1xuICAgIHRoaXMuX2ZsdXNoRmxhZyA9IGtpbmQ7XG4gICAgdGhpcy53cml0ZShuZXcgQnVmZmVyKDApLCAnJywgY2FsbGJhY2spO1xuICB9XG59O1xuXG5abGliLnByb3RvdHlwZS5jbG9zZSA9IGZ1bmN0aW9uKGNhbGxiYWNrKSB7XG4gIGlmIChjYWxsYmFjaylcbiAgICBwcm9jZXNzLm5leHRUaWNrKGNhbGxiYWNrKTtcblxuICBpZiAodGhpcy5fY2xvc2VkKVxuICAgIHJldHVybjtcblxuICB0aGlzLl9jbG9zZWQgPSB0cnVlO1xuXG4gIHRoaXMuX2JpbmRpbmcuY2xvc2UoKTtcblxuICB2YXIgc2VsZiA9IHRoaXM7XG4gIHByb2Nlc3MubmV4dFRpY2soZnVuY3Rpb24oKSB7XG4gICAgc2VsZi5lbWl0KCdjbG9zZScpO1xuICB9KTtcbn07XG5cblpsaWIucHJvdG90eXBlLl90cmFuc2Zvcm0gPSBmdW5jdGlvbihjaHVuaywgZW5jb2RpbmcsIGNiKSB7XG4gIHZhciBmbHVzaEZsYWc7XG4gIHZhciB3cyA9IHRoaXMuX3dyaXRhYmxlU3RhdGU7XG4gIHZhciBlbmRpbmcgPSB3cy5lbmRpbmcgfHwgd3MuZW5kZWQ7XG4gIHZhciBsYXN0ID0gZW5kaW5nICYmICghY2h1bmsgfHwgd3MubGVuZ3RoID09PSBjaHVuay5sZW5ndGgpO1xuXG4gIGlmICghY2h1bmsgPT09IG51bGwgJiYgIUJ1ZmZlci5pc0J1ZmZlcihjaHVuaykpXG4gICAgcmV0dXJuIGNiKG5ldyBFcnJvcignaW52YWxpZCBpbnB1dCcpKTtcblxuICAvLyBJZiBpdCdzIHRoZSBsYXN0IGNodW5rLCBvciBhIGZpbmFsIGZsdXNoLCB3ZSB1c2UgdGhlIFpfRklOSVNIIGZsdXNoIGZsYWcuXG4gIC8vIElmIGl0J3MgZXhwbGljaXRseSBmbHVzaGluZyBhdCBzb21lIG90aGVyIHRpbWUsIHRoZW4gd2UgdXNlXG4gIC8vIFpfRlVMTF9GTFVTSC4gT3RoZXJ3aXNlLCB1c2UgWl9OT19GTFVTSCBmb3IgbWF4aW11bSBjb21wcmVzc2lvblxuICAvLyBnb29kbmVzcy5cbiAgaWYgKGxhc3QpXG4gICAgZmx1c2hGbGFnID0gYmluZGluZy5aX0ZJTklTSDtcbiAgZWxzZSB7XG4gICAgZmx1c2hGbGFnID0gdGhpcy5fZmx1c2hGbGFnO1xuICAgIC8vIG9uY2Ugd2UndmUgZmx1c2hlZCB0aGUgbGFzdCBvZiB0aGUgcXVldWUsIHN0b3AgZmx1c2hpbmcgYW5kXG4gICAgLy8gZ28gYmFjayB0byB0aGUgbm9ybWFsIGJlaGF2aW9yLlxuICAgIGlmIChjaHVuay5sZW5ndGggPj0gd3MubGVuZ3RoKSB7XG4gICAgICB0aGlzLl9mbHVzaEZsYWcgPSB0aGlzLl9vcHRzLmZsdXNoIHx8IGJpbmRpbmcuWl9OT19GTFVTSDtcbiAgICB9XG4gIH1cblxuICB0aGlzLl9wcm9jZXNzQ2h1bmsoY2h1bmssIGZsdXNoRmxhZywgY2IpO1xufTtcblxuWmxpYi5wcm90b3R5cGUuX3Byb2Nlc3NDaHVuayA9IGZ1bmN0aW9uKGNodW5rLCBmbHVzaEZsYWcsIGNiKSB7XG4gIHZhciBhdmFpbEluQmVmb3JlID0gY2h1bmsgJiYgY2h1bmsubGVuZ3RoO1xuICB2YXIgYXZhaWxPdXRCZWZvcmUgPSB0aGlzLl9jaHVua1NpemUgLSB0aGlzLl9vZmZzZXQ7XG4gIHZhciBpbk9mZiA9IDA7XG5cbiAgdmFyIHNlbGYgPSB0aGlzO1xuXG4gIHZhciBhc3luYyA9IHR5cGVvZiBjYiA9PT0gJ2Z1bmN0aW9uJztcblxuICBpZiAoIWFzeW5jKSB7XG4gICAgdmFyIGJ1ZmZlcnMgPSBbXTtcbiAgICB2YXIgbnJlYWQgPSAwO1xuXG4gICAgdmFyIGVycm9yO1xuICAgIHRoaXMub24oJ2Vycm9yJywgZnVuY3Rpb24oZXIpIHtcbiAgICAgIGVycm9yID0gZXI7XG4gICAgfSk7XG5cbiAgICBkbyB7XG4gICAgICB2YXIgcmVzID0gdGhpcy5fYmluZGluZy53cml0ZVN5bmMoZmx1c2hGbGFnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNodW5rLCAvLyBpblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGluT2ZmLCAvLyBpbl9vZmZcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhdmFpbEluQmVmb3JlLCAvLyBpbl9sZW5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLl9idWZmZXIsIC8vIG91dFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuX29mZnNldCwgLy9vdXRfb2ZmXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXZhaWxPdXRCZWZvcmUpOyAvLyBvdXRfbGVuXG4gICAgfSB3aGlsZSAoIXRoaXMuX2hhZEVycm9yICYmIGNhbGxiYWNrKHJlc1swXSwgcmVzWzFdKSk7XG5cbiAgICBpZiAodGhpcy5faGFkRXJyb3IpIHtcbiAgICAgIHRocm93IGVycm9yO1xuICAgIH1cblxuICAgIHZhciBidWYgPSBCdWZmZXIuY29uY2F0KGJ1ZmZlcnMsIG5yZWFkKTtcbiAgICB0aGlzLmNsb3NlKCk7XG5cbiAgICByZXR1cm4gYnVmO1xuICB9XG5cbiAgdmFyIHJlcSA9IHRoaXMuX2JpbmRpbmcud3JpdGUoZmx1c2hGbGFnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjaHVuaywgLy8gaW5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaW5PZmYsIC8vIGluX29mZlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhdmFpbEluQmVmb3JlLCAvLyBpbl9sZW5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5fYnVmZmVyLCAvLyBvdXRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5fb2Zmc2V0LCAvL291dF9vZmZcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXZhaWxPdXRCZWZvcmUpOyAvLyBvdXRfbGVuXG5cbiAgcmVxLmJ1ZmZlciA9IGNodW5rO1xuICByZXEuY2FsbGJhY2sgPSBjYWxsYmFjaztcblxuICBmdW5jdGlvbiBjYWxsYmFjayhhdmFpbEluQWZ0ZXIsIGF2YWlsT3V0QWZ0ZXIpIHtcbiAgICBpZiAoc2VsZi5faGFkRXJyb3IpXG4gICAgICByZXR1cm47XG5cbiAgICB2YXIgaGF2ZSA9IGF2YWlsT3V0QmVmb3JlIC0gYXZhaWxPdXRBZnRlcjtcbiAgICBhc3NlcnQoaGF2ZSA+PSAwLCAnaGF2ZSBzaG91bGQgbm90IGdvIGRvd24nKTtcblxuICAgIGlmIChoYXZlID4gMCkge1xuICAgICAgdmFyIG91dCA9IHNlbGYuX2J1ZmZlci5zbGljZShzZWxmLl9vZmZzZXQsIHNlbGYuX29mZnNldCArIGhhdmUpO1xuICAgICAgc2VsZi5fb2Zmc2V0ICs9IGhhdmU7XG4gICAgICAvLyBzZXJ2ZSBzb21lIG91dHB1dCB0byB0aGUgY29uc3VtZXIuXG4gICAgICBpZiAoYXN5bmMpIHtcbiAgICAgICAgc2VsZi5wdXNoKG91dCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBidWZmZXJzLnB1c2gob3V0KTtcbiAgICAgICAgbnJlYWQgKz0gb3V0Lmxlbmd0aDtcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBleGhhdXN0ZWQgdGhlIG91dHB1dCBidWZmZXIsIG9yIHVzZWQgYWxsIHRoZSBpbnB1dCBjcmVhdGUgYSBuZXcgb25lLlxuICAgIGlmIChhdmFpbE91dEFmdGVyID09PSAwIHx8IHNlbGYuX29mZnNldCA+PSBzZWxmLl9jaHVua1NpemUpIHtcbiAgICAgIGF2YWlsT3V0QmVmb3JlID0gc2VsZi5fY2h1bmtTaXplO1xuICAgICAgc2VsZi5fb2Zmc2V0ID0gMDtcbiAgICAgIHNlbGYuX2J1ZmZlciA9IG5ldyBCdWZmZXIoc2VsZi5fY2h1bmtTaXplKTtcbiAgICB9XG5cbiAgICBpZiAoYXZhaWxPdXRBZnRlciA9PT0gMCkge1xuICAgICAgLy8gTm90IGFjdHVhbGx5IGRvbmUuICBOZWVkIHRvIHJlcHJvY2Vzcy5cbiAgICAgIC8vIEFsc28sIHVwZGF0ZSB0aGUgYXZhaWxJbkJlZm9yZSB0byB0aGUgYXZhaWxJbkFmdGVyIHZhbHVlLFxuICAgICAgLy8gc28gdGhhdCBpZiB3ZSBoYXZlIHRvIGhpdCBpdCBhIHRoaXJkIChmb3VydGgsIGV0Yy4pIHRpbWUsXG4gICAgICAvLyBpdCdsbCBoYXZlIHRoZSBjb3JyZWN0IGJ5dGUgY291bnRzLlxuICAgICAgaW5PZmYgKz0gKGF2YWlsSW5CZWZvcmUgLSBhdmFpbEluQWZ0ZXIpO1xuICAgICAgYXZhaWxJbkJlZm9yZSA9IGF2YWlsSW5BZnRlcjtcblxuICAgICAgaWYgKCFhc3luYylcbiAgICAgICAgcmV0dXJuIHRydWU7XG5cbiAgICAgIHZhciBuZXdSZXEgPSBzZWxmLl9iaW5kaW5nLndyaXRlKGZsdXNoRmxhZyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNodW5rLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaW5PZmYsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhdmFpbEluQmVmb3JlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5fYnVmZmVyLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5fb2Zmc2V0LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5fY2h1bmtTaXplKTtcbiAgICAgIG5ld1JlcS5jYWxsYmFjayA9IGNhbGxiYWNrOyAvLyB0aGlzIHNhbWUgZnVuY3Rpb25cbiAgICAgIG5ld1JlcS5idWZmZXIgPSBjaHVuaztcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBpZiAoIWFzeW5jKVxuICAgICAgcmV0dXJuIGZhbHNlO1xuXG4gICAgLy8gZmluaXNoZWQgd2l0aCB0aGUgY2h1bmsuXG4gICAgY2IoKTtcbiAgfVxufTtcblxuaW5oZXJpdHMoRGVmbGF0ZSwgWmxpYik7XG5pbmhlcml0cyhJbmZsYXRlLCBabGliKTtcbmluaGVyaXRzKEd6aXAsIFpsaWIpO1xuaW5oZXJpdHMoR3VuemlwLCBabGliKTtcbmluaGVyaXRzKERlZmxhdGVSYXcsIFpsaWIpO1xuaW5oZXJpdHMoSW5mbGF0ZVJhdywgWmxpYik7XG5pbmhlcml0cyhVbnppcCwgWmxpYik7XG5leHBvcnQgZGVmYXVsdCB7XG4gIGNvZGVzOiBjb2RlcyxcbiAgY3JlYXRlRGVmbGF0ZTogY3JlYXRlRGVmbGF0ZSxcbiAgY3JlYXRlSW5mbGF0ZTogY3JlYXRlSW5mbGF0ZSxcbiAgY3JlYXRlRGVmbGF0ZVJhdzogY3JlYXRlRGVmbGF0ZVJhdyxcbiAgY3JlYXRlSW5mbGF0ZVJhdzogY3JlYXRlSW5mbGF0ZVJhdyxcbiAgY3JlYXRlR3ppcDogY3JlYXRlR3ppcCxcbiAgY3JlYXRlR3VuemlwOiBjcmVhdGVHdW56aXAsXG4gIGNyZWF0ZVVuemlwOiBjcmVhdGVVbnppcCxcbiAgZGVmbGF0ZTogZGVmbGF0ZSxcbiAgZGVmbGF0ZVN5bmM6IGRlZmxhdGVTeW5jLFxuICBnemlwOiBnemlwLFxuICBnemlwU3luYzogZ3ppcFN5bmMsXG4gIGRlZmxhdGVSYXc6IGRlZmxhdGVSYXcsXG4gIGRlZmxhdGVSYXdTeW5jOiBkZWZsYXRlUmF3U3luYyxcbiAgdW56aXA6IHVuemlwLFxuICB1bnppcFN5bmM6IHVuemlwU3luYyxcbiAgaW5mbGF0ZTogaW5mbGF0ZSxcbiAgaW5mbGF0ZVN5bmM6IGluZmxhdGVTeW5jLFxuICBndW56aXA6IGd1bnppcCxcbiAgZ3VuemlwU3luYzogZ3VuemlwU3luYyxcbiAgaW5mbGF0ZVJhdzogaW5mbGF0ZVJhdyxcbiAgaW5mbGF0ZVJhd1N5bmM6IGluZmxhdGVSYXdTeW5jLFxuICBEZWZsYXRlOiBEZWZsYXRlLFxuICBJbmZsYXRlOiBJbmZsYXRlLFxuICBHemlwOiBHemlwLFxuICBHdW56aXA6IEd1bnppcCxcbiAgRGVmbGF0ZVJhdzogRGVmbGF0ZVJhdyxcbiAgSW5mbGF0ZVJhdzogSW5mbGF0ZVJhdyxcbiAgVW56aXA6IFVuemlwLFxuICBabGliOiBabGliXG59O1xuIiwgImltcG9ydCB7IEFwaUVycm9yLCBFcnJvckNvZGUgfSBmcm9tICcuLi9jb3JlL2FwaV9lcnJvcic7XG5pbXBvcnQgeyBkZWZhdWx0IGFzIFN0YXRzLCBGaWxlVHlwZSB9IGZyb20gJy4uL2NvcmUvc3RhdHMnO1xuaW1wb3J0IHsgU3luY2hyb25vdXNGaWxlU3lzdGVtLCBGaWxlU3lzdGVtLCBCRlNDYWxsYmFjaywgRmlsZVN5c3RlbU9wdGlvbnMgfSBmcm9tICcuLi9jb3JlL2ZpbGVfc3lzdGVtJztcbmltcG9ydCB7IEZpbGUgfSBmcm9tICcuLi9jb3JlL2ZpbGUnO1xuaW1wb3J0IHsgRmlsZUZsYWcsIEFjdGlvblR5cGUgfSBmcm9tICcuLi9jb3JlL2ZpbGVfZmxhZyc7XG5pbXBvcnQgeyBOb1N5bmNGaWxlIH0gZnJvbSAnLi4vZ2VuZXJpYy9wcmVsb2FkX2ZpbGUnO1xuaW1wb3J0IHsgY29weWluZ1NsaWNlLCBidWZmZXJWYWxpZGF0b3IgfSBmcm9tICcuLi9jb3JlL3V0aWwnO1xuaW1wb3J0IEV4dGVuZGVkQVNDSUkgZnJvbSAnLi4vZ2VuZXJpYy9leHRlbmRlZF9hc2NpaSc7XG5pbXBvcnQgc2V0SW1tZWRpYXRlIGZyb20gJy4uL2dlbmVyaWMvc2V0SW1tZWRpYXRlJztcbmltcG9ydCB7IGluZmxhdGVSYXdTeW5jIGFzIGluZmxhdGVSYXcgfSBmcm9tICd6bGliJztcbmltcG9ydCB7IEZpbGVJbmRleCwgRGlySW5vZGUsIEZpbGVJbm9kZSwgaXNEaXJJbm9kZSwgaXNGaWxlSW5vZGUgfSBmcm9tICcuLi9nZW5lcmljL2ZpbGVfaW5kZXgnO1xuaW1wb3J0IHR5cGUgeyBCdWZmZXIgfSBmcm9tICdidWZmZXInO1xuXG4vKipcbiAqIE1hcHMgQ29tcHJlc3Npb25NZXRob2QgPT4gZnVuY3Rpb24gdGhhdCBkZWNvbXByZXNzZXMuXG4gKiBAaGlkZGVuXG4gKi9cbmNvbnN0IGRlY29tcHJlc3Npb25NZXRob2RzOiB7IFttZXRob2Q6IG51bWJlcl06IChkYXRhOiBCdWZmZXIsIGNvbXByZXNzZWRTaXplOiBudW1iZXIsIHVuY29tcHJlc3NlZFNpemU6IG51bWJlciwgZmxhZ3M6IG51bWJlcikgPT4gQnVmZmVyIH0gPSB7fTtcblxuLyoqXG4gKiA0LjQuMi4yOiBJbmRpY2F0ZXMgdGhlIGNvbXBhdGliaWx0aXkgb2YgYSBmaWxlJ3MgZXh0ZXJuYWwgYXR0cmlidXRlcy5cbiAqL1xuZXhwb3J0IGVudW0gRXh0ZXJuYWxGaWxlQXR0cmlidXRlVHlwZSB7XG5cdE1TRE9TID0gMCxcblx0QU1JR0EgPSAxLFxuXHRPUEVOVk1TID0gMixcblx0VU5JWCA9IDMsXG5cdFZNX0NNUyA9IDQsXG5cdEFUQVJJX1NUID0gNSxcblx0T1MyX0hQRlMgPSA2LFxuXHRNQUMgPSA3LFxuXHRaX1NZU1RFTSA9IDgsXG5cdENQX00gPSA5LFxuXHROVEZTID0gMTAsXG5cdE1WUyA9IDExLFxuXHRWU0UgPSAxMixcblx0QUNPUk5fUklTQyA9IDEzLFxuXHRWRkFUID0gMTQsXG5cdEFMVF9NVlMgPSAxNSxcblx0QkVPUyA9IDE2LFxuXHRUQU5ERU0gPSAxNyxcblx0T1NfNDAwID0gMTgsXG5cdE9TWCA9IDE5LFxufVxuXG4vKipcbiAqIDQuNC41XG4gKi9cbmV4cG9ydCBlbnVtIENvbXByZXNzaW9uTWV0aG9kIHtcblx0U1RPUkVEID0gMCwgLy8gVGhlIGZpbGUgaXMgc3RvcmVkIChubyBjb21wcmVzc2lvbilcblx0U0hSVU5LID0gMSwgLy8gVGhlIGZpbGUgaXMgU2hydW5rXG5cdFJFRFVDRURfMSA9IDIsIC8vIFRoZSBmaWxlIGlzIFJlZHVjZWQgd2l0aCBjb21wcmVzc2lvbiBmYWN0b3IgMVxuXHRSRURVQ0VEXzIgPSAzLCAvLyBUaGUgZmlsZSBpcyBSZWR1Y2VkIHdpdGggY29tcHJlc3Npb24gZmFjdG9yIDJcblx0UkVEVUNFRF8zID0gNCwgLy8gVGhlIGZpbGUgaXMgUmVkdWNlZCB3aXRoIGNvbXByZXNzaW9uIGZhY3RvciAzXG5cdFJFRFVDRURfNCA9IDUsIC8vIFRoZSBmaWxlIGlzIFJlZHVjZWQgd2l0aCBjb21wcmVzc2lvbiBmYWN0b3IgNFxuXHRJTVBMT0RFID0gNiwgLy8gVGhlIGZpbGUgaXMgSW1wbG9kZWRcblx0REVGTEFURSA9IDgsIC8vIFRoZSBmaWxlIGlzIERlZmxhdGVkXG5cdERFRkxBVEU2NCA9IDksIC8vIEVuaGFuY2VkIERlZmxhdGluZyB1c2luZyBEZWZsYXRlNjQodG0pXG5cdFRFUlNFX09MRCA9IDEwLCAvLyBQS1dBUkUgRGF0YSBDb21wcmVzc2lvbiBMaWJyYXJ5IEltcGxvZGluZyAob2xkIElCTSBURVJTRSlcblx0QlpJUDIgPSAxMiwgLy8gRmlsZSBpcyBjb21wcmVzc2VkIHVzaW5nIEJaSVAyIGFsZ29yaXRobVxuXHRMWk1BID0gMTQsIC8vIExaTUEgKEVGUylcblx0VEVSU0VfTkVXID0gMTgsIC8vIEZpbGUgaXMgY29tcHJlc3NlZCB1c2luZyBJQk0gVEVSU0UgKG5ldylcblx0TFo3NyA9IDE5LCAvLyBJQk0gTFo3NyB6IEFyY2hpdGVjdHVyZSAoUEZTKVxuXHRXQVZQQUNLID0gOTcsIC8vIFdhdlBhY2sgY29tcHJlc3NlZCBkYXRhXG5cdFBQTUQgPSA5OCwgLy8gUFBNZCB2ZXJzaW9uIEksIFJldiAxXG59XG5cbi8qKlxuICogQ29udmVydHMgdGhlIGlucHV0IHRpbWUgYW5kIGRhdGUgaW4gTVMtRE9TIGZvcm1hdCBpbnRvIGEgSmF2YVNjcmlwdCBEYXRlXG4gKiBvYmplY3QuXG4gKiBAaGlkZGVuXG4gKi9cbmZ1bmN0aW9uIG1zZG9zMmRhdGUodGltZTogbnVtYmVyLCBkYXRlOiBudW1iZXIpOiBEYXRlIHtcblx0Ly8gTVMtRE9TIERhdGVcblx0Ly8gfDAgMCAwIDAgIDB8MCAwIDAgIDB8MCAwIDAgIDAgMCAwIDBcblx0Ly8gICBEICgxLTMxKSAgTSAoMS0yMykgIFkgKGZyb20gMTk4MClcblx0Y29uc3QgZGF5ID0gZGF0ZSAmIDB4MWY7XG5cdC8vIEpTIGRhdGUgaXMgMC1pbmRleGVkLCBET1MgaXMgMS1pbmRleGVkLlxuXHRjb25zdCBtb250aCA9ICgoZGF0ZSA+PiA1KSAmIDB4ZikgLSAxO1xuXHRjb25zdCB5ZWFyID0gKGRhdGUgPj4gOSkgKyAxOTgwO1xuXHQvLyBNUyBET1MgVGltZVxuXHQvLyB8MCAwIDAgMCAgMHwwIDAgMCAgMCAwIDB8MCAgMCAwIDAgMFxuXHQvLyAgICBTZWNvbmQgICAgICBNaW51dGUgICAgICAgSG91clxuXHRjb25zdCBzZWNvbmQgPSB0aW1lICYgMHgxZjtcblx0Y29uc3QgbWludXRlID0gKHRpbWUgPj4gNSkgJiAweDNmO1xuXHRjb25zdCBob3VyID0gdGltZSA+PiAxMTtcblx0cmV0dXJuIG5ldyBEYXRlKHllYXIsIG1vbnRoLCBkYXksIGhvdXIsIG1pbnV0ZSwgc2Vjb25kKTtcbn1cblxuLyoqXG4gKiBTYWZlbHkgcmV0dXJucyB0aGUgc3RyaW5nIGZyb20gdGhlIGJ1ZmZlciwgZXZlbiBpZiBpdCBpcyAwIGJ5dGVzIGxvbmcuXG4gKiAoTm9ybWFsbHksIGNhbGxpbmcgdG9TdHJpbmcoKSBvbiBhIGJ1ZmZlciB3aXRoIHN0YXJ0ID09PSBlbmQgY2F1c2VzIGFuXG4gKiBleGNlcHRpb24pLlxuICogQGhpZGRlblxuICovXG5mdW5jdGlvbiBzYWZlVG9TdHJpbmcoYnVmZjogQnVmZmVyLCB1c2VVVEY4OiBib29sZWFuLCBzdGFydDogbnVtYmVyLCBsZW5ndGg6IG51bWJlcik6IHN0cmluZyB7XG5cdGlmIChsZW5ndGggPT09IDApIHtcblx0XHRyZXR1cm4gJyc7XG5cdH0gZWxzZSBpZiAodXNlVVRGOCkge1xuXHRcdHJldHVybiBidWZmLnRvU3RyaW5nKCd1dGY4Jywgc3RhcnQsIHN0YXJ0ICsgbGVuZ3RoKTtcblx0fSBlbHNlIHtcblx0XHRyZXR1cm4gRXh0ZW5kZWRBU0NJSS5ieXRlMnN0cihidWZmLnNsaWNlKHN0YXJ0LCBzdGFydCArIGxlbmd0aCkpO1xuXHR9XG59XG5cbi8qXG4gICA0LjMuNiBPdmVyYWxsIC5aSVAgZmlsZSBmb3JtYXQ6XG5cbiAgICAgIFtsb2NhbCBmaWxlIGhlYWRlciAxXVxuICAgICAgW2VuY3J5cHRpb24gaGVhZGVyIDFdXG4gICAgICBbZmlsZSBkYXRhIDFdXG4gICAgICBbZGF0YSBkZXNjcmlwdG9yIDFdXG4gICAgICAuXG4gICAgICAuXG4gICAgICAuXG4gICAgICBbbG9jYWwgZmlsZSBoZWFkZXIgbl1cbiAgICAgIFtlbmNyeXB0aW9uIGhlYWRlciBuXVxuICAgICAgW2ZpbGUgZGF0YSBuXVxuICAgICAgW2RhdGEgZGVzY3JpcHRvciBuXVxuICAgICAgW2FyY2hpdmUgZGVjcnlwdGlvbiBoZWFkZXJdXG4gICAgICBbYXJjaGl2ZSBleHRyYSBkYXRhIHJlY29yZF1cbiAgICAgIFtjZW50cmFsIGRpcmVjdG9yeSBoZWFkZXIgMV1cbiAgICAgIC5cbiAgICAgIC5cbiAgICAgIC5cbiAgICAgIFtjZW50cmFsIGRpcmVjdG9yeSBoZWFkZXIgbl1cbiAgICAgIFt6aXA2NCBlbmQgb2YgY2VudHJhbCBkaXJlY3RvcnkgcmVjb3JkXVxuICAgICAgW3ppcDY0IGVuZCBvZiBjZW50cmFsIGRpcmVjdG9yeSBsb2NhdG9yXVxuICAgICAgW2VuZCBvZiBjZW50cmFsIGRpcmVjdG9yeSByZWNvcmRdXG4qL1xuXG4vKipcbiAqIDQuMy43ICBMb2NhbCBmaWxlIGhlYWRlcjpcbiAqXG4gKiAgICAgbG9jYWwgZmlsZSBoZWFkZXIgc2lnbmF0dXJlICAgICA0IGJ5dGVzICAoMHgwNDAzNGI1MClcbiAqICAgICB2ZXJzaW9uIG5lZWRlZCB0byBleHRyYWN0ICAgICAgIDIgYnl0ZXNcbiAqICAgICBnZW5lcmFsIHB1cnBvc2UgYml0IGZsYWcgICAgICAgIDIgYnl0ZXNcbiAqICAgICBjb21wcmVzc2lvbiBtZXRob2QgICAgICAgICAgICAgIDIgYnl0ZXNcbiAqICAgIGxhc3QgbW9kIGZpbGUgdGltZSAgICAgICAgICAgICAgMiBieXRlc1xuICogICAgbGFzdCBtb2QgZmlsZSBkYXRlICAgICAgICAgICAgICAyIGJ5dGVzXG4gKiAgICBjcmMtMzIgICAgICAgICAgICAgICAgICAgICAgICAgIDQgYnl0ZXNcbiAqICAgIGNvbXByZXNzZWQgc2l6ZSAgICAgICAgICAgICAgICAgNCBieXRlc1xuICogICAgdW5jb21wcmVzc2VkIHNpemUgICAgICAgICAgICAgICA0IGJ5dGVzXG4gKiAgICBmaWxlIG5hbWUgbGVuZ3RoICAgICAgICAgICAgICAgIDIgYnl0ZXNcbiAqICAgIGV4dHJhIGZpZWxkIGxlbmd0aCAgICAgICAgICAgICAgMiBieXRlc1xuICpcbiAqICAgIGZpbGUgbmFtZSAodmFyaWFibGUgc2l6ZSlcbiAqICAgIGV4dHJhIGZpZWxkICh2YXJpYWJsZSBzaXplKVxuICovXG5leHBvcnQgY2xhc3MgRmlsZUhlYWRlciB7XG5cdGNvbnN0cnVjdG9yKHByaXZhdGUgZGF0YTogQnVmZmVyKSB7XG5cdFx0aWYgKGRhdGEucmVhZFVJbnQzMkxFKDApICE9PSAweDA0MDM0YjUwKSB7XG5cdFx0XHR0aHJvdyBuZXcgQXBpRXJyb3IoRXJyb3JDb2RlLkVJTlZBTCwgJ0ludmFsaWQgWmlwIGZpbGU6IExvY2FsIGZpbGUgaGVhZGVyIGhhcyBpbnZhbGlkIHNpZ25hdHVyZTogJyArIHRoaXMuZGF0YS5yZWFkVUludDMyTEUoMCkpO1xuXHRcdH1cblx0fVxuXHRwdWJsaWMgdmVyc2lvbk5lZWRlZCgpOiBudW1iZXIge1xuXHRcdHJldHVybiB0aGlzLmRhdGEucmVhZFVJbnQxNkxFKDQpO1xuXHR9XG5cdHB1YmxpYyBmbGFncygpOiBudW1iZXIge1xuXHRcdHJldHVybiB0aGlzLmRhdGEucmVhZFVJbnQxNkxFKDYpO1xuXHR9XG5cdHB1YmxpYyBjb21wcmVzc2lvbk1ldGhvZCgpOiBDb21wcmVzc2lvbk1ldGhvZCB7XG5cdFx0cmV0dXJuIHRoaXMuZGF0YS5yZWFkVUludDE2TEUoOCk7XG5cdH1cblx0cHVibGljIGxhc3RNb2RGaWxlVGltZSgpOiBEYXRlIHtcblx0XHQvLyBUaW1lIGFuZCBkYXRlIGlzIGluIE1TLURPUyBmb3JtYXQuXG5cdFx0cmV0dXJuIG1zZG9zMmRhdGUodGhpcy5kYXRhLnJlYWRVSW50MTZMRSgxMCksIHRoaXMuZGF0YS5yZWFkVUludDE2TEUoMTIpKTtcblx0fVxuXHRwdWJsaWMgcmF3TGFzdE1vZEZpbGVUaW1lKCk6IG51bWJlciB7XG5cdFx0cmV0dXJuIHRoaXMuZGF0YS5yZWFkVUludDMyTEUoMTApO1xuXHR9XG5cdHB1YmxpYyBjcmMzMigpOiBudW1iZXIge1xuXHRcdHJldHVybiB0aGlzLmRhdGEucmVhZFVJbnQzMkxFKDE0KTtcblx0fVxuXHQvKipcblx0ICogVGhlc2UgdHdvIHZhbHVlcyBhcmUgQ09NUExFVEVMWSBVU0VMRVNTLlxuXHQgKlxuXHQgKiBTZWN0aW9uIDQuNC45OlxuXHQgKiAgIElmIGJpdCAzIG9mIHRoZSBnZW5lcmFsIHB1cnBvc2UgYml0IGZsYWcgaXMgc2V0LFxuXHQgKiAgIHRoZXNlIGZpZWxkcyBhcmUgc2V0IHRvIHplcm8gaW4gdGhlIGxvY2FsIGhlYWRlciBhbmQgdGhlXG5cdCAqICAgY29ycmVjdCB2YWx1ZXMgYXJlIHB1dCBpbiB0aGUgZGF0YSBkZXNjcmlwdG9yIGFuZFxuXHQgKiAgIGluIHRoZSBjZW50cmFsIGRpcmVjdG9yeS5cblx0ICpcblx0ICogU28gd2UnbGwganVzdCB1c2UgdGhlIGNlbnRyYWwgZGlyZWN0b3J5J3MgdmFsdWVzLlxuXHQgKi9cblx0Ly8gcHVibGljIGNvbXByZXNzZWRTaXplKCk6IG51bWJlciB7IHJldHVybiB0aGlzLmRhdGEucmVhZFVJbnQzMkxFKDE4KTsgfVxuXHQvLyBwdWJsaWMgdW5jb21wcmVzc2VkU2l6ZSgpOiBudW1iZXIgeyByZXR1cm4gdGhpcy5kYXRhLnJlYWRVSW50MzJMRSgyMik7IH1cblx0cHVibGljIGZpbGVOYW1lTGVuZ3RoKCk6IG51bWJlciB7XG5cdFx0cmV0dXJuIHRoaXMuZGF0YS5yZWFkVUludDE2TEUoMjYpO1xuXHR9XG5cdHB1YmxpYyBleHRyYUZpZWxkTGVuZ3RoKCk6IG51bWJlciB7XG5cdFx0cmV0dXJuIHRoaXMuZGF0YS5yZWFkVUludDE2TEUoMjgpO1xuXHR9XG5cdHB1YmxpYyBmaWxlTmFtZSgpOiBzdHJpbmcge1xuXHRcdHJldHVybiBzYWZlVG9TdHJpbmcodGhpcy5kYXRhLCB0aGlzLnVzZVVURjgoKSwgMzAsIHRoaXMuZmlsZU5hbWVMZW5ndGgoKSk7XG5cdH1cblx0cHVibGljIGV4dHJhRmllbGQoKTogQnVmZmVyIHtcblx0XHRjb25zdCBzdGFydCA9IDMwICsgdGhpcy5maWxlTmFtZUxlbmd0aCgpO1xuXHRcdHJldHVybiB0aGlzLmRhdGEuc2xpY2Uoc3RhcnQsIHN0YXJ0ICsgdGhpcy5leHRyYUZpZWxkTGVuZ3RoKCkpO1xuXHR9XG5cdHB1YmxpYyB0b3RhbFNpemUoKTogbnVtYmVyIHtcblx0XHRyZXR1cm4gMzAgKyB0aGlzLmZpbGVOYW1lTGVuZ3RoKCkgKyB0aGlzLmV4dHJhRmllbGRMZW5ndGgoKTtcblx0fVxuXHRwdWJsaWMgdXNlVVRGOCgpOiBib29sZWFuIHtcblx0XHRyZXR1cm4gKHRoaXMuZmxhZ3MoKSAmIDB4ODAwKSA9PT0gMHg4MDA7XG5cdH1cbn1cblxuLyoqXG4gKiA0LjMuOCAgRmlsZSBkYXRhXG4gKlxuICogICBJbW1lZGlhdGVseSBmb2xsb3dpbmcgdGhlIGxvY2FsIGhlYWRlciBmb3IgYSBmaWxlXG4gKiAgIFNIT1VMRCBiZSBwbGFjZWQgdGhlIGNvbXByZXNzZWQgb3Igc3RvcmVkIGRhdGEgZm9yIHRoZSBmaWxlLlxuICogICBJZiB0aGUgZmlsZSBpcyBlbmNyeXB0ZWQsIHRoZSBlbmNyeXB0aW9uIGhlYWRlciBmb3IgdGhlIGZpbGVcbiAqICAgU0hPVUxEIGJlIHBsYWNlZCBhZnRlciB0aGUgbG9jYWwgaGVhZGVyIGFuZCBiZWZvcmUgdGhlIGZpbGVcbiAqICAgZGF0YS4gVGhlIHNlcmllcyBvZiBbbG9jYWwgZmlsZSBoZWFkZXJdW2VuY3J5cHRpb24gaGVhZGVyXVxuICogICBbZmlsZSBkYXRhXVtkYXRhIGRlc2NyaXB0b3JdIHJlcGVhdHMgZm9yIGVhY2ggZmlsZSBpbiB0aGVcbiAqICAgLlpJUCBhcmNoaXZlLlxuICpcbiAqICAgWmVyby1ieXRlIGZpbGVzLCBkaXJlY3RvcmllcywgYW5kIG90aGVyIGZpbGUgdHlwZXMgdGhhdFxuICogICBjb250YWluIG5vIGNvbnRlbnQgTVVTVCBub3QgaW5jbHVkZSBmaWxlIGRhdGEuXG4gKi9cbmV4cG9ydCBjbGFzcyBGaWxlRGF0YSB7XG5cdGNvbnN0cnVjdG9yKHByaXZhdGUgaGVhZGVyOiBGaWxlSGVhZGVyLCBwcml2YXRlIHJlY29yZDogQ2VudHJhbERpcmVjdG9yeSwgcHJpdmF0ZSBkYXRhOiBCdWZmZXIpIHt9XG5cdHB1YmxpYyBkZWNvbXByZXNzKCk6IEJ1ZmZlciB7XG5cdFx0Ly8gQ2hlY2sgdGhlIGNvbXByZXNzaW9uXG5cdFx0Y29uc3QgY29tcHJlc3Npb25NZXRob2Q6IENvbXByZXNzaW9uTWV0aG9kID0gdGhpcy5oZWFkZXIuY29tcHJlc3Npb25NZXRob2QoKTtcblx0XHRjb25zdCBmY24gPSBkZWNvbXByZXNzaW9uTWV0aG9kc1tjb21wcmVzc2lvbk1ldGhvZF07XG5cdFx0aWYgKGZjbikge1xuXHRcdFx0cmV0dXJuIGZjbih0aGlzLmRhdGEsIHRoaXMucmVjb3JkLmNvbXByZXNzZWRTaXplKCksIHRoaXMucmVjb3JkLnVuY29tcHJlc3NlZFNpemUoKSwgdGhpcy5yZWNvcmQuZmxhZygpKTtcblx0XHR9IGVsc2Uge1xuXHRcdFx0bGV0IG5hbWU6IHN0cmluZyA9IENvbXByZXNzaW9uTWV0aG9kW2NvbXByZXNzaW9uTWV0aG9kXTtcblx0XHRcdGlmICghbmFtZSkge1xuXHRcdFx0XHRuYW1lID0gYFVua25vd246ICR7Y29tcHJlc3Npb25NZXRob2R9YDtcblx0XHRcdH1cblx0XHRcdHRocm93IG5ldyBBcGlFcnJvcihFcnJvckNvZGUuRUlOVkFMLCBgSW52YWxpZCBjb21wcmVzc2lvbiBtZXRob2Qgb24gZmlsZSAnJHt0aGlzLmhlYWRlci5maWxlTmFtZSgpfSc6ICR7bmFtZX1gKTtcblx0XHR9XG5cdH1cblx0cHVibGljIGdldEhlYWRlcigpOiBGaWxlSGVhZGVyIHtcblx0XHRyZXR1cm4gdGhpcy5oZWFkZXI7XG5cdH1cblx0cHVibGljIGdldFJlY29yZCgpOiBDZW50cmFsRGlyZWN0b3J5IHtcblx0XHRyZXR1cm4gdGhpcy5yZWNvcmQ7XG5cdH1cblx0cHVibGljIGdldFJhd0RhdGEoKTogQnVmZmVyIHtcblx0XHRyZXR1cm4gdGhpcy5kYXRhO1xuXHR9XG59XG5cbi8qKlxuICogNC4zLjkgIERhdGEgZGVzY3JpcHRvcjpcbiAqXG4gKiAgICBjcmMtMzIgICAgICAgICAgICAgICAgICAgICAgICAgIDQgYnl0ZXNcbiAqICAgIGNvbXByZXNzZWQgc2l6ZSAgICAgICAgICAgICAgICAgNCBieXRlc1xuICogICAgdW5jb21wcmVzc2VkIHNpemUgICAgICAgICAgICAgICA0IGJ5dGVzXG4gKi9cbmV4cG9ydCBjbGFzcyBEYXRhRGVzY3JpcHRvciB7XG5cdGNvbnN0cnVjdG9yKHByaXZhdGUgZGF0YTogQnVmZmVyKSB7fVxuXHRwdWJsaWMgY3JjMzIoKTogbnVtYmVyIHtcblx0XHRyZXR1cm4gdGhpcy5kYXRhLnJlYWRVSW50MzJMRSgwKTtcblx0fVxuXHRwdWJsaWMgY29tcHJlc3NlZFNpemUoKTogbnVtYmVyIHtcblx0XHRyZXR1cm4gdGhpcy5kYXRhLnJlYWRVSW50MzJMRSg0KTtcblx0fVxuXHRwdWJsaWMgdW5jb21wcmVzc2VkU2l6ZSgpOiBudW1iZXIge1xuXHRcdHJldHVybiB0aGlzLmRhdGEucmVhZFVJbnQzMkxFKDgpO1xuXHR9XG59XG5cbi8qXG5gIDQuMy4xMCAgQXJjaGl2ZSBkZWNyeXB0aW9uIGhlYWRlcjpcblxuICAgICAgNC4zLjEwLjEgVGhlIEFyY2hpdmUgRGVjcnlwdGlvbiBIZWFkZXIgaXMgaW50cm9kdWNlZCBpbiB2ZXJzaW9uIDYuMlxuICAgICAgb2YgdGhlIFpJUCBmb3JtYXQgc3BlY2lmaWNhdGlvbi4gIFRoaXMgcmVjb3JkIGV4aXN0cyBpbiBzdXBwb3J0XG4gICAgICBvZiB0aGUgQ2VudHJhbCBEaXJlY3RvcnkgRW5jcnlwdGlvbiBGZWF0dXJlIGltcGxlbWVudGVkIGFzIHBhcnQgb2ZcbiAgICAgIHRoZSBTdHJvbmcgRW5jcnlwdGlvbiBTcGVjaWZpY2F0aW9uIGFzIGRlc2NyaWJlZCBpbiB0aGlzIGRvY3VtZW50LlxuICAgICAgV2hlbiB0aGUgQ2VudHJhbCBEaXJlY3RvcnkgU3RydWN0dXJlIGlzIGVuY3J5cHRlZCwgdGhpcyBkZWNyeXB0aW9uXG4gICAgICBoZWFkZXIgTVVTVCBwcmVjZWRlIHRoZSBlbmNyeXB0ZWQgZGF0YSBzZWdtZW50LlxuICovXG4vKipcbiAqIDQuMy4xMSAgQXJjaGl2ZSBleHRyYSBkYXRhIHJlY29yZDpcbiAqXG4gKiAgICAgIGFyY2hpdmUgZXh0cmEgZGF0YSBzaWduYXR1cmUgICAgNCBieXRlcyAgKDB4MDgwNjRiNTApXG4gKiAgICAgIGV4dHJhIGZpZWxkIGxlbmd0aCAgICAgICAgICAgICAgNCBieXRlc1xuICogICAgICBleHRyYSBmaWVsZCBkYXRhICAgICAgICAgICAgICAgICh2YXJpYWJsZSBzaXplKVxuICpcbiAqICAgIDQuMy4xMS4xIFRoZSBBcmNoaXZlIEV4dHJhIERhdGEgUmVjb3JkIGlzIGludHJvZHVjZWQgaW4gdmVyc2lvbiA2LjJcbiAqICAgIG9mIHRoZSBaSVAgZm9ybWF0IHNwZWNpZmljYXRpb24uICBUaGlzIHJlY29yZCBNQVkgYmUgdXNlZCBpbiBzdXBwb3J0XG4gKiAgICBvZiB0aGUgQ2VudHJhbCBEaXJlY3RvcnkgRW5jcnlwdGlvbiBGZWF0dXJlIGltcGxlbWVudGVkIGFzIHBhcnQgb2ZcbiAqICAgIHRoZSBTdHJvbmcgRW5jcnlwdGlvbiBTcGVjaWZpY2F0aW9uIGFzIGRlc2NyaWJlZCBpbiB0aGlzIGRvY3VtZW50LlxuICogICAgV2hlbiBwcmVzZW50LCB0aGlzIHJlY29yZCBNVVNUIGltbWVkaWF0ZWx5IHByZWNlZGUgdGhlIGNlbnRyYWxcbiAqICAgIGRpcmVjdG9yeSBkYXRhIHN0cnVjdHVyZS5cbiAqL1xuZXhwb3J0IGNsYXNzIEFyY2hpdmVFeHRyYURhdGFSZWNvcmQge1xuXHRjb25zdHJ1Y3Rvcihwcml2YXRlIGRhdGE6IEJ1ZmZlcikge1xuXHRcdGlmICh0aGlzLmRhdGEucmVhZFVJbnQzMkxFKDApICE9PSAweDA4MDY0YjUwKSB7XG5cdFx0XHR0aHJvdyBuZXcgQXBpRXJyb3IoRXJyb3JDb2RlLkVJTlZBTCwgJ0ludmFsaWQgYXJjaGl2ZSBleHRyYSBkYXRhIHJlY29yZCBzaWduYXR1cmU6ICcgKyB0aGlzLmRhdGEucmVhZFVJbnQzMkxFKDApKTtcblx0XHR9XG5cdH1cblx0cHVibGljIGxlbmd0aCgpOiBudW1iZXIge1xuXHRcdHJldHVybiB0aGlzLmRhdGEucmVhZFVJbnQzMkxFKDQpO1xuXHR9XG5cdHB1YmxpYyBleHRyYUZpZWxkRGF0YSgpOiBCdWZmZXIge1xuXHRcdHJldHVybiB0aGlzLmRhdGEuc2xpY2UoOCwgOCArIHRoaXMubGVuZ3RoKCkpO1xuXHR9XG59XG5cbi8qKlxuICogNC4zLjEzIERpZ2l0YWwgc2lnbmF0dXJlOlxuICpcbiAqICAgICAgaGVhZGVyIHNpZ25hdHVyZSAgICAgICAgICAgICAgICA0IGJ5dGVzICAoMHgwNTA1NGI1MClcbiAqICAgICAgc2l6ZSBvZiBkYXRhICAgICAgICAgICAgICAgICAgICAyIGJ5dGVzXG4gKiAgICAgIHNpZ25hdHVyZSBkYXRhICh2YXJpYWJsZSBzaXplKVxuICpcbiAqICAgIFdpdGggdGhlIGludHJvZHVjdGlvbiBvZiB0aGUgQ2VudHJhbCBEaXJlY3RvcnkgRW5jcnlwdGlvblxuICogICAgZmVhdHVyZSBpbiB2ZXJzaW9uIDYuMiBvZiB0aGlzIHNwZWNpZmljYXRpb24sIHRoZSBDZW50cmFsXG4gKiAgICBEaXJlY3RvcnkgU3RydWN0dXJlIE1BWSBiZSBzdG9yZWQgYm90aCBjb21wcmVzc2VkIGFuZCBlbmNyeXB0ZWQuXG4gKiAgICBBbHRob3VnaCBub3QgcmVxdWlyZWQsIGl0IGlzIGFzc3VtZWQgd2hlbiBlbmNyeXB0aW5nIHRoZVxuICogICAgQ2VudHJhbCBEaXJlY3RvcnkgU3RydWN0dXJlLCB0aGF0IGl0IHdpbGwgYmUgY29tcHJlc3NlZFxuICogICAgZm9yIGdyZWF0ZXIgc3RvcmFnZSBlZmZpY2llbmN5LiAgSW5mb3JtYXRpb24gb24gdGhlXG4gKiAgICBDZW50cmFsIERpcmVjdG9yeSBFbmNyeXB0aW9uIGZlYXR1cmUgY2FuIGJlIGZvdW5kIGluIHRoZSBzZWN0aW9uXG4gKiAgICBkZXNjcmliaW5nIHRoZSBTdHJvbmcgRW5jcnlwdGlvbiBTcGVjaWZpY2F0aW9uLiBUaGUgRGlnaXRhbFxuICogICAgU2lnbmF0dXJlIHJlY29yZCB3aWxsIGJlIG5laXRoZXIgY29tcHJlc3NlZCBub3IgZW5jcnlwdGVkLlxuICovXG5leHBvcnQgY2xhc3MgRGlnaXRhbFNpZ25hdHVyZSB7XG5cdGNvbnN0cnVjdG9yKHByaXZhdGUgZGF0YTogQnVmZmVyKSB7XG5cdFx0aWYgKHRoaXMuZGF0YS5yZWFkVUludDMyTEUoMCkgIT09IDB4MDUwNTRiNTApIHtcblx0XHRcdHRocm93IG5ldyBBcGlFcnJvcihFcnJvckNvZGUuRUlOVkFMLCAnSW52YWxpZCBkaWdpdGFsIHNpZ25hdHVyZSBzaWduYXR1cmU6ICcgKyB0aGlzLmRhdGEucmVhZFVJbnQzMkxFKDApKTtcblx0XHR9XG5cdH1cblx0cHVibGljIHNpemUoKTogbnVtYmVyIHtcblx0XHRyZXR1cm4gdGhpcy5kYXRhLnJlYWRVSW50MTZMRSg0KTtcblx0fVxuXHRwdWJsaWMgc2lnbmF0dXJlRGF0YSgpOiBCdWZmZXIge1xuXHRcdHJldHVybiB0aGlzLmRhdGEuc2xpY2UoNiwgNiArIHRoaXMuc2l6ZSgpKTtcblx0fVxufVxuXG4vKipcbiAqIDQuMy4xMiAgQ2VudHJhbCBkaXJlY3Rvcnkgc3RydWN0dXJlOlxuICpcbiAqICBjZW50cmFsIGZpbGUgaGVhZGVyIHNpZ25hdHVyZSAgIDQgYnl0ZXMgICgweDAyMDE0YjUwKVxuICogIHZlcnNpb24gbWFkZSBieSAgICAgICAgICAgICAgICAgMiBieXRlc1xuICogIHZlcnNpb24gbmVlZGVkIHRvIGV4dHJhY3QgICAgICAgMiBieXRlc1xuICogIGdlbmVyYWwgcHVycG9zZSBiaXQgZmxhZyAgICAgICAgMiBieXRlc1xuICogIGNvbXByZXNzaW9uIG1ldGhvZCAgICAgICAgICAgICAgMiBieXRlc1xuICogIGxhc3QgbW9kIGZpbGUgdGltZSAgICAgICAgICAgICAgMiBieXRlc1xuICogIGxhc3QgbW9kIGZpbGUgZGF0ZSAgICAgICAgICAgICAgMiBieXRlc1xuICogIGNyYy0zMiAgICAgICAgICAgICAgICAgICAgICAgICAgNCBieXRlc1xuICogIGNvbXByZXNzZWQgc2l6ZSAgICAgICAgICAgICAgICAgNCBieXRlc1xuICogIHVuY29tcHJlc3NlZCBzaXplICAgICAgICAgICAgICAgNCBieXRlc1xuICogIGZpbGUgbmFtZSBsZW5ndGggICAgICAgICAgICAgICAgMiBieXRlc1xuICogIGV4dHJhIGZpZWxkIGxlbmd0aCAgICAgICAgICAgICAgMiBieXRlc1xuICogIGZpbGUgY29tbWVudCBsZW5ndGggICAgICAgICAgICAgMiBieXRlc1xuICogIGRpc2sgbnVtYmVyIHN0YXJ0ICAgICAgICAgICAgICAgMiBieXRlc1xuICogIGludGVybmFsIGZpbGUgYXR0cmlidXRlcyAgICAgICAgMiBieXRlc1xuICogIGV4dGVybmFsIGZpbGUgYXR0cmlidXRlcyAgICAgICAgNCBieXRlc1xuICogIHJlbGF0aXZlIG9mZnNldCBvZiBsb2NhbCBoZWFkZXIgNCBieXRlc1xuICpcbiAqICBmaWxlIG5hbWUgKHZhcmlhYmxlIHNpemUpXG4gKiAgZXh0cmEgZmllbGQgKHZhcmlhYmxlIHNpemUpXG4gKiAgZmlsZSBjb21tZW50ICh2YXJpYWJsZSBzaXplKVxuICovXG5leHBvcnQgY2xhc3MgQ2VudHJhbERpcmVjdG9yeSB7XG5cdC8vIE9wdGltaXphdGlvbjogVGhlIGZpbGVuYW1lIGlzIGZyZXF1ZW50bHkgcmVhZCwgc28gc3Rhc2ggaXQgaGVyZS5cblx0cHJpdmF0ZSBfZmlsZW5hbWU6IHN0cmluZztcblx0Y29uc3RydWN0b3IocHJpdmF0ZSB6aXBEYXRhOiBCdWZmZXIsIHByaXZhdGUgZGF0YTogQnVmZmVyKSB7XG5cdFx0Ly8gU2FuaXR5IGNoZWNrLlxuXHRcdGlmICh0aGlzLmRhdGEucmVhZFVJbnQzMkxFKDApICE9PSAweDAyMDE0YjUwKSB7XG5cdFx0XHR0aHJvdyBuZXcgQXBpRXJyb3IoRXJyb3JDb2RlLkVJTlZBTCwgYEludmFsaWQgWmlwIGZpbGU6IENlbnRyYWwgZGlyZWN0b3J5IHJlY29yZCBoYXMgaW52YWxpZCBzaWduYXR1cmU6ICR7dGhpcy5kYXRhLnJlYWRVSW50MzJMRSgwKX1gKTtcblx0XHR9XG5cdFx0dGhpcy5fZmlsZW5hbWUgPSB0aGlzLnByb2R1Y2VGaWxlbmFtZSgpO1xuXHR9XG5cdHB1YmxpYyB2ZXJzaW9uTWFkZUJ5KCk6IG51bWJlciB7XG5cdFx0cmV0dXJuIHRoaXMuZGF0YS5yZWFkVUludDE2TEUoNCk7XG5cdH1cblx0cHVibGljIHZlcnNpb25OZWVkZWQoKTogbnVtYmVyIHtcblx0XHRyZXR1cm4gdGhpcy5kYXRhLnJlYWRVSW50MTZMRSg2KTtcblx0fVxuXHRwdWJsaWMgZmxhZygpOiBudW1iZXIge1xuXHRcdHJldHVybiB0aGlzLmRhdGEucmVhZFVJbnQxNkxFKDgpO1xuXHR9XG5cdHB1YmxpYyBjb21wcmVzc2lvbk1ldGhvZCgpOiBDb21wcmVzc2lvbk1ldGhvZCB7XG5cdFx0cmV0dXJuIHRoaXMuZGF0YS5yZWFkVUludDE2TEUoMTApO1xuXHR9XG5cdHB1YmxpYyBsYXN0TW9kRmlsZVRpbWUoKTogRGF0ZSB7XG5cdFx0Ly8gVGltZSBhbmQgZGF0ZSBpcyBpbiBNUy1ET1MgZm9ybWF0LlxuXHRcdHJldHVybiBtc2RvczJkYXRlKHRoaXMuZGF0YS5yZWFkVUludDE2TEUoMTIpLCB0aGlzLmRhdGEucmVhZFVJbnQxNkxFKDE0KSk7XG5cdH1cblx0cHVibGljIHJhd0xhc3RNb2RGaWxlVGltZSgpOiBudW1iZXIge1xuXHRcdHJldHVybiB0aGlzLmRhdGEucmVhZFVJbnQzMkxFKDEyKTtcblx0fVxuXHRwdWJsaWMgY3JjMzIoKTogbnVtYmVyIHtcblx0XHRyZXR1cm4gdGhpcy5kYXRhLnJlYWRVSW50MzJMRSgxNik7XG5cdH1cblx0cHVibGljIGNvbXByZXNzZWRTaXplKCk6IG51bWJlciB7XG5cdFx0cmV0dXJuIHRoaXMuZGF0YS5yZWFkVUludDMyTEUoMjApO1xuXHR9XG5cdHB1YmxpYyB1bmNvbXByZXNzZWRTaXplKCk6IG51bWJlciB7XG5cdFx0cmV0dXJuIHRoaXMuZGF0YS5yZWFkVUludDMyTEUoMjQpO1xuXHR9XG5cdHB1YmxpYyBmaWxlTmFtZUxlbmd0aCgpOiBudW1iZXIge1xuXHRcdHJldHVybiB0aGlzLmRhdGEucmVhZFVJbnQxNkxFKDI4KTtcblx0fVxuXHRwdWJsaWMgZXh0cmFGaWVsZExlbmd0aCgpOiBudW1iZXIge1xuXHRcdHJldHVybiB0aGlzLmRhdGEucmVhZFVJbnQxNkxFKDMwKTtcblx0fVxuXHRwdWJsaWMgZmlsZUNvbW1lbnRMZW5ndGgoKTogbnVtYmVyIHtcblx0XHRyZXR1cm4gdGhpcy5kYXRhLnJlYWRVSW50MTZMRSgzMik7XG5cdH1cblx0cHVibGljIGRpc2tOdW1iZXJTdGFydCgpOiBudW1iZXIge1xuXHRcdHJldHVybiB0aGlzLmRhdGEucmVhZFVJbnQxNkxFKDM0KTtcblx0fVxuXHRwdWJsaWMgaW50ZXJuYWxBdHRyaWJ1dGVzKCk6IG51bWJlciB7XG5cdFx0cmV0dXJuIHRoaXMuZGF0YS5yZWFkVUludDE2TEUoMzYpO1xuXHR9XG5cdHB1YmxpYyBleHRlcm5hbEF0dHJpYnV0ZXMoKTogbnVtYmVyIHtcblx0XHRyZXR1cm4gdGhpcy5kYXRhLnJlYWRVSW50MzJMRSgzOCk7XG5cdH1cblx0cHVibGljIGhlYWRlclJlbGF0aXZlT2Zmc2V0KCk6IG51bWJlciB7XG5cdFx0cmV0dXJuIHRoaXMuZGF0YS5yZWFkVUludDMyTEUoNDIpO1xuXHR9XG5cdHB1YmxpYyBwcm9kdWNlRmlsZW5hbWUoKTogc3RyaW5nIHtcblx0XHQvKlxuICAgICAgNC40LjE3LjEgY2xhaW1zOlxuICAgICAgKiBBbGwgc2xhc2hlcyBhcmUgZm9yd2FyZCAoJy8nKSBzbGFzaGVzLlxuICAgICAgKiBGaWxlbmFtZSBkb2Vzbid0IGJlZ2luIHdpdGggYSBzbGFzaC5cbiAgICAgICogTm8gZHJpdmUgbGV0dGVycyBvciBhbnkgbm9uc2Vuc2UgbGlrZSB0aGF0LlxuICAgICAgKiBJZiBmaWxlbmFtZSBpcyBtaXNzaW5nLCB0aGUgaW5wdXQgY2FtZSBmcm9tIHN0YW5kYXJkIGlucHV0LlxuXG4gICAgICBVbmZvcnR1bmF0ZWx5LCB0aGlzIGlzbid0IHRydWUgaW4gcHJhY3RpY2UuIFNvbWUgV2luZG93cyB6aXAgdXRpbGl0aWVzIHVzZVxuICAgICAgYSBiYWNrc2xhc2ggaGVyZSwgYnV0IHRoZSBjb3JyZWN0IFVuaXgtc3R5bGUgcGF0aCBpbiBmaWxlIGhlYWRlcnMuXG5cbiAgICAgIFRvIGF2b2lkIHNlZWtpbmcgYWxsIG92ZXIgdGhlIGZpbGUgdG8gcmVjb3ZlciB0aGUga25vd24tZ29vZCBmaWxlbmFtZXNcbiAgICAgIGZyb20gZmlsZSBoZWFkZXJzLCB3ZSBzaW1wbHkgY29udmVydCAnLycgdG8gJ1xcJyBoZXJlLlxuICAgICovXG5cdFx0Y29uc3QgZmlsZU5hbWU6IHN0cmluZyA9IHNhZmVUb1N0cmluZyh0aGlzLmRhdGEsIHRoaXMudXNlVVRGOCgpLCA0NiwgdGhpcy5maWxlTmFtZUxlbmd0aCgpKTtcblx0XHRyZXR1cm4gZmlsZU5hbWUucmVwbGFjZSgvXFxcXC9nLCAnLycpO1xuXHR9XG5cdHB1YmxpYyBmaWxlTmFtZSgpOiBzdHJpbmcge1xuXHRcdHJldHVybiB0aGlzLl9maWxlbmFtZTtcblx0fVxuXHRwdWJsaWMgcmF3RmlsZU5hbWUoKTogQnVmZmVyIHtcblx0XHRyZXR1cm4gdGhpcy5kYXRhLnNsaWNlKDQ2LCA0NiArIHRoaXMuZmlsZU5hbWVMZW5ndGgoKSk7XG5cdH1cblx0cHVibGljIGV4dHJhRmllbGQoKTogQnVmZmVyIHtcblx0XHRjb25zdCBzdGFydCA9IDQ0ICsgdGhpcy5maWxlTmFtZUxlbmd0aCgpO1xuXHRcdHJldHVybiB0aGlzLmRhdGEuc2xpY2Uoc3RhcnQsIHN0YXJ0ICsgdGhpcy5leHRyYUZpZWxkTGVuZ3RoKCkpO1xuXHR9XG5cdHB1YmxpYyBmaWxlQ29tbWVudCgpOiBzdHJpbmcge1xuXHRcdGNvbnN0IHN0YXJ0ID0gNDYgKyB0aGlzLmZpbGVOYW1lTGVuZ3RoKCkgKyB0aGlzLmV4dHJhRmllbGRMZW5ndGgoKTtcblx0XHRyZXR1cm4gc2FmZVRvU3RyaW5nKHRoaXMuZGF0YSwgdGhpcy51c2VVVEY4KCksIHN0YXJ0LCB0aGlzLmZpbGVDb21tZW50TGVuZ3RoKCkpO1xuXHR9XG5cdHB1YmxpYyByYXdGaWxlQ29tbWVudCgpOiBCdWZmZXIge1xuXHRcdGNvbnN0IHN0YXJ0ID0gNDYgKyB0aGlzLmZpbGVOYW1lTGVuZ3RoKCkgKyB0aGlzLmV4dHJhRmllbGRMZW5ndGgoKTtcblx0XHRyZXR1cm4gdGhpcy5kYXRhLnNsaWNlKHN0YXJ0LCBzdGFydCArIHRoaXMuZmlsZUNvbW1lbnRMZW5ndGgoKSk7XG5cdH1cblx0cHVibGljIHRvdGFsU2l6ZSgpOiBudW1iZXIge1xuXHRcdHJldHVybiA0NiArIHRoaXMuZmlsZU5hbWVMZW5ndGgoKSArIHRoaXMuZXh0cmFGaWVsZExlbmd0aCgpICsgdGhpcy5maWxlQ29tbWVudExlbmd0aCgpO1xuXHR9XG5cdHB1YmxpYyBpc0RpcmVjdG9yeSgpOiBib29sZWFuIHtcblx0XHQvLyBOT1RFOiBUaGlzIGFzc3VtZXMgdGhhdCB0aGUgemlwIGZpbGUgaW1wbGVtZW50YXRpb24gdXNlcyB0aGUgbG93ZXIgYnl0ZVxuXHRcdC8vICAgICAgIG9mIGV4dGVybmFsIGF0dHJpYnV0ZXMgZm9yIERPUyBhdHRyaWJ1dGVzIGZvclxuXHRcdC8vICAgICAgIGJhY2t3YXJkcy1jb21wYXRpYmlsaXR5LiBUaGlzIGlzIG5vdCBtYW5kYXRlZCwgYnV0IGFwcGVhcnMgdG8gYmVcblx0XHQvLyAgICAgICBjb21tb25wbGFjZS5cblx0XHQvLyAgICAgICBBY2NvcmRpbmcgdG8gdGhlIHNwZWMsIHRoZSBsYXlvdXQgb2YgZXh0ZXJuYWwgYXR0cmlidXRlcyBpc1xuXHRcdC8vICAgICAgIHBsYXRmb3JtLWRlcGVuZGVudC5cblx0XHQvLyAgICAgICBJZiB0aGF0IGZhaWxzLCB3ZSBhbHNvIGNoZWNrIGlmIHRoZSBuYW1lIG9mIHRoZSBmaWxlIGVuZHMgaW4gJy8nLFxuXHRcdC8vICAgICAgIHdoaWNoIGlzIHdoYXQgSmF2YSdzIFppcEZpbGUgaW1wbGVtZW50YXRpb24gZG9lcy5cblx0XHRjb25zdCBmaWxlTmFtZSA9IHRoaXMuZmlsZU5hbWUoKTtcblx0XHRyZXR1cm4gKHRoaXMuZXh0ZXJuYWxBdHRyaWJ1dGVzKCkgJiAweDEwID8gdHJ1ZSA6IGZhbHNlKSB8fCBmaWxlTmFtZS5jaGFyQXQoZmlsZU5hbWUubGVuZ3RoIC0gMSkgPT09ICcvJztcblx0fVxuXHRwdWJsaWMgaXNGaWxlKCk6IGJvb2xlYW4ge1xuXHRcdHJldHVybiAhdGhpcy5pc0RpcmVjdG9yeSgpO1xuXHR9XG5cdHB1YmxpYyB1c2VVVEY4KCk6IGJvb2xlYW4ge1xuXHRcdHJldHVybiAodGhpcy5mbGFnKCkgJiAweDgwMCkgPT09IDB4ODAwO1xuXHR9XG5cdHB1YmxpYyBpc0VuY3J5cHRlZCgpOiBib29sZWFuIHtcblx0XHRyZXR1cm4gKHRoaXMuZmxhZygpICYgMHgxKSA9PT0gMHgxO1xuXHR9XG5cdHB1YmxpYyBnZXRGaWxlRGF0YSgpOiBGaWxlRGF0YSB7XG5cdFx0Ly8gTmVlZCB0byBncmFiIHRoZSBoZWFkZXIgYmVmb3JlIHdlIGNhbiBmaWd1cmUgb3V0IHdoZXJlIHRoZSBhY3R1YWxcblx0XHQvLyBjb21wcmVzc2VkIGRhdGEgc3RhcnRzLlxuXHRcdGNvbnN0IHN0YXJ0ID0gdGhpcy5oZWFkZXJSZWxhdGl2ZU9mZnNldCgpO1xuXHRcdGNvbnN0IGhlYWRlciA9IG5ldyBGaWxlSGVhZGVyKHRoaXMuemlwRGF0YS5zbGljZShzdGFydCkpO1xuXHRcdHJldHVybiBuZXcgRmlsZURhdGEoaGVhZGVyLCB0aGlzLCB0aGlzLnppcERhdGEuc2xpY2Uoc3RhcnQgKyBoZWFkZXIudG90YWxTaXplKCkpKTtcblx0fVxuXHRwdWJsaWMgZ2V0RGF0YSgpOiBCdWZmZXIge1xuXHRcdHJldHVybiB0aGlzLmdldEZpbGVEYXRhKCkuZGVjb21wcmVzcygpO1xuXHR9XG5cdHB1YmxpYyBnZXRSYXdEYXRhKCk6IEJ1ZmZlciB7XG5cdFx0cmV0dXJuIHRoaXMuZ2V0RmlsZURhdGEoKS5nZXRSYXdEYXRhKCk7XG5cdH1cblx0cHVibGljIGdldFN0YXRzKCk6IFN0YXRzIHtcblx0XHRyZXR1cm4gbmV3IFN0YXRzKEZpbGVUeXBlLkZJTEUsIHRoaXMudW5jb21wcmVzc2VkU2l6ZSgpLCAweDE2ZCwgRGF0ZS5ub3coKSwgdGhpcy5sYXN0TW9kRmlsZVRpbWUoKS5nZXRUaW1lKCkpO1xuXHR9XG59XG5cbi8qKlxuICogNC4zLjE2OiBlbmQgb2YgY2VudHJhbCBkaXJlY3RvcnkgcmVjb3JkXG4gKiAgZW5kIG9mIGNlbnRyYWwgZGlyIHNpZ25hdHVyZSAgICA0IGJ5dGVzICAoMHgwNjA1NGI1MClcbiAqICBudW1iZXIgb2YgdGhpcyBkaXNrICAgICAgICAgICAgIDIgYnl0ZXNcbiAqICBudW1iZXIgb2YgdGhlIGRpc2sgd2l0aCB0aGVcbiAqICBzdGFydCBvZiB0aGUgY2VudHJhbCBkaXJlY3RvcnkgIDIgYnl0ZXNcbiAqICB0b3RhbCBudW1iZXIgb2YgZW50cmllcyBpbiB0aGVcbiAqICBjZW50cmFsIGRpcmVjdG9yeSBvbiB0aGlzIGRpc2sgIDIgYnl0ZXNcbiAqICB0b3RhbCBudW1iZXIgb2YgZW50cmllcyBpblxuICogIHRoZSBjZW50cmFsIGRpcmVjdG9yeSAgICAgICAgICAgMiBieXRlc1xuICogIHNpemUgb2YgdGhlIGNlbnRyYWwgZGlyZWN0b3J5ICAgNCBieXRlc1xuICogIG9mZnNldCBvZiBzdGFydCBvZiBjZW50cmFsXG4gKiAgZGlyZWN0b3J5IHdpdGggcmVzcGVjdCB0b1xuICogIHRoZSBzdGFydGluZyBkaXNrIG51bWJlciAgICAgICAgNCBieXRlc1xuICogIC5aSVAgZmlsZSBjb21tZW50IGxlbmd0aCAgICAgICAgMiBieXRlc1xuICogIC5aSVAgZmlsZSBjb21tZW50ICAgICAgICh2YXJpYWJsZSBzaXplKVxuICovXG5leHBvcnQgY2xhc3MgRW5kT2ZDZW50cmFsRGlyZWN0b3J5IHtcblx0Y29uc3RydWN0b3IocHJpdmF0ZSBkYXRhOiBCdWZmZXIpIHtcblx0XHRpZiAodGhpcy5kYXRhLnJlYWRVSW50MzJMRSgwKSAhPT0gMHgwNjA1NGI1MCkge1xuXHRcdFx0dGhyb3cgbmV3IEFwaUVycm9yKEVycm9yQ29kZS5FSU5WQUwsIGBJbnZhbGlkIFppcCBmaWxlOiBFbmQgb2YgY2VudHJhbCBkaXJlY3RvcnkgcmVjb3JkIGhhcyBpbnZhbGlkIHNpZ25hdHVyZTogJHt0aGlzLmRhdGEucmVhZFVJbnQzMkxFKDApfWApO1xuXHRcdH1cblx0fVxuXHRwdWJsaWMgZGlza051bWJlcigpOiBudW1iZXIge1xuXHRcdHJldHVybiB0aGlzLmRhdGEucmVhZFVJbnQxNkxFKDQpO1xuXHR9XG5cdHB1YmxpYyBjZERpc2tOdW1iZXIoKTogbnVtYmVyIHtcblx0XHRyZXR1cm4gdGhpcy5kYXRhLnJlYWRVSW50MTZMRSg2KTtcblx0fVxuXHRwdWJsaWMgY2REaXNrRW50cnlDb3VudCgpOiBudW1iZXIge1xuXHRcdHJldHVybiB0aGlzLmRhdGEucmVhZFVJbnQxNkxFKDgpO1xuXHR9XG5cdHB1YmxpYyBjZFRvdGFsRW50cnlDb3VudCgpOiBudW1iZXIge1xuXHRcdHJldHVybiB0aGlzLmRhdGEucmVhZFVJbnQxNkxFKDEwKTtcblx0fVxuXHRwdWJsaWMgY2RTaXplKCk6IG51bWJlciB7XG5cdFx0cmV0dXJuIHRoaXMuZGF0YS5yZWFkVUludDMyTEUoMTIpO1xuXHR9XG5cdHB1YmxpYyBjZE9mZnNldCgpOiBudW1iZXIge1xuXHRcdHJldHVybiB0aGlzLmRhdGEucmVhZFVJbnQzMkxFKDE2KTtcblx0fVxuXHRwdWJsaWMgY2RaaXBDb21tZW50TGVuZ3RoKCk6IG51bWJlciB7XG5cdFx0cmV0dXJuIHRoaXMuZGF0YS5yZWFkVUludDE2TEUoMjApO1xuXHR9XG5cdHB1YmxpYyBjZFppcENvbW1lbnQoKTogc3RyaW5nIHtcblx0XHQvLyBBc3N1bWluZyBVVEYtOC4gVGhlIHNwZWNpZmljYXRpb24gZG9lc24ndCBzcGVjaWZ5LlxuXHRcdHJldHVybiBzYWZlVG9TdHJpbmcodGhpcy5kYXRhLCB0cnVlLCAyMiwgdGhpcy5jZFppcENvbW1lbnRMZW5ndGgoKSk7XG5cdH1cblx0cHVibGljIHJhd0NkWmlwQ29tbWVudCgpOiBCdWZmZXIge1xuXHRcdHJldHVybiB0aGlzLmRhdGEuc2xpY2UoMjIsIDIyICsgdGhpcy5jZFppcENvbW1lbnRMZW5ndGgoKSk7XG5cdH1cbn1cblxuLyoqXG4gKiBDb250YWlucyB0aGUgdGFibGUgb2YgY29udGVudHMgb2YgYSBaaXAgZmlsZS5cbiAqL1xuZXhwb3J0IGNsYXNzIFppcFRPQyB7XG5cdGNvbnN0cnVjdG9yKHB1YmxpYyBpbmRleDogRmlsZUluZGV4PENlbnRyYWxEaXJlY3Rvcnk+LCBwdWJsaWMgZGlyZWN0b3J5RW50cmllczogQ2VudHJhbERpcmVjdG9yeVtdLCBwdWJsaWMgZW9jZDogRW5kT2ZDZW50cmFsRGlyZWN0b3J5LCBwdWJsaWMgZGF0YTogQnVmZmVyKSB7fVxufVxuXG4vKipcbiAqIENvbmZpZ3VyYXRpb24gb3B0aW9ucyBmb3IgYSBaaXBGUyBmaWxlIHN5c3RlbS5cbiAqL1xuZXhwb3J0IGludGVyZmFjZSBaaXBGU09wdGlvbnMge1xuXHQvLyBUaGUgemlwIGZpbGUgYXMgYSBiaW5hcnkgYnVmZmVyLlxuXHR6aXBEYXRhOiBCdWZmZXI7XG5cdC8vIFRoZSBuYW1lIG9mIHRoZSB6aXAgZmlsZSAob3B0aW9uYWwpLlxuXHRuYW1lPzogc3RyaW5nO1xufVxuXG4vKipcbiAqIFppcCBmaWxlLWJhY2tlZCBmaWxlc3lzdGVtXG4gKiBJbXBsZW1lbnRlZCBhY2NvcmRpbmcgdG8gdGhlIHN0YW5kYXJkOlxuICogaHR0cDovL3d3dy5wa3dhcmUuY29tL2RvY3VtZW50cy9jYXNlc3R1ZGllcy9BUFBOT1RFLlRYVFxuICpcbiAqIFdoaWxlIHRoZXJlIGFyZSBhIGZldyB6aXAgbGlicmFyaWVzIGZvciBKYXZhU2NyaXB0IChlLmcuIEpTWmlwIGFuZCB6aXAuanMpLFxuICogdGhleSBhcmUgbm90IGEgZ29vZCBtYXRjaCBmb3IgQnJvd3NlckZTLiBJbiBwYXJ0aWN1bGFyLCB0aGVzZSBsaWJyYXJpZXNcbiAqIHBlcmZvcm0gYSBsb3Qgb2YgdW5uZWVkZWQgZGF0YSBjb3B5aW5nLCBhbmQgZWFnZXJseSBkZWNvbXByZXNzIGV2ZXJ5IGZpbGVcbiAqIGluIHRoZSB6aXAgZmlsZSB1cG9uIGxvYWRpbmcgdG8gY2hlY2sgdGhlIENSQzMyLiBUaGV5IGFsc28gZWFnZXJseSBkZWNvZGVcbiAqIHN0cmluZ3MuIEZ1cnRoZXJtb3JlLCB0aGVzZSBsaWJyYXJpZXMgZHVwbGljYXRlIGZ1bmN0aW9uYWxpdHkgYWxyZWFkeSBwcmVzZW50XG4gKiBpbiBCcm93c2VyRlMgKGUuZy4gVVRGLTggZGVjb2RpbmcgYW5kIGJpbmFyeSBkYXRhIG1hbmlwdWxhdGlvbikuXG4gKlxuICogVGhpcyBmaWxlc3lzdGVtIHRha2VzIGFkdmFudGFnZSBvZiBCcm93c2VyRlMncyBCdWZmZXIgaW1wbGVtZW50YXRpb24sIHdoaWNoXG4gKiBlZmZpY2llbnRseSByZXByZXNlbnRzIHRoZSB6aXAgZmlsZSBpbiBtZW1vcnkgKGluIGJvdGggQXJyYXlCdWZmZXItZW5hYmxlZFxuICogYnJvd3NlcnMgKmFuZCogbm9uLUFycmF5QnVmZmVyIGJyb3dzZXJzKSwgYW5kIHdoaWNoIGNhbiBuZWF0bHkgYmUgJ3NsaWNlZCdcbiAqIHdpdGhvdXQgY29weWluZyBkYXRhLiBFYWNoIHN0cnVjdCBkZWZpbmVkIGluIHRoZSBzdGFuZGFyZCBpcyByZXByZXNlbnRlZCB3aXRoXG4gKiBhIGJ1ZmZlciBzbGljZSBwb2ludGluZyB0byBhbiBvZmZzZXQgaW4gdGhlIHppcCBmaWxlLCBhbmQgaGFzIGdldHRlcnMgZm9yXG4gKiBlYWNoIGZpZWxkLiBBcyB3ZSBhbnRpY2lwYXRlIHRoYXQgdGhpcyBkYXRhIHdpbGwgbm90IGJlIHJlYWQgb2Z0ZW4sIHdlIGNob29zZVxuICogbm90IHRvIHN0b3JlIGVhY2ggc3RydWN0IGZpZWxkIGluIHRoZSBKYXZhU2NyaXB0IG9iamVjdDsgaW5zdGVhZCwgdG8gcmVkdWNlXG4gKiBtZW1vcnkgY29uc3VtcHRpb24sIHdlIHJldHJpZXZlIGl0IGRpcmVjdGx5IGZyb20gdGhlIGJpbmFyeSBkYXRhIGVhY2ggdGltZSBpdFxuICogaXMgcmVxdWVzdGVkLlxuICpcbiAqIFdoZW4gdGhlIGZpbGVzeXN0ZW0gaXMgaW5zdGFudGlhdGVkLCB3ZSBkZXRlcm1pbmUgdGhlIGRpcmVjdG9yeSBzdHJ1Y3R1cmVcbiAqIG9mIHRoZSB6aXAgZmlsZSBhcyBxdWlja2x5IGFzIHBvc3NpYmxlLiBXZSBsYXppbHkgZGVjb21wcmVzcyBhbmQgY2hlY2sgdGhlXG4gKiBDUkMzMiBvZiBmaWxlcy4gV2UgZG8gbm90IGNhY2hlIGRlY29tcHJlc3NlZCBmaWxlczsgaWYgdGhpcyBpcyBhIGRlc2lyZWRcbiAqIGZlYXR1cmUsIGl0IGlzIGJlc3QgaW1wbGVtZW50ZWQgYXMgYSBnZW5lcmljIGZpbGUgc3lzdGVtIHdyYXBwZXIgdGhhdCBjYW5cbiAqIGNhY2hlIGRhdGEgZnJvbSBhcmJpdHJhcnkgZmlsZSBzeXN0ZW1zLlxuICpcbiAqIEZvciBpbmZsYXRpb24sIHdlIHVzZSBgcGFrb2AncyBpbXBsZW1lbnRhdGlvbjpcbiAqIGh0dHBzOi8vZ2l0aHViLmNvbS9ub2RlY2EvcGFrb1xuICpcbiAqIEN1cnJlbnQgbGltaXRhdGlvbnM6XG4gKiAqIE5vIGVuY3J5cHRpb24uXG4gKiAqIE5vIFpJUDY0IHN1cHBvcnQuXG4gKiAqIFJlYWQtb25seS5cbiAqICAgV3JpdGUgc3VwcG9ydCB3b3VsZCByZXF1aXJlIHRoYXQgd2U6XG4gKiAgIC0gS2VlcCB0cmFjayBvZiBjaGFuZ2VkL25ldyBmaWxlcy5cbiAqICAgLSBDb21wcmVzcyBjaGFuZ2VkIGZpbGVzLCBhbmQgZ2VuZXJhdGUgYXBwcm9wcmlhdGUgbWV0YWRhdGEgZm9yIGVhY2guXG4gKiAgIC0gVXBkYXRlIGZpbGUgb2Zmc2V0cyBmb3Igb3RoZXIgZmlsZXMgaW4gdGhlIHppcCBmaWxlLlxuICogICAtIFN0cmVhbSBpdCBvdXQgdG8gYSBsb2NhdGlvbi5cbiAqICAgVGhpcyBpc24ndCB0aGF0IGJhZCwgc28gd2UgbWlnaHQgZG8gdGhpcyBhdCBhIGxhdGVyIGRhdGUuXG4gKi9cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFppcEZTIGV4dGVuZHMgU3luY2hyb25vdXNGaWxlU3lzdGVtIGltcGxlbWVudHMgRmlsZVN5c3RlbSB7XG5cdHB1YmxpYyBzdGF0aWMgcmVhZG9ubHkgTmFtZSA9ICdaaXBGUyc7XG5cblx0cHVibGljIHN0YXRpYyByZWFkb25seSBPcHRpb25zOiBGaWxlU3lzdGVtT3B0aW9ucyA9IHtcblx0XHR6aXBEYXRhOiB7XG5cdFx0XHR0eXBlOiAnb2JqZWN0Jyxcblx0XHRcdGRlc2NyaXB0aW9uOiAnVGhlIHppcCBmaWxlIGFzIGEgQnVmZmVyIG9iamVjdC4nLFxuXHRcdFx0dmFsaWRhdG9yOiBidWZmZXJWYWxpZGF0b3IsXG5cdFx0fSxcblx0XHRuYW1lOiB7XG5cdFx0XHR0eXBlOiAnc3RyaW5nJyxcblx0XHRcdG9wdGlvbmFsOiB0cnVlLFxuXHRcdFx0ZGVzY3JpcHRpb246ICdUaGUgbmFtZSBvZiB0aGUgemlwIGZpbGUgKG9wdGlvbmFsKS4nLFxuXHRcdH0sXG5cdH07XG5cblx0cHVibGljIHN0YXRpYyByZWFkb25seSBDb21wcmVzc2lvbk1ldGhvZCA9IENvbXByZXNzaW9uTWV0aG9kO1xuXG5cdC8qKlxuXHQgKiBDb25zdHJ1Y3RzIGEgWmlwRlMgaW5zdGFuY2Ugd2l0aCB0aGUgZ2l2ZW4gb3B0aW9ucy5cblx0ICovXG5cdHB1YmxpYyBzdGF0aWMgQ3JlYXRlKG9wdHM6IFppcEZTT3B0aW9ucywgY2I6IEJGU0NhbGxiYWNrPFppcEZTPik6IHZvaWQge1xuXHRcdHRyeSB7XG5cdFx0XHRaaXBGUy5fY29tcHV0ZUluZGV4KG9wdHMuemlwRGF0YSwgKGUsIHppcFRPQz8pID0+IHtcblx0XHRcdFx0aWYgKHppcFRPQykge1xuXHRcdFx0XHRcdGNvbnN0IGZzID0gbmV3IFppcEZTKHppcFRPQywgb3B0cy5uYW1lKTtcblx0XHRcdFx0XHRjYihudWxsLCBmcyk7XG5cdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0Y2IoZSk7XG5cdFx0XHRcdH1cblx0XHRcdH0pO1xuXHRcdH0gY2F0Y2ggKGUpIHtcblx0XHRcdGNiKGUpO1xuXHRcdH1cblx0fVxuXG5cdHB1YmxpYyBzdGF0aWMgQ3JlYXRlQXN5bmMob3B0czogWmlwRlNPcHRpb25zKTogUHJvbWlzZTxaaXBGUz4ge1xuXHRcdHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG5cdFx0XHR0aGlzLkNyZWF0ZShvcHRzLCAoZXJyb3IsIGZzKSA9PiB7XG5cdFx0XHRcdGlmIChlcnJvciB8fCAhZnMpIHtcblx0XHRcdFx0XHRyZWplY3QoZXJyb3IpO1xuXHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdHJlc29sdmUoZnMpO1xuXHRcdFx0XHR9XG5cdFx0XHR9KTtcblx0XHR9KTtcblx0fVxuXG5cdHB1YmxpYyBzdGF0aWMgaXNBdmFpbGFibGUoKTogYm9vbGVhbiB7XG5cdFx0cmV0dXJuIHRydWU7XG5cdH1cblxuXHRwdWJsaWMgc3RhdGljIFJlZ2lzdGVyRGVjb21wcmVzc2lvbk1ldGhvZChtOiBDb21wcmVzc2lvbk1ldGhvZCwgZmNuOiAoZGF0YTogQnVmZmVyLCBjb21wcmVzc2VkU2l6ZTogbnVtYmVyLCB1bmNvbXByZXNzZWRTaXplOiBudW1iZXIsIGZsYWdzOiBudW1iZXIpID0+IEJ1ZmZlcik6IHZvaWQge1xuXHRcdGRlY29tcHJlc3Npb25NZXRob2RzW21dID0gZmNuO1xuXHR9XG5cblx0LyoqXG5cdCAqIExvY2F0ZXMgdGhlIGVuZCBvZiBjZW50cmFsIGRpcmVjdG9yeSByZWNvcmQgYXQgdGhlIGVuZCBvZiB0aGUgZmlsZS5cblx0ICogVGhyb3dzIGFuIGV4Y2VwdGlvbiBpZiBpdCBjYW5ub3QgYmUgZm91bmQuXG5cdCAqL1xuXHRwcml2YXRlIHN0YXRpYyBfZ2V0RU9DRChkYXRhOiBCdWZmZXIpOiBFbmRPZkNlbnRyYWxEaXJlY3Rvcnkge1xuXHRcdC8vIFVuZm9ydHVuYXRlbHksIHRoZSBjb21tZW50IGlzIHZhcmlhYmxlIHNpemUgYW5kIHVwIHRvIDY0SyBpbiBzaXplLlxuXHRcdC8vIFdlIGFzc3VtZSB0aGF0IHRoZSBtYWdpYyBzaWduYXR1cmUgZG9lcyBub3QgYXBwZWFyIGluIHRoZSBjb21tZW50LCBhbmRcblx0XHQvLyBpbiB0aGUgYnl0ZXMgYmV0d2VlbiB0aGUgY29tbWVudCBhbmQgdGhlIHNpZ25hdHVyZS4gT3RoZXIgWklQXG5cdFx0Ly8gaW1wbGVtZW50YXRpb25zIG1ha2UgdGhpcyBzYW1lIGFzc3VtcHRpb24sIHNpbmNlIHRoZSBhbHRlcm5hdGl2ZSBpcyB0b1xuXHRcdC8vIHJlYWQgdGhyZWFkIGV2ZXJ5IGVudHJ5IGluIHRoZSBmaWxlIHRvIGdldCB0byBpdC4gOihcblx0XHQvLyBUaGVzZSBhcmUgKm5lZ2F0aXZlKiBvZmZzZXRzIGZyb20gdGhlIGVuZCBvZiB0aGUgZmlsZS5cblx0XHRjb25zdCBzdGFydE9mZnNldCA9IDIyO1xuXHRcdGNvbnN0IGVuZE9mZnNldCA9IE1hdGgubWluKHN0YXJ0T2Zmc2V0ICsgMHhmZmZmLCBkYXRhLmxlbmd0aCAtIDEpO1xuXHRcdC8vIFRoZXJlJ3Mgbm90IGV2ZW4gYSBieXRlIGFsaWdubWVudCBndWFyYW50ZWUgb24gdGhlIGNvbW1lbnQgc28gd2UgbmVlZCB0b1xuXHRcdC8vIHNlYXJjaCBieXRlIGJ5IGJ5dGUuICpncnVtYmxlIGdydW1ibGUqXG5cdFx0Zm9yIChsZXQgaSA9IHN0YXJ0T2Zmc2V0OyBpIDwgZW5kT2Zmc2V0OyBpKyspIHtcblx0XHRcdC8vIE1hZ2ljIG51bWJlcjogRU9DRCBTaWduYXR1cmVcblx0XHRcdGlmIChkYXRhLnJlYWRVSW50MzJMRShkYXRhLmxlbmd0aCAtIGkpID09PSAweDA2MDU0YjUwKSB7XG5cdFx0XHRcdHJldHVybiBuZXcgRW5kT2ZDZW50cmFsRGlyZWN0b3J5KGRhdGEuc2xpY2UoZGF0YS5sZW5ndGggLSBpKSk7XG5cdFx0XHR9XG5cdFx0fVxuXHRcdHRocm93IG5ldyBBcGlFcnJvcihFcnJvckNvZGUuRUlOVkFMLCAnSW52YWxpZCBaSVAgZmlsZTogQ291bGQgbm90IGxvY2F0ZSBFbmQgb2YgQ2VudHJhbCBEaXJlY3Rvcnkgc2lnbmF0dXJlLicpO1xuXHR9XG5cblx0cHJpdmF0ZSBzdGF0aWMgX2FkZFRvSW5kZXgoY2Q6IENlbnRyYWxEaXJlY3RvcnksIGluZGV4OiBGaWxlSW5kZXg8Q2VudHJhbERpcmVjdG9yeT4pIHtcblx0XHQvLyBQYXRocyBtdXN0IGJlIGFic29sdXRlLCB5ZXQgemlwIGZpbGUgcGF0aHMgYXJlIGFsd2F5cyByZWxhdGl2ZSB0byB0aGVcblx0XHQvLyB6aXAgcm9vdC4gU28gd2UgYXBwZW5kICcvJyBhbmQgY2FsbCBpdCBhIGRheS5cblx0XHRsZXQgZmlsZW5hbWUgPSBjZC5maWxlTmFtZSgpO1xuXHRcdGlmIChmaWxlbmFtZS5jaGFyQXQoMCkgPT09ICcvJykge1xuXHRcdFx0dGhyb3cgbmV3IEFwaUVycm9yKEVycm9yQ29kZS5FUEVSTSwgYFVuZXhwZWN0ZWRseSBlbmNvdW50ZXJlZCBhbiBhYnNvbHV0ZSBwYXRoIGluIGEgemlwIGZpbGUuIFBsZWFzZSBmaWxlIGEgYnVnLmApO1xuXHRcdH1cblx0XHQvLyBYWFg6IEZvciB0aGUgZmlsZSBpbmRleCwgc3RyaXAgdGhlIHRyYWlsaW5nICcvJy5cblx0XHRpZiAoZmlsZW5hbWUuY2hhckF0KGZpbGVuYW1lLmxlbmd0aCAtIDEpID09PSAnLycpIHtcblx0XHRcdGZpbGVuYW1lID0gZmlsZW5hbWUuc3Vic3RyKDAsIGZpbGVuYW1lLmxlbmd0aCAtIDEpO1xuXHRcdH1cblxuXHRcdGlmIChjZC5pc0RpcmVjdG9yeSgpKSB7XG5cdFx0XHRpbmRleC5hZGRQYXRoRmFzdCgnLycgKyBmaWxlbmFtZSwgbmV3IERpcklub2RlPENlbnRyYWxEaXJlY3Rvcnk+KGNkKSk7XG5cdFx0fSBlbHNlIHtcblx0XHRcdGluZGV4LmFkZFBhdGhGYXN0KCcvJyArIGZpbGVuYW1lLCBuZXcgRmlsZUlub2RlPENlbnRyYWxEaXJlY3Rvcnk+KGNkKSk7XG5cdFx0fVxuXHR9XG5cblx0cHJpdmF0ZSBzdGF0aWMgX2NvbXB1dGVJbmRleChkYXRhOiBCdWZmZXIsIGNiOiBCRlNDYWxsYmFjazxaaXBUT0M+KSB7XG5cdFx0dHJ5IHtcblx0XHRcdGNvbnN0IGluZGV4OiBGaWxlSW5kZXg8Q2VudHJhbERpcmVjdG9yeT4gPSBuZXcgRmlsZUluZGV4PENlbnRyYWxEaXJlY3Rvcnk+KCk7XG5cdFx0XHRjb25zdCBlb2NkOiBFbmRPZkNlbnRyYWxEaXJlY3RvcnkgPSBaaXBGUy5fZ2V0RU9DRChkYXRhKTtcblx0XHRcdGlmIChlb2NkLmRpc2tOdW1iZXIoKSAhPT0gZW9jZC5jZERpc2tOdW1iZXIoKSkge1xuXHRcdFx0XHRyZXR1cm4gY2IobmV3IEFwaUVycm9yKEVycm9yQ29kZS5FSU5WQUwsICdaaXBGUyBkb2VzIG5vdCBzdXBwb3J0IHNwYW5uZWQgemlwIGZpbGVzLicpKTtcblx0XHRcdH1cblxuXHRcdFx0Y29uc3QgY2RQdHIgPSBlb2NkLmNkT2Zmc2V0KCk7XG5cdFx0XHRpZiAoY2RQdHIgPT09IDB4ZmZmZmZmZmYpIHtcblx0XHRcdFx0cmV0dXJuIGNiKG5ldyBBcGlFcnJvcihFcnJvckNvZGUuRUlOVkFMLCAnWmlwRlMgZG9lcyBub3Qgc3VwcG9ydCBaaXA2NC4nKSk7XG5cdFx0XHR9XG5cdFx0XHRjb25zdCBjZEVuZCA9IGNkUHRyICsgZW9jZC5jZFNpemUoKTtcblx0XHRcdFppcEZTLl9jb21wdXRlSW5kZXhSZXNwb25zaXZlKGRhdGEsIGluZGV4LCBjZFB0ciwgY2RFbmQsIGNiLCBbXSwgZW9jZCk7XG5cdFx0fSBjYXRjaCAoZSkge1xuXHRcdFx0Y2IoZSk7XG5cdFx0fVxuXHR9XG5cblx0cHJpdmF0ZSBzdGF0aWMgX2NvbXB1dGVJbmRleFJlc3BvbnNpdmVUcmFtcG9saW5lKFxuXHRcdGRhdGE6IEJ1ZmZlcixcblx0XHRpbmRleDogRmlsZUluZGV4PENlbnRyYWxEaXJlY3Rvcnk+LFxuXHRcdGNkUHRyOiBudW1iZXIsXG5cdFx0Y2RFbmQ6IG51bWJlcixcblx0XHRjYjogQkZTQ2FsbGJhY2s8WmlwVE9DPixcblx0XHRjZEVudHJpZXM6IENlbnRyYWxEaXJlY3RvcnlbXSxcblx0XHRlb2NkOiBFbmRPZkNlbnRyYWxEaXJlY3Rvcnlcblx0KSB7XG5cdFx0dHJ5IHtcblx0XHRcdFppcEZTLl9jb21wdXRlSW5kZXhSZXNwb25zaXZlKGRhdGEsIGluZGV4LCBjZFB0ciwgY2RFbmQsIGNiLCBjZEVudHJpZXMsIGVvY2QpO1xuXHRcdH0gY2F0Y2ggKGUpIHtcblx0XHRcdGNiKGUpO1xuXHRcdH1cblx0fVxuXG5cdHByaXZhdGUgc3RhdGljIF9jb21wdXRlSW5kZXhSZXNwb25zaXZlKFxuXHRcdGRhdGE6IEJ1ZmZlcixcblx0XHRpbmRleDogRmlsZUluZGV4PENlbnRyYWxEaXJlY3Rvcnk+LFxuXHRcdGNkUHRyOiBudW1iZXIsXG5cdFx0Y2RFbmQ6IG51bWJlcixcblx0XHRjYjogQkZTQ2FsbGJhY2s8WmlwVE9DPixcblx0XHRjZEVudHJpZXM6IENlbnRyYWxEaXJlY3RvcnlbXSxcblx0XHRlb2NkOiBFbmRPZkNlbnRyYWxEaXJlY3Rvcnlcblx0KSB7XG5cdFx0aWYgKGNkUHRyIDwgY2RFbmQpIHtcblx0XHRcdGxldCBjb3VudCA9IDA7XG5cdFx0XHR3aGlsZSAoY291bnQrKyA8IDIwMCAmJiBjZFB0ciA8IGNkRW5kKSB7XG5cdFx0XHRcdGNvbnN0IGNkOiBDZW50cmFsRGlyZWN0b3J5ID0gbmV3IENlbnRyYWxEaXJlY3RvcnkoZGF0YSwgZGF0YS5zbGljZShjZFB0cikpO1xuXHRcdFx0XHRaaXBGUy5fYWRkVG9JbmRleChjZCwgaW5kZXgpO1xuXHRcdFx0XHRjZFB0ciArPSBjZC50b3RhbFNpemUoKTtcblx0XHRcdFx0Y2RFbnRyaWVzLnB1c2goY2QpO1xuXHRcdFx0fVxuXHRcdFx0c2V0SW1tZWRpYXRlKCgpID0+IHtcblx0XHRcdFx0WmlwRlMuX2NvbXB1dGVJbmRleFJlc3BvbnNpdmVUcmFtcG9saW5lKGRhdGEsIGluZGV4LCBjZFB0ciwgY2RFbmQsIGNiLCBjZEVudHJpZXMsIGVvY2QpO1xuXHRcdFx0fSk7XG5cdFx0fSBlbHNlIHtcblx0XHRcdGNiKG51bGwsIG5ldyBaaXBUT0MoaW5kZXgsIGNkRW50cmllcywgZW9jZCwgZGF0YSkpO1xuXHRcdH1cblx0fVxuXG5cdHByaXZhdGUgX2luZGV4OiBGaWxlSW5kZXg8Q2VudHJhbERpcmVjdG9yeT4gPSBuZXcgRmlsZUluZGV4PENlbnRyYWxEaXJlY3Rvcnk+KCk7XG5cdHByaXZhdGUgX2RpcmVjdG9yeUVudHJpZXM6IENlbnRyYWxEaXJlY3RvcnlbXSA9IFtdO1xuXHRwcml2YXRlIF9lb2NkOiBFbmRPZkNlbnRyYWxEaXJlY3RvcnkgfCBudWxsID0gbnVsbDtcblx0cHJpdmF0ZSBkYXRhOiBCdWZmZXI7XG5cblx0cHJpdmF0ZSBjb25zdHJ1Y3RvcihpbnB1dDogWmlwVE9DLCBwcml2YXRlIG5hbWU6IHN0cmluZyA9ICcnKSB7XG5cdFx0c3VwZXIoKTtcblx0XHR0aGlzLl9pbmRleCA9IGlucHV0LmluZGV4O1xuXHRcdHRoaXMuX2RpcmVjdG9yeUVudHJpZXMgPSBpbnB1dC5kaXJlY3RvcnlFbnRyaWVzO1xuXHRcdHRoaXMuX2VvY2QgPSBpbnB1dC5lb2NkO1xuXHRcdHRoaXMuZGF0YSA9IGlucHV0LmRhdGE7XG5cdH1cblxuXHRwdWJsaWMgZ2V0TmFtZSgpOiBzdHJpbmcge1xuXHRcdHJldHVybiBaaXBGUy5OYW1lICsgKHRoaXMubmFtZSAhPT0gJycgPyBgICR7dGhpcy5uYW1lfWAgOiAnJyk7XG5cdH1cblxuXHQvKipcblx0ICogR2V0IHRoZSBDZW50cmFsRGlyZWN0b3J5IG9iamVjdCBmb3IgdGhlIGdpdmVuIHBhdGguXG5cdCAqL1xuXHRwdWJsaWMgZ2V0Q2VudHJhbERpcmVjdG9yeUVudHJ5KHBhdGg6IHN0cmluZyk6IENlbnRyYWxEaXJlY3Rvcnkge1xuXHRcdGNvbnN0IGlub2RlID0gdGhpcy5faW5kZXguZ2V0SW5vZGUocGF0aCk7XG5cdFx0aWYgKGlub2RlID09PSBudWxsKSB7XG5cdFx0XHR0aHJvdyBBcGlFcnJvci5FTk9FTlQocGF0aCk7XG5cdFx0fVxuXHRcdGlmIChpc0ZpbGVJbm9kZTxDZW50cmFsRGlyZWN0b3J5Pihpbm9kZSkpIHtcblx0XHRcdHJldHVybiBpbm9kZS5nZXREYXRhKCk7XG5cdFx0fSBlbHNlIGlmIChpc0Rpcklub2RlPENlbnRyYWxEaXJlY3Rvcnk+KGlub2RlKSkge1xuXHRcdFx0cmV0dXJuIGlub2RlLmdldERhdGEoKSE7XG5cdFx0fSBlbHNlIHtcblx0XHRcdC8vIFNob3VsZCBuZXZlciBvY2N1ci5cblx0XHRcdHRocm93IEFwaUVycm9yLkVQRVJNKGBJbnZhbGlkIGlub2RlOiAke2lub2RlfWApO1xuXHRcdH1cblx0fVxuXG5cdHB1YmxpYyBnZXRDZW50cmFsRGlyZWN0b3J5RW50cnlBdChpbmRleDogbnVtYmVyKTogQ2VudHJhbERpcmVjdG9yeSB7XG5cdFx0Y29uc3QgZGlyRW50cnkgPSB0aGlzLl9kaXJlY3RvcnlFbnRyaWVzW2luZGV4XTtcblx0XHRpZiAoIWRpckVudHJ5KSB7XG5cdFx0XHR0aHJvdyBuZXcgUmFuZ2VFcnJvcihgSW52YWxpZCBkaXJlY3RvcnkgaW5kZXg6ICR7aW5kZXh9LmApO1xuXHRcdH1cblx0XHRyZXR1cm4gZGlyRW50cnk7XG5cdH1cblxuXHRwdWJsaWMgZ2V0TnVtYmVyT2ZDZW50cmFsRGlyZWN0b3J5RW50cmllcygpOiBudW1iZXIge1xuXHRcdHJldHVybiB0aGlzLl9kaXJlY3RvcnlFbnRyaWVzLmxlbmd0aDtcblx0fVxuXG5cdHB1YmxpYyBnZXRFbmRPZkNlbnRyYWxEaXJlY3RvcnkoKTogRW5kT2ZDZW50cmFsRGlyZWN0b3J5IHwgbnVsbCB7XG5cdFx0cmV0dXJuIHRoaXMuX2VvY2Q7XG5cdH1cblxuXHRwdWJsaWMgZGlza1NwYWNlKHBhdGg6IHN0cmluZywgY2I6ICh0b3RhbDogbnVtYmVyLCBmcmVlOiBudW1iZXIpID0+IHZvaWQpOiB2b2lkIHtcblx0XHQvLyBSZWFkLW9ubHkgZmlsZSBzeXN0ZW0uXG5cdFx0Y2IodGhpcy5kYXRhLmxlbmd0aCwgMCk7XG5cdH1cblxuXHRwdWJsaWMgaXNSZWFkT25seSgpOiBib29sZWFuIHtcblx0XHRyZXR1cm4gdHJ1ZTtcblx0fVxuXG5cdHB1YmxpYyBzdXBwb3J0c0xpbmtzKCk6IGJvb2xlYW4ge1xuXHRcdHJldHVybiBmYWxzZTtcblx0fVxuXG5cdHB1YmxpYyBzdXBwb3J0c1Byb3BzKCk6IGJvb2xlYW4ge1xuXHRcdHJldHVybiBmYWxzZTtcblx0fVxuXG5cdHB1YmxpYyBzdXBwb3J0c1N5bmNoKCk6IGJvb2xlYW4ge1xuXHRcdHJldHVybiB0cnVlO1xuXHR9XG5cblx0cHVibGljIHN0YXRTeW5jKHBhdGg6IHN0cmluZywgaXNMc3RhdDogYm9vbGVhbik6IFN0YXRzIHtcblx0XHRjb25zdCBpbm9kZSA9IHRoaXMuX2luZGV4LmdldElub2RlKHBhdGgpO1xuXHRcdGlmIChpbm9kZSA9PT0gbnVsbCkge1xuXHRcdFx0dGhyb3cgQXBpRXJyb3IuRU5PRU5UKHBhdGgpO1xuXHRcdH1cblx0XHRsZXQgc3RhdHM6IFN0YXRzO1xuXHRcdGlmIChpc0ZpbGVJbm9kZTxDZW50cmFsRGlyZWN0b3J5Pihpbm9kZSkpIHtcblx0XHRcdHN0YXRzID0gaW5vZGUuZ2V0RGF0YSgpLmdldFN0YXRzKCk7XG5cdFx0fSBlbHNlIGlmIChpc0Rpcklub2RlKGlub2RlKSkge1xuXHRcdFx0c3RhdHMgPSBpbm9kZS5nZXRTdGF0cygpO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHR0aHJvdyBuZXcgQXBpRXJyb3IoRXJyb3JDb2RlLkVJTlZBTCwgJ0ludmFsaWQgaW5vZGUuJyk7XG5cdFx0fVxuXHRcdHJldHVybiBzdGF0cztcblx0fVxuXG5cdHB1YmxpYyBvcGVuU3luYyhwYXRoOiBzdHJpbmcsIGZsYWdzOiBGaWxlRmxhZywgbW9kZTogbnVtYmVyKTogRmlsZSB7XG5cdFx0Ly8gSU5WQVJJQU5UOiBDYW5ub3Qgd3JpdGUgdG8gUk8gZmlsZSBzeXN0ZW1zLlxuXHRcdGlmIChmbGFncy5pc1dyaXRlYWJsZSgpKSB7XG5cdFx0XHR0aHJvdyBuZXcgQXBpRXJyb3IoRXJyb3JDb2RlLkVQRVJNLCBwYXRoKTtcblx0XHR9XG5cdFx0Ly8gQ2hlY2sgaWYgdGhlIHBhdGggZXhpc3RzLCBhbmQgaXMgYSBmaWxlLlxuXHRcdGNvbnN0IGlub2RlID0gdGhpcy5faW5kZXguZ2V0SW5vZGUocGF0aCk7XG5cdFx0aWYgKCFpbm9kZSkge1xuXHRcdFx0dGhyb3cgQXBpRXJyb3IuRU5PRU5UKHBhdGgpO1xuXHRcdH0gZWxzZSBpZiAoaXNGaWxlSW5vZGU8Q2VudHJhbERpcmVjdG9yeT4oaW5vZGUpIHx8IGlzRGlySW5vZGU8Q2VudHJhbERpcmVjdG9yeT4oaW5vZGUpKSB7XG5cdFx0XHRjb25zdCBzdGF0cyA9ICFpc0Rpcklub2RlPENlbnRyYWxEaXJlY3Rvcnk+KGlub2RlKSA/IGlub2RlLmdldERhdGEoKS5nZXRTdGF0cygpIDogaW5vZGUuZ2V0U3RhdHMoKTtcblx0XHRcdGNvbnN0IGRhdGEgPSAhaXNEaXJJbm9kZTxDZW50cmFsRGlyZWN0b3J5Pihpbm9kZSkgPyBpbm9kZS5nZXREYXRhKCkuZ2V0RGF0YSgpIDogaW5vZGUuZ2V0U3RhdHMoKS5maWxlRGF0YTtcblx0XHRcdHN3aXRjaCAoZmxhZ3MucGF0aEV4aXN0c0FjdGlvbigpKSB7XG5cdFx0XHRcdGNhc2UgQWN0aW9uVHlwZS5USFJPV19FWENFUFRJT046XG5cdFx0XHRcdGNhc2UgQWN0aW9uVHlwZS5UUlVOQ0FURV9GSUxFOlxuXHRcdFx0XHRcdHRocm93IEFwaUVycm9yLkVFWElTVChwYXRoKTtcblx0XHRcdFx0Y2FzZSBBY3Rpb25UeXBlLk5PUDpcblx0XHRcdFx0XHRyZXR1cm4gbmV3IE5vU3luY0ZpbGUodGhpcywgcGF0aCwgZmxhZ3MsIHN0YXRzLCBkYXRhIHx8IHVuZGVmaW5lZCk7XG5cdFx0XHRcdGRlZmF1bHQ6XG5cdFx0XHRcdFx0dGhyb3cgbmV3IEFwaUVycm9yKEVycm9yQ29kZS5FSU5WQUwsICdJbnZhbGlkIEZpbGVNb2RlIG9iamVjdC4nKTtcblx0XHRcdH1cblx0XHR9IGVsc2Uge1xuXHRcdFx0dGhyb3cgQXBpRXJyb3IuRVBFUk0ocGF0aCk7XG5cdFx0fVxuXHR9XG5cblx0cHVibGljIHJlYWRkaXJTeW5jKHBhdGg6IHN0cmluZyk6IHN0cmluZ1tdIHtcblx0XHQvLyBDaGVjayBpZiBpdCBleGlzdHMuXG5cdFx0Y29uc3QgaW5vZGUgPSB0aGlzLl9pbmRleC5nZXRJbm9kZShwYXRoKTtcblx0XHRpZiAoIWlub2RlKSB7XG5cdFx0XHR0aHJvdyBBcGlFcnJvci5FTk9FTlQocGF0aCk7XG5cdFx0fSBlbHNlIGlmIChpc0Rpcklub2RlKGlub2RlKSkge1xuXHRcdFx0cmV0dXJuIGlub2RlLmdldExpc3RpbmcoKTtcblx0XHR9IGVsc2Uge1xuXHRcdFx0dGhyb3cgQXBpRXJyb3IuRU5PVERJUihwYXRoKTtcblx0XHR9XG5cdH1cblxuXHQvKipcblx0ICogU3BlY2lhbGx5LW9wdGltaXplZCByZWFkZmlsZS5cblx0ICovXG5cdHB1YmxpYyByZWFkRmlsZVN5bmMoZm5hbWU6IHN0cmluZywgZW5jb2Rpbmc6IEJ1ZmZlckVuY29kaW5nLCBmbGFnOiBGaWxlRmxhZyk6IGFueSB7XG5cdFx0Ly8gR2V0IGZpbGUuXG5cdFx0Y29uc3QgZmQgPSB0aGlzLm9wZW5TeW5jKGZuYW1lLCBmbGFnLCAweDFhNCk7XG5cdFx0dHJ5IHtcblx0XHRcdGNvbnN0IGZkQ2FzdCA9IDxOb1N5bmNGaWxlPFppcEZTPj5mZDtcblx0XHRcdGNvbnN0IGZkQnVmZiA9IDxCdWZmZXI+ZmRDYXN0LmdldEJ1ZmZlcigpO1xuXHRcdFx0aWYgKGVuY29kaW5nID09PSBudWxsKSB7XG5cdFx0XHRcdHJldHVybiBjb3B5aW5nU2xpY2UoZmRCdWZmKTtcblx0XHRcdH1cblx0XHRcdHJldHVybiBmZEJ1ZmYudG9TdHJpbmcoZW5jb2RpbmcpO1xuXHRcdH0gZmluYWxseSB7XG5cdFx0XHRmZC5jbG9zZVN5bmMoKTtcblx0XHR9XG5cdH1cbn1cblxuWmlwRlMuUmVnaXN0ZXJEZWNvbXByZXNzaW9uTWV0aG9kKENvbXByZXNzaW9uTWV0aG9kLkRFRkxBVEUsIChkYXRhLCBjb21wcmVzc2VkU2l6ZSwgdW5jb21wcmVzc2VkU2l6ZSkgPT4ge1xuXHRyZXR1cm4gaW5mbGF0ZVJhdyhkYXRhLnNsaWNlKDAsIGNvbXByZXNzZWRTaXplKSwgeyBjaHVua1NpemU6IHVuY29tcHJlc3NlZFNpemUgfSk7XG59KTtcblxuWmlwRlMuUmVnaXN0ZXJEZWNvbXByZXNzaW9uTWV0aG9kKENvbXByZXNzaW9uTWV0aG9kLlNUT1JFRCwgKGRhdGEsIGNvbXByZXNzZWRTaXplLCB1bmNvbXByZXNzZWRTaXplKSA9PiB7XG5cdHJldHVybiBjb3B5aW5nU2xpY2UoZGF0YSwgMCwgdW5jb21wcmVzc2VkU2l6ZSk7XG59KTtcbiIsICJpbXBvcnQgeyBBcGlFcnJvciwgRXJyb3JDb2RlIH0gZnJvbSAnLi4vY29yZS9hcGlfZXJyb3InO1xuaW1wb3J0IHsgZGVmYXVsdCBhcyBTdGF0cywgRmlsZVR5cGUgfSBmcm9tICcuLi9jb3JlL3N0YXRzJztcbmltcG9ydCB7IFN5bmNocm9ub3VzRmlsZVN5c3RlbSwgRmlsZVN5c3RlbSwgQkZTQ2FsbGJhY2ssIEZpbGVTeXN0ZW1PcHRpb25zIH0gZnJvbSAnLi4vY29yZS9maWxlX3N5c3RlbSc7XG5pbXBvcnQgeyBGaWxlIH0gZnJvbSAnLi4vY29yZS9maWxlJztcbmltcG9ydCB7IEZpbGVGbGFnLCBBY3Rpb25UeXBlIH0gZnJvbSAnLi4vY29yZS9maWxlX2ZsYWcnO1xuaW1wb3J0IHsgTm9TeW5jRmlsZSB9IGZyb20gJy4uL2dlbmVyaWMvcHJlbG9hZF9maWxlJztcbmltcG9ydCB7IGNvcHlpbmdTbGljZSwgYnVmZmVyVmFsaWRhdG9yIH0gZnJvbSAnLi4vY29yZS91dGlsJztcbmltcG9ydCAqIGFzIHBhdGggZnJvbSAncGF0aCc7XG5pbXBvcnQgdHlwZSB7IEJ1ZmZlciB9IGZyb20gJ2J1ZmZlcic7XG5cbi8qKlxuICogQGhpZGRlblxuICovXG5jb25zdCByb2NrUmlkZ2VJZGVudGlmaWVyID0gJ0lFRUVfUDEyODInO1xuLyoqXG4gKiBAaGlkZGVuXG4gKi9cbmNvbnN0IGVudW0gVm9sdW1lRGVzY3JpcHRvclR5cGVDb2RlIHtcblx0Qm9vdFJlY29yZCA9IDAsXG5cdFByaW1hcnlWb2x1bWVEZXNjcmlwdG9yID0gMSxcblx0U3VwcGxlbWVudGFyeVZvbHVtZURlc2NyaXB0b3IgPSAyLFxuXHRWb2x1bWVQYXJ0aXRpb25EZXNjcmlwdG9yID0gMyxcblx0Vm9sdW1lRGVzY3JpcHRvclNldFRlcm1pbmF0b3IgPSAyNTUsXG59XG5cbi8qKlxuICogQGhpZGRlblxuICovXG50eXBlIFRHZXRTdHJpbmcgPSAoZDogQnVmZmVyLCBpOiBudW1iZXIsIGxlbjogbnVtYmVyKSA9PiBzdHJpbmc7XG5cbi8qKlxuICogQGhpZGRlblxuICovXG5mdW5jdGlvbiBnZXRBU0NJSVN0cmluZyhkYXRhOiBCdWZmZXIsIHN0YXJ0SW5kZXg6IG51bWJlciwgbGVuZ3RoOiBudW1iZXIpIHtcblx0cmV0dXJuIGRhdGEudG9TdHJpbmcoJ2FzY2lpJywgc3RhcnRJbmRleCwgc3RhcnRJbmRleCArIGxlbmd0aCkudHJpbSgpO1xufVxuXG4vKipcbiAqIEBoaWRkZW5cbiAqL1xuZnVuY3Rpb24gZ2V0Sm9saWV0U3RyaW5nKGRhdGE6IEJ1ZmZlciwgc3RhcnRJbmRleDogbnVtYmVyLCBsZW5ndGg6IG51bWJlcik6IHN0cmluZyB7XG5cdGlmIChsZW5ndGggPT09IDEpIHtcblx0XHQvLyBTcGVjaWFsOiBSb290LCBwYXJlbnQsIGN1cnJlbnQgZGlyZWN0b3J5IGFyZSBzdGlsbCBhIHNpbmdsZSBieXRlLlxuXHRcdHJldHVybiBTdHJpbmcuZnJvbUNoYXJDb2RlKGRhdGFbc3RhcnRJbmRleF0pO1xuXHR9XG5cdC8vIFVURjE2LUJFLCB3aGljaCBpc24ndCBuYXRpdmVseSBzdXBwb3J0ZWQgYnkgTm9kZUpTIEJ1ZmZlcnMuXG5cdC8vIExlbmd0aCBzaG91bGQgYmUgZXZlbiwgYnV0IHBlc3NpbWlzdGljYWxseSBmbG9vciBqdXN0IGluIGNhc2UuXG5cdGNvbnN0IHBhaXJzID0gTWF0aC5mbG9vcihsZW5ndGggLyAyKTtcblx0Y29uc3QgY2hhcnMgPSBuZXcgQXJyYXkocGFpcnMpO1xuXHRmb3IgKGxldCBpID0gMDsgaSA8IHBhaXJzOyBpKyspIHtcblx0XHRjb25zdCBwb3MgPSBzdGFydEluZGV4ICsgKGkgPDwgMSk7XG5cdFx0Y2hhcnNbaV0gPSBTdHJpbmcuZnJvbUNoYXJDb2RlKGRhdGFbcG9zICsgMV0gfCAoZGF0YVtwb3NdIDw8IDgpKTtcblx0fVxuXHRyZXR1cm4gY2hhcnMuam9pbignJyk7XG59XG5cbi8qKlxuICogQGhpZGRlblxuICovXG5mdW5jdGlvbiBnZXREYXRlKGRhdGE6IEJ1ZmZlciwgc3RhcnRJbmRleDogbnVtYmVyKTogRGF0ZSB7XG5cdGNvbnN0IHllYXIgPSBwYXJzZUludChnZXRBU0NJSVN0cmluZyhkYXRhLCBzdGFydEluZGV4LCA0KSwgMTApO1xuXHRjb25zdCBtb24gPSBwYXJzZUludChnZXRBU0NJSVN0cmluZyhkYXRhLCBzdGFydEluZGV4ICsgNCwgMiksIDEwKTtcblx0Y29uc3QgZGF5ID0gcGFyc2VJbnQoZ2V0QVNDSUlTdHJpbmcoZGF0YSwgc3RhcnRJbmRleCArIDYsIDIpLCAxMCk7XG5cdGNvbnN0IGhvdXIgPSBwYXJzZUludChnZXRBU0NJSVN0cmluZyhkYXRhLCBzdGFydEluZGV4ICsgOCwgMiksIDEwKTtcblx0Y29uc3QgbWluID0gcGFyc2VJbnQoZ2V0QVNDSUlTdHJpbmcoZGF0YSwgc3RhcnRJbmRleCArIDEwLCAyKSwgMTApO1xuXHRjb25zdCBzZWMgPSBwYXJzZUludChnZXRBU0NJSVN0cmluZyhkYXRhLCBzdGFydEluZGV4ICsgMTIsIDIpLCAxMCk7XG5cdGNvbnN0IGh1bmRyZXRoc1NlYyA9IHBhcnNlSW50KGdldEFTQ0lJU3RyaW5nKGRhdGEsIHN0YXJ0SW5kZXggKyAxNCwgMiksIDEwKTtcblx0Ly8gTGFzdCBpcyBhIHRpbWUtem9uZSBvZmZzZXQsIGJ1dCBKYXZhU2NyaXB0IGRhdGVzIGRvbid0IHN1cHBvcnQgdGltZSB6b25lcyB3ZWxsLlxuXHRyZXR1cm4gbmV3IERhdGUoeWVhciwgbW9uLCBkYXksIGhvdXIsIG1pbiwgc2VjLCBodW5kcmV0aHNTZWMgKiAxMDApO1xufVxuXG4vKipcbiAqIEBoaWRkZW5cbiAqL1xuZnVuY3Rpb24gZ2V0U2hvcnRGb3JtRGF0ZShkYXRhOiBCdWZmZXIsIHN0YXJ0SW5kZXg6IG51bWJlcik6IERhdGUge1xuXHRjb25zdCB5ZWFyc1NpbmNlMTkwMCA9IGRhdGFbc3RhcnRJbmRleF07XG5cdGNvbnN0IG1vbnRoID0gZGF0YVtzdGFydEluZGV4ICsgMV07XG5cdGNvbnN0IGRheSA9IGRhdGFbc3RhcnRJbmRleCArIDJdO1xuXHRjb25zdCBob3VyID0gZGF0YVtzdGFydEluZGV4ICsgM107XG5cdGNvbnN0IG1pbnV0ZSA9IGRhdGFbc3RhcnRJbmRleCArIDRdO1xuXHRjb25zdCBzZWNvbmQgPSBkYXRhW3N0YXJ0SW5kZXggKyA1XTtcblx0Ly8gSmF2YVNjcmlwdCdzIERhdGUgc3VwcG9ydCBpc24ndCBzbyBncmVhdDsgaWdub3JlIHRpbWV6b25lLlxuXHQvLyBjb25zdCBvZmZzZXRGcm9tR01UID0gdGhpcy5fZGF0YVsyNF07XG5cdHJldHVybiBuZXcgRGF0ZSh5ZWFyc1NpbmNlMTkwMCwgbW9udGggLSAxLCBkYXksIGhvdXIsIG1pbnV0ZSwgc2Vjb25kKTtcbn1cblxuLyoqXG4gKiBAaGlkZGVuXG4gKi9cbmZ1bmN0aW9uIGNvbnN0cnVjdFN5c3RlbVVzZUVudHJ5KGJpZ0RhdGE6IEJ1ZmZlciwgaTogbnVtYmVyKTogU3lzdGVtVXNlRW50cnkge1xuXHRjb25zdCBkYXRhID0gYmlnRGF0YS5zbGljZShpKTtcblx0Y29uc3Qgc3VlID0gbmV3IFN5c3RlbVVzZUVudHJ5KGRhdGEpO1xuXHRzd2l0Y2ggKHN1ZS5zaWduYXR1cmVXb3JkKCkpIHtcblx0XHRjYXNlIFN5c3RlbVVzZUVudHJ5U2lnbmF0dXJlcy5DRTpcblx0XHRcdHJldHVybiBuZXcgQ0VFbnRyeShkYXRhKTtcblx0XHRjYXNlIFN5c3RlbVVzZUVudHJ5U2lnbmF0dXJlcy5QRDpcblx0XHRcdHJldHVybiBuZXcgUERFbnRyeShkYXRhKTtcblx0XHRjYXNlIFN5c3RlbVVzZUVudHJ5U2lnbmF0dXJlcy5TUDpcblx0XHRcdHJldHVybiBuZXcgU1BFbnRyeShkYXRhKTtcblx0XHRjYXNlIFN5c3RlbVVzZUVudHJ5U2lnbmF0dXJlcy5TVDpcblx0XHRcdHJldHVybiBuZXcgU1RFbnRyeShkYXRhKTtcblx0XHRjYXNlIFN5c3RlbVVzZUVudHJ5U2lnbmF0dXJlcy5FUjpcblx0XHRcdHJldHVybiBuZXcgRVJFbnRyeShkYXRhKTtcblx0XHRjYXNlIFN5c3RlbVVzZUVudHJ5U2lnbmF0dXJlcy5FUzpcblx0XHRcdHJldHVybiBuZXcgRVNFbnRyeShkYXRhKTtcblx0XHRjYXNlIFN5c3RlbVVzZUVudHJ5U2lnbmF0dXJlcy5QWDpcblx0XHRcdHJldHVybiBuZXcgUFhFbnRyeShkYXRhKTtcblx0XHRjYXNlIFN5c3RlbVVzZUVudHJ5U2lnbmF0dXJlcy5QTjpcblx0XHRcdHJldHVybiBuZXcgUE5FbnRyeShkYXRhKTtcblx0XHRjYXNlIFN5c3RlbVVzZUVudHJ5U2lnbmF0dXJlcy5TTDpcblx0XHRcdHJldHVybiBuZXcgU0xFbnRyeShkYXRhKTtcblx0XHRjYXNlIFN5c3RlbVVzZUVudHJ5U2lnbmF0dXJlcy5OTTpcblx0XHRcdHJldHVybiBuZXcgTk1FbnRyeShkYXRhKTtcblx0XHRjYXNlIFN5c3RlbVVzZUVudHJ5U2lnbmF0dXJlcy5DTDpcblx0XHRcdHJldHVybiBuZXcgQ0xFbnRyeShkYXRhKTtcblx0XHRjYXNlIFN5c3RlbVVzZUVudHJ5U2lnbmF0dXJlcy5QTDpcblx0XHRcdHJldHVybiBuZXcgUExFbnRyeShkYXRhKTtcblx0XHRjYXNlIFN5c3RlbVVzZUVudHJ5U2lnbmF0dXJlcy5SRTpcblx0XHRcdHJldHVybiBuZXcgUkVFbnRyeShkYXRhKTtcblx0XHRjYXNlIFN5c3RlbVVzZUVudHJ5U2lnbmF0dXJlcy5URjpcblx0XHRcdHJldHVybiBuZXcgVEZFbnRyeShkYXRhKTtcblx0XHRjYXNlIFN5c3RlbVVzZUVudHJ5U2lnbmF0dXJlcy5TRjpcblx0XHRcdHJldHVybiBuZXcgU0ZFbnRyeShkYXRhKTtcblx0XHRjYXNlIFN5c3RlbVVzZUVudHJ5U2lnbmF0dXJlcy5SUjpcblx0XHRcdHJldHVybiBuZXcgUlJFbnRyeShkYXRhKTtcblx0XHRkZWZhdWx0OlxuXHRcdFx0cmV0dXJuIHN1ZTtcblx0fVxufVxuXG4vKipcbiAqIEBoaWRkZW5cbiAqL1xuZnVuY3Rpb24gY29uc3RydWN0U3lzdGVtVXNlRW50cmllcyhkYXRhOiBCdWZmZXIsIGk6IG51bWJlciwgbGVuOiBudW1iZXIsIGlzb0RhdGE6IEJ1ZmZlcik6IFN5c3RlbVVzZUVudHJ5W10ge1xuXHQvLyBJZiB0aGUgcmVtYWluaW5nIGFsbG9jYXRlZCBzcGFjZSBmb2xsb3dpbmcgdGhlIGxhc3QgcmVjb3JkZWQgU3lzdGVtIFVzZSBFbnRyeSBpbiBhIFN5c3RlbVxuXHQvLyBVc2UgZmllbGQgb3IgQ29udGludWF0aW9uIEFyZWEgaXMgbGVzcyB0aGFuIGZvdXIgYnl0ZXMgbG9uZywgaXQgY2Fubm90IGNvbnRhaW4gYSBTeXN0ZW1cblx0Ly8gVXNlIEVudHJ5IGFuZCBzaGFsbCBiZSBpZ25vcmVkXG5cdGxlbiA9IGxlbiAtIDQ7XG5cdGxldCBlbnRyaWVzID0gbmV3IEFycmF5PFN5c3RlbVVzZUVudHJ5PigpO1xuXHR3aGlsZSAoaSA8IGxlbikge1xuXHRcdGNvbnN0IGVudHJ5ID0gY29uc3RydWN0U3lzdGVtVXNlRW50cnkoZGF0YSwgaSk7XG5cdFx0Y29uc3QgbGVuZ3RoID0gZW50cnkubGVuZ3RoKCk7XG5cdFx0aWYgKGxlbmd0aCA9PT0gMCkge1xuXHRcdFx0Ly8gSW52YWxpZCBTVSBzZWN0aW9uOyBwcmV2ZW50IGluZmluaXRlIGxvb3AuXG5cdFx0XHRyZXR1cm4gZW50cmllcztcblx0XHR9XG5cdFx0aSArPSBsZW5ndGg7XG5cdFx0aWYgKGVudHJ5IGluc3RhbmNlb2YgU1RFbnRyeSkge1xuXHRcdFx0Ly8gU1QgaW5kaWNhdGVzIHRoZSBlbmQgb2YgZW50cmllcy5cblx0XHRcdGJyZWFrO1xuXHRcdH1cblx0XHRpZiAoZW50cnkgaW5zdGFuY2VvZiBDRUVudHJ5KSB7XG5cdFx0XHRlbnRyaWVzID0gZW50cmllcy5jb25jYXQoZW50cnkuZ2V0RW50cmllcyhpc29EYXRhKSk7XG5cdFx0fSBlbHNlIHtcblx0XHRcdGVudHJpZXMucHVzaChlbnRyeSk7XG5cdFx0fVxuXHR9XG5cdHJldHVybiBlbnRyaWVzO1xufVxuXG4vKipcbiAqIEBoaWRkZW5cbiAqL1xuY2xhc3MgVm9sdW1lRGVzY3JpcHRvciB7XG5cdHByb3RlY3RlZCBfZGF0YTogQnVmZmVyO1xuXHRjb25zdHJ1Y3RvcihkYXRhOiBCdWZmZXIpIHtcblx0XHR0aGlzLl9kYXRhID0gZGF0YTtcblx0fVxuXHRwdWJsaWMgdHlwZSgpOiBWb2x1bWVEZXNjcmlwdG9yVHlwZUNvZGUge1xuXHRcdHJldHVybiB0aGlzLl9kYXRhWzBdO1xuXHR9XG5cdHB1YmxpYyBzdGFuZGFyZElkZW50aWZpZXIoKTogc3RyaW5nIHtcblx0XHRyZXR1cm4gZ2V0QVNDSUlTdHJpbmcodGhpcy5fZGF0YSwgMSwgNSk7XG5cdH1cblx0cHVibGljIHZlcnNpb24oKTogbnVtYmVyIHtcblx0XHRyZXR1cm4gdGhpcy5fZGF0YVs2XTtcblx0fVxuXHRwdWJsaWMgZGF0YSgpOiBCdWZmZXIge1xuXHRcdHJldHVybiB0aGlzLl9kYXRhLnNsaWNlKDcsIDIwNDgpO1xuXHR9XG59XG5cbi8qKlxuICogQGhpZGRlblxuICovXG5hYnN0cmFjdCBjbGFzcyBQcmltYXJ5T3JTdXBwbGVtZW50YXJ5Vm9sdW1lRGVzY3JpcHRvciBleHRlbmRzIFZvbHVtZURlc2NyaXB0b3Ige1xuXHRwcml2YXRlIF9yb290OiBEaXJlY3RvcnlSZWNvcmQgfCBudWxsID0gbnVsbDtcblx0Y29uc3RydWN0b3IoZGF0YTogQnVmZmVyKSB7XG5cdFx0c3VwZXIoZGF0YSk7XG5cdH1cblx0cHVibGljIHN5c3RlbUlkZW50aWZpZXIoKTogc3RyaW5nIHtcblx0XHRyZXR1cm4gdGhpcy5fZ2V0U3RyaW5nMzIoOCk7XG5cdH1cblx0cHVibGljIHZvbHVtZUlkZW50aWZpZXIoKTogc3RyaW5nIHtcblx0XHRyZXR1cm4gdGhpcy5fZ2V0U3RyaW5nMzIoNDApO1xuXHR9XG5cdHB1YmxpYyB2b2x1bWVTcGFjZVNpemUoKTogbnVtYmVyIHtcblx0XHRyZXR1cm4gdGhpcy5fZGF0YS5yZWFkVUludDMyTEUoODApO1xuXHR9XG5cdHB1YmxpYyB2b2x1bWVTZXRTaXplKCk6IG51bWJlciB7XG5cdFx0cmV0dXJuIHRoaXMuX2RhdGEucmVhZFVJbnQxNkxFKDEyMCk7XG5cdH1cblx0cHVibGljIHZvbHVtZVNlcXVlbmNlTnVtYmVyKCk6IG51bWJlciB7XG5cdFx0cmV0dXJuIHRoaXMuX2RhdGEucmVhZFVJbnQxNkxFKDEyNCk7XG5cdH1cblx0cHVibGljIGxvZ2ljYWxCbG9ja1NpemUoKTogbnVtYmVyIHtcblx0XHRyZXR1cm4gdGhpcy5fZGF0YS5yZWFkVUludDE2TEUoMTI4KTtcblx0fVxuXHRwdWJsaWMgcGF0aFRhYmxlU2l6ZSgpOiBudW1iZXIge1xuXHRcdHJldHVybiB0aGlzLl9kYXRhLnJlYWRVSW50MzJMRSgxMzIpO1xuXHR9XG5cdHB1YmxpYyBsb2NhdGlvbk9mVHlwZUxQYXRoVGFibGUoKTogbnVtYmVyIHtcblx0XHRyZXR1cm4gdGhpcy5fZGF0YS5yZWFkVUludDMyTEUoMTQwKTtcblx0fVxuXHRwdWJsaWMgbG9jYXRpb25PZk9wdGlvbmFsVHlwZUxQYXRoVGFibGUoKTogbnVtYmVyIHtcblx0XHRyZXR1cm4gdGhpcy5fZGF0YS5yZWFkVUludDMyTEUoMTQ0KTtcblx0fVxuXHRwdWJsaWMgbG9jYXRpb25PZlR5cGVNUGF0aFRhYmxlKCk6IG51bWJlciB7XG5cdFx0cmV0dXJuIHRoaXMuX2RhdGEucmVhZFVJbnQzMkJFKDE0OCk7XG5cdH1cblx0cHVibGljIGxvY2F0aW9uT2ZPcHRpb25hbFR5cGVNUGF0aFRhYmxlKCk6IG51bWJlciB7XG5cdFx0cmV0dXJuIHRoaXMuX2RhdGEucmVhZFVJbnQzMkJFKDE1Mik7XG5cdH1cblx0cHVibGljIHJvb3REaXJlY3RvcnlFbnRyeShpc29EYXRhOiBCdWZmZXIpOiBEaXJlY3RvcnlSZWNvcmQge1xuXHRcdGlmICh0aGlzLl9yb290ID09PSBudWxsKSB7XG5cdFx0XHR0aGlzLl9yb290ID0gdGhpcy5fY29uc3RydWN0Um9vdERpcmVjdG9yeVJlY29yZCh0aGlzLl9kYXRhLnNsaWNlKDE1NikpO1xuXHRcdFx0dGhpcy5fcm9vdC5yb290Q2hlY2tGb3JSb2NrUmlkZ2UoaXNvRGF0YSk7XG5cdFx0fVxuXHRcdHJldHVybiB0aGlzLl9yb290O1xuXHR9XG5cdHB1YmxpYyB2b2x1bWVTZXRJZGVudGlmaWVyKCk6IHN0cmluZyB7XG5cdFx0cmV0dXJuIHRoaXMuX2dldFN0cmluZygxOTAsIDEyOCk7XG5cdH1cblx0cHVibGljIHB1Ymxpc2hlcklkZW50aWZpZXIoKTogc3RyaW5nIHtcblx0XHRyZXR1cm4gdGhpcy5fZ2V0U3RyaW5nKDMxOCwgMTI4KTtcblx0fVxuXHRwdWJsaWMgZGF0YVByZXBhcmVySWRlbnRpZmllcigpOiBzdHJpbmcge1xuXHRcdHJldHVybiB0aGlzLl9nZXRTdHJpbmcoNDQ2LCAxMjgpO1xuXHR9XG5cdHB1YmxpYyBhcHBsaWNhdGlvbklkZW50aWZpZXIoKTogc3RyaW5nIHtcblx0XHRyZXR1cm4gdGhpcy5fZ2V0U3RyaW5nKDU3NCwgMTI4KTtcblx0fVxuXHRwdWJsaWMgY29weXJpZ2h0RmlsZUlkZW50aWZpZXIoKTogc3RyaW5nIHtcblx0XHRyZXR1cm4gdGhpcy5fZ2V0U3RyaW5nKDcwMiwgMzgpO1xuXHR9XG5cdHB1YmxpYyBhYnN0cmFjdEZpbGVJZGVudGlmaWVyKCk6IHN0cmluZyB7XG5cdFx0cmV0dXJuIHRoaXMuX2dldFN0cmluZyg3NDAsIDM2KTtcblx0fVxuXHRwdWJsaWMgYmlibGlvZ3JhcGhpY0ZpbGVJZGVudGlmaWVyKCk6IHN0cmluZyB7XG5cdFx0cmV0dXJuIHRoaXMuX2dldFN0cmluZyg3NzYsIDM3KTtcblx0fVxuXHRwdWJsaWMgdm9sdW1lQ3JlYXRpb25EYXRlKCk6IERhdGUge1xuXHRcdHJldHVybiBnZXREYXRlKHRoaXMuX2RhdGEsIDgxMyk7XG5cdH1cblx0cHVibGljIHZvbHVtZU1vZGlmaWNhdGlvbkRhdGUoKTogRGF0ZSB7XG5cdFx0cmV0dXJuIGdldERhdGUodGhpcy5fZGF0YSwgODMwKTtcblx0fVxuXHRwdWJsaWMgdm9sdW1lRXhwaXJhdGlvbkRhdGUoKTogRGF0ZSB7XG5cdFx0cmV0dXJuIGdldERhdGUodGhpcy5fZGF0YSwgODQ3KTtcblx0fVxuXHRwdWJsaWMgdm9sdW1lRWZmZWN0aXZlRGF0ZSgpOiBEYXRlIHtcblx0XHRyZXR1cm4gZ2V0RGF0ZSh0aGlzLl9kYXRhLCA4NjQpO1xuXHR9XG5cdHB1YmxpYyBmaWxlU3RydWN0dXJlVmVyc2lvbigpOiBudW1iZXIge1xuXHRcdHJldHVybiB0aGlzLl9kYXRhWzg4MV07XG5cdH1cblx0cHVibGljIGFwcGxpY2F0aW9uVXNlZCgpOiBCdWZmZXIge1xuXHRcdHJldHVybiB0aGlzLl9kYXRhLnNsaWNlKDg4MywgODgzICsgNTEyKTtcblx0fVxuXHRwdWJsaWMgcmVzZXJ2ZWQoKTogQnVmZmVyIHtcblx0XHRyZXR1cm4gdGhpcy5fZGF0YS5zbGljZSgxMzk1LCAxMzk1ICsgNjUzKTtcblx0fVxuXHRwdWJsaWMgYWJzdHJhY3QgbmFtZSgpOiBzdHJpbmc7XG5cdHByb3RlY3RlZCBhYnN0cmFjdCBfY29uc3RydWN0Um9vdERpcmVjdG9yeVJlY29yZChkYXRhOiBCdWZmZXIpOiBEaXJlY3RvcnlSZWNvcmQ7XG5cdHByb3RlY3RlZCBhYnN0cmFjdCBfZ2V0U3RyaW5nKGlkeDogbnVtYmVyLCBsZW46IG51bWJlcik6IHN0cmluZztcblx0cHJvdGVjdGVkIF9nZXRTdHJpbmczMihpZHg6IG51bWJlcik6IHN0cmluZyB7XG5cdFx0cmV0dXJuIHRoaXMuX2dldFN0cmluZyhpZHgsIDMyKTtcblx0fVxufVxuXG4vKipcbiAqIEBoaWRkZW5cbiAqL1xuY2xhc3MgUHJpbWFyeVZvbHVtZURlc2NyaXB0b3IgZXh0ZW5kcyBQcmltYXJ5T3JTdXBwbGVtZW50YXJ5Vm9sdW1lRGVzY3JpcHRvciB7XG5cdGNvbnN0cnVjdG9yKGRhdGE6IEJ1ZmZlcikge1xuXHRcdHN1cGVyKGRhdGEpO1xuXHRcdGlmICh0aGlzLnR5cGUoKSAhPT0gVm9sdW1lRGVzY3JpcHRvclR5cGVDb2RlLlByaW1hcnlWb2x1bWVEZXNjcmlwdG9yKSB7XG5cdFx0XHR0aHJvdyBuZXcgQXBpRXJyb3IoRXJyb3JDb2RlLkVJTywgYEludmFsaWQgcHJpbWFyeSB2b2x1bWUgZGVzY3JpcHRvci5gKTtcblx0XHR9XG5cdH1cblx0cHVibGljIG5hbWUoKSB7XG5cdFx0cmV0dXJuICdJU085NjYwJztcblx0fVxuXHRwcm90ZWN0ZWQgX2NvbnN0cnVjdFJvb3REaXJlY3RvcnlSZWNvcmQoZGF0YTogQnVmZmVyKTogRGlyZWN0b3J5UmVjb3JkIHtcblx0XHRyZXR1cm4gbmV3IElTT0RpcmVjdG9yeVJlY29yZChkYXRhLCAtMSk7XG5cdH1cblx0cHJvdGVjdGVkIF9nZXRTdHJpbmcoaWR4OiBudW1iZXIsIGxlbjogbnVtYmVyKTogc3RyaW5nIHtcblx0XHRyZXR1cm4gdGhpcy5fZ2V0U3RyaW5nKGlkeCwgbGVuKTtcblx0fVxufVxuXG4vKipcbiAqIEBoaWRkZW5cbiAqL1xuY2xhc3MgU3VwcGxlbWVudGFyeVZvbHVtZURlc2NyaXB0b3IgZXh0ZW5kcyBQcmltYXJ5T3JTdXBwbGVtZW50YXJ5Vm9sdW1lRGVzY3JpcHRvciB7XG5cdGNvbnN0cnVjdG9yKGRhdGE6IEJ1ZmZlcikge1xuXHRcdHN1cGVyKGRhdGEpO1xuXHRcdGlmICh0aGlzLnR5cGUoKSAhPT0gVm9sdW1lRGVzY3JpcHRvclR5cGVDb2RlLlN1cHBsZW1lbnRhcnlWb2x1bWVEZXNjcmlwdG9yKSB7XG5cdFx0XHR0aHJvdyBuZXcgQXBpRXJyb3IoRXJyb3JDb2RlLkVJTywgYEludmFsaWQgc3VwcGxlbWVudGFyeSB2b2x1bWUgZGVzY3JpcHRvci5gKTtcblx0XHR9XG5cdFx0Y29uc3QgZXNjYXBlU2VxdWVuY2UgPSB0aGlzLmVzY2FwZVNlcXVlbmNlKCk7XG5cdFx0Y29uc3QgdGhpcmQgPSBlc2NhcGVTZXF1ZW5jZVsyXTtcblx0XHQvLyBUaGlyZCBjaGFyYWN0ZXIgaWRlbnRpZmllcyB3aGF0ICdsZXZlbCcgb2YgdGhlIFVDUyBzcGVjaWZpY2F0aW9uIHRvIGZvbGxvdy5cblx0XHQvLyBXZSBpZ25vcmUgaXQuXG5cdFx0aWYgKGVzY2FwZVNlcXVlbmNlWzBdICE9PSAweDI1IHx8IGVzY2FwZVNlcXVlbmNlWzFdICE9PSAweDJmIHx8ICh0aGlyZCAhPT0gMHg0MCAmJiB0aGlyZCAhPT0gMHg0MyAmJiB0aGlyZCAhPT0gMHg0NSkpIHtcblx0XHRcdHRocm93IG5ldyBBcGlFcnJvcihFcnJvckNvZGUuRUlPLCBgVW5yZWNvZ25pemVkIGVzY2FwZSBzZXF1ZW5jZSBmb3IgU3VwcGxlbWVudGFyeVZvbHVtZURlc2NyaXB0b3I6ICR7ZXNjYXBlU2VxdWVuY2UudG9TdHJpbmcoKX1gKTtcblx0XHR9XG5cdH1cblx0cHVibGljIG5hbWUoKSB7XG5cdFx0cmV0dXJuICdKb2xpZXQnO1xuXHR9XG5cdHB1YmxpYyBlc2NhcGVTZXF1ZW5jZSgpOiBCdWZmZXIge1xuXHRcdHJldHVybiB0aGlzLl9kYXRhLnNsaWNlKDg4LCAxMjApO1xuXHR9XG5cdHByb3RlY3RlZCBfY29uc3RydWN0Um9vdERpcmVjdG9yeVJlY29yZChkYXRhOiBCdWZmZXIpOiBEaXJlY3RvcnlSZWNvcmQge1xuXHRcdHJldHVybiBuZXcgSm9saWV0RGlyZWN0b3J5UmVjb3JkKGRhdGEsIC0xKTtcblx0fVxuXHRwcm90ZWN0ZWQgX2dldFN0cmluZyhpZHg6IG51bWJlciwgbGVuOiBudW1iZXIpOiBzdHJpbmcge1xuXHRcdHJldHVybiBnZXRKb2xpZXRTdHJpbmcodGhpcy5fZGF0YSwgaWR4LCBsZW4pO1xuXHR9XG59XG5cbi8qKlxuICogQGhpZGRlblxuICovXG5jb25zdCBlbnVtIEZpbGVGbGFncyB7XG5cdEhpZGRlbiA9IDEsXG5cdERpcmVjdG9yeSA9IDEgPDwgMSxcblx0QXNzb2NpYXRlZEZpbGUgPSAxIDw8IDIsXG5cdEVBUkNvbnRhaW5zSW5mbyA9IDEgPDwgMyxcblx0RUFSQ29udGFpbnNQZXJtcyA9IDEgPDwgNCxcblx0RmluYWxEaXJlY3RvcnlSZWNvcmRGb3JGaWxlID0gMSA8PCA1LFxufVxuXG4vKipcbiAqIEBoaWRkZW5cbiAqL1xuYWJzdHJhY3QgY2xhc3MgRGlyZWN0b3J5UmVjb3JkIHtcblx0cHJvdGVjdGVkIF9kYXRhOiBCdWZmZXI7XG5cdC8vIE9mZnNldCBhdCB3aGljaCBzeXN0ZW0gdXNlIGVudHJpZXMgYmVnaW4uIFNldCB0byAtMSBpZiBub3QgZW5hYmxlZC5cblx0cHJvdGVjdGVkIF9yb2NrUmlkZ2VPZmZzZXQ6IG51bWJlcjtcblx0cHJvdGVjdGVkIF9zdUVudHJpZXM6IFN5c3RlbVVzZUVudHJ5W10gfCBudWxsID0gbnVsbDtcblx0cHJpdmF0ZSBfZmlsZU9yRGlyOiBCdWZmZXIgfCBEaXJlY3Rvcnk8RGlyZWN0b3J5UmVjb3JkPiB8IG51bGwgPSBudWxsO1xuXHRjb25zdHJ1Y3RvcihkYXRhOiBCdWZmZXIsIHJvY2tSaWRnZU9mZnNldDogbnVtYmVyKSB7XG5cdFx0dGhpcy5fZGF0YSA9IGRhdGE7XG5cdFx0dGhpcy5fcm9ja1JpZGdlT2Zmc2V0ID0gcm9ja1JpZGdlT2Zmc2V0O1xuXHR9XG5cdHB1YmxpYyBoYXNSb2NrUmlkZ2UoKTogYm9vbGVhbiB7XG5cdFx0cmV0dXJuIHRoaXMuX3JvY2tSaWRnZU9mZnNldCA+IC0xO1xuXHR9XG5cdHB1YmxpYyBnZXRSb2NrUmlkZ2VPZmZzZXQoKTogbnVtYmVyIHtcblx0XHRyZXR1cm4gdGhpcy5fcm9ja1JpZGdlT2Zmc2V0O1xuXHR9XG5cdC8qKlxuXHQgKiAhIU9OTFkgVkFMSUQgT04gUk9PVCBOT0RFISFcblx0ICogQ2hlY2tzIGlmIFJvY2sgUmlkZ2UgaXMgZW5hYmxlZCwgYW5kIHNldHMgdGhlIG9mZnNldC5cblx0ICovXG5cdHB1YmxpYyByb290Q2hlY2tGb3JSb2NrUmlkZ2UoaXNvRGF0YTogQnVmZmVyKTogdm9pZCB7XG5cdFx0Y29uc3QgZGlyID0gdGhpcy5nZXREaXJlY3RvcnkoaXNvRGF0YSk7XG5cdFx0dGhpcy5fcm9ja1JpZGdlT2Zmc2V0ID0gZGlyLmdldERvdEVudHJ5KGlzb0RhdGEpLl9nZXRSb2NrUmlkZ2VPZmZzZXQoaXNvRGF0YSk7XG5cdFx0aWYgKHRoaXMuX3JvY2tSaWRnZU9mZnNldCA+IC0xKSB7XG5cdFx0XHQvLyBXaXBlIG91dCBkaXJlY3RvcnkuIFN0YXJ0IG92ZXIgd2l0aCBSUiBrbm93bGVkZ2UuXG5cdFx0XHR0aGlzLl9maWxlT3JEaXIgPSBudWxsO1xuXHRcdH1cblx0fVxuXHRwdWJsaWMgbGVuZ3RoKCk6IG51bWJlciB7XG5cdFx0cmV0dXJuIHRoaXMuX2RhdGFbMF07XG5cdH1cblx0cHVibGljIGV4dGVuZGVkQXR0cmlidXRlUmVjb3JkTGVuZ3RoKCk6IG51bWJlciB7XG5cdFx0cmV0dXJuIHRoaXMuX2RhdGFbMV07XG5cdH1cblx0cHVibGljIGxiYSgpOiBudW1iZXIge1xuXHRcdHJldHVybiB0aGlzLl9kYXRhLnJlYWRVSW50MzJMRSgyKSAqIDIwNDg7XG5cdH1cblx0cHVibGljIGRhdGFMZW5ndGgoKTogbnVtYmVyIHtcblx0XHRyZXR1cm4gdGhpcy5fZGF0YS5yZWFkVUludDMyTEUoMTApO1xuXHR9XG5cdHB1YmxpYyByZWNvcmRpbmdEYXRlKCk6IERhdGUge1xuXHRcdHJldHVybiBnZXRTaG9ydEZvcm1EYXRlKHRoaXMuX2RhdGEsIDE4KTtcblx0fVxuXHRwdWJsaWMgZmlsZUZsYWdzKCk6IG51bWJlciB7XG5cdFx0cmV0dXJuIHRoaXMuX2RhdGFbMjVdO1xuXHR9XG5cdHB1YmxpYyBmaWxlVW5pdFNpemUoKTogbnVtYmVyIHtcblx0XHRyZXR1cm4gdGhpcy5fZGF0YVsyNl07XG5cdH1cblx0cHVibGljIGludGVybGVhdmVHYXBTaXplKCk6IG51bWJlciB7XG5cdFx0cmV0dXJuIHRoaXMuX2RhdGFbMjddO1xuXHR9XG5cdHB1YmxpYyB2b2x1bWVTZXF1ZW5jZU51bWJlcigpOiBudW1iZXIge1xuXHRcdHJldHVybiB0aGlzLl9kYXRhLnJlYWRVSW50MTZMRSgyOCk7XG5cdH1cblx0cHVibGljIGlkZW50aWZpZXIoKTogc3RyaW5nIHtcblx0XHRyZXR1cm4gdGhpcy5fZ2V0U3RyaW5nKDMzLCB0aGlzLl9kYXRhWzMyXSk7XG5cdH1cblx0cHVibGljIGZpbGVOYW1lKGlzb0RhdGE6IEJ1ZmZlcik6IHN0cmluZyB7XG5cdFx0aWYgKHRoaXMuaGFzUm9ja1JpZGdlKCkpIHtcblx0XHRcdGNvbnN0IGZuID0gdGhpcy5fcm9ja1JpZGdlRmlsZW5hbWUoaXNvRGF0YSk7XG5cdFx0XHRpZiAoZm4gIT09IG51bGwpIHtcblx0XHRcdFx0cmV0dXJuIGZuO1xuXHRcdFx0fVxuXHRcdH1cblx0XHRjb25zdCBpZGVudCA9IHRoaXMuaWRlbnRpZmllcigpO1xuXHRcdGlmICh0aGlzLmlzRGlyZWN0b3J5KGlzb0RhdGEpKSB7XG5cdFx0XHRyZXR1cm4gaWRlbnQ7XG5cdFx0fVxuXHRcdC8vIEZpbGVzOlxuXHRcdC8vIC0gTVVTVCBoYXZlIDB4MkUgKC4pIHNlcGFyYXRpbmcgdGhlIG5hbWUgZnJvbSB0aGUgZXh0ZW5zaW9uXG5cdFx0Ly8gLSBNVVNUIGhhdmUgMHgzQiAoOykgc2VwYXJhdGluZyB0aGUgZmlsZSBuYW1lIGFuZCBleHRlbnNpb24gZnJvbSB0aGUgdmVyc2lvblxuXHRcdC8vIEdldHMgZXhwYW5kZWQgdG8gdHdvLWJ5dGUgY2hhciBpbiBVbmljb2RlIGRpcmVjdG9yeSByZWNvcmRzLlxuXHRcdGNvbnN0IHZlcnNpb25TZXBhcmF0b3IgPSBpZGVudC5pbmRleE9mKCc7Jyk7XG5cdFx0aWYgKHZlcnNpb25TZXBhcmF0b3IgPT09IC0xKSB7XG5cdFx0XHQvLyBTb21lIEpvbGlldCBmaWxlbmFtZXMgbGFjayB0aGUgdmVyc2lvbiBzZXBhcmF0b3IsIGRlc3BpdGUgdGhlIHN0YW5kYXJkXG5cdFx0XHQvLyBzcGVjaWZ5aW5nIHRoYXQgaXQgc2hvdWxkIGJlIHRoZXJlLlxuXHRcdFx0cmV0dXJuIGlkZW50O1xuXHRcdH0gZWxzZSBpZiAoaWRlbnRbdmVyc2lvblNlcGFyYXRvciAtIDFdID09PSAnLicpIHtcblx0XHRcdC8vIEVtcHR5IGV4dGVuc2lvbi4gRG8gbm90IGluY2x1ZGUgJy4nIGluIHRoZSBmaWxlbmFtZS5cblx0XHRcdHJldHVybiBpZGVudC5zbGljZSgwLCB2ZXJzaW9uU2VwYXJhdG9yIC0gMSk7XG5cdFx0fSBlbHNlIHtcblx0XHRcdC8vIEluY2x1ZGUgdXAgdG8gdmVyc2lvbiBzZXBhcmF0b3IuXG5cdFx0XHRyZXR1cm4gaWRlbnQuc2xpY2UoMCwgdmVyc2lvblNlcGFyYXRvcik7XG5cdFx0fVxuXHR9XG5cdHB1YmxpYyBpc0RpcmVjdG9yeShpc29EYXRhOiBCdWZmZXIpOiBib29sZWFuIHtcblx0XHRsZXQgcnYgPSAhISh0aGlzLmZpbGVGbGFncygpICYgRmlsZUZsYWdzLkRpcmVjdG9yeSk7XG5cdFx0Ly8gSWYgaXQgbGFja3MgdGhlIERpcmVjdG9yeSBmbGFnLCBpdCBtYXkgc3RpbGwgYmUgYSBkaXJlY3RvcnkgaWYgd2UndmUgZXhjZWVkZWQgdGhlIGRpcmVjdG9yeVxuXHRcdC8vIGRlcHRoIGxpbWl0LiBSb2NrIFJpZGdlIG1hcmtzIHRoZXNlIGFzIGZpbGVzIGFuZCBhZGRzIGEgc3BlY2lhbCBhdHRyaWJ1dGUuXG5cdFx0aWYgKCFydiAmJiB0aGlzLmhhc1JvY2tSaWRnZSgpKSB7XG5cdFx0XHRydiA9IHRoaXMuZ2V0U1VFbnRyaWVzKGlzb0RhdGEpLmZpbHRlcihlID0+IGUgaW5zdGFuY2VvZiBDTEVudHJ5KS5sZW5ndGggPiAwO1xuXHRcdH1cblx0XHRyZXR1cm4gcnY7XG5cdH1cblx0cHVibGljIGlzU3ltbGluayhpc29EYXRhOiBCdWZmZXIpOiBib29sZWFuIHtcblx0XHRyZXR1cm4gdGhpcy5oYXNSb2NrUmlkZ2UoKSAmJiB0aGlzLmdldFNVRW50cmllcyhpc29EYXRhKS5maWx0ZXIoZSA9PiBlIGluc3RhbmNlb2YgU0xFbnRyeSkubGVuZ3RoID4gMDtcblx0fVxuXHRwdWJsaWMgZ2V0U3ltbGlua1BhdGgoaXNvRGF0YTogQnVmZmVyKTogc3RyaW5nIHtcblx0XHRsZXQgcCA9ICcnO1xuXHRcdGNvbnN0IGVudHJpZXMgPSB0aGlzLmdldFNVRW50cmllcyhpc29EYXRhKTtcblx0XHRjb25zdCBnZXRTdHIgPSB0aGlzLl9nZXRHZXRTdHJpbmcoKTtcblx0XHRmb3IgKGNvbnN0IGVudHJ5IG9mIGVudHJpZXMpIHtcblx0XHRcdGlmIChlbnRyeSBpbnN0YW5jZW9mIFNMRW50cnkpIHtcblx0XHRcdFx0Y29uc3QgY29tcG9uZW50cyA9IGVudHJ5LmNvbXBvbmVudFJlY29yZHMoKTtcblx0XHRcdFx0Zm9yIChjb25zdCBjb21wb25lbnQgb2YgY29tcG9uZW50cykge1xuXHRcdFx0XHRcdGNvbnN0IGZsYWdzID0gY29tcG9uZW50LmZsYWdzKCk7XG5cdFx0XHRcdFx0aWYgKGZsYWdzICYgU0xDb21wb25lbnRGbGFncy5DVVJSRU5UKSB7XG5cdFx0XHRcdFx0XHRwICs9ICcuLyc7XG5cdFx0XHRcdFx0fSBlbHNlIGlmIChmbGFncyAmIFNMQ29tcG9uZW50RmxhZ3MuUEFSRU5UKSB7XG5cdFx0XHRcdFx0XHRwICs9ICcuLi8nO1xuXHRcdFx0XHRcdH0gZWxzZSBpZiAoZmxhZ3MgJiBTTENvbXBvbmVudEZsYWdzLlJPT1QpIHtcblx0XHRcdFx0XHRcdHAgKz0gJy8nO1xuXHRcdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0XHRwICs9IGNvbXBvbmVudC5jb250ZW50KGdldFN0cik7XG5cdFx0XHRcdFx0XHRpZiAoIShmbGFncyAmIFNMQ29tcG9uZW50RmxhZ3MuQ09OVElOVUUpKSB7XG5cdFx0XHRcdFx0XHRcdHAgKz0gJy8nO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0XHRpZiAoIWVudHJ5LmNvbnRpbnVlRmxhZygpKSB7XG5cdFx0XHRcdFx0Ly8gV2UgYXJlIGRvbmUgd2l0aCB0aGlzIGxpbmsuXG5cdFx0XHRcdFx0YnJlYWs7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9XG5cdFx0aWYgKHAubGVuZ3RoID4gMSAmJiBwW3AubGVuZ3RoIC0gMV0gPT09ICcvJykge1xuXHRcdFx0Ly8gVHJpbSB0cmFpbGluZyAnLycuXG5cdFx0XHRyZXR1cm4gcC5zbGljZSgwLCBwLmxlbmd0aCAtIDEpO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHRyZXR1cm4gcDtcblx0XHR9XG5cdH1cblx0cHVibGljIGdldEZpbGUoaXNvRGF0YTogQnVmZmVyKTogQnVmZmVyIHtcblx0XHRpZiAodGhpcy5pc0RpcmVjdG9yeShpc29EYXRhKSkge1xuXHRcdFx0dGhyb3cgbmV3IEVycm9yKGBUcmllZCB0byBnZXQgYSBGaWxlIGZyb20gYSBkaXJlY3RvcnkuYCk7XG5cdFx0fVxuXHRcdGlmICh0aGlzLl9maWxlT3JEaXIgPT09IG51bGwpIHtcblx0XHRcdHRoaXMuX2ZpbGVPckRpciA9IGlzb0RhdGEuc2xpY2UodGhpcy5sYmEoKSwgdGhpcy5sYmEoKSArIHRoaXMuZGF0YUxlbmd0aCgpKTtcblx0XHR9XG5cdFx0cmV0dXJuIDxCdWZmZXI+dGhpcy5fZmlsZU9yRGlyO1xuXHR9XG5cdHB1YmxpYyBnZXREaXJlY3RvcnkoaXNvRGF0YTogQnVmZmVyKTogRGlyZWN0b3J5PERpcmVjdG9yeVJlY29yZD4ge1xuXHRcdGlmICghdGhpcy5pc0RpcmVjdG9yeShpc29EYXRhKSkge1xuXHRcdFx0dGhyb3cgbmV3IEVycm9yKGBUcmllZCB0byBnZXQgYSBEaXJlY3RvcnkgZnJvbSBhIGZpbGUuYCk7XG5cdFx0fVxuXHRcdGlmICh0aGlzLl9maWxlT3JEaXIgPT09IG51bGwpIHtcblx0XHRcdHRoaXMuX2ZpbGVPckRpciA9IHRoaXMuX2NvbnN0cnVjdERpcmVjdG9yeShpc29EYXRhKTtcblx0XHR9XG5cdFx0cmV0dXJuIDxEaXJlY3Rvcnk8dGhpcz4+dGhpcy5fZmlsZU9yRGlyO1xuXHR9XG5cdHB1YmxpYyBnZXRTVUVudHJpZXMoaXNvRGF0YTogQnVmZmVyKTogU3lzdGVtVXNlRW50cnlbXSB7XG5cdFx0aWYgKCF0aGlzLl9zdUVudHJpZXMpIHtcblx0XHRcdHRoaXMuX2NvbnN0cnVjdFNVRW50cmllcyhpc29EYXRhKTtcblx0XHR9XG5cdFx0cmV0dXJuIHRoaXMuX3N1RW50cmllcyE7XG5cdH1cblx0cHJvdGVjdGVkIGFic3RyYWN0IF9nZXRTdHJpbmcoaTogbnVtYmVyLCBsZW46IG51bWJlcik6IHN0cmluZztcblx0cHJvdGVjdGVkIGFic3RyYWN0IF9nZXRHZXRTdHJpbmcoKTogVEdldFN0cmluZztcblx0cHJvdGVjdGVkIGFic3RyYWN0IF9jb25zdHJ1Y3REaXJlY3RvcnkoaXNvRGF0YTogQnVmZmVyKTogRGlyZWN0b3J5PERpcmVjdG9yeVJlY29yZD47XG5cdHByb3RlY3RlZCBfcm9ja1JpZGdlRmlsZW5hbWUoaXNvRGF0YTogQnVmZmVyKTogc3RyaW5nIHwgbnVsbCB7XG5cdFx0Y29uc3Qgbm1FbnRyaWVzID0gPE5NRW50cnlbXT50aGlzLmdldFNVRW50cmllcyhpc29EYXRhKS5maWx0ZXIoZSA9PiBlIGluc3RhbmNlb2YgTk1FbnRyeSk7XG5cdFx0aWYgKG5tRW50cmllcy5sZW5ndGggPT09IDAgfHwgbm1FbnRyaWVzWzBdLmZsYWdzKCkgJiAoTk1GbGFncy5DVVJSRU5UIHwgTk1GbGFncy5QQVJFTlQpKSB7XG5cdFx0XHRyZXR1cm4gbnVsbDtcblx0XHR9XG5cdFx0bGV0IHN0ciA9ICcnO1xuXHRcdGNvbnN0IGdldFN0cmluZyA9IHRoaXMuX2dldEdldFN0cmluZygpO1xuXHRcdGZvciAoY29uc3QgZSBvZiBubUVudHJpZXMpIHtcblx0XHRcdHN0ciArPSBlLm5hbWUoZ2V0U3RyaW5nKTtcblx0XHRcdGlmICghKGUuZmxhZ3MoKSAmIE5NRmxhZ3MuQ09OVElOVUUpKSB7XG5cdFx0XHRcdGJyZWFrO1xuXHRcdFx0fVxuXHRcdH1cblx0XHRyZXR1cm4gc3RyO1xuXHR9XG5cdHByaXZhdGUgX2NvbnN0cnVjdFNVRW50cmllcyhpc29EYXRhOiBCdWZmZXIpOiB2b2lkIHtcblx0XHRsZXQgaSA9IDMzICsgdGhpcy5fZGF0YVszMl07XG5cdFx0aWYgKGkgJSAyID09PSAxKSB7XG5cdFx0XHQvLyBTa2lwIHBhZGRpbmcgZmllbGQuXG5cdFx0XHRpKys7XG5cdFx0fVxuXHRcdGkgKz0gdGhpcy5fcm9ja1JpZGdlT2Zmc2V0O1xuXHRcdHRoaXMuX3N1RW50cmllcyA9IGNvbnN0cnVjdFN5c3RlbVVzZUVudHJpZXModGhpcy5fZGF0YSwgaSwgdGhpcy5sZW5ndGgoKSwgaXNvRGF0YSk7XG5cdH1cblx0LyoqXG5cdCAqICEhT05MWSBWQUxJRCBPTiBGSVJTVCBFTlRSWSBPRiBST09UIERJUkVDVE9SWSEhXG5cdCAqIFJldHVybnMgLTEgaWYgcm9jayByaWRnZSBpcyBub3QgZW5hYmxlZC4gT3RoZXJ3aXNlLCByZXR1cm5zIHRoZSBvZmZzZXRcblx0ICogYXQgd2hpY2ggc3lzdGVtIHVzZSBmaWVsZHMgYmVnaW4uXG5cdCAqL1xuXHRwcml2YXRlIF9nZXRSb2NrUmlkZ2VPZmZzZXQoaXNvRGF0YTogQnVmZmVyKTogbnVtYmVyIHtcblx0XHQvLyBJbiB0aGUgd29yc3QgY2FzZSwgd2UgZ2V0IHNvbWUgZ2FyYmFnZSBTVSBlbnRyaWVzLlxuXHRcdC8vIEZ1ZGdlIG9mZnNldCB0byAwIGJlZm9yZSBwcm9jZWVkaW5nLlxuXHRcdHRoaXMuX3JvY2tSaWRnZU9mZnNldCA9IDA7XG5cdFx0Y29uc3Qgc3VFbnRyaWVzID0gdGhpcy5nZXRTVUVudHJpZXMoaXNvRGF0YSk7XG5cdFx0aWYgKHN1RW50cmllcy5sZW5ndGggPiAwKSB7XG5cdFx0XHRjb25zdCBzcEVudHJ5ID0gc3VFbnRyaWVzWzBdO1xuXHRcdFx0aWYgKHNwRW50cnkgaW5zdGFuY2VvZiBTUEVudHJ5ICYmIHNwRW50cnkuY2hlY2tCeXRlc1Bhc3MoKSkge1xuXHRcdFx0XHQvLyBTVVNQIGlzIGluIHVzZS5cblx0XHRcdFx0Zm9yIChsZXQgaSA9IDE7IGkgPCBzdUVudHJpZXMubGVuZ3RoOyBpKyspIHtcblx0XHRcdFx0XHRjb25zdCBlbnRyeSA9IHN1RW50cmllc1tpXTtcblx0XHRcdFx0XHRpZiAoZW50cnkgaW5zdGFuY2VvZiBSUkVudHJ5IHx8IChlbnRyeSBpbnN0YW5jZW9mIEVSRW50cnkgJiYgZW50cnkuZXh0ZW5zaW9uSWRlbnRpZmllcigpID09PSByb2NrUmlkZ2VJZGVudGlmaWVyKSkge1xuXHRcdFx0XHRcdFx0Ly8gUm9jayBSaWRnZSBpcyBpbiB1c2UhXG5cdFx0XHRcdFx0XHRyZXR1cm4gc3BFbnRyeS5ieXRlc1NraXBwZWQoKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9XG5cdFx0Ly8gRmFpbGVkLlxuXHRcdHRoaXMuX3JvY2tSaWRnZU9mZnNldCA9IC0xO1xuXHRcdHJldHVybiAtMTtcblx0fVxufVxuXG4vKipcbiAqIEBoaWRkZW5cbiAqL1xuY2xhc3MgSVNPRGlyZWN0b3J5UmVjb3JkIGV4dGVuZHMgRGlyZWN0b3J5UmVjb3JkIHtcblx0Y29uc3RydWN0b3IoZGF0YTogQnVmZmVyLCByb2NrUmlkZ2VPZmZzZXQ6IG51bWJlcikge1xuXHRcdHN1cGVyKGRhdGEsIHJvY2tSaWRnZU9mZnNldCk7XG5cdH1cblx0cHJvdGVjdGVkIF9nZXRTdHJpbmcoaTogbnVtYmVyLCBsZW46IG51bWJlcik6IHN0cmluZyB7XG5cdFx0cmV0dXJuIGdldEFTQ0lJU3RyaW5nKHRoaXMuX2RhdGEsIGksIGxlbik7XG5cdH1cblx0cHJvdGVjdGVkIF9jb25zdHJ1Y3REaXJlY3RvcnkoaXNvRGF0YTogQnVmZmVyKTogRGlyZWN0b3J5PERpcmVjdG9yeVJlY29yZD4ge1xuXHRcdHJldHVybiBuZXcgSVNPRGlyZWN0b3J5KHRoaXMsIGlzb0RhdGEpO1xuXHR9XG5cdHByb3RlY3RlZCBfZ2V0R2V0U3RyaW5nKCk6IFRHZXRTdHJpbmcge1xuXHRcdHJldHVybiBnZXRBU0NJSVN0cmluZztcblx0fVxufVxuXG4vKipcbiAqIEBoaWRkZW5cbiAqL1xuY2xhc3MgSm9saWV0RGlyZWN0b3J5UmVjb3JkIGV4dGVuZHMgRGlyZWN0b3J5UmVjb3JkIHtcblx0Y29uc3RydWN0b3IoZGF0YTogQnVmZmVyLCByb2NrUmlkZ2VPZmZzZXQ6IG51bWJlcikge1xuXHRcdHN1cGVyKGRhdGEsIHJvY2tSaWRnZU9mZnNldCk7XG5cdH1cblx0cHJvdGVjdGVkIF9nZXRTdHJpbmcoaTogbnVtYmVyLCBsZW46IG51bWJlcik6IHN0cmluZyB7XG5cdFx0cmV0dXJuIGdldEpvbGlldFN0cmluZyh0aGlzLl9kYXRhLCBpLCBsZW4pO1xuXHR9XG5cdHByb3RlY3RlZCBfY29uc3RydWN0RGlyZWN0b3J5KGlzb0RhdGE6IEJ1ZmZlcik6IERpcmVjdG9yeTxEaXJlY3RvcnlSZWNvcmQ+IHtcblx0XHRyZXR1cm4gbmV3IEpvbGlldERpcmVjdG9yeSh0aGlzLCBpc29EYXRhKTtcblx0fVxuXHRwcm90ZWN0ZWQgX2dldEdldFN0cmluZygpOiBUR2V0U3RyaW5nIHtcblx0XHRyZXR1cm4gZ2V0Sm9saWV0U3RyaW5nO1xuXHR9XG59XG5cbi8qKlxuICogQGhpZGRlblxuICovXG5jb25zdCBlbnVtIFN5c3RlbVVzZUVudHJ5U2lnbmF0dXJlcyB7XG5cdENFID0gMHg0MzQ1LFxuXHRQRCA9IDB4NTA0NCxcblx0U1AgPSAweDUzNTAsXG5cdFNUID0gMHg1MzU0LFxuXHRFUiA9IDB4NDU1Mixcblx0RVMgPSAweDQ1NTMsXG5cdFBYID0gMHg1MDU4LFxuXHRQTiA9IDB4NTA0ZSxcblx0U0wgPSAweDUzNGMsXG5cdE5NID0gMHg0ZTRkLFxuXHRDTCA9IDB4NDM0Yyxcblx0UEwgPSAweDUwNGMsXG5cdFJFID0gMHg1MjQ1LFxuXHRURiA9IDB4NTQ0Nixcblx0U0YgPSAweDUzNDYsXG5cdFJSID0gMHg1MjUyLFxufVxuXG4vKipcbiAqIEBoaWRkZW5cbiAqL1xuY2xhc3MgU3lzdGVtVXNlRW50cnkge1xuXHRwcm90ZWN0ZWQgX2RhdGE6IEJ1ZmZlcjtcblx0Y29uc3RydWN0b3IoZGF0YTogQnVmZmVyKSB7XG5cdFx0dGhpcy5fZGF0YSA9IGRhdGE7XG5cdH1cblx0cHVibGljIHNpZ25hdHVyZVdvcmQoKTogU3lzdGVtVXNlRW50cnlTaWduYXR1cmVzIHtcblx0XHRyZXR1cm4gdGhpcy5fZGF0YS5yZWFkVUludDE2QkUoMCk7XG5cdH1cblx0cHVibGljIHNpZ25hdHVyZVdvcmRTdHJpbmcoKTogc3RyaW5nIHtcblx0XHRyZXR1cm4gZ2V0QVNDSUlTdHJpbmcodGhpcy5fZGF0YSwgMCwgMik7XG5cdH1cblx0cHVibGljIGxlbmd0aCgpOiBudW1iZXIge1xuXHRcdHJldHVybiB0aGlzLl9kYXRhWzJdO1xuXHR9XG5cdHB1YmxpYyBzdVZlcnNpb24oKTogbnVtYmVyIHtcblx0XHRyZXR1cm4gdGhpcy5fZGF0YVszXTtcblx0fVxufVxuXG4vKipcbiAqIENvbnRpbnVhdGlvbiBlbnRyeS5cbiAqIEBoaWRkZW5cbiAqL1xuY2xhc3MgQ0VFbnRyeSBleHRlbmRzIFN5c3RlbVVzZUVudHJ5IHtcblx0cHJpdmF0ZSBfZW50cmllczogU3lzdGVtVXNlRW50cnlbXSB8IG51bGwgPSBudWxsO1xuXHRjb25zdHJ1Y3RvcihkYXRhOiBCdWZmZXIpIHtcblx0XHRzdXBlcihkYXRhKTtcblx0fVxuXHQvKipcblx0ICogTG9naWNhbCBibG9jayBhZGRyZXNzIG9mIHRoZSBjb250aW51YXRpb24gYXJlYS5cblx0ICovXG5cdHB1YmxpYyBjb250aW51YXRpb25MYmEoKTogbnVtYmVyIHtcblx0XHRyZXR1cm4gdGhpcy5fZGF0YS5yZWFkVUludDMyTEUoNCk7XG5cdH1cblx0LyoqXG5cdCAqIE9mZnNldCBpbnRvIHRoZSBsb2dpY2FsIGJsb2NrLlxuXHQgKi9cblx0cHVibGljIGNvbnRpbnVhdGlvbkxiYU9mZnNldCgpOiBudW1iZXIge1xuXHRcdHJldHVybiB0aGlzLl9kYXRhLnJlYWRVSW50MzJMRSgxMik7XG5cdH1cblx0LyoqXG5cdCAqIExlbmd0aCBvZiB0aGUgY29udGludWF0aW9uIGFyZWEuXG5cdCAqL1xuXHRwdWJsaWMgY29udGludWF0aW9uTGVuZ3RoKCk6IG51bWJlciB7XG5cdFx0cmV0dXJuIHRoaXMuX2RhdGEucmVhZFVJbnQzMkxFKDIwKTtcblx0fVxuXHRwdWJsaWMgZ2V0RW50cmllcyhpc29EYXRhOiBCdWZmZXIpOiBTeXN0ZW1Vc2VFbnRyeVtdIHtcblx0XHRpZiAoIXRoaXMuX2VudHJpZXMpIHtcblx0XHRcdGNvbnN0IHN0YXJ0ID0gdGhpcy5jb250aW51YXRpb25MYmEoKSAqIDIwNDggKyB0aGlzLmNvbnRpbnVhdGlvbkxiYU9mZnNldCgpO1xuXHRcdFx0dGhpcy5fZW50cmllcyA9IGNvbnN0cnVjdFN5c3RlbVVzZUVudHJpZXMoaXNvRGF0YSwgc3RhcnQsIHRoaXMuY29udGludWF0aW9uTGVuZ3RoKCksIGlzb0RhdGEpO1xuXHRcdH1cblx0XHRyZXR1cm4gdGhpcy5fZW50cmllcztcblx0fVxufVxuXG4vKipcbiAqIFBhZGRpbmcgZW50cnkuXG4gKiBAaGlkZGVuXG4gKi9cbmNsYXNzIFBERW50cnkgZXh0ZW5kcyBTeXN0ZW1Vc2VFbnRyeSB7XG5cdGNvbnN0cnVjdG9yKGRhdGE6IEJ1ZmZlcikge1xuXHRcdHN1cGVyKGRhdGEpO1xuXHR9XG59XG5cbi8qKlxuICogSWRlbnRpZmllcyB0aGF0IFNVU1AgaXMgaW4tdXNlLlxuICogQGhpZGRlblxuICovXG5jbGFzcyBTUEVudHJ5IGV4dGVuZHMgU3lzdGVtVXNlRW50cnkge1xuXHRjb25zdHJ1Y3RvcihkYXRhOiBCdWZmZXIpIHtcblx0XHRzdXBlcihkYXRhKTtcblx0fVxuXHRwdWJsaWMgY2hlY2tCeXRlc1Bhc3MoKTogYm9vbGVhbiB7XG5cdFx0cmV0dXJuIHRoaXMuX2RhdGFbNF0gPT09IDB4YmUgJiYgdGhpcy5fZGF0YVs1XSA9PT0gMHhlZjtcblx0fVxuXHRwdWJsaWMgYnl0ZXNTa2lwcGVkKCk6IG51bWJlciB7XG5cdFx0cmV0dXJuIHRoaXMuX2RhdGFbNl07XG5cdH1cbn1cblxuLyoqXG4gKiBJZGVudGlmaWVzIHRoZSBlbmQgb2YgdGhlIFNVU1AgZW50cmllcy5cbiAqIEBoaWRkZW5cbiAqL1xuY2xhc3MgU1RFbnRyeSBleHRlbmRzIFN5c3RlbVVzZUVudHJ5IHtcblx0Y29uc3RydWN0b3IoZGF0YTogQnVmZmVyKSB7XG5cdFx0c3VwZXIoZGF0YSk7XG5cdH1cbn1cblxuLyoqXG4gKiBTcGVjaWZpZXMgc3lzdGVtLXNwZWNpZmljIGV4dGVuc2lvbnMgdG8gU1VTUC5cbiAqIEBoaWRkZW5cbiAqL1xuY2xhc3MgRVJFbnRyeSBleHRlbmRzIFN5c3RlbVVzZUVudHJ5IHtcblx0Y29uc3RydWN0b3IoZGF0YTogQnVmZmVyKSB7XG5cdFx0c3VwZXIoZGF0YSk7XG5cdH1cblx0cHVibGljIGlkZW50aWZpZXJMZW5ndGgoKTogbnVtYmVyIHtcblx0XHRyZXR1cm4gdGhpcy5fZGF0YVs0XTtcblx0fVxuXHRwdWJsaWMgZGVzY3JpcHRvckxlbmd0aCgpOiBudW1iZXIge1xuXHRcdHJldHVybiB0aGlzLl9kYXRhWzVdO1xuXHR9XG5cdHB1YmxpYyBzb3VyY2VMZW5ndGgoKTogbnVtYmVyIHtcblx0XHRyZXR1cm4gdGhpcy5fZGF0YVs2XTtcblx0fVxuXHRwdWJsaWMgZXh0ZW5zaW9uVmVyc2lvbigpOiBudW1iZXIge1xuXHRcdHJldHVybiB0aGlzLl9kYXRhWzddO1xuXHR9XG5cdHB1YmxpYyBleHRlbnNpb25JZGVudGlmaWVyKCk6IHN0cmluZyB7XG5cdFx0cmV0dXJuIGdldEFTQ0lJU3RyaW5nKHRoaXMuX2RhdGEsIDgsIHRoaXMuaWRlbnRpZmllckxlbmd0aCgpKTtcblx0fVxuXHRwdWJsaWMgZXh0ZW5zaW9uRGVzY3JpcHRvcigpOiBzdHJpbmcge1xuXHRcdHJldHVybiBnZXRBU0NJSVN0cmluZyh0aGlzLl9kYXRhLCA4ICsgdGhpcy5pZGVudGlmaWVyTGVuZ3RoKCksIHRoaXMuZGVzY3JpcHRvckxlbmd0aCgpKTtcblx0fVxuXHRwdWJsaWMgZXh0ZW5zaW9uU291cmNlKCk6IHN0cmluZyB7XG5cdFx0cmV0dXJuIGdldEFTQ0lJU3RyaW5nKHRoaXMuX2RhdGEsIDggKyB0aGlzLmlkZW50aWZpZXJMZW5ndGgoKSArIHRoaXMuZGVzY3JpcHRvckxlbmd0aCgpLCB0aGlzLnNvdXJjZUxlbmd0aCgpKTtcblx0fVxufVxuXG4vKipcbiAqIEBoaWRkZW5cbiAqL1xuY2xhc3MgRVNFbnRyeSBleHRlbmRzIFN5c3RlbVVzZUVudHJ5IHtcblx0Y29uc3RydWN0b3IoZGF0YTogQnVmZmVyKSB7XG5cdFx0c3VwZXIoZGF0YSk7XG5cdH1cblx0cHVibGljIGV4dGVuc2lvblNlcXVlbmNlKCk6IG51bWJlciB7XG5cdFx0cmV0dXJuIHRoaXMuX2RhdGFbNF07XG5cdH1cbn1cblxuLyoqXG4gKiBSb2NrUmlkZ2U6IE1hcmtzIHRoYXQgUm9ja1JpZGdlIGlzIGluIHVzZSBbZGVwcmVjYXRlZF1cbiAqIEBoaWRkZW5cbiAqL1xuY2xhc3MgUlJFbnRyeSBleHRlbmRzIFN5c3RlbVVzZUVudHJ5IHtcblx0Y29uc3RydWN0b3IoZGF0YTogQnVmZmVyKSB7XG5cdFx0c3VwZXIoZGF0YSk7XG5cdH1cbn1cblxuLyoqXG4gKiBSb2NrUmlkZ2U6IFJlY29yZHMgUE9TSVggZmlsZSBhdHRyaWJ1dGVzLlxuICogQGhpZGRlblxuICovXG5jbGFzcyBQWEVudHJ5IGV4dGVuZHMgU3lzdGVtVXNlRW50cnkge1xuXHRjb25zdHJ1Y3RvcihkYXRhOiBCdWZmZXIpIHtcblx0XHRzdXBlcihkYXRhKTtcblx0fVxuXHRwdWJsaWMgbW9kZSgpOiBudW1iZXIge1xuXHRcdHJldHVybiB0aGlzLl9kYXRhLnJlYWRVSW50MzJMRSg0KTtcblx0fVxuXHRwdWJsaWMgZmlsZUxpbmtzKCk6IG51bWJlciB7XG5cdFx0cmV0dXJuIHRoaXMuX2RhdGEucmVhZFVJbnQzMkxFKDEyKTtcblx0fVxuXHRwdWJsaWMgdWlkKCk6IG51bWJlciB7XG5cdFx0cmV0dXJuIHRoaXMuX2RhdGEucmVhZFVJbnQzMkxFKDIwKTtcblx0fVxuXHRwdWJsaWMgZ2lkKCk6IG51bWJlciB7XG5cdFx0cmV0dXJuIHRoaXMuX2RhdGEucmVhZFVJbnQzMkxFKDI4KTtcblx0fVxuXHRwdWJsaWMgaW5vZGUoKTogbnVtYmVyIHtcblx0XHRyZXR1cm4gdGhpcy5fZGF0YS5yZWFkVUludDMyTEUoMzYpO1xuXHR9XG59XG5cbi8qKlxuICogUm9ja1JpZGdlOiBSZWNvcmRzIFBPU0lYIGRldmljZSBudW1iZXIuXG4gKiBAaGlkZGVuXG4gKi9cbmNsYXNzIFBORW50cnkgZXh0ZW5kcyBTeXN0ZW1Vc2VFbnRyeSB7XG5cdGNvbnN0cnVjdG9yKGRhdGE6IEJ1ZmZlcikge1xuXHRcdHN1cGVyKGRhdGEpO1xuXHR9XG5cdHB1YmxpYyBkZXZUSGlnaCgpOiBudW1iZXIge1xuXHRcdHJldHVybiB0aGlzLl9kYXRhLnJlYWRVSW50MzJMRSg0KTtcblx0fVxuXHRwdWJsaWMgZGV2VExvdygpOiBudW1iZXIge1xuXHRcdHJldHVybiB0aGlzLl9kYXRhLnJlYWRVSW50MzJMRSgxMik7XG5cdH1cbn1cblxuLyoqXG4gKiBSb2NrUmlkZ2U6IFJlY29yZHMgc3ltYm9saWMgbGlua1xuICogQGhpZGRlblxuICovXG5jbGFzcyBTTEVudHJ5IGV4dGVuZHMgU3lzdGVtVXNlRW50cnkge1xuXHRjb25zdHJ1Y3RvcihkYXRhOiBCdWZmZXIpIHtcblx0XHRzdXBlcihkYXRhKTtcblx0fVxuXHRwdWJsaWMgZmxhZ3MoKTogbnVtYmVyIHtcblx0XHRyZXR1cm4gdGhpcy5fZGF0YVs0XTtcblx0fVxuXHRwdWJsaWMgY29udGludWVGbGFnKCk6IG51bWJlciB7XG5cdFx0cmV0dXJuIHRoaXMuZmxhZ3MoKSAmIDB4MTtcblx0fVxuXHRwdWJsaWMgY29tcG9uZW50UmVjb3JkcygpOiBTTENvbXBvbmVudFJlY29yZFtdIHtcblx0XHRjb25zdCByZWNvcmRzID0gbmV3IEFycmF5PFNMQ29tcG9uZW50UmVjb3JkPigpO1xuXHRcdGxldCBpID0gNTtcblx0XHR3aGlsZSAoaSA8IHRoaXMubGVuZ3RoKCkpIHtcblx0XHRcdGNvbnN0IHJlY29yZCA9IG5ldyBTTENvbXBvbmVudFJlY29yZCh0aGlzLl9kYXRhLnNsaWNlKGkpKTtcblx0XHRcdHJlY29yZHMucHVzaChyZWNvcmQpO1xuXHRcdFx0aSArPSByZWNvcmQubGVuZ3RoKCk7XG5cdFx0fVxuXHRcdHJldHVybiByZWNvcmRzO1xuXHR9XG59XG5cbi8qKlxuICogQGhpZGRlblxuICovXG5jb25zdCBlbnVtIFNMQ29tcG9uZW50RmxhZ3Mge1xuXHRDT05USU5VRSA9IDEsXG5cdENVUlJFTlQgPSAxIDw8IDEsXG5cdFBBUkVOVCA9IDEgPDwgMixcblx0Uk9PVCA9IDEgPDwgMyxcbn1cblxuLyoqXG4gKiBAaGlkZGVuXG4gKi9cbmNsYXNzIFNMQ29tcG9uZW50UmVjb3JkIHtcblx0cHJpdmF0ZSBfZGF0YTogQnVmZmVyO1xuXHRjb25zdHJ1Y3RvcihkYXRhOiBCdWZmZXIpIHtcblx0XHR0aGlzLl9kYXRhID0gZGF0YTtcblx0fVxuXHRwdWJsaWMgZmxhZ3MoKTogU0xDb21wb25lbnRGbGFncyB7XG5cdFx0cmV0dXJuIHRoaXMuX2RhdGFbMF07XG5cdH1cblx0cHVibGljIGxlbmd0aCgpOiBudW1iZXIge1xuXHRcdHJldHVybiAyICsgdGhpcy5jb21wb25lbnRMZW5ndGgoKTtcblx0fVxuXHRwdWJsaWMgY29tcG9uZW50TGVuZ3RoKCk6IG51bWJlciB7XG5cdFx0cmV0dXJuIHRoaXMuX2RhdGFbMV07XG5cdH1cblx0cHVibGljIGNvbnRlbnQoZ2V0U3RyaW5nOiBUR2V0U3RyaW5nKTogc3RyaW5nIHtcblx0XHRyZXR1cm4gZ2V0U3RyaW5nKHRoaXMuX2RhdGEsIDIsIHRoaXMuY29tcG9uZW50TGVuZ3RoKCkpO1xuXHR9XG59XG5cbi8qKlxuICogQGhpZGRlblxuICovXG5jb25zdCBlbnVtIE5NRmxhZ3Mge1xuXHRDT05USU5VRSA9IDEsXG5cdENVUlJFTlQgPSAxIDw8IDEsXG5cdFBBUkVOVCA9IDEgPDwgMixcbn1cblxuLyoqXG4gKiBSb2NrUmlkZ2U6IFJlY29yZHMgYWx0ZXJuYXRlIGZpbGUgbmFtZVxuICogQGhpZGRlblxuICovXG5jbGFzcyBOTUVudHJ5IGV4dGVuZHMgU3lzdGVtVXNlRW50cnkge1xuXHRjb25zdHJ1Y3RvcihkYXRhOiBCdWZmZXIpIHtcblx0XHRzdXBlcihkYXRhKTtcblx0fVxuXHRwdWJsaWMgZmxhZ3MoKTogTk1GbGFncyB7XG5cdFx0cmV0dXJuIHRoaXMuX2RhdGFbNF07XG5cdH1cblx0cHVibGljIG5hbWUoZ2V0U3RyaW5nOiBUR2V0U3RyaW5nKTogc3RyaW5nIHtcblx0XHRyZXR1cm4gZ2V0U3RyaW5nKHRoaXMuX2RhdGEsIDUsIHRoaXMubGVuZ3RoKCkgLSA1KTtcblx0fVxufVxuXG4vKipcbiAqIFJvY2tSaWRnZTogUmVjb3JkcyBjaGlsZCBsaW5rXG4gKiBAaGlkZGVuXG4gKi9cbmNsYXNzIENMRW50cnkgZXh0ZW5kcyBTeXN0ZW1Vc2VFbnRyeSB7XG5cdGNvbnN0cnVjdG9yKGRhdGE6IEJ1ZmZlcikge1xuXHRcdHN1cGVyKGRhdGEpO1xuXHR9XG5cdHB1YmxpYyBjaGlsZERpcmVjdG9yeUxiYSgpOiBudW1iZXIge1xuXHRcdHJldHVybiB0aGlzLl9kYXRhLnJlYWRVSW50MzJMRSg0KTtcblx0fVxufVxuXG4vKipcbiAqIFJvY2tSaWRnZTogUmVjb3JkcyBwYXJlbnQgbGluay5cbiAqIEBoaWRkZW5cbiAqL1xuY2xhc3MgUExFbnRyeSBleHRlbmRzIFN5c3RlbVVzZUVudHJ5IHtcblx0Y29uc3RydWN0b3IoZGF0YTogQnVmZmVyKSB7XG5cdFx0c3VwZXIoZGF0YSk7XG5cdH1cblx0cHVibGljIHBhcmVudERpcmVjdG9yeUxiYSgpOiBudW1iZXIge1xuXHRcdHJldHVybiB0aGlzLl9kYXRhLnJlYWRVSW50MzJMRSg0KTtcblx0fVxufVxuXG4vKipcbiAqIFJvY2tSaWRnZTogUmVjb3JkcyByZWxvY2F0ZWQgZGlyZWN0b3J5LlxuICogQGhpZGRlblxuICovXG5jbGFzcyBSRUVudHJ5IGV4dGVuZHMgU3lzdGVtVXNlRW50cnkge1xuXHRjb25zdHJ1Y3RvcihkYXRhOiBCdWZmZXIpIHtcblx0XHRzdXBlcihkYXRhKTtcblx0fVxufVxuXG4vKipcbiAqIEBoaWRkZW5cbiAqL1xuY29uc3QgZW51bSBURkZsYWdzIHtcblx0Q1JFQVRJT04gPSAxLFxuXHRNT0RJRlkgPSAxIDw8IDEsXG5cdEFDQ0VTUyA9IDEgPDwgMixcblx0QVRUUklCVVRFUyA9IDEgPDwgMyxcblx0QkFDS1VQID0gMSA8PCA0LFxuXHRFWFBJUkFUSU9OID0gMSA8PCA1LFxuXHRFRkZFQ1RJVkUgPSAxIDw8IDYsXG5cdExPTkdfRk9STSA9IDEgPDwgNyxcbn1cblxuLyoqXG4gKiBSb2NrUmlkZ2U6IFJlY29yZHMgZmlsZSB0aW1lc3RhbXBzXG4gKiBAaGlkZGVuXG4gKi9cbmNsYXNzIFRGRW50cnkgZXh0ZW5kcyBTeXN0ZW1Vc2VFbnRyeSB7XG5cdGNvbnN0cnVjdG9yKGRhdGE6IEJ1ZmZlcikge1xuXHRcdHN1cGVyKGRhdGEpO1xuXHR9XG5cdHB1YmxpYyBmbGFncygpOiBudW1iZXIge1xuXHRcdHJldHVybiB0aGlzLl9kYXRhWzRdO1xuXHR9XG5cdHB1YmxpYyBjcmVhdGlvbigpOiBEYXRlIHwgbnVsbCB7XG5cdFx0aWYgKHRoaXMuZmxhZ3MoKSAmIFRGRmxhZ3MuQ1JFQVRJT04pIHtcblx0XHRcdGlmICh0aGlzLl9sb25nRm9ybURhdGVzKCkpIHtcblx0XHRcdFx0cmV0dXJuIGdldERhdGUodGhpcy5fZGF0YSwgNSk7XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRyZXR1cm4gZ2V0U2hvcnRGb3JtRGF0ZSh0aGlzLl9kYXRhLCA1KTtcblx0XHRcdH1cblx0XHR9IGVsc2Uge1xuXHRcdFx0cmV0dXJuIG51bGw7XG5cdFx0fVxuXHR9XG5cdHB1YmxpYyBtb2RpZnkoKTogRGF0ZSB8IG51bGwge1xuXHRcdGlmICh0aGlzLmZsYWdzKCkgJiBURkZsYWdzLk1PRElGWSkge1xuXHRcdFx0Y29uc3QgcHJldmlvdXNEYXRlcyA9IHRoaXMuZmxhZ3MoKSAmIFRGRmxhZ3MuQ1JFQVRJT04gPyAxIDogMDtcblx0XHRcdGlmICh0aGlzLl9sb25nRm9ybURhdGVzKCkpIHtcblx0XHRcdFx0cmV0dXJuIGdldERhdGUodGhpcy5fZGF0YSwgNSArIHByZXZpb3VzRGF0ZXMgKiAxNyk7XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRyZXR1cm4gZ2V0U2hvcnRGb3JtRGF0ZSh0aGlzLl9kYXRhLCA1ICsgcHJldmlvdXNEYXRlcyAqIDcpO1xuXHRcdFx0fVxuXHRcdH0gZWxzZSB7XG5cdFx0XHRyZXR1cm4gbnVsbDtcblx0XHR9XG5cdH1cblx0cHVibGljIGFjY2VzcygpOiBEYXRlIHwgbnVsbCB7XG5cdFx0aWYgKHRoaXMuZmxhZ3MoKSAmIFRGRmxhZ3MuQUNDRVNTKSB7XG5cdFx0XHRsZXQgcHJldmlvdXNEYXRlcyA9IHRoaXMuZmxhZ3MoKSAmIFRGRmxhZ3MuQ1JFQVRJT04gPyAxIDogMDtcblx0XHRcdHByZXZpb3VzRGF0ZXMgKz0gdGhpcy5mbGFncygpICYgVEZGbGFncy5NT0RJRlkgPyAxIDogMDtcblx0XHRcdGlmICh0aGlzLl9sb25nRm9ybURhdGVzKCkpIHtcblx0XHRcdFx0cmV0dXJuIGdldERhdGUodGhpcy5fZGF0YSwgNSArIHByZXZpb3VzRGF0ZXMgKiAxNyk7XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRyZXR1cm4gZ2V0U2hvcnRGb3JtRGF0ZSh0aGlzLl9kYXRhLCA1ICsgcHJldmlvdXNEYXRlcyAqIDcpO1xuXHRcdFx0fVxuXHRcdH0gZWxzZSB7XG5cdFx0XHRyZXR1cm4gbnVsbDtcblx0XHR9XG5cdH1cblx0cHVibGljIGJhY2t1cCgpOiBEYXRlIHwgbnVsbCB7XG5cdFx0aWYgKHRoaXMuZmxhZ3MoKSAmIFRGRmxhZ3MuQkFDS1VQKSB7XG5cdFx0XHRsZXQgcHJldmlvdXNEYXRlcyA9IHRoaXMuZmxhZ3MoKSAmIFRGRmxhZ3MuQ1JFQVRJT04gPyAxIDogMDtcblx0XHRcdHByZXZpb3VzRGF0ZXMgKz0gdGhpcy5mbGFncygpICYgVEZGbGFncy5NT0RJRlkgPyAxIDogMDtcblx0XHRcdHByZXZpb3VzRGF0ZXMgKz0gdGhpcy5mbGFncygpICYgVEZGbGFncy5BQ0NFU1MgPyAxIDogMDtcblx0XHRcdGlmICh0aGlzLl9sb25nRm9ybURhdGVzKCkpIHtcblx0XHRcdFx0cmV0dXJuIGdldERhdGUodGhpcy5fZGF0YSwgNSArIHByZXZpb3VzRGF0ZXMgKiAxNyk7XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRyZXR1cm4gZ2V0U2hvcnRGb3JtRGF0ZSh0aGlzLl9kYXRhLCA1ICsgcHJldmlvdXNEYXRlcyAqIDcpO1xuXHRcdFx0fVxuXHRcdH0gZWxzZSB7XG5cdFx0XHRyZXR1cm4gbnVsbDtcblx0XHR9XG5cdH1cblx0cHVibGljIGV4cGlyYXRpb24oKTogRGF0ZSB8IG51bGwge1xuXHRcdGlmICh0aGlzLmZsYWdzKCkgJiBURkZsYWdzLkVYUElSQVRJT04pIHtcblx0XHRcdGxldCBwcmV2aW91c0RhdGVzID0gdGhpcy5mbGFncygpICYgVEZGbGFncy5DUkVBVElPTiA/IDEgOiAwO1xuXHRcdFx0cHJldmlvdXNEYXRlcyArPSB0aGlzLmZsYWdzKCkgJiBURkZsYWdzLk1PRElGWSA/IDEgOiAwO1xuXHRcdFx0cHJldmlvdXNEYXRlcyArPSB0aGlzLmZsYWdzKCkgJiBURkZsYWdzLkFDQ0VTUyA/IDEgOiAwO1xuXHRcdFx0cHJldmlvdXNEYXRlcyArPSB0aGlzLmZsYWdzKCkgJiBURkZsYWdzLkJBQ0tVUCA/IDEgOiAwO1xuXHRcdFx0aWYgKHRoaXMuX2xvbmdGb3JtRGF0ZXMoKSkge1xuXHRcdFx0XHRyZXR1cm4gZ2V0RGF0ZSh0aGlzLl9kYXRhLCA1ICsgcHJldmlvdXNEYXRlcyAqIDE3KTtcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdHJldHVybiBnZXRTaG9ydEZvcm1EYXRlKHRoaXMuX2RhdGEsIDUgKyBwcmV2aW91c0RhdGVzICogNyk7XG5cdFx0XHR9XG5cdFx0fSBlbHNlIHtcblx0XHRcdHJldHVybiBudWxsO1xuXHRcdH1cblx0fVxuXHRwdWJsaWMgZWZmZWN0aXZlKCk6IERhdGUgfCBudWxsIHtcblx0XHRpZiAodGhpcy5mbGFncygpICYgVEZGbGFncy5FRkZFQ1RJVkUpIHtcblx0XHRcdGxldCBwcmV2aW91c0RhdGVzID0gdGhpcy5mbGFncygpICYgVEZGbGFncy5DUkVBVElPTiA/IDEgOiAwO1xuXHRcdFx0cHJldmlvdXNEYXRlcyArPSB0aGlzLmZsYWdzKCkgJiBURkZsYWdzLk1PRElGWSA/IDEgOiAwO1xuXHRcdFx0cHJldmlvdXNEYXRlcyArPSB0aGlzLmZsYWdzKCkgJiBURkZsYWdzLkFDQ0VTUyA/IDEgOiAwO1xuXHRcdFx0cHJldmlvdXNEYXRlcyArPSB0aGlzLmZsYWdzKCkgJiBURkZsYWdzLkJBQ0tVUCA/IDEgOiAwO1xuXHRcdFx0cHJldmlvdXNEYXRlcyArPSB0aGlzLmZsYWdzKCkgJiBURkZsYWdzLkVYUElSQVRJT04gPyAxIDogMDtcblx0XHRcdGlmICh0aGlzLl9sb25nRm9ybURhdGVzKCkpIHtcblx0XHRcdFx0cmV0dXJuIGdldERhdGUodGhpcy5fZGF0YSwgNSArIHByZXZpb3VzRGF0ZXMgKiAxNyk7XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRyZXR1cm4gZ2V0U2hvcnRGb3JtRGF0ZSh0aGlzLl9kYXRhLCA1ICsgcHJldmlvdXNEYXRlcyAqIDcpO1xuXHRcdFx0fVxuXHRcdH0gZWxzZSB7XG5cdFx0XHRyZXR1cm4gbnVsbDtcblx0XHR9XG5cdH1cblx0cHJpdmF0ZSBfbG9uZ0Zvcm1EYXRlcygpOiBib29sZWFuIHtcblx0XHRyZXR1cm4gISEodGhpcy5mbGFncygpICYmIFRGRmxhZ3MuTE9OR19GT1JNKTtcblx0fVxufVxuXG4vKipcbiAqIFJvY2tSaWRnZTogRmlsZSBkYXRhIGluIHNwYXJzZSBmb3JtYXQuXG4gKiBAaGlkZGVuXG4gKi9cbmNsYXNzIFNGRW50cnkgZXh0ZW5kcyBTeXN0ZW1Vc2VFbnRyeSB7XG5cdGNvbnN0cnVjdG9yKGRhdGE6IEJ1ZmZlcikge1xuXHRcdHN1cGVyKGRhdGEpO1xuXHR9XG5cdHB1YmxpYyB2aXJ0dWFsU2l6ZUhpZ2goKTogbnVtYmVyIHtcblx0XHRyZXR1cm4gdGhpcy5fZGF0YS5yZWFkVUludDMyTEUoNCk7XG5cdH1cblx0cHVibGljIHZpcnR1YWxTaXplTG93KCk6IG51bWJlciB7XG5cdFx0cmV0dXJuIHRoaXMuX2RhdGEucmVhZFVJbnQzMkxFKDEyKTtcblx0fVxuXHRwdWJsaWMgdGFibGVEZXB0aCgpOiBudW1iZXIge1xuXHRcdHJldHVybiB0aGlzLl9kYXRhWzIwXTtcblx0fVxufVxuXG4vKipcbiAqIEBoaWRkZW5cbiAqL1xuYWJzdHJhY3QgY2xhc3MgRGlyZWN0b3J5PFQgZXh0ZW5kcyBEaXJlY3RvcnlSZWNvcmQ+IHtcblx0cHJvdGVjdGVkIF9yZWNvcmQ6IFQ7XG5cdHByaXZhdGUgX2ZpbGVMaXN0OiBzdHJpbmdbXSA9IFtdO1xuXHRwcml2YXRlIF9maWxlTWFwOiB7IFtuYW1lOiBzdHJpbmddOiBUIH0gPSB7fTtcblx0Y29uc3RydWN0b3IocmVjb3JkOiBULCBpc29EYXRhOiBCdWZmZXIpIHtcblx0XHR0aGlzLl9yZWNvcmQgPSByZWNvcmQ7XG5cdFx0bGV0IGkgPSByZWNvcmQubGJhKCk7XG5cdFx0bGV0IGlMaW1pdCA9IGkgKyByZWNvcmQuZGF0YUxlbmd0aCgpO1xuXHRcdGlmICghKHJlY29yZC5maWxlRmxhZ3MoKSAmIEZpbGVGbGFncy5EaXJlY3RvcnkpKSB7XG5cdFx0XHQvLyBNdXN0IGhhdmUgYSBDTCBlbnRyeS5cblx0XHRcdGNvbnN0IGNsID0gPENMRW50cnk+cmVjb3JkLmdldFNVRW50cmllcyhpc29EYXRhKS5maWx0ZXIoZSA9PiBlIGluc3RhbmNlb2YgQ0xFbnRyeSlbMF07XG5cdFx0XHRpID0gY2wuY2hpbGREaXJlY3RvcnlMYmEoKSAqIDIwNDg7XG5cdFx0XHRpTGltaXQgPSBJbmZpbml0eTtcblx0XHR9XG5cblx0XHR3aGlsZSAoaSA8IGlMaW1pdCkge1xuXHRcdFx0Y29uc3QgbGVuID0gaXNvRGF0YVtpXTtcblx0XHRcdC8vIFplcm8tcGFkZGluZyBiZXR3ZWVuIHNlY3RvcnMuXG5cdFx0XHQvLyBUT0RPOiBDb3VsZCBvcHRpbWl6ZSB0aGlzIHRvIHNlZWsgdG8gbmVhcmVzdC1zZWN0b3IgdXBvblxuXHRcdFx0Ly8gc2VlaW5nIGEgMC5cblx0XHRcdGlmIChsZW4gPT09IDApIHtcblx0XHRcdFx0aSsrO1xuXHRcdFx0XHRjb250aW51ZTtcblx0XHRcdH1cblx0XHRcdGNvbnN0IHIgPSB0aGlzLl9jb25zdHJ1Y3REaXJlY3RvcnlSZWNvcmQoaXNvRGF0YS5zbGljZShpKSk7XG5cdFx0XHRjb25zdCBmbmFtZSA9IHIuZmlsZU5hbWUoaXNvRGF0YSk7XG5cdFx0XHQvLyBTa2lwICcuJyBhbmQgJy4uJyBlbnRyaWVzLlxuXHRcdFx0aWYgKGZuYW1lICE9PSAnXFx1MDAwMCcgJiYgZm5hbWUgIT09ICdcXHUwMDAxJykge1xuXHRcdFx0XHQvLyBTa2lwIHJlbG9jYXRlZCBlbnRyaWVzLlxuXHRcdFx0XHRpZiAoIXIuaGFzUm9ja1JpZGdlKCkgfHwgci5nZXRTVUVudHJpZXMoaXNvRGF0YSkuZmlsdGVyKGUgPT4gZSBpbnN0YW5jZW9mIFJFRW50cnkpLmxlbmd0aCA9PT0gMCkge1xuXHRcdFx0XHRcdHRoaXMuX2ZpbGVNYXBbZm5hbWVdID0gcjtcblx0XHRcdFx0XHR0aGlzLl9maWxlTGlzdC5wdXNoKGZuYW1lKTtcblx0XHRcdFx0fVxuXHRcdFx0fSBlbHNlIGlmIChpTGltaXQgPT09IEluZmluaXR5KSB7XG5cdFx0XHRcdC8vIEZpcnN0IGVudHJ5IGNvbnRhaW5zIG5lZWRlZCBkYXRhLlxuXHRcdFx0XHRpTGltaXQgPSBpICsgci5kYXRhTGVuZ3RoKCk7XG5cdFx0XHR9XG5cdFx0XHRpICs9IHIubGVuZ3RoKCk7XG5cdFx0fVxuXHR9XG5cdC8qKlxuXHQgKiBHZXQgdGhlIHJlY29yZCB3aXRoIHRoZSBnaXZlbiBuYW1lLlxuXHQgKiBSZXR1cm5zIHVuZGVmaW5lZCBpZiBub3QgcHJlc2VudC5cblx0ICovXG5cdHB1YmxpYyBnZXRSZWNvcmQobmFtZTogc3RyaW5nKTogRGlyZWN0b3J5UmVjb3JkIHtcblx0XHRyZXR1cm4gdGhpcy5fZmlsZU1hcFtuYW1lXTtcblx0fVxuXHRwdWJsaWMgZ2V0RmlsZUxpc3QoKTogc3RyaW5nW10ge1xuXHRcdHJldHVybiB0aGlzLl9maWxlTGlzdDtcblx0fVxuXHRwdWJsaWMgZ2V0RG90RW50cnkoaXNvRGF0YTogQnVmZmVyKTogVCB7XG5cdFx0cmV0dXJuIHRoaXMuX2NvbnN0cnVjdERpcmVjdG9yeVJlY29yZChpc29EYXRhLnNsaWNlKHRoaXMuX3JlY29yZC5sYmEoKSkpO1xuXHR9XG5cdHByb3RlY3RlZCBhYnN0cmFjdCBfY29uc3RydWN0RGlyZWN0b3J5UmVjb3JkKGRhdGE6IEJ1ZmZlcik6IFQ7XG59XG5cbi8qKlxuICogQGhpZGRlblxuICovXG5jbGFzcyBJU09EaXJlY3RvcnkgZXh0ZW5kcyBEaXJlY3Rvcnk8SVNPRGlyZWN0b3J5UmVjb3JkPiB7XG5cdGNvbnN0cnVjdG9yKHJlY29yZDogSVNPRGlyZWN0b3J5UmVjb3JkLCBpc29EYXRhOiBCdWZmZXIpIHtcblx0XHRzdXBlcihyZWNvcmQsIGlzb0RhdGEpO1xuXHR9XG5cdHByb3RlY3RlZCBfY29uc3RydWN0RGlyZWN0b3J5UmVjb3JkKGRhdGE6IEJ1ZmZlcik6IElTT0RpcmVjdG9yeVJlY29yZCB7XG5cdFx0cmV0dXJuIG5ldyBJU09EaXJlY3RvcnlSZWNvcmQoZGF0YSwgdGhpcy5fcmVjb3JkLmdldFJvY2tSaWRnZU9mZnNldCgpKTtcblx0fVxufVxuXG4vKipcbiAqIEBoaWRkZW5cbiAqL1xuY2xhc3MgSm9saWV0RGlyZWN0b3J5IGV4dGVuZHMgRGlyZWN0b3J5PEpvbGlldERpcmVjdG9yeVJlY29yZD4ge1xuXHRjb25zdHJ1Y3RvcihyZWNvcmQ6IEpvbGlldERpcmVjdG9yeVJlY29yZCwgaXNvRGF0YTogQnVmZmVyKSB7XG5cdFx0c3VwZXIocmVjb3JkLCBpc29EYXRhKTtcblx0fVxuXHRwcm90ZWN0ZWQgX2NvbnN0cnVjdERpcmVjdG9yeVJlY29yZChkYXRhOiBCdWZmZXIpOiBKb2xpZXREaXJlY3RvcnlSZWNvcmQge1xuXHRcdHJldHVybiBuZXcgSm9saWV0RGlyZWN0b3J5UmVjb3JkKGRhdGEsIHRoaXMuX3JlY29yZC5nZXRSb2NrUmlkZ2VPZmZzZXQoKSk7XG5cdH1cbn1cblxuLyoqXG4gKiBPcHRpb25zIGZvciBJc29GUyBmaWxlIHN5c3RlbSBpbnN0YW5jZXMuXG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgSXNvRlNPcHRpb25zIHtcblx0Ly8gVGhlIElTTyBmaWxlIGluIGEgYnVmZmVyLlxuXHRkYXRhOiBCdWZmZXI7XG5cdC8vIFRoZSBuYW1lIG9mIHRoZSBJU08gKG9wdGlvbmFsOyB1c2VkIGZvciBkZWJ1ZyBtZXNzYWdlcyAvIGlkZW50aWZpY2F0aW9uIHZpYSBnZXROYW1lKCkpLlxuXHRuYW1lPzogc3RyaW5nO1xufVxuXG4vKipcbiAqIE1vdW50cyBhbiBJU08gZmlsZSBhcyBhIHJlYWQtb25seSBmaWxlIHN5c3RlbS5cbiAqXG4gKiBTdXBwb3J0czpcbiAqICogVmFuaWxsYSBJU085NjYwIElTT3NcbiAqICogTWljcm9zb2Z0IEpvbGlldCBhbmQgUm9jayBSaWRnZSBleHRlbnNpb25zIHRvIHRoZSBJU085NjYwIHN0YW5kYXJkXG4gKi9cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIElzb0ZTIGV4dGVuZHMgU3luY2hyb25vdXNGaWxlU3lzdGVtIGltcGxlbWVudHMgRmlsZVN5c3RlbSB7XG5cdHB1YmxpYyBzdGF0aWMgcmVhZG9ubHkgTmFtZSA9ICdJc29GUyc7XG5cblx0cHVibGljIHN0YXRpYyByZWFkb25seSBPcHRpb25zOiBGaWxlU3lzdGVtT3B0aW9ucyA9IHtcblx0XHRkYXRhOiB7XG5cdFx0XHR0eXBlOiAnb2JqZWN0Jyxcblx0XHRcdGRlc2NyaXB0aW9uOiAnVGhlIElTTyBmaWxlIGluIGEgYnVmZmVyJyxcblx0XHRcdHZhbGlkYXRvcjogYnVmZmVyVmFsaWRhdG9yLFxuXHRcdH0sXG5cdH07XG5cblx0LyoqXG5cdCAqIENyZWF0ZXMgYW4gSXNvRlMgaW5zdGFuY2Ugd2l0aCB0aGUgZ2l2ZW4gb3B0aW9ucy5cblx0ICovXG5cdHB1YmxpYyBzdGF0aWMgQ3JlYXRlKG9wdHM6IElzb0ZTT3B0aW9ucywgY2I6IEJGU0NhbGxiYWNrPElzb0ZTPik6IHZvaWQge1xuXHRcdHRyeSB7XG5cdFx0XHRjYihudWxsLCBuZXcgSXNvRlMob3B0cy5kYXRhLCBvcHRzLm5hbWUpKTtcblx0XHR9IGNhdGNoIChlKSB7XG5cdFx0XHRjYihlKTtcblx0XHR9XG5cdH1cblxuXHRwdWJsaWMgc3RhdGljIENyZWF0ZUFzeW5jKG9wdHM6IElzb0ZTT3B0aW9ucyk6IFByb21pc2U8SXNvRlM+IHtcblx0XHRyZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuXHRcdFx0dGhpcy5DcmVhdGUob3B0cywgKGVycm9yLCBmcykgPT4ge1xuXHRcdFx0XHRpZiAoZXJyb3IgfHwgIWZzKSB7XG5cdFx0XHRcdFx0cmVqZWN0KGVycm9yKTtcblx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRyZXNvbHZlKGZzKTtcblx0XHRcdFx0fVxuXHRcdFx0fSk7XG5cdFx0fSk7XG5cdH1cblxuXHRwdWJsaWMgc3RhdGljIGlzQXZhaWxhYmxlKCk6IGJvb2xlYW4ge1xuXHRcdHJldHVybiB0cnVlO1xuXHR9XG5cblx0cHJpdmF0ZSBfZGF0YTogQnVmZmVyO1xuXHRwcml2YXRlIF9wdmQ6IFByaW1hcnlPclN1cHBsZW1lbnRhcnlWb2x1bWVEZXNjcmlwdG9yO1xuXHRwcml2YXRlIF9yb290OiBEaXJlY3RvcnlSZWNvcmQ7XG5cdHByaXZhdGUgX25hbWU6IHN0cmluZztcblxuXHQvKipcblx0ICogKipEZXByZWNhdGVkLiBQbGVhc2UgdXNlIElzb0ZTLkNyZWF0ZSgpIG1ldGhvZCBpbnN0ZWFkLioqXG5cdCAqXG5cdCAqIENvbnN0cnVjdHMgYSByZWFkLW9ubHkgZmlsZSBzeXN0ZW0gZnJvbSB0aGUgZ2l2ZW4gSVNPLlxuXHQgKiBAcGFyYW0gZGF0YSBUaGUgSVNPIGZpbGUgaW4gYSBidWZmZXIuXG5cdCAqIEBwYXJhbSBuYW1lIFRoZSBuYW1lIG9mIHRoZSBJU08gKG9wdGlvbmFsOyB1c2VkIGZvciBkZWJ1ZyBtZXNzYWdlcyAvIGlkZW50aWZpY2F0aW9uIHZpYSBnZXROYW1lKCkpLlxuXHQgKi9cblx0cHJpdmF0ZSBjb25zdHJ1Y3RvcihkYXRhOiBCdWZmZXIsIG5hbWU6IHN0cmluZyA9ICcnKSB7XG5cdFx0c3VwZXIoKTtcblx0XHR0aGlzLl9kYXRhID0gZGF0YTtcblx0XHQvLyBTa2lwIGZpcnN0IDE2IHNlY3RvcnMuXG5cdFx0bGV0IHZkVGVybWluYXRvckZvdW5kID0gZmFsc2U7XG5cdFx0bGV0IGkgPSAxNiAqIDIwNDg7XG5cdFx0Y29uc3QgY2FuZGlkYXRlVkRzID0gbmV3IEFycmF5PFByaW1hcnlPclN1cHBsZW1lbnRhcnlWb2x1bWVEZXNjcmlwdG9yPigpO1xuXHRcdHdoaWxlICghdmRUZXJtaW5hdG9yRm91bmQpIHtcblx0XHRcdGNvbnN0IHNsaWNlID0gZGF0YS5zbGljZShpKTtcblx0XHRcdGNvbnN0IHZkID0gbmV3IFZvbHVtZURlc2NyaXB0b3Ioc2xpY2UpO1xuXHRcdFx0c3dpdGNoICh2ZC50eXBlKCkpIHtcblx0XHRcdFx0Y2FzZSBWb2x1bWVEZXNjcmlwdG9yVHlwZUNvZGUuUHJpbWFyeVZvbHVtZURlc2NyaXB0b3I6XG5cdFx0XHRcdFx0Y2FuZGlkYXRlVkRzLnB1c2gobmV3IFByaW1hcnlWb2x1bWVEZXNjcmlwdG9yKHNsaWNlKSk7XG5cdFx0XHRcdFx0YnJlYWs7XG5cdFx0XHRcdGNhc2UgVm9sdW1lRGVzY3JpcHRvclR5cGVDb2RlLlN1cHBsZW1lbnRhcnlWb2x1bWVEZXNjcmlwdG9yOlxuXHRcdFx0XHRcdGNhbmRpZGF0ZVZEcy5wdXNoKG5ldyBTdXBwbGVtZW50YXJ5Vm9sdW1lRGVzY3JpcHRvcihzbGljZSkpO1xuXHRcdFx0XHRcdGJyZWFrO1xuXHRcdFx0XHRjYXNlIFZvbHVtZURlc2NyaXB0b3JUeXBlQ29kZS5Wb2x1bWVEZXNjcmlwdG9yU2V0VGVybWluYXRvcjpcblx0XHRcdFx0XHR2ZFRlcm1pbmF0b3JGb3VuZCA9IHRydWU7XG5cdFx0XHRcdFx0YnJlYWs7XG5cdFx0XHR9XG5cdFx0XHRpICs9IDIwNDg7XG5cdFx0fVxuXHRcdGlmIChjYW5kaWRhdGVWRHMubGVuZ3RoID09PSAwKSB7XG5cdFx0XHR0aHJvdyBuZXcgQXBpRXJyb3IoRXJyb3JDb2RlLkVJTywgYFVuYWJsZSB0byBmaW5kIGEgc3VpdGFibGUgdm9sdW1lIGRlc2NyaXB0b3IuYCk7XG5cdFx0fVxuXHRcdGNhbmRpZGF0ZVZEcy5mb3JFYWNoKHYgPT4ge1xuXHRcdFx0Ly8gVGFrZSBhbiBTVkQgb3ZlciBhIFBWRC5cblx0XHRcdGlmICghdGhpcy5fcHZkIHx8IHRoaXMuX3B2ZC50eXBlKCkgIT09IFZvbHVtZURlc2NyaXB0b3JUeXBlQ29kZS5TdXBwbGVtZW50YXJ5Vm9sdW1lRGVzY3JpcHRvcikge1xuXHRcdFx0XHR0aGlzLl9wdmQgPSB2O1xuXHRcdFx0fVxuXHRcdH0pO1xuXHRcdHRoaXMuX3Jvb3QgPSB0aGlzLl9wdmQucm9vdERpcmVjdG9yeUVudHJ5KGRhdGEpO1xuXHRcdHRoaXMuX25hbWUgPSBuYW1lO1xuXHR9XG5cblx0cHVibGljIGdldE5hbWUoKTogc3RyaW5nIHtcblx0XHRsZXQgbmFtZSA9IGBJc29GUyR7dGhpcy5fbmFtZX0ke3RoaXMuX3B2ZCA/IGAtJHt0aGlzLl9wdmQubmFtZSgpfWAgOiAnJ31gO1xuXHRcdGlmICh0aGlzLl9yb290ICYmIHRoaXMuX3Jvb3QuaGFzUm9ja1JpZGdlKCkpIHtcblx0XHRcdG5hbWUgKz0gYC1Sb2NrUmlkZ2VgO1xuXHRcdH1cblx0XHRyZXR1cm4gbmFtZTtcblx0fVxuXG5cdHB1YmxpYyBkaXNrU3BhY2UocGF0aDogc3RyaW5nLCBjYjogKHRvdGFsOiBudW1iZXIsIGZyZWU6IG51bWJlcikgPT4gdm9pZCk6IHZvaWQge1xuXHRcdC8vIFJlYWQtb25seSBmaWxlIHN5c3RlbS5cblx0XHRjYih0aGlzLl9kYXRhLmxlbmd0aCwgMCk7XG5cdH1cblxuXHRwdWJsaWMgaXNSZWFkT25seSgpOiBib29sZWFuIHtcblx0XHRyZXR1cm4gdHJ1ZTtcblx0fVxuXG5cdHB1YmxpYyBzdXBwb3J0c0xpbmtzKCk6IGJvb2xlYW4ge1xuXHRcdHJldHVybiBmYWxzZTtcblx0fVxuXG5cdHB1YmxpYyBzdXBwb3J0c1Byb3BzKCk6IGJvb2xlYW4ge1xuXHRcdHJldHVybiBmYWxzZTtcblx0fVxuXG5cdHB1YmxpYyBzdXBwb3J0c1N5bmNoKCk6IGJvb2xlYW4ge1xuXHRcdHJldHVybiB0cnVlO1xuXHR9XG5cblx0cHVibGljIHN0YXRTeW5jKHA6IHN0cmluZywgaXNMc3RhdDogYm9vbGVhbik6IFN0YXRzIHtcblx0XHRjb25zdCByZWNvcmQgPSB0aGlzLl9nZXREaXJlY3RvcnlSZWNvcmQocCk7XG5cdFx0aWYgKHJlY29yZCA9PT0gbnVsbCkge1xuXHRcdFx0dGhyb3cgQXBpRXJyb3IuRU5PRU5UKHApO1xuXHRcdH1cblx0XHRyZXR1cm4gdGhpcy5fZ2V0U3RhdHMocCwgcmVjb3JkKSE7XG5cdH1cblxuXHRwdWJsaWMgb3BlblN5bmMocDogc3RyaW5nLCBmbGFnczogRmlsZUZsYWcsIG1vZGU6IG51bWJlcik6IEZpbGUge1xuXHRcdC8vIElOVkFSSUFOVDogQ2Fubm90IHdyaXRlIHRvIFJPIGZpbGUgc3lzdGVtcy5cblx0XHRpZiAoZmxhZ3MuaXNXcml0ZWFibGUoKSkge1xuXHRcdFx0dGhyb3cgbmV3IEFwaUVycm9yKEVycm9yQ29kZS5FUEVSTSwgcCk7XG5cdFx0fVxuXHRcdC8vIENoZWNrIGlmIHRoZSBwYXRoIGV4aXN0cywgYW5kIGlzIGEgZmlsZS5cblx0XHRjb25zdCByZWNvcmQgPSB0aGlzLl9nZXREaXJlY3RvcnlSZWNvcmQocCk7XG5cdFx0aWYgKCFyZWNvcmQpIHtcblx0XHRcdHRocm93IEFwaUVycm9yLkVOT0VOVChwKTtcblx0XHR9IGVsc2UgaWYgKHJlY29yZC5pc1N5bWxpbmsodGhpcy5fZGF0YSkpIHtcblx0XHRcdHJldHVybiB0aGlzLm9wZW5TeW5jKHBhdGgucmVzb2x2ZShwLCByZWNvcmQuZ2V0U3ltbGlua1BhdGgodGhpcy5fZGF0YSkpLCBmbGFncywgbW9kZSk7XG5cdFx0fSBlbHNlIHtcblx0XHRcdGNvbnN0IGRhdGEgPSAhcmVjb3JkLmlzRGlyZWN0b3J5KHRoaXMuX2RhdGEpID8gcmVjb3JkLmdldEZpbGUodGhpcy5fZGF0YSkgOiB1bmRlZmluZWQ7XG5cdFx0XHRjb25zdCBzdGF0cyA9IHRoaXMuX2dldFN0YXRzKHAsIHJlY29yZCkhO1xuXHRcdFx0c3dpdGNoIChmbGFncy5wYXRoRXhpc3RzQWN0aW9uKCkpIHtcblx0XHRcdFx0Y2FzZSBBY3Rpb25UeXBlLlRIUk9XX0VYQ0VQVElPTjpcblx0XHRcdFx0Y2FzZSBBY3Rpb25UeXBlLlRSVU5DQVRFX0ZJTEU6XG5cdFx0XHRcdFx0dGhyb3cgQXBpRXJyb3IuRUVYSVNUKHApO1xuXHRcdFx0XHRjYXNlIEFjdGlvblR5cGUuTk9QOlxuXHRcdFx0XHRcdHJldHVybiBuZXcgTm9TeW5jRmlsZSh0aGlzLCBwLCBmbGFncywgc3RhdHMsIGRhdGEpO1xuXHRcdFx0XHRkZWZhdWx0OlxuXHRcdFx0XHRcdHRocm93IG5ldyBBcGlFcnJvcihFcnJvckNvZGUuRUlOVkFMLCAnSW52YWxpZCBGaWxlTW9kZSBvYmplY3QuJyk7XG5cdFx0XHR9XG5cdFx0fVxuXHR9XG5cblx0cHVibGljIHJlYWRkaXJTeW5jKHBhdGg6IHN0cmluZyk6IHN0cmluZ1tdIHtcblx0XHQvLyBDaGVjayBpZiBpdCBleGlzdHMuXG5cdFx0Y29uc3QgcmVjb3JkID0gdGhpcy5fZ2V0RGlyZWN0b3J5UmVjb3JkKHBhdGgpO1xuXHRcdGlmICghcmVjb3JkKSB7XG5cdFx0XHR0aHJvdyBBcGlFcnJvci5FTk9FTlQocGF0aCk7XG5cdFx0fSBlbHNlIGlmIChyZWNvcmQuaXNEaXJlY3RvcnkodGhpcy5fZGF0YSkpIHtcblx0XHRcdHJldHVybiByZWNvcmQuZ2V0RGlyZWN0b3J5KHRoaXMuX2RhdGEpLmdldEZpbGVMaXN0KCkuc2xpY2UoMCk7XG5cdFx0fSBlbHNlIHtcblx0XHRcdHRocm93IEFwaUVycm9yLkVOT1RESVIocGF0aCk7XG5cdFx0fVxuXHR9XG5cblx0LyoqXG5cdCAqIFNwZWNpYWxseS1vcHRpbWl6ZWQgcmVhZGZpbGUuXG5cdCAqL1xuXHRwdWJsaWMgcmVhZEZpbGVTeW5jKGZuYW1lOiBzdHJpbmcsIGVuY29kaW5nOiBCdWZmZXJFbmNvZGluZywgZmxhZzogRmlsZUZsYWcpOiBhbnkge1xuXHRcdC8vIEdldCBmaWxlLlxuXHRcdGNvbnN0IGZkID0gdGhpcy5vcGVuU3luYyhmbmFtZSwgZmxhZywgMHgxYTQpO1xuXHRcdHRyeSB7XG5cdFx0XHRjb25zdCBmZENhc3QgPSA8Tm9TeW5jRmlsZTxJc29GUz4+ZmQ7XG5cdFx0XHRjb25zdCBmZEJ1ZmYgPSA8QnVmZmVyPmZkQ2FzdC5nZXRCdWZmZXIoKTtcblx0XHRcdGlmIChlbmNvZGluZyA9PT0gbnVsbCkge1xuXHRcdFx0XHRyZXR1cm4gY29weWluZ1NsaWNlKGZkQnVmZik7XG5cdFx0XHR9XG5cdFx0XHRyZXR1cm4gZmRCdWZmLnRvU3RyaW5nKGVuY29kaW5nKTtcblx0XHR9IGZpbmFsbHkge1xuXHRcdFx0ZmQuY2xvc2VTeW5jKCk7XG5cdFx0fVxuXHR9XG5cblx0cHJpdmF0ZSBfZ2V0RGlyZWN0b3J5UmVjb3JkKHBhdGg6IHN0cmluZyk6IERpcmVjdG9yeVJlY29yZCB8IG51bGwge1xuXHRcdC8vIFNwZWNpYWwgY2FzZS5cblx0XHRpZiAocGF0aCA9PT0gJy8nKSB7XG5cdFx0XHRyZXR1cm4gdGhpcy5fcm9vdDtcblx0XHR9XG5cdFx0Y29uc3QgY29tcG9uZW50cyA9IHBhdGguc3BsaXQoJy8nKS5zbGljZSgxKTtcblx0XHRsZXQgZGlyID0gdGhpcy5fcm9vdDtcblx0XHRmb3IgKGNvbnN0IGNvbXBvbmVudCBvZiBjb21wb25lbnRzKSB7XG5cdFx0XHRpZiAoZGlyLmlzRGlyZWN0b3J5KHRoaXMuX2RhdGEpKSB7XG5cdFx0XHRcdGRpciA9IGRpci5nZXREaXJlY3RvcnkodGhpcy5fZGF0YSkuZ2V0UmVjb3JkKGNvbXBvbmVudCk7XG5cdFx0XHRcdGlmICghZGlyKSB7XG5cdFx0XHRcdFx0cmV0dXJuIG51bGw7XG5cdFx0XHRcdH1cblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdHJldHVybiBudWxsO1xuXHRcdFx0fVxuXHRcdH1cblx0XHRyZXR1cm4gZGlyO1xuXHR9XG5cblx0cHJpdmF0ZSBfZ2V0U3RhdHMocDogc3RyaW5nLCByZWNvcmQ6IERpcmVjdG9yeVJlY29yZCk6IFN0YXRzIHwgbnVsbCB7XG5cdFx0aWYgKHJlY29yZC5pc1N5bWxpbmsodGhpcy5fZGF0YSkpIHtcblx0XHRcdGNvbnN0IG5ld1AgPSBwYXRoLnJlc29sdmUocCwgcmVjb3JkLmdldFN5bWxpbmtQYXRoKHRoaXMuX2RhdGEpKTtcblx0XHRcdGNvbnN0IGRpclJlYyA9IHRoaXMuX2dldERpcmVjdG9yeVJlY29yZChuZXdQKTtcblx0XHRcdGlmICghZGlyUmVjKSB7XG5cdFx0XHRcdHJldHVybiBudWxsO1xuXHRcdFx0fVxuXHRcdFx0cmV0dXJuIHRoaXMuX2dldFN0YXRzKG5ld1AsIGRpclJlYyk7XG5cdFx0fSBlbHNlIHtcblx0XHRcdGNvbnN0IGxlbiA9IHJlY29yZC5kYXRhTGVuZ3RoKCk7XG5cdFx0XHRsZXQgbW9kZSA9IDB4MTZkO1xuXHRcdFx0Y29uc3QgZGF0ZSA9IHJlY29yZC5yZWNvcmRpbmdEYXRlKCkuZ2V0VGltZSgpO1xuXHRcdFx0bGV0IGF0aW1lID0gZGF0ZTtcblx0XHRcdGxldCBtdGltZSA9IGRhdGU7XG5cdFx0XHRsZXQgY3RpbWUgPSBkYXRlO1xuXHRcdFx0aWYgKHJlY29yZC5oYXNSb2NrUmlkZ2UoKSkge1xuXHRcdFx0XHRjb25zdCBlbnRyaWVzID0gcmVjb3JkLmdldFNVRW50cmllcyh0aGlzLl9kYXRhKTtcblx0XHRcdFx0Zm9yIChjb25zdCBlbnRyeSBvZiBlbnRyaWVzKSB7XG5cdFx0XHRcdFx0aWYgKGVudHJ5IGluc3RhbmNlb2YgUFhFbnRyeSkge1xuXHRcdFx0XHRcdFx0bW9kZSA9IGVudHJ5Lm1vZGUoKTtcblx0XHRcdFx0XHR9IGVsc2UgaWYgKGVudHJ5IGluc3RhbmNlb2YgVEZFbnRyeSkge1xuXHRcdFx0XHRcdFx0Y29uc3QgZmxhZ3MgPSBlbnRyeS5mbGFncygpO1xuXHRcdFx0XHRcdFx0aWYgKGZsYWdzICYgVEZGbGFncy5BQ0NFU1MpIHtcblx0XHRcdFx0XHRcdFx0YXRpbWUgPSBlbnRyeS5hY2Nlc3MoKSEuZ2V0VGltZSgpO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0aWYgKGZsYWdzICYgVEZGbGFncy5NT0RJRlkpIHtcblx0XHRcdFx0XHRcdFx0bXRpbWUgPSBlbnRyeS5tb2RpZnkoKSEuZ2V0VGltZSgpO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0aWYgKGZsYWdzICYgVEZGbGFncy5DUkVBVElPTikge1xuXHRcdFx0XHRcdFx0XHRjdGltZSA9IGVudHJ5LmNyZWF0aW9uKCkhLmdldFRpbWUoKTtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHRcdC8vIE1hc2sgb3V0IHdyaXRlYWJsZSBmbGFncy4gVGhpcyBpcyBhIFJPIGZpbGUgc3lzdGVtLlxuXHRcdFx0bW9kZSA9IG1vZGUgJiAweDE2ZDtcblx0XHRcdHJldHVybiBuZXcgU3RhdHMocmVjb3JkLmlzRGlyZWN0b3J5KHRoaXMuX2RhdGEpID8gRmlsZVR5cGUuRElSRUNUT1JZIDogRmlsZVR5cGUuRklMRSwgbGVuLCBtb2RlLCBhdGltZSwgbXRpbWUsIGN0aW1lKTtcblx0XHR9XG5cdH1cbn1cbiIsICJpbXBvcnQgeyBGaWxlU3lzdGVtQ29uc3RydWN0b3IsIEJGU0NhbGxiYWNrLCBGaWxlU3lzdGVtIH0gZnJvbSAnLi9maWxlX3N5c3RlbSc7XG5pbXBvcnQgeyBBcGlFcnJvciB9IGZyb20gJy4vYXBpX2Vycm9yJztcbmltcG9ydCB7IGNoZWNrT3B0aW9ucyB9IGZyb20gJy4vdXRpbCc7XG5pbXBvcnQgQXN5bmNNaXJyb3IgZnJvbSAnLi4vYmFja2VuZC9Bc3luY01pcnJvcic7XG5pbXBvcnQgRHJvcGJveCBmcm9tICcuLi9iYWNrZW5kL0Ryb3Bib3gnO1xuaW1wb3J0IEVtc2NyaXB0ZW4gZnJvbSAnLi4vYmFja2VuZC9FbXNjcmlwdGVuJztcbmltcG9ydCBGaWxlU3lzdGVtQWNjZXNzIGZyb20gJy4uL2JhY2tlbmQvRmlsZVN5c3RlbUFjY2Vzcyc7XG5pbXBvcnQgRm9sZGVyQWRhcHRlciBmcm9tICcuLi9iYWNrZW5kL0ZvbGRlckFkYXB0ZXInO1xuaW1wb3J0IEluTWVtb3J5IGZyb20gJy4uL2JhY2tlbmQvSW5NZW1vcnknO1xuaW1wb3J0IEluZGV4ZWREQiBmcm9tICcuLi9iYWNrZW5kL0luZGV4ZWREQic7XG5pbXBvcnQgTG9jYWxTdG9yYWdlIGZyb20gJy4uL2JhY2tlbmQvTG9jYWxTdG9yYWdlJztcbmltcG9ydCBNb3VudGFibGVGaWxlU3lzdGVtIGZyb20gJy4uL2JhY2tlbmQvTW91bnRhYmxlRmlsZVN5c3RlbSc7XG5pbXBvcnQgT3ZlcmxheUZTIGZyb20gJy4uL2JhY2tlbmQvT3ZlcmxheUZTJztcbmltcG9ydCBXb3JrZXJGUyBmcm9tICcuLi9iYWNrZW5kL1dvcmtlckZTJztcbmltcG9ydCBIVFRQUmVxdWVzdCBmcm9tICcuLi9iYWNrZW5kL0hUVFBSZXF1ZXN0JztcbmltcG9ydCBaaXBGUyBmcm9tICcuLi9iYWNrZW5kL1ppcEZTJztcbmltcG9ydCBJc29GUyBmcm9tICcuLi9iYWNrZW5kL0lzb0ZTJztcblxuLy8gTW9ua2V5LXBhdGNoIGBDcmVhdGVgIGZ1bmN0aW9ucyB0byBjaGVjayBvcHRpb25zIGJlZm9yZSBmaWxlIHN5c3RlbSBpbml0aWFsaXphdGlvbi5cbltBc3luY01pcnJvciwgRHJvcGJveCwgRW1zY3JpcHRlbiwgRmlsZVN5c3RlbUFjY2VzcywgRm9sZGVyQWRhcHRlciwgSW5NZW1vcnksIEluZGV4ZWREQiwgSXNvRlMsIExvY2FsU3RvcmFnZSwgTW91bnRhYmxlRmlsZVN5c3RlbSwgT3ZlcmxheUZTLCBXb3JrZXJGUywgSFRUUFJlcXVlc3QsIFppcEZTXS5mb3JFYWNoKFxuXHQoZnNUeXBlOiBGaWxlU3lzdGVtQ29uc3RydWN0b3IpID0+IHtcblx0XHRjb25zdCBjcmVhdGUgPSBmc1R5cGUuQ3JlYXRlO1xuXHRcdGZzVHlwZS5DcmVhdGUgPSBmdW5jdGlvbiAob3B0cz86IGFueSwgY2I/OiBCRlNDYWxsYmFjazxGaWxlU3lzdGVtPik6IHZvaWQge1xuXHRcdFx0Y29uc3Qgb25lQXJnID0gdHlwZW9mIG9wdHMgPT09ICdmdW5jdGlvbic7XG5cdFx0XHRjb25zdCBub3JtYWxpemVkQ2IgPSBvbmVBcmcgPyBvcHRzIDogY2I7XG5cdFx0XHRjb25zdCBub3JtYWxpemVkT3B0cyA9IG9uZUFyZyA/IHt9IDogb3B0cztcblxuXHRcdFx0ZnVuY3Rpb24gd3JhcHBlZENiKGU/OiBBcGlFcnJvcik6IHZvaWQge1xuXHRcdFx0XHRpZiAoZSkge1xuXHRcdFx0XHRcdG5vcm1hbGl6ZWRDYihlKTtcblx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRjcmVhdGUuY2FsbChmc1R5cGUsIG5vcm1hbGl6ZWRPcHRzLCBub3JtYWxpemVkQ2IpO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cblx0XHRcdGNoZWNrT3B0aW9ucyhmc1R5cGUsIG5vcm1hbGl6ZWRPcHRzLCB3cmFwcGVkQ2IpO1xuXHRcdH07XG5cdH1cbik7XG5cbi8qKlxuICogQGhpZGRlblxuICovXG5jb25zdCBCYWNrZW5kcyA9IHtcblx0QXN5bmNNaXJyb3IsXG5cdERyb3Bib3gsXG5cdEVtc2NyaXB0ZW4sXG5cdEZpbGVTeXN0ZW1BY2Nlc3MsXG5cdEZvbGRlckFkYXB0ZXIsXG5cdEluTWVtb3J5LFxuXHRJbmRleGVkREIsXG5cdElzb0ZTLFxuXHRMb2NhbFN0b3JhZ2UsXG5cdE1vdW50YWJsZUZpbGVTeXN0ZW0sXG5cdE92ZXJsYXlGUyxcblx0V29ya2VyRlMsXG5cdEhUVFBSZXF1ZXN0LFxuXHRYbWxIdHRwUmVxdWVzdDogSFRUUFJlcXVlc3QsXG5cdFppcEZTLFxufTtcbi8vIE1ha2Ugc3VyZSBhbGwgYmFja2VuZHMgY2FzdCB0byBGaWxlU3lzdGVtQ29uc3RydWN0b3IgKGZvciB0eXBlIGNoZWNraW5nKVxuY29uc3QgXzogeyBbbmFtZTogc3RyaW5nXTogRmlsZVN5c3RlbUNvbnN0cnVjdG9yIH0gPSBCYWNrZW5kcztcbi8vIHRzbGludDpkaXNhYmxlLW5leHQtbGluZTpuby11bnVzZWQtZXhwcmVzc2lvblxuXztcbi8vIHRzbGludDplbmFibGUtbmV4dC1saW5lOm5vLXVudXNlZC1leHByZXNzaW9uXG5leHBvcnQgZGVmYXVsdCBCYWNrZW5kcztcbiJdLAogICJtYXBwaW5ncyI6ICI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBOzs7QUNBQTtBQUFBO0FBQUEsZ0JBQUFBO0FBQUEsRUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUEsSUFBSSxTQUFTLENBQUM7QUFDZCxJQUFJLFlBQVksQ0FBQztBQUNqQixJQUFJLE1BQU0sT0FBTyxlQUFlLGNBQWMsYUFBYTtB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O0FBQUEsRUFBSTtBQUFBLEVBQUk7QUFBQSxFQUFJO0FBQUEsRUFBSTtBQUFBLEVBQUk7QUFBQSxFQUFJO0FBQUEsRUFBSTtBQUFBLEVBQUs7QUFBQSxFQUFLO0FBQUEsRUFBSztBQUFBLEVBQUs7QUFBQSxFQUFLO0FBQUEsRUFBSztBQUFBLEVBQUc7QUFDL0Q7QUFFQSxJQUFJLE9BQU87QUFBQTtBQUFBLEVBQ1Q7QUFBQSxFQUFJO0FBQUEsRUFBSTtBQUFBLEVBQUk7QUFBQSxFQUFJO0FBQUEsRUFBSTtBQUFBLEVBQUk7QUFBQSxFQUFJO0FBQUEsRUFBSTtBQUFBLEVBQUk7QUFBQSxFQUFJO0FBQUEsRUFBSTtBQUFBLEVBQUk7QUFBQSxFQUFJO0FBQUEsRUFBSTtBQUFBLEVBQUk7QUFBQSxFQUM1RDtBQUFBLEVBQUk7QUFBQSxFQUFJO0FBQUEsRUFBSTtBQUFBLEVBQUk7QUFBQSxFQUFJO0FBQUEsRUFBSTtBQUFBLEVBQUk7QUFBQSxFQUFJO0FBQUEsRUFBSTtBQUFBLEVBQUk7QUFBQSxFQUFJO0FBQUEsRUFBSTtBQUFBLEVBQUk7QUFBQSxFQUFJO0FBQzFEO0FBRUEsSUFBSSxRQUFRO0FBQUE7QUFBQSxFQUNWO0FBQUEsRUFBRztBQUFBLEVBQUc7QUFBQSxFQUFHO0FBQUEsRUFBRztBQUFBLEVBQUc7QUFBQSxFQUFHO0FBQUEsRUFBRztBQUFBLEVBQUk7QUFBQSxFQUFJO0FBQUEsRUFBSTtBQUFBLEVBQUk7QUFBQSxFQUFJO0FBQUEsRUFBSTtBQUFBLEVBQUk7QUFBQSxFQUFLO0FBQUEsRUFDdEQ7QUFBQSxFQUFLO0FBQUEsRUFBSztBQUFBLEVBQUs7QUFBQSxFQUFLO0FBQUEsRUFBTTtBQUFBLEVBQU07QUFBQSxFQUFNO0FBQUEsRUFBTTtBQUFBLEVBQU07QUFBQSxFQUNsRDtBQUFBLEVBQU07QUFBQSxFQUFPO0FBQUEsRUFBTztBQUFBLEVBQU87QUFBQSxFQUFHO0FBQ2hDO0FBRUEsSUFBSSxPQUFPO0FBQUE7QUFBQSxFQUNUO0FBQUEsRUFBSTtBQUFBLEVBQUk7QUFBQSxFQUFJO0FBQUEsRUFB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QyxLQUFLO0FBQ1QsV0FBRyxJQUFXLHdCQUFpQyxlQUFlLHVDQUF1QyxDQUFDO0FBQUEsTUFDdkcsT0FBTztBQUNOLFlBQUksT0FBTyxTQUFTLEVBQUU7QUFBQSxNQUN2QjtBQUFBLElBQ0Q7QUFBQSxFQUNEO0FBRUEsTUFBSSxZQUFZLFFBQVEsT0FBTyxZQUFZLFVBQVU7QUFDcEQsUUFBSSxvQkFBb0I7QUFDeEIsVUFBTSxRQUFRLE9BQU8sS0FBSyxPQUFPLEVBQUUsT0FBTyxPQUFLLE1BQU0sSUFBSTtBQUV6RCxVQUFNLFFBQVEsT0FBSztBQUNsQixZQUFNLElBQUksUUFBUSxDQUFDO0FBQ25CLFVBQUksTUFBTSxRQUFRLE9BQU8sTUFBTSxZQUFZLEVBQUUsSUFBSSxHQUFHO0FBQ25EO0FBQ0Esc0JBQWMsR0FBRyxTQUFVLEdBQUdGLEtBQUs7QUFDbEM7QUFDQSxjQUFJLEdBQUc7QUFDTixnQkFBSSxRQUFRO0FBQ1g7QUFBQSxZQUNEO0FBQ0EscUJBQVM7QUFDVCxlQUFHLENBQUM7QUFBQSxVQUNMLE9BQU87QUFDTixvQkFBUSxDQUFDLElBQUlBO0FBQ2IsZ0JBQUksY0FBYyxLQUFLLG1CQUFtQjtBQUN6QyxxQkFBTztBQUFBLFlBQ1I7QUFBQSxVQUNEO0FBQUEsUUFDRCxDQUFDO0FBQUEsTUFDRjtBQUFBLElBQ0QsQ0FBQztBQUNELHdCQUFvQjtBQUFBLEVBQ3JCO0FBQ0EsTUFBSSxjQUFjLEdBQUc7QUFDcEIsV0FBTztBQUFBLEVBQ1I7QUFDRDsiLAogICJuYW1lcyI6IFsiQnVmZmVyIiwgImZpbGwiLCAidG9TdHJpbmciLCAiY29tcGFyZSIsICJyZWFkIiwgImkiLCAid3JpdGUiLCAiYnl0ZUxlbmd0aCIsICJFcnJvckNvZGUiLCAiZXJyIiwgIkJ1ZmZlciIsICJmcm9tIiwgIkJ1ZmZlciIsICJmcyIsICJCdWZmZXIiLCAiZXJyIiwgImRkIiwgImZzIiwgIkJ1ZmZlciIsICJmcyIsICJGUyIsICJlIiwgImVyciIsICJzcGxpdFBhdGgiLCAiZXIiLCAiZXIyIiwgImVycjIiLCAiQnVmZmVyIiwgIkJ1ZmZlciIsICJmcyIsICJyZXNvbHZlIiwgImVyciIsICJvcCIsICJlIiwgImVyciIsICJyZXNvbHZlIiwgImZzIiwgIkJ1ZmZlciIsICJyZXMiLCAiZXJyIiwgInJlc29sdmUiLCAiZnMiLCAicCIsICJCdWZmZXIiLCAia2V5cyIsICJkb25lIiwgInJlc29sdmUiLCAiZnMiLCAiZXJyIiwgIkJ1ZmZlciIsICJoYW5kbGUiLCAicmVzb2x2ZSIsICJmcyIsICJlcnIiLCAiZSIsICJCdWZmZXIiLCAiQnVmZmVyIiwgImUiLCAiZXJyIiwgInJlc29sdmUiLCAiZnMiLCAiY29udmVydEVycm9yIiwgImUiLCAicmVzb2x2ZSIsICJmcyIsICJCdWZmZXIiLCAicmVzb2x2ZSIsICJmcyIsICJmcyIsICJlIiwgInJlc29sdmUiLCAiZXJyIiwgImFyZ3MiLCAiZnMiLCAiZXJyIiwgImZzIiwgImVyciIsICJjYiIsICJzZWxmIiwgImZpbGVzIiwgInN0YXQiLCAicCIsICJyZXNvbHZlIiwgImVyciIsICJCdWZmZXIiLCAiZSIsICJmcyIsICJyZXNvbHZlIiwgImkiLCAiYXJnIiwgIkJ1ZmZlciIsICJlcnIiLCAiZSIsICJCdWZmZXIiLCAiZXJyIiwgInF1ZXVlIiwgInNwbGl0UGF0aCIsICJyZXNvbHZlIiwgImZzIiwgInNlbGYiLCAic3RhdHMiLCAiZXJyIiwgImVycjIiLCAic2VsZiIsICJsaXN0ZW5lcnMiLCAiZW1pdCIsICJkb21haW4iLCAiZXJyIiwgImFkZExpc3RlbmVyIiwgIm9uY2UiLCAicmVtb3ZlTGlzdGVuZXIiLCAicmVtb3ZlQWxsTGlzdGVuZXJzIiwgImtleXMiLCAiY29weSIsICJpbmhlcml0cyIsICJpbnNwZWN0IiwgIngiLCAiaW5zcGVjdCIsICJrZXlzIiwgImlzQXJyYXkiLCAia2V5cyIsICJCdWZmZXIiLCAiQnVmZmVyIiwgInByZXBlbmRMaXN0ZW5lciIsICJsaXN0ZW5lckNvdW50IiwgIm9uZW5kIiwgImluZGV4T2YiLCAibGlzdGVuZXJDb3VudCIsICJwcmVwZW5kTGlzdGVuZXIiLCAic2VsZiIsICJCdWZmZXIiLCAiZXJyIiwgInNlbGYiLCAib25lbmQiLCAiWl9CSU5BUlkiLCAiWl9CTE9DSyIsICJaX0JVRl9FUlJPUiIsICJaX0RBVEFfRVJST1IiLCAiWl9ERUZBVUxUX0NPTVBSRVNTSU9OIiwgIlpfREVGTEFURUQiLCAiWl9GSUxURVJFRCIsICJaX0ZJTklTSCIsICJaX0ZJWEVEIiwgIlpfRlVMTF9GTFVTSCIsICJaX0hVRkZNQU5fT05MWSIsICJaX05FRURfRElDVCIsICJaX05PX0ZMVVNIIiwgIlpfT0siLCAiWl9QQVJUSUFMX0ZMVVNIIiwgIlpfUkxFIiwgIlpfU1RSRUFNX0VORCIsICJaX1NUUkVBTV9FUlJPUiIsICJaX1RFWFQiLCAiWl9UUkVFUyIsICJaX1VOS05PV04iLCAicmFuayIsICJaX0ZJWEVEIiwgIlpfVU5LTk9XTiIsICJMRU5HVEhfQ09ERVMiLCAiTElURVJBTFMiLCAiTF9DT0RFUyIsICJEX0NPREVTIiwgIkJMX0NPREVTIiwgIkhFQVBfU0laRSIsICJNQVhfQklUUyIsICJNSU5fTUFUQ0giLCAiTUFYX01BVENIIiwgInplcm8iLCAiWl9VTktOT1dOIiwgIlpfRklYRUQiLCAiTUlOX01BVENIIiwgInplcm8iLCAic3RhdHVzIiwgImZyb20iLCAiY29kZXMiLCAiZmlsbCIsICJDT0RFUyIsICJMRU5TIiwgIkRJU1RTIiwgIlpfRklOSVNIIiwgIlpfQkxPQ0siLCAiWl9PSyIsICJaX1NUUkVBTV9FTkQiLCAiWl9TVFJFQU1fRVJST1IiLCAiWl9EQVRBX0VSUk9SIiwgIlpfQlVGX0VSUk9SIiwgIlpfREVGTEFURUQiLCAiVFlQRSIsICJCQUQiLCAiRU5PVUdIX0xFTlMiLCAiRU5PVUdIX0RJU1RTIiwgIlpfU1RSRUFNX0VSUk9SIiwgIkVOT1VHSF9MRU5TIiwgIkVOT1VHSF9ESVNUUyIsICJaX09LIiwgIkxFTlMiLCAiRElTVFMiLCAiY29weSIsICJmcm9tIiwgIlpfU1RSRUFNX0VSUk9SIiwgIlRZUEUiLCAiWl9PSyIsICJCQUQiLCAiWl9ERUZMQVRFRCIsICJaX0JMT0NLIiwgIkNPREVTIiwgIlpfU1RSRUFNX0VORCIsICJaX0RBVEFfRVJST1IiLCAiWl9GSU5JU0giLCAiWl9CVUZfRVJST1IiLCAiWl9OT19GTFVTSCIsICJaX1BBUlRJQUxfRkxVU0giLCAiWl9GVUxMX0ZMVVNIIiwgIlpfRklOSVNIIiwgIlpfQkxPQ0siLCAiWl9UUkVFUyIsICJaX09LIiwgIlpfU1RSRUFNX0VORCIsICJaX05FRURfRElDVCIsICJaX1NUUkVBTV9FUlJPUiIsICJaX0RBVEFfRVJST1IiLCAiWl9CVUZfRVJST1IiLCAiWl9ERUZBVUxUX0NPTVBSRVNTSU9OIiwgIlpfRklMVEVSRUQiLCAiWl9IVUZGTUFOX09OTFkiLCAiWl9STEUiLCAiWl9GSVhFRCIsICJaX0JJTkFSWSIsICJaX1RFWFQiLCAiWl9VTktOT1dOIiwgIlpfREVGTEFURUQiLCAic3RhdHVzIiwgInNlbGYiLCAiYmluZGluZyIsICJiaW5kaW5nIiwgIlpsaWIiLCAic2VsZiIsICJDb21wcmVzc2lvbk1ldGhvZCIsICJmcyIsICJyZXNvbHZlIiwgInNsaWNlIiwgInJlc29sdmUiLCAiZnMiLCAiZnMiLCAibW9kdWxlIiwgImNvbmZpZyIsICJyZXNvbHZlIl0KfQo=
