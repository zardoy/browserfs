{"version":3,"file":"levenshtein.js","sourceRoot":"","sources":["../../../src/core/levenshtein.ts"],"names":[],"mappings":"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","sourcesContent":["/*\n * Levenshtein distance, from the `js-levenshtein` NPM module.\n * Copied here to avoid complexity of adding another CommonJS module dependency.\n */\n\nfunction _min(d0: number, d1: number, d2: number, bx: number, ay: number): number {\n\treturn d0 < d1 || d2 < d1 ? (d0 > d2 ? d2 + 1 : d0 + 1) : bx === ay ? d1 : d1 + 1;\n}\n\n/**\n * Calculates levenshtein distance.\n * @param a\n * @param b\n */\nexport default function levenshtein(a: string, b: string): number {\n\tif (a === b) {\n\t\treturn 0;\n\t}\n\n\tif (a.length > b.length) {\n\t\tconst tmp = a;\n\t\ta = b;\n\t\tb = tmp;\n\t}\n\n\tlet la = a.length;\n\tlet lb = b.length;\n\n\twhile (la > 0 && a.charCodeAt(la - 1) === b.charCodeAt(lb - 1)) {\n\t\tla--;\n\t\tlb--;\n\t}\n\n\tlet offset = 0;\n\n\twhile (offset < la && a.charCodeAt(offset) === b.charCodeAt(offset)) {\n\t\toffset++;\n\t}\n\n\tla -= offset;\n\tlb -= offset;\n\n\tif (la === 0 || lb === 1) {\n\t\treturn lb;\n\t}\n\n\tconst vector = new Array<number>(la << 1);\n\n\tfor (let y = 0; y < la; ) {\n\t\tvector[la + y] = a.charCodeAt(offset + y);\n\t\tvector[y] = ++y;\n\t}\n\n\tlet x: number;\n\tlet d0: number;\n\tlet d1: number;\n\tlet d2: number;\n\tlet d3: number;\n\tfor (x = 0; x + 3 < lb; ) {\n\t\tconst bx0 = b.charCodeAt(offset + (d0 = x));\n\t\tconst bx1 = b.charCodeAt(offset + (d1 = x + 1));\n\t\tconst bx2 = b.charCodeAt(offset + (d2 = x + 2));\n\t\tconst bx3 = b.charCodeAt(offset + (d3 = x + 3));\n\t\tlet dd = (x += 4);\n\t\tfor (let y = 0; y < la; ) {\n\t\t\tconst ay = vector[la + y];\n\t\t\tconst dy = vector[y];\n\t\t\td0 = _min(dy, d0, d1, bx0, ay);\n\t\t\td1 = _min(d0, d1, d2, bx1, ay);\n\t\t\td2 = _min(d1, d2, d3, bx2, ay);\n\t\t\tdd = _min(d2, d3, dd, bx3, ay);\n\t\t\tvector[y++] = dd;\n\t\t\td3 = d2;\n\t\t\td2 = d1;\n\t\t\td1 = d0;\n\t\t\td0 = dy;\n\t\t}\n\t}\n\n\tlet dd: number = 0;\n\tfor (; x < lb; ) {\n\t\tconst bx0 = b.charCodeAt(offset + (d0 = x));\n\t\tdd = ++x;\n\t\tfor (let y = 0; y < la; y++) {\n\t\t\tconst dy = vector[y];\n\t\t\tvector[y] = dd = dy < d0 || dd < d0 ? (dy > dd ? dd + 1 : dy + 1) : bx0 === vector[la + y] ? d0 : d0 + 1;\n\t\t\td0 = dy;\n\t\t}\n\t}\n\n\treturn dd;\n}\n"]}